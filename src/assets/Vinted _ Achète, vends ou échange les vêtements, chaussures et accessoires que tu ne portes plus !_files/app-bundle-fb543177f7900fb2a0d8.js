(()=>{"use strict";var e,t,i,n,s,r={55001:(e,t,i)=>{let n,s,r;i.d(t,{GL:()=>r,s1:()=>n,tv:()=>s}),function(e){e[e.None=0]="None",e[e.Shipping=1]="Shipping",e[e.Billing=2]="Billing"}(n||(n={})),function(e){e.CheckoutAddress="checkout_address",e.GenerateLabelAddress="generate_label_address"}(s||(s={})),function(e){e.Country="country",e.Name="name",e.Line1="line1",e.Line2="line2",e.PostalCode="postal_code",e.City="city"}(r||(r={}))},53617:(e,t,i)=>{let n;i.d(t,{$2:()=>o,KA:()=>u,Qd:()=>l,jk:()=>r,mO:()=>d,oQ:()=>n,pD:()=>s,u9:()=>a,xy:()=>c}),function(e){e.InboxNotification="inbox-notification",e.InboxMessage="inbox-message",e.PromoBox="promobox",e.InAppMessage="in-app-message"}(n||(n={}));const s=Object.values(n),r=20,a=3,o=2;let l,c;!function(e){e.Cover="cover",e.Splash="splash"}(l||(l={})),function(e){e.RegistrationCompleted="registration_completed",e.ListingCreated="listing_created",e.EscrowPurchaseCompleted="escrow_purchase_completed",e.MarkedAsSold="marked_as_sold",e.ConfirmedEmail="confirmed_email",e.FirstAppViewAfterOnboarding="first_app_view_after_onboarding",e.AddedToFavourites="added_to_favourites"}(c||(c={}));const d="braze_confirmed_email",u=[c.ListingCreated,c.EscrowPurchaseCompleted,c.MarkedAsSold,c.AddedToFavourites]},1731:(e,t,i)=>{i.d(t,{GP:()=>l,L7:()=>n,Nf:()=>a,P0:()=>o,Ry:()=>c,Xx:()=>r,Yt:()=>s});const n=1e3,s=60,r=60*s,a=24*r,o=7*a,l=365.25,c=30.42},8920:(e,t,i)=>{let n;i.d(t,{IZ:()=>s,Lp:()=>n}),function(e){e.At="vinted.at",e.AtSandbox="sandbox-at.vinted.net",e.Be="vinted.be",e.BeSandbox="sandbox-be.vinted.net",e.Cz="vinted.cz",e.OldCz="old.vinted.cz",e.CzSandbox="sandbox-cz.vinted.net",e.OldCzSandbox="sandbox-cz-old.vinted.net",e.De="vinted.de",e.OldDe="kleiderkreisel.de",e.DeSandbox="sandbox-de.vinted.net",e.OldDeBabies="mamikreisel.de",e.OldDeBabiesSandbox="sandbox-de-babies.vinted.net",e.Es="vinted.es",e.OldEs="local.vinted.es",e.EsSandbox="sandbox-es.vinted.net",e.OldEsSandbox="sandbox-es-local.vinted.net",e.Fr="vinted.fr",e.FrSandbox="sandbox-fr.vinted.net",e.Hu="vinted.hu",e.HuSandbox="sandbox-hu.vinted.net",e.Lt="vinted.lt",e.LtSandbox="sandbox-new-lt.vinted.net",e.Lu="vinted.lu",e.LuSandbox="sandbox-lu.vinted.net",e.Nl="vinted.nl",e.OldNl="local.vinted.nl",e.NlSandbox="sandbox-nl.vinted.net",e.OldNlSandbox="sandbox-nl-local.vinted.net",e.Pl="vinted.pl",e.OldPl="old.vinted.pl",e.PlSandbox="sandbox-pl.vinted.net",e.OldPlSandbox="sandbox-pl-old.vinted.net",e.Se="vinted.se",e.SeSandbox="sandbox-se.vinted.net",e.Sk="vinted.sk",e.SkSandbox="sandbox-sk.vinted.net",e.Pt="vinted.pt",e.PtSandbox="sandbox-pt.vinted.net",e.Uk="vinted.co.uk",e.OldUk="old.vinted.co.uk",e.UkSandbox="sandbox-uk.vinted.net",e.OldUkSandbox="sandbox-uk-old.vinted.net",e.Us="vinted.com",e.OldUs="old.vinted.com",e.UsSandbox="sandbox-us.vinted.net",e.OldUsSandbox="sandbox-us-old.vinted.net",e.It="vinted.it",e.ItSandbox="sandbox-it.vinted.net",e.Ro="vinted.ro",e.RoSandbox="sandbox-ro.vinted.net",e.Dk="vinted.dk",e.DkSandbox="sandbox-dk.vinted.net",e.Fi="vinted.fi",e.FiSandbox="sandbox-fi.vinted.net"}(n||(n={}));const s={[n.OldCz]:n.Cz,[n.OldCzSandbox]:n.CzSandbox,[n.OldDe]:n.De,[n.OldDeBabies]:n.De,[n.OldDeBabiesSandbox]:n.DeSandbox,[n.OldEs]:n.Es,[n.OldEsSandbox]:n.EsSandbox,[n.OldNl]:n.Nl,[n.OldNlSandbox]:n.NlSandbox,[n.OldPl]:n.Pl,[n.OldPlSandbox]:n.PlSandbox,[n.OldUk]:n.Uk,[n.OldUkSandbox]:n.UkSandbox,[n.OldUs]:n.Us,[n.OldUsSandbox]:n.UsSandbox};n.FrSandbox,n.EsSandbox,n.BeSandbox,n.LuSandbox,n.NlSandbox,n.LtSandbox,n.DeSandbox,n.AtSandbox,n.ItSandbox,n.UkSandbox,n.PtSandbox,n.UsSandbox,n.CzSandbox,n.SkSandbox,n.PlSandbox,n.SeSandbox,n.HuSandbox,n.RoSandbox,n.DkSandbox,n.FiSandbox,n.Fr,n.Es,n.Be,n.Lu,n.Nl,n.Lt,n.De,n.At,n.It,n.Uk,n.Pt,n.Us,n.Cz,n.Sk,n.Pl,n.Se,n.Hu,n.Ro,n.Dk,n.Fi},39438:(e,t,i)=>{i.d(t,{Fv:()=>x,Fx:()=>s,HM:()=>b,Ku:()=>a,L8:()=>l,MW:()=>d,R9:()=>o,SQ:()=>h,Si:()=>u,Tf:()=>n,UX:()=>p,Xn:()=>y,cJ:()=>g,dr:()=>v,kU:()=>c,nC:()=>f,z5:()=>m,zR:()=>r});const n=3,s=8,r=["facebook","google","email"],a=4,o=5,l=20,c=(Object.freeze({AUTO:"auto",MANUAL:"manual",NONE:"none"}),-1),d=1;let u,m;!function(e){e.VintedGuide="vinted_guide",e.HcSearch="hc_search",e.HcTransaction="hc_transaction",e.HcTopics="hc_topics",e.ConversationTx="conversation_tx",e.ConversationNoTx="conversation_no",e.ProductLink="product_link",e.ExternalLink="external_link",e.DataExport="data_export"}(u||(u={})),function(e){e.Control="c",e.InitiallyEnabled="on",e.InitiallyDisabled="off"}(m||(m={}));const p="https://vinted-core-assets.s3.eu-central-1.amazonaws.com",g="".concat(p,"/images"),h=("".concat(p,"/ads"),"".concat(p,"/").concat("shipping","/tracking/tracking_code_")),x="https://static.vinted.com",f="twoFACancelled",y="twoFACompleted";let v,_,b;!function(e){e.BuyerRights="buyerRights",e.ProfessionalSeller="professionalSeller"}(v||(v={})),function(e){e.RecentlyFavouritedItems="favourites",e.PopularItems="popular_items",e.ItemsBasedOnRecentPurchases="recent_purchases_by_brand",e.RecommendedItems="recommended_items",e.GenericItemsBlock="blocks"}(_||(_={})),function(e){e[e.Vinted=0]="Vinted",e[e.Braze=1]="Braze",e[e.BrazeSticky=2]="BrazeSticky"}(b||(b={}))},6909:(e,t,i)=>{i.d(t,{F_:()=>s,Wd:()=>l,Wn:()=>a,ZH:()=>d,aA:()=>m,g$:()=>u,jb:()=>o,qk:()=>c,tX:()=>n,ty:()=>r});const n=255,s=400,r=300,a=150,o=30;let l,c,d,u,m;!function(e){e.Owner="owner",e.Representor="representor",e.IntellectualProperty="intellectual_property",e.Individual="individual",e.TrustedFlagger="trusted_flagger",e.Organization="organization"}(l||(l={})),function(e){e.Owner="owner",e.Agent="agent",e.Lawyer="lawyer",e.IpOwner="intellectual_property_owner",e.IpAgent="intellectual_property_agent",e.IpLawyer="intellectual_property_lawyer",e.Individual="individual",e.TrustedFlagger="trusted_flagger",e.Organization="organization"}(c||(c={})),function(e){e.IntellectualProperty="intellectual_property",e.OtherIllegal="other_illegal",e.Unsafe="unsafe"}(d||(d={})),function(e){e.Copyright="copyright",e.Trademark="trademark",e.Design="design",e.Patent="patent",e.Other="other"}(u||(u={})),function(e){e.Item="item",e.User="user",e.Message="message",e.MessageFeedback="message_feedback"}(m||(m={}))},33952:(e,t,i)=>{i.d(t,{Lt:()=>n,w_:()=>s});const n="/api/v2",s="/auth/token_refresh"},825:(e,t,i)=>{let n;i.d(t,{U:()=>n}),function(e){e[e.Default=10]="Default",e[e.Intro=20]="Intro",e[e.Seller=30]="Seller",e[e.NewItem=60]="NewItem",e[e.IdentityDocument=70]="IdentityDocument"}(n||(n={}))},88816:(e,t,i)=>{i.d(t,{$MB:()=>Pe,$WJ:()=>ge,$ru:()=>Xe,AH6:()=>U,AME:()=>te,A_o:()=>Nt,AnP:()=>Ae,Aof:()=>Qe,AsW:()=>Ke,B5r:()=>ot,Btp:()=>Ne,C$7:()=>le,CKl:()=>Et,CR5:()=>ti,CcO:()=>M,Ch7:()=>zt,CqN:()=>ze,DIE:()=>he,DWf:()=>f,E2e:()=>wt,FRj:()=>de,Fj7:()=>jt,G$j:()=>Le,G0B:()=>l,Ga_:()=>It,H$U:()=>ye,HFI:()=>St,II0:()=>v,Ife:()=>B,J55:()=>Ct,JFJ:()=>V,JGG:()=>ee,JXU:()=>z,Jo:()=>st,Jt2:()=>Gt,K6I:()=>Qt,KPt:()=>ce,Kcm:()=>Ht,Kss:()=>Te,Le8:()=>je,Lud:()=>Ut,M56:()=>lt,NUJ:()=>re,Nc0:()=>J,Nei:()=>Me,Nu9:()=>N,O8U:()=>Ot,OJx:()=>d,OkD:()=>Zt,Q4U:()=>C,QwI:()=>ae,R1Q:()=>Oe,RDu:()=>Jt,RR:()=>k,Skm:()=>Ee,Svv:()=>_,TCk:()=>u,TVB:()=>ke,TcE:()=>Dt,UNR:()=>x,URX:()=>Wt,V55:()=>j,VHG:()=>Pt,VbG:()=>$t,Who:()=>ei,WoV:()=>Kt,Wqt:()=>oe,XJD:()=>H,XQy:()=>we,Xly:()=>Mt,YFw:()=>Tt,YJ3:()=>E,YYh:()=>qt,Yi3:()=>F,Yms:()=>De,Z2t:()=>Re,_5i:()=>ne,_Ig:()=>$e,_eM:()=>Ue,_qi:()=>rt,aeV:()=>me,b1y:()=>D,bDw:()=>w,c1u:()=>_t,c8F:()=>pe,cS4:()=>nt,chM:()=>Rt,coZ:()=>ue,cz_:()=>$,dML:()=>ft,dZJ:()=>y,dm4:()=>b,dy1:()=>ut,eDk:()=>h,eUh:()=>Ze,fK8:()=>at,fMY:()=>I,fbH:()=>A,fds:()=>gt,gg2:()=>et,hIg:()=>Se,hOY:()=>He,hXo:()=>We,hfk:()=>xe,hu_:()=>qe,hzM:()=>O,iDM:()=>Ce,iGV:()=>ve,iTk:()=>r,iik:()=>L,j9U:()=>Y,jBf:()=>Vt,jJb:()=>Je,jUH:()=>Xt,jgR:()=>_e,kEW:()=>ct,kHg:()=>K,ljN:()=>Ge,lw5:()=>ht,m14:()=>o,m21:()=>c,mYc:()=>q,n$u:()=>Lt,n5s:()=>Ie,nOY:()=>yt,nxq:()=>Ve,oL2:()=>Ft,ojr:()=>be,ouD:()=>dt,ozz:()=>it,pLL:()=>s,q0m:()=>pt,qVU:()=>Be,qfj:()=>Fe,qpH:()=>a,qyY:()=>G,rHE:()=>At,rJr:()=>Q,rNv:()=>Ye,sAE:()=>T,sEI:()=>R,ssV:()=>bt,suX:()=>Yt,tk0:()=>mt,v24:()=>W,v6n:()=>p,v6v:()=>kt,vHQ:()=>fe,vK_:()=>X,vXD:()=>xt,wwh:()=>ie,xLf:()=>tt,xYj:()=>se,xZc:()=>P,xem:()=>g,xoC:()=>vt,yDJ:()=>m,yTj:()=>Bt,yu7:()=>Z,zDS:()=>S});var n=i(73235);const s="/member/personalization/sizes",r=e=>"/member/personalization/sizes/".concat(e),a="/member/personalization/brands",o="/member/personalization/brands/followed",l=e=>"/member/".concat(e),c=e=>"/admin/users/".concat(e,"/restore"),d=(e,t)=>"/member/general/search?page=".concat(e,"&search_text=").concat(t),u=(e,t,i)=>(0,n.Iq)("/member/general/follow/".concat(e),{tab:t,page:i}),m=(e,t)=>t?"/member/general/following/".concat(e,"?page=").concat(t):"/member/general/following/".concat(e),p=(e,t)=>t?"/member/general/followers/".concat(e,"?page=").concat(t):"/member/general/followers/".concat(e),g=e=>"/admin/member/".concat(e,"/user_msg_templates"),h=e=>"/member/".concat(e,"/satisfaction_survey/new"),x="/items/new",f=e=>"/items/".concat(e),y=e=>"/items/".concat(e,"/edit"),v=(e,t)=>"/items/".concat(e,"/edit#").concat(t),_="/settings/profile",b="/settings/account",j="/settings/donations",S="/settings/shipping",Z="/settings/bundle_discount",I="/settings/privacy",C="/settings/policies",k=e=>"/member/".concat(e,"/bundles/new"),w="/items/featured_collections",P=e=>"/items/featured_collections/".concat(e),z="/catalog",T="/settings/account/send_email_confirmation",F=e=>" /transactions/".concat(e,"/mark_as_sold/new?act_as=sold"),N=e=>"/member/items/reservation?id=".concat(e),L=e=>"/member/items/close?act_as=sold&id=".concat(e),E=(e,t)=>"/transaction/buy/new?transaction_id=".concat(e,"&source_screen=").concat(t),O=e=>"/transaction/completed/payment_close?transaction_id=".concat(e),R=e=>"/checkout?transaction_id=".concat(e),D="/settings/subscriptions",A="/users/verification/email/new",M="/member/settings/email/confirm",U=e=>"/member/signup/resend_confirmation?ref_url=".concat(e),B="/member/general/forgot_password",q="/",V="/brands",H=e=>"/brands/by_letter/".concat(e),G="/terms_and_conditions",W="/impressum",X="/pro-terms-of-use",Y="/users/verification/phone/new",K="/users/verification/phone/edit",J="/our-platform",Q="/admin/catalog_items",$="/wallet/balance",ee=function(){let{type:e,status:t,page:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"all"};return(0,n.Iq)("/my_orders/".concat(e),{status:t,page:i})},te="/wallet/bank_account",ie=e=>"/help/for_transaction/".concat(e),ne=e=>"/complaints/".concat(e),se=e=>"/member/".concat(e,"/feedback/new"),re=(e,t)=>"/member/".concat(e,"/feedback/").concat(t,"/edit"),ae="/app",oe=(e,t)=>"/transactions/".concat(e,"/offer_requests/").concat(t,"/accept"),le=(e,t)=>"/transactions/".concat(e,"/offer_requests/").concat(t,"/reject"),ce="/settings/security",de="/wallet/setup",ue="/wallet/payouts/new",me="/items/push_up/new",pe="/settings/payments_identity",ge="/merge",he="/merge/consent",xe="/delete_account",fe="/member/general/delete_account",ye="/member/general/delete_account_success",ve="/member/signup/select_type",_e="/member/signup/email_start",be="/member/general/change_password",je=e=>{let{refUrl:t,authProps:{control_code:i,next_resend_available_in:s,user_masked_info:r,show_resend_option:a}}=e;return(0,n.Iq)("/member/general/code_login",{ref_url:t,control_code:i,next_resend_available_in:s,user_masked_info:r,show_resend_option:a||null})},Se="/member/general/search",Ze="/member/items/favourite_list",Ie=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"/wallet/payouts/".concat(e).concat(t?"?success=true":"")},Ce="/admin_alert/new",ke="/help",we="/help/103",Pe="/help/360",ze="/member/notifications",Te="/help/support_tickets/new",Fe=e=>"/forum/post_edit?id=".concat(e),Ne=(e,t)=>t?"/forum/topic_new?forum_id=".concat(e,"&sub_forum_id=").concat(t):"/forum/topic_new?forum_id=".concat(e),Le=(e,t)=>"".concat(e,"?post_id=").concat(t),Ee=(e,t)=>"".concat(e,"?page=").concat(t),Oe="/forum",Re="/pricelist",De="/forum/newest",Ae="/forum/own_topics",Me="/forum/favourite_topics",Ue="/forum/topic_edit",Be="/forum/search",qe="/settings/payments",Ve="/users/verification/user_2fa",He="/privacy-policy",Ge="/cookie-policy",We="/safety_pro#buyer-protection",Xe="/pro-terms-of-sale",Ye=e=>"/wallet/income_reports/".concat(e,".pdf"),Ke=(e,t)=>"/wallet/income_reports/".concat(e,"/").concat(t,".pdf"),Je=e=>"/wallet/invoices/".concat(e),Qe="/referrals",$e="/referrals/registrations",et="/request_data_export",tt="/help/52",it="/help/342",nt="/help/908",st="/pro",rt="/pro-guide",at="/help/intellectual_property_infringement",ot="".concat(at,"/report"),lt="/help/notice_and_action_form",ct="".concat(lt,"/report"),dt="/about",ut="/donations/close",mt="https://www.facebook.com/vinted",pt="https://www.linkedin.com/company/vinted",gt="https://www.instagram.com/weworkatvinted",ht="/help",xt="/help/4-selling?access_channel=hc_topics",ft="/help/5-buying?access_channel=hc_topics",yt="/help/15-trust-safety",vt="/help/465-the-vinted-refund-policy",_t="/safety",bt="/help/s",jt="/help/260",St="/users/verification/email/new",Zt="/how_it_works",It="/infoboard",Ct="/item_verification",kt="/presse",wt="/advertising",Pt="https://careers.vinted.com/",zt="/jobs",Tt="/settings/security/phone_verification",Ft="/settings/security/authentication",Nt="/wallet/invoices",Lt="https://company.vinted.com",Et="/settings/security/sessions",Ot="/users/verification",Rt="/users/verification/email_code",Dt="/auth/google/oauth",At="/settings/taxpayer",Mt="/wallet/history",Ut="/help/1147",Bt="/app_feedbacks",qt="/items/vas_gallery/new",Vt="https://itunes.apple.com/fr/app/vinted.fr/id632064380?mt=8",Ht="https://play.google.com/store/apps/details?id=fr.vinted",Gt="/wallet/history/overview",Wt="/wallet/income_reports",Xt="/member/general/reset_password",Yt="/pro/register",Kt=e=>"/complaints/".concat(e,"/faq_entry"),Jt=e=>"/admin/item_moderation_actions/".concat(e),Qt=e=>"/admin/member/".concat(e),$t=e=>"/dsa/appeal_education?thread_id=".concat(e),ei="/settings/tax_rules",ti="/items/collections_management"},28765:(e,t,i)=>{i.d(t,{doD:()=>ws,RsS:()=>ha,y$3:()=>ci,Tiv:()=>Vi,VES:()=>ui,phm:()=>pi,ykQ:()=>En,rfe:()=>nr,EtJ:()=>xn,o_z:()=>rs,Uk1:()=>st,AH9:()=>mt,jMA:()=>Xr,Cpd:()=>Wr,SlO:()=>fi,t9M:()=>oa,UKV:()=>ei,UaW:()=>z,dDV:()=>ae,OdC:()=>qt,XSO:()=>F,_RO:()=>js,v6_:()=>sn,tey:()=>Or,hV$:()=>Ss,H92:()=>xe,vOV:()=>ye,SQ:()=>Ys,hXi:()=>Be,Piy:()=>hr,hRd:()=>ar,zVu:()=>on,mat:()=>Hn,CmU:()=>qn,fCy:()=>U,H0Q:()=>qe,Qqe:()=>T,CmA:()=>vs,K5E:()=>ys,LjM:()=>Li,XpH:()=>Di,ViU:()=>xi,CbZ:()=>dt,Kki:()=>Xs,cBQ:()=>Se,yUl:()=>as,m3m:()=>oi,lJ8:()=>it,O6N:()=>Vt,Xcr:()=>N,ZwT:()=>Hi,b2s:()=>Xi,SJ8:()=>Jn,OB5:()=>ni,Tbm:()=>ht,kN5:()=>cn,qq4:()=>Qe,FrJ:()=>et,TAb:()=>Tn,Rg8:()=>os,U3Z:()=>_r,wzY:()=>E,lcj:()=>O,Ypy:()=>Os,m9e:()=>Ds,$Zg:()=>Ns,DCS:()=>Ls,VcN:()=>xt,h9K:()=>xs,h8f:()=>oe,Kel:()=>Dr,KB9:()=>qr,N$Y:()=>rn,bBU:()=>an,DS3:()=>Tr,Hbo:()=>ir,SkH:()=>ve,$tm:()=>ln,nL5:()=>$e,lvz:()=>nt,jn8:()=>$i,te0:()=>la,o$z:()=>ur,b41:()=>mr,lU0:()=>ji,WLg:()=>Ta,xs$:()=>Bi,T7i:()=>qi,EyV:()=>Te,zdL:()=>At,Rbq:()=>$,vp3:()=>J,xu9:()=>ee,OPU:()=>br,UaB:()=>Hs,MgG:()=>fe,CX1:()=>Ji,sCS:()=>zn,fH7:()=>Yi,QVE:()=>ii,Xkj:()=>vn,s0m:()=>us,CS2:()=>H,sld:()=>V,ehx:()=>q,l3L:()=>B,bRb:()=>G,jkM:()=>C,Pa5:()=>fr,Ukv:()=>ft,VKl:()=>Lt,pIS:()=>qs,VFx:()=>Us,A3N:()=>Bs,mEg:()=>tr,sk7:()=>me,_NN:()=>La,vz5:()=>Fa,bGW:()=>pn,v1X:()=>mn,MVD:()=>si,ccy:()=>jr,mSX:()=>jn,ox$:()=>Y,YQH:()=>Si,ujw:()=>Ae,iNF:()=>Gs,C$d:()=>gt,yLj:()=>On,Thf:()=>pt,tse:()=>Xt,twF:()=>Oi,lRP:()=>Ee,fLq:()=>_s,o_O:()=>mi,rG$:()=>gi,BRv:()=>ps,Rf1:()=>rr,JHI:()=>or,wDm:()=>ta,ce7:()=>Ot,zgX:()=>Pn,VyP:()=>tn,gAB:()=>He,DMe:()=>Ye,mAo:()=>We,Q1T:()=>wr,pF4:()=>Ge,Tt0:()=>yt,lLH:()=>Na,LY9:()=>hn,yjF:()=>un,FGC:()=>dn,vOD:()=>ce,qmj:()=>tt,ZzY:()=>_n,ouQ:()=>pa,onP:()=>ja,kk4:()=>Kn,W84:()=>Yr,iC_:()=>An,Vgs:()=>Dn,eBU:()=>Cn,yNR:()=>Mn,lfy:()=>Rn,OJB:()=>Cs,UnZ:()=>Un,k6p:()=>Bn,l6u:()=>kn,zzc:()=>xr,IcB:()=>Vr,co$:()=>Ri,VOc:()=>de,O7O:()=>vt,m$V:()=>Aa,ltQ:()=>Ce,Ci8:()=>ke,xjL:()=>hi,G7H:()=>va,Hvi:()=>fa,WNS:()=>da,s3k:()=>ua,Qo0:()=>ka,JUY:()=>Zt,$P8:()=>ba,dwk:()=>St,rVG:()=>Fe,shP:()=>R,KpK:()=>wa,wVq:()=>ea,Ko5:()=>Ne,_uL:()=>jt,ncE:()=>It,Za4:()=>ks,VTe:()=>vr,OjX:()=>Ii,jLV:()=>P,CA7:()=>ne,ire:()=>As,Vbs:()=>De,rBb:()=>In,cl3:()=>Sr,rbY:()=>Pa,PON:()=>lr,RPn:()=>$n,ucF:()=>_a,DZN:()=>cs,YYw:()=>fs,jN_:()=>Ra,qVB:()=>Gt,LZL:()=>cr,HcP:()=>Le,dLX:()=>Ei,$20:()=>ti,nAo:()=>Mi,SvV:()=>Ai,GIK:()=>X,Uel:()=>W,wP8:()=>ct,t$W:()=>Q,q56:()=>wi,FHL:()=>Ca,WOq:()=>ns,qhu:()=>Ts,Zqr:()=>Pt,vG0:()=>Ct,khY:()=>wt,c8t:()=>is,tUX:()=>ts,eCY:()=>es,q5k:()=>_t,no_:()=>_i,t5m:()=>vi,vyv:()=>bi,anN:()=>Ea,hSL:()=>Ui,HH2:()=>Zs,JHf:()=>Ws,nH9:()=>Mr,M0K:()=>ra,cY0:()=>gr,fax:()=>ma,uPS:()=>je,KFn:()=>Ie,agi:()=>ri,z68:()=>Da,PsI:()=>Ar,ROS:()=>ki,R8n:()=>pr,K8V:()=>gs,hTU:()=>Br,y7s:()=>ie,P7_:()=>Ft,vhg:()=>Za,Ztj:()=>k,uVi:()=>Cr,v9r:()=>be,JBB:()=>fn,D8A:()=>dr,q0f:()=>D,vr1:()=>di,ADp:()=>za,bU_:()=>Hr,ozY:()=>Gr,VIQ:()=>na,s0H:()=>ya,U27:()=>Ia,rQb:()=>ze,jsu:()=>Ci,foU:()=>Nt,G24:()=>ss,_oX:()=>Oe,iLY:()=>wn,Yh_:()=>he,cG9:()=>er,GAF:()=>le,KL1:()=>Je,dXl:()=>Yn,Nuq:()=>Ut,RDp:()=>ge,gGZ:()=>rt,hgP:()=>aa,$h1:()=>Nn,c7Q:()=>Rr,y79:()=>zt,X_6:()=>$s,RfJ:()=>Xn,yYT:()=>Kr,$Ek:()=>$r,VcV:()=>Jr,YAs:()=>zr,Cf2:()=>w,pdA:()=>Zi,Qvz:()=>ca,gU6:()=>en,QSj:()=>Rt,OjW:()=>Gn,hBm:()=>zi,k1g:()=>Fi,lXB:()=>Ht,pxw:()=>Er,RlN:()=>Qt,Fto:()=>Zr,UtU:()=>Ir,AKx:()=>Ms,Xfv:()=>kr,E7i:()=>M,lUl:()=>Pi,pDD:()=>$t,uQM:()=>Oa,O9P:()=>Es,kNI:()=>Rs,j2D:()=>Ue,r7C:()=>Qr,dM4:()=>ue,Mq$:()=>Fn,VJb:()=>gn,cdQ:()=>kt,md9:()=>sa,M9F:()=>Ln,t$o:()=>Ps,E5C:()=>I,hFg:()=>bs,MMr:()=>Ke,gr2:()=>lt,WRJ:()=>ot,CCw:()=>ls,HcE:()=>Ur,v4K:()=>Mt,NXe:()=>Bt,p9I:()=>xa,Rtx:()=>hs,NSJ:()=>K,HpW:()=>Is,aoC:()=>Re,dvI:()=>Fr,jhK:()=>bn,wKZ:()=>te,_c_:()=>Ks,wmM:()=>se,G8H:()=>re,hdd:()=>Wt,iEU:()=>zs,Gn$:()=>pe,kPm:()=>at,FZE:()=>ut,Ld0:()=>Qi,ENr:()=>Ki,rnN:()=>Lr,oWC:()=>we,bJN:()=>Zn,$Oe:()=>ai,jOQ:()=>ga,Hjk:()=>li,EZ0:()=>Ve,x9b:()=>Pe,zvU:()=>sr,mKt:()=>Wn,OGS:()=>Ti,SNK:()=>Ni,u6S:()=>Jt,iwV:()=>ms,VTZ:()=>Et,I8h:()=>Vs,SFz:()=>Yt,M8C:()=>bt,q1h:()=>Kt,FCX:()=>Dt,VA7:()=>nn,Lu2:()=>Pr,XaO:()=>Sn,mPl:()=>Vn,DtQ:()=>Qn,Pkn:()=>yr,$GW:()=>A,TZ0:()=>L,jk0:()=>Me,lUE:()=>ds,yZi:()=>Fs,_6y:()=>Ze,k3d:()=>ia,s6r:()=>_e,wj7:()=>Tt,m6G:()=>Js,LyY:()=>Wi,MUn:()=>Nr,h3H:()=>Gi,SwO:()=>yn,z5M:()=>Sa,T9Q:()=>Qs,V0r:()=>yi});var n=i(120),s=i.n(n),r=i(32699),a=i(63529),o=i(825),l=i(33952),c=i(91695),d=i(98353);const u=e=>t=>i=>t.get(e,i),m=u("/users/current"),p=u("/catalogs"),g=u("/system_configuration"),h=u("/texts"),x=u("/features"),f=u("/business_accounts/conversion"),y=u("/languages"),v=u("/discovery_catalogs"),_=u("/ads/segments");var b=i(12931);const j={"X-Money-Object":"true"},S=l.Lt,Z=new c.Z({baseURL:S},[d.jN,d.ud,d.iG,d.Ch,d.tP,d.nv]),I=()=>Z.get("/colors"),C=p(Z),k=(v(Z),()=>Z.get("/size_groups")),w=()=>Z.get("/video_game_ratings"),P=()=>Z.get("/items/configuration"),z=(e,t,i)=>Z.post("items/drafts/".concat(e,"/completion"),{draft:t,feedback_id:i},{headers:j}),T=(e,t)=>Z.post("/items/drafts",{draft:e,feedback_id:t},{headers:j}),F=e=>Z.patch("/conversations/".concat(e,"/complaint/confirm_resolved")),N=e=>Z.patch("/conversations/".concat(e,"/complaint/refuse_resolved")),L=(e,t,i)=>Z.put("/items/drafts/".concat(e),{draft:t,feedback_id:i},{headers:j}),E=e=>Z.post("/items/".concat(e,"/delete")),O=e=>Z.delete("/items/drafts/".concat(e)),R=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Z.get("/items/authenticity_modals",{params:{catalog_id:e,force:i,item_id:t}})},D=g(Z),A=(e,t,i)=>Z.put("/items/".concat(e),{item:t,feedback_id:i},{headers:j}),M=(e,t)=>Z.put("/items/".concat(e,"/is_hidden"),{is_hidden:t}),U=(e,t)=>Z.post("/items",{item:e,feedback_id:t},{headers:j}),B=e=>Z.get("/catalog/items",{params:b.tX(e),headers:j}),q=e=>Z.get("/catalog/initializers",{params:(0,r.omitBy)(e,r.isNil),headers:j}),V=e=>Z.get("/catalog/filters",{params:b.aS(e)}),H=e=>Z.get("/catalog/filters/defaults",{params:b.vb(e)}),G=e=>Z.get("/catalog/filters/search",{params:b.S8(e)}),W=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.U.Default;return Z.get("/photo_tips",{params:{entry_type:e}})},X=e=>Z.get("/photo_tips/".concat(e)),Y=()=>Z.get("/countries"),K=e=>{let{countryId:t,searchText:i}=e;return Z.get("/countries/".concat(t,"/cities"),{params:{search_text:i||""}})},J=e=>{let{keyword:t,includeAllBrands:i}=e;return Z.get("/brands",{params:(0,r.omitBy)({keyword:t,all_brands:i||null},r.isNil)})},Q=function(){let{letter:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Z.get("/brands/popular",{params:{letter:e}})},$=e=>Z.get("/brands/".concat(e)),ee=e=>Z.get("/users/".concat(e,"/brands")),te=e=>Z.post("/help_center/feedbacks",b.pJ(e)),ie=()=>Z.get("/items/show_upload_feedback"),ne=()=>Z.get("/items/upload_feedback"),se=e=>Z.put("/items/upload_feedback",b.XB(e)),re=e=>{let{userId:t,score:i,comment:n,incomplete:s}=e;return Z.post("/users/".concat(t,"/nps"),{score:i,comment:n,incomplete:s})},ae=e=>Z.put("/transactions/".concat(e,"/complete"),void 0,{headers:j}),oe=(e,t)=>Z.delete("/users/".concat(e),{params:{delete_account_notes:t}}),le=e=>{let{id:t,localize:i=!1}=e;return Z.get("/users/".concat(t),{params:{localize:i}})},ce=(e,t,i)=>Z.get("/feed/events",{params:{max_score:i,item_count:e,fetch_count:t}}),de=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return Z.get("/homepage_blocks",{params:{version:e}})},ue=()=>Z.post("/promoted_closets/orders/prepare",void 0,{headers:j}),me=e=>Z.get("/promoted_closets",{params:b.mY(e),headers:j}),pe=e=>Z.post("/promoted_closets/feedback",e),ge=e=>Z.get("/users/".concat(e.userId,"/items"),{params:b._C(e),headers:j}),he=e=>{let{userId:t,selectedItemId:i,currentPage:n,perPage:s}=e;return Z.get("/users/".concat(t,"/bundle_items"),{params:{page:n+1,per_page:s,selected_item_id:i},headers:j})},xe=e=>{let{itemIds:t,sellerId:i}=e;return Z.post("/bundle_summary",{item_ids:t,seller_id:i})},fe=e=>{let{itemIds:t,sellerId:i}=e;return Z.post("/bundle_order_review",{item_ids:t,seller_id:i})},ye=e=>{let{selectedItemIds:t,bundleTrackingId:i,bundleShippingType:n}=e;return Z.post("/bundles",{item_ids:t,bundle_id:i,bundle_shipping_type:n},{headers:j})},ve=e=>{let{transactionId:t,selectedItemIds:i,bundleTrackingId:n,bundleShippingType:s}=e;return Z.put("/transactions/".concat(t,"/bundle"),{item_ids:i,bundle_id:n,bundle_shipping_type:s},{headers:j})},_e=e=>Z.put("/users/".concat(e.userId,"/multitier_bundle_discount"),b.hr(e)),be=e=>Z.get("/users/".concat(e,"/searches/sorted"),{headers:j}),je=e=>{let{userId:t,id:i}=e;return Z.get("/users/".concat(t,"/searches/").concat(i),{headers:j})},Se=e=>{let{userId:t,search:i}=e;return Z.post("/users/".concat(t,"/searches"),{search:i},{headers:j})},Ze=e=>{let{id:t,userId:i,search:n,keepLastVisitTime:s}=e;return Z.put("/users/".concat(i,"/searches/").concat(t),{search:n,keep_last_visit_time:!!s},{headers:j})},Ie=e=>{let{query:t}=e;return Z.get("/search_suggestions",{params:{query:t}})},Ce=e=>{let{currentPage:t,perPage:i}=e;return Z.get("/inbox",{params:(0,r.omitBy)({page:t,per_page:i},r.isNil)})},ke=e=>{let{conversationId:t}=e;return Z.get("/inbox/".concat(t))},we=e=>{let{conversationId:t}=e;return Z.put("/conversations/".concat(t,"/mark_as_read"))},Pe=e=>{let{conversationId:t,translate:i}=e;return Z.put("/conversations/".concat(t,"/translation"),{translate:i})},ze=(e,t)=>Z.get("/users/".concat(e,"/tip"),{params:{type:t}}),Te=()=>Z.get("/banners"),Fe=e=>Z.get("/items/".concat(e.id),{params:{localize:e.localize||!1},headers:j}),Ne=e=>Z.get("/item_edits/".concat(e.id)),Le=e=>{let{catalogId:t,brandId:i,price:n}=e;return Z.post("/package_sizes",{item_attributes:{brand_id:i,catalog_id:t,price:n}})},Ee=()=>Z.get("/configurations/custom_shipment",{headers:j}),Oe=e=>{let{transactionId:t}=e;return Z.get("/transactions/".concat(t,"/package_sizes"))},Re=e=>{let{transactionId:t,packageSizeId:i,customShipmentPrice:n}=e;return Z.put("/transactions/".concat(t,"/package_size"),{package_size_id:i,custom_shipment_price:n})},De=y(Z),Ae=e=>Z.get("countries/".concat(e,"/languages"));async function Me(e){const t=s().create();d.jN(t),d.iG(t);const i=e||(0,a.Kd)();try{return await t.put("/session_locale",{locale:i})}catch(e){return null}}const Ue=e=>{let{conversationId:t,body:i,photoTempUuids:n}=e;return Z.post("conversations/".concat(t,"/replies"),{reply:{body:i,photo_temp_uuids:n}})},Be=e=>{let{recipientId:t,photoTempUuids:i,itemId:n}=e;return Z.post("/conversations",{opposite_user_id:t,photo_temp_uuids:i,item_id:n})},qe=e=>{let{itemId:t,initiator:i,receiverId:n}=e;return Z.post("/conversations",{initiator:i,item_id:t,opposite_user_id:n})},Ve=e=>{let{type:t,entityId:i}=e;return Z.post("/user_favourites/toggle",{type:t,user_favourites:[i]})},He=()=>Z.get("/faq_entries"),Ge=()=>Z.get("/faq_entries/not_logged_in"),We=(Xe=Z,(e,t)=>Xe.get("/faq_entries/lookup?code=".concat(e),t));var Xe;const Ye=(e=>(t,i)=>e.get("/faq_entries/".concat(t),i))(Z),Ke=e=>Z.put("/users/".concat(e,"/request_email_change")),Je=e=>{let{userId:t,filter:i,page:n,perPage:s,feedbackFilterType:a}=e;return Z.get("/user_feedbacks",{params:(0,r.omitBy)({user_id:t,filter:i,page:n,per_page:s,by:a},r.isNil)})},Qe=e=>{let{feedbackId:t}=e;return Z.delete("/user_feedbacks/".concat(t))},$e=e=>{let{feedbackId:t,comment:i}=e;return Z.put("/user_feedbacks/".concat(t,"/comment"),{comment:i})},et=e=>{let{feedbackId:t}=e;return Z.put("/user_feedbacks/".concat(t,"/comment"),{comment:null})},tt=e=>{let{feedbackId:t,localize:i}=e;return Z.get("/user_feedbacks/".concat(t),{params:{localize:i}})},it=e=>{let{userId:t,feedback:i,rating:n,transactionId:s}=e;return Z.post("/user_feedbacks",{user_id:t,feedback:i,rating:n,transaction_id:s})},nt=e=>{let{feedbackId:t,feedback:i,rating:n,feedbackRate:s}=e;return Z.patch("/user_feedbacks/".concat(t),{feedback:i,rating:n,feedback_rate:s})},st=e=>{let{id:t,email:i,code:n,fingerprint:s}=e;return Z.put("/users/".concat(t,"/save_email"),{email:i,code:n,fingerprint:s})},rt=e=>{let{page:t,perPage:i}=e;return Z.get("/notifications",{params:{page:t,per_page:i}})},at=e=>{let{userId:t,id:i,code:n,fingerprint:s}=e;return Z.put("/users/".concat(t,"/user_2fa/").concat(i),{code:n,fingerprint:s})},ot=e=>{let{userId:t,id:i,code:n,fingerprint:s}=e;return Z.post("/users/".concat(t,"/user_2fa/").concat(i,"/resend"),{code:n,fingerprint:s})},lt=e=>{let{controlCode:t,code:i,fingerprint:n}=e;return Z.post("/user_login_2fa/".concat(t,"/resend"),{code:i,fingerprint:n})},ct=e=>{let{type:t,photoEntryId:i,tempUuid:n}=e;return Z.get("/photos",{params:{type:t,photo_entry_id:i,temp_uuid:n}})},dt=e=>Z.post("/photos",e),ut=e=>{let{type:t,name:i}=e;return Z.put("/banners/".concat(t,"/seen"),{name:i})},mt=e=>{let{email:t,userId:i}=e;return Z.put("/users/".concat(i,"/change_email"),{email:t})},pt=()=>Z.get("/payments/credit_cards"),gt=e=>{let{cardId:t}=e;return Z.get("/payments/credit_cards/".concat(t))},ht=e=>{let{cardId:t}=e;return Z.delete("/payments/credit_cards/".concat(t))},xt=e=>Z.delete("/user_msg_photos/".concat(e,"/suspicion")),ft=()=>Z.get("/configurations/checkout"),yt=e=>{let{page:t,perPage:i,userId:n,includeSold:s}=e;return Z.get("/users/".concat(n,"/items/favourites"),{params:{page:t,include_sold:s,per_page:i},headers:j})},vt=e=>{let{cardId:t,blockName:i}=e;return Z.get("homepage/shuffle_card",{params:{card_id:t,block_name:i}})},_t=e=>{let{page:t,perPage:i,userId:n,nextPageToken:s}=e;return Z.get("/users/".concat(n,"/items/recommended_items"),{params:{page:t,per_page:i,next_page_token:s}})},bt=e=>{let{realName:t,target:i}=e;return Z.put("/users/real_name",{user:{real_name:t},target:i})},jt=e=>{let{brandId:t,price:i,catalogId:n}=e;return Z.post("/offline_verification/eligibility_check",{brand_id:t,catalog_id:n,price:i})},St=()=>Z.get("/tracker_attributes",{params:{type:"second_day_lister"}}),Zt=()=>Z.get("/tracker_attributes",{params:{type:"previous_lister"}}),It=e=>{let{brandId:t,statusId:i,catalogId:n}=e;return Z.get("/item_price_suggestions",{params:{brand_id:t,status_id:i,catalog_id:n}})},Ct=e=>{let{itemIds:t}=e;return Z.get("/push_ups/options",{params:{item_ids:t},headers:j})},kt=(e,t,i)=>Z.post("/push_ups/orders",{item_ids:e,effective_days:t,international:i},{headers:j}),wt=e=>Z.get("push_ups/orders/".concat(e)),Pt=e=>{let{itemPrice:t}=e;return Z.get("/push_ups/minimum_price",{params:{item_price:t},headers:j})},zt=()=>Z.get("/user_sizes"),Tt=e=>Z.post("/user_sizes",{size_ids:e}),Ft=e=>{let{brandId:t,statusId:i,catalogId:n}=e;return Z.get("/items/similar_sold_items",{params:{brand_id:t,status_id:i,catalog_id:n},headers:j})},Nt=e=>{let{id:t}=e;return Z.get("/transactions/".concat(t),{headers:j})},Lt=e=>Z.get("/transactions/".concat(e,"/checkout"),{headers:j}),Et=(e,t)=>Z.put("/transactions/".concat(e,"/checkout"),t&&b.bo(t),{headers:j}),Ot=e=>Z.get("/transactions/".concat(e,"/checkout/payment")),Rt=(e,t)=>Z.post("/transactions/".concat(e,"/checkout/payment"),b.$M(t)),Dt=(e,t)=>Z.put("/transactions/".concat(e,"/checkout/payment"),b.eI(t)),At=e=>{let{isbn:t}=e;return Z.get("/book_details",{params:{isbn:t}})},Mt=e=>Z.post("/complaints/".concat(e,"/resolve")),Ut=e=>{let{userId:t}=e;return Z.get("/users/".concat(t,"/item_facets"))},Bt=e=>Z.post("/transactions/".concat(e,"/reupload")),qt=e=>Z.post("/transactions/".concat(e,"/cancellation_agreement/confirm")),Vt=e=>Z.post("/transactions/".concat(e,"/cancellation_agreement/decline")),Ht=e=>Z.put("/transactions/".concat(e,"/shipment/mark_as_delivered")),Gt=e=>Z.get("/transactions/".concat(e,"/verification_feedbacks")),Wt=e=>Z.put("/transactions/".concat(e.transactionId,"/verification_feedbacks"),b.FE(e)),Xt=m(Z),Yt=e=>Z.put("/users/current",b.fj(e)),Kt=e=>Z.put("/users/current",{user:{user_settings:b.hg(e)}}),Jt=e=>Z.put("/business_accounts/".concat(e.businessAccountId,"/profile"),b.pY(e)),Qt=e=>{let{transactionId:t,proofPhotoUuid:i}=e;return Z.put("/transactions/".concat(t,"/shipment/mark_as_shipped"),{proof_photo_uuid:i})},$t=e=>Z.put("/transactions/".concat(e,"/shipment/parties_have_met")),ei=e=>Z.put("/transactions/".concat(e,"/claim_compensation"),void 0,{headers:j}),ti=()=>Z.get("/payments/identity/edit"),ii=()=>Z.get("/pro_terms_of_use"),ni=e=>Z.delete("/msg_threads/".concat(e,"/suspicion")),si=e=>Z.get("/complaints/".concat(e)),ri=e=>Z.get("/users/".concat(e,"/security")),ai=(e,t)=>Z.put("users/".concat(e,"/security/voluntary_2fa"),{is_voluntary_2fa:t}),oi=e=>Z.post("/users/".concat(e.userId,"/user_2fa"),{entity_id:e.entityId,type:e.entityType,fingerprint:e.fingerprint}),li=e=>Z.put("/payments/identity",{payments_identity:b.rQ(e)}),ci=e=>Z.post("/user_addresses",{user_address:b.Ix(e)}),di=()=>Z.get("/user_addresses/missing_info"),ui=e=>Z.post("/transactions/".concat(e.transactionId,"/shipping_destination"),{user_address:b.eM(e)}),mi=()=>Z.get("/user_addresses/default_billing_address"),pi=e=>Z.post("/user_addresses/missing_info",{user_address:e}),gi=()=>Z.get("/user_addresses/default_shipping_address"),hi=e=>{let{screen:t,params:i}=e;return Z.get("/info_banners/".concat(t),{params:i})},xi=(e,t)=>Z.post("/users/".concat(e,"/phone_number"),{phone_number:{number:t}}),fi=e=>{let{userId:t,currentNumber:i,newNumber:n,fingerprint:s}=e;return Z.post("/users/".concat(t,"/phone_number/change"),{current_phone:i,new_phone:n,fingerprint:s})},yi=e=>{let{userId:t,code:i,phoneNumber:n,fingerprint:s}=e;return Z.put("/users/".concat(t,"/phone_number/verify"),{code:i,phone_number:n,fingerprint:s})},vi=()=>Z.get("/referrals/registrations"),_i=()=>Z.get("/referrals/invite_instructions"),bi=()=>Z.get("/referrals/share/new"),ji=e=>Z.get("/app_links",{params:{ids:e}}),Si=e=>Z.get("/countries/".concat(e,"/bounds")),Zi=e=>Z.get("users/".concat(e,"/balance"),{headers:j}),Ii=e=>{let{title:t,description:i,catalogId:n,photoIds:s}=e;return Z.get("items/suggestions",{params:{title:t,description:i,catalog_id:n,photo_ids:s.join(",")}})},Ci=e=>{let{transactionId:t}=e;return Z.get("transactions/".concat(t,"/shipment/journey_summary"))},ki=e=>{let{transactionId:t}=e;return Z.get("transactions/".concat(t,"/shipment_instructions"),{headers:j})},wi=e=>{let{code:t,countryId:i}=e;return Z.get("postal_codes/".concat(t),{params:{country_id:i}})},Pi=e=>{let{sellerAddressId:t,transactionId:i,pickUpDate:n,digitalLabelType:s}=e;return Z.put("transactions/".concat(i,"/shipment/order"),{seller_address_id:t,pick_up_date:n,digital_label_type:s})},zi=e=>Z.post("facebook_user/link",{fb_access_token:e}),Ti=()=>Z.delete("facebook_user"),Fi=e=>Z.post("google_user/link",{id_token:e}),Ni=()=>Z.delete("google_user"),Li=e=>Z.post("/users/".concat(e.userId,"/payments_account"),b.bQ(e)),Ei=e=>Z.get("/users/".concat(e,"/payments_account")),Oi=()=>Z.get("/wallet/invoices/current",{headers:j}),Ri=(e,t)=>Z.get("/wallet/invoices/".concat(e,"/").concat(t),{headers:j}),Di=e=>Z.post("/users/".concat(e.userId,"/payouts"),b.Nd(e)),Ai=e=>Z.get("/users/".concat(e,"/payouts/new")),Mi=(e,t)=>Z.get("/users/".concat(e,"/payouts/").concat(t)),Ui=e=>Z.get("/transactions/".concat(e,"/refund")),Bi=()=>Z.post("/payments/bank_account_registrations/prepare"),qi=()=>Z.get("/bank_accounts"),Vi=(e,t)=>Z.post("/bank_accounts",{bank_account:b.cc(e),fingerprint:t}),Hi=e=>{let{bankAccountId:t,fingerprint:i}=e;return Z.delete("/bank_accounts/".concat(t,"?fingerprint=").concat(i))},Gi=e=>{let{user:t}=e;return Z.post("/users/validations",{user:t})},Wi=e=>Z.post("/user_addresses/validate_business_ubo_address",{business_ubo_address:e}),Xi=e=>Z.delete("/business_accounts/".concat(e)),Yi=e=>{let{businessAccountId:t}=e;return Z.get("/business_accounts/".concat(t,"/terms"))},Ki=e=>Z.post("/business_accounts/".concat(e.businessAccountId,"/terms"),b.Tf(e)),Ji=e=>{let{businessAccountId:t}=e;return Z.get("/business_accounts/".concat(t,"/addresses"))},Qi=e=>{let{businessAccountId:t,...i}=e;return Z.post("/business_accounts/".concat(t,"/addresses"),b.TP(i))},$i=e=>{let{transactionId:t,trackingCode:i}=e;return Z.put("/transactions/".concat(t,"/shipment/enter_tracking_code"),{id:t,tracking_code:i})},en=()=>Z.get("/world_countries"),tn=e=>Z.get("/extra_services/payments/".concat(e)),nn=(e,t)=>Z.put("/extra_services/payments/".concat(e,"/payment_data"),b.D1(t)),sn=e=>Z.post("/extra_services/payments",b.E5(e)),rn=()=>Z.post("/banners/lister_activation/dismissed"),an=()=>Z.post("/banners/taxpayer_banner/dismissed"),on=e=>{let{title:t,itemIds:i,discount:n,isActive:s}=e;return Z.post("/featured_collections",{title:t,item_ids:i,discount:n,active:s})},ln=e=>{let{id:t,title:i,itemIds:n,discount:s,isActive:r}=e;return Z.put("/featured_collections/".concat(t),{title:i,item_ids:n,discount:s,active:r})},cn=e=>{let{id:t}=e;return Z.delete("/featured_collections/".concat(t))},dn=e=>{let{userId:t}=e;return Z.get("/users/".concat(t,"/featured_collections"),{headers:j})},un=()=>Z.get("/featured_collections/pricing"),mn=()=>Z.get("/collections/pricing"),pn=e=>{let{userId:t}=e;return Z.get("/users/".concat(t,"/collections"))},gn=e=>{let{planId:t}=e;return Z.post("/featured_collections/orders/prepare",t?{pricing_id:t}:void 0)},hn=e=>Z.get("/featured_collections/orders/".concat(e)),xn=e=>{let{itemIds:t,discount:i}=e;return Z.post("/items/discount/calculate",{item_ids:t,discount:i})},fn=()=>Z.get("/statuses"),yn=e=>{let{uuid:t,captchaToken:i}=e;return Z.patch("/captchas/".concat(t),{captcha_token:i})},vn=e=>{let{entityType:t,payload:i}=e;return Z.post("/captchas",{entity_type:t,payload:i})},_n=(e,t)=>Z.get("/users/".concat(e,"/msg_threads/").concat(t,"/problem_options")),bn=e=>Z.post("/users/".concat(e.userId,"/msg_threads/").concat(e.conversationId,"/problem_options"),{problem_option_id:e.problemOptionId,message:e.message}),jn=(e,t)=>Z.get("/users/".concat(e,"/msg_threads/").concat(t,"/feedback_ratings")),Sn=(e,t,i)=>Z.put("/users/".concat(e,"/msg_threads/").concat(t,"/feedback_ratings"),b.UZ(i)),Zn=e=>Z.put("transactions/".concat(e.transactionId,"/shipment/set_drop_off_type"),{drop_off_type_id:e.dropOffTypeId}),In=e=>{let{query:t}=e;return Z.get("/mention_suggestions",{params:{query:t}})},Cn=()=>Z.get("/forum_groups"),kn=e=>{let{page:t,userId:i,perPage:n}=e;return Z.get("users/".concat(i,"/forum_topics"),{params:{page:t,per_page:n}})},wn=e=>Z.get("/transactions/".concat(e,"/pay_in_methods")),Pn=()=>Z.get("/extra_services/pay_in_methods"),zn=e=>{let{transactionId:t}=e;return Z.get("transactions/".concat(t,"/business_account_invoice_instructions"))},Tn=e=>Z.delete("/forum_posts/".concat(e)),Fn=e=>{let{name:t,cardBrand:i}=e;return Z.post("/payments/credit_card_registrations/prepare",{credit_card_registration:{name:t,card_brand:i}})},Nn=(e=>(t,i)=>e.get("/users/".concat(t,"/permissions"),i))(Z),Ln=e=>Z.post("/payments/credit_cards",b.CY(e)),En=e=>Z.put("/payments/credit_cards/authentication_details",b.e5(e)),On=()=>Z.get("/payments/credit_card_registrations/new"),Rn=e=>Z.get("/forum_topics/".concat(e.topicId,"/forum_posts"),{params:{page:e.page,per_page:e.per_page}}),Dn=e=>Z.get("/forums/".concat(e)),An=e=>Z.get("/forums",{params:{slug:e}}),Mn=e=>Z.get("/forum_posts/".concat(e)),Un=e=>Z.get("/forum_topics/".concat(e)),Bn=e=>Z.get("/forums/".concat(e.forumId,"/forum_topics"),{params:{page:e.page,sub_forum_id:e.subforumId,per_page:e.perPage}}),qn=e=>{let{title:t,body:i,isAnonymous:n,forumId:s,subforumId:r,assignedPhotos:a}=e;return Z.post("/forums/".concat(s,"/forum_topics"),{forum_topic:{title:t,body:i,is_anonymous:n,sub_forum_id:r},assigned_photos:null==a?void 0:a.map((e=>({id:e})))})},Vn=e=>{let{id:t,body:i,isAnonymous:n,assignedPhotos:s,photoTempUuid:r}=e;return Z.put("/forum_posts/".concat(t),{forum_post:{body:i,is_anonymous:n,photo_temp_uuid:r},assigned_photos:null==s?void 0:s.map((e=>({id:e})))})},Hn=e=>{let{topicId:t,body:i,isAnonymous:n,photoTempUuid:s,assignedPhotos:r,replyPostId:a}=e;return Z.post("/forum_topics/".concat(t,"/forum_posts"),{forum_post:{body:i,is_anonymous:n,photo_temp_uuid:s,reply_post_id:a},assigned_photos:null==r?void 0:r.map((e=>({id:e})))})},Gn=e=>Z.post("/forum_posts/".concat(e,"/like")),Wn=e=>Z.delete("/forum_posts/".concat(e,"/like")),Xn=e=>{let{perPage:t,searchText:i,page:n,order:s,itemId:r}=e;return Z.get("/users",{params:{page:n,order:s,per_page:t,search_text:i,order_by_buyer_for_item:r}})},Yn=e=>{let{userId:t,perPage:i,page:n}=e;return Z.get("users/".concat(t,"/followers"),{params:{per_page:i,page:n}})},Kn=e=>{let{userId:t,perPage:i,page:n}=e;return Z.get("users/".concat(t,"/followed_users"),{params:{per_page:i,page:n}})},Jn=e=>Z.delete("/conversations/".concat(e)),Qn=e=>{let{id:t,title:i,subforumId:n,forumId:s}=e;return Z.put("/forum_topics/".concat(t),{forum_topic:{title:i,forum_id:s,sub_forum_id:n}})},$n=function(){let{page:e,perPage:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Z.get("forum_topics/news",{params:{page:e,per_page:t}})};async function es(e){return Z.get("/help_center/recent_users",{params:{keyword:e}})}const ts=e=>Z.get("help_center/recent_transactions",{params:{count:e},headers:j}),is=()=>Z.get("help_center/recent_items",{headers:j}),ns=e=>Z.get("users/".concat(e,"/profile")),ss=e=>Z.get("/transactions/".concat(e,"/cancellation_reasons")),rs=e=>{let{id:t,reasonId:i,userExplanation:n}=e;return Z.put("/transactions/".concat(t,"/cancel"),{reason:{id:i,user_explanation:n}})},as=e=>Z.post("/help_center/support_tickets",b.Cd(e)),os=e=>Z.delete("/forum_topics/".concat(e)),ls=e=>{let{id:t,buyerId:i}=e;return Z.post("/items/".concat(t,"/reservation"),{to_whom_id:i})},cs=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"email";return Z.get("/users/".concat(e,"/notification_settings"),{params:{type:t}})},ds=(e,t)=>Z.put("/users/".concat(e,"/notification_settings"),{notification_settings:{email:t}}),us=(f(Z),e=>Z.get("/users/".concat(e,"/carrier_preferences"))),ms=e=>{let{userId:t,carrierId:i,enabled:n}=e;return Z.put("/users/".concat(t,"/carriers/").concat(i,"/preference"),{carrier_preference:{enabled:n}})},ps=e=>{let{transactionId:t}=e;return Z.get("/transactions/".concat(t,"/shipment/digital_label"))},gs=()=>Z.get("/configurations/shipping_contact"),hs=e=>Z.post("/transactions/".concat(e.transactionId,"/shipping_contact"),{save_for_later:e.saveForLater,shipping_contact:(0,r.omitBy)({buyer_phone_number:e.buyerPhoneNumber,seller_phone_number:e.sellerPhoneNumber},r.isNil)}),xs=e=>Z.delete("/transactions/".concat(e,"/shipping_contact")),fs=e=>{let{itemPrice:t}=e;return Z.post("/offers/request_options",{price:{amount:t.amount,currency_code:t.currencyCode}})},ys=e=>{let{price:t,currency:i,transactionId:n}=e;return Z.post("/transactions/".concat(n,"/offer_requests"),{offer_request:{price:t,currency:i}})},vs=e=>{let{transactionId:t,price:i,currency:n}=e;return Z.post("/transactions/".concat(t,"/offers"),{offer:{price:i,currency:n}})},_s=e=>Z.get("/users/".concat(e,"/personal_data_export")),bs=e=>{let{userId:t,fingerprint:i}=e;return Z.post("/users/".concat(t,"/personal_data_export"),{fingerprint:i})},js=e=>{let{userId:t,code:i}=e;return Z.post("/users/".concat(t,"/personal_data_export/confirmation"),{code:i})},Ss=e=>Z.post("/users/".concat(e.userId,"/admin_alerts"),b.vH(e)),Zs=e=>Z.get("/report_reasons/".concat(e)),Is=e=>Z.get("/forum_posts",{params:{page:e.page,per_page:e.perPage,search_text:e.searchText}}),Cs=e=>{let{page:t,userId:i,perPage:n}=e;return Z.get("users/".concat(i,"/forum_topics/favourites"),{params:{page:t,per_page:n}})},ks=e=>Z.get("/items/".concat(e,"/service_fee")),ws=e=>{let{transactionId:t,offerRequestId:i}=e;return Z.put("/transactions/".concat(t,"/offer_requests/").concat(i,"/accept"))},Ps=e=>{let{transactionId:t,offerRequestId:i}=e;return Z.put("/transactions/".concat(t,"/offer_requests/").concat(i,"/reject"))},zs=e=>Z.post("/app_feedbacks",{...e,user_id:e.userId}),Ts=(e,t)=>Z.get("/users/".concat(e,"/msg_threads/").concat(t,"/promoted_item_feedback_ratings")),Fs=(e,t,i)=>Z.put("/users/".concat(e,"/msg_threads/").concat(t,"/promoted_item_feedback_ratings"),b.UZ(i)),Ns=e=>{let{conversationId:t,messageId:i}=e;return Z.delete("conversations/".concat(t,"/replies/").concat(i))},Ls=e=>{let{conversationId:t,messageId:i,photoId:n}=e;return Z.delete("/conversations/".concat(t,"/replies/").concat(i,"/photos/").concat(n))},Es=e=>{let{conversationId:t,messageId:i,reactionType:n}=e;return Z.post("conversations/".concat(t,"/replies/").concat(i,"/reactions"),{type:n})},Os=e=>{let{conversationId:t,messageId:i,reactionId:n}=e;return Z.delete("conversations/".concat(t,"/replies/").concat(i,"/reactions/").concat(n))},Rs=e=>{let{conversationId:t,messageId:i,photoId:n,reactionType:s}=e;return Z.post("conversations/".concat(t,"/replies/").concat(i,"/photos/").concat(n,"/photo_reactions"),{type:s})},Ds=e=>{let{conversationId:t,messageId:i,photoId:n,reactionId:s}=e;return Z.delete("conversations/".concat(t,"/replies/").concat(i,"/photos/").concat(n,"/photo_reactions/").concat(s))},As=()=>Z.get("/payments/identity/education"),Ms=e=>Z.post("/user/education",{type:e}),Us=e=>Z.get("promoted_closets/orders/".concat(e)),Bs=()=>Z.get("promoted_closets/performances"),qs=()=>Z.get("/promoted_closets/performance_feedback"),Vs=e=>Z.put("/promoted_closets/performance_feedback",b.UZ(e)),Hs=e=>{let{eventName:t,modelId:i}=e;return Z.get("/external_crm/event_payload",{params:{event_name:t,model_id:i}})},Gs=e=>Z.get("/transactions/".concat(e,"/shipment/pick_up_dates")),Ws=e=>Z.get("/transactions/".concat(e,"/shipment/request_return_details")),Xs=e=>Z.post("/transactions/".concat(e,"/shipment/return_shipment")),Ys=(e,t)=>Z.post("/complaints/".concat(e,"/escalate"),{english_allowed:t}),Ks=(e,t)=>Z.post("/brand_complaints",b.D(e,t)),Js=(e,t)=>{const i=new FormData;return i.append("file",e),t&&i.append("captcha_token",t),Z.post("/brand_complaints/attachments",i)},Qs=e=>Z.post("/brand_complaints/captchas",{captcha_token:e}),$s=e=>Z.get("/users/".concat(e,"/stats"),{headers:j}),er=()=>Z.get("/tracker_attributes",{params:{type:"buy_debit_transactions"}}),tr=()=>Z.get("/promoted_closets/pricing"),ir=e=>Z.get("/transactions/".concat(e,"/shipment/pdf_label")),nr=e=>{let{currentUserId:t,blockedUserId:i}=e;return Z.post("/users/".concat(t,"/user_hates"),{hated_user_id:i})},sr=e=>{let{currentUserId:t,blockedUserId:i}=e;return Z.delete("/users/".concat(t,"/user_hates"),{params:{hated_user_id:i}})},rr=()=>Z.get("/direct_donations/orders/new"),ar=e=>Z.post("/direct_donations/orders/prepare",b.wF(e),{headers:j}),or=e=>Z.get("direct_donations/orders/".concat(e),{headers:j}),lr=e=>Z.get("/transactions/".concat(e.transactionId,"/nearby_shipping_options"),{params:b.dP(e),headers:j}),cr=e=>{let{packageSizeId:t,catalogId:i,brandId:n,price:s}=e;return Z.post("/package_sizes/".concat(t,"/shipping_options"),{item_attributes:{catalog_id:i,brand_id:n,price:s}})},dr=e=>{let{item:t}=e;return Z.post("/package_sizes/suggestion",{item:t})},ur=e=>(e=>(t,i)=>{let{pageName:n}=t;return e.get("/ads/placements?page=".concat(n),i)})(Z)(e),mr=_(Z),pr=e=>Z.get("/transactions/".concat(e,"/shipment/items")),gr=e=>Z.get("/transactions/".concat(e,"/shipment/return_shipping_options")),hr=e=>{let{transactionId:t,returnShippingOption:i}=e;return Z.post("/transactions/".concat(t,"/shipment/return_shipping_option"),{return_shipping_option:i})},xr=()=>Z.get("/fundraiser"),fr=()=>Z.get("/charities"),yr=e=>{let{percentage:t,charityCode:i}=e;return Z.put("/fundraiser",{fundraiser:{charity_code:i,percentage:t}})},vr=e=>Z.get("/items/".concat(e,"/shipping_details"),{headers:j}),_r=()=>Z.delete("/fundraiser"),br=()=>Z.get("/external_crm/jwts"),jr=(h(Z),(e=>(t,i)=>e.get("/conversations/".concat(t),i))(Z)),Sr=(x(Z),()=>Z.get("/nationalities")),Zr=e=>{let{itemId:t,buyerId:i,closingAction:n,price:s,currency:r}=e;return Z.post("/items/".concat(t,"/mark_as_sold"),{receiver_id:i,closing_action:n,price:s,currency:r},{headers:j})},Ir=e=>{let{itemId:t}=e;return Z.delete("items/".concat(t,"/reservation"))},Cr=()=>Z.get("/sizes_configuration"),kr=()=>Z.put("/sizes_configuration"),wr=e=>Z.get("/faq_entries/".concat(e,"/feedback")),Pr=e=>Z.patch("/faq_entries/".concat(e.faqId,"/feedback"),b.zd(e)),zr=(e=>(t,i)=>e.get("/users/".concat(t,"/verifications/prompt"),i))(Z),Tr=e=>Z.delete("/users/".concat(e,"/verifications/prompt")),Fr=e=>{let{userId:t,email:i}=e;return Z.post("/users/".concat(t,"/verifications/email_code"),{email:i})},Nr=e=>{let{userId:t,code:i}=e;return Z.put("/users/".concat(t,"/verifications/email_code"),{code:i})},Lr=e=>Z.post("/category_intent",{intent:e}),Er=e=>Z.put("/transactions/".concat(e,"/shipment/mark_as_return_to_sender_completed")),Or=e=>Z.put("/transactions/".concat(e,"/shipment/confirm_instructions")),Rr=e=>Z.get("users/".concat(e,"/sessions")),Dr=e=>{let{userId:t,sessionId:i,fingerprint:n}=e;return Z.delete("/users/".concat(t,"/sessions/").concat(i,"?fingerprint=").concat(n))},Ar=()=>Z.get("/configurations/session_defaults"),Mr=e=>Z.get("/transactions/".concat(e,"/shipment/reservation_link")),Ur=(e,t)=>Z.put("/transactions/".concat(e,"/reservation"),{reserved:t}),Br=e=>Z.get("/transactions/".concat(e,"/shipping_instructions")),qr=e=>Z.delete("/users/".concat(e,"/holiday")),Vr=e=>{let{code:t,state:i,action:n}=e;return Z.get("/google_user/token",{params:{code:t,state:i,take_action:n}})},Hr=()=>Z.get("/taxpayers/education"),Gr=e=>Z.get("/taxpayers/form/".concat(e)),Wr=e=>{let{userId:t,currentPassword:i,newPassword:n,fingerprint:s}=e;return Z.put("/users/".concat(t,"/password"),{old_password:i,password:n,fingerprint:s})},Xr=e=>{let{code:t,password:i,passwordConfirmation:n,fingerprint:s}=e;return Z.post("/users/change_forgot_password",{code:t,password:i,password_confirmation:n,fingerprint:s})},Yr=e=>{let{code:t}=e;return Z.get("/users/forgot_password",{params:{code:t}})},Kr=e=>Z.get("/vas_gallery/items",{params:b.wb(e)}),Jr=e=>Z.get("/vas_gallery/pricing",{params:{item_ids:e}}),Qr=e=>Z.post("/vas_gallery/orders",{item_ids:e}),$r=e=>Z.get("/vas_gallery/orders/".concat(e)),ea=async()=>Z.get("/configurations/item",{headers:j}),ta=e=>Z.get("/catalog_attributes",{params:b.qT(e)}),ia=e=>Z.put("/taxpayers/form",b.k6(e)),na=()=>Z.get("/taxpayers/form/status"),sa=e=>{let{transactionId:t,pickupPointCode:i,packageTypeId:n,addressId:s}=e;return Z.post("/return_label/orders/prepare",{transaction_id:t,pickup_point_code:i,package_type_id:n,address_id:s})},ra=e=>Z.get("/return_label/orders/".concat(e)),aa=e=>Z.get("/users/".concat(e,"/obligations")),oa=()=>Z.get("/admin/alert_generators/is_busy"),la=e=>{let{searchParams:t,reportReason:i}=e;return Z.post("/admin/alert_generators/execute",{item_search_params:t,report_reason_code:i})},ca=()=>Z.get("/wallet/income_reports/settings"),da=()=>Z.get("/invoices/available_dates"),ua=e=>{let{year:t,month:i}=e;return Z.get("/invoices/".concat(t,"/").concat(i))},ma=(e,t)=>Z.get("/users/".concat(e,"/satisfaction_survey?transaction_id=").concat(t||"")),pa=e=>Z.get("/user_feedbacks/summary?user_id=".concat(e)),ga=()=>Z.post("/terms/skip"),ha=e=>Z.put("/users/".concat(e,"/agree_terms")),xa=e=>{let{userId:t,transactionId:i,answers:n}=e;return Z.post("/users/".concat(t,"/satisfaction_survey?transaction_id=").concat(i||""),{answers:n,comment:n.comment})},fa=()=>Z.get("/info_posts"),ya=()=>Z.get("/terms_and_conditions"),va=e=>Z.get("/info_posts/".concat(e)),_a=e=>Z.get("/notification_landings/".concat(e)),ba=e=>{let{userId:t,transactionId:i}=e;return Z.get("/users/".concat(t,"/satisfaction_survey/enabled?transaction_id=").concat(i||""))};function ja(){return Z.get("/users/fido_authentications/prepare_verification")}function Sa(e){let{attestation:t}=e;return Z.post("/users/fido_authentications/verify_verification",{attestation:t})}const Za=e=>{let{itemId:t}=e;return Z.get("/items/".concat(t,"/similar_items"))},Ia=()=>Z.get("/terms_and_conditions/content"),Ca=()=>Z.get("/privacy_policy"),ka=()=>Z.get("/fundraiser/enabled"),wa=e=>{let{catalogId:t,brandId:i}=e;return Z.get("/catalogs/".concat(t,"/breadcrumbs"),{params:{brand_id:i}})},Pa=e=>Z.get("/shipments/".concat(e.shipmentId,"/nearby_drop_off_points"),{params:b.iE(e)}),za=e=>Z.get("/taxpayers/tax_rules/".concat(e)),Ta=e=>Z.get("/collections/available_items",{params:b.I$(e)}),Fa=()=>Z.get("/collections/policy"),Na=e=>{let{id:t}=e;return Z.get("/featured_collections/".concat(t))},La=e=>{let{id:t}=e;return Z.get("/collections/".concat(t))},Ea=()=>Z.get("/referrals/referrer"),Oa=e=>Z.post("/ads/lead",{params:b.Zm(e)}),Ra=()=>Z.get("/offline_verification/awareness"),Da=e=>{let{transactionId:t}=e;return Z.get("/transactions/".concat(t,"/offers/seller_options"))},Aa=e=>Z.get("items/".concat(e,"/badges"))},68284:(e,t,i)=>{let n,s;i.d(t,{Q:()=>s,o:()=>n}),function(e){e[e.Ok=200]="Ok",e[e.Created=201]="Created",e[e.TemporarilyMoved=302]="TemporarilyMoved",e[e.MovedPermanently=301]="MovedPermanently",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.RequestTimeout=408]="RequestTimeout",e[e.PayloadTooLarge=413]="PayloadTooLarge",e[e.UnprocessableEntity=422]="UnprocessableEntity",e[e.TooEarly=425]="TooEarly",e[e.TooManyRequests=429]="TooManyRequests",e[e.InternalError=500]="InternalError",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout"}(n||(n={})),function(e){e[e.HttpError=-200]="HttpError",e[e.JsError=-100]="JsError",e[e.SessionFromTokenError=-99]="SessionFromTokenError",e[e.Ok=0]="Ok",e[e.InvalidUser=10]="InvalidUser",e[e.TransactionInProgress=20]="TransactionInProgress",e[e.LoginRequired=21]="LoginRequired",e[e.ValidationError=99]="ValidationError",e[e.PhotoUploadError=50]="PhotoUploadError",e[e.PhotoDimensionsTooBig=51]="PhotoDimensionsTooBig",e[e.PhotoMinimumCountRequired=52]="PhotoMinimumCountRequired",e[e.InvalidToken=100]="InvalidToken",e[e.IpBlocked=102]="IpBlocked",e[e.InvalidProtocol=103]="InvalidProtocol",e[e.NotFound=104]="NotFound",e[e.ServerError=105]="ServerError",e[e.AccessDenied=106]="AccessDenied",e[e.LockConflict=107]="LockConflict",e[e.KYCError=108]="KYCError",e[e.UnavailableCarrierError=110]="UnavailableCarrierError",e[e.ConfirmEmail=112]="ConfirmEmail",e[e.UnsupportedFeature=113]="UnsupportedFeature",e[e.CheckoutError=114]="CheckoutError",e[e.UserVerificationRequired=115]="UserVerificationRequired",e[e.Deprecated=116]="Deprecated",e[e.FollowingTooManyMembers=117]="FollowingTooManyMembers",e[e.User2FAConfirmation=118]="User2FAConfirmation",e[e.PaymentProcessingError=119]="PaymentProcessingError",e[e.LoginWithoutEmail=121]="LoginWithoutEmail",e[e.Required2FA=122]="Required2FA",e[e.CantDeliver2FACode=123]="CantDeliver2FACode",e[e.CreditCardExpired=124]="CreditCardExpired",e[e.CountryChangeNotAllowed=127]="CountryChangeNotAllowed",e[e.BusinessAccountConversionInProgress=128]="BusinessAccountConversionInProgress",e[e.BusinessAccountConversionFailed=129]="BusinessAccountConversionFailed",e[e.CheckoutChecksumMismatchError=130]="CheckoutChecksumMismatchError",e[e.IncompleteTaxAddress=131]="IncompleteTaxAddress",e[e.HarassmentInMessageDetected=134]="HarassmentInMessageDetected",e[e.InvalidCaptchaToken=135]="InvalidCaptchaToken",e[e.EmailSharingDetected=136]="EmailSharingDetected",e[e.EmailVerificationCodeExpired=140]="EmailVerificationCodeExpired",e[e.ShippingDiscountAlreadyUsed=142]="ShippingDiscountAlreadyUsed",e[e.PaymentAlreadyProcessed=143]="PaymentAlreadyProcessed",e[e.TwoFARequired=146]="TwoFARequired",e[e.FidoVerificationRequired=149]="FidoVerificationRequired"}(s||(s={}))},12931:(e,t,i)=>{i.d(t,{$M:()=>z,CY:()=>A,Cd:()=>U,D:()=>G,D1:()=>k,E5:()=>w,FE:()=>ie,I$:()=>ee,Ix:()=>_,Nd:()=>v,S8:()=>h,TP:()=>D,Tf:()=>R,UZ:()=>L,XB:()=>N,Zm:()=>te,_C:()=>f,aS:()=>g,bQ:()=>y,bo:()=>P,cc:()=>C,dP:()=>I,e5:()=>M,eI:()=>T,eM:()=>b,fj:()=>Z,hg:()=>j,hr:()=>Y,iE:()=>$,k6:()=>Q,mY:()=>m,pJ:()=>F,pY:()=>S,qT:()=>J,rQ:()=>O,tP:()=>q,tX:()=>p,vH:()=>B,vb:()=>x,wF:()=>W,wb:()=>K,zd:()=>X});var n=i(32699),s=i(57043),r=i(44946),a=i(59843),o=i(55001),l=i(6909),c=i(94290);const d=e=>{if(!e)return{};const t={};return e.forEach((e=>{let{type:i,ids:n}=e;t["".concat(i,"_ids")]=n.join(",")})),t},u=e=>{let{query:t,catalogIds:i,priceFrom:n,priceTo:s,currency:r,colorIds:a,brandIds:o,sizeIds:l,materialIds:c,videoGameRatingIds:d,statusIds:u,sortBy:m,isPopularCatalog:p,catalogFrom:g,disableSearchSaving:h}=e;return{search_text:t,catalog_ids:null==i?void 0:i.join(","),price_from:n,price_to:s,currency:r,color_ids:null==a?void 0:a.join(","),brand_ids:null==o?void 0:o.join(","),size_ids:null==l?void 0:l.join(","),material_ids:null==c?void 0:c.join(","),video_game_rating_ids:null==d?void 0:d.join(","),status_ids:null==u?void 0:u.join(","),order:m,popular:p||null,catalog_from:g,disable_search_saving:h}},m=e=>{var t;const i={page:e.page,per_page:e.perPage,item_count:e.itemCount,exclude_member_ids:null===(t=e.excludedUserIds)||void 0===t?void 0:t.join(","),feed_items_only:e.feedItemsOnly,search_session_id:e.searchSessionId,screen_name:e.screenName,...u(e)};return(0,n.omitBy)({...i,...d(e.selectedDynamicFilters)},n.isNil)},p=e=>{const t={page:e.page,per_page:e.perPage,time:e.time,search_session_id:e.searchSessionId,global_search_session_id:e.globalSearchSessionId||null,...u(e)};return(0,n.omitBy)({...t,...d(e.selectedDynamicFilters)},n.isNil)},g=e=>{let{query:t,catalogIds:i,priceFrom:s,priceTo:r,currency:a,colorIds:o,brandIds:l,sizeIds:c,materialIds:u,videoGameRatingIds:m,statusIds:p,sortBy:g,time:h,isPopularCatalog:x,catalogFrom:f,selectedDynamicFilters:y,supportedFilters:v,filterSearchCode:_,filterSearchText:b}=e;const j={search_text:t,catalog_ids:i.join(","),price_from:s,price_to:r,currency:a,color_ids:o.join(","),brand_ids:l.join(","),size_ids:c.join(","),material_ids:u.join(","),video_game_rating_ids:m.join(","),status_ids:p.join(","),order:g,time:h,popular:x||null,catalog_from:f,supported_filters:v.join(","),filter_search_code:_,filter_search_text:b};return(0,n.omitBy)({...j,...d(y)},n.isNil)},h=e=>{let{filterSearchCode:t,filterSearchText:i,query:s,catalogIds:r,priceFrom:a,priceTo:o,currency:l,colorIds:c,brandIds:u,sizeIds:m,materialIds:p,videoGameRatingIds:g,statusIds:h,sortBy:x,isPopularCatalog:f,catalogFrom:y,selectedDynamicFilters:v}=e;const _={filter_search_code:t,filter_search_text:i,search_text:s,catalog_ids:r.join(","),price_from:a,price_to:o,currency:l,color_ids:c.join(","),brand_ids:u.join(","),size_ids:m.join(","),material_ids:p.join(","),video_game_rating_ids:g.join(","),status_ids:h.join(","),order:x,popular:f||null,catalog_from:y};return(0,n.omitBy)({..._,...d(v)},n.isNil)},x=e=>{let{catalogIds:t}=e;return{catalog_ids:t.join(",")}},f=e=>{let{currentPage:t,perPage:i,order:n,filter:s,catalogIds:r}=e;return{page:t+1,per_page:i,cond:s,order:n,catalog_ids:null==r?void 0:r.join(",")}},y=e=>({payments_account:{user_address_id:e.addressId,first_name:e.firstName||void 0,last_name:e.lastName||void 0,birthdate:e.birthdate||void 0,ssn_serial:e.ssnNumber||void 0,personal_id_number:e.personalIdNumber||void 0,nationality:e.nationality?{code:e.nationality.code}:void 0}}),v=e=>{let{userId:t,bankAccountId:i,amount:n,currency:s}=e;return{payout:{seller_id:t,bank_account_id:i,amount:n,currency:s}}},_=e=>{let{address:t}=e;return{entry_type:t.entryType,country_id:t.countryId,name:t.name,country:t.country,city:t.city,line1:t.line1,line2:t.line2,postal_code:t.postalCode}},b=e=>{let{address:t}=e;return{entry_type:o.s1.Shipping,country_id:t.countryId,name:t.name,country:t.country,city:t.city,line1:t.line1,line2:t.line2,postal_code:t.postalCode}},j=e=>{let{isNewsletterSubscribed:t,allowMyFavouriteNotifications:i,isLocationPublic:n,isPublishPhotosAgreed:s,thirdPartyTracking:r,allowPersonalization:a}=e;return{is_newsletter_subscriber:t,allow_my_favourite_notifications:i,is_location_public:n,is_publish_photos_agreed:s,third_party_tracking:r,allow_personalization:a}},S=e=>{let{username:t,contactEmail:i,contactNumber:n,vat:s,about:r,photoTempUuid:a}=e;return{name:t,email:i,phone_number:n,text_about:r,photo_temp_uuid:a,vat:s}},Z=e=>{let{realName:t,cityId:i,countryId:n,gender:s,birthday:r,about:a,username:o,photoTempUuid:l,isCityVisible:c,isOnHoliday:d,isInternationalTradingEnabled:u,fingerprint:m}=e;return{user:{real_name:t,city_id:i,country_id:n,gender:s,birthday:r,text_about:a,login:o,photo_temp_uuid:l,user_settings:{is_location_public:c,on_holiday:d,international_trading_enabled:u}},fingerprint:m}},I=e=>{let{countryCode:t,latitude:i,longitude:s,addressLine:r,postalCode:a,city:o,limit:l,shouldLabelNearestPoints:c}=e;return(0,n.omitBy)({country_code:t,latitude:i,longitude:s,address_line:r,postal_code:a,city:o,limit:l,should_label_nearest_points:c},n.isNil)},C=e=>{let{name:t,accountNumber:i,routingNumber:n,addressId:s,externalCode:r,spendingType:a}=e;return{name:t,user_address_id:s,account_number:i,routing_number:n,external_code:r,spending_type:a}},k=e=>{let{paymentData:t}=e;return{payment_data:{...t}}},w=e=>{let{orderId:t,blikCode:i,orderType:n,entityType:r,creditCardId:a,paymentMethodId:o,browserAttributes:l}=e;return{order_id:t,blik_code:i,order_type:n,external_card_code:a,payment_method_id:o,browser_attributes:l?(0,s.Y)(l):void 0,redirect_params:r&&{entity_type:r}}},P=e=>{let{toAddressId:t,deliveryType:i,creditCardId:n,packageTypeId:s,payInMethodId:r,pickupPointCode:a,rateUuid:o,isOfflineVerificationEnabled:l,pointUuid:c,rootRateUuid:d}=e;return{transaction:{shipment:{to_address_id:t,delivery_type:i,package_type_id:s,pickup_point_code:a,rate_uuid:o,point_uuid:c,root_rate_uuid:d},buyer_debit:{pay_in_method_id:r,external_card_code:n},offline_verification:{enabled:l}}}},z=e=>{let{blikCode:t,isSingleUse:i,browserAttributes:n,transactionChecksum:r}=e;return{blik_code:t,single_use_card:i,checksum:r,browser_attributes:(0,s.Y)(n)}},T=e=>{let{paymentData:t}=e;return{payment_data:{...t}}},F=e=>{let{expirationDate:t,ticketId:i,rating:n,effort:s,comment:r,digest:a}=e;return{helpdesk_feedback:{ticket_id:i,rating:n,effort:s,comment:r},expiration_date:t,digest:a}},N=e=>{let{rating:t,comment:i,finalized:n,itemId:s,feedbackStatementIds:r}=e;return{item_id:s,rating:t,comment:i,finalized:n,feedback_statement_ids:r}},L=e=>{let{rating:t,message:i,feedbackStatementParentId:n,feedbackStatementIds:s,finalized:r}=e;return{feedback_ratings:{finalized:r,rating:t,comment:i,feedback_statement_parent_id:n,feedback_statement_ids:s}}},E=e=>e&&{country_id:e.countryId,name:e.name||null,city:e.city||null,line1:e.line1||null,line2:e.line2||null,postal_code:e.postalCode||null}||null,O=e=>{let{firstName:t,lastName:i,birthdate:n,ssnSerial:s,personalIdNumber:r,address:a,ubos:o,documents:l}=e;const c=(null==l?void 0:l.map((e=>{return{type:(t=e).type,files:t.files.map((e=>{let{identifier:t,body:i,mediaType:n}=e;return{identifier:t,body:i,media_type:n}}))};var t})))||[];return{first_name:t,last_name:i,birthdate:n,ssn_serial:s,personal_id_number:r,address:E(a),ubos:(null==o?void 0:o.map((e=>({first_name:e.firstName,last_name:e.lastName,birthday:e.birthday,nationality:e.nationality,birthplace_city:e.birthplaceCity,birthplace_country:e.birthplaceCountry,address:E(e.address)}))))||null,documents:c}},R=e=>{let{termsAndConditions:t,returnPolicy:i,additionalInformation:n}=e;return{terms_and_conditions:t,return_policy:i,additional_information:n}},D=e=>{let{businessAddress:t,returnAddress:i}=e;return{business_address:t&&(0,a.FW)(t),return_address:i&&(0,a.FW)(i)}},A=e=>{let{id:t,brand:i,registrationData:n,encryptedCardDetails:a,isSingleUse:o,browserAttributes:l,source:c}=e;return{browser_attributes:(0,s.Y)(l),credit_card_registration:{id:t,registration_data:n,encrypted_card_details:a?(0,r.I)(a):void 0},credit_card:{brand:i,single_use:o},redirect_params:{order_id:c.orderId,entity_id:c.entityId,entity_type:c.entityType}}},M=e=>{let{paymentData:t,registrationId:i}=e;return{credit_card_registration:{id:i},payment_data:{...t}}},U=e=>{let{faqEntryId:t,ch:i,problemTextId:n,transactionId:s,threadId:r,tempUuid:a,message:o,isEnglishAllowed:l,itemId:c,memberId:d,email:u}=e;return{faq_entry_id:t,ch:i,transaction_id:s,thread_id:r,problem_text_id:n,temp_uuid:a,help_contact_form:{message:o,english_allowed:l,item_id:c,transaction_id:s,member_id:d,email:u}}},B=e=>{let{adminAlert:{refType:t,reportReasonId:i,refId:s,message:r,options:a}}=e;return{admin_alert:(0,n.omitBy)({ref_type:t,ref_id:s,report_reason_id:i,message:r,options:a?(0,n.omitBy)({reported_message_id:null==a?void 0:a.reportedMessageId,reported_photo_id:null==a?void 0:a.reportedPhotoId},n.isNil):void 0},n.isNil)}},q=e=>{let{grantType:t,...i}=e;if("verificationCode"in i)return{control_code:i.controlCode,password_type:i.passwordType,verification_code:i.verificationCode,grant_type:t,is_trusted_device:i.isTrustedDevice};if("controlCode"in i)return{control_code:i.controlCode,grant_type:t,username:i.username,password:i.password,fingerprint:i.fingerprint};const{...n}=i;return{...n,grant_type:t}},V=e=>{let{rightsToOrganization:t,firstName:i,lastName:n,email:s,company:r,address:a,city:o,worldCountry:c,postalCode:d}=e;switch(null==t?void 0:t.value){case l.qk.Owner:case l.qk.Agent:case l.qk.Lawyer:case l.qk.IpOwner:case l.qk.IpAgent:case l.qk.IpLawyer:case l.qk.Organization:case l.qk.TrustedFlagger:return{first_name:i,last_name:n,email:s,company:r,address:a,city:o,country_code:null==c?void 0:c.code,zip_code:d};case l.qk.Individual:return{first_name:i,last_name:n,email:s};default:return{}}},H=e=>{var t;switch(null===(t=e.rightsToOrganization)||void 0===t?void 0:t.value){case l.qk.Owner:case l.qk.Agent:case l.qk.Lawyer:case l.qk.IpOwner:case l.qk.IpAgent:case l.qk.IpLawyer:return(e=>{let{intellectualPropertyCategory:t,rightsConsistOf:i,intellectualPropertyOwner:n,intellectualPropertyName:s,registrationNumber:r,proofOfRights:a,brand:o,description:d,attachments:u,infringingUrlsTextArea:m}=e;const p=(0,c.e)(m).map((e=>({url:e})));return{category:t,...t===l.g$.Other?{rights_consist_of:i}:{owner:n,name:s,registration_number:r},proof_of_rights:a,brand:null==o?void 0:o.title,description:d,attachments:null==u?void 0:u.map((e=>({temp_uuid:e.id}))),illegal_contents:p}})(e);case l.qk.Individual:case l.qk.Organization:case l.qk.TrustedFlagger:return(e=>{let{illegalContentType:t,reportReasonType:i,description:n,infringingUrlsTextArea:s,attachments:r}=e;return{illegal_content_type:t,report_reason_code:i,description:n,illegal_contents:(0,c.e)(s).map((e=>({url:e}))),attachments:null==r?void 0:r.map((e=>({temp_uuid:e.id})))}})(e);default:return{}}},G=(e,t)=>{var i;return{rights_to_organization:null===(i=e.rightsToOrganization)||void 0===i?void 0:i.value,contacts:V(e),property_rights:H(e),captcha_token:t}},W=e=>{let{charityCode:t,amount:i,currencyCode:n}=e;return{charity_code:t,contribution:{amount:i,currency_code:n}}},X=e=>{let{feedbackUuid:t,accessChannel:i,...n}=e;return{feedback_uuid:t,access_channel:i,...L(n)}},Y=e=>{let{isEnabled:t,discounts:i}=e;return{bundle_discount:{enabled:t,discounts:null==i?void 0:i.map((e=>{let{fraction:t,minimalItemCount:i}=e;return{fraction:t,minimal_item_count:i}}))}}},K=e=>{let{query:t,catalogIds:i,colorIds:n,brandIds:s,sizeIds:r,materialIds:a,videoGameRatingIds:o,statusIds:l}=e;return{search_text:t,catalog_ids:null==i?void 0:i.join(","),color_ids:null==n?void 0:n.join(","),brand_ids:null==s?void 0:s.join(","),size_ids:null==r?void 0:r.join(","),material_ids:null==a?void 0:a.join(","),video_game_rating_ids:null==o?void 0:o.join(","),status_ids:null==l?void 0:l.join(",")}},J=e=>{let{catalogId:t}=e;return{catalog_id:t}},Q=e=>{let{countryOfTaxResidency:t,firstName:i,lastName:n,birthdate:s,billingAddressId:r,taxIdentificationNumber:a,birthplaceCountry:o,birthplaceCity:l,businessName:c,businessCode:d,secondaryBusinessCode:u,vatNumber:m,businessAddressId:p,businessEstablishmentCountries:g}=e;return{taxpayer:{first_name:i,last_name:n,birthdate:s,country_of_tax_residency:t,tin:a,billing_address_id:r,birthplace_country:o,birthplace_city:l,business_name:c,business_code:d,secondary_business_code:u,vat_number:m,business_address_id:p,business_establishment_countries:g}}},$=e=>{let{labelTypeId:t,countryCode:i,latitude:n,longitude:s}=e;return{label_type_id:t,country_code:i,latitude:n,longitude:s}},ee=e=>{let{currentPage:t,perPage:i,order:n,catalogIds:s}=e;return{page:t+1,per_page:i,order:n,catalog_ids:null==s?void 0:s.join(",")}},te=e=>{let{firstName:t,lastName:i,email:n,phoneNr:s,companyType:r,companyName:a,estimatedBudget:o,targetCountry:l,dealType:c,comment:d}=e;return{first_name:t,last_name:i,phone_nr:s,company_type:r,company_name:a,estimated_budget:o,target_country:l.join(", "),deal_type:c,email:n,comment:d}},ie=e=>{let{rating:t,comment:i,finalized:n,feedbackStatementIds:s}=e;return{rating:t,comment:i,finalized:n,feedback_statement_ids:s}}},19892:(e,t,i)=>{i.d(t,{X:()=>n});const n=e=>({id:e.id,userId:e.user_id,entryType:e.entry_type,countryId:e.country_id,isDefault:1===e.is_default,isDeleted:e.is_deleted,isComplete:e.is_complete,cityId:e.city_id,name:e.name,createdAt:e.created_at,country:e.country,city:e.city,updatedAt:e.updated_at,externalCode:e.external_code,latitude:e.latitude,line1:e.line1,line2:e.line2,longitude:e.longitude,postalCode:e.postal_code,state:e.state,formattedAddress:e.formatted_address,countryIsoCode:e.country_iso_code})},57043:(e,t,i)=>{i.d(t,{Y:()=>n});const n=e=>{let{language:t,colorDepth:i,javaEnabled:n,screenWidth:s,screenHeight:r,timezoneOffset:a}=e;return{language:t,color_depth:i,java_enabled:n,screen_height:r,screen_width:s,timezone_offset:a}}},59843:(e,t,i)=>{i.d(t,{B6:()=>l,FW:()=>o,ak:()=>c,f_:()=>a,hL:()=>s,mI:()=>r});var n=i(19892);const s=e=>{const{id:t,name:i,email:n,nationality:s,vat:r,status:a}=e;return{id:t,name:i,email:n,nationality:s,vat:r,status:a,entityType:e.entity_type,phoneNumber:e.phone_number,legalName:e.legal_name,legalCode:e.legal_code}},r=e=>{const{terms_and_conditions:t,return_policy:i,additional_information:n}=e;return{termsAndConditions:t,returnPolicy:i,additionalInformation:n}},a=e=>{const{id:t,name:i,country_id:n,country_title_local:s,city:r,postal_code:a,line1:o,line2:l}=e;return{id:t,name:i,countryId:n,country:s||"",city:r,postalCode:a,line1:o,line2:l}},o=e=>{const{name:t,countryId:i,country:n,city:s,postalCode:r,line1:a,line2:o}=e;return{name:t||null,country_id:i||null,country_title_local:n,city:s||null,postal_code:r||null,line1:a||null,line2:o||""}},l=e=>{const{buyer:{address:t,email:i}}=e;return{address:(0,n.X)(t),email:i}},c=e=>({title:e.title,body:e.body,terms_updates:e.terms_updates})},44946:(e,t,i)=>{i.d(t,{I:()=>n});const n=e=>{let{cardNumber:t,expirationMonth:i,expirationYear:n,cvc:s}=e;return{number:t,expiration_month:i,expiration_year:n,security_code:s}}},91695:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(120),s=i.n(n),r=i(32699),a=i(68284),o=i(10279),l=i(58237);const c=class{constructor(e,t){var i,n;this.config=e,n=void 0,(i="axios")in this?Object.defineProperty(this,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[i]=n,this.axios=s().create(e),null==t||t.forEach((e=>e(this.axios)))}get(e,t){return this.request("get",e,t)}put(e,t,i){return this.request("put",e,i,t)}patch(e,t,i){return this.request("patch",e,i,t)}post(e,t,i){return this.request("post",e,i,t)}delete(e,t){return this.request("delete",e,t)}request(e,t){let{throwError:i,...n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;return this.validateRequest("".concat(e||"",": ").concat(t)),this.axios.request({...n,method:e,url:t,data:s}).then(this.returnAxiosData,i?void 0:this.parseException)}returnAxiosData(e){return e.data}parseException(e){const t={status:null,code:(0,r.get)(e,"code",a.Q.JsError),message:(0,r.get)(e,"message",""),errors:[],payload:void 0};if((0,o.Kn)(e)&&null!=(n=e.response)&&(0,o.Kn)(n)&&"data"in n&&"status"in n&&"statusText"in n&&"headers"in n&&"config"in n&&"request"in n){var i;const{status:n,data:s}=e.response;return t.status=n,t.code=null!==(i=s.code)&&void 0!==i?i:a.Q.JsError,s.message&&(t.message=s.message),t.errors=s.errors||[],t.payload=s.payload,t}var n,s;if((null==(s=e)?void 0:s.isAxiosError)&&e.response){const{status:i,statusText:n}=e.response;return t.code=a.Q.HttpError,t.status=i,t.message=n,t}return t}validateRequest(e){if(l.X)throw new Error("ApiClient can only be used on the client side (".concat(e,")"))}}},98353:(e,t,i)=>{i.d(t,{Ch:()=>g,iG:()=>m,jN:()=>u,nv:()=>x,tP:()=>h,ud:()=>p});var n=i(120),s=i.n(n),r=i(58237),a=i(63529),o=i(33952),l=i(68284),c=i(88816),d=i(39438);const u=e=>e.interceptors.request.use((e=>{if(r.X)return e;const t=document.querySelector('meta[name="csrf-token"]');if(!t)return e;const i={...e.headers,"X-CSRF-Token":t.getAttribute("content")};return{...e,headers:i}})),m=e=>e.interceptors.response.use(void 0,(t=>t.config&&t.response&&t.response.status===l.o.Unauthorized?s().post(o.w_).then((()=>e.request(t.config))):Promise.reject(t))),p=e=>e.interceptors.response.use((e=>(void 0===e.data.code&&(0,a.KE)("API code is missing in response: ".concat(e.request.responseURL," with status: ").concat(e.status)),e.data.code&&e.data.code!==l.Q.Ok?Promise.reject({response:e}):Promise.resolve(e)))),g=e=>e.interceptors.request.use((e=>{var t;let i=null===(t=document.querySelector('meta[name="accept-language"]'))||void 0===t?void 0:t.getAttribute("content");return i||(i=(0,a.Kd)()),i?{...e,headers:{...e.headers,"Accept-Language":i}}:((0,a.KE)("Unable to retrieve locale for API call"),e)})),h=e=>e.interceptors.response.use(void 0,(e=>{const{response:t}=e;return(null==t?void 0:t.data.code)===l.Q.UserVerificationRequired&&(0,a.ru)(c.j9U),Promise.reject(e)})),x=e=>e.interceptors.response.use(void 0,(t=>{const{response:i}=t;if((null==i?void 0:i.data.code)!==l.Q.TwoFARequired)return Promise.reject(t);const n=new CustomEvent("twoFARequired",{detail:i.data.payload.entity_id});return window.dispatchEvent(n),new Promise(((n,s)=>{window.addEventListener(d.Xn,(()=>{e.request(i.config).then(n).catch(s)})),window.addEventListener(d.nC,(()=>{s(t)}))}))}))},51479:(e,t,i)=>{i.d(t,{Kz:()=>n,gI:()=>s,o7:()=>a,rP:()=>o,rX:()=>r});const n=(0,i(32699).throttle)((async function(){const{requestContentCardsRefresh:e}=await i.e(277).then(i.bind(i,58481));return new Promise(((t,i)=>{e(t,i)}))}),1e4,{leading:!0,trailing:!1});async function s(){const{disableSDK:e}=await i.e(277).then(i.bind(i,58481));e()}async function r(){const{enableSDK:e}=await i.e(277).then(i.bind(i,58481));e()}async function a(){const{requestImmediateDataFlush:e}=await i.e(277).then(i.bind(i,58481));return new Promise((t=>{e(t)}))}async function o(){const{getUser:e}=await i.e(277).then(i.bind(i,58481)),t=e();return t?new Promise((e=>{t.getUserId(e)})):null}},69461:(e,t,i)=>{i.d(t,{Di:()=>d,OW:()=>u,Rs:()=>c,ec:()=>l,jL:()=>r,p3:()=>a,vy:()=>o});var n=i(32699),s=i(63529);const r=(e,t)=>(0,s.ji)(e,{feature:"braze",...t&&{extra:t}}),a=(e,t)=>(0,s.H)(e,{feature:"braze",...t&&{extra:t}}),o=(0,n.memoize)((e=>{if(!e.isLoggedIn)return;const t=e.brazeSdkKey?e.userExternalId?"unknown":"userExternalIdMissing":"sdkKeyMissing";r("failureConfiguringSDK","reason: ".concat(t))}),(function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return JSON.stringify(t)})),l=(0,n.memoize)(((e,t,i,n)=>{const s=i?", channel: ".concat(i):"";r("missingContentError(property: ".concat(t).concat(s,")"),String(n))}),(function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.join(",")})),c=(0,n.memoize)(((e,t,i,n)=>r("incorrectContentError(property: ".concat(t,", channel: ").concat(i,")"),String(n))),(function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.join(",")})),d=(0,n.memoize)(((e,t,i)=>r("contentParseError(channel: ".concat(t,")"),String(i))),(function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.join(",")})),u=(0,n.memoize)(((e,t,i,n)=>{r("loggingFailure(type: ".concat(t,", channel: ").concat(String(i),")"),String(n))}),(function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return JSON.stringify(t)}))},44893:(e,t,i)=>{i.d(t,{B:()=>r,t:()=>s});var n=i(32699);const s=e=>{var t;const i=e.split(".");if(i.length<2)return{};const[,s]=i,r=null===(t=s.replace(/-/g,"+"))||void 0===t?void 0:t.replace(/_/g,"/");if(1===atob(r).length||(0,n.isEmpty)(atob(r)))return{};const a=decodeURIComponent(atob(r).split("").map((e=>"%".concat("00".concat(e.charCodeAt(0).toString(16)).slice(-2)))).join(""));try{return JSON.parse(a)}catch{return{}}},r=e=>{try{const t=atob(e);return JSON.parse(t)}catch{return}}},58237:(e,t,i)=>{i.d(t,{X:()=>n});const n="undefined"==typeof window;null===globalThis||void 0===globalThis||globalThis.EdgeRuntime},77410:(e,t,i)=>{i.d(t,{Z:()=>r,g:()=>a});var n=i(32699);function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class r{constructor(e){s(this,"internalState",void 0),s(this,"listeners",new Set),s(this,"subscribe",(e=>(this.listeners.add(e),()=>{this.listeners.delete(e)}))),this.internalState=e}set state(e){this.internalState=e,this.broadcast()}get state(){return this.internalState}broadcast(){this.listeners.forEach((e=>e()))}}const a=e=>({state:e,subscribe:e=>n.noop})},63115:(e,t,i)=>{i.d(t,{D$:()=>o,e8:()=>a,le:()=>r});const n={getLocalStorageItem:e=>localStorage.getItem(e),removeLocalStorageItem:e=>localStorage.removeItem(e),setLocalStorageItem:(e,t)=>localStorage.setItem(e,t)},s=(0,i(72237).i)(n,{getLocalStorageItem:()=>null}),{getLocalStorageItem:r,removeLocalStorageItem:a,setLocalStorageItem:o}=s},10279:(e,t,i)=>{i.d(t,{Gj:()=>s,IF:()=>a,Kn:()=>c,Mr:()=>l,s5:()=>o,wp:()=>r});var n=i(32699);const s=e=>(0,n.pickBy)(e,(e=>!(Array.isArray(e)&&(0,n.isEmpty)(e)||null==e))),r=e=>(0,n.isEmpty)(e)?null:e,a=(e,t)=>(0,n.includes)(Object.values(t),e),o=(e,t)=>e in t,l=e=>(0,n.pickBy)(e,(e=>String(e))),c=e=>!!e&&"object"==typeof e},72237:(e,t,i)=>{i.d(t,{i:()=>r});var n=i(32699),s=i(58237);const r=(e,t)=>{return s.X?new Proxy(e,(i=t,{get:(e,t)=>i[t.toString()]||n.noop})):e;var i}},59501:(e,t,i)=>{i.d(t,{D9:()=>o,St:()=>r,lD:()=>a});const n={getSessionStorageItem:e=>sessionStorage.getItem(e),removeSessionStorageItem:e=>sessionStorage.removeItem(e),setSessionStorageItem:(e,t)=>sessionStorage.setItem(e,t)},s=(0,i(72237).i)(n,{getSessionStorageItem:()=>null}),{getSessionStorageItem:r,removeSessionStorageItem:a,setSessionStorageItem:o}=s},73235:(e,t,i)=>{i.d(t,{E_:()=>y,G9:()=>h,Iq:()=>u,Kf:()=>l,Kw:()=>p,Rq:()=>d,Sd:()=>_,Uf:()=>f,d5:()=>v,fb:()=>x,lN:()=>m,oZ:()=>c,pN:()=>g});var n=i(46433),s=i.n(n),r=i(32699),a=i(8920),o=i(10279);const l=e=>Object.keys(e).map((t=>{const i=e[t];return Array.isArray(i)?i.map((e=>"".concat(t,"[]=").concat(encodeURIComponent(e)))).join("&"):"".concat(t,"=").concat(encodeURIComponent(i))})).join("&"),c=e=>{const t=new URLSearchParams(e),i={};return t.forEach(((e,t)=>{if("[]"===t.substring(t.length-2,t.length)){const n=t.substring(0,t.length-2);return i[n]=i[n]||[],void i[n].push(e)}i[t]=e})),i},d=e=>{const t=new URLSearchParams(e),i={};return t.forEach(((e,t)=>{i[t]?(Array.isArray(i[t])||(i[t]=[i[t]]),i[t].push(e)):i[t]=e})),i},u=(e,t)=>{const[,i="/",n="",s=""]=e.match(/^([^?#]+)(\?[^#]*)?(#.*)?$/)||[],r=l({...c(n),...(0,o.Gj)(t)});return"".concat(i).concat(r?"?".concat(r):"").concat(s)},m=(e,t)=>{const{extractUrl:i,urlHasProtocol:n}=s().regexen,r=/^\s/,a=/(\r\n|\r|\n)/;let o=0;const l={};return{text:e.replace(i,(e=>{o+=1;const i=e.replace(/\s+/g,""),s=n.test(i)?i:"//".concat(i),c="link".concat(o);let d="";return a.test(e)?d="\n":r.test(e)&&(d=" "),l[c]=t(s,i),"".concat(d,"{").concat(c,"}")})),values:l}},p=e=>(0,r.unescape)(e).replace(/(<a[\s\S]*?>[\s\S]*?<\/a>)|(https?:\/\/(www\.)?[a-zA-Z0-9-]+\.[^<\s]+)/gi,((e,t)=>t?e:'<a href="'.concat(e,'">').concat(e,"</a>"))),g=e=>[e].join(),h=(e,t)=>e.includes(t),x=(e,t)=>{const i=(t||e).split("/");return i[i.length-1]},f=(e,t)=>e.split("/")[t+1]||"",y=e=>{const t=(e=>e.replace(/^www\./,""))(e);return(0,o.s5)(t,a.IZ)?"https://".concat(a.IZ[t]):""},v=(e,t)=>t.match(/^https?:\/\//)?e.replace(/^(https?:\/\/[^/]+\/|\/)/,"".concat(t,"/")):e,_=(e,t,i)=>{const n=c(t);return i.forEach((e=>delete n[e])),Object.keys(n).length?"".concat(e,"?").concat(l(n)):e}},63529:(e,t,i)=>{i.d(t,{H:()=>f,H2:()=>o,H5:()=>c,KE:()=>x,Kd:()=>r,ap:()=>g,ij:()=>v,ji:()=>y,k3:()=>l,mZ:()=>u,n6:()=>h,rf:()=>p,rh:()=>a,ru:()=>d,sl:()=>m,wi:()=>_});const n={logError:function(){for(var e,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return null===(e=window.apphealth)||void 0===e?void 0:e.captureError(...i)},logWarning:function(){for(var e,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return null===(e=window.apphealth)||void 0===e?void 0:e.captureWarning(...i)},logMessage:function(){for(var e,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return null===(e=window.apphealth)||void 0===e?void 0:e.captureMessage(...i)},getLocale:()=>{var e;return(null===(e=window.MD)||void 0===e?void 0:e.config.get("lang"))||""},getFiredEvents:e=>{var t;return null!==(t=window.MD)&&void 0!==t&&t.firedEvents&&window.MD.firedEvents[e]||[]},clearFiredEvents:e=>{var t;null!==(t=window.MD)&&void 0!==t&&t.firedEvents&&(window.MD.firedEvents[e]=[])},scrollToTop:()=>window.scroll(0,0),scrollToElementById:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"site-content";const{document:i}=window,n=i.getElementsByClassName(t)[0],s=i.getElementById(e);n&&s&&n instanceof HTMLElement&&window.scroll({top:s.getBoundingClientRect().top-n.getBoundingClientRect().top-n.offsetTop,behavior:"smooth"})},navigateToPage:e=>{window.location.href=e},redirectToPage:e=>window.location.replace(e),reloadPage:()=>window.location.reload(),preventLeave:e=>(e.preventDefault(),e.returnValue=!0,!0),toggleOneTrustInfoDisplay:()=>{var e;null===(e=window.OneTrust)||void 0===e||e.ToggleInfoDisplay()},openBrowsingContext:function(){return window.open(...arguments)},getUserAgent:()=>window.navigator.userAgent,getBrowserWidth:()=>window.innerWidth},s=(0,i(72237).i)(n,{getLocale:()=>"",getFiredEvents:()=>[],preventLeave:()=>!0,openBrowsingContext:()=>null,getUserAgent:()=>"",getBrowserWidth:()=>0,logError:(e,t)=>console.error(e,t),logWarning:(e,t)=>console.warn(e,t),logMessage:(e,t)=>console.log(e,t)}),{getLocale:r,getFiredEvents:a,clearFiredEvents:o,scrollToTop:l,scrollToElementById:c,navigateToPage:d,redirectToPage:u,reloadPage:m,preventLeave:p,toggleOneTrustInfoDisplay:g,openBrowsingContext:h,logWarning:x,logError:f,logMessage:y,getUserAgent:v,getBrowserWidth:_}=s},94290:(e,t,i)=>{i.d(t,{N:()=>s,e:()=>r});var n=i(11527);const s=e=>(0,n.jsxs)(n.Fragment,{children:[e," ",(0,n.jsx)("span",{"aria-hidden":!0,children:"*"})]}),r=e=>e?e.split(/[,|;| |\n]+/).filter(Boolean):[]},33319:(e,t,i)=>{var n={};i.r(n),i.d(n,{getBuyerPhoneRequirement:()=>Sv,getCountryBounds:()=>uv,getDeliveryOptionsUiState:()=>gv,getDeliveryPickupPointDetails:()=>bv,getDeliveryTypes:()=>Nv,getDeliveryTypesSize:()=>Lv,getDeliveryTypesUiState:()=>Fv,getIsIntergratedShipping:()=>wv,getIsItemOfflineVerificationEnabled:()=>Ov,getIsPickupModalElementLoaded:()=>fv,getIsShipmentActionable:()=>vv,getNearbyPoints:()=>mv,getPackageType:()=>jv,getPickupModalUiState:()=>hv,getPickupModalUiStateByElement:()=>xv,getPickupPoint:()=>yv,getPickupPointsUiState:()=>zv,getRateUuid:()=>Ev,getSelectedDeliveryType:()=>_v,getSelectedRateUuid:()=>Cv,getSelectedServiceType:()=>kv,getSelectedShippingPoint:()=>Pv,getShipment:()=>dv,getShippingOptions:()=>Tv,getSuggestedRateUuid:()=>Iv,getSuggestedShippingPointCode:()=>Zv,getUiState:()=>pv});var s={};i.r(s),i.d(s,{getAddress:()=>f_,getBlikPaymentAuth:()=>a_,getBlikPaymentCode:()=>k_,getCheckoutData:()=>Dv,getCheckoutDataUiState:()=>T_,getConfiguration:()=>m_,getCurrencyConversion:()=>Vv,getFieldError:()=>g_,getFieldErrors:()=>h_,getFormState:()=>i_,getFormattedAddress:()=>z_,getHasChecksumError:()=>__,getHasShippingDiscountError:()=>b_,getIsAddCardRecommendationEnabled:()=>Xv,getIsAddressCompleted:()=>Z_,getIsBlikAuthRequired:()=>w_,getIsBundleOrder:()=>u_,getIsCheckoutUiLoaded:()=>R_,getIsDeliveryTypesInState:()=>C_,getIsFormCompleted:()=>O_,getIsKycConfirmationNeeded:()=>y_,getIsOfflineVerificationCheckDisabled:()=>F_,getIsPaymentAvailable:()=>l_,getIsPaymentCompleted:()=>E_,getIsPaymentFailedAfterRedirect:()=>S_,getIsPaymentProcessing:()=>e_,getIsPaymentProcessingTakesTooLong:()=>j_,getIsSellerBusinessUser:()=>x_,getIsShipmentCompleted:()=>I_,getIsShippingContactCompleted:()=>N_,getIsShippingContactDisabled:()=>L_,getIsTwoFactorVerificationNeeded:()=>v_,getIsUseExistingCardRecommendationEnabled:()=>Yv,getOfflineVerificationService:()=>$v,getOrderItems:()=>d_,getOrderPrice:()=>c_,getPayInMethodIncentive:()=>Gv,getPayInMethodPromotion:()=>Wv,getPayInMethodsConfig:()=>Bv,getPayment:()=>n_,getPaymentAuthAction:()=>o_,getPaymentError:()=>s_,getPaymentMethod:()=>P_,getPricing:()=>qv,getRecommendedPayInMethod:()=>Hv,getSelectedCard:()=>Jv,getSelectedCardId:()=>Kv,getSelectedPayInMethod:()=>Uv,getShipmentPrice:()=>Qv,getThreeDS2Config:()=>p_,getTransactionChecksum:()=>Mv,getTransactionId:()=>Av,getTwoFactorVerification:()=>t_,getUiState:()=>r_});var r={};i.r(r),i.d(r,{getCardAddAuth:()=>cS,getCardPayInMethod:()=>pS,getFormState:()=>lS,getIsCardExpired:()=>mS,getIsCardSingleUseOverriden:()=>uS,getPayInMethods:()=>dS});var a={};i.r(a),i.d(a,{fetchConfigurationRequest:()=>bS,getEscrowPaymentDataRequest:()=>yS,handlePaymentInitiationResponse:()=>hS,handlePaymentRedirectResult:()=>fS,handlePendingPayment:()=>xS,initiateEscrowPaymentRequest:()=>gS,updateEscrowPaymentDataRequest:()=>vS,validateFields:()=>_S});var o={};i.r(o),i.d(o,{fetchCountryBoundsRequest:()=>XS,fetchNearbyPointsByElementRequest:()=>YS,fetchNearbyShippingOptionsRequest:()=>JS,trackShippingPointsLoad:()=>KS});var l={};i.r(l),i.d(l,{selectCreditCardRequest:()=>rZ}),i(34134),i(79510),i(4698),i(74930),i(34316),i(73535),i(77377),i(45915),i(12013),i(15910),i(19782),i(76310),i(74192),i(78415),i(38155),i(56344),i(8267),i(54949),i(43206),i(85036),i(84633),i(97231),i(47073),i(14919),i(33770),i(62948),i(6802),i(5783),i(9880),i(66693),i(71810),i(79877),i(66829),i(5073),i(46513),i(82181),i(36479),i(90095);var c=i(63539),d=i.n(c),u=i(67378),m=i(50959),p=i(44657),g=i(76451),h=i(9432),x=i(81224),f=i(97754),y=i.n(f),v=i(32699),_=i(61357);const b=e=>e.displayName||e.name||"Component",j=e=>{var t;if(!(0,_.isFragment)(e))return!1;const i=null===(t=e.props)||void 0===t?void 0:t.children;return(0,v.isArray)(i)?(0,v.isEmpty)((0,v.compact)(i)):!i},S=(0,m.createContext)({breakpoints:{active:[]}}),{Provider:Z,Consumer:I}=S,C=S;var k,w,P,z=i(11527);function T(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function F(e){var t,i;return i=t=class extends m.Component{render(){return(0,z.jsx)(I,{children:t=>{let{breakpoints:i}=t;return(0,z.jsx)(e,{...this.props,breakpoints:i})}})}},T(t,"displayName",b(e)),T(t,"WrappedComponent",e),i}class N extends m.Component{getBreakpointSeparator(){const{separator:e,separatorAtBreakpoint:t,breakpoints:i}=this.props;if(!t)return e;const n=i.active.find((e=>t[e]));return n?t[n]:e}render(){const e=(0,v.compact)(this.props.children.flat()).filter((e=>!j(e)));if(null==e||!e.length)return null;const t=this.getBreakpointSeparator();return e.map(((i,n)=>(0,z.jsxs)(m.Fragment,{children:[i,e.length-1!==n&&t]},n)))}}k=N,w="defaultProps",P={separator:(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical})},w in k?Object.defineProperty(k,w,{value:P,enumerable:!0,configurable:!0,writable:!0}):k[w]=P;const L=F(N),E=function(){const{breakpoints:e}=(0,m.useContext)(C);return e};var O=i(18747);const R=["b","div","i","li","ol","p","span","strong","ul","u"].reduce(((e,t)=>(e[t]=e=>(0,m.createElement)(t,null,e),e)),{}),D=e=>1===e?"one":"other",A={lt:e=>e%10==1&&e%100!=11?"one":[2,3,4,5,6,7,8,9].includes(e%10)&&![11,12,13,14,15,16,17,18,19].includes(e%100)?"few":"other",cz:e=>1===e?"one":[2,3,4].includes(e)?"few":"other",pl:e=>1===e?"one":[2,3,4].includes(e%10)&&![12,13,14].includes(e%100)?"few":"other",ro:e=>1===e?"one":e>=20?"other":"few",hu:()=>"one",fr:e=>e<=1?"one":"other",sk:e=>1===e?"one":[2,3,4].includes(e)?"other":"few"},M=e=>{const t=A[e];return null!=t?t:D},U=function(e){const t=(0,O.Z)();return(0,m.useCallback)(((i,n,s)=>{const r=e?"".concat(e,".").concat(i):i,a=M(t.locale),o=s?"".concat(r,".").concat(a(s.count)):r;return""===t.messages[o]?"":n?t.formatMessage({id:o},{...R,...n}):t.formatMessage({id:o})}),[t,e])};var B=i(77145);let q;!function(e){e.De="de",e.Fr="fr",e.Lt="lt",e.Es="es",e.Nl="nl",e.Pl="pl",e.Cz="cz",e.Be="be",e.Lu="lu",e.Uk="uk",e.Us="us",e.At="at",e.It="it",e.Pt="pt",e.Sk="sk",e.Hu="hu",e.Se="se",e.Ro="ro",e.Dk="dk",e.Fi="fi"}(q||(q={}));var V=i(19892);const H="session",G=e=>e[H],W=e=>G(e).user,X=e=>{const t=W(e);return t?t.id:null},Y=e=>{var t;return(null===(t=W(e))||void 0===t?void 0:t.external_id)||null},K=e=>{const t=W(e);return t?t.email:null},J=(0,B.P1)(W,(e=>null==e?void 0:e.country_code)),Q=(0,B.P1)(W,(e=>null==e?void 0:e.favourite_topic_count)),$=(0,B.P1)(W,(e=>null==e?void 0:e.forum_topic_count)),ee=(0,B.P1)(W,(e=>null==e?void 0:e.country_iso_code)),te=(0,B.P1)(W,(e=>null==e?void 0:e.real_name)),ie=(0,B.P1)(W,(e=>(null==e?void 0:e.default_address)&&(0,V.X)(e.default_address))),ne=((0,B.P1)(ie,(e=>(0,v.compact)([null==e?void 0:e.line1,null==e?void 0:e.line2,null==e?void 0:e.city,null==e?void 0:e.state,null==e?void 0:e.postalCode]).join(" "))),(0,B.P1)(W,(e=>(null==e?void 0:e.created_at)&&new Date(e.created_at)))),se=e=>{const t=W(e);return t?t.city:null},re=e=>{const t=W(e);return t?t.country_id:null},ae=((0,B.P1)(W,(e=>null==e?void 0:e.country_title)),e=>{const t=W(e);return!(null==t||!t.is_god)}),oe=e=>{var t;return(null===(t=G(e).user)||void 0===t?void 0:t.photo)||null},le=e=>G(e).anon_id,ce=e=>G(e).languageCode,de=e=>{var t;return null===(t=W(e))||void 0===t?void 0:t.verification.phone.valid},ue=e=>{var t;return null===(t=W(e))||void 0===t?void 0:t.verification.email.valid},me=e=>{var t;return null===(t=W(e))||void 0===t?void 0:t.restricted_by_terms},pe=e=>{var t;return(null===(t=W(e))||void 0===t?void 0:t.item_count)||0},ge=e=>{var t;return null===(t=W(e))||void 0===t?void 0:t.bundle_discount},he=e=>{var t;return null===(t=W(e))||void 0===t?void 0:t.has_confirmed_payments_account},xe=e=>{var t,i;return!(null===(t=W(e))||void 0===t||null===(i=t.fundraiser)||void 0===i||!i.active)},fe=e=>{var t,i;return null===(t=W(e))||void 0===t||null===(i=t.fundraiser)||void 0===i?void 0:i.percentage},ye=e=>{var t;return null===(t=W(e))||void 0===t?void 0:t.is_catalog_moderator},ve=e=>{var t;return null===(t=W(e))||void 0===t?void 0:t.is_catalog_role_marketing_photos},_e=e=>!!W(e),be=e=>G(e).portalMergeSourceEnabled,je=e=>{var t;return null===(t=W(e))||void 0===t?void 0:t.business_account},Se=e=>{var t;return null===(t=je(e))||void 0===t?void 0:t.id},Ze=e=>{var t;return!(null===(t=W(e))||void 0===t||!t.business)},Ie=e=>G(e).braze,Ce=(0,B.P1)(G,(e=>{let{countryCodeByIp:t}=e;return"--"===t?void 0:t})),ke=(0,B.P1)(G,(e=>{let{countryCode:t}=e;return t})),we=(0,B.P1)([le,X,ke],((e,t,i)=>({anonId:e,userId:t,countryCode:i}))),Pe=(0,B.P1)(W,(e=>!(null==e||!e.account_ban_date))),ze=e=>G(e).isWebView,Te=e=>G(e).isContentOnlyView;var Fe=i(28765);let Ne,Le;var Ee;!function(e){e.Idle="IDLE",e.Pending="PENDING",e.Success="SUCCESS",e.Failure="FAILURE"}(Ne||(Ne={})),(Ee=Le||(Le={})).Primary="primary-default",Ee.Success="success-default",Ee.Expose="expose-default",Ee.Warning="warning-default",Ee.PrimaryLight="primary-light",Ee.SuccessLight="success-light",Ee.ExposeLight="expose-light",Ee.WarningLight="warning-light",Ee.PrimaryMedium="primary-medium",Ee.SuccessMedium="success-medium",Ee.ExposeMedium="expose-medium",Ee.WarningMedium="warning-medium",Ee.GreyscaleLevel1="greyscale-level-1",Ee.GreyscaleLevel2="greyscale-level-2",Ee.GreyscaleLevel3="greyscale-level-3",Ee.GreyscaleLevel4="greyscale-level-4",Ee.GreyscaleLevel5="greyscale-level-5",Ee.GreyscaleLevel6="greyscale-level-6",Ee.GreyscaleLevel7="greyscale-level-7",Ee.Facebook="facebook",Ee.Google="google",Ee.Apple="apple";const Oe=100,Re=3e3,De=[20,50,100],Ae=[20,50,100];var Me=i(88816);let Ue;!function(e){e.Auto="auto",e.Manual="manual",e.None="none"}(Ue||(Ue={}));var Be=i(39438);const qe="".concat(Be.Fv,"/assets/no-photo/user-empty-state.svg"),Ve="".concat(Be.Fv,"/assets/no-photo/vinted-welcome.png"),He=Object.freeze(["de","de_babies","lt_babies"]);let Ge,We,Xe;var Ye;!function(e){e[e.Degree0=0]="Degree0",e[e.Degree90=1]="Degree90",e[e.Degree180=2]="Degree180",e[e.Degree270=3]="Degree270"}(Ge||(Ge={})),function(e){e.Small="thumb20",e.Medium="thumb30",e.Default="thumb50",e.Large="thumb70",e.XLarge="thumb90",e.X2Large="thumb100",e.X3Large="thumb140",e.X4Large="thumb150",e.X5Large="thumb175",e.X6Large="thumb310"}(We||(We={})),(Ye=Xe||(Xe={})).Small="thumb70x100",Ye.Medium="thumb150x210",Ye.Large="thumb310x430",Ye.XLarge="thumb364x428",Ye.X2Large="thumb624x428";const Ke=()=>qe,Je=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:We.Default;if(!e)return Ke();if(!e.thumbnails)return Ke();const i=e.thumbnails.find((e=>e.type===t));return i?i.url:Ke()},Qe=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:We.Default;if(!e)return Ke();if(!e.thumbnails)return Ke();const i=e.thumbnails.find((e=>e.type===t));return i?i.url:Ke()},$e=e=>(0,v.round)(5*e,2),et=e=>{const{expose_location:t,city:i,country_title_local:n}=e;return t&&i?"".concat(i,", ").concat(n):n},tt=e=>{let{fraction:t,minimal_item_count:i}=e;return{fraction:t,minimalItemCount:i}},it=e=>e.map(tt),nt=e=>({id:e.id,userId:e.user_id,isEnabled:e.enabled,minimalItemCount:e.minimal_item_count,fraction:e.fraction,discounts:it(e.discounts)}),st=e=>{let{discounts:t,default_discounts:i}=e;return{discountFractions:t,defaultDiscounts:it(i)}};var rt=i(59843);const at=e=>({type:e.type,url:e.url,width:e.width,height:e.height,isOriginalSize:e.original_size}),ot=e=>e.map(at),lt=e=>{return{id:e.id,width:e.width,height:e.height,url:e.url,tempUuid:e.temp_uuid,dominantColor:e.dominant_color,dominantColorOpaque:e.dominant_color_opaque,isSuspicious:e.is_suspicious,fullSizeUrl:e.full_size_url,orientation:e.orientation?e.orientation:0,thumbnails:ot(e.thumbnails),isHidden:e.is_hidden,reaction:e.reaction?(t=e.reaction,{id:t.id,type:t.type}):void 0};var t},ct=e=>e.map(lt),dt=e=>{var t;return{id:e.id,anonId:e.anon_id,photo:e.photo&&lt(e.photo),login:e.login,externalId:e.external_id,allowDirectMessaging:e.allow_direct_messaging,profileUrl:e.profile_url,path:e.path,feedbackReputation:e.feedback_reputation,feedbackCount:e.feedback_count,isFavourite:e.is_favourite,forumBanDate:e.forum_ban_date,isForumBanPermanent:!!e.is_forum_ban_permanent,accountBanDate:e.account_ban_date,isAccountBanPermanent:!!e.is_account_ban_permanent,verification:e.verification,accountStatus:e.account_status,isModerator:e.moderator,isVolunteerModerator:e.volunteer_moderator,isGod:e.is_god,isSystem:!!e.is_system,isIdentity:e.is_identity,isHated:e.is_hated,hatesYou:e.hates_you,isRestrictedByTerms:!!e.restricted_by_terms,isSoftRestrictedByTerms:!!e.soft_restricted_by_terms,isTermsUpdateAvailable:!!e.terms_update_available,isRestrictedByUnconfirmedRealName:!!e.restricted_by_unconfirmed_real_name,isRestrictedByBalanceActivation:!!e.restricted_by_balance_activation,locationDescription:e.location_description,email:e.email,lastLoggedOn:e.last_loged_on,lastLoggedOnTs:e.last_loged_on_ts,createdAt:e.created_at,followersCount:e.followers_count,followingCount:e.following_count,forumMessageCount:e.forum_msg_count,forumTopicCount:e.forum_topic_count,favouriteTopicCount:e.favourite_topic_count,followingBrandsCount:e.following_brands_count,conversationTemplateCount:e.msg_template_count,takenItemCount:e.taken_item_count,givenItemCount:e.given_item_count,itemCount:e.item_count,facebookUserId:e.facebook_user_id,countryId:e.country_id,countryCode:e.country_code,countryIsoCode:e.country_iso_code,countryTitle:e.country_title,countryTitleLocal:e.country_title_local,about:e.about,hasItemAlerts:!!e.has_item_alerts,hasReplicaProofItems:!!e.has_replica_proof_items,localization:null!==(t=e.localization)&&void 0!==t?t:Ue.None,cityId:e.city_id,city:e.city,isLocationPublic:!!e.is_location_public,defaultAddress:e.default_address&&(0,V.X)(e.default_address),exposeLocation:e.expose_location,isPublishPhotosAgreed:e.is_publish_photos_agreed,allowMyFavouriteNotifications:!!e.allow_my_favourite_notifications,allowThirdPartyTracking:e.third_party_tracking,allowPersonalization:!!e.allow_personalization,carrierIds:e.carrier_ids,carriersWithoutCustomIds:e.carriers_without_custom_ids,isOnHoliday:e.is_on_holiday,hasConfirmedPaymentsAccount:!!e.has_confirmed_payments_account,isLoginViaExternalSystemOnly:!!e.is_login_via_external_system_only,fundraiser:e.fundraiser,realNamePermission:e.real_name_permission,birthdayPermission:e.birthday_permission,realName:e.real_name,gender:e.gender,birthday:e.birthday,isGeneratedLogin:!!e.generated_login,serviceFeeUiDiscount:e.service_fee_ui_discount||null,bundleDiscount:e.bundle_discount&&nt(e.bundle_discount),isBusiness:e.business,businessAccount:e.business_account&&(0,rt.hL)(e.business_account),isInternationalTradingEnabled:!!e.international_trading_enabled,currency:e.currency,isCountrySelectionNeeded:!!e.country_selection_needed,closetCountdownEndDate:e.closet_countdown_end_date,locale:e.locale,isCatalogModerator:e.is_catalog_moderator,isCatalogRoleMarketingPhotos:e.is_catalog_role_marketing_photos}},ut=e=>{const{id:t,login:i,photo:n}=e;return{id:t,login:i,thumbnail:Je(n)}},mt=e=>e.map(ut),pt=e=>({id:e.id,forumId:e.forum_id,subforumId:e.sub_forum_id,postCount:e.post_count,isOnTop:e.is_on_top,isLocked:e.is_locked,title:e.title,isAnonymous:e.is_anonymous,showPhotosWhenSignedOut:e.is_show_photos_signed_out,firstPostDate:e.first_post_date,firstPostBody:e.first_post_body,firstPostPhotos:e.first_post_photos&&ct(e.first_post_photos),lastPostDate:e.last_post_date,lastPostDateTs:e.last_post_date_ts,lastPostIsAnonymous:e.last_post_is_anonymous,lastPostUser:e.last_post_user&&dt(e.last_post_user),lastPostPath:e.last_post_path,lastPostUserIsDeleted:e.last_post_user_is_deleted,isUserDeleted:e.user_is_deleted,createdAtTs:e.created_at_ts,isFavourite:e.is_favourite,canEdit:e.can_edit,canDelete:e.can_delete,canPost:e.can_post,url:e.url,isUserAnonymous:e.user_is_anonymous,user:e.user&&dt(e.user),path:e.path});var gt=i(76478),ht=i(97290),xt=i(94962);const ft=e=>{let{title:t,icon:i,url:n,suffixCount:s}=e;const{formatNumber:r}=(0,O.Z)();return(0,z.jsx)("div",{className:"u-overflow-hidden",children:(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,url:n,chevron:!0,children:(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center u-justify-content-between",children:[(0,z.jsxs)("div",{className:"u-flexbox u-justify-content-between u-align-items-flex-end",children:[(0,z.jsx)(ht.Z,{name:i,color:ht.Z.Color.GreyscaleLevel3}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:t,theme:"amplified"})]}),null!==s&&(0,z.jsx)("div",{className:"u-align-items-flex-end",children:(0,z.jsx)(xt.Z,{text:r(s),theme:"inherit"})})]})})})};var yt=i(68254),vt=i(1083),_t=i(78216),bt=i(39416),jt=i(1731),St=i(58237);const Zt={second:45,minute:45,hour:22,day:5,week:3,month:11},It=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now(),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zt;const n=(e-t)/jt.L7;if(Math.abs(n)<i.second)return{value:Math.round(n),unit:"second"};const s=n/jt.Yt;if(Math.abs(s)<i.minute)return{value:Math.round(s),unit:"minute"};const r=n/jt.Xx;if(Math.abs(r)<i.hour)return{value:Math.round(r),unit:"hour"};const a=n/jt.Nf;if(Math.abs(a)<i.day)return{value:Math.round(a),unit:"day"};const o=n/jt.P0;if(Math.abs(o)<i.week)return{value:Math.round(o),unit:"week"};const l=a/jt.Ry;if(Math.abs(l)<i.month)return{value:Math.round(l),unit:"month"};const c=a/jt.GP;return{value:Math.round(c),unit:"year"}},Ct=()=>Math.floor((new Date).getTime()/jt.L7),kt=e=>Math.floor(Date.parse(e)/jt.L7),wt=e=>{if(!e)return;const t=kt(e);var i;return Number.isNaN(t)?void 0:(i=t,Ct()<i)},Pt=e=>{let{years:t=0,days:i=0,hours:n=0,minutes:s=0,seconds:r=0}=e;const a=new Date;return a.setFullYear(a.getFullYear()+t),a.setDate(a.getDate()+i),a.setHours(a.getHours()+n),a.setMinutes(a.getMinutes()+s),a.setSeconds(a.getSeconds()+r),a},zt=e=>{let{value:t}=e;if(Number.isNaN(t))return null;const{value:i,unit:n}=It(t),s=new Date(t).toLocaleDateString(void 0,{hour:"numeric",minute:"numeric",second:"numeric"});return(0,z.jsx)("span",{title:s,children:(0,z.jsx)(bt.Z,{unit:n,value:i})})},Tt=e=>{let{id:t,date:i,relativeDate:n=!1,inline:s=!1}=e;const r=(0,z.jsxs)(z.Fragment,{children:[t&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(vt.Z,{id:t}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small})]}),n?(0,z.jsx)(zt,{value:+i}):(0,z.jsx)(_t.Ji,{value:i,year:"numeric",month:"long",day:"numeric"})]});return s?(0,z.jsx)("span",{children:r}):(0,z.jsx)("div",{children:r})},Ft=e=>{let{topics:t}=e;const i=U(),{formatNumber:n}=(0,O.Z)();return(0,z.jsx)("span",{"data-testid":"forum-news-section",children:(0,z.jsx)(g.Z,{children:(0,z.jsxs)("div",{className:"u-overflow-hidden",children:[(0,z.jsx)(yt.Z,{text:i("forum.sidebar.forum_news.title"),suffix:(0,z.jsx)("a",{"data-testid":"more-link",href:Me.Yms,children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:i("forum.sidebar.forum_news.actions.more"),theme:"primary",clickable:!0,underline:!1})}),type:yt.Z.Type.Leading}),(0,z.jsx)(L,{separator:(0,z.jsx)(h.Z,{}),children:t.map((function(e){const{id:t,title:i,path:s,lastPostDateTs:r,isFavourite:a,postCount:o}=e;return(0,z.jsx)("span",{"data-testid":"forum-news-topic-item",children:(0,z.jsxs)(gt.Z,{title:i,type:gt.Z.Type.Navigating,chevron:!0,url:s,children:[(0,z.jsx)(x.Z,{}),(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsx)(ht.Z,{name:"comment",size:ht.Z.Size.Small,color:ht.Z.Color.GreyscaleLevel4}),(0,z.jsx)(x.Z,{size:x.Z.Size.Small,orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:n(o),theme:"inherit"}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium,orientation:x.Z.Orientation.Vertical}),r&&(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:(0,z.jsx)(Tt,{date:new Date(r),relativeDate:!0}),theme:"inherit"}),a&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Medium,orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(ht.Z,{name:"bookmark-filled",size:ht.Z.Size.Small,color:ht.Z.Color.Primary})]})]})]})},t)}))})]})})})};var Nt=i(56015),Lt=i(8040);const Et="ads",Ot=e=>e[Et],Rt=e=>Ot(e).uiState,Dt=e=>Ot(e).placements,At=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return i=>(0,v.find)(Dt(i),{shape:e,mediation:t})},Mt=e=>t=>{var i;return(null===(i=Dt(t)[0])||void 0===i?void 0:i.page)===e},Ut=e=>Ot(e).isAdBlockerUsed,Bt=e=>Ot(e).hasAdBlockerBeenTracked,qt=e=>Ot(e).adBlockerVisitorId,Vt="screen",Ht=e=>(e=>e[Vt])(e).name,Gt="featureSwitches",Wt=e=>t=>(e=>e[Gt])(t)[e]||!1;var Xt=i(8920);let Yt,Kt,Jt,Qt,$t;!function(e){e.NotSelected="",e.Female="F",e.Male="M",e.Other="O"}(Yt||(Yt={})),function(e){e[e.Member=30]="Member",e[e.Brand=40]="Brand"}(Kt||(Kt={})),function(e){e[e.Active=0]="Active",e[e.Deleted=3]="Deleted",e[e.Banned=8]="Banned",e[e.ActiveUnconfirmed=9]="ActiveUnconfirmed",e[e.TemporaryUnconfirmed=14]="TemporaryUnconfirmed"}(Jt||(Jt={})),function(e){e[e.Everyone=0]="Everyone",e[e.Members=1]="Members",e[e.Nobody=2]="Nobody"}(Qt||(Qt={})),function(e){e.Checkout="checkout",e.Bundling="bundling",e.BundleSummary="bundle_summary",e.Brands="brands",e.ExpiredCardModal="expired_card_modal",e.DeliveryInstructions="delivery_instructions",e.Item="item",e.MessageReply="message_reply",e.MessageList="message_list",e.MessageNew="message_New",e.PhoneVerification="verification_prompt_phone",e.PhoneVerificationCheck="verification_prompt_phone_check",e.TwoFactorAuthentication="two_factor_authentication",e.ItemUpload="upload_item",e.ItemEdit="edit_item",e.ItemDraft="edit_draft",e.ItemReservation="item_reservation",e.ItemMarkAsSold="item_mark_as_sold",e.UserProfile="user_profile",e.UserAbout="user_info",e.CurrentUserProfile="current_user_profile",e.TrackShipmentView="track_shipment_view",e.OrderDetails="order_details",e.PaymentOptions="payment_options",e.RequestToReturn="request_to_return",e.DropOffPointInformation="dropoff_point_information",e.ComplaintProof="complaint_proof",e.ShippingSettings="shipping_settings",e.SubscriptionSettings="subscription_settings",e.PaymentSettings="payment_settings",e.PrivacySettings="privacy_settings",e.ProfileSettings="profile_settings",e.PoliciesSettings="policies_settings",e.KycMain="identity_confirmation",e.KycAddressModal="billing_address_update",e.KybEducation="kyb_education",e.KybForm="kyb_form",e.KycDocumentDeleteModal="delete_documents_modal",e.KycClosingModal="closing_modal",e.KycStatus="status_screen",e.KycConfirmIdentityModal="confirm_identity_modal",e.KycBankStatementEducation="kyc_bank_statement_education",e.KycAddressProofEducation="address_proof_education",e.MergeAnnouncement="announcement",e.MergeAnnouncementTarget="announcement_target",e.MergeGoToOldPortal="go_to_old_portal",e.GetShippingLabel="get_shipping_label",e.DonationsOverview="donations_overview",e.FundraiserOverview="donations_overview",e.DonationsSetup="donations_set_up",e.FundraiserSetup="donations_set_up",e.FavoriteItemList="favorite_item_list",e.RecommendedItemsList="recommended_items_list",e.Catalog="catalog",e.Welcome="welcome",e.Balance="balance",e.OrdersList="orders_list",e.RefundStatus="refund_status",e.PickupPointMap="dropoff_point_map",e.PickupPointList="dropoff_point_list",e.HomeDeliverySelection="home_delivery_selection",e.CaptchaPage="captcha_page",e.PaymentsAccount="payments_account",e.PaymentsAccountInTransaction="payments_account_in_transaction",e.BillingAddressUpdate="billing_address_update",e.DropoffTypeSelection="dropoff_type_selection",e.BankAccount="bank_account",e.BuyerInvoiceDetails="b2c_buyer_invoice_details",e.CreditCardAdd="credit_card_add",e.SaveCreditCardReminder="save_credit_card_reminder",e.TransactionCancellationReasons="transaction_cancellation_reasons",e.ContactForm="contact_form",e.ReturnAddress="return_address",e.RegistrationBusinessDetails="registration_business_details",e.RegistrationBusinessRepresentative="registration_business_representative",e.RegistrationBusinessAddress="registration_business_address",e.RegistrationBusinessProfile="registration_business_profile",e.WalletConversion="wallet_conversion",e.WalletConversionFailed="wallet_conversion_failed",e.BusinessHomepage="business_homepage",e.DigitalLabel="digital_label",e.ReferralHowItWorks="referral_info_items",e.ReferralInvite="referral_invite",e.ReferralsFriendsList="registered_referrals_list",e.ReferralsRewardsList="referrals_rewards_list",e.ReferralProgramOff="referral_info_items_program_off",e.ContactDetails="contact_details",e.SellerContactDetails="seller_contact_details",e.ConfirmEverythingIsOkModal="confirm_everything_is_ok_modal",e.InsufficientBalanceModal="insufficient_balance_modal",e.KycEducation="kyc_education",e.EscrowOnboarding="escrow_onboarding",e.DocumentUploadTips="document_upload_tips",e.ProductFeedbackForm="product_feedback_form",e.MergeMissingInformation="merge_missing_information",e.FillZipCodeAfterListing="fill_zip_code_after_listing",e.CrmInAppMessage="crm_in_app_message",e.SellerPolicies="seller_policies",e.EditBusinessAddress="edit_business_address",e.EditReturnAddress="edit_return_address",e.PushUpOrderConfirmation="push_up_order_confirm",e.PushUpOrderReview="push_up_order_review",e.PushUpTeaser="push_up_teaser",e.ClosetPromotionOrderConfirmation="closet_promo_confirm",e.FreeReturnLabelModal="free_return_label_modal",e.ClosetPromotionOrderReview="closet_promo_prepare",e.EscrowFeeEducationModal="escrow_fee_education",e.LabelTypeSelection="label_type_selection",e.DirectDonation="direct_donation",e.PriceBreakdownModal="price_breakdown_modal",e.DirectDonationOrderConfirmation="direct_donation_order_confirm",e.ContactSupport="contact_support",e.ImprovementTips="improvement_tips",e.ReturnOrder="return_order",e.RequestItemReturn="request_item_return",e.Unknown="unknown",e.FeaturedCollection="featured_collection",e.FeaturedCollectionItemSelection="featured_collection_item_selection",e.FeaturedCollectionEdit="featured_collection_edit",e.FeaturedCollectionOrderConfirm="featured_collection_order_confirm",e.ItemUploadFeedbackForm="item_upload_feedback_form",e.SizesModal="sizes_modal",e.MobileCatalogFilters="search_filter",e.MobileCatalogFilter="filter_catalog_selection",e.CategoryIntentSelection="category_intent_selection",e.BuyerOriginatingOffer="buyer_originating_offer",e.InfoAboutMeasurements="info_about_measurements",e.FastShippingEducation="fast_shipping_education",e.NewsFeed="news_feed",e.DynamicFilter="dynamic_filter",e.MandatoryEmailVerification="mand_email_verification",e.MandatoryEmailVerificationStart="mand_email_verification_start",e.MandatoryEmailVerificationEnterCode="mand_email_verification_enter_code",e.MandatoryEmailVerificationResendCode="mand_email_verification_resend_code",e.MandatoryEmailVerificationSuccess="mand_email_verification_success",e.BlikCodeRequest="blik_code_request",e.MultiplePushUp="multiple_push_up",e.Forum="forum",e.ForumPosts="forum_posts",e.ForumTopic="forum_topic",e.ConversationList="message_list",e.ConversationNew="message_new",e.ConversationReply="message_reply",e.ConversationEducation="first_sale_education_screen",e.ConversationHAOVEducation="haov_first_sale_education_screen",e.Sustainability="sustainability",e.About="about",e.HowItWorks="how_it_works",e.VasOptionSelectionDrawer="vas_option_selection_drawer",e.VasGalleryValueProposition="vas_gallery_value_proposition",e.VasGalleryHelp="vas_gallery_help",e.VasGalleryOrderConfirm="vas_gallery_order_confirm",e.VasGalleryMultiSelection="multi_gallery_selection",e.UserItemsManagement="user_items_management",e.HelpRoot="help_root",e.NotificationList="notification_list",e.TermsAndConditions="terms_view",e.TermsAndConditionsForced="force_accept_terms_and_conditions",e.ProfileTab="profile_tab",e.PackageSizeEducation="package_size_education",e.PhotoEditing="photo_editing",e.AdminAlerts="admin_alerts",e.HelpCenterTransaction="help_center_transaction",e.HelpCenterFaq="help_center_faq",e.HelpCenterSearch="help_center_search",e.HelpCenterRecentTransactions="help_center_recent_transactions",e.TaxpayersCountryOfTaxResidencyModal="taxpayers_country_selection",e.TaxpayersEducationModal="taxpayers_education",e.TaxpayersForm="taxpayers_info_submission_form",e.TaxpayersTaxIdentificationNumberEducationModal="taxpayers_tin_education",e.TaxpayersStaticPlacement="taxpayers_info_display",e.DeleteAccount="delete_account",e.DeleteAccountSuccess="delete_account_success",e.FeedSizeCategories="feed_size_categories",e.BrowseAllBrands="browse_all_brands",e.ReturnLabeOrderConfirm="return_label_order_confirm",e.ReferralCodeShare="referral_code_share",e.ChangeForgotPassword="change_forgot_password",e.ChangePassword="change_password",e.ViewIssueDetails="view_issue_details",e.IntellectualPropertyInfringement="intellectual_property_infringement",e.NoticeAndActionForm="notice_and_action_form",e.Homepage="homepage",e.ExtraServicePendingPaymentModal="payment_pending_modal",e.HelpCenterHome="help_center_home",e.UserFollow="personalize_member_follow",e.Followers="followers",e.Following="following",e.UserSearch="users",e.Advertising="advertising",e.CodeLogin="code_login",e.Bank2FAVerification="bank_2fa_verification",e.DeskPostTicketSurveyForm="desk_post_ticket_survey_form",e.ChangeEmail="change_email",e.ConfirmEmail="confirm_email",e.FullNameConfirmation="full_name_confirmation",e.ProcessingListingStatusModal="processing_listing_modal",e.CreatePhoneNumber="create_phone_number",e.ChangePhoneNumber="change_phone_number",e.EmailRegister="email_register",e.Banned="banned",e.SecuritySessions="security_sessions",e.SecurityAuthentication="security_authentication",e.SecuritySettings="security_settings",e.AccountSettings="account_settings",e.ResetPassword="password_change",e.Authentication="authentication",e.RequestDataExport="request_data_export",e.EmailVerification="email_verification",e.SelectLoginType="select_login_type",e.UserVerification="user_verification",e.WalletSetup="payments_account",e.InfoBoard="info_board",e.InfoPost="info_post",e.ClosetPromotionStatistics="cp_stats",e.NewPayout="new_payout",e.PayoutStatus="payout_status",e.WalletInvoices="wallet_invoices",e.IncomeReports="income_reports",e.NotificationLandings="notification_landings",e.FaqEntry="faq_entry",e.SatisfactionSurvey="satisfaction_survey",e.PrivacyPolicy="privacy_policy",e.WalletHistoryOverview="wallet_history_overview",e.WalletHistory="wallet_history",e.CookiePolicy="cookie_policy",e.CommonText="common_text",e.FeedbackEdit="feedback_edit",e.SellerDropOffMap="seller_drop_off_map",e.DsaNoticeAppeal="dsa_notice_appeal",e.DsaNtdAppeal="dsa_ntd_appeal",e.ProTermsOfUse="pro_terms_of_use",e.VasComparison="vas_comparison",e.FeedbackNew="user_leave_feedback",e.SafetyPolicy="safety_policy",e.TaxRules="taxpayers_tax_rules",e.MoreHomepageItems="more_homepage_items",e.ItemVerification="item_verification",e.CollectionsListManagement="collections_list_management",e.Dac7="dac7",e.DsaAppealEducation="dsa_appeal_education",e.App="app",e.OfflineVerificationFeedbackForm="offline_verification_feedback_form"}($t||($t={}));const ei="isAdBlockerUsed",ti="shouldShowRokt",ii="adBlockerVisitor",ni=["mousedown","mousemove","keydown","scroll","touchstart"];let si,ri,ai,oi,li,ci,di,ui,mi,pi,gi,hi;!function(e){e.Amazon="a9",e.Prebid="prebid"}(si||(si={})),function(e){e.Idle="idle",e.Fetched="fetched",e.TimedOut="timedout",e.NoBids="nobids",e.BadSizes="badsizes"}(ri||(ri={})),function(e){e.SlotOnload="slotOnload",e.SlotRequested="slotRequested",e.SlotRenderEnded="slotRenderEnded",e.ImpressionViewable="impressionViewable"}(ai||(ai={})),function(e){e.Call="call",e.NoAd="noad",e.Clean="clean"}(oi||(oi={})),function(e){e.Rtb="rtb",e.Direct="direct"}(li||(li={})),function(e){e.Mobile="mobile",e.Web="web"}(ci||(ci={})),function(e){e.Leaderboard="leaderboard",e.Rectangle="rectangle",e.Skyscraper="skyscraper",e.Inbetween="inbetween"}(di||(di={})),function(e){e.Feed="feed",e.Catalog="catalog",e.Forum="forum",e.ForumTopic="forum_topic",e.ForumPosts="forum_posts",e.Messages="messages",e.NewMessage="new_message",e.ReplyMessage="reply_message",e.Item="item",e.FavoriteItems="favorite_items",e.Notifications="notifications",e.Unknown="unknown"}(ui||(ui={})),function(e){e.Female="1",e.Male="2",e.Other="3"}(mi||(mi={})),function(e){e.Low="low",e.Medium="medium",e.High="high",e.Auto="auto",e.Dense="dense"}(pi||(pi={})),function(e){e.Image="image",e.Iframe="iframe"}(gi||(gi={})),function(e){e.IAB="iab",e.Static="static"}(hi||(hi={}));const xi={[$t.Catalog]:ui.Catalog,[$t.FavoriteItemList]:ui.FavoriteItems,[$t.NewsFeed]:ui.Feed,[$t.Forum]:ui.Forum,[$t.ForumTopic]:ui.ForumTopic,[$t.ForumPosts]:ui.ForumPosts,[$t.Item]:ui.Item,[$t.MessageList]:ui.Messages,[$t.MessageNew]:ui.Messages,[$t.MessageReply]:ui.Messages,[$t.NotificationList]:ui.Notifications},fi={[di.Leaderboard]:103490,[di.Rectangle]:103491,[di.Skyscraper]:103492,[di.Inbetween]:103493},yi=(Yt.Male,mi.Male,Yt.Female,mi.Female,Yt.Other,mi.Other,$t.Catalog,$t.FavoriteItemList,$t.NewsFeed,$t.Forum,$t.ForumTopic,$t.ForumPosts,$t.Item,$t.MessageList,$t.MessageNew,$t.MessageReply,$t.NotificationList,Xt.Lp.At,Xt.Lp.Be,Xt.Lp.Cz,Xt.Lp.De,Xt.Lp.OldDe,Xt.Lp.OldDeBabies,Xt.Lp.Es,Xt.Lp.Fr,Xt.Lp.It,Xt.Lp.Lt,Xt.Lp.Lu,Xt.Lp.Nl,Xt.Lp.Pl,Xt.Lp.FrSandbox,Xt.Lp.At,Xt.Lp.Be,Xt.Lp.Cz,Xt.Lp.De,Xt.Lp.OldDe,Xt.Lp.OldDeBabies,Xt.Lp.Es,Xt.Lp.Fr,Xt.Lp.It,Xt.Lp.Lu,Xt.Lp.Lt,Xt.Lp.Nl,Xt.Lp.Pl,Xt.Lp.Pt,Xt.Lp.Uk,Xt.Lp.Us,Xt.Lp.Hu,Xt.Lp.Sk,Xt.Lp.Fr,Xt.Lp.Pl,Xt.Lp.Uk,(0,m.createContext)(void 0)),vi=function(){const e=(0,m.useContext)(yi);if(!e)throw new Error("Missing tracking provider");return(0,m.useMemo)((()=>({track:e.tracker.track})),[e.tracker.track])};var _i=i(10279);let bi,ji,Si;!function(e){e[e.Brand=0]="Brand",e[e.Catalog=1]="Catalog"}(bi||(bi={})),function(e){e.Brand="brand",e.Catalog="catalog",e.Fallback="frontend_generated",e.Scoped="scoped",e.Multiword="multiword"}(ji||(ji={})),function(e){e.Item="item",e.User="user",e.Forum="forum",e.Faq="faq"}(Si||(Si={}));const Zi="searchStartId",Ii="searchStartType",Ci="searchSessionId",ki="globalSearchSessionId";let wi,Pi,zi,Ti;!function(e){e.Item="item",e.Donate="donate",e.Catalog="catalog",e.Balance="balance",e.NewsFeed="news_feed",e.UserProfile="user_profile",e.MultiplePushUp="multiple_push_up",e.FeaturedCollection="featured_collection",e.MessageList="message_list",e.ViewIssueDetails="view_issue_details",e.CollectionsManagement="collections_management"}(wi||(wi={})),function(e){e.DirectDonationOrder="direct_donation_order",e.WebviewDirectDonationOrder="webview_direct_donation_order",e.MsgThreadReturnLabelOrder="msg_thread_return_label_order",e.Unknown="unknown"}(Pi||(Pi={})),function(e){e[e.New=0]="New",e[e.Processing=10]="Processing",e[e.Pending=20]="Pending",e[e.Failed=30]="Failed",e[e.Processed=40]="Processed",e[e.Refunded=50]="Refunded"}(zi||(zi={})),function(e){e.PushUp="push_up_order",e.ClosetPromotion="closet_promotion_order",e.DirectDonation="direct_donation_order",e.FeaturedCollection="featured_collection_order",e.VasGallery="vas_gallery_order",e.ReturnLabel="return_label_order"}(Ti||(Ti={}));const Fi={[Ti.PushUp]:"push_up",[Ti.ClosetPromotion]:"closet_promotion",[Ti.DirectDonation]:"direct_donation",[Ti.FeaturedCollection]:"featured_collection",[Ti.VasGallery]:"vas_gallery",[Ti.ReturnLabel]:"return_label"},Ni=jt.L7,Li={a:5*jt.L7,b:15*jt.L7,c:30*jt.L7};let Ei,Oi;!function(e){e.PreCheckout="preCheckout",e.PreCheckoutHelp="preCheckoutHelp",e.DynamicPricingInfo="dynamicPricingInfo",e.OrderReview="orderReview",e.ValueProposition="valueProposition",e.ValuePreview="valuePreview",e.PayInMethodSelection="payInMethodSelection",e.PaymentConfirmation="paymentConfirmation",e.OrderConfirmation="orderConfirmation",e.PaymentAuth="paymentAuth",e.CreditCardForm="creditCardForm",e.BlikCodeInput="blikCodeInput",e.SalesTaxInfo="salesTaxInfo",e.OrderStatus="orderStatus",e.Checkout="checkout",e.None="none"}(Ei||(Ei={})),function(e){e.Success="success",e.Processing="processing",e.Failure="failure",e.Idle="idle"}(Oi||(Oi={}));const Ri=e=>{const{target:t,screen:i,targetDetails:n,env:s,path:r}=e,a={target:t};return i&&(a.screen=i),n&&(a.target_details=n),s&&(a.env=s),r&&(a.path=r),{event:"user.click",extra:a}},Di=e=>{const{target:t,details:i}=e,n={target:t};return i&&(n.details=i),{event:"kyc.user.click",extra:n}},Ai=e=>{let{itemId:t,isFollowEvent:i,contentSource:n,searchCorrelationId:s,searchSessionId:r,globalSearchSessionId:a,homepageSessionId:o}=e;const l=i?"user.favorite_item":"user.unfavorite_item",c={item_id:t};return n&&(c.content_source=n),s&&(c.search_correlation_id=s),r&&(c.search_session_id=r),a&&(c.global_search_session_id=a),o&&(c.homepage_session_id=o),{event:l,extra:c}},Mi=e=>{let{userId:t,isFollowEvent:i,contentSource:n}=e;const s=i?"user.follow_user":"user.unfollow_user",r={user_id:t};return i&&(r.content_source=n),{event:s,extra:r}},Ui=e=>{let{brandId:t,isFollowEvent:i}=e;return{event:i?"user.follow_brand":"user.unfollow_brand",extra:{brand_id:t}}},Bi=e=>{const{id:t,contentType:i,contentSource:n,itemDistance:s,itemOwnerId:r,position:a,searchScore:o,searchSignals:l,searchCorrelationId:c,searchSessionId:d,globalSearchSessionId:u,homepageSessionId:m}=e,p={id:t,position:a,content_type:i,content_source:n};return r&&(p.item_owner_id=r),o&&(p.search_score=JSON.stringify(o)),l&&(p.search_signals=l),c&&(p.search_correlation_id=c),d&&(p.search_session_id=d),u&&(p.global_search_session_id=u),(0,v.isNumber)(s)&&(p.buyer_item_distance_km=s),m&&(p.homepage_session_id=m),{event:"list.show_item",extra:p}},qi=e=>{const{id:t,contentType:i,contentSource:n,position:s,searchCorrelationId:r,searchSessionId:a,globalSearchSessionId:o,searchScore:l,searchSignals:c,itemDistance:d,homepageSessionId:u}=e,m={id:t,position:s,content_type:i,content_source:n};return r&&(m.search_correlation_id=r),a&&(m.search_session_id=a),o&&(m.global_search_session_id=o),l&&(m.search_score=l),c&&(m.search_signals=c),(0,v.isNumber)(d)&&(m.buyer_item_distance_km=d),u&&(m.homepage_session_id=u),{event:"user.click_list_item",extra:m}},Vi=e=>{const{contentSource:t,target:i,ownerId:n}=e;return{event:"user.click_closet_promotion",extra:{owner_id:n,content_source:t,target:i}}},Hi=e=>{const{itemCount:t,page:i,perPage:n}=e,s={item_count:t};return i&&(s.page=i),n&&(s.per_page=n),{event:"user.reach_end_of_list",extra:s}},Gi=e=>{const{target:t,targetDetails:i,screen:n}=e,s={target:t};return i&&(s.target_details=i),n&&(s.screen=n),{event:"user.view",extra:s}},Wi=e=>{const{screen:t}=e;return{event:"user.view_screen",extra:{screen:t}}},Xi=e=>{const{screen:t,details:i}=e,n={screen:t};return i&&(n.details=i),{event:"kyc.user.view_screen",extra:n}},Yi=e=>{const{uuid:t,closetCount:i,itemCount:n,type:s}=e;return{event:"system.trace_closet_promo",extra:{uuid:t,type:s,closet_count:i,item_count:n}}},Ki=e=>{const{itemId:t,userId:i}=e;return{event:"user.reply",extra:{user_id:i,item_id:t}}},Ji=e=>{const{prices:t,screen:i,itemId:n,transactionId:s}=e,r={prices:t.length?t:null,screen:i};return n&&(r.item_id=n),s&&(r.transaction_id=s),{event:"user.view_shipping_price",extra:r}},Qi=e=>{const{itemId:t,userId:i}=e;return{event:"user.start_conversation",extra:{user_id:i,item_id:t}}},$i=e=>{const{transactionId:t,targetDetails:i,screen:n,target:s,valid:r}=e,a={screen:n,target:s,valid:r};return t&&(a.transaction_id=t),i&&(a.target_details=i),{event:"checkout.buyer.input",extra:a}},en=e=>{const{state:t,target:i,value:n,screen:s,tempUuid:r,isDynamic:a}=e;return{event:"user.input",extra:{screen:s,target:i,value:n,state:t,upload_session_id:r,is_dynamic:a||!1}}},tn=e=>{const{transactionId:t,eventTrackingCode:i,screen:n}=e;return{event:"buyer.pick_payment_method",extra:{transaction_id:t,payment_method:i||"",screen:n}}},nn=e=>{const t="buyer.view_checkout";var i;return"transactionId"in e?{event:t,extra:{screen:e.screen,checkout_type:"escrow",transaction_id:null!==(i=e.transactionId)&&void 0!==i?i:""}}:{event:t,extra:{screen:e.screen,order_id:e.orderId,checkout_type:Fi[e.orderType]}}},sn=e=>{const{catalogIds:t,attributeId:i,screen:n}=e,s={catalog_id:t.join(","),attribute_id:null!=i?i:null};return n&&(s.screen=n),{event:"user.select_catalog",extra:s}},rn=e=>{const{screen:t,transactionId:i,faqEntryId:n,variant:s}=e,r={screen:t,transaction_id:i};return n&&(r.faq_entry_id=n),s&&(r.variant=s),{event:"user.self_service.view_screen",extra:r}},an=e=>{const{itemCount:t,filters:i,searchCorrelationId:n,searchSessionId:s,globalSearchSessionId:r,searchStartId:a,searchStartType:o,selectedDynamicFilters:l}=e,c={item_count:t,search_correlation_id:n,search_session_id:s,global_search_session_id:r,conditions:{search_term:(0,_i.wp)(i.query),brand_ids:(0,_i.wp)(i.brandIds),catalog_ids:(0,_i.wp)(i.catalogIds),color_ids:(0,_i.wp)(i.colorIds),material_ids:(0,_i.wp)(i.materialIds),video_game_rating_ids:(0,_i.wp)(i.videoGameRatingIds),size_ids:(0,_i.wp)(i.sizeIds),status_ids:(0,_i.wp)(i.statusIds),price_from:i.priceFrom?parseFloat(i.priceFrom):null,price_to:i.priceTo?parseFloat(i.priceTo):null,order:(0,_i.wp)(i.sortBy),popular:i.isPopularCatalog}};return o&&(c.search_start_type=o),a&&(c.search_start_id=a),l.filter((e=>{let{ids:t}=e;return t.length})).forEach((e=>{let{type:t,ids:i}=e;c.selected_filters||(c.selected_filters={}),c.selected_filters[t]=i,c.conditions["".concat(t,"_ids")]=i})),{event:"user.filter_items",extra:c}},on=e=>{const{screen:t,target:i,isValid:n,targetDetails:s}=e;return{event:"settings.user.input",extra:{screen:t,target:i,valid:n,target_details:s}}},ln=e=>{const{type:t,userId:i}=e;return{event:"user.authenticate_success",extra:{type:t},userId:i}},cn=e=>{const{type:t,errors:i,error:n}=e,s={type:t,reason:"validation_error",details:(null==i?void 0:i.map((e=>{let{value:t}=e;return t})).join(", "))||n};return{event:"user.authenticate_fail",extra:s}},dn=e=>{const{target:t,screen:i,targetDetails:n}=e,s={target:t};return i&&(s.screen=i),n&&(s.target_details=n),{event:"user.click_donations",extra:s}},un=e=>{const{target:t,screen:i,targetDetails:n}=e,s={target:t};return i&&(s.screen=i),n&&(s.target_details=n),{event:"user.click_donations",extra:s}},mn=e=>{const{transactionId:t,shippingPointsCount:i,screen:n,latitude:s,longitude:r}=e,a={screen:n,latitude:s,longitude:r,shipping_points_count:i};return t&&(a.transaction_id=t),{event:"buyer.load_shipping_points",extra:a}},pn=e=>{const{screen:t,transactionId:i,isNewEntry:n,carrier:s,shippingPoint:r,distance:a}=e,o={screen:t,carrier:s,shipping_point:r};return i&&(o.transaction_id=i),void 0!==a&&(o.distance=a),n&&(o.is_new_entry=n),{event:"buyer.preselected_shipping_option",extra:o}},gn=e=>{let{transactionId:t,itemId:i,button:n,globalSearchSessionId:s,searchSessionId:r,homepageSessionId:a}=e;return{event:"buyer.want_item",extra:{button:n,item_id:i,transaction_id:t,global_search_session_id:s,search_session_id:r,homepage_session_id:a}}},hn=e=>({event:"user.confirm_wallet",extra:{source:e.source}}),xn=e=>({event:"user.upload_item.start",extra:{screen:e.screenName,upload_session_id:e.tempUuid}}),fn=e=>{const{fieldName:t,tempUuid:i,suggestionSeen:n,suggestions:s,userSelection:r,query:a,position:o,querySuggestions:l}=e,c={suggestions:s.length?s:null,field_name:t,upload_session_id:i,suggestion_seen:n,user_selection:null!=r&&r.length?r:null};return a&&(c.query=a),o&&(c.position=o),l&&(c.query_suggestions=l.length?l:null),{event:"user.upload_item.field_set",extra:c}},yn=e=>({event:"user.upload_item.submit_fail",extra:{reason:e.reason,upload_session_id:e.tempUuid,validation_errors:e.validationErrors,screen:e.screen}}),vn=e=>({event:"user.upload_item.submit_success",extra:{edited:e.edited,photo_count:e.photoCount,video_count:e.videoCount,item_id:e.itemId,screen:e.screen,upload_session_id:e.tempUuid}}),_n=e=>{const{isSubscribing:t,searchTitle:i,searchQuery:n,searchSessionId:s,globalSearchSessionId:r}=e,a={is_subscribing:t,global_search_session_id:r};return i&&(a.search_title=i),n&&(a.search_query=n),s&&(a.search_session_id=s),{event:"user.toggle_search_subscription",extra:a}},bn=e=>{const{id:t,name:i,anonId:n,userId:s,countryCode:r,variant:a}=e,o={test_id:String(t),test_name:i,test_anon_id:n,country_code:r};return a&&(o.variant=a),s&&(o.test_user_id=String(s)),{event:"ab_test.expose",extra:o}},jn=e=>{const{isBuyer:t,currentPrice:i,offeredPrice:n,transactionId:s}=e;return{event:t?"buyer.make_offer_request":"seller.make_offer",extra:{transaction_id:s,current_price:i,offered_price:n}}},Sn=e=>{const{tabName:t}=e;return{event:"sharing.referrals.open_info_banner_link",extra:{tab_name:t}}},Zn=e=>{const{currentPage:t,searchCorrelationId:i,searchSessionId:n,globalSearchSessionId:s}=e,r={page:t};return i&&(r.search_correlation_id=i),n&&(r.search_session_id=n),s&&(r.global_search_session_id=s),{event:"user.paginate_catalog",extra:r}},In=e=>{const{brandId:t,query:i,position:n,suggestionsSessionId:s,suggestedBrands:r,selectedBrands:a,globalSearchSessionId:o,screen:l}=e,c={query:i,position:n,brand_id:t,suggestions_session_id:s,suggested_brands:r,selected_brands:a};return o&&(c.global_search_session_id=o),l&&(c.screen=l),{event:"user.toggle_brand_filter_suggestion",extra:c}},Cn=e=>{const{order:t,searchSessionId:i,globalSearchSessionId:n}=e,s={order:t};return i&&(s.search_session_id=i),n&&(s.global_search_session_id=n),{event:"user.applied_order",extra:s}},kn=e=>{let{theme:t}=e;return{event:"user.select_theme",extra:{theme:t}}},wn=e=>{const{conversationId:t,wasEdited:i,correlationId:n}=e;return{event:"user.react_to_conversation_harassment_warning",extra:{conversation_id:t,is_message_edited:i,correlation_id:n}}},Pn=e=>{const{transactionId:t,screen:i,globalSearchSessionId:n,homepageSessionId:s}=e;return{event:"buyer.buy",extra:{transaction_id:t,screen:i,global_search_session_id:n,homepage_session_id:s}}},zn=e=>{const{adUnitPath:t,isMobileWeb:i}=e;return{event:"user.received_ad",extra:{placement_id:t,is_mobile_web:i}}};let Tn,Fn;!function(e){e.Scrolled="scrolled",e.ReturnedBack="returned_back",e.ScreenOnDuration="screen_on_duration",e.ScreenLoadDuration="screen_load_duration"}(Tn||(Tn={})),function(e){e.NoScrolling="no_scrolling",e.PartialScrolling="partial_scrolling",e.ScrolledTillTheEnd="scrolled_till_the_end",e.NoScrollingSawCompleteScreen="no_scrolling_saw_complete_screen"}(Fn||(Fn={}));const Nn=e=>{const{screen:t,action:i,actionDetails:n,transactionId:s}=e;return{event:"buyer.interacts_with_checkout",extra:{screen:t,action:i,transaction_id:s,action_details:n?JSON.stringify(n):null}}},Ln=e=>{const{sortBy:t,catalogId:i,screen:n}=e,s={sort_by:t,catalog_id:i||null};return n&&(s.screen=n),{event:"user.filter_featured_collections",extra:s}},En=e=>{const{id:t,type:i,position:n,itemsCount:s,searchText:r,filteringSessionId:a,searchSessionId:o,globalSearchSessionId:l,fromScreen:c}=e,d={id:t,position:n,type:i,code:i,items_count:s,search_text:r,filtering_session_id:a,from_screen:c};return o&&(d.search_session_id=o),l&&(d.global_search_session_id=l),{event:"user.view_filter_option",extra:d}},On=e=>{const{id:t,type:i,position:n,isSelected:s,itemsCount:r,searchText:a,filteringSessionId:o,searchSessionId:l,globalSearchSessionId:c,fromScreen:d}=e,u={id:t,position:n,type:i,code:i,is_selected:s,items_count:r,search_text:a,filtering_session_id:o,from_screen:d};return l&&(u.search_session_id=l),c&&(u.global_search_session_id=c),{event:"user.click_filter_option",extra:u}},Rn=e=>{const{blockName:t,blockPosition:i,homepageSessionId:n,id:s}=e,r={block_name:t,block_position:i};return n&&(r.homepage_session_id=n),s&&(r.id=s),{event:"user.view_homepage_block",extra:r}},Dn=e=>({event:"user.edit_photo",extra:{upload_session_id:e.tempUuid,extra_photo_id:e.photoId}}),An=e=>({event:"buyer.time_in_checkout",extra:{transaction_id:e.transactionId,screen:e.screen,duration:e.duration,timestamp:JSON.stringify({utc_time_from:e.timestamp.utcTimeFrom,utc_time_to:e.timestamp.utcTimeTo})}}),Mn=e=>{const t={block_name:e.blockName,position:e.position,content_source:e.contentSource,content_source_label:e.contentSourceLabel,homepage_session_id:e.homepageSessionId,screen:e.screen};return e.contentSourceId&&(t.content_source_id=e.contentSourceId),e.extraAttributes&&(t.extra_attributes=e.extraAttributes),{event:"user.click_homepage_element",extra:t}},Un=e=>{const t={block_name:e.blockName,position:e.position,content_source:e.contentSource,content_source_label:e.contentSourceLabel,homepage_session_id:e.homepageSessionId,screen:e.screen};return e.contentSourceId&&(t.content_source_id=e.contentSourceId),e.extraAttributes&&(t.extra_attributes=e.extraAttributes),{event:"user.view_homepage_element",extra:t}};var Bn=i(63115);const qn="abTests",Vn=e=>t=>(e=>e[qn])(t)[e],Hn=e=>t=>((e,t)=>t=>{var i;return"on"===(null===(i=Vn(e)(t))||void 0===i?void 0:i.variant)})(e)(t),Gn=e=>Hn("more_item_size_label_1")(e),Wn=e=>Hn("info_banner_shipping_fees_apply_feed")(e),Xn=e=>{let{abTestName:t,shouldTrackExpose:i,shouldTrackOnce:n}=e;const s=(0,p.v9)(Vn(t)),r=(0,p.v9)(we),a=(0,p.v9)(le),{track:o}=vi();return(0,m.useEffect)((()=>{if(i&&s){if(n){const e="".concat("use-track-ab-test-expose-event-").concat(t);if((0,Bn.le)(e)===a)return;(0,Bn.D$)(e,a)}o(bn({...r,...s}))}}),[s,t,a,r,i,n,o]),s};let Yn,Kn;!function(e){e.StrictlyNecessary="C0001:1",e.Performance="C0002:1",e.Functional="C0003:1",e.Targeting="C0004:1",e.SocialMedia="C0005:1",e.AmazonAdvertising="C0015:1",e.PersonalisedAds="STACK42:1",e.NonIAB="M0001:1",e.Google="gad:1"}(Yn||(Yn={})),function(e){e.Europe="eu",e.California="us-ca",e.None="none"}(Kn||(Kn={})),Xt.Lp.At,Xt.Lp.AtSandbox,Xt.Lp.Be,Xt.Lp.BeSandbox,Xt.Lp.Cz,Xt.Lp.CzSandbox,Xt.Lp.OldCz,Xt.Lp.OldCzSandbox,Xt.Lp.De,Xt.Lp.DeSandbox,Xt.Lp.Dk,Xt.Lp.DkSandbox,Xt.Lp.OldDe,Xt.Lp.OldDeBabies,Xt.Lp.OldDeBabiesSandbox,Xt.Lp.Es,Xt.Lp.EsSandbox,Xt.Lp.OldEs,Xt.Lp.OldEsSandbox,Xt.Lp.Fr,Xt.Lp.FrSandbox,Xt.Lp.Hu,Xt.Lp.HuSandbox,Xt.Lp.Lt,Xt.Lp.LtSandbox,Xt.Lp.Lu,Xt.Lp.LuSandbox,Xt.Lp.Nl,Xt.Lp.NlSandbox,Xt.Lp.OldNl,Xt.Lp.OldNlSandbox,Xt.Lp.Pl,Xt.Lp.PlSandbox,Xt.Lp.OldPl,Xt.Lp.OldPlSandbox,Xt.Lp.Se,Xt.Lp.SeSandbox,Xt.Lp.Sk,Xt.Lp.SkSandbox,Xt.Lp.Pt,Xt.Lp.PtSandbox,Xt.Lp.Uk,Xt.Lp.UkSandbox,Xt.Lp.OldUk,Xt.Lp.OldUkSandbox,Xt.Lp.Us,Xt.Lp.UsSandbox,Xt.Lp.OldUs,Xt.Lp.OldUsSandbox,Xt.Lp.It,Xt.Lp.ItSandbox,Xt.Lp.Ro,Xt.Lp.RoSandbox,Xt.Lp.Fi,Xt.Lp.FiSandbox;var Jn=i(96700),Qn=i.n(Jn);const $n=new(Qn()),es=(e,t,i)=>{const n=new Date,s=i||new Date(n.setFullYear(n.getFullYear()+1));$n.set(e,t,{expires:s,path:"/"})},ts=e=>{$n.remove(e,{path:"/"})},is=e=>$n.get(e);function ns(e){return((null===(t=new URLSearchParams(is("OptanonConsent")).get("groups"))||void 0===t?void 0:t.split(","))||[]).includes(e);var t}const ss="Android";function rs(e){return/windows phone/i.test(e)?"Windows Phone":/android/i.test(e)?ss:/iPad|iPhone|iPod/.test(e)&&!window.MSStream?"iOS":null}const as=e=>"iOS"===rs(e),os=e=>rs(e)===ss;var ls=i(63529),cs=i(120),ds=i.n(cs);function us(){let e=0;return new Promise(((t,i)=>{const n=setInterval((()=>{("undefined"==typeof window||e>=2)&&(i(new Error("Couldn't find window.Backbone after ".concat(100," ms."))),clearInterval(n));const{Backbone:s}=window;void 0!==s&&(t(s),clearInterval(n)),e+=1}),50)}))}const ms={};function ps(e,t){us().then((i=>{const n=function(e,t){return function(){(0,ls.H2)(e),t(...arguments)}}(e,t);i.Events.on(e,n),ms[e]=[...ms[e]||[],{originalCallback:t,listenerCallback:n}],function(e,t){(0,ls.rh)(e).forEach((e=>t(...e))),(0,ls.H2)(e)}(e,t)})).catch((e=>console.warn(e)))}function gs(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];us().then((t=>t.Events.trigger(e,...i))).catch((e=>console.warn(e)))}const hs=(e,t)=>null==e?void 0:e.closetPromotionBanners.find((e=>e.name===t)),xs=e=>{const t=e.length,i=e[Math.floor(Math.random()*t)];return{...i,imageUrls:(0,v.shuffle)(i.imageUrls)}},fs=(e,t)=>{const i=t.map((e=>{let{catalogId:t}=e;return t})),n=e.find((e=>i.find((t=>t===e))));if(n)return t.find((e=>{let{catalogId:t}=e;return t===n}))};var ys=i(73235);const vs=["utm_campaign","utm_source","utm_medium","utm_content"],_s=()=>{const e=(0,ys.oZ)(window.location.search);return vs.reduce(((t,i)=>{const n=e[i];return n&&"string"==typeof n&&(t[i]=n),t}),{})},bs="railsContext",js="systemConfiguration",Ss=e=>e[js],Zs=e=>Ss(e).requestState,Is=e=>Ss(e).systemConfiguration,Cs=e=>{var t;return null===(t=Is(e))||void 0===t?void 0:t.stripeApiKey},ks=e=>{var t;return null===(t=Is(e))||void 0===t?void 0:t.phoneNumberPrefix},ws=e=>{var t;return null===(t=Is(e))||void 0===t?void 0:t.measurements},Ps=e=>{var t;return null===(t=Is(e))||void 0===t?void 0:t.bundleDiscountsConfiguration},zs=e=>{var t;return null===(t=Is(e))||void 0===t?void 0:t.crm.brazeConfig},Ts=e=>e[bs],Fs=e=>{var t;return(null===(t=Is(e))||void 0===t?void 0:t.portal)||Ts(e).portal},Ns=e=>Ts(e).currency,Ls=e=>{var t;return(null===(t=Is(e))||void 0===t?void 0:t.portalFlavour)||Ts(e).flavour};let Es;!function(e){e.PromotedClosets="promoted_closets",e.UserItems="user_items",e.FavouriteItems="favorite_items",e.BundleItems="bundle",e.Catalog="catalog",e.Search="search",e.PopularItems="popular_items",e.PromotedCatalog="catalog_promoted_items",e.PromotedSearch="search_promoted_items",e.PromotedPopularItems="popular_promoted_items",e.ListerActivationBanner="lister_activation_banner",e.Transaction="transaction",e.Settings="settings",e.CatalogPromotedClosets="catalog_promoted_closets",e.SearchPromotedClosets="search_promoted_closets",e.SimilarItems="similar_items",e.OtherUserItems="other_user_items",e.AdCatalog="catalog_ad",e.AdSearch="search_ad",e.AdFeed="feed_ad",e.FeaturedCollection="featured_collection",e.RecommendedItems="recommended_items",e.GalleriedItems="galleried_items",e.FollowedUsers="followed_users"}(Es||(Es={}));const Os="catalogFilters",Rs=300,Ds=1e3,As={status:"status",material:"material",videoGameRating:"video_game_rating",color:"color",size:"size",brand:"brand"},Ms="items",Us=20,Bs=96,qs=100;let Vs,Hs,Gs,Ws,Xs;!function(e){e.UserItems="userItems",e.UserBundleItems="userBundleItems",e.FavouriteItems="favouriteItems",e.SimilarItems="similarItems",e.CatalogItems="catalogItems",e.RecommendedItems="recommendedItems"}(Vs||(Vs={})),function(e){e.List="list",e.ListSearch="list_search",e.Range="range"}(Hs||(Hs={})),function(e){e.Single="single",e.Multi="multi"}(Gs||(Gs={})),function(e){e.Root="root",e.Default="default",e.Navigational="navigational",e.Group="group"}(Ws||(Ws={})),function(e){e.Color="color"}(Xs||(Xs={}));const Ys=e=>{const{filters:t}=e;return{query:t.query,catalogIds:t.catalogIds}},Ks=(e,t)=>{const i=(0,v.flatten)(t.map((e=>{let{sizeGroupIds:t}=e;return t}))),n=(0,v.intersection)(i,e.map((e=>e.id)));return(0,v.compact)(n.map((t=>e.find((e=>e.id===t)))))},Js=(e,t)=>{const i=(0,v.uniq)((0,v.flatten)(e.map((e=>e.sizes.map((e=>{let{id:t}=e;return t}))))));return(0,v.intersection)(i,t)},Qs=e=>{const t=Number(e.page)>1?e.page:null;return{per_page:e.perPage===Bs?null:e.perPage,time:e.time,page:t}},$s=e=>({search_text:e.query,brand_ids:e.brandIds,color_ids:e.colorIds,size_ids:e.sizeIds,material_ids:e.materialIds,video_game_rating_ids:e.videoGameRatingIds,status_ids:e.statusIds,catalog:e.catalogIds,price_from:e.priceFrom,price_to:e.priceTo,currency:e.currency,order:e.sortBy,disabled_personalization:!!e.isPersonalizationDisabled||null,popular:!!e.isPopularCatalog||null,catalog_from:e.query?null:e.catalogFrom}),er=e=>{if(!e)return{};const t={};return e.forEach((e=>{let{type:i,ids:n}=e;t["".concat(i,"_ids")]=n})),t},tr=e=>{let{filters:t,selectedDynamicFilters:i,pagination:n,extraParams:s}=e;const r={...s,...$s(t),...er(i),...Qs(n)};return(0,_i.Gj)(r)},ir=(e,t)=>{const i=/^\/catalog\/(\d+).*$/,n=/^\/brand\/(\d+).*$/;if(e===Me.JXU)return t;if(e.match(i)){const n=e.match(i),s=null==n?void 0:n[1];return{...t,catalog:s&&[s]}}if(e.match(n)){const i=e.match(n),s=null==i?void 0:i[1];return{...t,brand_ids:s&&[s]}}return(0,ls.ji)("Unexpected catalog code branch in getCatalogInitializersParamsFromUrl"),t},nr=e=>!e.length||e.some((e=>{let{isBrandsAvailable:t}=e;return t})),sr=e=>!e.length||e.some((e=>{let{isSizesAvailable:t}=e;return t})),rr=e=>e.map((e=>[e,...rr(e.options)])),ar=e=>(0,v.flattenDeep)(rr(e)).filter((e=>e.type===Ws.Default)),or=(e,t)=>{const i=[],n=[];return e.forEach((e=>{const{id:s,description:r,items:a}=e,o=[],l=[];if(a.forEach((e=>{t.includes(e.id)?o.push(e):l.push(e)})),o.length>0){const e={id:-1*s,description:r,items:o};i.push(e),l.length>0&&n.push({id:s,description:r,items:l})}else n.push(e)})),n.sort(((e,t)=>e.id-t.id)),[...i,...n]},lr=e=>e[Os],cr=e=>lr(e).dtos,dr=e=>lr(e).data,ur=e=>lr(e).searchSession,mr=e=>lr(e).isInCatalog,pr=e=>lr(e).catalogTitle,gr=e=>lr(e).data.uiState,hr=e=>lr(e).filters,xr=e=>hr(e).query,fr=e=>hr(e).brandIds,yr=e=>hr(e).catalogIds,vr=e=>hr(e).sizeIds,_r=e=>hr(e).priceFrom,br=e=>hr(e).priceTo,jr=e=>hr(e).currency,Sr=e=>hr(e).sortBy,Zr=e=>hr(e).disableSearchSaving,Ir=(e,t)=>dr(e).catalogs.byId[t],Cr=(e,t)=>dr(e).brands.byId[t],kr=e=>(0,v.compact)(dr(e).sizeGroups.ids.map((t=>((e,t)=>dr(e).sizeGroups.byId[t])(e,t)))),wr=e=>(0,v.compact)(dr(e).catalogs.ids.map((t=>Ir(e,t)))),Pr=e=>dr(e).catalogs.byId,zr=(e,t)=>{const i=[...dr(e).brands.ids];return(t||fr(e)).forEach((e=>{(0,v.includes)(i,e)||i.unshift(e)})),(0,v.compact)(i.map((t=>Cr(e,t))))},Tr=e=>(0,v.compact)(fr(e).map((t=>Cr(e,t)))),Fr=e=>(0,v.compact)(yr(e).map((t=>Ir(e,t)))),Nr=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=xr(e),n=Tr(e),s=Fr(e),r=(e=>(0,v.compact)(vr(e).map((t=>((e,t)=>dr(e).sizes.byId[t])(e,t)))))(e),a=_r(e),o=br(e),l=[];return s.forEach((e=>{l.push({name:"catalogIds",label:e.title,value:e.id})})),!(0,v.isEmpty)(i)&&t&&l.push({name:"query",label:String(i),value:String(i)}),n.forEach((e=>{e&&l.push({name:"brandIds",label:e.title,value:e.id})})),r.forEach((e=>{e&&l.push({name:"sizeIds",label:e.title,value:e.id})})),(0,v.isEmpty)(a)||l.push({name:"priceFrom",value:String(a)}),(0,v.isEmpty)(o)||l.push({name:"priceTo",value:String(o)}),l},Lr=(0,B.P1)(Fr,sr),Er=(0,B.P1)(Fr,nr),Or=(0,B.P1)(Nr,(e=>(0,v.uniqBy)(e,"name").map((e=>{let{name:t}=e;return t})).filter((e=>"query"!==e)))),Rr=(0,B.P1)(wr,(e=>e.filter((e=>0===(null==e?void 0:e.depth))))),Dr=(0,B.P1)(Fr,Rr,((e,t)=>e.length?e:(0,v.compact)(t))),Ar=(0,B.P1)(kr,Dr,Ks),Mr=(0,B.P1)(Ar,vr,Js),Ur=(0,B.P1)(Fr,(e=>(0,v.maxBy)(e,(e=>e.depth)))),Br=e=>{const t=Ur(e);if(!t)return[];let i=t;const n=[];for(;i;)n.push(i),i=Ir(e,Number(i.parentId));return(0,v.compact)(n.reverse())},qr=(0,B.P1)(Ur,wr,Rr,((e,t,i)=>{if(e){const{catalogIds:i}=e;return t.filter((e=>(null==e?void 0:e.id)&&i.includes(e.id)))}return i})),Vr=e=>ur(e).correlationId,Hr=e=>ur(e).sessionId,Gr=e=>ur(e).globalSearchSessionId,Wr=e=>ur(e).isStale,Xr=(0,B.P1)(xr,Zr,((e,t)=>e?Es.Search:t?Es.PopularItems:Es.Catalog)),Yr=(0,B.P1)([Rr,e=>dr(e).sizeGroups.ids],((e,t)=>(0,v.compact)(e).filter((e=>{let{sizeGroupIds:t}=e;return!!t.length})).map((e=>{let{title:i,code:n,sizeGroupIds:s}=e;return{title:i,subtitle:"",code:n,empty_selection:"",size_groups:t.filter((e=>s.includes(e)))}})))),Kr=e=>lr(e).dynamicFilters,Jr=(0,B.P1)(Kr,(e=>{let{dynamicFilters:t}=e;return t})),Qr=(0,B.P1)(Jr,(e=>{let{ids:t}=e;return t})),$r=(0,B.P1)(Jr,(e=>{let{byId:t}=e;return t})),ea=(0,B.P1)(Qr,$r,((e,t)=>(0,v.compact)(e.map((e=>t[e]))))),ta=(0,B.P1)(Kr,(e=>{let{selectedDynamicFilters:t}=e;return t})),ia=(0,B.P1)(ta,(e=>{let{ids:t}=e;return t})),na=(0,B.P1)(ta,(e=>{let{byId:t}=e;return t})),sa=(0,B.P1)(ia,na,((e,t)=>(0,v.compact)(e.map((e=>t[e]))))),ra=(0,B.P1)(Kr,(e=>{let{selectedDefaultFilters:t}=e;return t})),aa=(0,B.P1)(ra,(e=>{let{ids:t}=e;return t})),oa=(0,B.P1)(ra,(e=>{let{byId:t}=e;return t})),la=((0,B.P1)(aa,oa,((e,t)=>(0,v.compact)(e.map((e=>t[e]))))),(0,B.P1)(Kr,(e=>{let{temporarySelectedDynamicFilters:t}=e;return t}))),ca=(0,B.P1)(la,(e=>{let{ids:t}=e;return t})),da=(0,B.P1)(la,(e=>{let{byId:t}=e;return t})),ua=(0,B.P1)(ca,da,((e,t)=>(0,v.compact)(e.map((e=>t[e]))))),ma=(0,B.P1)(Kr,(e=>{let{temporaryCatalogIds:t}=e;return t})),pa=(0,B.P1)(Kr,(e=>{let{temporarySizeIds:t}=e;return t})),ga=(0,B.P1)(Kr,(e=>{let{temporaryBrandIds:t}=e;return t})),ha=(0,B.P1)(Kr,(e=>{let{temporaryPriceRage:t}=e;return t})),xa=(0,B.P1)(Kr,(e=>{let{filterSearchQuery:t}=e;return t})),fa=(0,B.P1)(Kr,(e=>{let{ui:t}=e;return t})),ya=((0,B.P1)(fa,(e=>{let{errors:t}=e;return t})),(0,B.P1)(fa,(e=>{let{uiState:t}=e;return t})),(0,B.P1)(Kr,(e=>{let{supportedFilters:t}=e;return t}))),va=-1,_a="_ALL",ba="about-tab-id",ja="our-platform-id";let Sa,Za,Ia,Ca,ka;!function(e){e.Thumb24="thumb24",e.Thumb48="thumb48",e.Thumb70="thumb70",e.Thumb150="thumb150"}(Sa||(Sa={})),function(e){e[e.Navigation=1]="Navigation",e[e.Breadcrumb=2]="Breadcrumb",e[e.Filter=3]="Filter",e[e.Subcatalog=4]="Subcatalog",e[e.Home=5]="Home",e[e.StyleFilter=6]="StyleFilter"}(Za||(Za={})),function(e){e[e.RecentPurchases=0]="RecentPurchases"}(Ia||(Ia={})),function(e){e.Men="men_fashion",e.Women="women_fashion",e.NoPreference="no_preference"}(Ca||(Ca={})),function(e){e.WomenRoot="WOMEN_ROOT",e.Mens="MENS",e.ChildrenNew="CHILDREN_NEW",e.PetCare="PET_CARE",e.Home="HOME",e.Entertainment="ENTERTAINMENT"}(ka||(ka={}));const wa=e=>{if((0,v.isEmpty)(e))return null;const t=e.find((e=>{let{is_main:t}=e;return!0===t}));return t?t.dominant_color_opaque:null},Pa=(e,t)=>{const i=(e.thumbnails||[]).find((e=>{let{type:i}=e;return i===t}));return i?i.url:null},za=e=>{const t=e.thumbnails.find((e=>{let{type:t}=e;return t===Sa.Thumb24})),i=e.thumbnails.find((e=>{let{type:t}=e;return t===Sa.Thumb48})),n=(null==t?void 0:t.url)||e.url;return t&&i?{src:n,srcset:"".concat(n," 1x, ").concat(i.url," 2x")}:{src:n}};let Ta,Fa,Na,La,Ea,Oa,Ra;!function(e){e.Pushable="pushable",e.Collectable="collectable",e.Draggable="draggable"}(Ta||(Ta={})),function(e){e.MissingSubcategory="missing_subcategory",e.ChangeDescription="change_description",e.Black="black",e.DarkGray="dark_gray",e.PackageSize="package_size",e.ReplicaProof="replica_proof",e.UnderReview="under_review",e.EligibleForAuthenticity="eligible_for_authenticity",e.VerifiedOnlineAuthenticity="verified_online_authenticity",e.DelayedPublication="delayed_publication"}(Fa||(Fa={})),function(e){e.Sold="sold"}(Na||(Na={})),function(e){e.Always="always",e.Banner="banner",e.Range="range",e.Off="off"}(La||(La={})),function(e){e[e.None=0]="None",e[e.ForSell=4]="ForSell"}(Ea||(Ea={})),function(e){e.BelowAverage="below_average",e.Average="average",e.AboveAverage="above_average"}(Oa||(Oa={})),function(e){e.ShowOfflineVerificationModal="show_offline_verification_modal"}(Ra||(Ra={}));const Da={formatAsNegative:!1,keepFractionDigits:!0},Aa={minimumFractionDigits:0,maximumFractionDigits:0},Ma=(e,t,i)=>{const{locale:n,currency:s}=t,{formatAsNegative:r,keepFractionDigits:a}={...Da,...i},o=e||0,l=r?-1*Number(o):Number(o),c=!a&&Aa;return new Intl.NumberFormat(n,{currency:s,style:"currency",useGrouping:!1,...c}).format(l)},Ua=(e,t,i)=>Ma(e.amount,{locale:t,currency:e.currencyCode},i),Ba=(e,t)=>{if(!e)return null;let i=5,n=e;if("."===n&&(n="0.00"),null!=t&&t.maxLength&&({maxLength:i}=t),n=n.replace(/,/g,"."),n=n.replace(/[^0-9.]/g,""),n=n.replace(/\.+/g,"."),n=n.replace(/(.*\.[0-9][0-9]?).*/g,"$1"),n=n.replace(/^0+(.*)$/,"0$1"),-1!==n.indexOf(".")){let e=n.substring(0,n.indexOf(".")),t=n.substring(n.indexOf("."));e.length>i&&(e=e.substring(0,i)),t.length>3&&(t=t.substring(0,3)),n="".concat(e).concat(t)}else n.length>i&&("."===n[i+1]?Ba(n,t):n=n.substring(0,i));return n},qa=e=>{switch(e){case Fa.DarkGray:return"hidden_from_catalog";case Fa.DelayedPublication:return"delayed";default:return e}},Va=e=>{let{amount:t,currency_code:i}=e;return{amount:t,currencyCode:i}},Ha=(e,t)=>(e=>!!e&&!(0,v.isString)(e))(e)?Va(e):{amount:e,currencyCode:t},Ga=e=>{let{amount:t,currency_code:i}=e;return t&&i?{amount:t,currencyCode:i}:{amount:null,currencyCode:null}},Wa=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xe.Medium;if(!e)return null;const i=e.find((e=>{let{is_main:t}=e;return t}));if(!i)return null;const n=(i.thumbnails||[]).find((e=>e.type===t));return n?n.url:null},Xa=function(e){var t,i,n;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xe.Medium;return(null==e||null===(t=e.find((e=>e.isMain)))||void 0===t||null===(i=t.thumbnails)||void 0===i||null===(n=i.find((e=>e.type===s)))||void 0===n?void 0:n.url)||null},Ya=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xe.Medium;if(0!==e.length)return e.map((e=>{var i;return null===(i=e.thumbnails.find((e=>e.type===t)))||void 0===i?void 0:i.url})).filter((e=>!!e))},Ka=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{is_draft:i,is_reserved:n,is_hidden:s,is_closed:r,item_closing_action:a,stats_visible:o,item_alert_type:l,item_alert:c,is_processing:d,promoted:u,vas_gallery_promoted:m}=e;return d?"processing":null!=c&&c.item_alert_type&&t&&c.item_alert_type!==Fa.EligibleForAuthenticity&&c.item_alert_type!==Fa.VerifiedOnlineAuthenticity?qa(c.item_alert_type):l&&t?qa(l):i?"draft":r?a:n?"reserved":s?"hidden":o&&t?m?"promoted":u?"bumped":null:null},Ja=e=>{if(!e)return null;let t=null;switch(e){case"processing":return{content:"item.status.processing",theme:"amplified"};case"reserved":case"promoted":case"bumped":t="primary";break;case"draft":case"hidden":t="muted";break;case"sold":t="success";break;case"missing_subcategory":case"change_description":case"hidden_from_catalog":case"package_size":t="warning";break;case"delayed":return{content:"item.status.delayed",theme:"amplified"};case Fa.UnderReview:return{content:"item.status.under_review",theme:"amplified"};case Fa.ReplicaProof:return{content:"item.status.hidden",theme:"warning"};default:t=null}return null===t?null:{content:"item.status.".concat(e),theme:t}},Qa=e=>[...e.drafts,...e.items],$a=e=>({code:e.code,title:e.title,value:e.value,faqEntryId:e.faq_id}),eo=e=>({id:e.id,width:e.width,height:e.height,tempUuid:e.temp_uuid,url:e.url,thumbnails:ot(e.thumbnails),dominantColor:e.dominant_color,dominantColorOpaque:e.dominant_color_opaque,isMain:e.is_main,isSuspicious:e.is_suspicious,fullSizeUrl:e.full_size_url,imageNo:e.image_no}),to=e=>e.map(eo),io=e=>({id:e.id,title:e.title,description:e.description,catalogId:e.catalog_id,size:e.size,status:e.status,brand:e.brand,brandId:e.brand_id,statusId:e.status_id,disposalConditions:e.disposal_conditions,price:Va(e.price),serviceFee:e.service_fee?Ha(e.service_fee,e.currency):null,thumbnailUrl:Wa(e.photos),url:e.url,photos:to(e.photos)}),no=e=>e.map(io),so=e=>({id:e.id,size:e.size,title:e.title,status:e.status,brandId:e.brand_id,brand:e.brand_title,statusId:e.status_id,catalogId:e.catalog_id,disposalConditions:e.disposal_conditions,price:Va(e.price),thumbnailUrl:e.photo?Wa([e.photo]):null}),ro=e=>e.map(so),ao=e=>({itemAlertType:e.item_alert_type,detailedDescription:e.detailed_description,photoTipId:e.photo_tip_id||null,shortDescription:e.short_description||null}),oo=e=>{if(e)return e.map((e=>({iconBig:e.icon_big,iconSmall:e.icon_small,label:e.label})))},lo=e=>({id:e.id,login:e.login,photo:e.photo?lt(e.photo):null,thumbnailUrl:Je(e.photo),profileUrl:e.profile_url,isBusiness:e.business}),co=e=>({id:e.id,title:e.title,url:e.url,photos:to(e.photos),viewCount:e.view_count,favouriteCount:e.favourite_count,brandTitle:e.brand,sizeTitle:e.size,user:lo(e.user),priceWithDiscount:e.discount_price?Ha(e.discount_price,e.currency):null,price:Va(e.price),serviceFee:e.service_fee?Ha(e.service_fee,e.currency):null,totalItemPrice:e.total_item_price?Ha(e.total_item_price,e.currency):void 0,thumbnailUrl:Wa(e.photos,Xe.Large),dominantColor:wa(e.photos),badge:e.badge,itemAlertType:e.item_alert_type,itemAlert:e.item_alert&&ao(e.item_alert),itemClosingAction:e.item_closing_action,isPromoted:e.promoted,isDraft:e.is_draft,isReserved:e.is_reserved,isHidden:e.is_hidden,isClosed:e.is_closed,isFavourite:e.is_favourite,isProcessing:e.is_processing,isVasGalleryPromoted:e.vas_gallery_promoted,canPushUp:e.can_push_up,canVasGalleryPromote:e.can_vas_gallery_promote,areStatsVisible:e.stats_visible,iconBadges:oo(e.icon_badges)}),uo=e=>({id:e.id,title:e.title,url:e.url,favouriteCount:e.favourite_count,brandTitle:e.brand_title,sizeTitle:e.size_title,priceWithDiscount:e.discount?Ha(e.discount,e.discount.currency_code):null,price:Ha(e.price,e.price.currency_code),badge:e.badge,serviceFee:e.service_fee?Ha(e.service_fee,e.service_fee.currency_code):null,totalItemPrice:e.total_item_price?Ha(e.total_item_price,e.total_item_price.currency_code):void 0,isPromoted:e.promoted,isFavourite:e.is_favourite,thumbnailUrl:e.photo&&Wa([e.photo],Xe.Large),dominantColor:e.photo&&wa([e.photo]),user:lo(e.user),photos:e.photo&&to([e.photo])||[],iconBadges:oo(e.icon_badges)}),mo=e=>({id:e.id,title:e.title,url:e.url,favouriteCount:e.favourite_count,brandTitle:e.brand_title,sizeTitle:e.size_title,priceWithDiscount:e.discount?Ha(e.discount,e.currency):null,price:Ha(e.price,e.currency),serviceFee:e.service_fee?Ha(e.service_fee,e.currency):null,totalItemPrice:e.total_item_price?Ha(e.total_item_price,e.currency):void 0,badge:e.badge,isPromoted:e.promoted,isFavourite:e.is_favourite,thumbnailUrl:e.photo&&Wa([e.photo],Xe.Large),dominantColor:e.photo&&wa([e.photo]),user:lo(e.user),photos:e.photo&&to([e.photo])||[],iconBadges:oo(e.icon_badges)}),po=e=>({id:e.id,title:e.title,user:{id:e.user_id,isBusiness:e.business_user},url:e.url,favouriteCount:e.favourite_count,brandTitle:e.brand_title,sizeTitle:e.size_title,priceWithDiscount:e.discount?Ha(e.discount,e.currency):null,price:Ha(e.price,e.currency),serviceFee:e.service_fee?Ha(e.service_fee,e.currency):null,totalItemPrice:e.total_item_price?Ha(e.total_item_price,e.currency):void 0,badge:e.badge,itemClosingAction:e.item_closing_action,isPromoted:e.promoted,isFavourite:e.is_favourite,isHidden:e.is_hidden,isReserved:e.is_reserved,isClosed:e.is_closed,thumbnailUrl:e.photo&&Wa([e.photo],Xe.Large),dominantColor:e.photo&&wa([e.photo]),photos:e.photo&&to([e.photo])||[],iconBadges:oo(e.icon_badges)}),go=e=>e.photos&&e.photos.length>0?to(e.photos):e.photo?to([e.photo]):[],ho=e=>e.photos&&e.photos.length>0?Ya(e.photos,Xe.Large):e.photo?Ya([e.photo],Xe.Large):void 0,xo=e=>e.photos&&e.photos.length>0?Wa(e.photos,Xe.Large):e.photo?Wa([e.photo],Xe.Large):null,fo=e=>e.photos&&e.photos.length>0?wa(e.photos):e.photo?wa([e.photo]):null,yo=e=>({id:e.id,title:e.title,user:{id:e.user_id,isBusiness:e.business_user},url:e.url,favouriteCount:e.favourite_count,brandTitle:e.brand_title,sizeTitle:e.size_title,priceWithDiscount:e.discount?Ha(e.discount,e.currency):null,price:Ha(e.price,e.currency),serviceFee:e.service_fee?Ha(e.service_fee,e.currency):null,totalItemPrice:e.total_item_price?Ha(e.total_item_price,e.currency):void 0,badge:e.badge,isFavourite:e.is_favourite,thumbnailUrl:xo(e),thumbnailUrls:ho(e),dominantColor:fo(e),photos:go(e),iconBadges:oo(e.icon_badges)}),vo=e=>e.map(co),_o=e=>e.map(po),bo=e=>e.photos&&e.photos.length>0?Ya(e.photos,Xe.Large):e.photo?Ya([e.photo],Xe.Large):void 0,jo=e=>({id:e.id,title:e.title,url:e.url,favouriteCount:e.favourite_count,brandTitle:e.brand_title,sizeTitle:e.size_title,priceWithDiscount:e.discount?Ha(e.discount,e.currency):null,price:Ha(e.price,e.currency),badge:e.badge,serviceFee:e.service_fee?Ha(e.service_fee,e.currency):null,totalItemPrice:e.total_item_price?Ha(e.total_item_price,e.currency):void 0,isPromoted:e.promoted,isFavourite:e.is_favourite,thumbnailUrl:e.photo&&Wa([e.photo],Xe.Large),thumbnailUrls:bo(e),dominantColor:e.photo&&wa([e.photo]),user:lo(e.user),photos:e.photo&&to([e.photo])||[],iconBadges:oo(e.icon_badges)}),So=e=>e.map((e=>(e=>({id:e.id,title:e.title,url:e.url,photos:to(e.photos),viewCount:e.view_count,favouriteCount:e.favourite_count,brandTitle:e.brand,sizeTitle:e.size,user:lo({business:e.business_user}),priceWithDiscount:e.discount_price?Va(e.discount_price):void 0,price:Va(e.price),serviceFee:e.service_fee?Va(e.service_fee):void 0,totalItemPrice:e.total_item_price?Va(e.total_item_price):void 0,thumbnailUrl:Wa(e.photos,Xe.Large),dominantColor:wa(e.photos),badge:e.badge,itemAlertType:e.item_alert_type,itemAlert:e.item_alert&&ao(e.item_alert),itemClosingAction:e.item_closing_action,isPromoted:e.promoted,isDraft:e.is_draft,isReserved:e.is_reserved,isHidden:e.is_hidden,isClosed:e.is_closed,isFavourite:e.is_favourite,isProcessing:e.is_processing,isVasGalleryPromoted:e.vas_gallery_promoted,canPushUp:e.can_push_up,canVasGalleryPromote:e.can_vas_gallery_promote,areStatsVisible:e.stats_visible,collections:e.collections,iconBadges:oo(e.icon_badges)}))(e))),Zo=e=>e[Ms],Io=e=>Zo(e)[Vs.UserItems],Co=(0,B.P1)(Io,(e=>e.ids)),ko=(0,B.P1)(Io,(e=>e.byId)),wo=(0,B.P1)(Io,(e=>e.uiState)),Po=(0,B.P1)(Io,(e=>e.currentPage)),zo=((0,B.P1)(Io,(e=>e.totalPages)),(0,B.P1)(Io,(e=>e.endReached))),To=e=>Zo(e)[Vs.UserBundleItems],Fo=(0,B.P1)(To,(e=>e.ids)),No=(0,B.P1)(To,(e=>e.byId)),Lo=(0,B.P1)(To,(e=>e.uiState)),Eo=(0,B.P1)(To,(e=>e.currentPage)),Oo=((0,B.P1)(To,(e=>e.totalPages)),(0,B.P1)(To,(e=>e.endReached))),Ro=(0,B.P1)(To,(e=>e.containsOfflineVerificationItem)),Do=(0,B.P1)(To,(e=>e.offlineVerificationFee)),Ao=e=>Zo(e)[Vs.FavouriteItems],Mo=(0,B.P1)(Ao,(e=>e.ids)),Uo=(0,B.P1)(Ao,(e=>e.byId)),Bo=(0,B.P1)(Ao,(e=>e.uiState)),qo=(0,B.P1)(Ao,(e=>e.currentPage)),Vo=((0,B.P1)(Ao,(e=>e.totalPages)),(0,B.P1)(Ao,(e=>e.endReached))),Ho=e=>Zo(e)[Vs.RecommendedItems],Go=(0,B.P1)(Ho,(e=>e.ids)),Wo=(0,B.P1)(Ho,(e=>e.byId)),Xo=(0,B.P1)(Ho,(e=>e.uiState)),Yo=(0,B.P1)(Ho,(e=>e.currentPage||0)),Ko=((0,B.P1)(Ho,(e=>e.totalPages)),(0,B.P1)(Ho,(e=>e.endReached))),Jo=(0,B.P1)(Ho,(e=>e.nextPageToken)),Qo=e=>Zo(e)[Vs.SimilarItems],$o=(0,B.P1)(Qo,(e=>e.ids)),el=(0,B.P1)(Qo,(e=>e.byId)),tl=(0,B.P1)(Qo,(e=>e.uiState)),il=e=>Zo(e)[Vs.CatalogItems],nl=(0,B.P1)(il,(e=>e.ids)),sl=(0,B.P1)(il,(e=>e.byId)),rl=(0,B.P1)(il,(e=>e.uiState)),al=(0,B.P1)(il,(e=>e.currentPage)),ol=(0,B.P1)(il,(e=>e.totalPages)),ll=(0,B.P1)(il,(e=>e.endReached)),cl=(0,B.P1)(il,(e=>e.perPage)),dl=(0,B.P1)(il,(e=>e.time)),ul=(0,B.P1)(al,cl,(function(){return((arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)-1)*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)})),ml=(0,B.P1)(il,(e=>e.totalEntries)),pl=(0,B.P1)(il,(e=>e.searchParams||{})),gl=(0,B.P1)(il,(e=>e.errors)),hl=(e,t)=>(0,B.P1)(t,e,((e,t)=>Object.keys(e).length?t.map((t=>e[t])).filter(Boolean):[])),xl=hl(Co,ko),fl=hl(Mo,Uo),yl=hl(Fo,No),vl=hl($o,el),_l=hl(nl,sl),bl=hl(Go,Wo),jl=(0,B.P1)(xl,(e=>vo(e.filter((e=>!("international_shipping_price"in e)))))),Sl=(0,B.P1)(xl,(e=>vo(e.filter((e=>!!e.can_vas_gallery_promote))))),Zl="banners",Il=e=>e[Zl],Cl=e=>Il(e).banners,kl=e=>Il(e).uiState,wl=e=>{var t;const{banners:i,uiState:n}=Il(e)||{};return n===Ne.Pending?"pending":null!=i&&i.categoryIntentBanner?"shown":null==i||!i.onboardingModal||null!=i&&null!==(t=i.onboardingModal)&&void 0!==t&&t.isClosed?"not shown":"shown"},Pl=(0,B.wN)(B.PW,v.isEqual),zl=((0,B.P1)(X,xr,vr,al,(e=>hr(e).isPersonalizationDisabled),((e,t,i,n,s)=>s||!e||!!t||i.length>0||n&&n>1)),(0,B.P1)(le,X,Fs,(e=>{var t;return null===(t=Is(e))||void 0===t?void 0:t.portal}),ce,(e=>G(e).tracker_debug_pin),(e=>G(e).tracking_platform),Ht,((e,t,i,n,s,r,a,o)=>{const l=_s(),c=i||n||"";return c||(0,ls.KE)("Missing portal for tracking."),{anonId:e,userId:t,portal:c,languageCode:s,debugPin:r,platform:a,screen:{width:St.X?0:window.screen.width,height:St.X?0:window.screen.height,name:o},utm:{campaign:l.utm_campaign,source:l.utm_source,medium:l.utm_medium,content:l.utm_content}}}))),Tl=(0,B.P1)(Fr,Pr,Cl,((e,t,i)=>{let{listerActivation:n}=i;if(!e.length)return n;const s=e.map((e=>{let{id:t}=e;return t})),r=fs(s,n);return(r?[r]:void 0)||((e,t,i)=>{const n=(0,v.flatMap)(e,(e=>{const i=[];let n=e;for(;n;)i.push(n.id),n=t[n.parentId];return i})),s=fs(n,i);return s?[s]:void 0})(e,t,n)||((e,t)=>{const i=e.filter((e=>{let{depth:t}=e;return 0===t}));for(let e=0;i[e];e+=1){const n=i[e].catalogIds,s=t.filter((e=>{let{catalogId:t}=e;return n.includes(t)}));if(s.length)return s}})(e,n)||n})),Fl=(0,B.P1)(Ze,(e=>!e)),Nl=(0,B.P1)(Wt("payments"),Wt("referrals"),((e,t)=>e&&t)),Ll=(0,B.P1)([X,_e,le,ce,Ur,Ht],((e,t,i,n,s,r)=>({userId:e,authStatus:t,anonymousId:i,language:n,currentCatalogUrl:null==s?void 0:s.urlEn,screenName:r})));function El(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Ol=new class{constructor(e){let{relay:t,store:i,contextSelector:n}=e;El(this,"eventStore",void 0),El(this,"relay",void 0),El(this,"context",null),El(this,"reduxStore",null),El(this,"errorState",{consecutiveFailures:0,isDisabled:!1}),El(this,"contextSelector",null),El(this,"eventQueue",[]),El(this,"syncThrottled",(0,v.throttle)(this.sync,1e3)),El(this,"handleReduxStoreChange",(()=>{this.reduxStore&&this.contextSelector&&(this.updateContext(this.contextSelector(this.reduxStore.getState())),this.drainEventQueue())})),El(this,"track",(e=>{if(this.errorState.isDisabled)return;if(!this.context)return void this.eventQueue.push(e);const t=((e,t)=>({event:e.event,anon_id:t.anonId,user_id:e.userId||t.userId,lang_code:t.languageCode,extra:{screen:t.screen.name,path:window.location.pathname,utm_campaign:t.utm.campaign,utm_source:t.utm.source,utm_medium:t.utm.medium,utm_content:t.utm.content,...e.extra},time:Date.now()}))(e,this.context);this.eventStore.add(t),this.syncThrottled()})),this.eventStore=i,this.relay=t,this.contextSelector=n||zl}initialize(e){this.reduxStore=e,this.handleReduxStoreChange(),e.subscribe(this.handleReduxStoreChange)}drainEventQueue(){this.eventQueue.length&&(this.eventQueue.forEach((e=>this.track(e))),this.eventQueue=[])}updateContext(e){this.context=e}sync(){if(!this.context)return;const e=this.eventStore.events.pending,t=(e=>{const t={"X-Portal":e.portal,"X-Platform":e.platform||"web","X-Debug-Info":"v4","X-Local-Time":Date.now(),"X-Screen-Width":e.screen.width,"X-Screen-Height":e.screen.height};return e.debugPin&&(t["X-Debug-Pin"]=e.debugPin),t})(this.context);this.eventStore.movePending(),this.relay.transport({payload:e,headers:t,success:()=>{this.errorState.consecutiveFailures=0,this.eventStore.clear("outgoing")},failure:()=>{if(this.errorState.consecutiveFailures+=1,this.errorState.consecutiveFailures>=3)return this.errorState.isDisabled=!0,this.eventQueue=[],this.eventStore.clear("outgoing"),void this.eventStore.clear("pending");e.forEach((e=>this.eventStore.add(e))),this.eventStore.clear("outgoing")}})}}({store:new class{constructor(e){!function(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(this,"namespace",void 0),this.namespace=e,this.prepare()}prepare(){this.events||(0,Bn.D$)(this.namespace,JSON.stringify({pending:[],outgoing:[]}))}get events(){const e=(0,Bn.le)(this.namespace);if(!e)return{pending:[],outgoing:[]};try{return JSON.parse(e)}catch(e){return{pending:[],outgoing:[]}}}add(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pending";const i=this.events.pending;i.push(e);const n={...this.events,[t]:i};gs("event:react-event-tracker",e),(0,Bn.D$)(this.namespace,JSON.stringify(n))}movePending(){this.events.pending.forEach((e=>{this.add(e,"outgoing")})),this.clear("pending")}clear(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"pending";const t={...this.events,["".concat(e)]:[]};(0,Bn.D$)(this.namespace,JSON.stringify(t))}}("VintedEvents"),relay:new class{constructor(e){!function(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(this,"url",void 0),this.url=e}transport(e){let{payload:t,headers:i,success:n,failure:s}=e;this.request({payload:t,headers:i}).then(n).catch(s)}request(e){let{payload:t,headers:i}=e;return ds().post(this.url,t,{headers:i})}}("/relay/events")});function Rl(e){const{adPlacements:t}=window;return null==t?void 0:t[e]}function Dl(e,t){return e[t]===ri.Fetched}const Al=(()=>{let e=0;const t={isOn:!1,lastActionTimestamp:Date.now(),refreshInterval:void 0,debounceTimer:void 0},i={isLocationChangeEventSetup:!1,lastHref:St.X?"/":window.location.href},n=Object.values(si).reduce(((e,t)=>({...e,[t]:ri.Idle})),{}),s={};function r(e,t,i){s[t]||(s[t]={...n}),s[t][e]=i,function(e){const t=Object.values(si),i=[ri.Fetched,ri.TimedOut,ri.BadSizes,ri.NoBids];return t.map((t=>s[e][t])).filter((e=>i.includes(e))).length===t.length}(t)&&function(e,t){const{googletag:i,pbjs:n,apstag:s}=window,{isManuallyRendered:r}=Rl(e);i.cmd.push((()=>{const a=i.pubads().getSlots().find((t=>t.getSlotElementId()===e));Dl(t,si.Prebid)&&n.setTargetingForGPTAsync([e]),Dl(t,si.Amazon)&&s.setDisplayBids(),r&&i.display(e),a&&!r&&i.pubads().refresh([a])}))}(t,s[t])}function a(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];ns(Yn.Targeting)&&function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=Rl(e),{apstag:s}=window;let r=!1;if(!s||!n)return;const{sizes:a,dfpCode:o}=n;if("fluid"===a||!(l=a)||!Array.isArray(l)||l.find((e=>Array.isArray(e)?!!e.find((e=>Number.isNaN(Number.parseInt(e,10)))):Number.isNaN(Number.parseInt(e,10)))))return void t(si.Amazon,e,ri.BadSizes);var l;const c={slots:[{slotID:e,slotName:o,sizes:a}],params:{adRefresh:i?"1":"0"}},d=setTimeout((()=>{r=!0,t(si.Amazon,e,ri.TimedOut)}),2e3);s.fetchBids(c,(()=>{r||(clearTimeout(d),t(si.Amazon,e,ri.Fetched))}))}(e,r,t),function(e,t){var i;let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=ns(Yn.Targeting),r=Rl(e),{pbjs:a}=window;if(!a||!r)return;if(null==r||null===(i=r.bids)||void 0===i||!i.length)return void(s&&t(si.Prebid,e,ri.NoBids));const{sizes:o,bids:l,adUnitName:c,adUnitPath:d,googleSlot:u}=r,m={code:e,mediaTypes:{banner:{sizes:o}},bids:l.reduce(((e,t)=>{const i=JSON.stringify(t);return JSON.stringify(e).includes(i)?e:[...e,t]}),[]),pubstack:{adUnitPath:d,adUnitName:c}};a.que.push((()=>{n||a.addAdUnits(m),a.requestBids({adUnitCodes:[e],bidsBackHandler(i,r){if(r&&Ol.track({event:"system.prebid_timed_out"}),s)return n&&(null==u||u.setTargeting("ad_refresh","true")),t(si.Prebid,e,r?ri.TimedOut:ri.Fetched);const o=a.getHighestCpmBids(e)[0];return function(e,t){const{sas:i}=window;i&&(t&&i.setHeaderBiddingWinner(e,t),i.callSmart(),i.cmd.push((()=>{i.render(e)})))}(e,o)},timeout:2e3})}))}(e,r,t)}function o(e){Rl(e)&&s[e]&&(s[e]={...n},a(e,!0),window.adPlacements[e].activeDuration=0)}function l(){window.adPlacements&&function(){const e=(Date.now()-t.lastActionTimestamp)/1e3;return!document.hidden&&e<5}()&&Object.keys(window.adPlacements).filter((e=>{const t=Rl(e);if(!t)return!1;const{isManuallyRefreshed:i,isRefreshEnabled:n}=t;return!(!n||i)})).forEach((e=>{const t=Rl(e);if(!t)return;const{isOutOfPageAd:i,node:n,activeDuration:s}=t,r=i||function(e){if(!e)return!1;const t=e.getBoundingClientRect();if(!t)return!1;const i=.5*t.height;return window.innerHeight>t.top+i&&t.bottom>i}(n);r&&(s>=15&&o(e),window.adPlacements[e].activeDuration+=1)}))}function c(){t.lastActionTimestamp=Date.now()}function d(){window.location.href!==i.lastHref&&window.adPlacements&&!t.debounceTimer&&(t.debounceTimer=setTimeout((()=>{t.debounceTimer=void 0}),2e3),Object.keys(window.adPlacements).forEach((e=>{const t=Rl(e);if(!t)return;const{node:i,isOutOfPageAd:n}=t;(n||i)&&o(e)}))),i.lastHref=window.location.href}return{generatePlacementId:function(){return e+=1,"adplacement-".concat(e)},unregisterPlacement:function(e){const{adPlacements:i}=window;if(!i)return;const n=i[e];if(!n)return;const{sas:r,googletag:a}=window;if(a&&n.googleSlot){const e=n.googleSlot;a.cmd.push((()=>{a.destroySlots([e])}))}r&&r.cmd.push((()=>{r.clean(e)})),delete i[e],delete s[e],Object.keys(i).length||(t.refreshInterval&&clearInterval(t.refreshInterval),t.isOn=!1,ni.forEach((e=>window.removeEventListener(e,c))),window.removeEventListener("locationchange",d))},registerPlacement:function(e){let{id:n,placementConfig:s,onPlacementLoad:r,onPlacementRenderEnded:o,onPlacementRequest:u,onImpressionViewable:m,isRefreshEnabled:p,isManuallyRendered:g=!1,isManuallyRefreshed:h=!1,iframeTitle:x}=e;const f=document.getElementById(n);f&&(function(e){let{id:t,placementConfig:i,node:n,isRefreshEnabled:s=!1,isManuallyRendered:r=!1,isManuallyRefreshed:a=!1,isOutOfPageAd:o=!1}=e;window.adPlacements||(window.adPlacements={});const{adPlacements:l}=window,c=function(e){let{dfpAccountId:t,dfpCode:i}=e;return"/".concat(t,"/").concat(i)}(i),d=function(e){let{shape:t,page:i,mediation:n}=e;const s=["ad",t,i];return n&&s.push(n),s.join("-")}(i);l[t]={code:t,adUnitPath:c,adUnitName:d,shape:i.shape,sizes:i.sizes,bids:i.bids,dfpCode:i.dfpCode,dfpAccountId:i.dfpAccountId,activeDuration:0,isRefreshEnabled:s,isManuallyRendered:r,isManuallyRefreshed:a,isOutOfPageAd:o,node:n}}({id:n,placementConfig:s,node:f,isManuallyRendered:g,isManuallyRefreshed:h,isRefreshEnabled:p}),function(e,t,i){const n=Rl(e),{googletag:s}=window;if(!s||!n)return;const{adUnitPath:r,sizes:a}=n;s.cmd.push((()=>{i&&s.setAdIframeTitle(i);const o=s.defineSlot(r,a,e);o&&(o.addService(s.pubads()),o.setCollapseEmptyDiv(!0),function(e,t){const{googletag:i}=window;i&&Object.keys(t).forEach((n=>{const s=n,r=t[s];r&&i.pubads().addEventListener(s,(t=>{t.slot===e&&r(t)}))}))}(o,t),n.googleSlot=o)}))}(n,{[ai.SlotOnload]:r,[ai.SlotRequested]:u,[ai.SlotRenderEnded]:o,[ai.ImpressionViewable]:m},x),function(e,t){const i=Rl(e),{sas:n}=window;if(!n||!i||!fi[t])return;const{node:s}=i;n.cmd.push((()=>{n.events.on(oi.NoAd,(()=>function(e,t){const{pbjs:i}=window;if(!i)return;const n=i.getHighestCpmBids(e)[0];if(n&&t){const e=document.createElement("iframe");e.width=String(n.width),e.height=String(n.height),e.frameBorder=String(0),e.scrolling="no",t.appendChild(e),e.contentWindow&&(i.renderAd(e.contentWindow.document,n.adId),e.contentWindow.document.body.style.padding="0")}}(e,s)),e),n.adCallConfig.formats.push({id:fi[t],tagId:e})}))}(n,s.shape),a(n),!t.isOn&&p&&(t.isOn=!0,t.refreshInterval=setInterval(l,1e3),ni.forEach((e=>window.addEventListener(e,c))),!i.isLocationChangeEventSetup&&"Proxy"in window&&(window.history.pushState=new Proxy(window.history.pushState,{apply:(e,t,i)=>(window.dispatchEvent(new Event("locationchange")),e.apply(t,i))}),window.addEventListener("locationchange",d),i.isLocationChangeEventSetup=!0)))},getAdsPlatform:function(){return e=(0,ls.ij)(),/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)?ci.Mobile:ci.Web;var e},sendManualAdRequest:function(e){const t=Rl(e);t&&googletag.cmd.push((()=>{t.googleSlot&&googletag.pubads().refresh([t.googleSlot])}))}}})(),Ml="consent",Ul=e=>{var t;return(null===(t=Is(e))||void 0===t?void 0:t.cookieConsentVersion)||(e=>e[Ml])(e).cookieConsentVersion},Bl=e=>Ul(e)!==Kn.None,ql=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=(0,m.useRef)(e);n.current=e;const s=(0,v.debounce)((function(){return n.current(...arguments)}),t,{leading:i});return(0,m.useRef)(s).current},Vl=function(e){let{targetElement:t,onAdRender:i=v.noop}=e;const n=ql(i),s=(0,m.useCallback)((()=>{const e=(null==t?void 0:t.clientHeight)||0;n(e>=50)}),[n,t]);(0,m.useEffect)((()=>{if(!t)return v.noop;const e=new MutationObserver(s);return e.observe(t,{attributes:!0,childList:!0,subtree:!0}),()=>e.disconnect()}),[s,t])},Hl=()=>{const e=U("advertisements");return(0,z.jsx)("div",{className:"ad-info","data-testid":"ad-info",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,theme:"muted",text:e("advertisement")})})},Gl=e=>{let{id:t,config:i,onAdRender:n=v.noop}=e;const[s,r]=(0,m.useState)(null),[a,o]=(0,m.useState)(!1),l=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=(0,p.v9)(Ul),[n,s]=(0,m.useState)(!t&&ns(e)),r=(0,m.useCallback)((()=>{s(ns(e))}),[e]);return(0,m.useEffect)((()=>(window.addEventListener("bannerLoaded",r),()=>{window.removeEventListener("bannerLoaded",r)})),[r]),(0,m.useMemo)((()=>i===Kn.None||n),[n,i])}(Yn.Targeting),c=(0,m.useCallback)((e=>{n(e),o(e)}),[n]);return Vl({targetElement:s,onAdRender:c}),(0,m.useEffect)((()=>{s&&window.dimatter&&(window.dimatter.push([i.code]),window.dimatter.push(["_requestBanners",i.code]))}),[s,i,l]),l?(0,z.jsxs)(z.Fragment,{children:[a&&(0,z.jsx)(Hl,{}),(0,z.jsx)("div",{"data-testid":"direct-advertisement",id:t,ref:r,children:(0,z.jsx)("div",{id:i.code,"data-testid":"direct-advertisement-node"})})]}):null},Wl=function(){const e=(0,p.v9)(Wt("web_ads_load_time_logging")),{track:t}=vi(),i=(0,m.useRef)(0);return{onRequest:(0,m.useCallback)((()=>{e&&(i.current=Date.now())}),[e]),onLoad:(0,m.useCallback)((n=>{if(!i.current||!e)return;const s=Date.now()-i.current;t((e=>{const{section:t,duration:i,completionState:n,data:s}=e;return{event:"system.timing",extra:{section:t,duration:i,completion_state:n,data:s||null}}})({section:"ad_load",duration:s,completionState:"succeeded",data:n}))}),[t,e])}},Xl=e=>{let{id:t,config:i,isManuallyRendered:n=!1,isManuallyRefreshed:s=!1,onAdRender:r=v.noop}=e;const a=(0,m.useRef)([0,0]),o=(0,m.useRef)(!1),[l,c]=(0,m.useState)(!1),[d,u]=(0,m.useState)(null),g=(0,m.useMemo)((()=>Al.getAdsPlatform()===ci.Web||i.shape===di.Leaderboard),[i]),h=U("advertisements"),{track:x}=vi(),f=(0,p.v9)(Bl),y=(()=>{const[e,t]=(0,m.useState)("undefined"!=typeof window&&!!window.OneTrust),i=(0,m.useCallback)((()=>{t(!0)}),[]);return(0,m.useEffect)((()=>(window.addEventListener("bannerLoaded",i),()=>{window.removeEventListener("bannerLoaded",i)})),[i]),(0,m.useMemo)((()=>e),[e])})(),{onRequest:_,onLoad:b}=Wl(),j=(0,m.useCallback)((e=>{if(!e)return e;if("string"==typeof e)return e;const t=null==d?void 0:d.firstElementChild,[i,n]=e;let s=[i,n];return i<=1&&t instanceof HTMLElement&&(s=[t.offsetWidth,t.offsetHeight]),s}),[d]),S=(0,m.useCallback)((e=>{x((e=>{const{adUnitPath:t,shape:i,size:n,isMobileWeb:s}=e;return{event:"user.view_ad",extra:{placement_id:t,shape:i,size:Array.isArray(n)?n.join("x"):String(n),is_mobile_web:s}}})({adUnitPath:e.slot.getAdUnitPath(),size:a.current,shape:i.shape,isMobileWeb:Al.getAdsPlatform()===ci.Mobile}))}),[x,i]),Z=(0,m.useCallback)((e=>{!e.isEmpty&&e.size&&(a.current=j(e.size))}),[j]),I=(0,m.useCallback)((e=>{c(!0),e.slot&&(x(zn({adUnitPath:e.slot.getAdUnitPath(),isMobileWeb:Al.getAdsPlatform()===ci.Mobile})),b(e.slot.getAdUnitPath()))}),[x,b]),C=(0,m.useCallback)((()=>{o.current||(Al.registerPlacement({placementConfig:i,id:t,onPlacementLoad:I,onPlacementRequest:_,onPlacementRenderEnded:Z,onImpressionViewable:S,isRefreshEnabled:g,isManuallyRendered:n,isManuallyRefreshed:s,iframeTitle:h("advertisement")}),o.current=!0)}),[i,t,I,Z,S,n,s,g,h,_]),k=(0,m.useCallback)((e=>{r(e),c(e)}),[r]);return Vl({targetElement:d,onAdRender:k}),(0,m.useEffect)((()=>{d&&((!f||!y)&&f||C())}),[d,C,f,y]),(0,m.useEffect)((()=>()=>{o.current&&Al.unregisterPlacement(t)}),[t]),(0,z.jsxs)(z.Fragment,{children:[l&&(0,z.jsx)(Hl,{}),(0,z.jsx)("div",{"data-testid":"rtb-advertisement",id:t,ref:u})]})},Yl=e=>{let{id:t,placementConfig:i,isManuallyRefreshed:n,isManuallyRendered:s,onAdRender:r}=e;return(0,z.jsx)("div",{className:"ad-content",children:i.kind===li.Rtb?(0,z.jsx)(Xl,{id:t,config:i,isManuallyRendered:s,isManuallyRefreshed:n,onAdRender:r}):(0,z.jsx)(Gl,{id:t,config:i,onAdRender:r})})};var Kl=i(63947),Jl=i(30329);const Ql=()=>(0,Jl.Fg)().mode===Jl.UX.Dark,$l=[{shape:di.Leaderboard,placeholders:{desktop:["/ads/placeholders/leaderboard/desktop-1","/ads/placeholders/leaderboard/desktop-2","/ads/placeholders/leaderboard/desktop-3"],mobile:["/ads/placeholders/leaderboard/mobile-1","/ads/placeholders/leaderboard/mobile-2","/ads/placeholders/leaderboard/mobile-3"]}}],ec=e=>{let{shape:t}=e;const i=U("advertisements"),n=Ql(),s=Al.getAdsPlatform()===ci.Mobile,r=(0,m.useMemo)((()=>((e,t,i)=>{var n;const s=null===(n=$l.find((t=>{let{shape:i}=t;return i===e})))||void 0===n?void 0:n.placeholders;if(!s)return null;const r=t?"-dark":"",a=i?s.mobile:s.desktop,o=Math.floor(Math.random()*a.length);return"".concat(Be.cJ).concat(a[o]).concat(r,".png")})(t,n,s)),[t,n,s]);return r?(0,z.jsxs)("div",{className:y()("ad-placeholder","ad-placeholder--".concat(t)),"data-testid":"ad-placeholder","aria-hidden":"true",children:[(0,z.jsx)(Kl.U,{testId:"ad-placeholder-image",src:r}),!s&&(0,z.jsx)("div",{className:"ad-placeholder__text",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,theme:"primary",bold:!0,text:i("placeholder")})})]}):null};var tc=i(62226),ic=i(72708),nc=i(38574);const sc=()=>(0,z.jsx)("div",{className:"l-header",children:(0,z.jsx)("header",{className:"l-header__main",children:(0,z.jsx)("div",{className:"container u-flexbox u-align-items-center u-fill-height",children:(0,z.jsx)("div",{className:"u-flexbox u-align-items-center u-fill-width",children:(0,z.jsx)("div",{className:"l-header__logo",children:(0,z.jsx)("a",{className:"u-block",href:"/",children:(0,z.jsx)("div",{className:"l-header__logo-container",children:(0,z.jsx)(Kl.U,{src:"".concat(Be.Fv,"/assets/web-logo/default/logo.svg"),alt:"Vinted Home"})})})})})})})}),rc=e=>{let{error:t,errorInfo:i}=e;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,theme:"inherit",width:xt.Z.Width.Parent,children:null==t?void 0:t.toString()}),(0,z.jsx)(x.Z,{}),(0,z.jsxs)("details",{children:[(0,z.jsx)("summary",{children:"Component Stack"}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,theme:"inherit",children:null==i?void 0:i.componentStack})]})]})};function ac(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const oc={hasError:!1,error:null,errorInfo:null};class lc extends m.Component{constructor(){super(...arguments),ac(this,"state",{...oc}),ac(this,"handleRetry",(()=>this.setState({...oc})))}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){const{onError:i,preventLog:n}=this.props;return this.setState({error:e,errorInfo:t}),n||(0,ls.H)(e),i(e)}render(){const{hasError:e,error:t,errorInfo:i}=this.state,{FallbackComponent:n,children:s}=this.props;return e?n?(0,z.jsx)(n,{error:t,errorInfo:i,handleRetry:this.handleRetry}):null:s}}ac(lc,"AppError",(e=>{let{error:t,errorInfo:i,handleRetry:n}=e;const s=U("error_page"),r=(0,p.v9)(ae);return(0,z.jsxs)("div",{className:"fullpage-layout u-background-white u-fill-viewport",children:[(0,z.jsx)(sc,{}),(0,z.jsx)("main",{className:"site",children:(0,z.jsxs)("div",{className:"container",children:[(0,z.jsx)(tc.Z,{image:(0,z.jsx)(Kl.U,{src:"".concat(Be.Fv,"/assets/error-page/404-rack.svg")}),title:s("client_error.title"),body:s("client_error.body"),action:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,onClick:n,children:s("actions.retry")})}),r&&(0,z.jsx)(nc.Z,{children:(0,z.jsx)(rc,{error:t,errorInfo:i})})]})})]})})),ac(lc,"ComponentError",(e=>{let{error:t,errorInfo:i}=e;return(0,z.jsx)("div",{className:"u-fill-width u-fill-height u-flexbox",children:(0,z.jsx)(gt.Z,{theme:"muted",title:"Component Error",children:(0,z.jsx)("div",{className:"u-overflow-hidden",children:(0,z.jsx)(rc,{error:t,errorInfo:i})})})})})),ac(lc,"LayoutError",(e=>{let{error:t,errorInfo:i,handleRetry:n}=e;const s=U("error_page"),r=(0,p.v9)(ae);return(0,z.jsxs)("div",{className:"container",children:[(0,z.jsx)(tc.Z,{image:(0,z.jsx)(Kl.U,{src:"".concat(Be.Fv,"/assets/error-page/404-rack.svg")}),title:s("client_error.title"),body:s("client_error.body"),action:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,onClick:n,children:s("actions.retry")})}),r&&(0,z.jsx)(nc.Z,{children:(0,z.jsx)(rc,{error:t,errorInfo:i})})]})})),ac(lc,"defaultProps",{preventLog:!1,onError:v.noop});const cc=lc,dc=e=>{let{id:t,children:i,pageName:n,kind:s,dfpCode:r}=e;const{track:a}=vi(),o=(0,m.useCallback)((e=>{a((e=>{const{error:t,pageName:i,placementId:n,dfpCode:s,kind:r}=e;return{event:"system.ad_component_crash",extra:{error:t,screen_name:i,placement_id:n,kind:r,dfp_code:s}}})({error:e?e.toString():"",placementId:t,pageName:n,kind:s,dfpCode:r}))}),[t,r,n,s,a]);return(0,z.jsx)(cc,{onError:o,children:i})},uc=e=>{var t;let{id:i,shape:n,railsComponent:s,mediation:r=null,config:a,isSidebarAd:o=!1,isManuallyRendered:l=!1,isManuallyRefreshed:c=!1,onAdRender:d=v.noop}=e;const u=(0,m.useRef)(null),[g,h]=(0,m.useState)(!1),x=function(){const e=(0,p.v9)(Ht),t=(0,p.v9)(Wt("web_ads_blockthrough_script")),i=Al.getAdsPlatform()===ci.Web,n=[$t.ConversationList,$t.ConversationNew,$t.ConversationReply,$t.Catalog,$t.Item].includes(e),s=t&&i&&n,r=Xn({abTestName:"web_adblock_monetisation"});return s&&r&&"off"!==r.variant?"bt-test-".concat(r.variant):null}(),f=(0,p.v9)(Rt),_=(0,p.v9)(At(n,x||r)),b=(0,m.useMemo)((()=>i||Al.generatePlacementId()),[i]),j=(0,m.useMemo)((()=>a||_),[a,_]),S=function(e){let{isSticky:t,isRailsComponent:i,parentElement:n}=e;const[s,r]=(0,m.useState)();return(0,m.useEffect)((()=>{var e;if(!document||!t)return void r(void 0);const i=(null===(e=document.querySelector(".js-header"))||void 0===e?void 0:e.offsetHeight)||0;r({offset:i+20})}),[t]),(0,m.useEffect)((()=>{i&&n&&s&&(n.style.top="".concat(s.offset,"px"),n.classList.add("ad-sticky"))}),[i,n,s]),s}({isSticky:null==j?void 0:j.options.isSticky,isRailsComponent:s,parentElement:null===(t=u.current)||void 0===t?void 0:t.parentElement}),Z=(0,m.useCallback)((e=>{d(e),h(e)}),[d]);return j&&f===Ne.Idle?(0,z.jsx)(dc,{id:b,pageName:j.page||ui.Unknown,kind:j.kind,dfpCode:j.kind===li.Rtb?j.dfpCode:j.code,children:(0,z.jsxs)("div",{className:y()("ad-container","ad-container--".concat(n),!!S&&!s&&"ad-sticky",g&&"ad-container--rendered",o&&"ad-sidebar"),"data-testid":"advertisement",style:s?void 0:{top:null==S?void 0:S.offset},ref:u,children:[(0,z.jsx)(ec,{shape:n}),(0,z.jsx)(Yl,{id:b,placementConfig:j,isManuallyRefreshed:c,isManuallyRendered:l,onAdRender:Z})]})}):null},mc=e=>{let{redirectRoute:t="/",redirectRailsRoute:i,children:n}=e;return(0,p.v9)(_e)?n:i?((0,ls.ru)(i),null):(0,z.jsx)(Nt.Fg,{to:t,replace:!0})};var pc=i(99608),gc=i(37094);const hc=(0,m.createContext)(null),xc=()=>{const{url:e,urlParams:t,back:i,push:n,replace:s,refreshUrl:r}=(0,m.useContext)(hc).location,a=(0,m.useCallback)((t=>{-1===document.referrer.indexOf(new URL(e).origin)?(0,ls.ru)(t):i()}),[i,e]);return(0,m.useMemo)((()=>{const o=new URL(e);return{baseUrl:o.origin,host:o.host,urlQuery:o.search,relativeUrl:o.pathname,urlHash:o.hash,searchParams:(0,ys.oZ)(o.search),urlParams:t,safeBack:a,goToPreviousPage:i,pushHistoryState:n,replaceHistoryState:s,refreshUrl:r}}),[i,n,r,s,a,e,t])},fc=()=>{const{pathname:e,search:t,hash:i}=(0,Nt.TH)(),{refreshUrl:n}=xc();return(0,m.useLayoutEffect)((()=>{n()}),[n,e,t,i]),null},yc=e=>{let{location:t="/",isServerSide:i=!1,basename:n,children:s}=e;return i?(0,z.jsx)(gc.gx,{location:t,basename:n,children:s}):(0,z.jsxs)(pc.BrowserRouter,{basename:n,children:[(0,z.jsx)(fc,{}),s]})};var vc=i(59501);const _c=function(){const e=(0,p.v9)(Ht),t=(0,p.v9)(Wt("web_ads_rokt_script")),i=(0,p.v9)(Vn("web_ads_rokt")),n=t&&!!i,s=[$t.ConversationList,$t.ConversationNew,$t.ConversationReply].includes(e);return{setShouldShowRokt:function(e){e&&n?(0,vc.D9)(ti,String(e)):(0,vc.lD)(ti)},shouldShowRokt:n&&s&&"true"===(0,vc.St)(ti)}};function bc(){bc=function(e,t){return new i(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function i(e,n,s){var r=new RegExp(e,n);return t.set(r,s||t.get(e)),jc(r,i.prototype)}function n(e,i){var n=t.get(i);return Object.keys(n).reduce((function(t,i){return t[i]=e[n[i]],t}),Object.create(null))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jc(e,t)}(i,RegExp),i.prototype.exec=function(t){var i=e.exec.call(this,t);return i&&(i.groups=n(i,this)),i},i.prototype[Symbol.replace]=function(i,s){if("string"==typeof s){var r=t.get(this);return e[Symbol.replace].call(this,i,s.replace(/\$<([^>]+)>/g,(function(e,t){return"$"+r[t]})))}if("function"==typeof s){var a=this;return e[Symbol.replace].call(this,i,(function(){var e=arguments;return"object"!=typeof e[e.length-1]&&(e=[].slice.call(e)).push(n(e,a)),s.apply(this,e)}))}return e[Symbol.replace].call(this,i,s)},bc.apply(this,arguments)}function jc(e,t){return jc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},jc(e,t)}const Sc=(e,t)=>e.length>t?"".concat(e.substring(0,t),"..."):e,Zc=(e,t)=>{const i=e.match(bc(/(^.*)\.(.*)/,{name:1,extension:2}));if(null==i||!i.groups)return Sc(e,t);const{name:n,extension:s}=i.groups;return"".concat(Sc(n,t),".").concat(s)},Ic=e=>e.split(".").map((e=>(0,v.snakeCase)(e).replace(/_(\d+)(_|$)/g,"$1$2"))).join("."),Cc=["0","f","F","false","FALSE","off","OFF"],kc=e=>"string"==typeof e&&!Cc.includes(e);function wc(e){return async function(e){const t=(e=>"undefined"==typeof TextEncoder?new Uint8Array(e.split("").map((e=>e.charCodeAt(0)))):(new TextEncoder).encode(e))(e),i=await window.crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(i)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(e.toLowerCase().replace(/\+[^@]*@/,"@"))}const Pc={"en-dev":"en",en:"en","cz-fr":"cs",cz:"cs","fi-fr":"fi-FI","nl-fr":"nl","en-fr":"en","en-uk-fr":"en-GB","en-us-fr":"en-US","es-us-fr":"es-US",fr:"fr","de-fr":"de","da-fr":"da-DK","it-fr":"it","lt-fr":"lt",pl:"pl","pl-fr":"pl","pt-fr":"pt","es-fr":"es","sk-fr":"sk","hu-fr":"hu","sv-fr":"sv","ro-fr":"ro","en-ca-fr":"en-CA","fr-ca-fr":"fr-CA",keys:"en"},zc="intl",Tc=e=>e[zc],Fc=e=>Tc(e).messages,Nc=e=>{return t=Tc(e).locale,Pc[t]||t;var t},Lc=e=>{let{trackingDfpCode:t}=e;const i=(0,p.v9)(W),n=(0,p.v9)(Nc),s=(0,p.v9)(Ht),[r,a]=(0,m.useState)(),{track:o}=vi(),{onRequest:l,onLoad:c}=Wl(),d=(0,m.useCallback)((()=>{o((e=>{const{screen:t,adUnitPath:i}=e;return{event:"system.requested_ad",extra:{placement_id:i,screen:t}}})({adUnitPath:t,screen:s})),l()}),[o,s,t,l]),u=(0,m.useCallback)((()=>{o(zn({adUnitPath:t,isMobileWeb:Al.getAdsPlatform()===ci.Mobile})),c(t)}),[o,t,c]),g=(0,m.useCallback)((async()=>{var e;if(!window.RoktLauncher||!i)return;const t=await window.RoktLauncher,s=i.email?await wc(i.email):void 0,r=null===(e=i.real_name)||void 0===e?void 0:e.split(" ")[0];a(await t.selectPlacements({attributes:{customerid:i.id,emailsha256:s,first_name:r,language:n.toUpperCase(),country:i.country_iso_code.toUpperCase()}})),d()}),[n,i,d]);return(0,m.useEffect)((()=>{g()}),[g]),(0,m.useEffect)((()=>r?(r.on("PLACEMENT_READY").subscribe(u),()=>{r.close()}):v.noop),[r,u]),(0,z.jsx)("div",{id:"rokt-placeholder"})},Ec="/inbox",Oc="/inbox/new",Rc=e=>"/inbox/".concat(e),Dc=e=>"/inbox/".concat(e,"?offer_request=true"),Ac="inbox/*",Mc=e=>"extras"in e,Uc=e=>Mc(e)?e.updated.getTime():new Date((null==e?void 0:e.updated_at)||0).getTime(),Bc=e=>{const t=e.substring(e.lastIndexOf("/")+1);return["inbox","new"].includes(t)?"":t};let qc,Vc,Hc,Gc,Wc,Xc,Yc,Kc,Jc,Qc;var $c;!function(e){e.TrackedShippment="tracked_shipping_instructions",e.UntrackedShipment="untracked_shipping_instructions",e.CustomShipment="custom_shipping_instructions",e.ConfirmPackageSize="confirm_package_size",e.ReuploadItem="reupload",e.ResolveComplaint="resolve_complaint",e.ViewComplaint="view_complaint",e.DownloadShippingLabel="download_shipping_label",e.CancellationConfirm="cancellation_confirm",e.CancellationDecline="cancellation_decline",e.TrackShipment="track_shipment",e.MarkAsDelivered="mark_as_delivered",e.MarkAsShipped="mark_as_shipped",e.GetShippingLabel="get_shipping_label",e.GoToWallet="goto_wallet",e.CompleteTransaction="all_is_good",e.ReportProblem="i_have_issues",e.LeaveFeedback="leave_feedback",e.UpdateBundle="update_bundle",e.WeHaveMet="we_have_met",e.ClaimCompensation="claim_compensation",e.RequestReturn="request_to_return",e.GetReturnShippingLabel="get_return_shipping_label",e.ConfirmComplaintResolved="confirm_complaint_resolved",e.RefuseComplaintResolved="refuse_complaint_resolved",e.ViewDeliveryInstructions="view_delivery_instructions",e.OpenQrCode="open_qr_code",e.RefundProgress="refund_progress",e.NeedHelpSelectChatbotIssue="need_help_select_chatbot_issue",e.SelectChatbotIssue="select_chatbot_issue",e.ConfirmComplaintResolvedAndLeaveFeedback="confirm_complaint_resolved_and_leave_feedback",e.LeaveComplaintFeedback="leave_complaint_feedback",e.PushUpFeedback="push_up_feedback",e.ActivateBalance="activate_balance",e.ReturnOrder="return_order",e.MarkAsReturnedToSender="complete_return_to_sender",e.GetReservationLink="get_reservation_link",e.AppealTheDecision="appeal_the_decision"}(qc||(qc={})),function(e){e.Buy="buy",e.Bundle="bundle",e.Message="message",e.AskSeller="ask_seller",e.BuyerOffer="buyer_offer",e.MarkAsSold="mark_as_sold",e.Reservation="reservation",e.SystemMessage="system_message",e.BuyerEntersOfferForm="buyer_enters_offer_form",e.SellerEntersNotification="seller_enters_notification"}(Vc||(Vc={})),($c=Hc||(Hc={})).ActionMessage="action_message",$c.StatusMessage="status_message",$c.Message="message",$c.PortalMessage="portal_message",$c.OfferMessage="offer_message",$c.OfferRequestMessage="offer_request_message",$c.ReportSuggestion="report_suggestion",function(e){e.Heart="heart"}(Gc||(Gc={})),function(e){e.Gray="gray_box",e.Green="green_box",e.Red="red_box",e.Clear="clear_box"}(Wc||(Wc={})),function(e){e.Sale="sale",e.Shipment="shipment",e.Completion="completion",e.Failure="failure"}(Xc||(Xc={})),function(e){e[e.Pending=10]="Pending",e[e.Accepted=20]="Accepted",e[e.Outdated=30]="Outdated"}(Yc||(Yc={})),function(e){e.ShipmentTrackingLink="react-shipment-tracking-link",e.BuyerDetailsLink="buyer-details-link",e.OfflineVerificationInfoLink="react-offline-verification-info-link",e.DropOffPointMapLink="react-drop-off-point-map-link"}(Kc||(Kc={})),function(e){e.StartConversation="start_conversation",e.Reply="reply"}(Jc||(Jc={})),function(e){e.Seller="seller",e.Buyer="buyer"}(Qc||(Qc={}));const ed=[20,50,100];let td,id,nd,sd,rd;ed.findIndex((e=>20===e)),function(e){e.GetShippingLabelModal="getShippingLabel",e.DropOffTypeSelectionModal="dropOffTypeSelection",e.ConfirmationModal="confirmation",e.AddressModal="address",e.ShippingContactModal="shippingContact",e.CourierPickUpDateSelectionModal="courierPickUpDateSelection",e.DigitalLabelTypeSelectionModal="digitalLabelTypeSelection",e.ReturnTheOrder="returnTheOrder",e.ReturnCurrencyConversionModal="returnCurrencyConversionModal",e.ShippingDiscountModal="shippingDiscountModal",e.DropOffPointMapModal="dropOffPointMapModal",e.None="none"}(td||(td={})),function(e){e.Disabled="off"}(id||(id={})),function(e){e[e.LabelTypePdf=1]="LabelTypePdf",e[e.LabelTypeCode=2]="LabelTypeCode",e[e.LabelTypeQr=3]="LabelTypeQr"}(nd||(nd={})),function(e){e.LabelTypePdf="pdf",e.LabelTypeQr="qr",e.LabelTypeCode="code",e.LabelTypeReservationLink="reservation_link"}(sd||(sd={})),function(e){e[e.Visible=0]="Visible",e[e.Hidden=1]="Hidden",e[e.Deleted=2]="Deleted",e[e.Expired=3]="Expired"}(rd||(rd={}));var ad=i(23923);const od="userStats",ld={requestState:Ne.Idle},cd=(0,ad.oM)({name:od,initialState:ld,reducers:{getUserStatsRequest:e=>{e.requestState=Ne.Pending},getUserStatsFailure:e=>{e.requestState=Ne.Failure},getUserStatsSuccess:(e,t)=>{const{stats:i}=t.payload;var n;e.stats={unreadMsgCount:(n=i).unread_msg_count,unreadPrivateMsgCount:n.unread_private_msg_count,unreadNotificationCount:n.unread_notification_count,itemCount:n.item_count,walletBalance:Va(n.wallet_balance),freePushUpsCount:n.free_push_ups_count,promotedCloset:n.promoted_closet,promotedClosetEndsInDays:n.promoted_closet_ends_in_days,canMakeOffers:n.can_make_offers},e.requestState=Ne.Success},setUnreadMsgCount:(e,t)=>{if(!e.stats)return;const{count:i}=t.payload;e.stats.unreadMsgCount=i}}}),{actions:dd}=cd,ud={[od]:cd.reducer};let md,pd,gd,hd,xd,fd,yd;cd.reducer,function(e){e.Buyer="buyer",e.Seller="seller"}(md||(md={})),function(e){e[e.DebitProcessed=230]="DebitProcessed",e[e.StatusNew=1]="StatusNew",e[e.StatusEstimated=100]="StatusEstimated",e[e.StatusDebitFailed=220]="StatusDebitFailed"}(pd||(pd={})),function(e){e.Offer="offer",e.Buy="buy",e.RequestOffer="request_offer",e.Transfer="transfer",e.Reserve="reserve",e.WaitingForShipment="waiting_for_shipment",e.LeaveFeedback="feedback"}(gd||(gd={})),function(e){e.MarkAsSold="mark_as_sold",e.MarkAsReceived="mark_as_received",e.CanMarkAsReceived="can_mark_as_received",e.Bundle="bundle",e.UsePayments="use_payments",e.DeleteConversation="delete_thread",e.Cancel="cancel",e.ConfirmShipmentInstructions="confirm_shipment_instructions"}(hd||(hd={})),function(e){e.Failed="failed",e.NeedsAction="needs_action",e.Waiting="waiting",e.Completed="completed"}(xd||(xd={})),function(e){e.Disabled="disabled",e.Optional="optional",e.Mandatory="mandatory"}(fd||(fd={})),function(e){e.ShippingLabel="shipping_label",e.DigitalLabel="digital_label",e.ReturnLabel="return_label",e.Buyer="buyer",e.Seller="seller"}(yd||(yd={}));const vd="shippingContact";let _d;!function(e){e.ShippingContact="shipping_contact",e.BuyerPhoneNumber="buyer_phone_number",e.SellerPhoneNumber="seller_phone_number"}(_d||(_d={}));const bd=e=>e[vd],jd=e=>bd(e).ui,Sd=e=>jd(e).shippingContact,Zd=e=>jd(e).saveShippingContact,Id=e=>jd(e).deleteShippingContact,Cd=e=>jd(e).configuration,kd=e=>bd(e).configuration,wd=e=>bd(e).buyerPhoneNumber,Pd=e=>bd(e).sellerPhoneNumber,zd=e=>bd(e).errors,Td=(e,t)=>bd(e).errors.find((e=>e.field===t)),Fd="conversation";let Nd;!function(e){e.Off="off",e.Soft="a",e.Hard="b"}(Nd||(Nd={}));const Ld=e=>e[Fd],Ed=(0,B.P1)(Ld,(e=>{let{ui:t}=e;return t})),Od=e=>{var t;return null===(t=Ld(e).conversation)||void 0===t?void 0:t.isTranslated},Rd=e=>Ld(e).conversation,Dd=e=>Ld(e).ui.getConversation,Ad=e=>Ld(e).transaction,Md=e=>{var t;return null===(t=Ld(e).conversation)||void 0===t?void 0:t.transaction},Ud=e=>Ld(e).ui.getTransaction.uiState,Bd=e=>{var t;return null===(t=Ld(e).conversation)||void 0===t?void 0:t.moderatedItems},qd=e=>{var t;return null===(t=Ld(e).conversation)||void 0===t?void 0:t.transactionId},Vd=e=>{var t;return null===(t=Ld(e).conversation)||void 0===t?void 0:t.suggestedMessages},Hd=e=>{var t;return null===(t=Ld(e).conversation)||void 0===t?void 0:t.id},Gd=e=>{var t;return null===(t=Ld(e).conversation)||void 0===t?void 0:t.oppositeUser},Wd=e=>{var t,i;return null===(t=Ld(e).conversation)||void 0===t||null===(i=t.oppositeUser)||void 0===i?void 0:i.id},Xd=e=>{var t;return null===(t=Ld(e).conversation)||void 0===t?void 0:t.messages},Yd=e=>{var t,i;return null!==(t=null===(i=Ld(e).conversation)||void 0===i?void 0:i.translationType)&&void 0!==t?t:Ue.None},Kd=e=>{var t;return null===(t=Ld(e).conversation)||void 0===t?void 0:t.isReadByOppositeUser},Jd=e=>Ld(e).ui.isSidebarOpen,Qd=e=>Ld(e).ui.sendMessage,$d=(0,B.P1)(Qd,(e=>e.uiState)),eu=(0,B.P1)(Qd,(e=>e.error)),tu=e=>Ld(e).tracking,iu=(0,B.P1)((e=>Ld(e).ui.trackingJourneySummary),(e=>e.uiState)),nu=e=>Ld(e).shipmentInstructions,su=e=>{var t;return null===(t=Ld(e).conversation)||void 0===t?void 0:t.item},ru=(0,B.P1)(su,(e=>null==e?void 0:e.photo)),au=(0,B.P1)(Ad,(e=>null==e?void 0:e.complaintId)),ou=(0,B.P1)(Ad,(e=>{var t;return null==e||null===(t=e.shipment)||void 0===t?void 0:t.labelUrl})),lu=((0,B.P1)(Ad,(e=>{var t,i;return null==e||null===(t=e.seller)||void 0===t||null===(i=t.defaultAddress)||void 0===i?void 0:i.id})),(0,B.P1)(Ad,(e=>{var t;return null==e||null===(t=e.buyerDebit)||void 0===t?void 0:t.shipmentPrice})),(0,B.P1)(Ad,(e=>{var t;return null==e||null===(t=e.buyerDebit)||void 0===t?void 0:t.currency})),(0,B.P1)(Md,(e=>null==e?void 0:e.offer.price))),cu=(0,B.P1)(Md,(e=>null==e?void 0:e.offer.price.currencyCode)),du=(0,B.P1)(Md,(e=>{if(e)return(0,v.intersection)(e.availableActions,Object.values(gd))})),uu=(0,B.P1)(Md,(e=>{if(e)return(0,v.intersection)(e.availableActions,Object.values(hd))})),mu=(0,B.P1)(Md,(e=>null==e?void 0:e.status)),pu=((0,B.P1)(Ad,(e=>{var t;return null==e||null===(t=e.seller)||void 0===t?void 0:t.defaultAddress})),(0,B.P1)(Ad,(e=>null==e?void 0:e.buyer.defaultAddress)),(0,B.P1)(Ad,(e=>{var t;return null==e||null===(t=e.seller)||void 0===t?void 0:t.countryCode}))),gu=(0,B.P1)(Ed,(e=>e.enterTrackingCode)),hu=(0,B.P1)(gu,(e=>e.uiState)),xu=(0,B.P1)(gu,(e=>e.error)),fu=(0,B.P1)(Ed,(e=>e.markAsShipped)),yu=(0,B.P1)(fu,(e=>e.uiState)),vu=((0,B.P1)(fu,(e=>e.error)),(0,B.P1)(Ed,(e=>e.selectedShippingDate)),(0,B.P1)(nu,(e=>null==e?void 0:e.carrier))),_u=(0,B.P1)(Ad,(e=>{var t;return null==e||null===(t=e.shipment)||void 0===t?void 0:t.packageType.dropOffTypes})),bu=(0,B.P1)(nu,(e=>null==e?void 0:e.dropOffType)),ju=(0,B.P1)(Ed,(e=>e.selectDropOffType)),Su=(0,B.P1)(ju,(e=>e.selectedDropOffTypeId)),Zu=(0,B.P1)(ju,(e=>e.isSubmitEnabled)),Iu=e=>Ld(e).recipientId,Cu=(0,B.P1)(Ed,(e=>e.selectDropOffType)),ku=(0,B.P1)(Cu,(e=>e.uiState)),wu=(0,B.P1)(Cu,(e=>e.error)),Pu=((0,B.P1)(nu,(e=>null==e?void 0:e.labelFormatDetails)),e=>Ld(e).digitalLabel),zu=(0,B.P1)(Ed,(e=>e.createOffer)),Tu=((0,B.P1)(zu,(e=>e.uiState)),(0,B.P1)(zu,(e=>e.error)),(0,B.P1)(Ed,(e=>e.acceptOffer))),Fu=((0,B.P1)(Tu,(e=>e.uiState)),(0,B.P1)(Tu,(e=>e.error)),(0,B.P1)(Ed,(e=>e.rejectOffer))),Nu=((0,B.P1)(Fu,(e=>e.uiState)),(0,B.P1)(Fu,(e=>e.error)),(0,B.P1)(Ed,(e=>e.getCourierPickUpDates))),Lu=((0,B.P1)(Nu,(e=>e.uiState)),(0,B.P1)(Nu,(e=>e.error)),e=>Ld(e).offerRequestOptions),Eu=(0,B.P1)(Lu,(e=>(null==e?void 0:e.offerSuggestions)||[])),Ou=(0,B.P1)(Eu,(e=>e[0])),Ru=(0,B.P1)(Md,(e=>null==e?void 0:e.userSide)),Du=(0,B.P1)(Ad,(e=>{var t,i;return null==e||null===(t=e.shipment)||void 0===t||null===(i=t.packageType)||void 0===i?void 0:i.sellerPhoneRequirement})),Au=(0,B.P1)(Ad,(e=>{var t;return null==e||null===(t=e.shipment)||void 0===t?void 0:t.packageType.buyerPhoneRequirement})),Mu=(0,B.P1)(Du,(e=>!e||e===fd.Disabled)),Uu=(0,B.P1)(Au,(e=>!e||e===fd.Disabled)),Bu=(0,B.P1)(Du,Pd,((e,t)=>!(e===fd.Mandatory&&!t))),qu=(0,B.P1)(Au,wd,((e,t)=>!(e===fd.Mandatory&&!t))),Vu=e=>{var t;return!(null===(t=Ld(e).conversation)||void 0===t||!t.isReplyAllowed)},Hu=(0,B.P1)(Md,(e=>{var t;return null==e||null===(t=e.shipment)||void 0===t?void 0:t.id})),Gu=(0,B.P1)(Md,(e=>{var t;return null==e||null===(t=e.shipment)||void 0===t?void 0:t.status})),Wu=(0,B.P1)(Ad,(e=>{var t;return null==e||null===(t=e.shipment)||void 0===t?void 0:t.shipmentLabelType})),Xu=e=>Ld(e).activeModal,Yu=((0,B.P1)(nu,(e=>{var t;return null==e||null===(t=e.dropOffType)||void 0===t?void 0:t.dropOffTypeMeta.dropOffPrintIcon})),(0,B.P1)(nu,(e=>{var t;return null==e||null===(t=e.dropOffType)||void 0===t?void 0:t.pickUpDateShown}))),Ku=((0,B.P1)(nu,(e=>{var t;return null==e||null===(t=e.dropOffType)||void 0===t?void 0:t.pickUpTimeShown})),e=>Ld(e).returnShippingOption),Ju=(0,B.P1)(Nu,(e=>e.selectedCourierPickUpDate)),Qu=(0,B.P1)(Nu,(e=>e.selectedCourierPickUpTime)),$u=e=>Ld(e).courierPickupDates,em=(0,B.P1)(Ad,(e=>{var t;return null==e||null===(t=e.shipment)||void 0===t?void 0:t.digitalLabelTypes})),tm=(0,B.P1)(Ed,(e=>e.selectLabelType)),im=(0,B.P1)(tm,(e=>e.selectedLabelType)),nm=(0,B.P1)(tm,(e=>e.isSubmitEnabled)),sm=e=>Ld(e).ui.harassmentWarning.wasModalOpen,rm=e=>Ld(e).ui.harassmentWarning.scoredMessage,am=e=>Ld(e).ui.harassmentWarning.scoredHarassmentMessageCorrelationId,om=e=>Ld(e).ui.isEmailSharingModalVisible,lm=e=>Ld(e).shippingInstructions,cm=(0,B.P1)(Md,(e=>null==e?void 0:e.isItemVerified)),dm=(0,B.P1)(Ad,(e=>null==e?void 0:e.offlineVerification)),um=(0,B.P1)(Ad,(e=>null==e?void 0:e.id)),mm=e=>Ld(e).ui.isFirstTimeListerEducationModalVisible;var pm=i(68284);const gm=e=>e[od],hm=e=>gm(e).stats,xm=e=>gm(e).requestState,fm=()=>{const e=(0,p.I0)(),t=(0,p.v9)(hm),i=(0,p.v9)(xm),n=(0,p.v9)(X),s=(0,m.useCallback)((t=>{e("errors"in t?dd.getUserStatsFailure():dd.getUserStatsSuccess({stats:t.stats}))}),[e]),r=(0,m.useCallback)((()=>{n&&(e(dd.getUserStatsRequest()),(0,Fe.X_6)(n).then(s))}),[e,n,s]);return(0,m.useEffect)((()=>{t||i===Ne.Idle&&r()}),[r,i,t]),{userStats:t,fetchUserStats:r}},ym=(0,m.createContext)({uiState:Ne.Idle,controlConversations:[],conversations:[],isEndReached:!1,perPage:20,currentPage:1,updateListConversationTitle:v.noop,updateConversation:v.noop,markAsRead:v.noop,setCurrentPage:v.noop}),vm=e=>({currentPage:e.current_page,totalPages:e.total_pages,totalEntries:e.total_entries,perPage:e.per_page,time:e.time});var _m=i(77410);const bm={promoBoxCardStore:(0,_m.g)(null),inboxMessageCardStore:(0,_m.g)(null),inboxNotificationCardStore:(0,_m.g)(null),slideUpInAppMessageStore:(0,_m.g)(null),modalInAppMessageStore:(0,_m.g)(null),fullScreenInAppMessageStore:(0,_m.g)(null)},jm={...bm,promoBoxCardStore:(0,_m.g)([]),inboxMessageCardStore:(0,_m.g)([]),inboxNotificationCardStore:(0,_m.g)([])},Sm=()=>Promise.resolve(!1),Zm={logCardImpression:Sm,logCardClick:Sm,logCardDismissal:Sm,...bm},Im=(0,m.createContext)(Zm),Cm=function(){const{inboxMessageCardStore:e}=(0,m.useContext)(Im),t=(0,m.useSyncExternalStore)(e.subscribe,(()=>e.state),(()=>null)),[i,n]=(0,m.useMemo)((()=>t?(0,v.partition)(t,(e=>"control"===e.extras.variant)):[void 0,void 0]),[t]);return{inboxMessageCards:n,inboxControlMessageCards:i}},km=e=>{var t;let{children:i}=e;const{relativeUrl:n,searchParams:s}=xc(),r=Number(s.per_page),a=ed.includes(r)?r:20,o=(0,p.I0)(),l=(0,p.v9)(X),c=(null===(t=fm().userStats)||void 0===t?void 0:t.unreadMsgCount)||0,d=(0,p.v9)(Rd),u=(0,p.v9)(Dd),[g,h]=(0,m.useState)(Number(s.page)||1),x=(0,m.useMemo)((()=>!d&&u.uiState===Ne.Failure&&u.status===pm.o.NotFound),[d,u]),{uiState:f,controlConversations:y,conversations:_,pagination:b,isEndReached:j,setConversations:S,resetConversations:Z,websocketUserId:I}=(e=>{let{perPage:t,currentPage:i,setCurrentPage:n=v.noop}=e;const[s,r]=(0,m.useState)(Ne.Pending),[a,o]=(0,m.useState)([]),[l,c]=(0,m.useState)(),[d,u]=(0,m.useState)(),p=(0,m.useRef)(!1),{inboxMessageCards:g,inboxControlMessageCards:h}=Cm(),x=(_=s,b=void 0!==g,j=!!a.length,_!==Ne.Success?j&&b&&_===Ne.Pending?Ne.Success:_:b?Ne.Success:Ne.Pending),f=(e=>[...e].sort(((e,t)=>Uc(t)-Uc(e))))(x===Ne.Success?[...a,...null!=g?g:[]]:[]).slice(0,t*i),y=(0,m.useCallback)((()=>{o([]),c(void 0),n(1)}),[n]);var _,b,j;return(0,m.useEffect)((()=>{var e;p.current=!!l&&f.length===l.totalEntries+(null!==(e=null==g?void 0:g.length)&&void 0!==e?e:0)})),(0,m.useEffect)((()=>{p.current||(async()=>{r(Ne.Pending);const e=await(0,Fe.ltQ)({perPage:t,currentPage:i});"errors"in e?r(Ne.Failure):(o((t=>((e,t)=>{const i=e.map((e=>e.id)),n=t.filter((e=>!i.includes(e.id)));return e.concat(n)})(t,e.conversations))),c(vm(e.pagination)),r(Ne.Success),u(e.websocket_user_id))})()}),[t,i]),{uiState:x,conversations:f,controlConversations:null!=h?h:[],pagination:l,isEndReached:p.current,setConversations:o,resetConversations:y,websocketUserId:d}})({perPage:a,currentPage:g,setCurrentPage:h}),C=(0,m.useCallback)((e=>{S((t=>t.concat([e])))}),[S]),k=(0,m.useCallback)((e=>{S((t=>t.map((t=>String(t.id)===String(e.id)?e:t))))}),[S]),w=(0,m.useCallback)((()=>{o(dd.setUnreadMsgCount({count:c+1}))}),[o,c]),P=(0,m.useCallback)((()=>{o(dd.setUnreadMsgCount({count:Math.max(c-1,0)}))}),[o,c]),T=(0,m.useCallback)((e=>_.some((t=>{let{id:i}=t;return String(i)===e}))),[_]),F=(0,m.useCallback)((async e=>{let{id:t,title:i}=e;if(!l)return;const s=await(0,Fe.Ci8)({conversationId:t});if("errors"in s)return;const r=Bc(n),a=s.conversation;i&&(a.description=i),a.unread&&(String(a.id)===String(r)?a.unread=!1:w()),a.updated_at||(a.updated_at=new Date(Date.now()).toISOString()),T(String(t))?k(a):C(a)}),[C,T,w,n,k,l]),N=(0,m.useCallback)((e=>{let{id:t,title:i,updated_at:n=""}=e;T(String(t))?S((e=>e.map((e=>String(e.id)!==String(t)?e:{...e,subtitle:i,description:i,updated_at:n||e.updated_at})))):F({id:t,title:i})}),[T,S,F]),L=(0,m.useCallback)((async e=>{let{id:t}=e;l&&(await(0,Fe.oWC)({conversationId:t})).code===pm.Q.Ok&&S((e=>e.map((e=>String(e.id)===String(t)&&e.unread?(P(),{...e,is_read_by_current_user:!0,unread:!1}):e))))}),[P,S,l]),E=(0,m.useMemo)((()=>({uiState:f,controlConversations:y,conversations:[...new Map(_.map((e=>[e.id,e]))).values()],pagination:b,isEndReached:j,perPage:a,currentPage:g,updateListConversationTitle:N,updateConversation:F,markAsRead:L,setCurrentPage:h,websocketUserId:I})),[f,y,_,b,j,a,g,N,F,L,h,I]);return(0,m.useEffect)((()=>{x&&Z()}),[x,Z]),(0,z.jsx)(ym.Provider,{value:E,children:i})},wm=e=>{let{children:t}=e;const i=U(),{inboxMessageCards:n}=Cm(),{conversations:s}=(0,m.useContext)(ym),r=(0,Nt.bS)(Oc),a=(0,Nt.bS)(Rc(":id")),o=(0,Nt.bS)(Ec),l=(0,m.useCallback)((e=>{document.title!==e&&(document.title=e)}),[]);return(0,m.useEffect)((()=>{r&&l(i("inbox.new_message.header"))}),[r,l,i]),(0,m.useEffect)((()=>{o&&l(i("inbox.title"))}),[o,l,i]),(0,m.useEffect)((()=>{if(r&&a)return;const e=null==a?void 0:a.params.id,t=s.find((t=>e===String(t.id))),i=null==n?void 0:n.find((t=>t.id===e));t&&!Mc(t)&&"description"in t&&l(t.description),i&&l(i.title)}),[r,a,n,s,l]),(0,z.jsx)(z.Fragment,{children:t})};var Pm=i(71410),zm=i(46216),Tm=i(65946);class Fm extends m.Component{render(){const{breakpoints:e,breakpoint:t}=this.props;return e[t]?this.props.children:null}}const Nm=F(Fm);let Lm;!function(e){e.Escape="Escape",e.Tab="Tab",e.Enter="Enter",e.ArrowDown="ArrowDown",e.ArrowUp="ArrowUp",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.Backspace="Backspace",e.Spacebar=" "}(Lm||(Lm={}));const Em={conversation:void 0,tracking:void 0,shipmentInstructions:void 0,shippingInstructions:void 0,recipientId:null,digitalLabel:void 0,activeModal:td.None,ui:{isSidebarOpen:!1,sendMessage:{error:null,uiState:Ne.Idle},enterTrackingCode:{error:null,uiState:Ne.Idle},markAsShipped:{error:null,uiState:Ne.Idle},createOffer:{error:null,uiState:Ne.Idle},getTransaction:{error:null,uiState:Ne.Idle},acceptOffer:{error:null,uiState:Ne.Idle},rejectOffer:{error:null,uiState:Ne.Idle},offerRequestOptions:{error:null,uiState:Ne.Idle},getConversation:{error:null,uiState:Ne.Idle,status:null},selectDropOffType:{selectedDropOffTypeId:null,isSubmitEnabled:!1,uiState:Ne.Idle,error:null},harassmentWarning:{isModalOpen:!1,wasModalOpen:!1,scoredMessage:null,scoredHarassmentMessageCorrelationId:null},getCourierPickUpDates:{selectedCourierPickUpDate:void 0,selectedCourierPickUpTime:void 0,error:null,uiState:Ne.Idle},selectLabelType:{selectedLabelType:null,isSubmitEnabled:!1},selectedShippingDate:null,isEmailSharingModalVisible:!1,shippingInstructions:{error:null,uiState:Ne.Idle},trackingJourneySummary:{error:null,uiState:Ne.Idle},isFirstTimeListerEducationModalVisible:!1},transaction:null},Om=(e,t)=>{const{error:i}=t.payload;e.ui.sendMessage.error=i,e.ui.sendMessage.uiState=Ne.Failure},Rm=(0,ad.oM)({name:Fd,initialState:Em,reducers:{getConversationSuccess:(e,t)=>{const{conversation:i,status:n}=t.payload;e.conversation=i,e.ui.getConversation.uiState=Ne.Success,e.ui.getConversation.status=n},getConversationUiFailure:(e,t)=>{const{error:i,status:n}=t.payload;e.conversation=void 0,e.ui.getConversation.error=i,e.ui.getConversation.uiState=Ne.Failure,e.ui.getConversation.status=n},getConversationUiPending:(e,t)=>{e.ui.getConversation.uiState=Ne.Pending,e.ui.getConversation.status=null,t.payload.fromPostReply||(e.conversation=void 0)},clearConversation:e=>{e.conversation=void 0,e.ui.getConversation.status=null,e.ui.getConversation.uiState=Ne.Idle,e.ui.getConversation.error=null},setConversation:(e,t)=>{const{conversation:i}=t.payload;e.conversation=i,e.ui.getConversation.status=pm.o.Ok,e.ui.getConversation.uiState=Ne.Success,e.ui.getConversation.error=null},getComplaintSuccess:(e,t)=>{e.conversation&&(e.conversation.complaintResolution=t.payload)},setIsSidebarOpen:(e,t)=>{e.ui.isSidebarOpen=t.payload.isOpen},getTrackingJourneySummarySuccess:(e,t)=>{e.ui.trackingJourneySummary.uiState=Ne.Success,e.ui.enterTrackingCode.error=null,e.tracking=t.payload},getTrackingJourneySummaryRequest:e=>{e.ui.trackingJourneySummary.uiState=Ne.Pending},getTrackingJourneySummaryFailure:(e,t)=>{const{error:i}=t.payload;e.ui.trackingJourneySummary.uiState=Ne.Failure,e.ui.trackingJourneySummary.error=i},getShipmentInstructionsSuccess:(e,t)=>{e.shipmentInstructions=t.payload},postReplyRequest:e=>{e.ui.sendMessage.uiState=Ne.Pending},postReplyFailure:Om,postReplySuccess:e=>{e.ui.sendMessage.uiState=Ne.Success,e.ui.sendMessage.error=null},setRecipientId:(e,t)=>{e.recipientId=t.payload.recipientId},createConversationThreadRequest:e=>{e.ui.sendMessage.uiState=Ne.Pending},createConversationThreadFailure:Om,enterTrackingCodeRequest:e=>{e.ui.enterTrackingCode.uiState=Ne.Pending},enterTrackingCodeSuccess:e=>{e.ui.enterTrackingCode.uiState=Ne.Success,e.ui.enterTrackingCode.error=null},enterTrackingCodeUiFailure:(e,t)=>{const{error:i}=t.payload;e.ui.enterTrackingCode.uiState=Ne.Failure,e.ui.enterTrackingCode.error=i},deleteEnterTrackingCodeError:e=>{e.ui.enterTrackingCode.error=null},markAsShippedRequest:e=>{e.ui.markAsShipped.uiState=Ne.Pending},markAsShippedSuccess:e=>{e.ui.markAsShipped.uiState=Ne.Success,e.ui.markAsShipped.error=null},markAsShippedUiFailure:(e,t)=>{const{error:i}=t.payload;e.ui.markAsShipped.uiState=Ne.Failure,e.ui.markAsShipped.error=i},setSelectedDropOffTypeId:(e,t)=>{e.ui.selectDropOffType.selectedDropOffTypeId=t.payload.dropOffTypeId,e.ui.selectDropOffType.isSubmitEnabled=!0},clearDropOffTypeSelection:e=>{e.ui.selectDropOffType.isSubmitEnabled=!1,e.ui.selectDropOffType.selectedDropOffTypeId=null},setSelectedDropOffTypeMethodRequest:e=>{e.ui.selectDropOffType.uiState=Ne.Pending},setSelectedDropOffTypeMethodFailure:(e,t)=>{const{error:i}=t.payload;e.ui.selectDropOffType.uiState=Ne.Failure,e.ui.selectDropOffType.error=i},setSelectedDropOffTypeMethodSuccess:e=>{e.ui.selectDropOffType.uiState=Ne.Success,e.ui.selectDropOffType.error=null},deleteDropOffTypeSelectionError:e=>{e.ui.selectDropOffType.error=null},getDigitalLabelSuccess:(e,t)=>{e.digitalLabel=t.payload},createOfferRequest:e=>{e.ui.createOffer.uiState=Ne.Pending},createOfferSuccess:e=>{e.ui.createOffer.uiState=Ne.Success,e.ui.createOffer.error=null},createOfferFailure:(e,t)=>{const{error:i}=t.payload;e.ui.createOffer.uiState=Ne.Failure,e.ui.createOffer.error=i},acceptOfferRequest:e=>{e.ui.acceptOffer.uiState=Ne.Pending},acceptOfferSuccess:e=>{e.ui.acceptOffer.uiState=Ne.Success,e.ui.acceptOffer.error=null},acceptOfferFailure:(e,t)=>{const{error:i}=t.payload;e.ui.acceptOffer.uiState=Ne.Failure,e.ui.acceptOffer.error=i},rejectOfferRequest:e=>{e.ui.rejectOffer.uiState=Ne.Pending},rejectOfferSuccess:e=>{e.ui.rejectOffer.uiState=Ne.Success,e.ui.rejectOffer.error=null},rejectOfferFailure:(e,t)=>{const{error:i}=t.payload;e.ui.rejectOffer.uiState=Ne.Failure,e.ui.rejectOffer.error=i},setMessageDeleted:(e,t)=>{var i;const{messageId:n,photoId:s}=t.payload,r=null===(i=e.conversation)||void 0===i?void 0:i.messages.find((e=>{let{message:t}=e;return t.id===n})),a=null==r?void 0:r.message;if(a)if(s){const e=a.photos.find((e=>{let{id:t}=e;return t===s}));if(!e)return;e.url="",e.isHidden=!0}else a.isHidden=!0,a.content=""},setMessageLiked:(e,t)=>{var i;const{messageId:n,photoId:s,reaction:r}=t.payload,a=null===(i=e.conversation)||void 0===i?void 0:i.messages.find((e=>{let{message:t}=e;return t&&"id"in t&&t.id===n})),o=null==a?void 0:a.message;if(o)if(s){const e=o.photos.find((e=>{let{id:t}=e;return t===s}));if(!e)return;e.reaction={id:r.id,type:r.type}}else o.reaction={id:r.id,type:r.type}},setMessageUnliked:(e,t)=>{var i;const{messageId:n,photoId:s}=t.payload,r=null===(i=e.conversation)||void 0===i?void 0:i.messages.find((e=>{let{message:t}=e;return t&&"id"in t&&t.id===n})),a=null==r?void 0:r.message;if(a)if(s){const e=a.photos.find((e=>{let{id:t}=e;return t===s}));if(!e)return;e.reaction=null}else a.reaction=null},setActiveGenerateLabelModal:(e,t)=>{const{modal:i}=t.payload;e.activeModal=i},setHarassmentMessage:(e,t)=>{const{messageText:i,correlationId:n}=t.payload;e.ui.sendMessage.uiState=Ne.Failure,e.ui.harassmentWarning.isModalOpen=!0,e.ui.harassmentWarning.wasModalOpen=!0,e.ui.harassmentWarning.scoredMessage=i,e.ui.harassmentWarning.scoredHarassmentMessageCorrelationId=n},clearHarassmentMessage:e=>{e.ui.harassmentWarning.isModalOpen=!1,e.ui.harassmentWarning.wasModalOpen=!1,e.ui.harassmentWarning.scoredMessage=null},setHarassmentWarningModalClosed:e=>{e.ui.harassmentWarning.isModalOpen=!1},setEmailSharingModalVisible:(e,t)=>{const{isVisible:i}=t.payload;e.ui.isEmailSharingModalVisible=i},getCourierPickUpDatesRequest:e=>{e.ui.getCourierPickUpDates.uiState=Ne.Pending},getCourierPickUpDatesFailure:(e,t)=>{const{error:i}=t.payload;e.ui.getCourierPickUpDates.uiState=Ne.Failure,e.ui.getCourierPickUpDates.error=i},getCourierPickUpDatesSuccess:(e,t)=>{var i;const n=t.payload.find((e=>e.isAvailable));e.ui.getCourierPickUpDates.uiState=Ne.Success,e.ui.getCourierPickUpDates.error=null,e.courierPickupDates=t.payload,e.ui.getCourierPickUpDates.selectedCourierPickUpDate=n,e.ui.getCourierPickUpDates.selectedCourierPickUpTime=null==n||null===(i=n.times)||void 0===i?void 0:i.find((e=>e.isAvailable))},setSelectedCourierPickUpDate:(e,t)=>{var i;e.ui.getCourierPickUpDates.selectedCourierPickUpDate=t.payload.courierPickUpDate,e.ui.getCourierPickUpDates.selectedCourierPickUpTime=null===(i=t.payload.courierPickUpDate.times)||void 0===i?void 0:i.find((e=>e.isAvailable))},setSelectedCourierPickUpTime:(e,t)=>{e.ui.getCourierPickUpDates.selectedCourierPickUpTime=t.payload.courierPickUpTime},confirmCourierPickUpDateSelection:(e,t)=>{e.shipmentInstructions&&(e.shipmentInstructions.selectedCourierPickUpDate=t.payload.courierPickUpDate,e.shipmentInstructions.selectedCourierPickUpTime=t.payload.courierPickUpTime)},clearCourierPickUpDatesSelection:(e,t)=>{var i;const n=t.payload.find((e=>e.isAvailable));e.ui.getCourierPickUpDates.selectedCourierPickUpDate=n,e.ui.getCourierPickUpDates.selectedCourierPickUpTime=null==n||null===(i=n.times)||void 0===i?void 0:i.find((e=>e.isAvailable)),e.shipmentInstructions&&(e.shipmentInstructions.selectedCourierPickUpDate=void 0,e.shipmentInstructions.selectedCourierPickUpTime=void 0)},setSelectedLabelType:(e,t)=>{e.ui.selectLabelType.selectedLabelType=t.payload.labelType,e.ui.selectLabelType.isSubmitEnabled=!0},clearDigitalLabelTypeSelection:e=>{e.ui.selectLabelType.isSubmitEnabled=!1,e.ui.selectLabelType.selectedLabelType=null},getOfferRequestOptionsRequest:e=>{e.ui.offerRequestOptions.uiState=Ne.Pending},getOfferRequestOptionsSuccess:(e,t)=>{e.offerRequestOptions=t.payload.offerRequestOptions,e.ui.offerRequestOptions.uiState=Ne.Success,e.ui.offerRequestOptions.error=null},getOfferRequestOptionsFailure:(e,t)=>{e.ui.offerRequestOptions.uiState=Ne.Failure,e.ui.offerRequestOptions.error=t.payload.error},createItemConversationThreadRequest:e=>{e.ui.getConversation.uiState=Ne.Pending},createItemConversationThreadSuccess:(e,t)=>{e.conversation=t.payload.conversation,e.ui.getConversation.uiState=Ne.Success},createItemConversationThreadFailure:(e,t)=>{e.ui.getConversation.uiState=Ne.Failure,e.ui.getConversation.error=t.payload.error},getReturnShipmentOptionSuccess:(e,t)=>{e.returnShippingOption=t.payload},setSelectedShippingDate:(e,t)=>{const{shippingDate:i}=t.payload;e.ui.selectedShippingDate=i},fetchTransactionRequest:e=>{e.ui.getTransaction.uiState=Ne.Pending},fetchTransactionRequestSuccess:(e,t)=>{const{transaction:i}=t.payload;e.transaction=i,e.ui.getTransaction.uiState=Ne.Success,e.ui.getTransaction.error=null},fetchTransactionRequestFailure:(e,t)=>{const{error:i}=t.payload;e.ui.getTransaction.uiState=Ne.Failure,e.ui.getTransaction.error=i},fetchShippingInstructionsRequest:e=>{e.ui.shippingInstructions.uiState=Ne.Pending},fetchShippingInstructionsRequestSuccess:(e,t)=>{const{shippingInstructions:i}=t.payload;e.shippingInstructions=i,e.ui.shippingInstructions.uiState=Ne.Success,e.ui.shippingInstructions.error=null},fetchShippingInstructionsRequestFailure:(e,t)=>{const{error:i}=t.payload;e.ui.shippingInstructions.uiState=Ne.Failure,e.ui.shippingInstructions.error=i},setFirstTimeListerEducationModalVisible:(e,t)=>{const{isVisible:i}=t.payload;e.ui.isFirstTimeListerEducationModalVisible=i}}}),{actions:Dm}=Rm,Am={[Fd]:Rm.reducer},Mm=(Rm.reducer,"dd_captcha_passed"),Um=e=>{(0,m.useEffect)((()=>(window.addEventListener(Mm,e),()=>{window.removeEventListener(Mm,e)})),[e])},Bm=()=>(0,ys.oZ)(window.location.search).homepage_session_id||void 0;let qm;!function(e){e.AddItemToBundle="add_item_to_bundle",e.BrowseCatalog="browse_catalog",e.CancelBundle="cancel_bundle",e.CancelInstallAppBanner="cancel_install_app_banner",e.ChangeEmail="change_email",e.ClosePage="close_page",e.CloseScreen="close_screen",e.ConfirmEverythingIsOk="confirm_everything_is_ok",e.ConfirmOrderReturn="confirm_order_return",e.StartBundle="start_bundle",e.CreateBundle="create_bundle",e.CreateCollection="create_collection",e.DeleteCollection="delete_collection",e.EditCollection="edit_collection",e.EditPhoto="edit_photo",e.Help="help",e.IconsExplanation="icons_explanation",e.IHaveAnIssue="i_have_an_issue",e.InstallAppBanner="install_app_banner",e.MarkAsReceived="mark_as_received",e.NeverShowTranslationBanner="never_show_translation_banner",e.NpsSurveyDismiss="nps_survey_dismiss",e.NpsSurveySend="nps_survey_send",e.OpenTrackingPage="open_tracking_page",e.PersonalizationButtonAfterFeed="personalization_button_after_feed",e.PushUpItem="push_up_item",e.PromoteCloset="promote_closet",e.RecentSearchOpen="recent_search_open",e.RemoveItemFromBundle="remove_item_from_bundle",e.RemoveSearch="remove_search",e.RequestReturn="request_to_return",e.ResolveComplaint="confirm_resolve_this_issue",e.SaveSearch="save_search",e.SavedSearchOpen="saved_search_open",e.SearchBar="search_bar",e.SearchBarType="search_bar_type",e.SeeWholeClosetCta="see_whole_closet_cta",e.ShowItemPerformance="show_item_performance",e.SubmitRearrange="submit_rearrange",e.SubmitKybForm="submit_kyb",e.TrackingInformationLink="tracking_information_link",e.TrackParcel="track_parcel",e.TrackReturnParcel="track_return_parcel",e.TrackShipmentView="track_shipment_view",e.TranslateDescription="translate_description",e.TranslateFeedback="translate_feedback",e.TranslateMessage="translate_message",e.UploadItem="upload_item",e.UploadMoreAccept="upload_more_accept",e.UploadMoreCancel="upload_more_cancel",e.UploadPackageSelect="upload_package_select",e.ViewMorePromotedUsers="view_more_promoted_users",e.ViewComplaint="view_complaint",e.ViewDeliveryInstructions="view_delivery_instructions",e.ViewIssueDetails="view_issue_details",e.DownloadShippingLabel="download_shipping_label",e.CheckoutPayButton="pay",e.AddNewCardButton="add_new_card",e.AddNewCardFromPaymentOptions="add_new_card_from_payment_options",e.ConfirmComplaintResolved="confirm_complaint_resolved",e.RefuseComplaintResolved="refuse_complaint_resolved",e.PopularItemsButton="all_popular_items_button",e.PopularItemsBlock="all_popular_items_block",e.CancelLeavingModal="cancel_leaving_modal",e.ShowLeavingModal="show_leaving_modal",e.ProceedFromLeavingModal="proceed_from_leaving_modal",e.Favourite="favorite",e.LearnMore="learn_more",e.KycSaveAddress="save_address",e.KycContinueWithSelectedDocument="continue_with_selected_document",e.KycContinueWithSelectedSupportingDocument="continue_with_selected_supporting_document",e.KycUploadPhotoDone="upload_photo_done",e.KycDeleteDocument="delete_document",e.KycSubmitIdentityConfirmation="submit_identity_confirmation",e.KycDiscardChanges="discard_changes",e.KycTryAgain="try_again",e.KycContactSupport="contact_support",e.KycConfirmIdentity="confirm_identity",e.GetShippingLabel="get_shipping_label",e.Confirm="confirm",e.Notification="notification",e.DonationsSetup="set_up_donations",e.FundraiserSetup="set_up_donations",e.DonationsStart="start_donations",e.FundraiserStart="start_donations",e.DonationsManage="manage_donations",e.FundraiserManage="manage_donations",e.DonationsUpdate="save_donations_changes",e.FundraiserUpdate="save_donations_changes",e.DonationsStop="stop_donations",e.FundraiserStop="stop_donations",e.DonationsLearnMore="learn_about_donations_from_donations_overview",e.FundraiserLearnMore="learn_about_donations_from_donations_overview",e.DonationsAboutUserProfile="learn_about_donations_from_wardrobe",e.DonationsAboutUserInfo="learn_about_donations_from_user_about_section",e.RecentlyFavouritedItemsButton="all_recently_favorited_items_button",e.RecentlyFavouritedItemsBlock="all_recently_favorited_items_block",e.Hyperlink="hyperlink",e.DropOffPointsLink="drop_off_points_link",e.MergeFavoriteItemListBanner="merge_favorite_item_list_banner",e.MergeCatalogBanner="merge_catalog_banner",e.MergeReviewsBanner="merge_reviews_banner",e.MergeBalanceBanner="merge_balance_banner",e.MergeFollowersBanner="merge_followers_banner",e.MergeFollowingBanner="merge_following_banner",e.MergeAnnouncementAction="merge_announcement_cta",e.MergeAnnouncementLink="merge_announcement_link",e.MergeSelectFaq="merge_select_faq",e.RecommendedItemListBanner="recommended_item_list_banner",e.ItemsBasedOnRecentPurchasesButton="all_items_based_on_recent_purchases_button",e.ItemsBasedOnRecentPurchasesBlock="all_items_based_on_recent_purchases_block",e.SearchThisArea="search_this_area",e.CloseListerActivationBanner="close_lister_activation_banner",e.UploadAfterListerActivationBanner="upload_after_lister_activation_banner",e.SaveBillingAddress="save_address",e.GoToMyBalance="go_to_my_balance",e.SelectDropoffType="select_dropoff_type",e.SubmitPaymentMethod="submit_payment_method",e.WebPhotosLearnMore="web_photos_learn_more",e.WebPhotosCloseModal="web_photos_ok_close_modal",e.LoginWithFacebook="login_with_facebook",e.LoginWithGoogle="login_with_google",e.LoginWithApple="login_with_apple",e.Login="login",e.UseThisCard="use_this_card",e.SaveTheCard="save_the_card",e.DontSaveTheCard="dont_save_the_card",e.CopyTrackingNumber="copy_tracking_number",e.SaveAddress="save_address",e.AddPhoto="add_photo",e.Submit="submit",e.ServiceFeeInfo="service_fee_info",e.ShippingMethodSelection="shipping_method_selection",e.ShippingMethodEducation="shipping_method_education",e.SelectShippingMethod="select_shipping_method",e.ChooseParcelSize="choose_parcel_size",e.SelectParcelSize="select_parcel_size",e.BusinessRegistrationBack="business_registration_back",e.CompleteRegistration="complete_registration",e.ConvertToBusiness="convert_to_business",e.OpenDigitalLabel="open_digital_label",e.DownloadDigitalLabel="download_digital_label",e.DownloadIosApp="download_ios_app",e.DownloadAndroidApp="download_android_app",e.DiscardChanges="discard_changes",e.PricingDetails="pricing_details",e.ContactDetailsContinue="contact_details_continue",e.ContactDetailsDelete="delete_contact_details",e.ContactDetailsDeleteConfirm="confirm_phone_number_deletion",e.MuteVideo="mute_video",e.UnmuteVideo="unmute_video",e.MergeMessageListBanner="merge_message_list_banner",e.SellerAddContactDetails="seller_add_contact_details",e.SavePhoneNumber="save_phone_number",e.MergeMissingInfoContinue="merge_missing_info_continue",e.ZipCodeForTaxInfoBanner="zip_code_for_tax_info_banner",e.CrmMessageLink="crm_message_link",e.FeedLoadMoreButton="feed_load_more_button",e.CrmInAppMessageDismiss="crm_in_app_message_dismiss",e.SalesTaxInfo="sales_tax_info",e.BundlesPolicyLink="bundles_policy_help_centre_link",e.Skip="skip",e.Save="save",e.Ok="ok",e.ImpressionsTab="impressions_tab",e.ProfileVisitsTab="profile_visits_tab",e.ItemVisitsTab="item_visits_tab",e.InsightsHelp="discovery_help",e.ActionsHelp="actions_help",e.FreeReturnLabelLearnMore="free_return_label_learn_more",e.ReviewClosetPromotionOrder="review_closet_promo_order",e.ConfirmClosetPromotionOrder="pay_closet_promo_order",e.ClosetPromotionPreCheckoutHelp="how_its_working",e.ClosetPromotionReviewHelp="how_it_works",e.CatalogTab="catalog_tab",e.RefundPolicyLink="refund_policy_link",e.PushUpBundle="push_up_bundle",e.MarkTransactionAsShipped="mark_transaction_as_shipped",e.SelectLabelType="select_label_type",e.ConfirmMarkTransactionAsShipped="confirm_mark_transaction_as_shipped",e.ReviewPushupOrder="review_push_up_order",e.MultiplePushUp="multiple_push_up",e.PushUpDurationChange="push_up_duration_change",e.Cancel="cancel",e.ConfirmDirectDonationOrder="pay_direct_donation_order",e.ConfirmItemPushUp="confirm_item_push_up",e.ConfirmMultipleItemsPushUp="confirm_multiple_items_push_up",e.MakeBuyerSideOffer="make_buyer_side_offer",e.SelectSuggestedOfferDiscount="select_suggested_discount",e.PushUpLearnMode="push_up_learn_more",e.Logo="logo",e.Done="done",e.SellingTips="improvement_tips",e.PhotoTips="photo_tips",e.PriceTips="price_tips",e.DescriptionTips="description_tips",e.UpdateItem="update_listing",e.InteractionRate="engagement_metric",e.ReturnOrder="return_order",e.GiveFeedback="give_feedback",e.SubmitSuccess="submit_success",e.ConfirmSubmit="confirm_submit",e.ApplyFilters="apply_filters",e.ClearFilters="clear_filters",e.CancelFilters="cancel_filters",e.Drag="drag",e.ReuploadItem="reupload_item",e.PickPackageSize="pick_package_size",e.SubmitPackageSize="submit_package_size",e.SelectFilters="select_filters",e.SustainabilityPageLink="sustainability_page_link",e.EnterDonationsFromWebMenu="enter_donations_from_web_menu",e.EnterDonationFromSettings="enter_donations_from_settings",e.NavigationMenuToggle="navigation_menu_toggle",e.CatalogSearchResultsRanking="catalog_search_results_ranking",e.SessionsChangePassword="sessions_change_password",e.SessionsLogOut="sessions_log_out",e.ClosetPromotionHelp="spotlight_information",e.HelpCenterSearchResult="help_center_search_result",e.Verify="verify",e.DidntReceiveEmail="didnt_receive_email",e.PayWithBlikCode="pay_with_blik_code",e.Start="start",e.SeeWholeFeaturedCollectionCta="see_whole_fc_cta",e.OfflineVerificationCheckbox="check_authenticity",e.OfflineVerificationLearnMoreLink="how_authenticity_works",e.OfflineVerificationTrackedShippingLearnMoreLink="authenticity_tracked_shipping_learn_more",e.FilterSold="filter_sold",e.FilterDrafts="filter_drafts",e.FilterHidden="filter_hidden",e.FilterReserved="filter_reserved",e.FilterActive="filter_active",e.PhysicalAuthenticityBuyer="physical_auth_buyer",e.PhysicalAuthenticitySeller="physical_auth_seller",e.OfflineVerificationHowItWorks="physical_auth_how_it_works",e.OfflineVerificationLearnMore="physical_auth_learn_more",e.OfflineVerificationGotIt="physical_auth_got_it",e.ShippingDiscountDetails="shipping_discount_details",e.ManageItems="manage_items",e.SaveOrdering="save_ordering",e.VasGalleryHelp="vas_gallery_help",e.VasGalleryItem="vas_gallery_item",e.VasGalleryConfirmOrder="confirm_vas_gallery_order",e.PromoteItem="promote_item",e.Close="close",e.MultipleVasGallery="multiple_vas_gallery",e.ConfirmContactUs="confirm_contact_us",e.MessageReply="message_reply",e.SkipTerms="skip_terms",e.AcceptTerms="accept_terms",e.RedirectTerms="redirect_terms",e.SeeCompensationInformation="see_compensation_information",e.SeeDropoffPointsInformation="see_dropoff_points_information",e.CarrierPreferencesToggle="carrier_preferences_toggle",e.CloseCarrierDisableModal="close_carrier_disable_modal",e.SatisfactionSurveySend="satisfaction_survey_send",e.PromoteFeaturedCollection="promote_featured_collection",e.ActivateFeaturedCollection="activate_featured_collection",e.ReviewCollection="review_collection",e.AddItems="add_items",e.ProceedToCheckout="proceed_to_checkout",e.SaveCollection="save_collection",e.UpdateCollection="update_collection",e.PayFeaturedCollection="pay_featured_collection",e.ApplyChanges="apply_changes",e.AskSellerButton="write_message",e.CloseAd="close_ad",e.ClosetPromotionDynamicPricingInfo="dynamic_pricing_info",e.EditItem="edit_item",e.DeleteItem="delete_item",e.HideItem="hide_item",e.ExtraServicePendingPaymentTryAgain="try_again_payment_still_pending_modal",e.CarrierTermsAndConditions="carrier_terms_and_conditions",e.FeedbackAllReviewsFilter="all_reviews",e.FeedbackMemberReviewsFilter="member_reviews",e.FeedbackAutoReviewsFilter="automatic_reviews",e.ProcessingListingStatusInfo="processing_status_info_button",e.ProcessingListingStatusModalFaqLink="processing_status_modal_faq_link",e.CtaPromptContinue="cta_prompt_continue",e.CtaPromptImageContinue="cta_prompt_image_continue",e.WalletBalanceInfo="wallet_balance_info",e.PushUpLearnMore="push_up_learn_more",e.FollowedUserSeeAllItems="followed_user_see_all_items",e.FeedbackTab="feedback_tab",e.ProfileTab="profile_tab",e.AboutTab="about_tab",e.Followers="followers",e.Following="following",e.AskSeller="ask_seller",e.VasInfo="vas_info",e.AddressSearchBar="address_search_bar",e.DropOffPointsMapLink="drop_off_points_map_link",e.DropOffPointDetails="drop_off_point_details",e.TaxpayersCheckTaxRules="taxpayers_check_tax_rules",e.PriceInformation="price_information",e.SeeDropOffPoints="see_drop_off_points",e.TaxRuleItem="tax_rule_item",e.AddCollection="add_collection",e.ActivateFeaturedCollections="activate_featured_collections",e.ManageCollections="manage_collections",e.TaxpayersDac7Banner="taxpayers_dac7_banner",e.CtaRedirect="cta_redirect",e.DropOffPoint="drop_off_point",e.CvvFieldInfo="cvv_field_info",e.DragCollection="drag_collection",e.ShippingServiceType="shipping_service_type"}(qm||(qm={}));const Vm="bundles",Hm=(0,ad.oM)({name:Vm,initialState:{selectedIds:[],bundleSummary:null,instantBundleSummary:null,bundleTrackingId:null,isBundlingInProgress:!1},reducers:{startBundling:e=>{e.isBundlingInProgress=!0},resumeBundling:(e,t)=>{e.isBundlingInProgress=!0,e.bundleTrackingId=t.payload.bundleTrackingId},setSelectedItems:(e,t)=>{const{itemIds:i}=t.payload;e.selectedIds=i},setBundleTrackingId:(e,t)=>{e.bundleTrackingId=t.payload.bundleTrackingId},getBundleSummarySuccess:(e,t)=>{const{bundleSummary:i}=t.payload;e.bundleSummary=i},getInstantBundleSummarySuccess:(e,t)=>{const{instantBundleSummary:i}=t.payload;e.instantBundleSummary=i}}}),{actions:Gm}=Hm,Wm={[Vm]:Hm.reducer},Xm=(Hm.reducer,e=>e[Vm]),Ym=e=>Xm(e).selectedIds,Km=e=>Xm(e).bundleSummary,Jm=e=>Xm(e).instantBundleSummary,Qm=e=>Xm(e).bundleTrackingId,$m=e=>Xm(e).isBundlingInProgress,ep=hl(Ym,No),tp=e=>{let{url:t,screen:i,children:n,itemId:s=null}=e;const r=(0,p.I0)(),{track:a}=vi(),o=(0,p.v9)(Qm),l=(0,p.v9)($m);return(0,m.useEffect)((()=>{if(!l)return;a(Ri({screen:i,target:qm.StartBundle,targetDetails:JSON.stringify({bundle_id:o})}));const e=(0,ys.Iq)(t,{item_id:s,bundle_id:o,homepage_session_id:Bm()});(0,ls.ru)(e)}),[t,a,i,s,o,l]),n({onClick:()=>{r(Gm.startBundling())}})},ip=e=>{let{addMoreItemsUrl:t}=e;const i=U("conversation.composer");return t?(0,z.jsx)(tp,{url:t,screen:$t.MessageReply,children:e=>{let{onClick:t}=e;return(0,z.jsx)(ic.I,{inline:!0,theme:"muted",styling:ic.I.Styling.Flat,deprecatedIcon:(0,z.jsx)(ht.Z,{name:"plus-square",color:ht.Z.Color.GreyscaleLevel3}),testId:"add-more-items-button",aria:{"aria-label":i("a11y.actions.add_more_items")},onClick:t})}}):null};let np;!function(e){e.Images="image/*",e.Videos="video/*"}(np||(np={}));const sp=9437184,rp="".concat(9,"MB"),ap=e=>{let{storeImage:t,onError:i}=e;const n=U("conversation.composer"),s=(0,m.useRef)(null),r=async e=>{const s=new FormData;if(e.size>sp)return void(i&&i(n("errors.upload.file_size")));s.append("photo[type]","user_msg"),s.append("photo[file]",e);const r=await(0,Fe.CbZ)(s);"errors"in r||t(r)};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("input",{ref:s,onChange:e=>{const t=e.target.files;t&&Array.from(t).forEach(r)},hidden:!0,type:"file",accept:np.Images,multiple:!0}),(0,z.jsx)(ic.I,{inline:!0,styling:ic.I.Styling.Flat,theme:"muted",deprecatedIcon:(0,z.jsx)(ht.Z,{name:"camera",color:ht.Z.Color.GreyscaleLevel3}),onClick:()=>{var e;return null===(e=s.current)||void 0===e?void 0:e.click()},aria:{"aria-label":n("a11y.actions.upload")}})]})},op=e=>{let{isInputExpanded:t,isConversationUploadEnabled:i,isSellerCountdownActive:n,storeImage:s,onError:r}=e;const a=(0,p.v9)(Rd),o=()=>{if(null==a||!a.transaction)return null;const{id:e,seller:t}=a.transaction;return null!=t&&t.id?(0,ys.Iq)((0,Me.RR)(t.id.toString()),{transaction_id:e}):null},l=()=>{const e=y()("u-flexbox","u-line-height-none","u-align-items-flex-end","u-ui-padding-right-large");if(!a)return null;const{isBundleAvailable:t}=a,l=t&&!n;return(0,z.jsxs)("div",{className:e,children:[l&&(0,z.jsx)(ip,{addMoreItemsUrl:o()}),i&&(0,z.jsx)(ap,{storeImage:s,onError:r})]})};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Nm,{breakpoint:"phones",children:!t&&l()}),(0,z.jsx)(Nm,{breakpoint:"tabletsUp",children:l()})]})},lp=e=>{let{images:t,onImageRemove:i}=e;const n=e=>(0,z.jsx)("div",{className:"image-preview__image-remove",children:(0,z.jsx)(ic.I,{deprecatedIcon:(0,z.jsx)(ht.Z,{name:"x",color:ht.Z.Color.GreyscaleLevel3,size:ht.Z.Size.XSmall}),size:ic.I.Size.Small,inverse:!0,styling:ic.I.Styling.Filled,inline:!0,testId:"image-preview-remove-button",onClick:i(e)})});return(0,z.jsx)("div",{className:"image-preview",children:t.map(((e,i)=>(0,z.jsxs)(m.Fragment,{children:[(0,z.jsxs)("div",{className:"image-preview__image",children:[(0,z.jsx)(Kl.U,{src:e.full_size_url,styling:Kl.U.Styling.Rounded,size:Kl.U.Size.X2Large}),n(e)]}),t.length-1!==i&&(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical})]},e.id)))})};var cp=i(63590);const dp="faqEntryState",up=(0,ad.PH)("".concat(dp,"/fetchFaqEntryByIdRequest")),mp=(0,ad.PH)("".concat(dp,"/fetchFaqEntryByTypeRequest")),pp=e=>e[dp],gp=(e,t)=>pp(e).byId[Number(t)],hp=(e,t)=>pp(e).byType[t],xp=(e,t)=>{var i;return null===(i=gp(e,t))||void 0===i?void 0:i.entry},fp=(e,t)=>{var i;return null===(i=hp(e,t))||void 0===i?void 0:i.entry},yp=(e,t)=>{var i;return(null===(i=gp(e,t))||void 0===i?void 0:i.state)||Ne.Idle},vp=(e,t)=>{var i;return(null===(i=hp(e,t))||void 0===i?void 0:i.state)||Ne.Idle},_p=e=>{let{type:t,render:i,accessChannel:n}=e;const s=(0,p.I0)(),r=(0,p.v9)((e=>fp(e,t)));if((0,m.useEffect)((()=>{s(mp({type:t}))}),[t,s]),null==r||!r.url)return null;const a=n?(0,ys.Iq)(r.url,{access_channel:n}):r.url;return(0,z.jsx)(z.Fragment,{children:i(a,r.id)})};let bp,jp;!function(e){e.NoAccessToEmail="HOW-DO-I-CHANGE-OR-CONFIRM-MY-EMAIL",e.NoAccessToOldEmail="HOW_TO_CHANGE_EMAIL_WITHOUT_ACCESS_TO_OLD_EMAIL",e.SmsVerfication="SMS-VERIFICATION",e.PhoneVerification="PHONE-VERIFICATION",e.PhoneChange="PHONE-CHANGE",e.PendingBalance="WHAT-DOES-PENDING-PAYMENT-MEAN",e.PaymentFailed="PAYMENT-FAILED-TX",e.Donations="DONATION",e.KycVerificationProblems="KYC-VERIFICATION-PROBLEMS",e.PortalMerge="LT-MERGER-DAY-COMMS",e.MakingGoodPhoto="MAKING-A-GOOD-PHOTO",e.BusinessRow="B2C-ROW",e.InsufficientBalance="FMR-CONTACT",e.RequestDataExport="REQUEST-DATA-EXPORT",e.PushUp="HOW-DOES-BUMPS-WORK",e.ClosetPromotion="HOW-DOES-CLOSET-PROMO-WORK",e.CrossCurrency="CROSS-CURRENCY",e.SetCorrectPrice="HOW-TO-PRICE",e.WriteGoodItemDescription="HOW-TO-WRITE-A-GOOD-ITEM-DESCRIPTION",e.OfflineVerification="HAOV-ITEM-VERIFICATION-SELLING",e.SpamPhishing="SPAM_PHISHING",e.BlockingMember="HOW-DO-I-BLOCK-ANOTHER-MEMBER",e.VintedGuide="VINTED-GUIDE",e.HowToVerifyEmailCode="EMAIL-VERIFICATION",e.UploadingAnItem="UPLOADING-AN-ITEM",e.ShippingSeller="SHIPPING-SELLER",e.VintedWallet="VINTED-WALLET",e.TrackDelivery="TRACK-DELIVERY",e.IsItFreeToSell="IS-IT-FREE-TO-SELL",e.FindingAnItem="FINDING-AN-ITEM",e.BuyingStepByStep="BUYING-STEP-BY-STEP",e.ShippingBuyer="SHIPPING-BUYER",e.BuyerProtection="BUYER-PROTECTION",e.IhaiRefundPolicy="IHAI-REFUND-POLICY",e.HelpCenterRoot="ROOT",e.MembersFeedback="MEMBERS-FEEDBACK",e.AddPhoneNumber="PHONE-VERIFICATION-NOT-WORKING",e.LeavingFeedbackForBuyer="LEAVING-FEEDBACK-FOR-BUYER",e.CantLogin="CANT-LOG-IN",e.Collection="VAS-FEATURED-COLLECTION"}(bp||(bp={})),function(e){e[e.WrongSize=467]="WrongSize",e[e.DamagedItem=469]="DamagedItem",e[e.WrongItem=470]="WrongItem",e[e.WrongSizeReturn=1044]="WrongSizeReturn",e[e.DamagedItemReturn=1046]="DamagedItemReturn",e[e.WrongItemReturn=1047]="WrongItemReturn"}(jp||(jp={}));const Sp=e=>{let{onSendClick:t}=e;const i=(0,p.v9)(om),n=(0,p.I0)(),s=U("conversation.email_sharing_modal"),r=()=>{n(Dm.setEmailSharingModalVisible({isVisible:!1}))};return(0,z.jsx)(cp.Z,{show:i,testId:"email-sharing-modal",title:s("title"),body:(0,z.jsx)(xt.Z,{text:s("body",{learn_more_link:(0,z.jsx)(_p,{type:bp.SpamPhishing,render:e=>(0,z.jsx)("a",{href:e,target:"_blank",rel:"noreferrer",children:s("learn_more_link")})})}),html:!0}),actions:[{text:s("actions.edit"),callback:()=>{r()},style:ic.I.Styling.Filled,testId:"email-sharing-modal--edit-button"},{text:s("actions.send"),callback:()=>{t(),r()},testId:"email-sharing-modal--send-button"}]})},Zp=e=>{let{type:t,onPostReply:i}=e;const n=(0,p.I0)(),s=U("conversation.composer"),r=(0,p.v9)(X),a=(0,p.v9)(Rd),o=(0,p.v9)(Hd),l=(0,p.v9)(Ad),c=(0,p.v9)(eu),d=(0,p.v9)($d),u=(0,p.v9)(Iu),{track:g}=vi(),[x,f]=(0,m.useState)(null),[_,b]=(0,m.useState)(!1),[j,S]=(0,m.useState)(!1),[Z,I]=(0,m.useState)([]),[C,k]=(0,m.useState)([]),[w,P]=(0,m.useState)(null),[T,F]=(0,m.useState)(null);(0,m.useEffect)((()=>{d===Ne.Success&&(S(!1),f(null),I([]),k([]),P(null))}),[d]),(0,m.useEffect)((()=>{if(!T||!o)return;const e=()=>{g((e=>({event:"user.conversation_paste",extra:{conversation_id:e}}))(o))};return T.addEventListener("paste",e),()=>{T.removeEventListener("paste",e)}}),[o,T,g]);const N=t===Jc.StartConversation||Boolean(null==a?void 0:a.isReplyAllowed),L=e=>()=>{const t=C.filter((t=>t!==e));k(t)},E=e=>f(e.currentTarget.value),O=()=>b(!_),R=d===Ne.Pending||j,D=!r||R||(0,v.isEmpty)((0,v.trim)(null!=x?x:""))&&(0,v.isEmpty)(C),A=()=>{n(Dm.postReplyRequest({value:x,photoTempUuids:(0,v.isEmpty)(Z)&&(0,v.isEmpty)(C)?null:(0,v.isEmpty)(C)?Z:(0,v.compact)(C.map((e=>e.temp_uuid)))})),a&&x&&i&&i({id:a.id,title:x,updated_at:new Date(Date.now()).toISOString()})},M=()=>{t===Jc.StartConversation&&n(Dm.createConversationThreadRequest({recipientId:u,value:x,photoTempUuids:Z})),t===Jc.Reply&&A()},B=e=>{e.shiftKey||e.key!==Lm.Enter||(D?e.preventDefault():M())},q=e=>{k((t=>[...t,e])),P(null)},V=e=>P(e),H=()=>{const e=w||c;return e?(0,z.jsx)("div",{className:"u-ui-padding-top-regular",children:(0,z.jsx)(zm.Z,{text:e,theme:"warning"})}):null};Um((()=>{M()}));const G=()=>(0,v.isEmpty)(C)?null:(0,z.jsx)("div",{className:"u-ui-padding-top-regular",children:(0,z.jsx)(lp,{images:C,onImageRemove:L})}),W=()=>{var e;const i=wt(null==l||null===(e=l.seller)||void 0===e?void 0:e.closetCountdownEndDate);return(0,z.jsx)(op,{isInputExpanded:_,isSellerCountdownActive:i,storeImage:q,onError:V,isConversationUploadEnabled:t===Jc.Reply})},Y=()=>{const e=D?ht.Z.Color.GreyscaleLevel3:ht.Z.Color.Primary;let t;return t=D?{"aria-hidden":!0}:{"aria-label":s("a11y.send_message")},(0,z.jsx)(ic.I,{inline:!0,styling:ic.I.Styling.Flat,theme:"muted",deprecatedIcon:(0,z.jsx)(ht.Z,{name:"arrow-right",size:ht.Z.Size.Small,color:e}),onClick:M,disabled:D,aria:t})},K=()=>(0,z.jsx)("div",{className:"u-ui-padding-top-regular",children:(0,z.jsx)(Tm.N,{isMultiline:!0,name:"composerInput",placeholder:s("reply_placeholder"),value:x,disabled:R,onChange:E,onFocus:O,onBlur:O,suffix:Y(),onKeyDown:B,forwardedRef:F,testId:"composer"})});return N?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(Nm,{breakpoint:"phones",children:(()=>{const e=y()("u-flexbox","u-ui-padding-bottom-regular");return(0,z.jsxs)("div",{className:"u-ui-padding-horizontal-large",children:[H(),G(),(0,z.jsxs)("div",{className:e,children:[W(),(0,z.jsx)("div",{className:"u-fill-width",children:K()})]})]})})()}),(0,z.jsx)(Nm,{breakpoint:"tabletsUp",children:(()=>{const e=y()("u-flexbox","u-flex-direction-row","u-ui-padding-bottom-regular","u-ui-padding-horizontal-large"),t=y()("u-flexbox","u-flex-direction-column","u-justify-content-flex-end"),i=y()("u-flexbox","u-flex-direction-column","u-fill-width","u-min-width-none");return(0,z.jsxs)("div",{className:e,children:[(0,z.jsx)("div",{className:t,children:W()}),(0,z.jsxs)("div",{className:i,children:[H(),G(),K()]})]})})()}),(0,z.jsx)(Sp,{onSendClick:A})]}):null},Ip=function(){const e=(0,m.useRef)(!1),t=(0,m.useCallback)((()=>e.current),[]);return(0,m.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),t};class Cp extends m.Component{constructor(){super(...arguments),function(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(this,"renderChild",(e=>(0,z.jsx)("li",{className:"pile__element",children:e})))}render(){const{children:e}=this.props;return e?(0,z.jsx)("ul",{className:"pile",children:m.Children.map((0,v.compact)(e),this.renderChild)}):null}}const kp=Cp;function wp(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Pp extends m.Component{constructor(){super(...arguments),wp(this,"listenersAttached",!1),wp(this,"wrapperRef",(0,m.createRef)()),wp(this,"onMouseDown",(e=>{const{current:t}=this.wrapperRef,{isDisabled:i,onOutsideClick:n}=this.props;t&&!i&&(e.target instanceof Node&&t.contains(e.target)||n(e))}))}componentDidMount(){const{isDisabled:e}=this.props;e||(this.attachListener(),this.listenersAttached=!0)}componentDidUpdate(e){const{isDisabled:t}=this.props;e.isDisabled===t||this.listenersAttached||(this.attachListener(),this.listenersAttached=!0)}componentWillUnmount(){this.removeListener()}attachListener(){document.addEventListener("mousedown",this.onMouseDown)}removeListener(){document.removeEventListener("mousedown",this.onMouseDown)}render(){const{children:e,className:t}=this.props;return(0,z.jsx)("div",{ref:this.wrapperRef,className:t,children:e})}}wp(Pp,"defaultProps",{isDisabled:!1});const zp=Pp,Tp=(0,p.$j)((e=>({portal:Fs(e),flavour:Ls(e)})))((e=>{const{src:t,isSystem:i,portal:n,flavour:s}=e,r=(0,v.isEmpty)(t)?Ke():t,a=i?((e,t)=>{const i=e.replace("_sandbox",""),n=He.includes(i)?i:"default";return"".concat(Be.Fv,"/assets/no-photo/user-").concat(t,"/system-photo/").concat(n,".png")})(n,s):r;return(0,z.jsx)(Kl.U,{...e,src:a,alt:e.alt||""})}));function Fp(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Np extends m.Component{constructor(){super(...arguments),Fp(this,"state",{highlightedResultIndex:this.props.highlightedResultIndex}),Fp(this,"divRef",(0,m.createRef)()),Fp(this,"handleKeyNavigation",(e=>{const{itemCount:t,onSelect:i,onHighlightedResultChange:n}=this.props,{highlightedResultIndex:s}=this.state,{key:r}=e,a=t-1;if(t)switch(r){case Lm.ArrowDown:e.preventDefault(),this.setHighlightedSearchResult((null!=s?s:-1)<a,1,0,n);break;case Lm.ArrowUp:e.preventDefault(),this.setHighlightedSearchResult((null!=s?s:a+1)>0,-1,a,n);break;case Lm.Enter:if(null===s)break;e.preventDefault(),i&&i(s,e);break;default:this.resetHighlightedResult()}}))}focusResultsContainer(){const{current:e}=this.divRef;e&&e.focus()}setHighlightedSearchResult(e,t,i,n){e?this.setState((e=>({highlightedResultIndex:null===e.highlightedResultIndex?i:e.highlightedResultIndex+t})),(()=>null==n?void 0:n(this.state.highlightedResultIndex))):this.resetHighlightedResult()}resetHighlightedResult(){this.setState({highlightedResultIndex:null})}render(){const{isListeningToEvents:e}=this.props,{highlightedResultIndex:t}=this.state,i=this.props.children({highlightedResultIndex:t,focusResultsContainer:this.focusResultsContainer,handleKeyNavigation:this.handleKeyNavigation});return e?(0,z.jsx)("div",{ref:this.divRef,onKeyDown:this.handleKeyNavigation,tabIndex:0,"data-testid":"list-navigator-container",children:i}):i}}Fp(Np,"defaultProps",{highlightedResultIndex:null,isListeningToEvents:!1});const Lp=Np,Ep=e=>{let{users:t,selectedUserLogin:i="",onChange:n,onSave:s}=e;const r=U(),[a,o]=(0,m.useState)(!1),l=e=>()=>{o(!1),s(e)},c=e=>t.length?(0,z.jsxs)("div",{className:"inbox-page__recipent-list",children:[(0,z.jsx)(kp,{children:t.map(((t,i)=>((e,t)=>(0,z.jsx)("span",{"data-testid":t?"user-highlighted":"user",children:(0,z.jsx)(gt.Z,{title:e.login,clickable:!0,highlighted:t,onClick:l(e),prefix:(0,z.jsx)(Tp,{src:e.thumbnail,size:Kl.U.Size.Regular,styling:Kl.U.Styling.Circle})},e.id)},e.id))(t,e===i)))}),(0,z.jsx)(h.Z,{})]}):null,d=()=>{o(!0)},u=e=>t=>{o(!0),e(t)};return(0,z.jsx)(zp,{onOutsideClick:()=>{o(!1)},className:"u-fill-height u-flexbox u-flex-direction-column",children:(0,z.jsx)(Lp,{itemCount:t.length,onSelect:e=>{const i=t[e];o(!1),s(i)},children:e=>{let{highlightedResultIndex:t,handleKeyNavigation:s}=e;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Narrow,children:(0,z.jsx)("div",{className:"u-ui-padding-horizontal-regular","aria-label":r("inbox.new_message.placeholder"),children:(0,z.jsx)(Tm.N,{name:"new_recipient_select",placeholder:r("inbox.new_message.placeholder"),deprecatedIcon:(0,z.jsx)(ht.Z,{name:"search",size:ht.Z.Size.Small}),value:i,onFocus:d,onChange:n,onKeyDown:u(s)})})}),(0,z.jsx)(h.Z,{}),a&&c(t)]})}})})},Op=()=>{const e=(0,p.I0)(),t=Ip(),i=(0,p.v9)(Iu),[n,s]=(0,m.useState)([]),[r,a]=(0,m.useState)(""),[o,l]=(0,m.useState)(null),c=xc().searchParams,d=ql((e=>{t()&&a(e)}),350);return(0,m.useEffect)((()=>{if(i||(0,v.isEmpty)(c))return;const t=parseInt(c.receiver_id||"",10);Number.isNaN(t)||async function(t){const i=await(0,Fe.GAF)({id:t,localize:!0});"errors"in i||(e(Dm.setRecipientId({recipientId:t})),a(i.user.login))}(t)}),[i,c,e]),(0,m.useEffect)((()=>{!async function(){const e=await(0,Fe.RfJ)({perPage:10,searchText:r});"errors"in e||s(mt(e.users))}()}),[r]),(0,m.useEffect)((()=>{const e=null==n?void 0:n.find((e=>{let{id:t}=e;return i===t}));e&&l(e)}),[i,n]),(0,z.jsx)(Ep,{users:n,selectedUserLogin:null==o?void 0:o.login,onSave:function(t){t&&(e(Dm.setRecipientId({recipientId:t.id})),l(t))},onChange:function(e){let{target:t}=e;d(t.value)}})},Rp=()=>{const e=(0,Nt.s0)(),t=U("inbox"),i=(0,p.I0)(),n=E(),{conversations:s}=(0,m.useContext)(ym);return(0,m.useEffect)((()=>{i(Dm.clearConversation())}),[i]),(0,m.useEffect)((()=>{n.portables&&(0,ls.k3)()}),[n]),(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column u-fill-height",children:[(0,z.jsx)(Pm.Z,{body:t("new_message.header"),right:(0,z.jsx)(ic.I,{deprecatedIconName:"x",inverse:!0,inline:!0,onClick:function(){s[0]&&!n.portables?e(Rc(s[0].id)):e(Ec)},aria:{"aria-label":t("a11y.close")}})}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(Op,{}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,children:(0,z.jsx)(Zp,{type:Jc.StartConversation})})]})};var Dp=i(74068);const Ap=e=>{let{styling:t,size:i,testId:n,theme:s}=e;return(0,z.jsx)(gt.Z,{styling:t,theme:s,children:(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center","data-testid":n,children:(0,z.jsx)(Dp.Z,{size:i})})})};Ap.Styling=gt.Z.Styling,Ap.Size=Dp.Z.Size;const Mp=Ap,Up=e=>({level:e.level,title:e.title||void 0,body:e.body,screenName:e.screen_name,extraNotice:!!e.extra_notice});var Bp=i(80173);function qp(e){return(0,m.useMemo)((()=>{const t=(0,Bn.le)(e);if(!t)return(0,Bn.D$)(e,"1"),1;const i=Number(t)+1;return(0,Bn.D$)(e,"".concat(i)),i}),[e])}let Vp,Hp;!function(e){e.Info="info",e.Warning="warning",e.Success="success",e.Error="error",e.Danger="danger",e.Trust="trust"}(Vp||(Vp={})),function(e){e.Reviews="reviews",e.VASCheckout="vas_checkout",e.ItemViewOfflineAuthenticity="item_view_offline_auth_modal",e.TermsAndConditions="terms_and_conditions"}(Hp||(Hp={}));const Gp={[Vp.Info]:"info-circle-filled",[Vp.Warning]:"warning-circle-filled",[Vp.Danger]:"warning-circle-filled",[Vp.Success]:"check-circle-filled",[Vp.Error]:"cancel-circle-filled",[Vp.Trust]:"checkmark-shield"},Wp={[Vp.Info]:ht.Z.Color.Primary,[Vp.Warning]:ht.Z.Color.Expose,[Vp.Danger]:ht.Z.Color.Warning,[Vp.Success]:ht.Z.Color.Success,[Vp.Error]:ht.Z.Color.Warning,[Vp.Trust]:ht.Z.Color.Primary},Xp=e=>{let{screen:t,banner:i}=e;const n=qp("info_banner_extra_notice_".concat(t)),[s,r]=(0,m.useState)(1===n),a=E(),o=U(),l=i.title||o("info_banners.extra_notice.title");function c(){r(!1)}function d(){return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"u-text-center",children:(0,z.jsx)(ht.Z,{name:Gp[i.level],color:Wp[i.level],size:ht.Z.Size.XLarge})}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:i.body,html:!0})]})}return a.phones?(0,z.jsx)(Bp.Z,{isVisible:s,onClose:c,title:l,children:(0,z.jsx)(gt.Z,{children:d()})}):(0,z.jsxs)(cp.Z,{show:s,defaultCallback:c,closeOnOverlay:!0,children:[(0,z.jsx)(Pm.Z,{body:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Narrow,children:(0,z.jsx)(xt.Z,{text:l,type:xt.Z.Type.Title})}),right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,onClick:c,deprecatedIconName:"x",theme:"amplified",size:ic.I.Size.Small,inline:!0})}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,body:d()})]})},Yp=e=>{let{banner:t,onBannerClick:i,disabled:n=!1,theme:s}=e;return t?(0,z.jsx)(g.Z,{children:(0,z.jsx)(gt.Z,{disabled:n,onClick:i,prefix:(0,z.jsx)(ht.Z,{name:Gp[t.level],color:Wp[t.level]}),title:t.title,theme:s,body:(0,z.jsx)(xt.Z,{html:!(0,m.isValidElement)(t.body),text:t.body})})}):null},Kp=e=>{let{screen:t,params:i,disabled:n,linkTracking:s,render:r,onAnchorClick:a=v.noop}=e;const{track:o}=vi(),[l,c]=(0,m.useState)(),d=JSON.stringify(i);function u(e){a(e),s&&e.target instanceof HTMLAnchorElement&&o(Ri({screen:t,...s}))}return(0,m.useEffect)((()=>{!async function(){const e=await(0,Fe.xjL)({screen:t,params:d&&JSON.parse(d)});!("errors"in e)&&e.info_banner&&c(Up(e.info_banner))}()}),[d,t]),l?r?(0,z.jsx)("div",{onClick:u,children:r(l)}):(0,z.jsxs)("div",{className:"info-banner-container",children:[l.extraNotice&&(0,z.jsx)(Xp,{screen:t,banner:l}),(0,z.jsx)(Yp,{banner:l,disabled:n,onBannerClick:u})]}):null};var Jp=i(41933);const Qp=e=>{let{renderItems:t,onPageEnd:i,scrollAncestor:n,cursor:s,includeTopOffset:r}=e;const a=n||(St.X?"window":window);return(0,z.jsxs)(z.Fragment,{children:[t(),(0,z.jsx)(Jp.h,{bottomOffset:-600,scrollableAncestor:a,onEnter:i,topOffset:r?-9999:void 0},s)]})},$p=(0,ad.PH)("".concat(Fd,"/translateConversationNewRequest")),eg=(0,ad.PH)("".concat(Fd,"/getConversationRequest")),tg=(0,ad.PH)("".concat(Fd,"/getShipmentInstructionsRequest")),ig=(0,ad.PH)("".concat(Fd,"/getDigitalLabelRequest"));function ng(e){switch(e){case Le.Primary:return"#007782";case Le.Success:return"#28865a";case Le.Expose:return"#f9bb42";case Le.Warning:return"#d04555";case Le.GreyscaleLevel1:return"#171717";case Le.GreyscaleLevel2:return"#4d4d4d";case Le.GreyscaleLevel3:return"#757575";case Le.GreyscaleLevel4:return"#999";case Le.GreyscaleLevel5:return"#c9c9c9";case Le.GreyscaleLevel6:return"#f2f2f2";case Le.GreyscaleLevel7:return"#fff";case Le.Facebook:return"#3b5998";case Le.Google:return"#4285f4";case Le.Apple:return"#000000";default:return}}const sg=e=>e?"#449da9":"#007782",rg=e=>{let{conversation:t,onClick:i=v.noop}=e;const n=U("conversations.list"),s=(0,Nt.s0)(),r=(0,p.v9)(Rd),a=(0,p.I0)(),o=(0,p.v9)(X),l=t.id===(null==r?void 0:r.id),c=t.opposite_user,{id:d}=t;function u(e,t){const i=e-t;return i>0?(0,z.jsx)(Kl.U,{label:"+".concat(i),size:Kl.U.Size.Medium,styling:Kl.U.Styling.Rounded,color:ng(Le.GreyscaleLevel3)}):null}const g=e=>{var t;const i=null==e||null===(t=e.thumbnails)||void 0===t?void 0:t.find((e=>e.type===Xe.Medium));return null==i?void 0:i.url};return(0,z.jsx)(gt.Z,{title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:null!==(h=null==c?void 0:c.login)&&void 0!==h?h:n("deleted_opposite_user.login")}),prefix:function(){const e=Je(null==c?void 0:c.photo);return(0,z.jsx)(Tp,{src:e,size:Kl.U.Size.Large,styling:Kl.U.Styling.Circle})}(),subtitle:function(){const e=t.updated_at;if(!e)return null;const i=new Date(e).getTime();return(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:(0,z.jsx)(zt,{value:i})})}(),body:function(){const{description:e,item_photos:i,item_count:n}=t;return(0,z.jsxs)(z.Fragment,{children:[e&&(0,z.jsx)(xt.Z,{truncate:!0,text:Sc(e,180)}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,theme:"transparent",body:(s=i,r=n,s&&r?(0,z.jsxs)("div",{children:[s.map((e=>(0,z.jsxs)(m.Fragment,{children:[(0,z.jsx)(Kl.U,{src:g(e),size:Kl.U.Size.Medium,styling:Kl.U.Styling.Rounded}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small})]},e.id))),(0,z.jsx)("div",{"data-testid":"inbox-order-items",className:"u-inline-block",children:u(r,s.length)})]}):null)})]});var s,r}(),highlighted:t.unread,type:gt.Z.Type.Navigating,theme:l?"inverseExperimental":void 0,onClick:function(){a(Dm.setIsSidebarOpen({isOpen:!1})),o&&!l&&(a(eg({conversationId:t.id})),s(Rc(t.id)),i())},testId:"inbox-list-item-".concat(d)});var h};let ag,og,lg;!function(e){e.None="none",e.Decimal="decimal",e.Numeric="numeric",e.Telephone="tel",e.Search="search",e.Email="email",e.Url="url"}(ag||(ag={})),function(e){e[e.Bottom=0]="Bottom",e[e.Top=1]="Top",e[e.TopRight=2]="TopRight"}(og||(og={})),function(e){e.Vinted="vinted",e.Braze="braze"}(lg||(lg={}));var cg=i(53617);let dg;!function(e){e.Splash="Splash",e.Cover="Cover",e.FullScreenSplash="FullScreenSplash"}(dg||(dg={}));var ug=i(69461);const mg=e=>{let t;try{t=JSON.parse(e.extras.tracking)}catch{(0,ug.Di)(e.message,"in-app-message",e.extras.tracking),t={}}return{campaignName:t.campaign_name,campaignMessageName:t.campaign_message_name,canvasName:t.canvas_name,canvasVariantName:t.canvas_variant_name}},pg=e=>({id:e.id,messages:[],transactionId:void 0,isTranslated:!1,oppositeUser:null,buyerId:void 0,isPaymentActionAvailable:!1,translationType:Ue.None,isReadByOppositeUser:e.viewed,itemId:void 0,isReplyAllowed:!0,isSuspicious:!1,isBundleAvailable:!1,transaction:null,suggestedMessages:void 0,item:null,education:null,moderatedItems:null,isControl:"control"===e.extras.variant,userHasSupportRole:!1,isFirstTimeListerEducationRequired:!1}),gg=e=>{var t,i;const n=!e.pinned&&null!==(t=e.extras)&&void 0!==t&&t.page&&Number(e.extras.page)?(Number(e.extras.page)-1)*cg.jk+cg.u9:void 0;return{id:e.id,url:e.url,backgroundColor:void 0,imageUrl:e.imageUrl,impressionUrl:null,isControl:"control"===(null===(i=e.extras)||void 0===i?void 0:i.variant),type:e.pinned?Be.HM.BrazeSticky:Be.HM.Braze,position:n}},hg=e=>"AUTO_DISMISS"===e.dismissType?e.duration:void 0,xg=e=>"URI"===(null==e?void 0:e.clickAction)?e.uri:void 0,fg=e=>{if(e.length===cg.$2)return{primaryButton:e[0],secondaryButton:e[1]};const t=e[0],i="URI"===t.clickAction;return{primaryButton:i?t:void 0,secondaryButton:i?void 0:t}},yg=e=>({message:e.message,imageUrl:e.imageUrl,duration:hg(e),url:e.uri,position:"TOP"===e.slideFrom?og.Top:og.Bottom,shouldOpenLinkInNewTab:"BLANK"===e.openTarget,original:e,...mg(e)}),vg=e=>{const{primaryButton:t,secondaryButton:i}=fg(e.buttons);return{header:e.header,message:e.message,imageUrl:e.imageUrl,duration:hg(e),primaryButtonText:null==t?void 0:t.text,secondaryButtonText:null==i?void 0:i.text,primaryButtonUrl:xg(t),secondaryButtonUrl:xg(i),videoURL:void 0,type:dg.Splash,shouldOpenLinkInNewTab:"BLANK"===e.openTarget,original:e,...mg(e)}},_g=e=>{const t=e.extras.inAppStyle===cg.Qd.Cover?dg.Cover:dg.FullScreenSplash,i=t===dg.FullScreenSplash&&e.extras.videoURL?e.extras.videoURL:void 0,{primaryButton:n,secondaryButton:s}=fg(e.buttons);return{header:e.header,message:e.message,imageUrl:e.imageUrl,duration:hg(e),primaryButtonText:null==n?void 0:n.text,secondaryButtonText:null==s?void 0:s.text,primaryButtonUrl:xg(n),secondaryButtonUrl:xg(s),videoURL:i,type:t,shouldOpenLinkInNewTab:"BLANK"===e.openTarget,original:e,...mg(e)}},bg=e=>{let{card:t,onClick:i=v.noop}=e;const n=U(),s=(0,p.v9)(Rd),r=(0,Nt.s0)(),a=(0,p.I0)(),o=t.id===String(null==s?void 0:s.id);return(0,z.jsx)(gt.Z,{title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:n("conversations.list.braze.message_title")}),prefix:(0,z.jsx)(Kl.U,{src:t.extras.logoURL||Ve,fallbackSrc:Ve,size:Kl.U.Size.Large,styling:Kl.U.Styling.Circle,testId:"inbox-list-item-image-".concat(t.id)}),subtitle:(()=>{const e=new Date(t.updated).getTime();return(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:(0,z.jsx)(zt,{value:e})})})(),body:(0,z.jsx)(xt.Z,{text:Sc(t.title,180),truncate:!0,html:!0}),highlighted:!t.viewed,type:gt.Z.Type.Navigating,theme:o?"inverseExperimental":void 0,onClick:()=>{if(a(Dm.setIsSidebarOpen({isOpen:!1})),o)return;const e=pg(t);a(Dm.setConversation({conversation:e})),r(Rc(t.id)),i()},testId:"inbox-list-item-".concat(t.id)})},jg=e=>{let{conversation:t}=e;const{track:i}=vi();function n(){i(Ri({target:qm.MessageReply}))}return Mc(t)?(0,z.jsx)(bg,{card:t,onClick:n}):(0,z.jsx)(rg,{conversation:t,onClick:n})},Sg=()=>{const e=U("conversations.list"),t=U("inbox"),i=(0,m.useRef)(null),n=E(),s=(0,p.I0)(),r=(0,Nt.s0)(),{uiState:a,conversations:o,isEndReached:l,setCurrentPage:c}=(0,m.useContext)(ym),{relativeUrl:d}=xc(),u=d===Ec,g={target:qm.MergeMessageListBanner};function x(e){return"ad"===e?(0,z.jsx)("div",{className:"conversation-list__ad","data-testid":"ad-container",children:(0,z.jsx)(uc,{shape:di.Inbetween,id:"ad-inbetween"})},"ad-inbetween"):(t=e,(0,z.jsx)(jg,{conversation:t},t.id));var t}return(0,m.useEffect)((()=>{n.portables&&u&&s(Dm.clearConversation())}),[s,n,u]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Kp,{screen:$t.MessageList,linkTracking:g}),a===Ne.Pending?(0,z.jsx)(Mp,{testId:"loader"}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Pm.Z,{left:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Narrow,children:(0,z.jsx)("div",{className:"u-ui-padding-left-small",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:e("title")})})}),right:(0,z.jsx)("div",{className:"u-ui-padding-right-small",children:(0,z.jsx)(ic.I,{onClick:function(){r(Oc)},styling:ic.I.Styling.Flat,deprecatedIcon:(0,z.jsx)(ht.Z,{role:"button",name:"new-message",size:ht.Z.Size.Regular,color:ht.Z.Color.Primary}),aria:{"aria-label":t("a11y.new_message")},inline:!0})})}),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)("div",{className:"u-fill-height u-overflow-auto",ref:i,children:(0,z.jsx)(Qp,{renderItems:function(){if(!o.length)return(0,z.jsx)(gt.Z,{children:(0,z.jsx)(tc.Z,{title:e("empty_state.no_entries"),testId:"conversation-list--empty-state"})});const t=[...o];return n.portables&&t.splice(3,0,"ad"),t.map(x)},onPageEnd:function(){l||c((e=>e+1))},scrollAncestor:null==i?void 0:i.current})})]})]})]})},Zg=()=>(0,p.v9)($d)!==Ne.Pending?null:(0,z.jsx)("div",{className:"conversation-loader__overlay",children:(0,z.jsx)("div",{className:"conversation-loader",children:(0,z.jsx)(Dp.Z,{styling:Dp.Z.Styling.Lifted,size:Dp.Z.Size.Large})})}),Ig=e=>{let{onRetryClick:t}=e;const i=U();return(0,z.jsx)(tc.Z,{title:i("forum.loading_failed_empty_state.title"),body:i("forum.loading_failed_empty_state.body"),action:!!t&&(0,z.jsx)(ic.I,{onClick:t,styling:ic.I.Styling.Filled,text:i("forum.loading_failed_empty_state.actions.retry")}),image:(0,z.jsx)(Kl.U,{src:"/assets/error-page/failed-to-load.svg"})})},Cg=()=>{const e=U();return(0,z.jsx)(tc.Z,{title:e("error_page.not_found.title"),body:e("error_page.not_found.body"),image:(0,z.jsx)(Kl.U,{src:"/assets/error-page/failed-to-load.svg"})})};let kg,wg;!function(e){e.None="none",e.InConversationSold="in_conversation_sold",e.InConversationTransactionCompleted="in_conversation_transaction_completed",e.InMessagesSold="in_messages_sold",e.InConversationSoldHAOV="in_conversation_sold_haov",e.InConversationTransactionCompletedHAOV="in_conversation_transaction_completed_haov"}(kg||(kg={})),function(e){e.Never="never",e.Read="read",e.Later="later",e.GoToSellerPaymentSettings="goto_seller_payment_settings",e.GoToMyItems="goto_my_items",e.GoToWallet="goto_wallet",e.GoToConversation="goto_conversation",e.SetupPaypal="setup_paypal",e.SendEmail="send_email",e.ConfirmRealName="confirm_real_name"}(wg||(wg={}));const Pg=e=>{let{url:t,bottomText:i,itemsCount:n}=e;return(0,z.jsxs)("div",{className:"conversation-education__item-photo u-flexbox u-position-relative",children:[(0,z.jsx)(Kl.U,{src:t,size:Kl.U.Size.X2Large,label:n?n.toString():"",alt:""}),(0,z.jsx)("div",{className:"conversation-education__item-photo-text u-fill-width",children:(0,z.jsx)(gt.Z,{theme:"primary",styling:gt.Z.Styling.Tight,children:(0,z.jsx)("div",{className:"u-ui-padding-vertical-small",children:(0,z.jsx)(xt.Z,{theme:"inverse",type:xt.Z.Type.Subtitle,text:i,alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent})})})})]})};var zg;!function(e){e[e.Active=0]="Active",e[e.Completed=1]="Completed",e[e.Inactive=2]="Inactive"}(zg||(zg={}));const Tg=Object.assign((e=>{let{status:t,stepNumber:i}=e;return t===zg.Completed?(0,z.jsx)(ht.Z,{name:"check-circle",color:ht.Z.Color.Primary,aria:{"aria-hidden":!0}}):t===zg.Active?(0,z.jsxs)("div",{className:"u-position-relative u-flexbox u-justify-content-center u-align-items-center",children:[(0,z.jsx)(ht.Z,{name:"circle-filled",color:ht.Z.Color.Primary,aria:{"aria-hidden":!0}}),(0,z.jsx)("div",{className:"progress-step-icon__number progress-step-icon__number--filled u-position-absolute",children:i})]}):(0,z.jsxs)("div",{className:"u-position-relative u-flexbox u-justify-content-center u-align-items-center",children:[(0,z.jsx)(ht.Z,{name:"circle",color:ht.Z.Color.GreyscaleLevel4,aria:{"aria-hidden":!0}}),(0,z.jsx)("div",{className:"progress-step-icon__number u-position-absolute",children:i})]})}),{Status:zg}),Fg=e=>{let{type:t,price:i}=e;const n=U("conversation.education"),s=[kg.InConversationTransactionCompleted,kg.InConversationTransactionCompletedHAOV].includes(t),r=[kg.InConversationSoldHAOV,kg.InConversationTransactionCompletedHAOV].includes(t),a=[(()=>{let e=n("steps.sold.description",{price:i});return r&&(e=n("steps.sold.description_haov",{price:i})),s&&(e=n("steps.sold.completed_description")),{completed:!0,active:!1,title:n("steps.sold.title"),description:e}})(),(()=>{let e=n("steps.send_it.description");return s&&(e=n("steps.send_it.completed_description")),s&&r&&(e=n("steps.send_it.completed_description_haov")),{completed:s,active:!s,title:n("steps.send_it.title"),description:e}})(),...r?[{completed:s,active:!1,title:n("steps.authenticity_check.title"),description:n(s?"steps.authenticity_check.completed_description":"steps.authenticity_check.description")}]:[],{completed:!1,active:s,title:n("steps.get_paid.title"),description:n(s?"steps.get_paid.completed_description":"steps.get_paid.description")}],o=(e,t)=>e?Tg.Status.Completed:t?Tg.Status.Active:Tg.Status.Inactive;return(0,z.jsx)(z.Fragment,{children:a.map(((e,t)=>{const i=e.active||e.completed?"inherit":"muted";return(0,z.jsx)(gt.Z,{theme:"transparent",prefix:(n=e.completed,s=e.active,r=t+1,(0,z.jsx)(Tg,{status:o(n,s),stepNumber:r})),title:(0,z.jsx)(xt.Z,{text:e.title,theme:i}),body:(0,z.jsx)(xt.Z,{text:e.description,theme:i})},t);var n,s,r}))})},Ng=e=>{var t,i,n,s,r;let{type:a,showInWebview:o}=e;const l=U("conversation.education"),{track:c}=vi(),d=(0,p.v9)(Rd),u=(0,p.v9)(Nc),g=((null==d||null===(t=d.transaction)||void 0===t?void 0:t.itemsCount)||0)>1&&(null==d||null===(i=d.transaction)||void 0===i?void 0:i.itemsCount)||void 0,h=null==d||null===(n=d.transaction)||void 0===n?void 0:n.order.title,f=(null==d||null===(s=d.transaction)||void 0===s?void 0:s.itemsCount)&&d.transaction.itemsCount>1,y=null!=d&&null!==(r=d.item)&&void 0!==r&&r.priceNumeric&&d.item.currency?Ma(d.item.priceNumeric,{locale:u,currency:d.item.currency}):null,v=[kg.InConversationTransactionCompleted,kg.InConversationTransactionCompletedHAOV].includes(a);return(0,m.useEffect)((()=>{const e=[kg.InConversationTransactionCompletedHAOV,kg.InConversationSoldHAOV].includes(a)?$t.ConversationHAOVEducation:$t.ConversationEducation;c(Wi({screen:e}))}),[a,c]),d?(0,z.jsxs)("div",{className:"u-fill-width",children:[(0,z.jsxs)("div",{className:"conversation-education__background u-flexbox u-position-relative u-flex-direction-column u-align-items-center",children:[o&&(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center",children:[(0,z.jsx)(Kl.U,{src:"".concat(Be.Fv,"/assets/conversation/education/sparkles-left.svg"),alt:""}),(0,z.jsx)("div",{className:"u-ui-padding-horizontal-large",children:(0,z.jsx)(Pg,{url:null==d||null===(_=d.item)||void 0===_||null===(b=_.photo)||void 0===b?void 0:b.url,bottomText:l(v?"item_photo.done":"item_photo.sold"),itemsCount:g})}),(0,z.jsx)(Kl.U,{src:"".concat(Be.Fv,"/assets/conversation/education/sparkles-right.svg"),alt:""})]}),(0,z.jsx)(gt.Z,{theme:"transparent",children:(0,z.jsx)(xt.Z,{text:v?l("description.transaction_completed",{price:y}):f?l("description.bundle_sold",{price:y}):l("description.item_sold",{price:y,item_name:h}),alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent})}),(0,z.jsx)("div",{className:"u-fill-width conversation-education__tear"})]}),(0,z.jsx)(Fg,{type:a,price:y})]}):null;var _,b},Lg=e=>{let{children:t,maxWidth:i,maxHeight:n,className:s}=e;if(!t)return null;const r=y()("u-overflow-auto",s);return(0,z.jsx)("div",{className:r,style:{maxWidth:i,maxHeight:n},children:t})},Eg=[kg.InConversationSold,kg.InConversationTransactionCompleted,kg.InConversationSoldHAOV,kg.InConversationTransactionCompletedHAOV],Og=e=>{let{type:t,action:i,isOpen:n,onClose:s}=e;const r=U("conversation.education.modal"),a=async()=>{await(0,Fe.AKx)(t),s()};return Eg.includes(t)?(0,z.jsx)(cp.Z,{show:n,hasScrollableContent:!0,children:(0,z.jsxs)("div",{className:"u-fill-width",children:[(0,z.jsx)("div",{className:"conversation-education__background",children:(0,z.jsx)(Pm.Z,{theme:"transparent",right:(0,z.jsx)(ic.I,{aria:{"aria-label":r("a11y.actions.close")},styling:ic.I.Styling.Flat,theme:"amplified",deprecatedIconName:"x",inline:!0,onClick:a,testId:"conversation-education-modal-close-button"})})}),(0,z.jsx)(Lg,{children:(0,z.jsx)(Ng,{type:t})}),i===wg.Read?(0,z.jsx)(gt.Z,{theme:"transparent",children:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,onClick:a,text:r("actions.go_to_conversation"),testId:"conversation-education-modal-go-to-conversation-button"})}):i===wg.GoToWallet?(0,z.jsx)(gt.Z,{theme:"transparent",children:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,onClick:async()=>{await(0,Fe.AKx)(t),(0,ls.ru)(Me.cz_)},text:r("actions.got_to_wallet"),testId:"conversation-education-modal-go-to-wallet-button"})}):null]})}):null},Rg=e=>{let{isSystem:t,toggleSidebar:i,onGoBack:n,oppositeUser:s}=e;const r=E(),a=U(),o=U("inbox");if(void 0===s&&!t)return null;const l=!t||null!=s&&s.login?s?s.login:a("conversations.list.deleted_opposite_user.login"):a("conversations.list.braze.message_title"),c=t||null!=s&&s.isSystem?l:(0,z.jsx)("a",{href:(()=>{if(s)return s.profileUrl})(),"aria-label":o("a11y.user_profile",{username:l}),children:l});return(0,z.jsx)("div",{className:"conversation-header",children:(0,z.jsx)(Pm.Z,{left:r.portables&&(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,theme:"amplified",inline:!0,deprecatedIconName:"arrow-left",testId:"back-button",onClick:n}),body:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:c,theme:"amplified"})}),right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,theme:"amplified",inline:!0,deprecatedIconName:"info-circle",testId:"details-button",onClick:i,aria:{"aria-label":o("a11y.information")}})})})},Dg=e=>{let{spacerAt:t}=e;const i=(0,p.v9)(W),n=U("checkout.buyer_protection_fee_discount");return null!=i&&i.service_fee_ui_discount?(0,z.jsxs)(z.Fragment,{children:["top"===t&&(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(Lt.Z,{inverse:!0,styling:Lt.Z.Styling.Tight,children:(0,z.jsx)(gt.Z,{theme:"successLightExperimental",title:n("title",{percentage_discount:i.service_fee_ui_discount}),body:(0,z.jsx)(xt.Z,{text:n("body")})})}),"bottom"===t&&(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]}):null},Ag="color_theme",Mg="dark_mode_banner_closed";let Ug;!function(e){e.Dark="dark",e.Light="light"}(Ug||(Ug={}));const Bg=()=>is(Ag)===Ug.Dark,qg=e=>{let{isVisible:t,sellerIsBusinessUser:i,onClose:n}=e;const{track:s}=vi(),r=i?"checkout.buyer_protection_info_business":"checkout.buyer_protection_info",a=U(r),o=i?"buyer-protection-pro-shield.svg":"buyer-protection-shield.svg",l=Bg()?"".concat(Be.Fv,"/assets/buyer-protection/dark/").concat(o):"".concat(Be.Fv,"/assets/buyer-protection/").concat(o);function c(){s(Ri({screen:$t.EscrowFeeEducationModal,target:qm.CloseScreen})),n()}function d(){s(Ri({screen:$t.EscrowFeeEducationModal,target:qm.RefundPolicyLink}))}function u(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ht.Z.Size.Large,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ht.Z.Color.GreyscaleLevel3;return!i&&["refund_updated","refund_and_return"].includes(e)&&(t={"refund-policy-link":e=>(0,z.jsx)("a",{href:Me.xoC,target:"_blank",onClick:d,"data-testid":"refund-policy-link",children:e})}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,prefix:n&&(0,z.jsx)(ht.Z,{name:n,testId:"content-icon-".concat(n),color:r,size:s,aria:{"aria-hidden":"true"}}),title:(0,z.jsx)(xt.Z,{text:a("".concat(e,".title")),type:xt.Z.Type.Title,testId:"content-title-".concat(e)}),body:(0,z.jsx)("div",{className:"buyer-protection-modal",children:(0,z.jsx)(xt.Z,{text:a("".concat(e,".description"),t),html:!0,testId:"content-description-".concat(e)})})},e)}return(0,z.jsxs)(cp.Z,{show:t,testId:"service-fee-modal",children:[(0,z.jsx)(Pm.Z,{right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,onClick:c,deprecatedIcon:(0,z.jsx)(ht.Z,{name:"x",testId:"icon-x"}),inline:!0,testId:"service-fee-modal-navigation-close"})}),(0,z.jsx)("div",{className:"modal-contained-content u-ui-padding-horizontal-x2-large","data-testid":"service-fee-modal-content",children:function(){const e=i?Me.cS4:Me.ozz;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"u-text-center",children:[(0,z.jsx)(Kl.U,{src:l,size:Kl.U.Size.XLarge,alt:""}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:a("title"),type:xt.Z.Type.Heading}),(0,z.jsx)("a",{href:e,target:"_blank",rel:"noreferrer","data-testid":"service-fee-help-link",children:(0,z.jsx)(xt.Z,{text:a("service_fee_link_title"),clickable:!0,alignment:xt.Z.Alignment.Center,type:xt.Z.Type.Subtitle,as:"p"})})]}),(0,z.jsx)(Dg,{spacerAt:"top"}),(0,z.jsx)("div",{className:"u-ui-padding-vertical-x-large",children:(0,z.jsx)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),children:"checkout.buyer_protection_info"===r?[u("refund_updated","money",ht.Z.Size.Regular,ht.Z.Color.Primary),u("secure_payments_updated","lock",ht.Z.Size.Regular,ht.Z.Color.Primary),u("full_support_updated","speech-bubble",ht.Z.Size.Regular,ht.Z.Color.Primary)]:[u("money_back","money",ht.Z.Size.Regular,ht.Z.Color.Primary),u("secure_payments","lock",ht.Z.Size.Regular,ht.Z.Color.Primary),u("full_support","speech-bubble",ht.Z.Size.Regular,ht.Z.Color.Primary)]})})]})}()}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(ic.I,{text:a("got_it"),styling:ic.I.Styling.Filled,onClick:c,testId:"service-fee-modal-close"})})]})},Vg=(e,t)=>{var i;const{key:n}=e;n!==Lm.Enter&&n!==Lm.Spacebar||(t?t():null===(i=e.target)||void 0===i||i.dispatchEvent(new Event("click",{bubbles:!0})))},Hg=e=>{let{itemId:t,isSellerBusiness:i=!1,bundleId:n=null}=e;const s=U(i?"item_pricing_details_modal.pro":"item_pricing_details_modal.regular"),{track:r}=vi(),[a,o]=(0,m.useState)(!1),l=()=>{o(!0),r(Ri(n?{screen:$t.BundleSummary,target:qm.ServiceFeeInfo,targetDetails:JSON.stringify({bundle_id:n})}:{target:qm.ServiceFeeInfo,targetDetails:JSON.stringify({item_id:t})}))};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"u-flexbox u-align-self-center u-cursor-pointer","data-testid":"item-pricing-details-icon",role:"button",tabIndex:0,onClick:l,onKeyDown:e=>{Vg(e,l)},children:(0,z.jsx)(ht.Z,{name:"info-circle",size:ht.Z.Size.Small,color:ht.Z.Color.GreyscaleLevel4,title:s("title")})}),(0,z.jsx)(qg,{isVisible:a,onClose:()=>{o(!1)},sellerIsBusinessUser:i})]})},Gg=e=>{let{isVisible:t,itemId:i,currency:n,itemPrice:s,isSellerBusiness:r,serviceFee:a,onClose:o}=e;const l=U("item_price_breakdown_modal"),c=E(),{track:d}=vi(),u=(0,p.v9)(Nc),m=Ma(s,{locale:u,currency:n}),g=Ma(a,{locale:u,currency:n}),f=r?"buyer_protection_fee_pro":"buyer_protection_fee",y=()=>{d(Ri({screen:$t.PriceBreakdownModal,target:qm.CloseScreen})),o()},v=()=>(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Pm.Z,{right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,deprecatedIconName:"x",inline:!0,onClick:y,aria:{"aria-label":l("actions.a11y.close")},testId:"item-price-breakdown-navigation-close-button"}),body:l("breakdown_title")}),(0,z.jsx)(h.Z,{}),(0,z.jsxs)(nc.Z,{styling:nc.Z.Styling.Narrow,children:[(0,z.jsx)(gt.Z,{title:l("item_price"),suffix:m,styling:gt.Z.Styling.Narrow,testId:"item-price-breakdown-price-cell"}),(0,z.jsx)(gt.Z,{suffix:g,styling:gt.Z.Styling.Narrow,body:(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsx)(xt.Z,{text:l(f),theme:"amplified",bold:!0}),(0,z.jsx)(x.Z,{size:x.Z.Size.Small,orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(Hg,{itemId:i,isSellerBusiness:r})]}),testId:"item-price-breakdown-service-fee-cell"}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Narrow,children:(0,z.jsx)(xt.Z,{text:l("shipping_info"),type:xt.Z.Type.Subtitle,testId:"item-price-breakdown-shipping-note"})}),(0,z.jsxs)("div",{className:"u-tablets-up-only",children:[(0,z.jsx)(x.Z,{}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Narrow,children:(0,z.jsx)(ic.I,{text:l("actions.close"),styling:ic.I.Styling.Filled,onClick:y,testId:"item-price-breakdown-close-button"})})]})]})]});return c.tabletsUp?(0,z.jsx)(cp.Z,{show:t,children:v()}):(0,z.jsx)(Bp.Z,{isVisible:t,onClose:y,children:v()})},Wg=e=>{let{itemId:t,currency:i,totalItemPrice:n,itemPrice:s,serviceFee:r,isItemOwner:a,isSellerBusiness:o,shouldTrimTitle:l,shouldMinimiseTitle:c,onModalOpen:d,onModalClose:u}=e;const[g,h]=(0,m.useState)(!1),[f,y]=(0,m.useState)(!1),v=U("item.includes_buyer_protection"),{track:_}=vi(),b=(0,p.v9)(Nc),j=Ma(n,{currency:i,locale:b}),S=o?"_pro":"",Z=()=>{_(Ri({target:qm.PricingDetails,targetDetails:JSON.stringify({item_id:t})})),g?null==u||u():null==d||d(),h((e=>!e))},I=()=>c?xt.Z.Type.Caption:xt.Z.Type.Subtitle;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"u-flexbox",children:(0,z.jsxs)("div",{className:"u-cursor-pointer u-flexbox u-align-items-center u-flex-wrap",onClick:Z,role:"button",tabIndex:0,onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),children:[(0,z.jsx)(xt.Z,{underline:f,text:v(l||a?"title_trimmed".concat(S):"title".concat(S),{price:j}),theme:"primary",type:I(),testId:o?"service-fee-included-title-pro":"service-fee-included-title"}),(0,z.jsx)(x.Z,{size:x.Z.Size.XSmall,orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(ht.Z,{name:"checkmark-shield-outline",color:ht.Z.Color.Primary,size:c?ht.Z.Size.XSmall:ht.Z.Size.Small,testId:"service-fee-included-icon"}),a&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XSmall,orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(xt.Z,{underline:f,text:v("price_for_buyer"),theme:"primary",type:I()})]})]})}),(0,z.jsx)(Gg,{itemId:t,currency:i,isVisible:g,isSellerBusiness:o,itemPrice:s,serviceFee:r,onClose:Z})]})};var Xg=i(55001);const Yg=[{field:Xg.GL.Country},{field:Xg.GL.Name,required:!0},{field:Xg.GL.Line1,required:!0},{field:Xg.GL.Line2},{field:Xg.GL.PostalCode,required:!0},{field:Xg.GL.City,required:!0}],Kg="checkout_load_time_tracking_details",Jg=e=>{let{itemId:t}=e;const i={itemId:t,loadTimeStartStamp:(new Date).getTime()};(0,Bn.D$)(Kg,JSON.stringify(i))},Qg=e=>{let{show:t,theme:i="primary",translationsPrefix:n,onConfirm:s,onCancel:r}=e;const a=U(n);return(0,z.jsx)(cp.Z,{show:t,title:a("title"),body:a("body"),actions:[{text:a("buttons.confirm"),style:cp.Z.ActionStyling.Filled,theme:i,callback:s},{text:a("buttons.cancel"),style:cp.Z.ActionStyling.Flat,callback:r}]})},$g=e=>{let{transaction:t}=e;const i=U("conversation.hero_message"),[n,s]=(0,m.useState)(!1),[r,a]=(0,m.useState)(!1);return(0,z.jsxs)(z.Fragment,{children:[t?(0,z.jsx)(ic.I,{text:i("transaction_actions.unreserve"),size:ic.I.Size.Medium,onClick:()=>s(!0),testId:"unreserve-button"}):null,(0,z.jsx)(Qg,{show:n,theme:"primary",translationsPrefix:"conversation.conversation_info.remove_reservation_modal",onConfirm:async()=>{null!=t&&t.order&&!r&&(a(!0),await(0,Fe.HcE)(t.id,!1),a(!1),s(!1))},onCancel:()=>{s(!1)}})]})},eh=e=>{let{transaction:t,oppositeUser:i}=e;const n=U("conversation.hero_message"),[s,r]=(0,m.useState)(!1),[a,o]=(0,m.useState)(!1);return(0,z.jsxs)(z.Fragment,{children:[t?(0,z.jsx)(ic.I,{text:n("transaction_actions.reserve"),size:ic.I.Size.Medium,onClick:()=>r(!0),testId:"reserve-button"}):null,(0,z.jsx)(Qg,{show:s,theme:"primary",translationsPrefix:"conversation.conversation_info.reserve_modal",onConfirm:async()=>{t&&i&&!a&&(o(!0),await(0,Fe.HcE)(t.id,!0),o(!1),r(!1))},onCancel:()=>{r(!1)}})]})};var th=i(51064);const ih=(e,t)=>{const i=Ip(),[n,s]=(0,m.useState)(),[r,a]=(0,m.useState)(),[o,l]=(0,m.useState)(!1),[c,d]=(0,m.useState)(),u=(0,m.useRef)((async function(){l(!0);const n=await e(...arguments);if(!i())return{error:void 0,data:void 0,transformedData:void 0};if(function(e){return"object"==typeof e&&null!=e&&"errors"in e}(n))return d(n),l(!1),{error:n,data:void 0,transformedData:void 0};let r;return t&&(r=t(n),a(r)),s(n),l(!1),{error:void 0,data:n,transformedData:r}}));return{data:n,transformedData:r,isLoading:o,error:c,fetch:u.current}};function nh(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class sh extends m.Component{constructor(){super(...arguments),nh(this,"node",(0,m.createRef)()),nh(this,"onClick",(e=>{e.target===this.node.current&&this.props.onClick&&this.props.onClick()}))}render(){return(0,z.jsx)("div",{className:"page-overlay",role:"presentation",onClick:this.onClick,ref:this.node,children:this.props.children})}}const rh=sh;var ah=i(82481),oh=i(81870);let lh;!function(e){e.Offer="offer"}(lh||(lh={}));const ch=e=>{let{isBuyer:t,currency:i,isSubmitting:n,isOfferPriceDisplayEnabled:s=!1}=e;const r=U("conversation.hero_message.make_offer"),a=(0,p.v9)(Nc),o=(0,th.qo)({name:lh.Offer,disabled:!s});return(0,z.jsx)(gt.Z,{children:(0,z.jsx)(ic.I,{disabled:n,isLoading:n,type:ic.I.Type.Submit,styling:ic.I.Styling.Filled,testId:"offer-submit-button",children:t&&s?r("offer_modal.actions.submit_with_price",{price:o?Ma(o,{locale:a,currency:i}):""}):r("offer_modal.actions.submit")})})},dh=e=>e.replace(/\]/g,"").replace(/[^-a-zA-Z0-9:.]/g,"_"),uh=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,v.mapKeys)(e,((e,t)=>"data-".concat(t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())))};function mh(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class ph extends m.Component{constructor(){super(...arguments),mh(this,"state",{inputValue:this.formatValue(this.props.value)}),mh(this,"handleChange",(e=>{const{onChange:t,uncontrolled:i}=this.props;if(!i){const t=this.formatValue(e.target.value);this.setState({inputValue:t})}t&&t(e)}))}componentDidUpdate(e){this.props.value!==e.value&&this.setState({inputValue:this.formatValue(this.props.value)})}formatValue(e){return e||""}render(){const{name:e,validation:t,title:i,type:n,required:s,disabled:r,min:a,max:o,step:l,maxLength:c,icon:d,placeholder:u,readOnly:m,styling:p,theme:g,onFocus:h,onBlur:x,onKeyDown:f,onCopy:v,forwardedRef:_,uncontrolled:b,autoComplete:j,aria:S,testId:Z,inputMode:I}=this.props,C=y()("c-input",{["c-input--".concat(String(p))]:void 0!==p},{["c-input--".concat(String(g))]:void 0!==g}),k=this.props.ignoreState?this.formatValue(this.props.value):this.state.inputValue;return(0,z.jsxs)("label",{htmlFor:e,className:C,children:[i&&(0,z.jsx)("div",{className:"c-input__title",children:i}),(0,z.jsxs)("div",{className:"c-input__content",children:[(0,z.jsx)("input",{className:"c-input__value",type:n,name:e,id:dh(e),value:b?void 0:k,required:s,disabled:r,min:a,max:o,step:l,maxLength:c,placeholder:u,readOnly:m,onChange:this.handleChange,onFocus:h,onBlur:x,onKeyDown:f,onCopy:v,ref:_,"data-testid":Z,inputMode:I,autoComplete:j,...S}),d&&(0,z.jsx)("div",{className:"c-input__icon",children:d})]}),t&&(0,z.jsx)("div",{className:"c-input__note",children:t})]})}}mh(ph,"defaultProps",{required:!1,disabled:!1,type:"text",ignoreState:!1});const gh=(0,m.forwardRef)(((e,t)=>(0,z.jsx)(ph,{forwardedRef:t,...e})));function hh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";return e?(0,z.jsx)(zm.Z,{text:e,theme:t}):null}const xh={required:"errors.blank"};function fh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const i=(0,O.Z)(),n=U();return function(s,r){const a=(0,v.get)(e,s);if(!a)return null;const{type:o,message:l}=a,c="".concat(t,".").concat(Ic(s),".errors.").concat(Ic(o));return l||(null!=r&&r[o]?r[o]:xh[o]&&!i.messages[c]?n(xh[o],{field:n("".concat(t,".").concat(Ic(s),".title"))}):n(Ic(c)))}}const yh=/^[0-9]*((\.|,)[0-9]{0,2})?$/,vh=e=>{let{minItemPrice:t,maxItemPrice:i,currentItemPrice:n,showTitle:s=!0}=e;const{register:r,setFocus:a,formState:{errors:o}}=(0,th.Gc)(),l="conversation.hero_message.make_offer",c=U(l),d=fh(o,"".concat(l,".offer_modal")),u=(0,p.v9)(Nc);return(0,m.useEffect)((()=>{a(lh.Offer)}),[a]),(0,z.jsxs)(gt.Z,{children:[s&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:c("offer_modal.subtitle")}),(0,z.jsx)(x.Z,{size:x.Z.Size.Small})]}),(0,z.jsx)(gh,{...r(lh.Offer,{required:{value:!0,message:c("offer_modal.offer.errors.required")},min:{value:t,message:c("offer_modal.offer.errors.value_too_low",{value:t})},max:{value:i,message:c("offer_modal.offer.errors.value_too_high",{value:i})},pattern:yh}),placeholder:Ua(n,u),inputMode:ag.Decimal,step:"0.01",type:"number",styling:"tight",validation:hh(d(lh.Offer)),uncontrolled:!0,testId:"offer-price-field"})]})},_h={isCustom:!0},bh=e=>{let{minItemPrice:t,maxItemPrice:i,transactionId:n,currentItemPrice:s,offerPriceSuggestions:r,preselectedOfferPriceSuggestion:a}=e;const{register:o,setValue:l}=(0,th.Gc)(),{track:c}=vi(),d=U("conversation.hero_message.make_offer.offer_modal.price_suggestion_selector"),u=(0,p.v9)(Nc),[g,h]=(0,m.useState)({isCustom:!1,suggestion:a}),f=(0,m.useMemo)((()=>[...r.map((e=>({suggestion:e,isCustom:!1}))),_h]),[r]);function v(e,t){return()=>{var i;c(Ri({screen:$t.BuyerOriginatingOffer,target:qm.SelectSuggestedOfferDiscount,targetDetails:JSON.stringify({transactionId:n,button_number:t+1,price:(null===(i=e.suggestion)||void 0===i?void 0:i.price.amount)||null})})),h(e)}}function _(e,t){var i;const n=e.isCustom?d("custom_price_option.title"):function(e){return e.suggestion?Ua(e.suggestion.price,u):""}(e),s=e.isCustom?d("custom_price_option.action"):null===(i=e.suggestion)||void 0===i?void 0:i.label,r=y()("offer-price-option-list-item",{"offer-price-option-list-item--selected":(a=e,g.isCustom?a.isCustom:!(!a.suggestion||!g.suggestion)&&a.suggestion.price.amount===g.suggestion.price.amount)});var a;return(0,z.jsxs)("div",{className:r,onClick:v(e,t),children:[(0,z.jsx)(xt.Z,{text:n,type:xt.Z.Type.Title}),(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),(0,z.jsx)(xt.Z,{text:s,type:xt.Z.Type.Caption,theme:"primary"})]})}return(0,m.useEffect)((()=>{var e;o(lh.Offer),l(lh.Offer,(null===(e=g.suggestion)||void 0===e?void 0:e.price.amount)||"")}),[o,l,g]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(gt.Z,{title:(0,z.jsx)(xt.Z,{text:d("title"),type:xt.Z.Type.Subtitle}),suffix:(0,z.jsx)(xt.Z,{text:d("current_price",{price:Ua(s,u)}),type:xt.Z.Type.Subtitle}),styling:gt.Z.Styling.Tight}),(0,z.jsx)(x.Z,{}),(0,z.jsx)("div",{className:"offer-price-option-list",children:(0,z.jsx)(L,{separator:(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),children:f.map(((e,t)=>{var i;return(0,z.jsx)(m.Fragment,{children:_(e,t)},[e.isCustom,null===(i=e.suggestion)||void 0===i?void 0:i.label].join("-"))}))})})]}),g.isCustom&&(0,z.jsx)(vh,{showTitle:!1,minItemPrice:t,maxItemPrice:i,currentItemPrice:s})]})},jh=e=>{let{show:t,isBuyer:i,onClose:n,onSubmit:s,itemPrice:r,isSubmitting:a,minItemPrice:o,maxItemPrice:l,transactionId:c,thresholdPrice:d,remainingOffers:u,offerPriceSuggestions:p,preselectedOfferPriceSuggestion:g}=e;const{track:x}=vi(),f=U("conversation.hero_message.make_offer"),y=!(null==p||!p.length)&&i,v=i?"offer_modal.threshold_banner_title.buyer":"offer_modal.threshold_banner_title.seller";function _(){return i&&u?-1===u?(0,z.jsx)(ah.Z,{text:f("offer_modal.caption_infinite")}):(0,z.jsx)(ah.Z,{text:f("offer_modal.caption",{remaining_offers:u})}):null}return(0,m.useEffect)((()=>{t&&i&&x(Wi({screen:$t.BuyerOriginatingOffer}))}),[t,x,i]),(0,z.jsx)(cp.Z,{show:t,testId:"offer-modal",children:(0,z.jsxs)("form",{onSubmit:s,children:[(0,z.jsx)(Pm.Z,{body:f("offer_modal.title"),right:(0,z.jsx)(ic.I,{inverse:!0,inline:!0,deprecatedIconName:"x",testId:"offer-modal-navigation-close-button",onClick:n}),testId:"offer-modal-navigation"}),(0,z.jsx)(h.Z,{}),d&&(0,z.jsx)(oh.Z,{body:(0,z.jsx)(xt.Z,{text:f(v,{amount:d,"learn-more":e=>(0,z.jsx)("a",{href:Me.ozz,target:"_blank",rel:"noreferrer",children:e})}),html:!0}),type:oh.Z.Type.Info}),y?(0,z.jsx)(bh,{minItemPrice:o,maxItemPrice:l,currentItemPrice:r,transactionId:c,offerPriceSuggestions:p,preselectedOfferPriceSuggestion:g}):(0,z.jsx)(vh,{minItemPrice:o,maxItemPrice:l,currentItemPrice:r}),!y&&_(),(0,z.jsx)(ch,{isBuyer:i,currency:r.currencyCode,isSubmitting:a,isOfferPriceDisplayEnabled:y}),y&&_()]})})},Sh=e=>{var t;let{show:i,onClose:n}=e;const s=U("conversation.hero_message.make_offer"),r="b"===(null===(t=(0,p.v9)(Vn("offers_limitations")))||void 0===t?void 0:t.variant)?10:5;return(0,z.jsx)(cp.Z,{show:i,title:s("offers_exceeded_modal.title"),body:(0,z.jsx)(xt.Z,{text:s("offers_exceeded_modal.body",{offersLimit:r}),alignment:xt.Z.Alignment.Center}),actions:[{text:s("offers_exceeded_modal.actions.got_it"),style:cp.Z.ActionStyling.Filled,callback:n}]})},Zh=e=>{const{id:t,title:i,slug:n,path:s,url:r}=e;return{id:t,title:i,slug:n,path:s,url:r,itemCount:e.item_count,favouriteCount:e.favourite_count,requiresAuthenticityCheck:e.requires_authenticity_check,isLuxury:e.is_luxury,isVisibleInListings:e.is_visible_in_listings,isFavourite:e.is_favourite,isHated:e.is_hated}},Ih=e=>e.map(Zh),Ch=e=>{var t,i;return{id:e.id,total:Va(e.total),payable:Va(e.payable),effectiveDays:e.effective_days,discount:Va(e.discount),discountPercentage:e.discount_percentage,salesTax:e.sales_tax?Va(e.sales_tax):null,isTaxCoverageAvailable:null!==(t=e.tax_coverage_available)&&void 0!==t?t:null,isTaxCovered:null!==(i=e.tax_covered)&&void 0!==i?i:null}},kh=e=>({text:e.text,highlight:e.highlight}),wh=e=>{const{id:t,title:i,body:n,entry_type:s,sorting_order:r,image_url:a}=e;return{id:t,title:i,body:n,entryType:s,sortingOrder:r,imageUrl:a}},Ph=e=>e.map(wh),zh=e=>({id:e.id,carrierCode:e.carrier_code,carrierIconUrl:e.carrier_icon_url,price:Va(e.price),packageTypeId:e.package_type_id,discount:e.discount&&{percent:e.discount.percent,validFrom:e.discount.valid_from,validTo:e.discount.valid_to},priceBeforeDiscount:e.price_before_discount&&Va(e.price_before_discount),lowestPriceIn30Days:e.lowest_price_in_30_days&&Va(e.lowest_price_in_30_days),restriction:e.restriction,rateUuid:e.rate_uuid,rootRateUuid:e.root_rate_uuid,title:e.title,valueProposition:e.value_proposition,itemOfflineVerificationEnabled:e.item_offline_verification_enabled,serviceType:e.service_type,deliveryInDays:e.delivery_in_days}),Th=e=>e.map(zh),Fh=e=>({carrierIconUrl:e.carrier_icon_url,description:e.description,id:e.id,subtitle:e.subtitle,title:e.title}),Nh=e=>e.map(Fh),Lh=e=>{let{available_statements:t,form_subtitle:i,form_title:n}=e;const s=[];return{titleText:n,subtitleText:i,ratingOptions:t.reduce(((e,t)=>{s.push(t.rating_id);const i=t.options.map((e=>{const{id:t,body:i,has_message_input:n}=e;return{id:t,body:i,hasMessageInput:n}}));return{...e,[t.rating_id]:{title:t.title,options:i}}}),{}),ratingIds:s}};let Eh;!function(e){e.Section="global_switch",e.Setting="is_enabled"}(Eh||(Eh={}));const Oh=e=>{const t=e.name===Eh.Section;return{isGlobalSection:t,id:e.name,title:"invisible_header"===e.type?void 0:e.title,settings:e.value.filter((e=>{let{type:t}=e;return"boolean"===t})).map((e=>({id:e.name,title:e.title,description:e.description,isGlobalEmailSwitch:t&&e.name===Eh.Setting,enabled:Boolean(e.value)})))}},Rh=e=>({id:e.id,title:e.title,subtitle:e.subtitle,body:e.body,layoutType:e.layout_type}),Dh=e=>({title:e.title,subtitle:e.subtitle,footer:e.footer,imageUrl:e.image_url,learnMoreUrl:e.learn_more_url||"",termsUrl:e.terms_url||""}),Ah=e=>({title:e.title,subtitle:e.subtitle,imageUrl:e.image_url}),Mh=e=>({userId:e.user_id,name:e.name,photoUrl:e.photo_url,note:e.note,completed:e.completed,subtitle:e.subtitle}),Uh=e=>({id:e.id,title:e.title,subtitle:e.subtitle,status:e.status}),Bh=e=>({id:e.id,effectiveDays:e.effective_days,maxActiveCount:e.max_active_count,default:e.default,totalPrice:Va(e.total_price)}),qh=e=>({id:e.id,isActive:e.is_active,humanizedDiscountAmount:e.humanized_discount_amount,title:e.title,itemsPhotos:e.items_photos,itemsCount:e.items_count}),Vh=e=>{return e.closet_promotion_performance&&(t=e.closet_promotion_performance,{impressionsPerDay:Object.entries(t.impressions_per_day).map((e=>({date:e[0],organic:0,promoted:e[1]}))),profileVisitsPerDay:Object.entries(t.profile_visits_per_day).map((e=>({date:e[0],organic:e[1].organic,promoted:e[1].through_promotion}))),itemVisitsPerDay:Object.entries(t.item_visits_per_day).map((e=>({date:e[0],organic:e[1].organic,promoted:e[1].through_promotion}))),favourites:{organic:t.favourites_organic,promoted:t.favourites_through_promotion},conversationsStarted:{organic:t.conversations_started_organic,promoted:t.conversations_started_through_promotion},followers:{organic:t.followers_organic,promoted:t.followers_through_promotion},endDate:{original:t.closet_promotion_end_date,humanized:t.closet_promotion_end_date_humanized},startDate:{original:t.closet_promotion_start_date,humanized:t.closet_promotion_start_date_humanized},endsInHours:{original:t.closet_promotion_ends_in_hours,humanized:t.closet_promotion_ends_in_hours_humanized},askForFeedback:t.ask_for_feedback,updatedAt:t.updated_at});var t},Hh=e=>e.brands.map(Zh),Gh=e=>{if(e.feedback_ratings)return Lh(e.feedback_ratings)},Wh=e=>{return{effectiveDays:(t=e.promoted_closet_pricing).effective_days,isSalesTaxApplicable:t.sales_tax_applicable,totalPrice:Va(t.total_price),pricePerDay:Va(t.price_per_day),discountedPrice:Va(t.discounted_price)};var t},Xh=e=>Ph(e.photo_tips),Yh=e=>wh(e.photo_tip),Kh=e=>{return e.shipping_details&&{isPickupOnly:(t=e.shipping_details).pickup_only,areMultipleShippingOptionsAvailable:t.multiple_shipping_options_available,isFreeShipping:t.free_shipping,price:Va(t.price),discount:t.discount&&{maxPercent:t.discount.max_percent,deliveryType:t.discount.delivery_type}};var t},Jh=e=>({sizeIds:e.size_ids}),Qh=e=>({sizeGroups:e.size_groups}),$h=e=>e.notification_settings.email.map(Oh),ex=e=>{let{faq_entry:t}=e;if(t)return{id:t.id,title:t.title,body:t.body}},tx=e=>{return t=e.item_configuration,{prices:{minimum:Va(t.prices.minimum),maximum:Va(t.prices.maximum)}};var t},ix=e=>{return{effectiveDays:(t=e.featured_collection_pricing).effective_days,totalPrice:Va(t.total_price),pricePerDay:Va(t.price_per_day)};var t},nx=e=>{return{id:(t=e.featured_collection_order).id,effectiveDays:t.effective_days,maxActiveCollectionsCount:t.max_active_count,planPricingId:t.pricing_id,termsNote:t.terms_note,payableAmount:Va(t.payable_amount),salesTax:t.sales_tax?Va(t.sales_tax):null,isTaxCovered:t.tax_covered,isTaxCoverageAvailable:t.tax_coverage_available};var t},sx=e=>{return{users:(t=e.users,t.map(dt)),pagination:vm(e.pagination)};var t},rx=e=>({user:dt(e.user)}),ax=e=>{var t;return{homepageSessionId:e.homepage_session_id,catalogs:e.catalogs,promoBox:null===(t=e.promo_box)||void 0===t?void 0:t.entity,blocks:e.blocks}},ox=e=>({events:e.feed_events,initialMaxScore:e.max_score,showLoadMoreButton:e.show_load_more_button,totalItemCount:e.total_item_count}),lx=e=>e.info_posts.map(Rh),cx=e=>{return{additionalActions:(t=e.terms_and_conditions).additional_actions,canAgree:t.can_agree,canSkip:t.can_skip,canAccept:t.can_accept,postAgreementUrl:t.post_agreement_url,agreementsUrl:t.agreements_url};var t},dx=e=>Rh(e.info_post),ux=e=>{let{notification_landing:t}=e;return{body:t.body,buttonTitle:t.button_title,buttonUrl:t.button_url,code:t.code,id:t.id,imageUrl:t.image_url,title:t.title}},mx=e=>{return{title:(t=e).title,text:t.text,updates:{title:null===(i=t.updates)||void 0===i?void 0:i.title,text:null===(n=t.updates)||void 0===n?void 0:n.text},additionalActions:null==t?void 0:t.additional_actions};var t,i,n},px=e=>(0,rt.ak)(e),gx=e=>{let{share:t}=e;return(e=>({isEnabled:e.is_enabled,inviteUrl:e.invite_url}))(t)},hx=e=>vo(e.items),xx=e=>{let{invite_instructions:t}=e;return"how_it_works"in(i=t)?(e=>({...Dh(e),howItWorks:e.how_it_works.map(Ah),images:{...e.images},referralsIcon:e.referrals_icon,howItWorksIcon:e.how_it_works_icon,referralsButtonTitle:e.referrals_button_title,howItWorksScreenTitle:e.how_it_works_screen_title}))(i):Dh(i);var i},fx=e=>(e=>({canAddFeedback:e.can_add_feedback,urlForLastUnfeedbackedTransaction:e.url_for_last_unfeedbacked_transaction,canSendTemplates:e.can_send_templates,showSupportFunctionality:e.show_support_functionality,shadowBanned:e.shadow_banned}))(e),yx=e=>e.collection_pricing.map(Bh),vx=e=>({items:So(e.items),pagination:vm(e.pagination)}),_x=e=>{return{canActivate:(t=e.policy).can_activate,isPlanActivated:t.plan_activated,maxItemCount:t.max_item_count,maxActiveCollectionsCount:t.max_active_collections_count};var t},bx=e=>{return{humanizedTimeLeft:(t=e).humanized_time_left,maxActiveCount:t.max_active_count,maxTotalCount:t.max_total_count,collections:t.collections.map(qh)};var t},jx=e=>{return{discount:(t=e.featured_collection).discount,id:t.id,isActive:t.is_active,title:t.title,items:So(t.items)};var t},Sx=e=>io(e.item),Zx=e=>{return t=e.seller_offer_options,{minPrice:Va(t.min_price),maxPrice:Va(t.max_price),feesReductionThreshold:t.fees_reduction_threshold?Va(t.fees_reduction_threshold):null};var t},Ix=e=>{let{isOpen:t,onClose:i}=e;const{track:n}=vi(),s=(0,th.cI)(),{reset:r,setError:a,handleSubmit:o,formState:{isSubmitting:l}}=s,c=(0,p.v9)(Lu),d=(0,p.v9)(Eu),u=(0,p.v9)(Ou),g=(0,p.v9)(qd),h=(0,p.v9)(Ru),x=(0,p.v9)(lu),f=(0,p.v9)(Hd),y=(0,p.v9)(Nc),v=(0,p.v9)(Wt("wakanda_new_seller_offer_options_api")),_=(0,p.I0)(),{fetch:b,transformedData:j}=ih(Fe.wVq,tx),{fetch:S,transformedData:Z}=ih(Fe.z68,Zx),[I,C]=(0,m.useState)(),[k,w]=(0,m.useState)(!1),P=h===md.Buyer,T=v?null==Z?void 0:Z.minPrice.amount:null==j?void 0:j.prices.minimum.amount,F=v?null==Z?void 0:Z.maxPrice.amount:null==j?void 0:j.prices.maximum.amount,N=Number(P?null==c?void 0:c.minPrice.amount:T),L=Number(P?null==c?void 0:c.maxPrice.amount:F),E=null==c?void 0:c.remaining,O=P?null==c?void 0:c.feesReductionThreshold:null==Z?void 0:Z.feesReductionThreshold,R=O?Ua(O,y):null;return Xn({shouldTrackExpose:P&&t,abTestName:"offers_price_guiding_discount_buttons"}),(0,m.useEffect)((()=>{P||b()}),[P,b]),(0,m.useEffect)((()=>{v&&(P||g&&S({transactionId:g}))}),[S,P,v,g]),(0,m.useEffect)((()=>{t&&P&&u&&r({[lh.Offer]:u.price.amount})}),[r,t,P,u]),(0,m.useEffect)((()=>{x&&_(Dm.getOfferRequestOptionsRequest({itemPrice:x}))}),[_,x]),(0,z.jsxs)(z.Fragment,{children:[P&&!E?(0,z.jsx)(Sh,{show:t,onClose:i}):(0,z.jsx)(th.RV,{...s,children:x&&(0,z.jsx)(jh,{show:t,isBuyer:P,itemPrice:x,minItemPrice:N,maxItemPrice:L,thresholdPrice:R,isSubmitting:l,transactionId:g,remainingOffers:E,offerPriceSuggestions:d,preselectedOfferPriceSuggestion:u,onSubmit:o((async function(e){const t=e.offer.replace(",",".");if(w(!0),!g||!x||!f)return;!function(e){x&&g&&n(jn({isBuyer:P,transactionId:g,currentPrice:Number(x.amount),offeredPrice:Number(e)}))}(t);const s=x.currencyCode,r=P?await(0,Fe.K5E)({transactionId:g,price:t,currency:s}):await(0,Fe.CmA)({transactionId:g,price:t,currency:s});if("errors"in r)return r.errors.forEach((()=>{a(lh.Offer,{type:"manual",message:r.errors[0].value})})),void w(!1);i(),C(Ne.Success),(0,ls.mZ)(Rc(f))})),onClose:i})}),k&&(0,z.jsx)(rh,{children:(0,z.jsx)("span",{"data-testid":"loader",children:(0,z.jsx)(Dp.Z,{size:Dp.Z.Size.XLarge,styling:Dp.Z.Styling.Lifted,state:I===Ne.Success?Dp.Z.State.Success:void 0})})})]})},Cx=e=>{var t;let{itemId:i,transaction:n,actions:s,oppositeUser:r}=e;const{track:a}=vi(),o=U("conversation.hero_message"),{offer_request:l}=xc().searchParams,c=(0,p.v9)(we),d=(0,p.v9)(Vn("offers_limitations")),[u,g]=(0,m.useState)(!!l),h=wt(null==n||null===(t=n.seller)||void 0===t?void 0:t.closetCountdownEndDate),f=()=>{g(!0),null!=s&&s.includes(gd.RequestOffer)&&(a(Ri({screen:$t.Item,target:qm.MakeBuyerSideOffer,targetDetails:JSON.stringify({item_id:i,transaction_id:null==n?void 0:n.id})})),d&&a(bn({...c,...d})))},y=()=>{g(!1)},_=()=>{if(!s)return null;const e=[gd.Offer,gd.Buy,gd.RequestOffer];return s.filter((t=>e.includes(t)))},b=()=>{Jg({itemId:i})};return(null==s?void 0:s.includes(gd.Buy))||(null==s?void 0:s.includes(gd.Offer))||(null==s?void 0:s.includes(gd.RequestOffer))?(()=>{if(!s)return null;const e=s.includes(gd.Buy)&&!h;return(0,z.jsxs)("div",{className:"u-flexbox",children:[null!=s&&s.includes(gd.RequestOffer)?h?null:null!=n&&n.id?(0,z.jsx)(ic.I,{text:o("actions.request_offer"),size:ic.I.Size.Medium,onClick:f,testId:"make-offer-request-button"}):null:null,(0,v.size)(_())>1&&(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),e&&(null==n?void 0:n.id)&&(0,z.jsx)(ic.I,{text:o("actions.buy"),size:ic.I.Size.Medium,styling:ic.I.Styling.Filled,url:(0,Me.YJ3)(n.id,$t.MessageReply),onClick:b,testId:"hero-message-buy-now-button"}),null!=s&&s.includes(gd.Offer)&&null!=n&&n.id?(0,z.jsx)(ic.I,{text:o("actions.offer"),size:ic.I.Size.Medium,styling:ic.I.Styling.Filled,onClick:f,testId:"make-offer-button"}):null,(0,z.jsx)(Ix,{isOpen:u,onClose:y})]})})():(()=>{var e;const t=(null==s?void 0:s.includes(gd.Transfer))&&(null==n||null===(e=n.availableActions)||void 0===e?void 0:e.includes(hd.MarkAsSold));return!n||null!=s&&s.includes(gd.Reserve)&&null!=s&&s.includes(gd.Transfer)?(0,z.jsxs)("div",{className:"u-flexbox",children:[null!=s&&s.includes(gd.Reserve)&&null!=n&&n.id?null!=n&&n.order.reserved?(0,z.jsx)($g,{transaction:n}):(0,z.jsx)(eh,{transaction:n,oppositeUser:r}):null,t&&(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),null!=n&&n.id&&null!=s&&s.includes(gd.Transfer)&&null!=n&&null!==(i=n.availableActions)&&void 0!==i&&i.includes(hd.MarkAsSold)?(0,z.jsx)(ic.I,{url:(0,Me.Yi3)(n.id),text:o("transaction_actions.mark_as_sold"),size:ic.I.Size.Medium,styling:ic.I.Styling.Filled}):null]}):null;var i})()},kx=e=>{var t;let{toggleSidebar:i}=e;const n=E(),s=(0,p.v9)(Nc),r=(0,p.v9)(cu),a=(0,p.v9)(lu),o=(0,p.v9)(Ad),l=(0,p.v9)(Gd),c=(0,p.v9)(su),d=(0,p.v9)(ru),u=(0,p.v9)(du),m=(0,p.v9)(X),g=Xn({abTestName:"bpf_bundles_transparency"}),h=(null==o||null===(t=o.seller)||void 0===t?void 0:t.id)===m,x=e=>{const t=(null==o?void 0:o.itemsCount)||0,n=null==c?void 0:c.url;return n?(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,url:1===t?n:void 0,onClick:t>1?i:void 0,clickable:!0,children:e}):e},f=()=>c?(0,z.jsx)(Cx,{itemId:c.id,transaction:o,oppositeUser:l,actions:u}):null,v=y()("u-ui-padding-horizontal-large","u-ui-padding-bottom-large");return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{prefix:(()=>{if(!d)return null;const e=Pa(d,Xe.Medium),t=(0,z.jsx)(Kl.U,{src:e,styling:Kl.U.Styling.Rounded,size:Kl.U.Size.Large,scaling:Kl.U.Scaling.Cover,label:((null==o?void 0:o.itemsCount)||0)>1?null==o?void 0:o.itemsCount.toString():void 0,alt:""});return x(t)})(),title:(()=>{if(null==o||!o.itemTitle)return null;const e=(0,z.jsx)(xt.Z,{text:o.itemTitle,type:xt.Z.Type.Title});return x(e)})(),body:(()=>{if(!a||!r)return null;const e=Ua(a,s);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:e,testId:"hero-message-price",theme:"amplified"}),"on"===(null==g?void 0:g.variant)?o?(0,z.jsx)(Wg,{itemId:o.itemId,itemPrice:o.offer.price.amount,serviceFee:o.serviceFee.amount,totalItemPrice:o.totalAmountWithoutTax.amount,isSellerBusiness:!(null===(i=o.seller)||void 0===i||!i.business),isItemOwner:h,currency:o.totalAmountWithoutTax.currencyCode}):null:null!=o&&o.buyerDebit?(0,z.jsx)(Wg,{itemId:o.itemId,itemPrice:null==a?void 0:a.amount,serviceFee:o.buyerDebit.protectionFee,totalItemPrice:o.buyerDebit.totalAmountWithoutTax,isSellerBusiness:!(null===(t=o.seller)||void 0===t||!t.business),isItemOwner:h,currency:o.buyerDebit.currency}):null]});var t,i})(),suffix:n.tabletsUp&&f(),testId:"hero-message"}),n.phones&&(0,z.jsx)("div",{className:v,children:f()})]})},wx=e=>{let{id:t,count:i=0,pluralize:n=!1,...s}=e;const r=(0,O.Z)(),a=M(r.locale),o=n?"".concat(t,".").concat(a(i)):t;return(0,z.jsx)(vt.Z,{...s,id:o})};function Px(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function zx(e){var t,i;return i=t=class extends m.Component{render(){return(0,z.jsx)(yi.Consumer,{children:t=>{if(!t)throw new Error("Missing tracking provider");return(0,z.jsx)(e,{...this.props,track:t.tracker.track})}})}},Px(t,"displayName",b(e)),Px(t,"WrappedComponent",e),i}function Tx(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let Fx;!function(e){e.Original="original",e.Translating="translating",e.Translated="translated"}(Fx||(Fx={}));class Nx extends m.Component{constructor(){super(...arguments),Tx(this,"state",{status:this.props.isTranslated?Fx.Translated:Fx.Original,isTracked:!1}),Tx(this,"translateById",(e=>(0,z.jsx)(wx,{id:"translation.status.".concat(e)}))),Tx(this,"toggleTranslation",(async()=>{const{onClick:e,isTranslated:t}=this.props,{status:i}=this.state;if(i===Fx.Translating)return;const n=i;this.setState({status:Fx.Translating}),await e(t),this.setState({status:n===Fx.Original?Fx.Translated:Fx.Original})})),Tx(this,"trackButtonClick",(()=>{const{tracking:e,track:t}=this.props;e&&t(Ri(e))})),Tx(this,"handleClick",(()=>{this.state.isTracked||(this.trackButtonClick(),this.setState({isTracked:!0})),this.toggleTranslation()})),Tx(this,"renderButton",(()=>{const{status:e}=this.state,t=e===Fx.Translating?void 0:"primary";return(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center",children:[(0,z.jsx)(ht.Z,{name:"globe",size:ht.Z.Size.Regular,color:ht.Z.Color.Primary,aria:{"aria-hidden":"true"}}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsxs)("div",{children:[e===Fx.Translated&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:this.translateById("translated_prefix")}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)("span",{children:""}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small})]}),(0,z.jsx)(xt.Z,{text:this.translateById(e),theme:t})]})]})}))}static getDerivedStateFromProps(e,t){return t.status===Fx.Translating?null:{status:e.isTranslated?Fx.Translated:Fx.Original}}componentDidMount(){!this.props.isTranslated&&this.props.autotranslate&&this.toggleTranslation()}render(){const{renderButton:e}=this.props,{status:t}=this.state;return(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,onClick:this.handleClick,type:gt.Z.Type.Navigating,children:e?e(t):this.renderButton()})}}Tx(Nx,"defaultProps",{isTranslated:!1});const Lx=zx(Nx),Ex=()=>{const e=(0,p.I0)(),t=U("conversation.translation"),i=(0,p.v9)(Od),n=(0,p.v9)(X),s=(0,p.v9)(Hd);return s?(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center",children:(0,z.jsx)(gt.Z,{children:(0,z.jsx)(Lx,{isTranslated:i,autotranslate:!1,onClick:t=>{n&&s&&e($p({conversationId:s,translate:!t}))},tracking:{target:qm.TranslateMessage,targetDetails:s.toString()},renderButton:e=>{const i=e===Fx.Translating?void 0:"primary";return(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center u-justify-content-center u-flex-direction-column",children:[(0,z.jsx)(xt.Z,{text:t(e),theme:i}),e===Fx.Translated&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),(0,z.jsx)(xt.Z,{text:t("translated_by"),type:xt.Z.Type.Subtitle})]})]})}})})}):null};var Ox=i(22439);const Rx=()=>{const e=(0,O.Z)();return{formatRelativeTime:t=>{const i=Number("string"==typeof t?new Date(t):t),{value:n,unit:s}=It(i);return e.formatRelativeTime(n,s)}}};let Dx;!function(e){e.ItemDescription="idc",e.ItemComment="icm",e.ForumPost="fp",e.UserAbout="ua",e.PrivateMessaging="msg",e.FeedbackMessage="fbm",e.WebConversation="wcn"}(Dx||(Dx={}));const Ax=e=>{let{isSystem:t,isCurrentAuthor:i=!1,photo:n,profileUrl:s,alt:r}=e;const a=Qe(n),o=(0,z.jsx)(Tp,{src:a,isSystem:t,size:Kl.U.Size.Medium,styling:Kl.U.Styling.Circle,alt:r});return i?null:s?(0,z.jsx)("a",{href:s,children:o}):o},Mx=()=>{const e=U(),t=U("conversation.intro_message"),{formatRelativeTime:i}=Rx(),n=(0,p.v9)(Gd),s=e=>e?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),(0,z.jsx)("div",{className:"u-flexbox u-align-items-center",children:e})]}):null,r=()=>{if(!n)return null;const e=n.reviewCount||0;return t("reviews_count",{count:e},{count:e})};if(!n||n.isSystem)return null;const a=y()("conversation-message","conversation-message__intro");return(0,z.jsxs)("div",{className:"u-flexbox",children:[(()=>{if(!n)return null;const{photo:e,profileUrl:i,isSystem:s}=n;return(0,z.jsx)("div",{className:"u-ui-margin-right-regular",children:(0,z.jsx)(Ax,{photo:e,profileUrl:i,isSystem:s,alt:t("a11y.user_profile_picture",{username:n.login})})})})(),(0,z.jsx)("div",{className:a,"data-ch":Dx.PrivateMessaging,children:(0,z.jsx)(Lt.Z,{children:(0,z.jsxs)("div",{"aria-label":t("a11y.message_from_user",{username:n.login}),children:[n?(0,z.jsx)(xt.Z,{text:t("conversation_greeting",{username:n.login}),type:xt.Z.Type.Title}):null,(()=>{if(!n)return null;const{lastLoginTime:i,feedbackReputation:s}=n,a=$e(s);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{}),(0,z.jsx)(Ox.Z,{value:a,text:r(),emptyStateText:e("user.feedback.no_reviews"),aria:{"aria-label":a&&t("a11y.rating",{rating:a,max_rating:5})||""}}),i&&(0,z.jsx)(x.Z,{size:x.Z.Size.Medium})]})})(),s((()=>{const e=(()=>{if(!n)return null;const{locationDescription:e}=n;return e})();return e?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(ht.Z,{name:"location-pin",size:ht.Z.Size.Small,color:ht.Z.Color.GreyscaleLevel3,aria:{"aria-hidden":!0}}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(xt.Z,{text:e,aria:{"aria-label":t("a11y.user_location",{location:e})}})]}):null})()),s((()=>{if(null==n||!n.lastLoginTime)return null;const e=new Date(n.lastLoginTime);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(ht.Z,{name:"eye",size:ht.Z.Size.Small,color:ht.Z.Color.GreyscaleLevel3,aria:{"aria-hidden":!0}}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(xt.Z,{text:"".concat(t("last_seen")," ").concat(i(e)),aria:{"aria-label":t("a11y.last_seen",{logon_date:i(e)})}})]})})())]})})})]})};function Ux(e){return e.entityType===Hc.Message||e.entityType===Hc.PortalMessage}const Bx=e=>{const t=e.primary?ic.I.Styling.Filled:void 0,i=(0,v.omit)(e,"primary");return(0,z.jsx)(ic.I,{...i,size:e.size||ic.I.Size.Small,styling:t})};var qx=i(96575);const Vx="packageSizes",Hx={packageSizes:{},ui:{transactionPackagesUi:{ids:[],packageSizes:{uiState:Ne.Idle,errors:null},packageSelection:{uiState:Ne.Idle,errors:null}},catalogPackagesUi:{ids:[],packageSizes:{uiState:Ne.Idle,errors:null}}},suggestedPackageSizeCode:void 0};function Gx(e,t){e.uiState=t}function Wx(e,t){Gx(e,Ne.Failure),e.errors=t}function Xx(e,t,i,n){const s=e.ui[t];Gx(s.packageSizes,Ne.Success),s.packageSizes.errors=null,function(e,t,i){t.forEach((t=>{const{id:n}=t;e.packageSizes[n]=t,e.isOfflineVerificationEligible=i}))}(e,i,n),function(e,t){e.ids=t.map((e=>e.id))}(s,i)}const Yx=(0,ad.oM)({name:Vx,initialState:Hx,reducers:{fetchTransactionPackageSizesRequest:e=>{const{transactionPackagesUi:{packageSizes:t}}=e.ui;Gx(t,Ne.Pending)},fetchTransactionPackageSizesSuccess:(e,t)=>{const{packageSizes:i}=t.payload;Xx(e,"transactionPackagesUi",i)},fetchTransactionPackageSizesFailure:(e,t)=>{const{transactionPackagesUi:{packageSizes:i}}=e.ui;Wx(i,t.payload.errors)},fetchCatalogPackageSizesRequest:e=>{const{catalogPackagesUi:{packageSizes:t}}=e.ui;Gx(t,Ne.Pending)},fetchCatalogPackageSizesSuccess:(e,t)=>{const{packageSizes:i,isOfflineVerificationEligible:n}=t.payload;Xx(e,"catalogPackagesUi",i,n)},fetchCatalogPackageSizesFailure:(e,t)=>{const{catalogPackagesUi:{packageSizes:i}}=e.ui;Wx(i,t.payload.errors)},fetchSuggestedPackageSizeCodeRequest:e=>{const{catalogPackagesUi:{packageSizes:t}}=e.ui;Gx(t,Ne.Pending)},fetchSuggestedPackageSizeCodeSuccess:(e,t)=>{const{suggestedPackageSizeCode:i}=t.payload;!function(e,t,i){const n=e.ui.catalogPackagesUi;Gx(n.packageSizes,Ne.Success),n.packageSizes.errors=null,e.suggestedPackageSizeCode=i}(e,0,i)},fetchSuggestedPackageSizeCodeFailure:(e,t)=>{const{catalogPackagesUi:{packageSizes:i}}=e.ui;Wx(i,t.payload.errors)},selectTransactionPackageSizeRequest:e=>{const{transactionPackagesUi:{packageSelection:t}}=e.ui;Gx(t,Ne.Pending)},selectTransactionPackageSizeSuccess:e=>{const{transactionPackagesUi:{packageSelection:t}}=e.ui;Gx(t,Ne.Success),t.errors=null},selectTransactionPackageSizeFailure:(e,t)=>{const{transactionPackagesUi:{packageSelection:i}}=e.ui;Wx(i,t.payload.errors)}}}),{actions:Kx}=Yx,Jx={[Vx]:Yx.reducer},Qx=(Yx.reducer,e=>e.packageSizes),$x=e=>Qx(e).ui,ef=(0,B.P1)($x,(e=>{let{transactionPackagesUi:t}=e;return t})),tf=(0,B.P1)($x,(e=>{let{catalogPackagesUi:t}=e;return t})),nf=(0,B.P1)(ef,(e=>{let{packageSizes:t}=e;return t})),sf=(0,B.P1)(tf,(e=>{let{packageSizes:t}=e;return t})),rf=(0,B.P1)(ef,(e=>{let{packageSelection:t}=e;return t})),af=e=>e.filter((e=>{let{custom:t}=e;return t})),of=e=>e.filter((e=>{let{standard:t}=e;return t})),lf=e=>e.filter((e=>{let{custom:t,standard:i}=e;return!t&&!i})),cf=(e,t)=>Qx(e).packageSizes[t],df=e=>tf(e).ids.map((t=>cf(e,t))),uf=e=>Qx(e).suggestedPackageSizeCode,mf=(0,B.P1)(df,(e=>af(e))),pf=(0,B.P1)(df,(e=>of(e))),gf=(0,B.P1)(df,(e=>lf(e))),hf=e=>Qx(e).isOfflineVerificationEligible,xf=e=>ef(e).ids.map((t=>cf(e,t))),ff=((0,B.P1)(xf,(e=>af(e))),(0,B.P1)(xf,(e=>of(e))),(0,B.P1)(xf,(e=>lf(e))),"shippingConfig"),yf=e=>(e=>e[ff])(e).custom,vf=(0,B.P1)(yf,(e=>{let{config:t}=e;return null==t?void 0:t.prices})),_f=(0,B.P1)(yf,(e=>{let{ui:t}=e;return t})),bf={custom:{ui:Ne.Idle,config:null}},jf=(0,ad.oM)({name:ff,initialState:bf,reducers:{fetchCustomShipmentConfigRequest:e=>{e.custom.ui=Ne.Pending},fetchCustomShipmentConfigSuccess:(e,t)=>{e.custom.ui=Ne.Success,e.custom.config=t.payload.config},fetchCustomShipmentConfigFailure:e=>{e.custom.ui=Ne.Failure}}}),{actions:Sf}=jf,Zf={[ff]:jf.reducer};jf.reducer;const If=function(){const e=Ql();return(0,m.useCallback)((t=>e?"".concat(Be.Fv,"/assets/").concat(t.replace(".","-dark.")):"".concat(Be.Fv,"/assets/").concat(t)),[e])},Cf=e=>{let{transactionId:t,isOpen:i,onClose:n}=e;const s=(0,p.I0)(),{track:r}=vi(),a=U("conversation.actions.confirm_package_size.modal"),o=If(),l=Ql(),c=(0,p.v9)(xf),d=(0,p.v9)(nf),u=(0,p.v9)(rf),g=(0,p.v9)(vf),f=(0,p.v9)(_f),y=(0,p.v9)(Nc),[_,b]=(0,m.useState)(),[j,S]=(0,m.useState)(null);function Z(e){if(""===e&&void 0===e||!g)return!1;const t=Number(e),i=Number(g.minimum.amount),n=Number(g.maximum.amount);return!!(0,v.isFinite)(t)&&!(t>n||t<i)}(0,m.useEffect)((()=>{s(Kx.fetchTransactionPackageSizesRequest({transactionId:t})),s(Sf.fetchCustomShipmentConfigRequest())}),[s,t]);const I=e=>()=>{S(e)};function C(){var e,i;null!==j&&c&&(c[j].custom&&!Z(_)||(e=c[j].id,i=Number(_),function(e){r(Ri({screen:$t.MessageReply,target:qm.SubmitPackageSize,targetDetails:JSON.stringify({parcel_size:e,transaction_id:t})}))}(e),s(Kx.selectTransactionPackageSizeRequest({transactionId:t,packageSizeId:e,customShipmentPrice:i}))))}function k(e){b(e.currentTarget.value)}function w(e,t){if(!e||e&&!t)return null;if(!g)return null;const{minimum:i}=g;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(gh,{name:"custom_package_size_cost",title:a("input_textarea_title"),placeholder:Ua(i,y),onChange:k,value:_,styling:"tight"})]})}function P(e){if(!e.image)return null;const t=l?e.image.dark:e.image.light;return(0,z.jsx)(Kl.U,{src:t,fallbackSrc:o("items/upload/parcel-size-placeholder.svg"),size:Kl.U.Size.XLarge,testId:"package-size-".concat(e.code.toLowerCase(),"-image")})}function T(e){const{errors:t,uiState:i}=e;return!t||(0,v.isEmpty)(t)||i!==Ne.Failure?null:(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center",children:(0,z.jsx)(zm.Z,{text:t[0].value,theme:"warning"})})}return u.uiState===Ne.Success&&(0,ls.sl)(),(0,z.jsxs)(cp.Z,{show:i,defaultCallback:n,children:[(0,z.jsx)(Pm.Z,{right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,onClick:n,deprecatedIconName:"x",inline:!0,aria:{"aria-label":a("a11y_close_icon")}}),body:a("title")}),(0,z.jsx)(h.Z,{}),(0,z.jsx)("div",{className:"modal-contained-content",children:d.uiState===Ne.Pending||f===Ne.Pending?(0,z.jsx)(Mp,{testId:"package-sizes-loader",styling:Mp.Styling.Wide}):null==c?void 0:c.map(((e,t)=>function(e,t){const{id:i,title:n,weightDescription:s,formatDescription:r,code:o}=e,l=a("package_description.".concat((0,v.toLower)(o))),c=j===t;return(0,z.jsxs)(m.Fragment,{children:[(0,z.jsx)(gt.Z,{title:s?"".concat(n,"(").concat(s,")"):n,body:(0,z.jsxs)(z.Fragment,{children:[r||l,w(c,e.custom)]}),clickable:!0,suffix:(0,z.jsx)(qx.J,{name:"select_package_size",checked:c}),onClick:I(t),prefix:P(e),testId:"package-size-cell-".concat(i)}),(0,z.jsx)(h.Z,{})]},i)}(e,t)))}),T(d),(0,z.jsxs)("div",{className:"u-ui-margin-large",children:[function(){const e=null===j||!Z(_)&&c[j].custom;return(0,z.jsx)(ic.I,{text:a("confirm"),onClick:C,disabled:e,isLoading:u.uiState===Ne.Pending,theme:"primary",styling:ic.I.Styling.Filled,testId:"package-sizes-modal-confirm-button"})}(),T(u)]})]})},kf=e=>{let{primary:t,title:i,inverse:n,theme:s,size:r}=e;const{track:a}=vi(),o=(0,p.v9)(qd),[l,c]=(0,m.useState)(!1);return o?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Bx,{primary:t,onClick:()=>{c(!0),a(Ri({screen:$t.MessageReply,target:qm.PickPackageSize,targetDetails:JSON.stringify({transaction_id:o})}))},text:i,size:r,theme:s,inverse:n,testId:"confirm-package-size-button"}),(0,z.jsx)(Cf,{isOpen:l,transactionId:o,onClose:()=>c(!1)})]}):null},wf=e=>{let{primary:t,title:i,inverse:n,theme:s,size:r}=e;const{track:a}=vi(),o=(0,p.v9)(qd),[l,c]=(0,m.useState)(i),[d,u]=(0,m.useState)(!1),[g,h]=(0,m.useState)(!1);return o?(0,z.jsx)(Bx,{text:l,primary:t,disabled:d,size:r,theme:s,inverse:n,isLoading:g,onClick:async function(){if(function(){const e={transaction_id:o};a(Ri({screen:$t.MessageReply,target:qm.ReuploadItem,targetDetails:JSON.stringify(e)}))}(),!o)return;u(!1),h(!0);const e=await(0,Fe.NXe)(o);e.code===pm.Q.Ok&&(h(!1),c(i)),"errors"in e&&e.code===pm.Q.ValidationError&&(c(e.errors[0].value),u(!0),h(!1)),(0,ls.sl)()},testId:"conversation-actions-reupload-item"}):null};let Pf;!function(e){e.Refund="refund",e.RequestToReturn="request_to_return"}(Pf||(Pf={}));const zf="complaint",Tf=e=>e[zf],Ff=(0,B.P1)(Tf,(e=>{let{ui:t}=e;return t})),Nf=e=>Tf(e).complaint,Lf=(0,B.P1)(Ff,(e=>e.uiState)),Ef=((0,B.P1)(Ff,(e=>e.error)),{complaint:void 0,ui:{uiState:Ne.Idle,error:null}}),Of=(0,ad.oM)({name:zf,initialState:Ef,reducers:{getComplaintRequest:e=>{e.ui.uiState=Ne.Pending},getComplaintSuccess:(e,t)=>{e.ui.uiState=Ne.Success,e.complaint=t.payload},getComplaintFailure:(e,t)=>{const{error:i}=t.payload;e.ui.uiState=Ne.Failure,e.ui.error=i}}}),{actions:Rf}=Of,Df={[zf]:Of.reducer},Af=(Of.reducer,e=>{let{isOpen:t,title:i,body:n,submitButtonText:s,onSubmit:r,onClose:a}=e;const o=U("conversation.actions.resolve_complaint.modal");return(0,z.jsx)(cp.Z,{show:t,title:i,body:n,actions:[{text:s,style:cp.Z.ActionStyling.Filled,callback:r,testId:"resolve-issue-modal--submit-button"},{text:o("cancel"),callback:a}]})}),Mf=e=>{let{isOpen:t,transactionId:i,onClose:n}=e;const s=U("conversation.insufficient_balance_modal");return(0,m.useEffect)((()=>{!function(){const e=new Date;e.setTime(e.getTime()+15e3),es("allowed-faq-entry","936",e)}()}),[]),(0,z.jsx)(_p,{type:bp.InsufficientBalance,accessChannel:Be.Si.ConversationTx,render:(e,r)=>(0,z.jsx)(cp.Z,{title:s("title"),body:s("body"),actions:[{text:s("actions.contact"),style:cp.Z.ActionStyling.Filled,url:(0,ys.Iq)(Me.Kss,{access_channel:Be.Si.ConversationTx,faq_entry_id:r,transactionId:i})},{text:s("actions.close"),style:cp.Z.ActionStyling.Flat,callback:n}],show:t})})};var Uf;!function(e){e[e.ResolveIssue=0]="ResolveIssue",e[e.InsufficientBalance=1]="InsufficientBalance"}(Uf||(Uf={}));const Bf=e=>{let{primary:t,title:i,inverse:n,theme:s,size:r}=e;const{track:a}=vi(),o=(0,p.I0)(),l=(0,p.v9)(qd),c=(0,p.v9)(au),d=(0,p.v9)(Ad),u=(0,p.v9)(Nf),[g,h]=(0,m.useState)(null);function x(){h(null)}(0,m.useEffect)((()=>{c&&o(Rf.getComplaintRequest({complaintId:Number(c)}))}),[o,c]);const f=null==u?void 0:u.resolutions.find((e=>e.action===Pf.Refund));return f&&l?(0,z.jsxs)("div",{className:"u-ui-margin-bottom-regular",children:[(0,z.jsx)(Bx,{text:i,primary:t,size:r,theme:s,inverse:n,onClick:function(){h(Uf.ResolveIssue)}}),(0,z.jsx)("span",{"data-testid":"resolve-modal",children:(0,z.jsx)(Af,{isOpen:g===Uf.ResolveIssue,title:f.confirmTitle,body:f.confirmation,submitButtonText:f.confirmButton,onSubmit:async function(){const e={transaction_id:l};if(a(Ri({target:qm.ResolveComplaint,targetDetails:JSON.stringify(e)})),!c)return;const t=await(0,Fe.v4K)(c);"errors"in t?t.code===pm.Q.ValidationError&&"wallet_amount"===t.errors[0].field&&(null==d?void 0:d.userSide)===md.Seller&&(h(Uf.InsufficientBalance),l&&a(rn({screen:$t.InsufficientBalanceModal,transactionId:l}))):(0,ls.sl)()},onClose:x})}),(0,z.jsx)(Mf,{isOpen:g===Uf.InsufficientBalance,transactionId:l,onClose:x})]}):null},qf=e=>{let{primary:t,title:i,inverse:n,theme:s,size:r}=e;const{track:a}=vi(),o=(0,p.v9)(qd),l=(0,p.v9)(au);return o&&l?(0,z.jsx)(Bx,{text:i,primary:t,size:r,theme:s,inverse:n,onClick:()=>{if(!l)return;(0,ls.ru)((0,Me._5i)(l));const e={transaction_id:o};a(Ri({target:qm.ViewComplaint})),a(Ri({target:qm.ViewIssueDetails,targetDetails:JSON.stringify(e)}))},testId:"view-complaint-action-button"}):null},Vf=e=>{let{title:t,primary:i,size:n,theme:s,inverse:r}=e;const{track:a}=vi(),o=(0,p.v9)(ou),l=(0,p.v9)(qd);return(0,z.jsx)(Bx,{primary:i,text:t,size:n,theme:s,inverse:r,onClick:function(){o&&(function(){const e={transaction_id:l};a(Ri({target:qm.DownloadShippingLabel,targetDetails:JSON.stringify(e)}))}(),(0,ls.mZ)(o))},testId:"download-shipping-label-button"})},Hf=e=>{let{title:t,primary:i,size:n,theme:s,inverse:r}=e;const a=(0,p.v9)(qd);return a?(0,z.jsx)(Bx,{text:t,primary:i,size:n,theme:s,inverse:r,onClick:async function(){a&&(await(0,Fe.OdC)(a)).code===pm.Q.Ok&&(0,ls.sl)()}}):null},Gf=e=>{let{primary:t,title:i,inverse:n,theme:s,size:r}=e;const a=(0,p.v9)(qd);return a?(0,z.jsx)(Bx,{text:i,primary:t,size:r,theme:s,inverse:n,onClick:async function(){a&&(await(0,Fe.O6N)(a)).code===pm.Q.Ok&&(0,ls.sl)()}}):null};var Wf=i(265);const Xf=e=>{let{trackingDetails:t}=e;const{track:i}=vi(),n=(0,p.v9)(qd);function s(e,t){const s={transaction_id:n,carrier_id:e,carrier_priority:t};return()=>{i(Ri({target:qm.OpenTrackingPage,screen:$t.TrackShipmentView,targetDetails:JSON.stringify(s)}))}}function r(e,t){const i=t?xt.Z.Type.Title:xt.Z.Type.Body;return(0,z.jsx)("div",{className:"timeline__content",children:(0,z.jsx)(gt.Z,{testId:"timeline-content-".concat(e.timestamp),styling:gt.Z.Styling.Tight,theme:"transparent",title:(0,z.jsx)(xt.Z,{text:e.message,type:i,theme:"amplified"}),body:(0,z.jsx)(xt.Z,{text:(0,z.jsx)(_t.Ji,{value:e.timestamp,year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})}),suffix:e.carrier&&(0,z.jsx)("a",{href:e.carrier.trackingUrl,target:"_blank",rel:"noopener noreferrer","data-testid":"carrier_url",onClick:s(e.carrier.id,e.carrier.priority),children:(0,z.jsx)(ht.Z,{name:"redirect",color:ht.Z.Color.GreyscaleLevel4})})})})}function a(e,t){const i="finished"===e.cellType,n=t?"status-active":"check-circle";return(0,z.jsx)(ht.Z,{name:i?"check-circle-filled":n,color:ht.Z.Color.Primary})}return(0,z.jsx)("div",{className:"timeline__wrapper",children:t.map(((e,i)=>{const n=0===i,s=t.length===i+1;return(0,z.jsxs)(m.Fragment,{children:[(0,z.jsxs)("div",{className:y()("timeline__item",n?"timeline__item--active":null),children:[(0,z.jsxs)("div",{className:"timeline__mark",children:[a(e,n),!s&&(0,z.jsx)("div",{className:"timeline__separator"})]}),r(e,n)]}),!s&&(0,z.jsx)("div",{className:"timeline__connector",children:(0,z.jsx)("div",{className:"timeline__connector-line"})})]},e.timestamp)}))})},Yf=e=>{let{transactionId:t,isOpen:i,onClose:n,screen:s}=e;const r=U("conversation.tracking_details.mark_as_delivered_to_sender"),{track:a}=vi();return(0,z.jsx)(cp.Z,{show:i,defaultCallback:n,title:r("title"),body:r("body"),actions:[{text:r("confirm"),callback:async function(){!function(){const e={transaction_id:t};a(Ri({screen:s,target:qm.MarkAsReceived,targetDetails:JSON.stringify(e)}))}(),await(0,Fe.pxw)(t),n(),(0,ls.sl)()},style:cp.Z.ActionStyling.Filled},{text:r("close"),callback:n,style:cp.Z.ActionStyling.Flat}]})},Kf=e=>{let{transactionId:t,isOpen:i,onClose:n,screen:s,userSide:r}=e;const{track:a}=vi(),o=r===md.Buyer,l=U(o?"conversation.tracking_details.mark_as_received_confirmation":"conversation.tracking_details.mark_as_received_confirmation.seller");return(0,z.jsx)(cp.Z,{show:i,defaultCallback:n,title:l("title"),body:l("body"),actions:[{text:l("confirm"),callback:async function(){await(0,Fe.lXB)(t),function(){const e={transaction_id:t};a(Ri({screen:s,target:qm.MarkAsReceived,targetDetails:JSON.stringify(e)}))}(),n(),(0,ls.sl)()},style:cp.Z.ActionStyling.Filled,testId:"mark-as-received-confirmation-modal-confirm"},{text:l("close"),callback:n,style:cp.Z.ActionStyling.Flat}]})},Jf=e=>{let{onClose:t,isOpen:i,transactionId:n}=e;const s=(0,p.I0)(),{track:r}=vi(),a=U("conversation.tracking_journey_details"),o=(0,p.v9)(tu),l=(0,p.v9)(iu),[c,d]=(0,m.useState)(!1),[u,g]=(0,m.useState)(!1),[f,y]=(0,m.useState)(!1);(0,m.useEffect)((()=>{n&&i&&s(Dm.getTrackingJourneySummaryRequest({transactionId:n}))}),[s,n,i]);const v=()=>(0,z.jsx)(Mp,{styling:Mp.Styling.Wide,testId:"tracking-journey-summary-modal-loader"});return n?(0,z.jsxs)(cp.Z,{show:i,closeOnOverlay:!0,enableCloseButton:!0,children:[(0,z.jsx)(Pm.Z,{right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,onClick:()=>{const e={transaction_id:n};r(Ri({target:qm.ClosePage,screen:$t.TrackShipmentView,targetDetails:JSON.stringify(e)})),t()},deprecatedIconName:"x",inline:!0,testId:"tracking-journey-close"}),body:a("title")}),(0,z.jsx)(h.Z,{}),(0,z.jsx)("div",{className:"modal-contained-content",children:null!=o&&o.details.length?l===Ne.Pending?v():(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{testId:"tracking-journey-modal-tracking-details",children:(0,z.jsxs)(Lt.Z,{styling:Lt.Z.Styling.Tight,children:[(0,z.jsx)(gt.Z,{onClick:(_=null==o||null===(I=o.currentCarrier)||void 0===I?void 0:I.trackingCode,()=>{(()=>{var e,t;const i={transaction_id:n,carrier_id:null==o||null===(e=o.currentCarrier)||void 0===e?void 0:e.id,carrier_priority:null==o||null===(t=o.currentCarrier)||void 0===t?void 0:t.priority,location:"top"};r(Ri({target:qm.CopyTrackingNumber,screen:$t.TrackShipmentView,targetDetails:JSON.stringify(i)}))})(),y(!0),setTimeout((()=>{y(!1)}),1e3),_&&navigator.clipboard.writeText(_)}),type:gt.Z.Type.Navigating,body:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,theme:"transparent",suffix:(0,z.jsx)(ht.Z,{name:"copy",color:ht.Z.Color.GreyscaleLevel3,testId:"tracking-journey-modal-copy-tracking-number"}),children:(0,z.jsxs)("div",{className:"u-flexbox u-flex-wrap",children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:a("tracking_number")}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)(Wf.Z,{placement:Wf.Z.Placement.Bottom,hover:!1,show:f,content:a("actions.copy_tracking_number"),children:(0,z.jsx)("div",{className:"u-text-wrap",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,theme:"muted",text:null==o||null===(C=o.currentCarrier)||void 0===C?void 0:C.trackingCode})})})]})})}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{onClick:()=>{var e,t;const i={transaction_id:n,carrier_id:null==o||null===(e=o.currentCarrier)||void 0===e?void 0:e.id,carrier_priority:null==o||null===(t=o.currentCarrier)||void 0===t?void 0:t.priority,location:"top"};r(Ri({target:qm.OpenTrackingPage,screen:$t.TrackShipmentView,targetDetails:JSON.stringify(i)}))},type:gt.Z.Type.Navigating,body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:a("provider_details",{carrier_name:null==o||null===(k=o.currentCarrier)||void 0===k?void 0:k.name,"tracking-page-link":e=>{var t;return(0,z.jsx)("a",{href:null==o||null===(t=o.currentCarrier)||void 0===t?void 0:t.trackingUrl,target:"_blank",rel:"noopener noreferrer",children:e})}})})})]})}),null!=o&&null!==(b=o.estimatedDetail)&&void 0!==b&&b.status?(0,z.jsx)(gt.Z,{testId:"tracking-journey-modal-estimated-delivery",title:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{width:xt.Z.Width.Parent,type:xt.Z.Type.Heading,text:null==o||null===(j=o.estimatedDetail)||void 0===j?void 0:j.status}),(0,z.jsx)(xt.Z,{width:xt.Z.Width.Parent,type:xt.Z.Type.Heading,text:null==o||null===(S=o.estimatedDetail)||void 0===S?void 0:S.timePeriod})]}),body:(null==o||null===(Z=o.estimatedDetail)||void 0===Z?void 0:Z.message)&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,theme:"inherit",text:o.estimatedDetail.message})]})}):null,(0,z.jsx)(yt.Z,{type:yt.Z.Type.Leading,text:a("label")}),(null==o?void 0:o.details)&&(0,z.jsx)(Xf,{trackingDetails:o.details})]}):l===Ne.Pending?v():(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{type:yt.Z.Type.Leading,text:a("label")}),(0,z.jsx)(gt.Z,{prefix:(0,z.jsx)(ht.Z,{name:"status-active",color:ht.Z.Color.Primary}),children:(0,z.jsx)(xt.Z,{text:a("no_details"),theme:"amplified"})})]})}),(null==o?void 0:o.canMarkAsReceived)&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{onClick:()=>d(!0),children:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,text:a("actions.confirm"),testId:"tracking-journey-mark-as-received"})})]}),(null==o?void 0:o.canMarkAsReturnedToSender)&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{onClick:()=>g(!0),children:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,text:a("actions.confirm")})})]}),(0,z.jsx)(Kf,{isOpen:c,onClose:()=>d(!1),transactionId:n,screen:$t.TrackShipmentView,userSide:null==o?void 0:o.userSide}),(0,z.jsx)(Yf,{transactionId:n,isOpen:u,onClose:()=>g(!1),screen:$t.TrackShipmentView})]}):null;var _,b,j,S,Z,I,C,k},Qf=e=>{let{title:t,primary:i,size:n,theme:s,inverse:r}=e;const{track:a}=vi(),o=(0,p.v9)(qd),[l,c]=(0,m.useState)(!1);return o?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Bx,{text:t,primary:i,size:n,theme:s,inverse:r,onClick:()=>{(()=>{if(!o)return;const e={transaction_id:o};a(Ri({target:qm.TrackParcel,targetDetails:JSON.stringify(e)}))})(),o&&a(rn({screen:$t.TrackShipmentView,transactionId:o,variant:"modal"})),c(!0)}}),(0,z.jsx)(Jf,{isOpen:l,onClose:()=>c(!1),transactionId:o})]}):null},$f=e=>{let{title:t,primary:i,size:n,theme:s,inverse:r}=e;const a=(0,p.v9)(qd),o=(0,p.v9)(Ru),[l,c]=(0,m.useState)(!1);return a?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Bx,{text:t,primary:i,size:n,theme:s,inverse:r,onClick:()=>c(!0)}),(0,z.jsx)(Kf,{isOpen:l,onClose:()=>c(!1),transactionId:a,screen:$t.MessageReply,userSide:o})]}):null},ey=e=>{let{isOpen:t,onSubmit:i,onClose:n}=e;const{track:s}=vi(),r=U("conversation.confirm_parcel_sent_modal"),a=(0,p.v9)(qd),o=(0,p.v9)(Wu)===sd.LabelTypeReservationLink?"reservation_link_body":"body";return(0,z.jsx)(cp.Z,{title:r("title"),body:r(o),actions:[{text:r("actions.confirm"),style:cp.Z.ActionStyling.Filled,callback:function(){!function(){if(!a)return;const e={transaction_id:a};s(Ri({screen:$t.MessageReply,target:qm.ConfirmMarkTransactionAsShipped,targetDetails:JSON.stringify(e)}))}(),i()}},{text:r("actions.close"),style:cp.Z.ActionStyling.Flat,callback:n}],show:t})},ty=e=>{let{primary:t,title:i,inverse:n,theme:s,size:r}=e;const{track:a}=vi(),o=(0,p.v9)(qd),l=(0,p.v9)(Vn("nasa_qr_code_solution_v3")),[c,d]=(0,m.useState)(!1);async function u(){o&&(await(0,Fe.RlN)({transactionId:o}),(0,ls.sl)())}return o?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Bx,{text:i,primary:t,size:r,theme:s,inverse:n,onClick:(null==l?void 0:l.variant)===id.Disabled?u:function(){!function(){if(!o)return;const e={transaction_id:o};a(Ri({screen:$t.MessageReply,target:qm.MarkTransactionAsShipped,targetDetails:JSON.stringify(e)}))}(),d(!0)}}),(0,z.jsx)(ey,{isOpen:c,onSubmit:u,onClose:function(){d(!1)}})]}):null},iy="returnShipment",ny=e=>e[iy],sy=(0,B.P1)(ny,(e=>{let{ui:t}=e;return t})),ry=e=>ny(e).returnShipment,ay=e=>ny(e).shipmentItems,oy=e=>ny(e).returnShipmentOptions,ly=e=>ny(e).integratedShipmentOption,cy=e=>ny(e).customShipmentOption,dy=e=>ny(e).currencyConversion,uy=(0,B.P1)(sy,(e=>e.uiState)),my=(0,B.P1)(sy,(e=>e.error)),py=(0,B.P1)(sy,(e=>e.selectedShipmentOption)),gy=(0,B.P1)(sy,(e=>e.selectedPaymentOptionSide)),hy=e=>ny(e).returnShipmentOrder,xy=(0,B.P1)(sy,(e=>e.activeModal)),fy="checkout";let yy,vy,_y,by;!function(e){e[e.Home=1]="Home",e[e.PickupPoint=2]="PickupPoint",e[e.NoShipping=3]="NoShipping",e[e.Custom=4]="Custom"}(yy||(yy={})),function(e){e.Pickup="pickup",e.Home="home",e.Meetup="meetup",e.Custom="custom"}(vy||(vy={})),function(e){e.Address="to_address",e.PickupPoint="pickup_point",e.PaymentMethod="payment_method"}(_y||(_y={})),function(e){e.Modal="modal",e.SearchArea="search_area",e.UserLocation="user_location",e.Search="search"}(by||(by={}));const jy=1e3,Sy=5,Zy={ui:{errors:{byName:{},names:[]},checkoutData:Ne.Idle},formState:{errors:{paymentError:null,isKycConfirmationNeeded:!1,hasChecksumError:!1,hasShippingDiscountError:!1,isPaymentFailedAfterRedirect:!1,isPaymentProcessingTakesTooLong:!1}},payment:null,isPaymentProcessing:!1,checkoutData:null,configuration:null,blikPaymentAuth:null,paymentAuthAction:null,twoFactorVerification:null},Iy=(0,ad.oM)({name:fy,initialState:Zy,reducers:{setFieldError:(e,t)=>{const{fieldError:i}=t.payload;e.ui.errors.byName[i.field]=i.value,e.ui.errors.names.includes(i.field)||e.ui.errors.names.push(i.field)},setFieldErrors:(e,t)=>{const{fieldErrors:i}=t.payload;i.forEach((t=>{e.ui.errors.byName[t.field]=t.value})),e.ui.errors.names=i.map((e=>e.field))},removeFieldError:(e,t)=>{const{fieldName:i}=t.payload;e.ui.errors.byName[i]&&delete e.ui.errors.byName[i],(0,v.remove)(e.ui.errors.names,(e=>e===i))},removeFieldsErrors:e=>{e.ui.errors.byName={},e.ui.errors.names=[]},getCheckoutDataRequest:e=>{e.ui.checkoutData=Ne.Pending},getCheckoutDataSuccess:(e,t)=>{e.checkoutData=t.payload.checkout,e.ui.checkoutData=Ne.Success},getCheckoutDataFailure:e=>{e.isPaymentProcessing=!1,e.ui.checkoutData=Ne.Failure},updateCheckoutDataRequest:e=>{e.ui.checkoutData=Ne.Pending},updateCheckoutDataSuccess:(e,t)=>{e.checkoutData=t.payload.checkout,e.ui.checkoutData=Ne.Success},updateCheckoutDataFailure:e=>{e.isPaymentProcessing=!1,e.ui.checkoutData=Ne.Failure},setTwoFactorVerification:(e,t)=>{e.twoFactorVerification=t.payload},clearTwoFactorVerification:e=>{e.twoFactorVerification=null},setIsPaymentProcessing:(e,t)=>{e.isPaymentProcessing=t.payload.isPaymentProcessing},setPayment:(e,t)=>{e.payment=t.payload},setPaymentError:(e,t)=>{e.formState.errors.paymentError=t.payload.error},clearPaymentError:e=>{e.formState.errors.paymentError=null},setHasChecksumError:(e,t)=>{const{hasChecksumError:i}=t.payload;e.formState.errors.hasChecksumError=i},setHasShippingDiscountError:(e,t)=>{const{hasShippingDiscountError:i}=t.payload;e.formState.errors.hasShippingDiscountError=i},setIsKycConfirmationNeeded:(e,t)=>{const{isNeeded:i}=t.payload;e.formState.errors.isKycConfirmationNeeded=i},setIsPaymentFailedAfterRedirect:(e,t)=>{const{isPaymentFailedAfterRedirect:i}=t.payload;e.formState.errors.isPaymentFailedAfterRedirect=i},clearIsPaymentFailedAfterRedirect:e=>{e.formState.errors.isPaymentFailedAfterRedirect=!1},setIsPaymentProcessingTakesTooLong:(e,t)=>{const{isPaymentProcessingTakesTooLong:i}=t.payload;e.formState.errors.isPaymentProcessingTakesTooLong=i},clearBlikAuth:e=>{e.blikPaymentAuth=null},confirmBlikAuth:(e,t)=>{const{blikCode:i}=t.payload;e.blikPaymentAuth={blikCode:i}},cancelPaymentAuth:e=>{e.paymentAuthAction=null,e.isPaymentProcessing=!1},setPaymentAuthAction:(e,t)=>{e.paymentAuthAction=t.payload.paymentAuthAction},clearPaymentAuthAction:e=>{e.paymentAuthAction=null},setPaymentAuthActionError:(e,t)=>{const{message:i}=t.payload;e.formState.errors.paymentError={message:i},e.paymentAuthAction=null,e.isPaymentProcessing=!1},fetchConfigurationSuccess:(e,t)=>{e.configuration=t.payload.configuration},fetchConfigurationFailure:e=>{e.configuration=null}}}),{actions:Cy}=Iy,ky=(Iy.reducer,Iy.reducer);let wy,Py,zy,Ty,Fy;!function(e){e.Integrated="integrated",e.Custom="custom"}(wy||(wy={})),function(e){e.RefundSubtotal="refund_subtotal",e.Postage="postage",e.RefundTotal="refund_total"}(Py||(Py={})),function(e){e.Custom="custom",e.Integrated="integrated"}(zy||(zy={})),function(e){e.Seller="seller_pays",e.Buyer="buyer_pays"}(Ty||(Ty={})),function(e){e.ReturnCurrencyConversionModal="return_currency_conversion_modal",e.RequestReturnModal="request_return_modal",e.None="none"}(Fy||(Fy={}));const Ny={returnShipment:void 0,shipmentItems:void 0,returnShipmentOptions:void 0,integratedShipmentOption:void 0,customShipmentOption:void 0,returnShipmentOrder:void 0,ui:{error:null,uiState:Ne.Idle,selectedShipmentOption:void 0,selectedPaymentOptionSide:void 0,activeModal:void 0,returnLabelOrder:{fetchUiState:Ne.Idle,prepareUiState:Ne.Idle}}},Ly=(0,ad.oM)({name:iy,initialState:Ny,reducers:{getReturnShipmentRequest:e=>{e.ui.uiState=Ne.Pending},getReturnShipmentFailure:(e,t)=>{const{error:i}=t.payload;e.ui.uiState=Ne.Failure,e.ui.error=i},getReturnShipmentSuccess:(e,t)=>{var i;e.ui.uiState=Ne.Success,e.ui.error=null,e.returnShipment=t.payload,null!==(i=t.payload.payerSelection)&&void 0!==i&&i.length&&(void 0===e.ui.selectedPaymentOptionSide||e.ui.selectedPaymentOptionSide===Ty.Seller?e.ui.selectedPaymentOptionSide=Ty.Seller:e.ui.selectedPaymentOptionSide=Ty.Buyer)},getShipmentItemsRequest:e=>{e.ui.uiState=Ne.Pending},getShipmentItemsFailure:(e,t)=>{const{error:i}=t.payload;e.ui.uiState=Ne.Failure,e.ui.error=i},getShipmentItemsSuccess:(e,t)=>{e.ui.uiState=Ne.Success,e.ui.error=null,e.shipmentItems=t.payload},getReturnShippingOptionsRequest:e=>{e.ui.uiState=Ne.Pending},getReturnShippingOptionsFailure:(e,t)=>{const{error:i}=t.payload;e.ui.uiState=Ne.Failure,e.ui.error=i},getReturnShippingOptionsSuccess:(e,t)=>{const{returnShipment:i,currencyConversion:n}=t.payload,s=i.find((e=>e.code===wy.Integrated)),r=i.find((e=>e.code===wy.Custom));n&&(e.currencyConversion=n),e.ui.uiState=Ne.Success,e.ui.error=null,e.returnShipmentOptions=i,e.integratedShipmentOption=s,e.customShipmentOption=r,s?e.ui.selectedShipmentOption=wy.Integrated:r&&(e.ui.selectedShipmentOption=wy.Custom)},setSelectedReturnShippingOption:(e,t)=>{e.ui.selectedShipmentOption=t.payload.returnShippingOption},createCustomReturnShipmentRequest:e=>{e.ui.uiState=Ne.Pending},createCustomReturnShipmentFailure:(e,t)=>{const{error:i}=t.payload;e.ui.uiState=Ne.Failure,e.ui.error=i},createCustomReturnShipmentSuccess:e=>{e.ui.uiState=Ne.Success,e.ui.error=null},clearReturnShipmentOptions:e=>{e.ui.uiState=Ne.Idle,e.ui.error=null,e.returnShipmentOptions=void 0,e.integratedShipmentOption=void 0,e.currencyConversion=void 0,e.customShipmentOption=void 0,e.ui.selectedShipmentOption=void 0},prepareReturnLabelOrderRequest:e=>{e.ui.returnLabelOrder.prepareUiState=Ne.Pending},prepareReturnLabelOrderFailure:(e,t)=>{const{error:i}=t.payload;e.ui.returnLabelOrder.prepareUiState=Ne.Failure,e.ui.error=i},prepareReturnLabelOrderSuccess:(e,t)=>{const{returnShipmentOrder:i,currencyConversion:n}=t.payload;e.ui.returnLabelOrder.prepareUiState=Ne.Success,e.ui.error=null,e.returnShipmentOrder=i,n&&(e.currencyConversion=n)},setReturnShipmentSelectedPaymentOptionSide:(e,t)=>{e.ui.selectedPaymentOptionSide=t.payload.paymentOptionSide},cancelCheckout:e=>{e.ui.uiState=Ne.Idle,e.returnShipmentOrder=void 0},setActiveModal:(e,t)=>{const{modal:i}=t.payload;e.ui.activeModal=i},getReturnLabelOrderRequest:e=>{e.ui.returnLabelOrder.fetchUiState=Ne.Pending,e.returnShipmentOrder=void 0},getReturnLabelOrderFailure:e=>{e.ui.returnLabelOrder.fetchUiState=Ne.Failure,e.returnShipmentOrder=void 0},getReturnLabelOrderSuccess:(e,t)=>{e.ui.returnLabelOrder.fetchUiState=Ne.Success,e.returnShipmentOrder=t.payload.returnShipmentOrder}}}),{actions:Ey}=Ly,Oy={[iy]:Ly.reducer},Ry=(Ly.reducer,{configuration:null,buyerPhoneNumber:null,sellerPhoneNumber:null,errors:[],ui:{configuration:Ne.Idle,shippingContact:Ne.Idle,saveShippingContact:Ne.Idle,deleteShippingContact:Ne.Idle}}),Dy=(0,ad.oM)({name:vd,initialState:Ry,reducers:{fetchShippingContactConfigurationRequest:e=>{e.ui.configuration=Ne.Pending},fetchShippingContactConfigurationSuccess:(e,t)=>{const{configuration:i}=t.payload;e.configuration=i,e.ui.configuration=Ne.Success},fetchShippingContactConfigurationFailure:e=>{e.ui.configuration=Ne.Failure},saveTransactionShippingContactRequest:e=>{e.ui.saveShippingContact=Ne.Pending},saveTransactionShippingContactSuccess:(e,t)=>{const{buyerPhoneNumber:i,sellerPhoneNumber:n}=t.payload;e.buyerPhoneNumber=i,e.sellerPhoneNumber=n,e.ui.saveShippingContact=Ne.Success},saveTransactionShippingContactFailure:(e,t)=>{const{error:i}=t.payload;(0,v.isEmpty)(i)||e.errors.push(i),e.ui.saveShippingContact=Ne.Failure},deleteTransactionShippingContactRequest:e=>{e.ui.deleteShippingContact=Ne.Pending},deleteTransactionShippingContactSuccess:e=>{e.buyerPhoneNumber=null,e.sellerPhoneNumber=null,e.ui.deleteShippingContact=Ne.Success},deleteTransactionShippingContactFailure:e=>{e.ui.deleteShippingContact=Ne.Failure},setShippingContactField:(e,t)=>{const{name:i,value:n}=t.payload,s=(0,v.camelCase)(i);e[s]=n||e[s]||""},setShippingContactError:(e,t)=>{const{error:i}=t.payload;e.errors.push(i)},removeShippingContactError:(e,t)=>{const{error:i}=t.payload;e.errors=e.errors.filter((e=>{let{field:t,value:n}=e;return t!==i.field&&n!==i.value}))},removeShippingContactErrors:e=>{e.errors=[]},setShippingContactFieldUiState:(e,t)=>{const{field:i,uiState:n}=t.payload;e.ui[v.camelCase[i]]=n}},extraReducers:{[Cy.updateCheckoutDataRequest.type]:(e=>t=>{t.ui.shippingContact=e})(Ne.Pending),[Cy.updateCheckoutDataSuccess.type]:(e,t)=>{e.ui.shippingContact=Ne.Success,e.buyerPhoneNumber=t.payload.checkout.buyer.phoneNumber},[Dm.fetchTransactionRequestSuccess.type]:(e,t)=>{if(!t.payload.transaction)return;const{buyerPhoneNumber:i,sellerPhoneNumber:n}=t.payload.transaction;e.buyerPhoneNumber=i,e.sellerPhoneNumber=n,e.ui.shippingContact=Ne.Success},[Ey.getReturnShipmentSuccess.type]:(e,t)=>{const{phoneNumber:i}=t.payload;e.sellerPhoneNumber=i,e.ui.shippingContact=Ne.Success}}}),{actions:Ay}=Dy,My={[vd]:Dy.reducer},Uy=(Dy.reducer,"userAddress"),By=e=>e[Uy],qy=e=>By(e).address,Vy=(0,B.P1)(qy,(e=>(0,v.compact)([null==e?void 0:e.line1,null==e?void 0:e.line2,null==e?void 0:e.city,null==e?void 0:e.state,null==e?void 0:e.postalCode]).join(" "))),Hy=(0,B.P1)(By,(e=>{let{ui:t}=e;return t})),Gy=(0,B.P1)(Hy,(e=>e.uiState));(0,B.P1)(Hy,(e=>e.error));var Wy=i(3281),Xy=i(4354),Yy=i(12498),Ky=i(90778),Jy=i(74298),Qy=i(57735),$y=i(74226),ev=i(46760),tv=i(12009);let iv,nv;!function(e){e.CreditCard="CREDIT_CARD",e.MangoPayPaypal="MANGOPAY_PAYPAL",e.Sofort="SOFORT",e.Ideal="IDEAL",e.Maual="MANUAL",e.Wallet="WALLET",e.P24="P24",e.Trustly="TRUSTLY",e.Payconiq="PAYCONIQ",e.BlikDirect="BLIK_DIRECT",e.ApplePay="APPLE_PAY",e.GooglePay="GOOGLE_PAY"}(iv||(iv={})),function(e){e.Economy="economy",e.Standard="standard"}(nv||(nv={}));const sv=e=>e[fy],rv=e=>sv(e).shipping,av=(0,B.P1)(sv,(e=>{let{checkout:t}=e;return t})),ov=(0,B.P1)(av,(e=>{let{ui:t}=e;return t})),lv=(0,B.P1)(av,(e=>{let{checkoutData:t}=e;return t})),cv=(0,B.P1)(lv,(e=>null==e?void 0:e.services.shipping)),dv=(0,B.P1)(lv,(e=>(null==e?void 0:e.shipment)||null)),uv=(0,B.P1)(rv,(e=>{let{countryBounds:t}=e;return t})),mv=(0,B.P1)(rv,(e=>{let{nearbyPoints:t}=e;return t})),pv=(0,B.P1)(rv,(e=>{let{ui:t}=e;return t})),gv=(0,B.P1)(ov,(e=>{let{checkoutData:t}=e;return t})),hv=(0,B.P1)(pv,(e=>{let{pickupModal:t}=e;return t})),xv=(e,t)=>rv(e).ui.pickupModal[t],fv=(e,t)=>[Ne.Success,Ne.Failure].includes(rv(e).ui.pickupModal[t]),yv=(0,B.P1)(dv,(e=>null==e?void 0:e.pickupPoint)),vv=(0,B.P1)(dv,(e=>{var t,i;return!(null!=e&&null!==(t=e.carrier)&&void 0!==t&&t.custom||null!=e&&null!==(i=e.carrier)&&void 0!==i&&i.noShipping)})),_v=(0,B.P1)(cv,(e=>(null==e?void 0:e.selectedDeliveryType)||null)),bv=(0,B.P1)(dv,(e=>{var t,i;return{title:(null==e||null===(t=e.packageType)||void 0===t?void 0:t.title)||(null==e||null===(i=e.carrier)||void 0===i?void 0:i.buyerTitle),packageType:null==e?void 0:e.packageType,carrier:null==e?void 0:e.carrier}})),jv=(0,B.P1)(dv,(e=>null==e?void 0:e.packageType)),Sv=(0,B.P1)(jv,(e=>null==e?void 0:e.buyerPhoneRequirement)),Zv=(0,B.P1)(rv,(e=>{let{suggestedShippingPointCode:t}=e;return t})),Iv=(0,B.P1)(rv,(e=>{let{suggestedRateUuid:t}=e;return t})),Cv=(0,B.P1)(lv,(e=>{var t,i,n;return null==e||null===(t=e.services.shipping)||void 0===t||null===(i=t.deliveryTypes)||void 0===i||null===(n=i.pickup)||void 0===n?void 0:n.selectedRateUuid})),kv=(0,B.P1)(rv,(e=>{let{selectedServiceType:t}=e;return t||nv.Economy})),wv=(0,B.P1)(dv,(e=>{if(null==e||!e.carrier)return!1;switch(e.carrier.deliveryType){case yy.Home:case yy.PickupPoint:return!0;default:return!1}})),Pv=(0,B.P1)(rv,(e=>{let{selectedShippingPoint:t}=e;return t})),zv=(0,B.P1)(pv,(e=>{let{pickupPoints:t}=e;return t})),Tv=(0,B.P1)(rv,(e=>{let{shippingOptions:t}=e;return t})),Fv=(0,B.P1)(ov,(e=>{let{checkoutData:t}=e;return t})),Nv=(0,B.P1)(lv,(e=>{var t,i;return null!==(t=null==e||null===(i=e.services.shipping)||void 0===i?void 0:i.deliveryTypes)&&void 0!==t?t:null})),Lv=(0,B.P1)(Nv,(e=>(0,v.size)(e))),Ev=(0,B.P1)(dv,(e=>null==e?void 0:e.rateUuid)),Ov=(0,B.P1)(lv,(e=>null==e?void 0:e.shipment.packageType.itemOfflineVerificationEnabled)),Rv=e=>(e=>e[fy])(e).checkout,Dv=e=>Rv(e).checkoutData,Av=(0,B.P1)(Dv,(e=>(null==e?void 0:e.id)||null)),Mv=(0,B.P1)(Dv,(e=>(null==e?void 0:e.checksum)||"")),Uv=(0,B.P1)(Dv,(e=>(null==e?void 0:e.buyer.payInMethod)||null)),Bv=(0,B.P1)(Dv,(e=>(null==e?void 0:e.buyer.payInMethodsConfig)||null)),qv=(0,B.P1)(Dv,(e=>(null==e?void 0:e.pricing)||null)),Vv=(0,B.P1)(Dv,(e=>(null==e?void 0:e.pricing.conversion)||null)),Hv=(0,B.P1)(Bv,(e=>null!=e&&e.recommended?e.recommended[0]:null)),Gv=(0,B.P1)(Bv,(e=>(null==e?void 0:e.incentive)||null)),Wv=(0,B.P1)(Bv,(e=>(null==e?void 0:e.promotion)||null)),Xv=(0,B.P1)(Gv,Hv,((e,t)=>{if(e)return!1;if(!t)return!1;const{payInMethod:i,externalCard:n}=t;return i.code===iv.CreditCard&&!n})),Yv=(0,B.P1)(Gv,Hv,((e,t)=>{if(e)return!1;if(!t)return!1;const{payInMethod:i,externalCard:n}=t;return i.code===iv.CreditCard&&!!n})),Kv=(0,B.P1)(Dv,(e=>(null==e?void 0:e.buyer.creditCardId)||null)),Jv=(0,B.P1)(Dv,(e=>(null==e?void 0:e.buyer.card)||null)),Qv=(0,B.P1)(Dv,(e=>(null==e?void 0:e.pricing.shipping.finalPrice)||null)),$v=(0,B.P1)(Dv,(e=>null==e?void 0:e.services.offlineVerification)),e_=e=>Rv(e).isPaymentProcessing,t_=e=>Rv(e).twoFactorVerification,i_=e=>Rv(e).formState,n_=e=>Rv(e).payment,s_=e=>Rv(e).formState.errors.paymentError,r_=e=>Rv(e).ui,a_=e=>Rv(e).blikPaymentAuth,o_=e=>Rv(e).paymentAuthAction,l_=(0,B.P1)(Dv,(e=>!(null==e||!e.paymentAvailable))),c_=(0,B.P1)(Dv,(e=>(null==e?void 0:e.pricing.base.finalPrice)||null)),d_=(0,B.P1)(Dv,(e=>(null==e?void 0:e.items)||[])),u_=(0,B.P1)(Dv,(e=>!(null==e||!e.items)&&e.items.length>1)),m_=(0,B.P1)(Rv,(e=>{let{configuration:t}=e;return t})),p_=(0,B.P1)(m_,(e=>(null==e?void 0:e.threeDS2)||null)),g_=(e,t)=>Rv(e).ui.errors.byName[t],h_=(0,B.P1)(r_,(e=>{let{errors:t}=e;return t.names})),x_=(0,B.P1)(Dv,(e=>!(null==e||!e.seller.isBusiness))),f_=(0,B.P1)(Dv,(e=>null==e?void 0:e.buyer.shipmentToAddress)),y_=(0,B.P1)(i_,(e=>{let{errors:t}=e;return t.isKycConfirmationNeeded})),v_=(0,B.P1)(t_,(e=>!!e)),__=(0,B.P1)(i_,(e=>{let{errors:t}=e;return t.hasChecksumError})),b_=(0,B.P1)(i_,(e=>{let{errors:t}=e;return t.hasShippingDiscountError})),j_=(0,B.P1)(i_,(e=>{let{errors:t}=e;return t.isPaymentProcessingTakesTooLong})),S_=(0,B.P1)(i_,(e=>{let{errors:t}=e;return t.isPaymentFailedAfterRedirect})),Z_=(0,B.P1)(f_,h_,((e,t)=>!t.includes(_y.Address)&&!!e)),I_=(0,B.P1)(dv,vv,((e,t)=>{if(null==e||!e.carrier)return!1;if(!t)return!0;const{carrier:i,pickupPoint:n}=e,{deliveryType:s}=i;return!(!n&&s===yy.PickupPoint)})),C_=(0,B.P1)(Nv,_v,((e,t)=>!!e&&!!t)),k_=(0,B.P1)(a_,(e=>(null==e?void 0:e.blikCode)||null)),w_=(0,B.P1)(Dv,Uv,((e,t)=>(null==t?void 0:t.code)===iv.BlikDirect&&(!!e&&parseFloat(e.pricing.payment.payIn.amount)>0))),P_=(0,B.P1)(Jv,Uv,((e,t)=>{if(!t)return null;const{id:i,code:n,note:s,icon:r,translatedName:a,requiresCreditCard:o,methodChangePossible:l}=t;return n===iv.ApplePay||n===iv.GooglePay?null:o?e?{id:i,code:n,cardId:e.id,isCard:!0,brand:e.brand,lastFour:e.lastFour,isExpired:e.expired,isSingleUse:e.isSingleUse,methodChangePossible:l}:null:{id:i,code:n,note:s,isCard:!1,brand:r,name:a,methodChangePossible:l}})),z_=(0,B.P1)(f_,(e=>(0,v.compact)([null==e?void 0:e.line1,null==e?void 0:e.line2,null==e?void 0:e.city,null==e?void 0:e.state,null==e?void 0:e.postalCode]).join(" "))),T_=(0,B.P1)(r_,(e=>{let{checkoutData:t}=e;return t})),F_=(0,B.P1)(e_,T_,((e,t)=>e||t===Ne.Pending)),N_=(0,B.P1)(Sv,wd,((e,t)=>!(e===fd.Mandatory&&!t))),L_=(0,B.P1)(I_,Sv,Sd,((e,t,i)=>!e||!t||t===fd.Disabled||i!==Ne.Success)),E_=(0,B.P1)(Jv,Uv,((e,t)=>!(!e||e.expired)||!!t&&!t.requiresCreditCard)),O_=(0,B.P1)(E_,Z_,I_,N_,C_,l_,(function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.every(Boolean)})),R_=(0,B.P1)(m_,T_,Fv,Sd,((e,t,i,n)=>!!e&&t===Ne.Success&&i===Ne.Success&&n===Ne.Success)),D_=e=>{let{type:t,translationPrefix:i,phoneRequirement:n,transactionId:s,phoneNumber:r,isDisabled:a,isCompleted:o,isCheckout:l,onClick:c}=e;const d=(0,p.I0)(),{track:u}=vi(),{tabletsUp:g}=E(),h=U(i),f=(0,p.v9)((e=>Td(e,_d.ShippingContact))),y=(0,p.v9)(e_);(0,m.useEffect)((()=>{f&&(0,ls.H5)(_d.ShippingContact)}),[f]);const v=()=>{f&&d(Ay.removeShippingContactError({error:f})),c()},_=()=>{const e=!o||n===fd.Optional&&!r,i=e?h("title"):r,s=e?Xy.Z:Yy.Z,a=e?void 0:Wy.Z.Color.GreyscaleLevel3,c=(e=>l||t===yd.ShippingLabel||e&&t===yd.DigitalLabel?null:(0,z.jsx)(Wy.Z,{name:tv.Z,color:Wy.Z.Color.GreyscaleLevel3,testId:"shipping-contact-telephone-icon"}))(e),d=l?gt.Z.Styling.Wide:void 0;return(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,styling:d,title:i,prefix:c,suffix:(0,z.jsx)(Wy.Z,{name:s,color:a,testId:"shipping-contact-".concat(s.Title,"-icon"),aria:{"aria-hidden":"true"}}),onClick:v,validation:f&&(0,z.jsx)(zm.Z,{text:f.value,theme:"warning"}),testId:"shipping-contact-details"})};return a||!s?null:(0,z.jsx)(Jp.h,{onEnter:()=>{s&&u(l?(e=>{const{transactionId:t,screen:i}=e;return{event:"buyer.view_add_contact_details",extra:{transaction_id:t,screen:i}}})({transactionId:s,screen:$t.Checkout}):(e=>{const{transactionId:t,screen:i}=e;return{event:"seller.view_add_contact_details",extra:{transaction_id:t,screen:i}}})({transactionId:s,screen:$t.GetShippingLabel}))},children:(0,z.jsx)("div",{id:_d.ShippingContact,children:l?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Tight,disabled:y,children:[(0,z.jsx)(yt.Z,{type:yt.Z.Type.Leading,styling:g?yt.Z.Styling.Wide:yt.Z.Styling.Default,text:h("label")}),_()]})]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{text:h("label"),type:yt.Z.Type.Stacked}),_()]})})})},A_=e=>{let{styling:t,type:i,title:n,onClick:s,suffix:r,prefix:a,url:o,data:l,validation:c,address:d,showChevron:u=!1,isDisabled:m=!1}=e;return d?(0,z.jsx)(gt.Z,{styling:t,type:i,chevron:u,title:n&&Sc(n,38)||d.name&&Sc(d.name,38),body:(()=>{if(!d)return null;const{line1:e,line2:t,postalCode:i,city:s}=d;return(0,z.jsxs)(z.Fragment,{children:[n&&d.name&&(0,z.jsx)(xt.Z,{text:d.name,width:xt.Z.Width.Parent}),!(!e&&!t)&&(0,z.jsx)(xt.Z,{text:(0,v.compact)([d.line1,d.line2]).join(", "),width:xt.Z.Width.Parent}),!(!i&&!s)&&(0,z.jsx)(xt.Z,{text:(0,v.compact)([d.postalCode,d.city]).join(", ")})]})})(),suffix:r,onClick:s,url:o,urlProps:{...uh(l)},disabled:m,validation:c,prefix:a,testId:"address-details"}):null},M_="dropOffPointMap",U_={UserAddress:"user_address",CurrentLocation:"current_location",SearchAreaButton:"search_area_button",SearchBarAddress:"search_bar_address"},B_={countryBounds:void 0,nearbyDropOffPoints:void 0,selectedDropOffPoint:void 0,suggestedDropOffPointCode:void 0,dropOffPointCarrier:void 0,dropOffPointSource:void 0,ui:{error:null,uiState:Ne.Idle}},q_=(0,ad.oM)({name:M_,initialState:B_,reducers:{fetchCountryBoundsSuccess:(e,t)=>{const{countryBounds:i}=t.payload;e.countryBounds=i},fetchNearbyDropOffPointsRequest:e=>{e.ui.uiState=Ne.Pending,e.selectedDropOffPoint=null},fetchNearbyDropOffPointFailure:e=>{e.nearbyDropOffPoints=[],e.ui.uiState=Ne.Failure},fetchNearbyDropOffPointSuccess:(e,t)=>{e.nearbyDropOffPoints=t.payload.dropOffPoints,e.suggestedDropOffPointCode=t.payload.suggestedDropOffPointCode,e.dropOffPointCarrier=t.payload.dropOffPointCarrier,e.dropOffPointSource=t.payload.dropOffPointSource,e.ui.uiState=Ne.Success},setSelectedDropOffPoint:(e,t)=>{e.selectedDropOffPoint=t.payload.selectedDropOffPoint}}}),{actions:V_}=q_,H_={[M_]:q_.reducer},G_=(q_.reducer,e=>e[M_]),W_=e=>G_(e).countryBounds,X_=e=>G_(e).nearbyDropOffPoints,Y_=e=>G_(e).selectedDropOffPoint,K_=e=>G_(e).dropOffPointCarrier,J_=e=>G_(e).dropOffPointSource,Q_=(0,B.P1)(G_,(e=>{let{ui:t}=e;return t})),$_=(0,B.P1)(Q_,(e=>e.uiState)),eb=((0,B.P1)(Q_,(e=>e.error)),{address:void 0,ui:{error:null,uiState:Ne.Idle}}),tb=(0,ad.oM)({name:Uy,initialState:eb,reducers:{fetchDefaultShippingAddressRequest:e=>{e.ui.uiState=Ne.Pending},fetchDefaultShippingAddressFailure:e=>{e.address=null,e.ui.uiState=Ne.Failure},fetchDefaultShippingAddressSuccess:(e,t)=>{e.address=t.payload.address,e.ui.uiState=Ne.Success},setDefaultShippingAddress:(e,t)=>{e.address=t.payload.address}}}),{actions:ib}=tb,nb={[Uy]:tb.reducer};let sb,rb;tb.reducer,function(e){e.Mailbox="mailbox",e.PostOffice="postoffice",e.Home2Home="home2home",e.ReusablePackage="reusablepackage",e.MyOwnPackage="myownpackage"}(sb||(sb={})),function(e){e.Kilometers="km",e.Meters="m",e.Miles="mi",e.Feet="ft"}(rb||(rb={}));const ab=[{field:Xg.GL.Name,required:!0},{field:Xg.GL.Country},{field:Xg.GL.Line1,required:!0},{field:Xg.GL.Line2},{field:Xg.GL.PostalCode,required:!0},{field:Xg.GL.City,required:!0}].map((e=>({field:e.field,required:e.required,trackingEvent:on({screen:$t.GetShippingLabel,target:e.field,isValid:!0})}))),ob=e=>{let{isGetShippingLabelModalOpen:t,onGenerateLabelClick:i}=e;const n=(0,p.I0)(),s=U("conversation.get_shipping_label.modal"),r=U("shipping_contact"),{track:a}=vi(),o=(0,p.v9)(nu),l=(0,p.v9)(bu),c=(0,p.v9)(qd),d=(0,p.v9)(Mu),u=(0,p.v9)(Uu),f=(0,p.v9)(qu),y=(0,p.v9)(Bu),_=(0,p.v9)(Du),b=(0,p.v9)(Au),j=(0,p.v9)(Pd),S=(0,p.v9)(wd),Z=(0,p.v9)(Yu),I=(0,p.v9)($u),C=(0,p.v9)(em),k=(0,p.v9)(_u),w=(0,p.v9)(Ru),P=(0,p.v9)(oy),T=(0,p.v9)(qy),F=(0,p.v9)(X_),N=(0,p.v9)($_),E=(0,p.v9)(Gy),[O,R]=(0,m.useState)(""),D=((e,t)=>!!e&&!!t&&0===t.filter((t=>{let{field:i,required:n}=t;return n&&(0,v.isEmpty)(e[(0,v.camelCase)(i)])})).length)(T,ab);function A(){return k&&k.length>1}function M(){return null==k?void 0:k.some((e=>{let{key:t}=e;return t===sb.ReusablePackage||t===sb.MyOwnPackage}))}function B(){var e;let t=!0;return null==o||null===(e=o.dropOffType)||void 0===e||!e.pickUpDateShown||null!=o&&o.selectedCourierPickUpDate||(R(s("choose_pickup_date.validation")),t=!1),t}function q(){B()&&n(Dm.setActiveGenerateLabelModal({modal:td.ConfirmationModal}))}function V(){B()&&(function(){const e={transaction_id:c,dropoff_type_id:null==l?void 0:l.id};a(Ri({target:qm.Confirm,screen:$t.GetShippingLabel,targetDetails:JSON.stringify(e)}))}(),function(){if(!w)return!1;const e=w===md.Seller;return!!(e?d:u)||!!(e?y:f)||(n(Ay.setShippingContactError({error:{field:_d.ShippingContact,value:r("".concat(w,".validation.required"))}})),!1)}()&&i())}function H(){R("")}function G(){n(Dm.setActiveGenerateLabelModal({modal:td.ShippingContactModal}))}function W(){n(Dm.clearDropOffTypeSelection()),I&&n(Dm.clearCourierPickUpDatesSelection(I)),H(),n(Dm.setActiveGenerateLabelModal({modal:td.None}))}function X(){return P?null!=k&&k.length&&!Z?n(Dm.setActiveGenerateLabelModal({modal:td.DropOffTypeSelectionModal})):n(C?Dm.setActiveGenerateLabelModal({modal:td.DigitalLabelTypeSelectionModal}):Dm.setActiveGenerateLabelModal({modal:td.ReturnTheOrder})):null!=k&&k.length&&!Z?n(Dm.setActiveGenerateLabelModal({modal:td.DropOffTypeSelectionModal})):n(Dm.setActiveGenerateLabelModal({modal:td.DigitalLabelTypeSelectionModal}))}function Y(){n(Dm.setActiveGenerateLabelModal({modal:td.AddressModal}))}function K(e){if(!w)return null;const t=w===md.Seller,i=t?d:u,n=t?j:S,s=t?_:b,r=t?y:f;return!i&&s&&c?(0,z.jsx)(D_,{type:e,translationPrefix:"shipping_contact.".concat(w,".").concat(e),phoneNumber:n,phoneRequirement:s,transactionId:c,isDisabled:i,isCompleted:r,onClick:G}):null}Xn({abTestName:"seller_drop_off_map",shouldTrackExpose:null==o?void 0:o.dropOffMapEnabled}),Xn({abTestName:"seller_drop_off_map_non_vcarrier",shouldTrackExpose:null==o?void 0:o.dropOffMapEnabled}),(0,m.useEffect)((()=>{c&&t&&n(tg({transactionId:c}))}),[n,c,t]),(0,m.useEffect)((()=>{(null==o?void 0:o.dropOffMapEnabled)&&t&&n(V_.fetchNearbyDropOffPointsRequest({}))}),[n,null==o?void 0:o.dropOffMapEnabled,T,t]),(0,m.useEffect)((()=>{t&&n(ib.fetchDefaultShippingAddressRequest())}),[n,t]);function J(){H(),n(Dm.setActiveGenerateLabelModal({modal:td.CourierPickUpDateSelectionModal}))}function Q(){!function(){const e={transaction_id:c};a(Ri({target:qm.SeeDropOffPoints,screen:$t.GetShippingLabel,targetDetails:JSON.stringify(e)}))}(),n(Dm.setActiveGenerateLabelModal({modal:td.DropOffPointMapModal}))}function $(){if(null==F||!F.length)return null;const e=F[0],{distance:t,distanceUnit:i}=e;if(!i)return null;if(!t&&0!==t)return null;if(i===rb.Kilometers||i===rb.Miles){const e=t.toFixed(1);return"".concat(e," ").concat(i)}const n=Math.round(t);return"".concat(n," ").concat(i)}function ee(){if(null==o||!o.dropOffMapEnabled)return null;const e=!T||!(null!=F&&F.length),t=s(e?"drop_off_points.drop_off_points_title":"drop_off_points.nearest_drop_off_point_title"),i=!e&&s("drop_off_points.drop_off_point_distance_note",{distance:$()});return(0,z.jsx)(gt.Z,{children:(0,z.jsx)(Lt.Z,{styling:Lt.Z.Styling.Tight,children:(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,prefix:(0,z.jsx)(Wy.Z,{name:ev.Z,color:Wy.Z.Color.GreyscaleLevel3}),title:t,body:i,onClick:Q,testId:"generate-label-modal-see-drop-off-points"})})})}return(0,z.jsx)(cp.Z,{show:t,closeOnOverlay:!0,children:function(){if(N===Ne.Pending)return(0,z.jsx)(Mp,{testId:"generate-shipping-label-loader"});const e=w===md.Seller;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Pm.Z,{body:null==o?void 0:o.screenTitle,left:P||C||A()||M()?(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,iconName:Qy.Z,inline:!0,onClick:X,testId:"generate-label-modal-previous"}):null,right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,onClick:W,iconName:$y.Z,inline:!0,testId:"generate-label-modal-close"})}),(0,z.jsx)(h.Z,{})]}),(0,z.jsxs)("div",{className:"modal-contained-content",children:[(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)("div",{className:"u-flexbox",children:(0,z.jsx)(Kl.U,{src:null==o?void 0:o.carrier.iconUrl,size:Kl.U.Size.Large,styling:Kl.U.Styling.Rounded})}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent,text:s("send_with",{carrier_name:null==o?void 0:o.carrier.name})}),(0,z.jsx)(xt.Z,{alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent,text:s("send_with_body")})]}),null!=l&&l.dropOffTypeMeta.dropOffPrintIcon?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{type:yt.Z.Type.Stacked,text:s("shipping_method.label")}),(0,z.jsx)(gt.Z,{testId:"generate-label-modal-shipping-method",children:(0,z.jsx)(g.Z,{children:(0,z.jsxs)(gt.Z,{children:[(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column",children:[(0,z.jsx)(Wy.Z,{name:Ky.Z}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:s("shipping_method.title")}),(0,z.jsx)(xt.Z,{text:s("shipping_method.body")})]}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,prefix:(0,z.jsx)(Kl.U,{src:null==l?void 0:l.dropOffTypeMeta.dropOffPrintIcon.url,size:Kl.U.Size.Small,color:Wy.Z.Color.GreyscaleLevel3}),title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:null==l?void 0:l.dropOffTypeMeta.dropOffPrintIcon.text})})]})})})]}):null,null!=o&&o.selectedCourierPickUpDate?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{type:yt.Z.Type.Stacked,text:s("choose_pickup_date.label")}),(0,z.jsx)(gt.Z,{title:(0,z.jsx)(_t.Ji,{value:null==o?void 0:o.selectedCourierPickUpDate,month:"long",day:"numeric",weekday:"long"}),body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(_t.Ji,{value:null==o||null===(i=o.selectedCourierPickUpTime)||void 0===i?void 0:i.from,hour:"numeric",minute:"numeric",hour12:!1}),"-",(0,z.jsx)(_t.Ji,{value:null==o||null===(n=o.selectedCourierPickUpTime)||void 0===n?void 0:n.to,hour:"numeric",minute:"numeric",hour12:!1})]})}),prefix:(0,z.jsx)(Wy.Z,{name:Jy.Z,color:Wy.Z.Color.GreyscaleLevel3}),suffix:(0,z.jsx)(ic.I,{size:ic.I.Size.Small,text:s("choose_pickup_date.action.change"),onClick:J})}),(0,z.jsx)(h.Z,{})]}):null!=l&&l.pickUpDateShown?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{type:yt.Z.Type.Stacked,text:s("choose_pickup_date.label")}),(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,title:s("choose_pickup_date.title"),suffix:(0,z.jsx)(Wy.Z,{name:Xy.Z}),onClick:J,validation:O,testId:"generate-label-modal-pickup-date"}),(0,z.jsx)(h.Z,{})]}):null,ee(),(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{type:yt.Z.Type.Stacked,text:s("sellers_address_label")}),D?E===Ne.Pending?(0,z.jsx)(gt.Z,{children:(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center",children:(0,z.jsx)(Dp.Z,{testId:"generate-shipping-address-loader"})})}):(0,z.jsx)(A_,{prefix:(0,z.jsx)(Kl.U,{src:Qe(null==o?void 0:o.senderPhoto),size:Kl.U.Size.Regular,styling:Kl.U.Styling.Circle}),type:gt.Z.Type.Navigating,address:T,onClick:Y,suffix:(0,z.jsx)(Wy.Z,{name:Yy.Z,color:Wy.Z.Color.GreyscaleLevel3,testId:"address-pencil-icon"})}):(0,z.jsx)(gt.Z,{title:s("sellers_empty_address_title"),type:gt.Z.Type.Navigating,onClick:Y,suffix:(0,z.jsx)(Wy.Z,{name:Xy.Z,testId:"address-plus-icon"})})]}),K(e?yd.DigitalLabel:yd.ReturnLabel),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{type:yt.Z.Type.Stacked,text:s("buyers_address_label")}),(0,z.jsx)(gt.Z,{prefix:(0,z.jsx)(Kl.U,{src:Qe(null==o?void 0:o.receiverPhoto),size:Kl.U.Size.Regular,styling:Kl.U.Styling.Circle}),title:(null==o?void 0:o.receiverName)&&Sc(o.receiverName,38),body:s("buyers_address_body")})]}),(0,z.jsx)(gt.Z,{children:(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Tight,children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:(t=yd.ShippingLabel,w?(w===md.Seller?d:u)?t===yd.ShippingLabel?s("address_field_note"):s("generate_label_note"):t===yd.ShippingLabel?r("".concat(w,".shipping_label.note")):r("".concat(w,".digital_label.note")):null)}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),A()&&!M()?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,text:null==o?void 0:o.actionTitle,onClick:q,testId:"get-label-modal-confirm"}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,text:s("actions.cancel"),onClick:W,testId:"get-label-modal-cancel"})]}):(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,text:null==o?void 0:o.actionTitle,onClick:V,testId:"get-label-modal-generate"})]})})]})]})]});var t,i,n}()})},lb=e=>{let{isOpen:t}=e;const i=(0,p.I0)(),n=U("conversation.pick_up_date.modal"),s=(0,p.v9)(qd),r=(0,p.v9)($u),a=(0,p.v9)(Ju),o=(0,p.v9)(Qu),l=(0,p.v9)(Yu);function c(){r&&i(Dm.clearCourierPickUpDatesSelection(r))}(0,m.useEffect)((()=>{s&&l&&i(Dm.getCourierPickUpDatesRequest({transactionId:s}))}),[i,s,l]);const d=e=>()=>{i(Dm.setSelectedCourierPickUpDate({courierPickUpDate:e}))},u=e=>()=>{i(Dm.setSelectedCourierPickUpTime({courierPickUpTime:e}))};return(0,z.jsx)(cp.Z,{show:t,children:(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[(0,z.jsx)(Pm.Z,{body:n("title"),right:(0,z.jsx)(ic.I,{inline:!0,deprecatedIconName:"x",styling:ic.I.Styling.Flat,testId:"pick-up-date-modal-navigation-close-button",onClick:function(){c(),i(Dm.setActiveGenerateLabelModal({modal:td.None}))}}),left:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,deprecatedIconName:"arrow-left",inline:!0,testId:"pick-up-date-modal-previous",onClick:function(){c(),i(Dm.setActiveGenerateLabelModal({modal:td.GetShippingLabelModal}))}})}),(0,z.jsxs)("div",{className:"modal-contained-content",children:[r?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:n("pick_up_date.title")})}),(0,z.jsx)(kp,{children:r.map((function(e){return(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,title:(0,z.jsx)(_t.Ji,{value:e.date,month:"long",day:"numeric",weekday:"long"}),onClick:d(e),suffix:(0,z.jsx)(qx.J,{name:"courier-pick-up-date-radio",checked:e.date===(null==a?void 0:a.date),value:e.date}),disabled:!e.isAvailable},e.date)}))}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:n("note")})}),(0,z.jsx)(gt.Z,{title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:n("pick_up_time.title")})}),(0,z.jsx)(kp,{children:null==a||null===(g=a.times)||void 0===g?void 0:g.map((e=>(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,title:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(_t.Ji,{value:e.from,hour:"numeric",minute:"numeric",hour12:!1}),"-",(0,z.jsx)(_t.Ji,{value:e.to,hour:"numeric",minute:"numeric",hour12:!1})]}),onClick:u(e),suffix:(0,z.jsx)(qx.J,{name:"courier-pick-up-time-radio",checked:e.to===(null==o?void 0:o.to),value:e.to}),disabled:!e.isAvailable},e.from)))})]}):null,(0,z.jsx)(gt.Z,{children:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,text:n("action.confirm"),onClick:function(){a&&o&&(i(Dm.confirmCourierPickUpDateSelection({courierPickUpDate:null==a?void 0:a.date,courierPickUpTime:o})),i(Dm.setActiveGenerateLabelModal({modal:td.GetShippingLabelModal})))},testId:"pick-up-date-modal-confirm-button"})})]})]})});var g};let cb;!function(e){e.FacebookLikeButton="facebook_like_button",e.MyItemsGrid="my_items_grid",e.MyItemsList="my_items_list",e.MyFavoritesGrid="my_favorites_grid",e.MyFavoritesList="my_favorites_list",e.MeasurementsInfo="measurements_info",e.CatalogGrid="catalog_grid",e.CatalogList="catalog_list",e.NpsSurvey="nps_survey",e.SellTabSurvey="sell_tab_survey",e.SellerAfterUploadInstructions="seller_after_upload_instructions",e.SellerAfterSaleInstructions="seller_after_sale_instructions",e.SellerAfterTransactionCompleteInstructions="seller_after_transaction_complete_instructions",e.EmailConfirmation="email_confirmation",e.EmailConfirmed="email_confirmed",e.Video="video",e.SellerBanner="seller_banner",e.SellTabBanner="sell_tab_banner",e.SellerFunnelWelcomeSlide="seller_funnel_welcome_slide",e.WalletSetupSuccess="wallet_setup_success",e.WalletPayInSuccess="wallet_pay_in_success",e.NewsletterSubscriptionBanner="newsletter_subscription_banner",e.EditorialCampaignBanner="editorial_campaign_banner",e.CtaPrompty="cta_prompt",e.FeedPersonalizationBanner="feed_personalization_banner",e.PersonalizationBannerAfterFeed="personalization_banner_after_feed",e.AdBox="ad_box",e.BumpPromotion="bump_promotion",e.OnboardingModalCard="onboarding_modal_card",e.AppRatingDialog="app_rating_dialog",e.UploadOnboardingCarouselCard="upload_onboarding_carousel_card",e.Notification="notification",e.SeeWholeClosetCta="see_whole_closet_cta",e.CookieAndAdPersonalizationBanner="cookie_and_ad_personalization_banner",e.AdPersonalizationToggle="ad_personalization_toggle",e.ShippingPrice="shipping_price",e.TranslationHint="translation_hint",e.LocalSearchSuggestion="local_search_suggestion",e.BrandClusterSection="brand_cluster_section",e.PhotoPickerInfoBanner="photo_picker_info_banner",e.CrmMessageVideo="crm_message_video",e.FreeReturnLabelModal="free_return_label_modal",e.LabelTypeSelection="label_type_selection",e.PushUpOrderConfirmation="push_up_order_confirm",e.ReturnOrder="return_order",e.ShipFastBadgeDescription="ship_fast_badge_description",e.PhysicalAuthenticityBuyerModal="physical_auth_buyer",e.OfflineVerificationSellerModal="physical_auth_seller",e.OfflineVerificationStatus="physical_auth_eligible",e.ValueSelectModal="value_select_modal",e.CtaPrompt="cta_prompt",e.DropOffPoint="drop_off_point",e.TaxRules="taxpayers_tax_rules",e.TaxpayersDac7Banner="taxpayers_dac7_banner"}(cb||(cb={}));const db=e=>{let{shipmentItems:t}=e;const i=U("conversation.actions.request_return_modal");return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{body:(()=>{if(null==t||!t.length)return null;if(t.length>1){const e=t.length.toString();return(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:i("order_count",{count:e})})}return(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:Sc(t[0].name,37)})})(),suffix:t?(0,z.jsxs)(z.Fragment,{children:[t.length>3&&(0,z.jsx)(Kl.U,{label:"+".concat(t.length-3),styling:Kl.U.Styling.Rounded,size:Kl.U.Size.Medium,scaling:Kl.U.Scaling.Cover,color:ng(Le.GreyscaleLevel4)}),t.slice(0,3).map((e=>(0,z.jsxs)(m.Fragment,{children:[(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(Kl.U,{src:e.imageUrl,styling:Kl.U.Styling.Rounded,size:Kl.U.Size.Medium,scaling:Kl.U.Scaling.Cover})]},e.name)))]}):null}),(0,z.jsx)(h.Z,{})]})},ub=e=>{let{isOpen:t,onClose:i,onContinue:n,onShippingDiscountModalClick:s}=e;const r=(0,p.I0)(),{track:a}=vi(),o=U("conversation.actions.return_shipping_options.modal"),l=U("checkout.order_summary"),c=(0,p.v9)(cm),d=(0,p.v9)(qd),u=(0,p.v9)(ay),f=(0,p.v9)(oy),v=(0,p.v9)(ly),_=(0,p.v9)(cy),b=(0,p.v9)(Nc),j=(0,p.v9)(py),S=(0,p.v9)(uy),Z=(0,p.v9)(my),I=(0,p.v9)(dy),C=j===wy.Integrated,k="primaryLightExperimental";(0,m.useEffect)((()=>{d&&t&&(r(Ey.getShipmentItemsRequest({transactionId:d})),r(Ey.getReturnShippingOptionsRequest({transactionId:d})))}),[r,d,t]),(0,m.useEffect)((()=>{if(!t)return;const e=JSON.stringify({transaction_id:d});a(Gi({screen:$t.ReturnOrder,target:cb.ReturnOrder,targetDetails:e}))}),[t,a,d]);const w=()=>!!f&&f.length>1,P=e=>()=>{r(Ey.setSelectedReturnShippingOption({returnShippingOption:e}))},T=()=>{a(Ri({screen:$t.ReturnOrder,target:qm.ShippingDiscountDetails,targetDetails:JSON.stringify({transaction_id:d})})),s()},F=e=>{if(e.pricing!==Py.Postage||!e.price)return null;const{price:t,priceBeforeDiscount:i}=e;return i?(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center",children:[(0,z.jsx)(xt.Z,{text:"".concat(Ua(t,b)),type:xt.Z.Type.Body,bold:!0,testId:"return-shipping-options-modal-price-after-discount"}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)(xt.Z,{text:Ua(i,b),type:xt.Z.Type.Subtitle,strikethrough:!0,testId:"return-shipping-options-modal-price-before-discount"}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)("div",{className:"u-flexbox u-align-items-center u-cursor-pointer",onClick:T,children:(0,z.jsx)(ht.Z,{name:"info-circle",size:ht.Z.Size.Small,color:ht.Z.Color.GreyscaleLevel3,testId:"return-shipping-options-modal-discount-info-icon"})})]},t.amount):(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:Ua(e.price,b)},e.pricing)},N=()=>w()?gt.Z.Type.Navigating:void 0,L=()=>{var e;if(!v)return null;const t=null===(e=v.pricingSummary)||void 0===e?void 0:e.find((e=>e.pricing===Py.Postage));return null!=t&&t.discount?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)(xt.Z,{text:"(-".concat(t.discount.percent,"%)"),theme:"warning",testId:"return-shipping-options-modal-discount-percent"})]}):null},E=()=>{(()=>{const e={transaction_id:d,selected_return_option:j};a(Ri({screen:$t.ReturnOrder,target:qm.Confirm,targetDetails:JSON.stringify(e)}))})(),C?n():d&&j&&(r(Ey.createCustomReturnShipmentRequest({transactionId:d,returnShippingOption:j})),S!==Ne.Pending&&S!==Ne.Failure&&i())};return(0,z.jsxs)(cp.Z,{show:t,children:[(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Pm.Z,{right:(0,z.jsx)(ic.I,{deprecatedIconName:"x",theme:"amplified",styling:ic.I.Styling.Flat,testId:"return-shipping-options-close-button",onClick:()=>{r(Ey.clearReturnShipmentOptions()),i()}}),body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,text:o("title")})}),(0,z.jsx)(h.Z,{})]}),(0,z.jsxs)("div",{className:"modal-contained-content",children:[u?(0,z.jsx)(db,{shipmentItems:u}):null,u&&u.length<2?null:(0,z.jsx)(ah.Z,{text:o("bundle_items_note")}),c?(0,z.jsx)(gt.Z,{children:(0,z.jsx)(Yp,{banner:{level:Vp.Info,body:(0,z.jsx)(xt.Z,{text:o("offline_verification",{"return-shipping-options-offline-verification-link":e=>(0,z.jsx)("a",{href:Me.Lud,target:"_blank",rel:"noreferrer",children:e})})}),screenName:$t.ReturnOrder,extraNotice:!1},onBannerClick:()=>{const e=JSON.stringify({transaction_id:d,url:Me.Lud});a(Ri({screen:$t.ReturnOrder,target:qm.Hyperlink,targetDetails:e}))}})}):null,w()?(0,z.jsx)(gt.Z,{title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:o("shipping_method_title")})}):(0,z.jsx)(yt.Z,{type:yt.Z.Type.Stacked,text:o("one_shipping_method_title")}),(0,z.jsxs)(gt.Z,{children:[(()=>{if(!v)return null;const{iconUrl:e,title:t,subtitle:i,pricingSummary:n,code:s,note:r}=v,a=s===j&&w(),o=y()({"return-card--selected":a});return(0,z.jsx)("div",{className:o,children:(0,z.jsx)(g.Z,{experimentalTheme:a?k:void 0,children:(0,z.jsx)(gt.Z,{type:N(),theme:"transparent",title:(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)(Kl.U,{src:e,size:Kl.U.Size.Regular,styling:Kl.U.Styling.Rounded}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:t}),L()]}),(0,z.jsx)(x.Z,{}),r?(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:r,html:!0}):null==n?void 0:n.map(F),(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]}),body:(0,z.jsx)(xt.Z,{text:i}),onClick:P(s),testId:"return-shipping-option-integrated",suffix:w()&&(0,z.jsx)("div",{className:"u-flexbox",children:(0,z.jsx)(qx.J,{name:"".concat(s,"-radio"),value:s,checked:s===j,testId:"return-shipping-options-modal-radio"})})})})})})(),w()&&(0,z.jsx)(x.Z,{}),(()=>{if(!_)return null;const{iconUrl:e,title:t,subtitle:i,code:n}=_,s=n===j&&w(),r=y()({"return-card--selected":s});return(0,z.jsx)("div",{className:r,children:(0,z.jsx)(g.Z,{experimentalTheme:s?k:void 0,children:(0,z.jsx)(gt.Z,{type:N(),theme:"transparent",title:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Kl.U,{src:e,size:Kl.U.Size.Regular,styling:Kl.U.Styling.Rounded}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:t}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]}),body:(0,z.jsx)(xt.Z,{text:i}),onClick:P(n),testId:"return-shipping-option-custom",suffix:w()&&(0,z.jsx)("div",{className:"u-flexbox",children:(0,z.jsx)(qx.J,{name:"".concat(n,"-radio"),value:n,checked:n===j,testId:"return-shipping-options-modal-radio"})})})})})})()]}),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(gt.Z,{children:[C?null==v||null===(R=v.pricingSummary)||void 0===R?void 0:R.map((e=>{if(!e.price)return null;const t=e.pricing===Py.RefundTotal,i=e.pricing===Py.Postage;return(0,z.jsx)(gt.Z,{testId:"return-shipping-option-integrated-price",styling:gt.Z.Styling.Tight,title:(0,z.jsxs)(z.Fragment,{children:[t&&(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{type:t?xt.Z.Type.Title:void 0,text:e.title})]}),suffix:(0,z.jsxs)(z.Fragment,{children:[t&&(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{type:t?xt.Z.Type.Title:void 0,text:e.priceNote?(0,z.jsx)(xt.Z,{text:e.priceNote}):Ua(e.price,b,{formatAsNegative:i})})]})},e.pricing)})):null==_||null===(O=_.pricingSummary)||void 0===O?void 0:O.map((e=>{if(!e.price)return null;const t=e.pricing===Py.RefundTotal;return(0,z.jsx)(gt.Z,{testId:"return-shipping-option-custom-price",styling:gt.Z.Styling.Tight,title:(0,z.jsxs)(z.Fragment,{children:[t&&(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),e.price&&(0,z.jsx)(xt.Z,{type:t?xt.Z.Type.Title:void 0,text:e.title})]}),suffix:(0,z.jsxs)(z.Fragment,{children:[t&&(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),e.price&&(0,z.jsx)(xt.Z,{type:t?xt.Z.Type.Title:void 0,text:Ua(e.price,b)})]})},e.pricing)})),I?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("span",{onClick:()=>{r(Dm.setActiveGenerateLabelModal({modal:td.ReturnCurrencyConversionModal}))},children:(0,z.jsx)(xt.Z,{clickable:!0,theme:"inverse",type:xt.Z.Type.Caption,text:l("currency_conversion_details.learn_more_link")})}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:l("currency_conversion_details.learn_more_about")})]}):null]}),(0,z.jsx)(h.Z,{})]}),(()=>{const e=!(null!=v&&v.note),t=C?null==v?void 0:v.actionTitle:null==_?void 0:_.actionTitle,i=C?"return-shipping-option-integrated-submit":"return-shipping-option-custom-submit";return(0,z.jsxs)(z.Fragment,{children:[e&&(0,z.jsx)(ah.Z,{text:o("submit_note")}),(0,z.jsx)(gt.Z,{validation:Z?(0,z.jsx)(xt.Z,{text:Z}):null,children:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,text:t,isLoading:S===Ne.Pending,onClick:E,testId:i})})]})})()]})]});var O,R},mb=e=>{let{isOpen:t,onClose:i}=e;const{formatNumber:n}=(0,O.Z)(),s=(0,p.v9)(Nc),r=(0,p.v9)(dy),a=(0,p.v9)(py),o=U("conversation.actions.return_shipping_options.currency_conversion_modal");return(0,z.jsxs)(cp.Z,{show:t,children:[(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[(0,z.jsx)(Pm.Z,{body:o("title"),right:(0,z.jsx)(ic.I,{inline:!0,deprecatedIconName:"x",styling:ic.I.Styling.Flat,testId:"close-return-currency-conversion-modal",onClick:i})}),function(){if(null==r||!r.itemPrice)return null;const{beforeConversionPrice:e,afterConversionPrice:t}=r.itemPrice,i=Ua(e,s),n=Ua(t,s);return(0,z.jsx)(gt.Z,{title:o("price"),body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,html:!0,text:o("price_description",{cost:i})}),suffix:n})}(),function(){if(null==r||!r.factualShipping)return null;const{beforeConversionPrice:e,afterConversionPrice:t,method:i}=r.factualShipping,n=Ua(e,s),a=Ua(t,s),l=i===zy.Integrated;return 0===parseFloat(t.amount)?(0,z.jsx)(gt.Z,{title:o("shipping"),body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:o(l?"shipping_description.covered_by_vinted":"shipping_description.covered_by_seller")}),suffix:a}):(0,z.jsx)(gt.Z,{title:o("shipping"),body:(0,z.jsx)(xt.Z,{html:!0,type:xt.Z.Type.Subtitle,text:o("shipping_description.converted",{cost:n})}),suffix:a})}(),function(){if(null==r||!r.buyerProtectionFee)return null;const e=Ua(r.buyerProtectionFee,s);return(0,z.jsx)(gt.Z,{title:o("buyer_protection_fee"),suffix:e})}(),function(){if(a===wy.Custom)return null;if(null==r||!r.returnShipping)return null;const{beforeConversionPrice:e,afterConversionPrice:t}=r.returnShipping,i=Ua(e,s),n=Ua(t,s);return 0===parseFloat(t.amount)?(0,z.jsx)(gt.Z,{title:o("return_shipping"),body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:o("shipping_description.covered_by_vinted")}),suffix:n}):(0,z.jsx)(gt.Z,{title:o("return_shipping"),body:(0,z.jsx)(xt.Z,{html:!0,type:xt.Z.Type.Subtitle,text:o("return_shipping_description",{cost:i})}),suffix:n})}()]}),function(){if(!r)return null;const{baseRate:e,roundedRate:t}=r.exchange,i=Ua(e,s),n=Ua(t,s);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{text:"".concat(o("fx_rate.title")," ").concat(o("fx_rate.rate",{rate:n,base:i}))})})]})}(),function(){if(null==r||!r.markup)return null;const{rate:e,provider:t}=r.markup,i=n(parseFloat(e),{style:"percent",maximumFractionDigits:2});return(0,z.jsx)(gt.Z,{body:(0,z.jsx)(xt.Z,{html:!0,type:xt.Z.Type.Subtitle,text:o("fx_markup_rate",{fee:i,payment_provider:t})})})}(),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(ic.I,{text:o("actions.ok"),styling:ic.I.Styling.Filled,onClick:i})})]})},pb=e=>({id:e.id,isoCode:e.iso_code,title:e.title,titleLocal:e.title_local,postalCodeConstraints:{maxLength:e.postal_code_constraints.max_length,minLength:e.postal_code_constraints.min_length,keyboardInputType:e.postal_code_constraints.keyboard_input_type,format:e.postal_code_constraints.format,blacklistRegex:e.postal_code_constraints.blacklist_regex}}),gb=e=>e.map(pb),hb=/^\s*[a-zA-Z\u00C0-\u1FFF\u2C00-\uD7FF\-.,'`]+(\s+[a-zA-Z\u00C0-\u1FFF\u2C00-\uD7FF\-.,'`]+)+\s*$/i,xb=e=>hb.test(e);var fb=i(75593),yb=i(32504);let vb;!function(e){e.CountryId="countryId",e.Name="name",e.Line1="line1",e.Line2="line2",e.PostalCode="postalCode",e.City="city"}(vb||(vb={}));const _b=e=>{let{fieldConfiguration:t,postalCodeConfiguration:i,postalCodeConstraints:n,countries:s,countryId:r,postalCode:a,city:o,translations:l,infoBannerProps:c,onBlur:d}=e;const{formState:{errors:u},register:p}=(0,th.Gc)(),g=U("address_form"),h=fh(u,"address_form"),f=()=>{if(!i)return[];const{cities:e}=i,t=e.map(((t,i)=>({value:e[i],label:t})));return t.length>1?[{value:"",label:""},...t]:t};return(0,z.jsxs)(gt.Z,{children:[!!c&&(0,z.jsx)(Kp,{...c}),(0,z.jsx)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),children:t.map((e=>{let{field:c}=e;switch(c){case Xg.GL.Name:return(()=>{var e,i;const n=null==t?void 0:t.find((e=>{let{field:t}=e;return t===Xg.GL.Name}));return n?(0,m.createElement)(fb.M,{...p(vb.Name,{required:n.required,maxLength:50,onBlur:e=>d(Xg.GL.Name,e.target.value)}),title:(null==l||null===(e=l.name)||void 0===e?void 0:e.title)||g("name.title"),placeholder:(null==l||null===(i=l.name)||void 0===i?void 0:i.placeholder)||g("name.placeholder"),styling:fb.M.Styling.Tight,validation:hh(h(vb.Name)),uncontrolled:!0,disabled:n.disabled,key:vb.Name,testId:"address-form-field-name",autoComplete:"name"}):null})();case Xg.GL.Country:return(()=>{var e;const i=null==t?void 0:t.find((e=>{let{field:t}=e;return t===Xg.GL.Country}));return i?(0,m.createElement)(yb.R,{...p(vb.CountryId,{required:i.required,onBlur:e=>d(Xg.GL.Country,e.target.value)}),options:s.map((e=>({value:e.id,label:e.title}))),title:(null==l||null===(e=l.country)||void 0===e?void 0:e.title)||g("country.title"),styling:yb.R.Styling.Tight,validation:hh(h(vb.CountryId)),value:(null==r?void 0:r.toString())||"",uncontrolled:!0,disabled:i.disabled,key:vb.CountryId,testId:"address-form-field-country"}):null})();case Xg.GL.Line1:return(()=>{var e,i;const n=null==t?void 0:t.find((e=>{let{field:t}=e;return t===Xg.GL.Line1}));return n?(0,m.createElement)(fb.M,{...p(vb.Line1,{required:n.required,maxLength:50,onBlur:e=>d(Xg.GL.Line1,e.target.value)}),title:(null==l||null===(e=l.line1)||void 0===e?void 0:e.title)||g("line1.title"),placeholder:(null==l||null===(i=l.line1)||void 0===i?void 0:i.placeholder)||g("line1.placeholder"),styling:fb.M.Styling.Tight,validation:hh(h(vb.Line1)),uncontrolled:!0,disabled:n.disabled,key:vb.Line1,testId:"address-form-field-line1",autoComplete:"address-line1"}):null})();case Xg.GL.Line2:return(()=>{var e,i;const n=null==t?void 0:t.find((e=>{let{field:t}=e;return t===Xg.GL.Line2}));return n?(0,m.createElement)(fb.M,{...p(vb.Line2,{required:n.required,maxLength:50,onBlur:e=>d(Xg.GL.Line2,e.target.value)}),title:(null==l||null===(e=l.line2)||void 0===e?void 0:e.title)||g("line2.title"),placeholder:(null==l||null===(i=l.line2)||void 0===i?void 0:i.placeholder)||g("line2.placeholder"),styling:fb.M.Styling.Tight,validation:hh(h(vb.Line2)),uncontrolled:!0,disabled:n.disabled,key:vb.Line2,testId:"address-form-field-line2",autoComplete:"address-line2"}):null})();case Xg.GL.PostalCode:return(()=>{var e,i;const s=null==t?void 0:t.find((e=>{let{field:t}=e;return t===Xg.GL.PostalCode}));return s&&n?(0,m.createElement)(fb.M,{...p(vb.PostalCode,{required:s.required,onBlur:e=>d(Xg.GL.PostalCode,e.target.value)}),title:(null==l||null===(e=l.postalCode)||void 0===e?void 0:e.title)||g("postal_code.title"),placeholder:(null==l||null===(i=l.postalCode)||void 0===i?void 0:i.placeholder)||g("postal_code.placeholder"),styling:fb.M.Styling.Tight,validation:hh(h(vb.PostalCode)),maxLength:null==n?void 0:n.maxLength,uncontrolled:!0,disabled:s.disabled,key:vb.PostalCode,testId:"address-form-field-postal-code",autoComplete:"postal-code"}):null})();case Xg.GL.City:return(()=>{var e,n;const s=null==t?void 0:t.find((e=>{let{field:t}=e;return t===Xg.GL.City}));if(!s||!a||!i)return null;const r=o&&(null===(e=(0,v.find)(f(),{label:o}))||void 0===e?void 0:e.value)||"";return(0,m.createElement)(yb.R,{...p(vb.City,{required:s.required,onBlur:e=>d(Xg.GL.City,e.target.value)}),options:f(),title:(null==l||null===(n=l.city)||void 0===n?void 0:n.title)||g("city.title"),styling:yb.R.Styling.Tight,value:r,validation:hh(h(vb.City)),uncontrolled:!0,disabled:s.disabled,key:vb.City,testId:"address-form-field-city"})})();default:return null}}))})]})},bb=[{field:Xg.GL.Name},{field:Xg.GL.Country},{field:Xg.GL.Line1,required:!0},{field:Xg.GL.Line2},{field:Xg.GL.PostalCode,required:!0},{field:Xg.GL.City,required:!0}],jb={[Xg.GL.Country]:vb.CountryId,[Xg.GL.PostalCode]:vb.PostalCode,[Xg.GL.Name]:vb.Name,[Xg.GL.Line1]:vb.Line1,[Xg.GL.Line2]:vb.Line2,[Xg.GL.City]:vb.City},Sb=e=>{var t;let{isSubmitPending:i,isDeleteVisible:n,styling:s,errors:r,defaultValues:a,loader:o,translations:l,fieldConfiguration:c=bb,infoBannerProps:d,onSubmit:u,onCancel:g,onDelete:h}=e;const f=(0,p.v9)(re),y=(0,p.v9)(Ze),{track:_}=vi(),b=U("address_form"),j=U("errors"),S=(0,th.cI)({defaultValues:{...a,countryId:(null==a?void 0:a.countryId)||f}}),{getValues:Z,watch:I,setError:C,clearErrors:k,formState:{errors:w}}=S,P=I(vb.PostalCode),T=I(vb.CountryId),[F,N]=(0,m.useState)(Ne.Idle),[L,E]=(0,m.useState)([]),[O,R]=(0,m.useState)(null),D=(0,m.useMemo)((()=>{var e;const t=L.find((e=>{let{id:t}=e;return Number(T)===t}));return t?t.postalCodeConstraints:null===(e=L[0])||void 0===e?void 0:e.postalCodeConstraints}),[L,T]),A=(0,m.useCallback)((async(e,t)=>{const i=await(0,Fe.q56)({code:e,countryId:t});if("errors"in i)return C(vb.PostalCode,{type:"manual",message:b("validation.wrong_postal_code")}),void R(null);const n=(e=>({cities:e.cities,code:e.code,state:e.state}))(i.postal_code);k(vb.PostalCode),R(n)}),[C,b,k]),M=(0,m.useCallback)((async()=>{N(Ne.Pending);const e=await(0,Fe.ox$)();if("errors"in e)return;const t=gb(e.countries);N(Ne.Success),E(t)}),[]);(0,m.useEffect)((()=>{0===L.length&&0===r.length&&(0,v.isEmpty)(w)&&M()}),[M,L.length,r.length,w]),(0,m.useEffect)((()=>{P&&T&&D&&(String(P).length<(null==D?void 0:D.minLength)?R(null):A(P,T))}),[T,P,D,A]),(0,m.useEffect)((()=>{r.forEach((e=>{let{field:t,value:i}=e;const n=(0,v.camelCase)(t);(0,_i.IF)(n,vb)&&C(n,{type:"manual",message:i})}))}),[r,C]);const B=e=>null==c?void 0:c.find((t=>{let{field:i}=t;return i===e})),q=(e,t)=>{var i;const n=B(e),s=(null==l||null===(i=l[e])||void 0===i?void 0:i.title)||b("".concat(e,".title"));return null!=n&&n.required&&(0,v.isEmpty)(t)?(C(jb[e],{type:"manual",message:j("blank",{field:s})}),!1):y||e!==Xg.GL.Name||xb(t.toString())?!(e===Xg.GL.PostalCode&&w[vb.PostalCode]||(k(jb[e]),0)):(C(jb[e],{type:"manual",message:b("validation.invalid_full_name")}),!1)};return F!==Ne.Success?o||(0,z.jsx)(Mp,{styling:Mp.Styling.Wide}):D&&c?(0,z.jsxs)(th.RV,{...S,children:[(0,z.jsx)(_b,{fieldConfiguration:c,postalCode:P,postalCodeConfiguration:O,postalCodeConstraints:D,countries:L,countryId:T,city:Z(Xg.GL.City),translations:l,infoBannerProps:d,onBlur:(e,t)=>{var i;const n=q(e,t),s=null===(i=B(e))||void 0===i?void 0:i.trackingEvent;null!=s&&s.extra&&("valid"in s.extra&&(0,v.assign)(s.extra,{valid:n}),_(s))}}),!(null==l||!l.note)&&(0,z.jsx)(gt.Z,{styling:s,body:l.note}),(0,z.jsxs)(gt.Z,{styling:s,children:[(0,z.jsx)(ic.I,{testId:"address-form-submit-button",styling:ic.I.Styling.Filled,disabled:i,isLoading:i,text:(null==l||null===(t=l.buttons)||void 0===t?void 0:t.continue)||b("buttons.continue"),theme:"primary",onClick:()=>{const e=Z();u({countryId:T,name:e.name,line1:e.line1,line2:e.line2,postalCode:(null==O?void 0:O.code)||null,state:(null==O?void 0:O.state)||null,city:e.city},!(r.length||!(0,v.isEmpty)(w))&&(null==c||!c.length||c.map((e=>{var t;let{field:i}=e;return q(i,null!==(t=Z(jb[i]))&&void 0!==t?t:"")})).every(Boolean)))}}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),n&&h?(0,z.jsx)(ic.I,{theme:"warning",disabled:i,text:(null==l||null===(H=l.buttons)||void 0===H?void 0:H.delete)||b("buttons.delete"),onClick:h}):(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,disabled:i,text:(null==l||null===(V=l.buttons)||void 0===V?void 0:V.cancel)||b("buttons.cancel"),onClick:g})]})]}):null;var V,H},Zb=e=>{let{address:t,translations:i,addressEntryType:n,fieldConfiguration:s=[{field:Xg.GL.Country},{field:Xg.GL.Name},{field:Xg.GL.Line1},{field:Xg.GL.Line2},{field:Xg.GL.PostalCode},{field:Xg.GL.City}],onSubmit:r=v.noop,onCancel:a=v.noop}=e;const[o,l]=(0,m.useState)([]),[c,d]=(0,m.useState)(Ne.Idle);return(0,z.jsx)(Sb,{defaultValues:t,errors:o,fieldConfiguration:s,translations:i,loader:(0,z.jsx)(Mp,{styling:Mp.Styling.Wide,size:Mp.Size.Large}),isSubmitPending:c===Ne.Pending,infoBannerProps:{screen:$t.BillingAddressUpdate,linkTracking:{target:qm.ZipCodeForTaxInfoBanner}},onSubmit:async function(e,t){if(!t)return;l([]),d(Ne.Pending);const i=await(0,Fe.y$3)({address:{...e,entryType:n}});if("errors"in i){d(Ne.Failure);const{message:e,code:t}=i;let n=[];return e&&t===pm.Q.CountryChangeNotAllowed&&(n=[{field:Xg.GL.Country,value:i.message}]),void l([...i.errors,...n])}r(i.user_address),d(Ne.Success)},onCancel:a})},Ib=e=>{let{isVisible:t,configuration:i,address:n,onClose:s,onSubmit:r}=e;const a=(0,p.v9)(te),o=U("profile_shipping_settings.address_settings"),l=(0,p.I0)(),c={...n,name:(null==n?void 0:n.name)||a};return(0,z.jsx)(cp.Z,{show:t,hasScrollableContent:!0,testId:"address-modal",children:(0,z.jsxs)("div",{className:"u-overflow-auto u-fill-width",children:[(0,z.jsx)(nc.Z,{children:(0,z.jsx)(xt.Z,{text:o("title"),type:xt.Z.Type.Title,alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent})}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(Zb,{address:c,translations:{buttons:{continue:o("buttons.continue")}},fieldConfiguration:i,onSubmit:e=>{const t=(0,V.X)(e);l(ib.setDefaultShippingAddress({address:t})),r()},onCancel:()=>{s()},addressEntryType:Xg.s1.Shipping})]})})},Cb=(0,ad.PH)("".concat(M_,"/fetchCountryBoundsRequest")),kb=(0,ad.PH)("".concat(M_,"/fetchNearbyDropOffOptionsRequest")),wb="next-env",Pb=e=>t=>(e=>e[wb])(t)[e],zb=(0,B.P1)([e=>G(e).facebookAppId,Pb("FACEBOOK_CLIENT_ID")],((e,t)=>e||t)),Tb=(0,B.P1)([e=>G(e).appleClientId,Pb("APPLE_CLIENT_ID")],((e,t)=>e||t)),Fb=(0,B.P1)([e=>G(e).googleClientId,Pb("GOOGLE_CLIENT_ID")],((e,t)=>e||t)),Nb=(0,B.P1)([e=>G(e).googleMapsApiKey,Pb("GOOGLE_MAPS_API_KEY")],((e,t)=>e||t||"")),Lb="google-maps-service";let Eb,Ob,Rb,Db,Ab,Mb;!function(e){e.Geocode="geocode",e.Address="address",e.Establishment="establishment"}(Eb||(Eb={})),function(e){e.pageLoad="page_load",e.pageView="pageView",e.modalView="modalView",e.Login="User_Login",e.Register="User_Register",e.PhotoUpload="Item_Photo_Upload",e.ItemList="Item_List",e.ItemBuy="Item_Buy",e.ItemView="Item_View_Details",e.BuyStart="Item_Buy_Start",e.FirstList="First_List",e.FirstBuy="First_Buy",e.SecondDayList="Second_Day_List"}(Ob||(Ob={})),function(e){e.Locality="locality",e.Political="political",e.Country="country",e.PostalCode="postal_code",e.StreetNumber="street_number",e.Route="route"}(Rb||(Rb={})),function(e){e.SearchResult="Search Result Page",e.ProductDisplay="Product Display Page",e.ProductListings="Product Listings Page",e.Checkout="Checkout Page",e.Favourites="Favourites Page",e.Registration="Register Page",e.Login="Login Page",e.OrderComplete="Order Complete Page",e.AddListing="Add listing Page",e.Others="Others"}(Db||(Db={})),function(e){e.Login="Login",e.Register="Register",e.AddListing="Add listing",e.Checkout="Checkout"}(Ab||(Ab={})),function(e){e.Logged="Logged In",e.NotLogged="Not Logged In"}(Mb||(Mb={}));const Ub=e=>{if(e)return{country:e}},Bb=function(e,t){const i={...t,event:e};arguments.length>2&&void 0!==arguments[2]&&arguments[2]||delete i.user_email,window.dataLayer=window.dataLayer||[],window.dataLayer.push(i)},qb=e=>{var t;return null!==(t=window.google)&&void 0!==t&&t.maps?new Promise((t=>{(new window.google.maps.Geocoder).geocode({address:e},(e=>{t(null==e?void 0:e[0])}))})):Promise.resolve(void 0)};var Vb=i(44893);const Hb=e=>{let{id:t,src:i,isAsync:n=!0,isDefer:s=!0,crossOrigin:r,integrity:a,dataset:o}=e;return document.getElementById(t)?Promise.resolve():new Promise(((e,l)=>{const c=document.createElement("script");c.id=t,c.src=i,c.type="text/javascript",c.async=n,c.defer=s,r&&(c.crossOrigin=r),a&&(c.integrity=a),c.onload=e,c.onerror=l,o&&Object.keys(o).forEach((e=>{c.dataset[e]=o[e]})),document.head.appendChild(c)}))};let Gb=[];const Wb=()=>{Gb.forEach((e=>e()))},Xb=e=>{const t=(0,Vb.B)(e);return(null==t?void 0:t.redirect_uri)||e},Yb=function(){const e=(0,p.v9)(Nb),[t,i]=(0,m.useState)(!1);return(0,m.useEffect)((()=>{var t,n;const s=()=>i(!0);return void 0!==(null===(t=window)||void 0===t||null===(n=t.google)||void 0===n?void 0:n.maps)?i(!0):((e=>{let{apiKey:t,onGoogleApiLoaded:i}=e;if((e=>{var t;window.googleApiLoaded=Wb,Gb.includes(e)||Gb.push(e),null!==(t=window.google)&&void 0!==t&&t.maps&&Wb()})(i),document.getElementById(Lb))return;const n=new URL("/maps/api/js","https://maps.googleapis.com");n.searchParams.set("key",t),n.searchParams.set("libraries",["places","geometry"].toString()),n.searchParams.set("callback","googleApiLoaded");const s=n.toString();Hb({id:Lb,src:s})})({apiKey:e,onGoogleApiLoaded:s}),()=>{return e=s,void(Gb=Gb.filter((t=>t!==e)));var e})}),[e]),t};let Kb;!function(e){e[e.InputText=0]="InputText",e[e.InputBar=1]="InputBar"}(Kb||(Kb={}));const Jb=e=>{let{name:t,type:i=Kb.InputText,isLoading:n=!1,screen:s,title:r,placeholder:a,country:o,initialValue:l,validation:c,suggestionsListMaxHeight:d,queryDebounce:u=300,onValueChange:p=v.noop,onPlaceDetailsChange:x=v.noop}=e;const{track:f}=vi(),[y,_]=(0,m.useState)(null),[b,j]=(0,m.useState)(!1),[S,Z]=(0,m.useState)([]),I=(0,m.useRef)(null),C=(()=>{const e=Yb(),[t,i]=(0,m.useState)(null);return(0,m.useEffect)((()=>{if(e)return i(new window.google.maps.places.AutocompleteSessionToken),()=>i(null)}),[e]),t})();(0,m.useEffect)((()=>{l&&_(l)}),[l]);const k=()=>{_(null),Z([]),j(!1)},w=(e,t)=>{t===window.google.maps.places.PlacesServiceStatus.OK&&e&&x(e)},P=e=>{const t=S[e];var i;t&&((e=>{if(!I.current)return;if(!C)return;const t=new window.google.maps.Map(I.current);new window.google.maps.places.PlacesService(t).getDetails(function(e,t){return{placeId:e,sessionToken:t,fields:arguments.length>2&&void 0!==arguments[2]?arguments[2]:["address_component","formatted_address","geometry"]}}(e.place_id,C),w)})(t),i=t,y&&p(y,i.description),_(i.description),Z([i]),j(!1),(e=>{if(!C)return;const t=C[Object.keys(C)[0]];f((e=>{const{selectedAutocomplete:t,sessionToken:i,screen:n}=e;return{event:"user.autocomplete_details",extra:{selected_autocomplete:t,session_token:i,screen:n}}})({selectedAutocomplete:e.description,sessionToken:t,screen:s}))})(t))},T=()=>{S.length&&(b||j(!0))},F=e=>t=>{b&&(t.key===Lm.Escape&&j(!1),t.key===Lm.Tab&&j(!1),t.key===Lm.Enter&&(_(S[0].description),j(!1)),e(t))},N=ql((async e=>{const t={value:e,country:o,sessionToken:C,type:Eb.Geocode},i=await(n=t,new Promise((e=>{var t,i;void 0===(null===(t=window)||void 0===t||null===(i=t.google)||void 0===i?void 0:i.maps)&&e(null),n.value||e(null);try{(new window.google.maps.places.AutocompleteService).getPlacePredictions((e=>{let{value:t,country:i,sessionToken:n,type:s=Eb.Geocode}=e;return{input:t||"",sessionToken:n||{},types:[s],componentRestrictions:Ub(i)}})(n),((t,i)=>{i===window.google.maps.places.PlacesServiceStatus.OK&&e(t)}))}catch{e(null)}})));var n,r;i&&((e,t)=>{if(!C)return;const i=C[Object.keys(C)[0]];f((e=>{const{query:t,count:i,sessionToken:n,screen:s}=e;return{event:"user.autocomplete_results",extra:{query:t,count:i,session_token:n,screen:s}}})({query:e,count:t,sessionToken:i,screen:s}))})(e,i.length),null!=(r=i)&&r.length&&(Z(r),j(!0))}),u),L=e=>{const{value:t}=e.currentTarget;_(t),t?N(t):(p(t),Z([]),j(!1))},E=e=>b&&S.length?(0,z.jsx)("div",{className:"u-position-relative",children:(0,z.jsx)("div",{className:"u-position-absolute u-zindex-small u-fill-width",children:(0,z.jsxs)(g.Z,{styling:g.Z.Styling.Elevated,children:[(0,z.jsx)(Lg,{maxHeight:d,children:(0,z.jsx)(kp,{children:S.map(((t,i)=>{return(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,highlighted:S.length>1&&i===e,title:t.description,onClick:(n=i,e=>{e.preventDefault(),e.stopPropagation(),P(n)})},t.place_id);var n}))})}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{prefix:(0,z.jsx)(Kl.U,{src:"/assets/google/powered_by_google.png"})})]})})}):null,O=e=>(0,z.jsxs)(z.Fragment,{children:[E(e),c]});return(0,z.jsx)(zp,{onOutsideClick:()=>{b&&(p(y),j(!1))},children:(0,z.jsx)(Lp,{itemCount:S.length,onSelect:P,children:e=>{let{highlightedResultIndex:s,handleKeyNavigation:o}=e;return((e,s)=>{const o={name:t,value:y,placeholder:null!=a?a:"",forwardedRef:I,onFocus:T,onKeyDown:F(s),onChange:L};return i===Kb.InputBar?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Tm.N,{...o,isLoading:n,onValueClear:k,testId:"autocomplete-input-bar"}),O(e)]}):(0,z.jsx)(fb.M,{...o,title:r,validation:O(e)})})(s,o)}})})};var Qb=i(73546);function $b(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class ej extends m.Component{constructor(){super(...arguments),$b(this,"handleGoogleApiLoaded",(e=>{let{map:t,maps:i}=e;const{useGoogleInternalApi:n,onMapLoaded:s}=this.props;n&&s(t,i)}))}render(){const{googleApiKey:e,mapOptions:t,children:i,defaultZoom:n,defaultCenter:s,onMapClick:r}=this.props;return(0,z.jsx)(Qb.ZP,{bootstrapURLKeys:{key:e},defaultZoom:n,defaultCenter:s,yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:this.handleGoogleApiLoaded,options:t,onClick:r,children:i})}}$b(ej,"defaultProps",{useGoogleInternalApi:!1,onMapLoaded:v.noop,onMapClick:v.noop});const tj=ej,ij=e=>{let{lat:t,lng:i}=e;return(0,z.jsx)("div",{className:"pickup-point-map__address-pin",children:(0,z.jsx)(ht.Z,{name:"address-pin-filled",color:ht.Z.Color.Warning,aria:{"aria-hidden":"true"},testId:"address-pin"})})},nj=e=>{let{lat:t,lng:i}=e;return(0,z.jsx)("div",{className:"pickup-point-map__current-location",children:(0,z.jsx)(ht.Z,{name:"current-location",size:ht.Z.Size.Medium,color:ht.Z.Color.Primary,aria:{"aria-hidden":"true"},testId:"current-location"})})},sj=()=>new Promise(((e,t)=>{var i;null!==(i=navigator)&&void 0!==i&&i.geolocation?navigator.geolocation.getCurrentPosition((t=>e({latitude:t.coords.latitude,longitude:t.coords.longitude})),t):e()}));var rj=i(36088),aj=i(64683),oj=i(77070);let lj,cj,dj,uj,mj;!function(e){e.Visa="visa",e.Mastercard="mastercard",e.DinersClub="diners_club",e.AmericanExpress="american_express",e.Discover="discover",e.JCB="jcb",e.BCMC="bcmc",e.Maestro="maestro",e.Unknown="unknown"}(lj||(lj={})),function(e){e.JCB="JCB",e.Visa="Visa",e.BCMC="Mastercard",e.Mastercard="Mastercard",e.DinersClub="Diners Club",e.AmericanExpress="American Express",e.Unknown="Unknown"}(cj||(cj={})),function(e){e.PostalCode="postal_code"}(dj||(dj={})),function(e){e.Success="success",e.Fail="fail"}(uj||(uj={})),function(e){e.Unknown="unknown",e.Transaction="transaction",e.PaymentSettings="payment_settings",e.NewPushUpOrder="new_push_up_order",e.ItemPushUpOrder="item_push_up_order",e.ProfilePushUpOrder="profile_push_up_order",e.MainClosetPromotion="main_closet_promotion",e.ProfileClosetPromotion="profile_closet_promotion",e.DirectDonationOrder="direct_donation_order",e.WebviewDirectDonationOrder="webview_direct_donation_order",e.FeaturedCollection="featured_collection",e.ProfileCollections="profile_collections",e.CollectionsManagement="collections_management",e.MsgThreadReturnLabelOrder="msg_thread_return_label_order",e.ComplaintReturnLabelOrder="complaint_return_label_order"}(mj||(mj={}));const pj=e=>e?e.replace(/\D+/g,""):"",gj=[1,4,8,15,16,24,32,48],hj=()=>{const{screen:e,navigator:t}=window;return{language:t.language,javaEnabled:t.javaEnabled(),colorDepth:(i=e.colorDepth,function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).sort(((t,i)=>Math.abs(e-t)-Math.abs(e-i)))[0]}(i,[...gj])),screenWidth:e.width,screenHeight:e.height,timezoneOffset:(new Date).getTimezoneOffset()};var i},xj=e=>{const t=Number(e);if(!Number.isNaN(t))return"".concat(t)},fj=(e,t)=>{const{push_up_order_id:i,closet_promotion_order_id:n,direct_donation_order_id:s,featured_collection_order_id:r,return_label_order_id:a}=(0,ys.oZ)(e);switch(t){case Ti.PushUp:return i&&Number(i);case Ti.ClosetPromotion:return n&&Number(n);case Ti.DirectDonation:return s&&Number(s);case Ti.FeaturedCollection:return r&&Number(r);case Ti.ReturnLabel:return a&&Number(a);default:return}},yj=e=>{const{card_add_result:t,external_card_code:i}=(0,ys.oZ)(e);return{cardId:xj(i),cardAddResult:(n=t,(e=>!!e&&!Array.isArray(e)&&Object.values(uj).includes(e))(n)?n:void 0)};var n},vj=e=>{let{page:t,itemId:i,userId:n}=e;switch(t){case wi.MultiplePushUp:return{entityType:mj.NewPushUpOrder};case wi.Item:return{entityId:i,entityType:mj.ItemPushUpOrder};case wi.UserProfile:return{entityId:n,entityType:mj.ProfilePushUpOrder};default:return{entityType:mj.Unknown}}},_j=e=>{let{page:t,userId:i}=e;switch(t){case wi.Catalog:case wi.NewsFeed:return{entityType:mj.MainClosetPromotion};case wi.UserProfile:return{entityId:i,entityType:mj.ProfileClosetPromotion};default:return{entityType:mj.Unknown}}},bj=e=>{let{page:t}=e;switch(t){case wi.Balance:return{entityType:mj.DirectDonationOrder};case wi.Donate:return{entityType:mj.WebviewDirectDonationOrder};default:return{entityType:mj.Unknown}}},jj=e=>{let{page:t,featuredCollectionId:i}=e;switch(t){case wi.FeaturedCollection:return{entityId:i,entityType:mj.FeaturedCollection};case wi.UserProfile:return{entityType:mj.ProfileCollections};case wi.CollectionsManagement:return{entityType:mj.CollectionsManagement};default:return{entityType:mj.Unknown}}},Sj=e=>{let{page:t,conversationId:i,complaintId:n}=e;switch(t){case wi.MessageList:return{entityId:i,entityType:mj.MsgThreadReturnLabelOrder};case wi.ViewIssueDetails:return{entityId:n,entityType:mj.ComplaintReturnLabelOrder};default:return{entityType:mj.Unknown}}},Zj=e=>{switch(e.type){case"escrow":return{entityId:e.transactionId,entityType:mj.Transaction};case"settings":return{entityType:mj.PaymentSettings};case Ti.PushUp:return{orderId:e.orderId,...vj(e)};case Ti.ClosetPromotion:return{orderId:e.orderId,..._j(e)};case Ti.DirectDonation:return{orderId:e.orderId,...bj(e)};case Ti.FeaturedCollection:return{orderId:e.orderId,...jj(e)};case Ti.ReturnLabel:return{orderId:e.orderId,...Sj(e)};default:return{entityType:mj.Unknown}}},Ij=e=>{var t;return{id:"".concat(e.external_code||e.id),lastFour:e.last4||e.last_four,isDefault:null!==(t=e.default)&&void 0!==t?t:e.is_default,brand:e.brand,expirationMonth:e.expiration_month,expirationYear:e.expiration_year,isSingleUse:e.single_use,expired:e.expired}},Cj=e=>e.map(Ij),kj=e=>{let{id:t,note:i,code:n,icon:s,enabled:r,preferred:a,translated_name:o,event_tracking_code:l,requires_credit_card:c,method_change_possible:d}=e;return{id:t,code:n,icon:s,enabled:r,preferred:a,note:i||null,translatedName:o,eventTrackingCode:l,requiresCreditCard:c,methodChangePossible:d}},wj=e=>e.map(kj),Pj=e=>e?{status:e.status,message:e.message}:null,zj=e=>{let{id:t,untracked:i,custom:n,name:s,mandatory:r,preferred_choice:a,buyer_hint:o,code:l,description:c,formatted_address_title:d,delivery_type:u,shipment_delivery_type:m,buyer_title:p,no_shipping:g,icon_url:h,restriction:x,shipment_instructions:f}=e;return{id:t,name:s,untracked:i,custom:n,code:l,description:c,isMandatory:r,isPreferredChoice:a,buyerTitle:p,buyerHint:o,formattedAddressTitle:d,deliveryType:u,shipmentDeliveryType:m,noShipping:g,iconUrl:h,restriction:Pj(x),shipmentInstructions:f}},Tj=e=>{let{icon_url:t,confirm_title:i,confirm_message:n,secondary_title:s,confirm_selection_title:r,cancel_selection_title:a,print_icon:o}=e;return{iconUrl:t,confirmTitle:i,confirmMessage:n,secondaryTitle:s,confirmSelectionTitle:r,cancelSelectionTitle:a,dropOffPrintIcon:o?(l=o,{url:l.url,text:l.text}):null};var l},Fj=e=>{let{id:t,instructions:i,key:n,subtitle:s,title:r,drop_off_type_meta:a,pick_up_date_shown:o,pick_up_time_shown:l}=e;return{id:t,instructions:i,key:n,subtitle:s,title:r,dropOffTypeMeta:Tj(a),pickUpDateShown:o,pickUpTimeShown:l}},Nj=e=>{let{id:t,first_mile_carrier_id:i,last_mile_carrier_id:n,is_fixed_price:s,code:r,price:a,currency:o,title:l,subtitle:c,seller_price:d,weight_to:u,weight_from:m,weight_units:p,carrier_service:g,value_proposition:h,package_size_code:x,carrier_service_label:f,shipment_instructions:y,drop_off_types:v,buyer_phone_requirement:_,seller_phone_requirement:b,item_offline_verification_enabled:j}=e;return{id:t,firstMileCarrierId:i,lastMileCarrierId:n,isFixedPrice:s,code:r,price:a,currency:o,title:l,subtitle:c,sellerPrice:d,weightFrom:m,weightTo:u,weightUnits:p,carrierService:g,valueProposition:h,packageSizeCode:x,carrierServiceLabel:f,shipmentInstructions:y,dropOffTypes:(S=v,S.map(Fj)),buyerPhoneRequirement:_,sellerPhoneRequirement:b,itemOfflineVerificationEnabled:j};var S},Lj=e=>{let{opens_at:t,closes_at:i}=e;return{opensAt:t,closesAt:i}},Ej=e=>{let{weekday:t,label:i,hours:n}=e;return{weekday:t,label:i,hours:null==n?void 0:n.map(Lj)}},Oj=e=>{let{uuid:t,code:i,carrier_code:n,latitude:s,longitude:r,name:a,city:o,description:l,address_line1:c,address_line2:d,postal_code:u,photo_url:m,business_hours:p,labels:g}=e;return{uuid:t,code:i,carrierCode:n,latitude:s,longitude:r,name:a,city:o,description:l,addressLine1:c,addressLine2:d,postalCode:u,photoUrl:m,businessHours:null==p?void 0:p.map(Ej),labels:g}},Rj=e=>{let{icon_url:t,subtitle:i,title:n,type:s}=e;return{iconUrl:t,subtitle:i,title:n,type:s}},Dj=e=>{let{id:t,price:i,status:n,carrier:s,currency:r,label_url:a,rate_uuid:o,to_address:l,from_address:c,package_type:d,pickup_point:u,tracking_code:m,digital_label_types:p,label_type:g}=e;return{id:t,price:i,status:n,currency:r,rateUuid:o,labelUrl:a,trackingCode:m,carrier:zj(s),packageType:Nj(d),toAddress:l&&(0,V.X)(l),fromAddress:c&&(0,V.X)(c),pickupPoint:u&&Oj(u),digitalLabelTypes:p&&(h=p,h.map(Rj)),shipmentLabelType:g&&g};var h},Aj=e=>{let{id:t,price:i,status:n,carrier:s,currency:r,label_url:a,rate_uuid:o,carrier_id:l,to_address:c,entry_type:d,price_label:u,status_label:m,status_title:p,from_address:g,package_type:h,pickup_point:x,tracking_code:f,transaction_id:y,drop_off_type_id:v,status_updated_at:_,last_mile_carrier:b,first_mile_carrier:j,digital_label_types:S}=e;return{...Dj({id:t,price:i,status:n,carrier:s,currency:r,label_url:a,rate_uuid:o,to_address:c,from_address:g,package_type:h,pickup_point:x,tracking_code:f,digital_label_types:S}),carrierId:l,entryType:d,priceLabel:u,statusLabel:m,statusTitle:p,transactionId:y,dropOffTypeId:v,statusUpdatedAt:_,lastMileCarrier:zj(b),firstMileCarrier:zj(j)}},Mj=e=>{let{price:t,delivery_type:i,shipping_options:n}=e;return{price:Va(t),deliveryType:i,shippingOptions:n&&Th(n)}},Uj=e=>{let{price:t,delivery_type:i,package_types_ids:n,contains_different_prices:s,shipping_option:r,shipping_options:a,selected_rate_uuid:o}=e;return{price:Va(t),deliveryType:i,packageTypeIds:n,containsDifferentPrices:s,shippingOption:r&&zh(r),shippingOptions:a&&Th(a),selectedRateUuid:o}},Bj=e=>{let{price:t,delivery_type:i}=e;return{price:Va(t),deliveryType:i}},qj=e=>{let{delivery_type:t}=e;return{deliveryType:t}},Vj=e=>{let{home:t,pickup:i,meetup:n,custom:s}=e;const r=(0,v.omitBy)({pickup:i&&Uj(i),home:t&&Mj(t),custom:s&&Bj(s),meetup:n&&qj(n)},v.isNil);return(0,v.isEmpty)(r)?null:r},Hj=e=>{let{seller_currency:t,seller_price:i,seller_shipping_price:n,fx_base_amount:s,fx_rounded_rate:r,fx_markup_rate:a,buyer_currency:o}=e;return{sellerPrice:i,sellerShippingPrice:n,sellerCurrency:t,buyerCurrency:o,fxRoundedRate:r,fxBaseAmount:s,fxMarkupRate:a}},Gj=e=>{let{seller_price:t,shipping_price:i,fx_base_amount:n,fx_rounded_rate:s,fx_markup_rate:r,buyer_currency:a}=e;return{sellerPrice:Va(t),sellerShippingPrice:i?Va(i):null,buyerCurrency:a,fxRoundedRate:s,fxBaseAmount:n,fxMarkupRate:r}},Wj=e=>{let{fee:t,enabled:i}=e;return{fee:Va(t),enabled:i}},Xj=e=>{let{price:t,discount:i,final_price:n}=e;return{price:Va(t),discount:Va(i),finalPrice:Va(n)}},Yj=e=>{let{used_before:t,pay_in_method:i,external_card:n}=e;return{usedBefore:t,payInMethod:kj(i),externalCard:n&&Ij(n)}},Kj=e=>{let{amount:t,delayed:i,expiry_date:n}=e;return{isDelayed:i,expiryDate:n,amount:Va(t)}},Jj=e=>{let{type:t,amount:i,expiry_date:n}=e;return{type:t,expiryDate:null!=n?n:null,amount:i?Va(i):null}},Qj=e=>{let{promotion:t,incentive:i,recommended:n}=e;return{promotion:t?Jj(t):null,incentive:i?Kj(i):null,recommended:n?(s=n,s.map(Yj)):null};var s},$j=e=>{let{id:t,items:i,shipment:n,services:s,checksum:r,payment_available:a,seller:{is_business:o},pricing:{base:l,payment:c,shipping:d,sales_tax:u,discount_note:m,shipping_note:p,sales_tax_covered:g,buyer_protection_fee:h,offline_verification_fee:x,conversion:f},buyer:{card:y,phone_number:v,pay_in_method:_,external_card_code:b,shipment_to_address:j,pay_in_methods_config:S}}=e;return{id:t,checksum:r,paymentAvailable:a,items:ro(i),shipment:Aj(n),seller:{isBusiness:o},buyer:{phoneNumber:null!=v?v:null,card:y?Ij(y):null,creditCardId:b?"".concat(b):null,payInMethod:_?kj(_):null,shipmentToAddress:j?(0,V.X)(j):null,payInMethodsConfig:S?Qj(S):null},pricing:{discountNote:null!=m?m:null,shippingNote:null!=p?p:null,base:Xj(l),shipping:Xj(d),buyerProtectionFee:Xj(h),offlineVerificationFee:x?Xj(x):null,isSalesTaxCovered:null!=g?g:null,salesTax:u?Ga(u):null,payment:{payIn:Va(c.pay_in),wallet:Va(c.wallet)},conversion:f?Gj(f):null},services:{shipping:s.shipping?{selectedDeliveryType:s.shipping.selected_delivery_type,buyerPhoneRequirement:s.shipping.buyer_phone_requirement,deliveryTypes:Vj(s.shipping.delivery_types)}:null,offlineVerification:s.offline_verification?Wj(s.offline_verification):null}}},eS=e=>!!e&&"action"in e;function tS(e){let{adyen:t,adyen_bank:i}=e;return{adyen:eS(t)?t.action:t,adyenBank:eS(i)?i.action:i}}const iS=e=>{let{provider_config:t,provider:i}=e;return{providerConfig:{apiKey:t.api_key,site:t.site},provider:i}},nS=e=>{let{threeds2:t}=e;return{threeDS2:t?iS(t):null}};let sS,rS;!function(e){e.Completed="completed",e.Pending="pending",e.Failed="failed"}(sS||(sS={})),function(e){e[e.New=1]="New",e[e.Processing=10]="Processing",e[e.Pending=20]="Pending",e[e.Failed=30]="Failed",e[e.Authorized=35]="Authorized",e[e.Success=40]="Success",e[e.PayoutAvailable=50]="PayoutAvailable",e[e.PayoutProcessing=60]="PayoutProcessing",e[e.PayoutFailed=70]="PayoutFailed",e[e.PayoutDone=80]="PayoutDone",e[e.PayoutReverted=85]="PayoutReverted",e[e.PayoutPartiallyRefunded=90]="PayoutPartiallyRefunded",e[e.Refunded=100]="Refunded"}(rS||(rS={}));var aS=i(23055);const oS=e=>(e=>e[fy])(e).payment,lS=e=>oS(e).formState,cS=e=>oS(e).cardAddAuth,dS=e=>oS(e).payInMethodsState.payInMethods,uS=e=>oS(e).isCardSingleUseOverriden,mS=(0,aS.P1)(lS,(e=>{let{errors:t}=e;return t.isCardExpired})),pS=(0,aS.P1)(dS,(e=>e.find((e=>{let{code:t}=e;return t===iv.CreditCard})))),gS=(0,ad.PH)("".concat(fy,"/initiateEscrowPaymentRequest")),hS=(0,ad.PH)("".concat(fy,"/handlePaymentInitiationResponse")),xS=(0,ad.PH)("".concat(fy,"/handlePendingPayment")),fS=(0,ad.PH)("".concat(fy,"/handlePaymentRedirectResult")),yS=(0,ad.PH)("".concat(fy,"/getEscrowPaymentDataRequest")),vS=(0,ad.PH)("".concat(fy,"/updateEscrowPaymentDataRequest")),_S=(0,ad.PH)("".concat(fy,"/validateFields")),bS=(0,ad.PH)("".concat(fy,"/fetchConfigurationRequest")),jS=e=>({id:e.id,askUser2fa:e.ask_user_2fa,showResendOption:e.show_resend_option,userMaskedPhoneNumber:e.masked_phone_number,userMaskedInfo:e.user_masked_info,nextResendAvailableIn:e.next_resend_available_in}),SS={formState:{errors:{isCardExpired:!1}},isCardSingleUseOverriden:!1,payInMethodsState:{ui:Ne.Idle,payInMethods:[]}},ZS=(0,ad.oM)({name:fy,initialState:SS,reducers:{setIsCardExpired:(e,t)=>{e.formState.errors.isCardExpired=t.payload.isExpired},handleCardAddAuthResult:(e,t)=>{const{cardAddResult:i}=t.payload;e.cardAddAuth={cardAddResult:i}},fetchPayInMethodsRequest:e=>{e.payInMethodsState.ui=Ne.Pending},fetchPayInMethodsFailure:e=>{e.payInMethodsState.ui=Ne.Failure},fetchPayInMethodsSuccess:(e,t)=>{e.payInMethodsState.ui=Ne.Success,e.payInMethodsState.payInMethods=t.payload.payInMethods},setIsCardSingleUseOverriden:(e,t)=>{e.isCardSingleUseOverriden=t.payload.overrideSingleUse}}}),{actions:IS}=ZS,CS=(ZS.reducer,ZS.reducer);function*kS(e){let{payload:{transactionId:t}}=e;if(!t)return;const i=yield*(0,oj.RE)(Fe.VKl,t);if("errors"in i)return void(yield(0,aj.gz)(Cy.getCheckoutDataFailure()));const n=$j(i.checkout);yield(0,aj.gz)(Cy.getCheckoutDataSuccess({checkout:n}))}function*wS(e){let{payload:{transactionId:t,updatedCheckoutData:i}}=e;if(!t)return;const n=yield*(0,oj.RE)(Fe.VTZ,t,i||null);if("errors"in n)return void(yield(0,aj.gz)(n.code===pm.Q.PaymentAlreadyProcessed?yS({transactionId:t}):Cy.updateCheckoutDataFailure()));const s=$j(n.checkout);yield(0,aj.gz)(Cy.updateCheckoutDataSuccess({checkout:s}))}function*PS(e){if(!e)return;const t=jS(e);yield(0,aj.gz)(Cy.setTwoFactorVerification(t))}function*zS(e){var t;if(e)switch(e.code){case pm.Q.User2FAConfirmation:yield*(0,oj.RE)(PS,e.payload);break;case pm.Q.CreditCardExpired:yield(0,aj.gz)(IS.setIsCardExpired({isExpired:!0}));break;case pm.Q.KYCError:yield(0,aj.gz)(Cy.setIsKycConfirmationNeeded({isNeeded:!0}));break;case pm.Q.CheckoutChecksumMismatchError:yield(0,aj.gz)(Cy.setHasChecksumError({hasChecksumError:!0}));break;case pm.Q.ShippingDiscountAlreadyUsed:yield(0,aj.gz)(Cy.setHasShippingDiscountError({hasShippingDiscountError:!0}));break;default:yield(0,aj.gz)(Cy.setPaymentError({error:{message:null===(t=e.errors[0])||void 0===t?void 0:t.value}}))}}function*TS(){yield(0,aj.gz)(Cy.setIsPaymentProcessing({isPaymentProcessing:!1})),yield(0,aj.gz)(Cy.clearPaymentAuthAction()),yield(0,aj.gz)(Cy.clearBlikAuth());const e=yield*(0,oj.Ys)(Av);e&&(yield(0,aj.gz)(Cy.updateCheckoutDataRequest({transactionId:e})))}function*FS(){const e=yield*(0,oj.RE)(Fe.Ukv);"errors"in e?yield(0,aj.gz)(Cy.fetchConfigurationFailure()):yield(0,aj.gz)(Cy.fetchConfigurationSuccess({configuration:nS(e.checkout_configuration)}))}function*NS(e){let{payload:{response:t}}=e;if("errors"in t)return yield(0,oj.RE)(zS,t),void(yield(0,oj.RE)(TS));const{debit_status:i,pay_in_redirect_url:n,authentication_action:s,user_msg_thread_id:r}=t;if(i===rS.Failed)return yield(0,aj.gz)(Cy.setPaymentError({error:{message:""}})),void(yield(0,oj.RE)(TS));s?yield(0,aj.gz)(Cy.setPaymentAuthAction({paymentAuthAction:tS(s)})):(yield(0,aj.gz)(Cy.clearPaymentAuthAction()),yield(0,aj.gz)(Cy.setPayment({status:i,conversationId:r,payInRedirectUrl:n,authenticationAction:s&&tS(s)})))}function*LS(){yield(0,aj.gz)(Cy.removeFieldsErrors()),yield(0,aj.gz)(Cy.setIsPaymentProcessing({isPaymentProcessing:!0}));const e=yield*(0,oj.Ys)(k_),t=yield*(0,oj.Ys)(Av),i=yield*(0,oj.Ys)(Mv),n=yield*(0,oj.Ys)(uS);if(!t)return;const s=yield*(0,oj.RE)(Fe.QSj,t,{transactionChecksum:i,browserAttributes:hj(),...!!e&&{blikCode:e},...n&&{isSingleUse:!1}});yield(0,aj.gz)(hS({response:s}))}function*ES(e){let{payload:t}=e;yield(0,aj.gz)(Cy.setIsPaymentProcessing({isPaymentProcessing:!0}));const i=yield*(0,oj.RE)(Fe.ce7,t.transactionId);yield(0,aj.gz)(hS({response:i}))}function*OS(e){let{payload:t}=e;yield(0,aj.gz)(Cy.setIsPaymentProcessing({isPaymentProcessing:!0}));const i=yield*(0,oj.Ys)(Av);if(!i)return;const n=yield*(0,oj.RE)(Fe.FCX,i,{paymentData:{data:t.paymentData,details:t.paymentDetails}});yield(0,aj.gz)(hS({response:n}))}function*RS(e){let{payload:{transactionId:t,pollAttemptCount:i}}=e;yield(0,aj.gz)(Cy.setIsPaymentProcessing({isPaymentProcessing:!0})),yield(0,aj.gw)(jy);const n=yield*(0,oj.RE)(Fe.ce7,t);if("errors"in n)return yield(0,aj.gz)(Cy.setPaymentError({error:{message:""}})),void(yield(0,aj.gz)(Cy.setIsPaymentProcessing({isPaymentProcessing:!1})));const{debit_status:s,user_msg_thread_id:r}=n,a=s===rS.Pending;a&&i<Sy?yield(0,aj.gz)(xS({transactionId:t,pollAttemptCount:i+1})):(a&&(yield(0,aj.gz)(Cy.setIsPaymentProcessingTakesTooLong({isPaymentProcessingTakesTooLong:!0}))),yield(0,aj.gz)(Cy.setPayment({status:s,conversationId:r,payInRedirectUrl:null})),yield(0,aj.gz)(Cy.setIsPaymentProcessing({isPaymentProcessing:!1})))}function*DS(e){let{payload:{transactionId:t}}=e;yield(0,aj.gz)(Cy.setIsPaymentProcessing({isPaymentProcessing:!0})),yield(0,aj.gz)(Cy.getCheckoutDataRequest({transactionId:t}));const i=yield*(0,oj.RE)(Fe.ce7,t);if("errors"in i)return yield(0,aj.gz)(Cy.setPaymentError({error:{message:""}})),void(yield(0,aj.gz)(Cy.setIsPaymentProcessing({isPaymentProcessing:!1})));const{debit_status:n,user_msg_thread_id:s}=i;n!==rS.Pending?(n===rS.Failed&&(yield(0,aj.gz)(Cy.setIsPaymentFailedAfterRedirect({isPaymentFailedAfterRedirect:!0}))),yield(0,aj.gz)(Cy.setPayment({status:n,conversationId:s,payInRedirectUrl:null})),yield(0,aj.gz)(Cy.setIsPaymentProcessing({isPaymentProcessing:!1}))):yield(0,aj.gz)(xS({transactionId:t,pollAttemptCount:0}))}function*AS(){yield(0,aj.Fm)(bS,FS),yield(0,aj.Fm)([gS,Cy.confirmBlikAuth],LS),yield(0,aj.Fm)(yS,ES),yield(0,aj.Fm)(vS,OS),yield(0,aj.ib)(Cy.getCheckoutDataRequest,kS),yield(0,aj.ib)([Cy.updateCheckoutDataRequest,Ay.saveTransactionShippingContactSuccess,Ay.deleteTransactionShippingContactSuccess],wS),yield(0,aj.Fm)(hS,NS),yield(0,aj.Fm)(xS,RS),yield(0,aj.Fm)(fS,DS)}const MS=e=>{let{radius:t,center:i,top_left:n,bottom_right:s,top_right:r,bottom_left:a}=e;return{radius:t,center:i,topLeft:n,bottomRight:s,topRight:r,bottomLeft:a}},US=e=>{let{distance:t,preferred:i,point:n,distance_unit:s,distance_label:r,package_type_id:a}=e;return{distance:t,preferred:i,distanceUnit:s,distanceLabel:r,packageTypeId:a,point:Oj(n)}},BS=e=>e.map(US),qS={[by.Modal]:Ne.Idle,[by.SearchArea]:Ne.Idle,[by.UserLocation]:Ne.Idle,[by.Search]:Ne.Idle},VS=(Ne.Idle,{countryBounds:null,nearbyPoints:[],ui:{pickupModal:qS,pickupPoints:Ne.Idle},suggestedShippingPointCode:null,selectedShippingPoint:null,shippingOptions:[]}),HS=(0,ad.oM)({name:fy,initialState:VS,reducers:{fetchCountryBoundsSuccess:(e,t)=>{const{countryBounds:i}=t.payload;e.countryBounds=i},fetchNearbyShippingPointsRequest:e=>{e.ui.pickupModal=qS,e.ui.pickupPoints=Ne.Pending,e.selectedShippingPoint=null},fetchNearbyShippingOptionsFailure:e=>{e.nearbyPoints=[],e.ui.pickupPoints=Ne.Failure},setPickupModalElementUiState:(e,t)=>{const{element:i,uiState:n}=t.payload;e.ui.pickupModal[i]=n},setSelectedShippingPoint:(e,t)=>{const{selectedShippingPoint:i}=t.payload;e.selectedShippingPoint=i},resetPickupPointsUiState:e=>{e.ui.pickupPoints=Ne.Idle},fetchNearbyShippingOptionsSuccess:(e,t)=>{const{nearbyShippingPoints:i,nearbyShippingOptions:n,suggestedShippingPointCode:s,suggestedRateUuid:r}=t.payload;e.nearbyPoints=i,e.shippingOptions=n,e.suggestedShippingPointCode=s,e.suggestedRateUuid=r,e.ui.pickupPoints=Ne.Success},resetShippingOptions:e=>{e.ui.pickupModal=qS,e.ui.pickupPoints=Ne.Idle,e.countryBounds=null,e.nearbyPoints=[],e.suggestedShippingPointCode=null,e.selectedShippingPoint=null,e.shippingOptions=[]},setSelectedServiceType:(e,t)=>{const{serviceType:i}=t.payload;e.selectedServiceType=i}}}),{actions:GS}=HS,WS=(HS.reducer,HS.reducer),XS=(0,ad.PH)("".concat(fy,"/fetchCountryBoundsRequest")),YS=(0,ad.PH)("".concat(fy,"/handlePickupModalElementRequest")),KS=(0,ad.PH)("".concat(fy,"/trackShippingPointsLoad")),JS=(0,ad.PH)("".concat(fy,"/fetchNearbyShippingOptionsRequest")),QS=(e,t)=>{if(!e.length||!t.length)return null;const i={};return t.forEach((t=>{t.carrierCode&&(i[t.carrierCode]=e.filter((e=>t.carrierCode===e.point.carrierCode)).length)})),i};function*$S(){const e=yield*(0,oj.Ys)(re),t=yield*(0,oj.Ys)(f_),i=(null==t?void 0:t.countryId)||e;if(!i)return;const n=yield*(0,oj.RE)(Fe.YQH,i);if("errors"in n)return;const s=MS(n.country_bounds);yield(0,aj.gz)(GS.fetchCountryBoundsSuccess({countryBounds:s}))}function*eZ(e){var t;let{payload:i}=e;const n=yield*(0,oj.Ys)(f_),s=yield*(0,oj.Ys)(J),r=yield*(0,oj.Ys)(dv),a=yield*(0,oj.Ys)(z_),o=(null==n?void 0:n.countryIsoCode)||s,l=null==r||null===(t=r.carrier)||void 0===t?void 0:t.id,{coordinates:c,shouldLabelNearestPoints:d}=i;let u,m;if(l){if(c)u=c.latitude,m=c.longitude;else if(null!=r&&r.pickupPoint)u=Number(r.pickupPoint.latitude),m=Number(r.pickupPoint.longitude);else if(a){const e=yield*(0,oj.RE)(qb,a);u=null==e?void 0:e.geometry.location.lat(),m=null==e?void 0:e.geometry.location.lng()}yield(0,aj.gz)(JS({countryCode:o,longitude:m,latitude:u,shouldLabelNearestPoints:d}))}}function*tZ(e){let{payload:{coordinates:t,element:i,shouldLabelNearestPoints:n}}=e;yield(0,aj.gz)(GS.fetchNearbyShippingPointsRequest({coordinates:t,shouldLabelNearestPoints:n})),yield(0,aj.gz)(GS.setPickupModalElementUiState({element:i,uiState:Ne.Pending}));const s=yield(0,aj.S3)({optionsSuccess:(0,aj.qn)(GS.fetchNearbyShippingOptionsSuccess),optionsFailure:(0,aj.qn)(GS.fetchNearbyShippingOptionsFailure)});s.optionsSuccess?yield(0,aj.gz)(GS.setPickupModalElementUiState({element:i,uiState:Ne.Success})):s.optionsFailure&&(yield(0,aj.gz)(GS.setPickupModalElementUiState({element:i,uiState:Ne.Failure})))}function*iZ(e){let{payload:{latitude:t,longitude:i,pickupPoints:n}}=e;const s=yield*(0,oj.Ys)(Av),r=yield*(0,oj.Ys)(Tv);if(!t||!i||!n)return;const a=QS(n,r),o=mn({transactionId:s,screen:$t.PickupPointMap,shippingPointsCount:a?JSON.stringify(a):null,latitude:Number(t),longitude:Number(i)});yield(0,aj.nn)(Ol,Ol.track,[o])}function*nZ(e){let{payload:t}=e;const{latitude:i,longitude:n}=t;let s=[];const r=yield*(0,oj.Ys)(Av);if(r)try{const e=yield*(0,oj.RE)(Fe.PON,{transactionId:r,...t});if("errors"in e||!e.nearby_shipping_points.length)return void(yield(0,aj.gz)(GS.fetchNearbyShippingOptionsFailure()));const{nearby_shipping_points:i,nearby_shipping_options:n,suggested_shipping_point_code:a,suggested_rate_uuid:o}=e;s=BS(i);const l=Th(n),c=a,d=o;yield(0,aj.gz)(GS.fetchNearbyShippingOptionsSuccess({nearbyShippingPoints:s,nearbyShippingOptions:l,suggestedShippingPointCode:c,suggestedRateUuid:d}))}finally{yield(0,aj.gz)(KS({latitude:i,longitude:n,pickupPoints:s}))}}function*sZ(){yield(0,aj.Fm)(XS,$S),yield(0,aj.Fm)(KS,iZ),yield(0,aj.Fm)(YS,tZ),yield(0,aj.Fm)(GS.fetchNearbyShippingPointsRequest,eZ),yield(0,aj.Fm)(JS,nZ)}const rZ=(0,ad.PH)("".concat(fy,"/selectCreditCardRequest"));function*aZ(e){let{payload:t}=e;const{transactionId:i}=t,n=yield*(0,oj.RE)(Fe.iLY,i);if("errors"in n)return void(yield(0,aj.gz)(IS.fetchPayInMethodsFailure()));const s=wj(n.pay_in_methods);yield(0,aj.gz)(IS.fetchPayInMethodsSuccess({payInMethods:s}))}function*oZ(e){let{payload:t}=e;const{cardId:i,cardAddResult:n,transactionId:s}=t,r=n!==uj.Success||!i;yield(0,aj.gz)(Cy.updateCheckoutDataRequest({transactionId:s})),yield(0,aj.gz)(IS.fetchPayInMethodsRequest({transactionId:s})),r||(yield(0,oj.$6)([(0,oj.qn)(Cy.updateCheckoutDataSuccess),(0,oj.qn)(IS.fetchPayInMethodsSuccess)]),yield(0,aj.gz)(rZ({creditCardId:i})))}function*lZ(e){let{payload:t}=e;const{creditCardId:i}=t,n=yield*(0,oj.Ys)(dS),s=yield*(0,oj.Ys)(Av);if(!s)return;const r=n.find((e=>{let{code:t}=e;return t===iv.CreditCard}));r&&(yield(0,aj.gz)(Cy.updateCheckoutDataRequest({transactionId:s,updatedCheckoutData:{creditCardId:i,payInMethodId:r.id}})))}function*cZ(){yield(0,aj.Fm)(rZ,lZ),yield(0,aj.Fm)(IS.handleCardAddAuthResult,oZ),yield(0,aj.Fm)(IS.fetchPayInMethodsRequest,aZ)}const dZ=WS,uZ=CS,mZ={...Cy,...GS,...IS},pZ=(0,rj.UY)({checkout:ky,shipping:dZ,payment:uZ}),gZ={...s,...n,...r},hZ={...a,...l,...o};function*xZ(){yield(0,aj.$6)([AS(),sZ(),cZ()])}const fZ={[fy]:pZ},yZ=e=>{let{onZoomIn:t=v.noop,onZoomOut:i=v.noop,onLocationResponse:n=v.noop}=e;const s=U("checkout.shipping.pickup_point_modal.map"),r=(0,p.v9)((e=>gZ.getPickupModalUiStateByElement(e,by.UserLocation))),[a,o]=(0,m.useState)(!1),l=r===Ne.Pending||a;return(0,z.jsxs)("div",{className:"pickup-point-map__controls",children:[(0,z.jsxs)(g.Z,{styling:g.Z.Styling.Lifted,children:[(0,z.jsx)(ic.I,{size:ic.I.Size.Small,deprecatedIcon:(0,z.jsx)(ht.Z,{name:"plus",size:ht.Z.Size.Small,color:ht.Z.Color.GreyscaleLevel3,aria:{"aria-label":s("a11y.zoom_in")}}),onClick:t,styling:ic.I.Styling.Flat,testId:"map-controls-zoom-in"}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(ic.I,{size:ic.I.Size.Small,deprecatedIcon:(0,z.jsx)(ht.Z,{name:"minus",size:ht.Z.Size.Small,color:ht.Z.Color.GreyscaleLevel3,aria:{"aria-label":s("a11y.zoom_out")}}),onClick:i,styling:ic.I.Styling.Flat,testId:"map-controls-zoom-out"})]}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(g.Z,{styling:g.Z.Styling.Lifted,children:(0,z.jsx)(ic.I,{size:ic.I.Size.Medium,deprecatedIcon:(0,z.jsx)(ht.Z,{name:"location-arrow",size:ht.Z.Size.Small,color:ht.Z.Color.Primary,aria:{"aria-label":s("a11y.location")}}),onClick:async()=>{if(r!==Ne.Pending&&!a)try{o(!0);const e=await sj();if(!e)return;n(e)}finally{o(!1)}},theme:"primary",styling:ic.I.Styling.Flat,isLoading:r===Ne.Pending||a,testId:"map-controls-location".concat(l?"-loading":"")})})]})},vZ=e=>{let{show:t,uiState:i,onClick:n}=e;const s=U();return t||i===Ne.Pending?(0,z.jsx)("div",{className:"pickup-point-map__search-area-container",children:(0,z.jsx)("div",{className:"pickup-point-map__search-area-button",children:(0,z.jsx)(ic.I,{text:s("checkout.shipping.pickup_point_modal.map.search_this_area"),styling:ic.I.Styling.Filled,size:ic.I.Size.Medium,onClick:()=>{i!==Ne.Pending&&n()},isLoading:i===Ne.Pending,inline:!0})})}):null},_Z=e=>{let{latitude:t,longitude:i}=e;return new window.google.maps.LatLng(t,i)};function bZ(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class jZ extends m.Component{constructor(){super(...arguments),bZ(this,"timeoutId",void 0),bZ(this,"state",{isMouseOverElement:!1}),bZ(this,"setIsMouseOverElement",(()=>{this.setState({isMouseOverElement:!0})})),bZ(this,"handleMouseEnter",(()=>{const{delay:e}=this.props,{isMouseOverElement:t}=this.state;t||(this.timeoutId=setTimeout(this.setIsMouseOverElement,e))})),bZ(this,"handleMouseLeave",(()=>{const{isMouseOverElement:e}=this.state;this.timeoutId&&clearTimeout(this.timeoutId),e&&this.setState({isMouseOverElement:!1})}))}render(){const{children:e}=this.props,{isMouseOverElement:t}=this.state;return(0,z.jsx)("div",{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,children:e({isMouseOverElement:t})})}}bZ(jZ,"defaultProps",{delay:300});const SZ=jZ,ZZ="/assets/shipping/pickup-placeholder.svg",IZ=e=>{let{show:t,dropOffPoint:i,onClick:n,id:s,isActive:r}=e;if(!t)return null;const a=y()("drop-off-point-map__info-window",{"drop-off-point-map__info-window--active":r});return(0,z.jsx)("div",{className:a,"data-testid":"drop-off-info-window-".concat(s),children:(0,z.jsx)(g.Z,{styling:g.Z.Styling.Lifted,children:(0,z.jsx)("div",{className:"u-overflow-hidden",children:(0,z.jsxs)(gt.Z,{type:gt.Z.Type.Navigating,onClick:n,prefix:(0,z.jsx)(Kl.U,{src:i.photoUrl||ZZ,fallbackSrc:ZZ,size:Kl.U.Size.XLarge,styling:Kl.U.Styling.Rounded,alt:""}),children:[(0,z.jsx)(xt.Z,{text:i.name,type:xt.Z.Type.Title,width:xt.Z.Width.Parent,truncate:!0}),(0,z.jsx)(xt.Z,{text:i.dropOffPointAddress,width:xt.Z.Width.Parent,truncate:!0})]})})})})},CZ=e=>{let{lat:t,lng:i,dropOffPoint:n,isActive:s,isMouseOverListElement:r,onClick:a,id:o}=e;const l=E(),{track:c}=vi(),d=(0,p.v9)(qd),u=(0,p.v9)(Gu),m=(0,p.v9)(J_),g=e=>{e.stopPropagation(),(e=>{const t=Ri({screen:$t.SellerDropOffMap,target:qm.DropOffPoint,targetDetails:JSON.stringify({transaction_id:d,drop_off_point_code:e.code,distance_to_address:e.distance,distance_unit:e.distanceUnit,shipment_status:u,drop_off_points_source:m})});c(t)})(n),a(n)},h=e=>{const t=e||r,i=y()("drop-off-point-map__location-pin",{"drop-off-point-map__location-pin--hovered":t}),a=y()("drop-off-point-map__location-pin-background",{"drop-off-point-map__location-pin-background--active":s});return(0,z.jsxs)("div",{className:i,onClick:g,"data-testid":"drop-off-point-location-pin",children:[(0,z.jsx)("div",{className:a,"data-testid":"drop-off-point-background",children:(0,z.jsx)(ht.Z,{name:"pickup-point-background",size:s?ht.Z.Size.Large:ht.Z.Size.Medium,color:ht.Z.Color.Primary,aria:{"aria-hidden":"true"},testId:"carrier-icon-".concat(o)})}),(0,z.jsx)("div",{className:"drop-off-point-map__locker-icon",children:(0,z.jsx)(Kl.U,{src:n.pointTypeIconUrl,fallbackSrc:"",size:s?Kl.U.Size.Regular:Kl.U.Size.Small,alt:""})})]})};return(0,z.jsx)(SZ,{children:e=>{let{isMouseOverElement:t}=e;const{desktops:i}=l,r=!!i&&t;return(0,z.jsxs)("div",{className:"u-position-relative",children:[(0,z.jsx)(IZ,{dropOffPoint:n,show:r,onClick:g,id:o,isActive:s}),h(r)]})}})},kZ=e=>{let{googleApiKey:t,addressCoordinates:i,onMapClick:n}=e;const s=(0,p.I0)(),{track:r}=vi(),a=(0,p.v9)(W_),o=(0,p.v9)($_),l=(0,p.v9)(Y_),c=(0,p.v9)(X_),d=(0,p.v9)(qd),u=(0,p.v9)(Gu),g=(0,p.v9)(J_),h=(0,m.useRef)(),[x,f]=(0,m.useState)(),[y,_]=(0,m.useState)(null),[b,j]=(0,m.useState)(!1),S=(0,m.useCallback)((()=>{if(null==c||!c.length)return null;const e=new google.maps.LatLngBounds;return null==c||c.forEach((t=>{const i=Number(t.latitude),n=Number(t.longitude);e.extend(_Z({latitude:i,longitude:n}))})),e}),[c]),Z=(0,m.useCallback)((()=>{const e=S();e&&(null==x||x.fitBounds(e))}),[S,x]),I=(0,m.useCallback)((()=>{if(x)return google.maps.event.addDomListener(window,"resize",(()=>{Z()})),google.maps.event.addListener(x,"dragend",(()=>{j(!0)})),google.maps.event.addListener(x,"zoom_changed",(()=>{j(!0)})),google.maps.event.addListener(x,"click",(()=>{h.current=setTimeout(n,200)})),google.maps.event.addListener(x,"dblclick",(()=>{h.current&&clearTimeout(h.current)})),()=>{google.maps.event.clearListeners(window,"resize"),google.maps.event.clearListeners(x,"dragend"),google.maps.event.clearListeners(x,"zoom_changed"),google.maps.event.clearListeners(x,"click"),google.maps.event.clearListeners(x,"dblclick")}}),[x,Z]);(0,m.useEffect)((()=>{!function(){let e=S();if(!e){if(!a)return;e=new window.google.maps.LatLngBounds(_Z(a.bottomLeft),_Z(a.topRight))}null==x||x.fitBounds(e)}(),I()}),[x,I,S,a]),(0,m.useEffect)((()=>{!(0,v.isEmpty)(c)||y||o!==Ne.Success?o===Ne.Success&&j(!1):j(!0)}),[y,c,o]),(0,m.useEffect)((()=>{c&&c.map((e=>r(Gi({screen:$t.SellerDropOffMap,target:cb.DropOffPoint,targetDetails:JSON.stringify({transaction_id:d,drop_off_point_code:e.code,distance_to_address:e.distance,distance_unit:e.distanceUnit,shipment_status:u,drop_off_points_source:g})}))))}),[g,c,u,r,d]);const C=(0,m.useCallback)((()=>{if(!x)return;const e=new google.maps.Circle({center:x.getCenter(),radius:15e3}).getBounds();e&&(x.fitBounds(e),j(!1))}),[x]);(0,m.useEffect)((()=>{o===Ne.Failure&&(y&&(null==x||x.setCenter(_Z(y))),C())}),[C,o,y,x]);const k=e=>{var t;(t=e)&&s(V_.setSelectedDropOffPoint({selectedDropOffPoint:t}))};return a?(0,z.jsxs)("div",{className:"u-position-relative u-fill-height u-fill-width",children:[(0,z.jsx)("div",{className:"drop-off-point-map",children:(0,z.jsxs)(tj,{googleApiKey:t,defaultCenter:{lat:a.center.latitude||0,lng:a.center.longitude||0},defaultZoom:4,mapOptions:{disableDefaultUI:!0,clickableIcons:!1,minZoom:3,gestureHandling:"greedy",scaleControl:!0},onMapLoaded:e=>{f(e),Z(),l&&(null==x||x.setCenter(_Z({latitude:Number(l.latitude),longitude:Number(l.longitude)})))},useGoogleInternalApi:!0,children:[i?(0,z.jsx)(ij,{lat:i.latitude,lng:i.longitude}):null,y?(0,z.jsx)(nj,{lat:y.latitude,lng:y.longitude}):null,null==c?void 0:c.map(((e,t)=>(0,z.jsx)(CZ,{lat:Number(e.latitude),lng:Number(e.longitude),dropOffPoint:e,isActive:(null==e?void 0:e.code)===(null==l?void 0:l.code),isMouseOverListElement:(null==e?void 0:e.code)===e.code,onClick:k,id:t},"".concat(e.code,"_").concat(t))))]})}),(0,z.jsx)(yZ,{onZoomIn:()=>{if(!x)return;const e=x.getZoom();e&&x.setZoom(e+1)},onZoomOut:()=>{if(!x)return;const e=x.getZoom();e&&x.setZoom(e-1)},onLocationResponse:e=>{_(e),j(!1),(e=>{s(V_.fetchNearbyDropOffPointsRequest({coordinates:e,dropOffPointSource:U_.CurrentLocation}))})(e)}}),(0,z.jsx)(vZ,{show:b,uiState:o,onClick:()=>{const e=null==x?void 0:x.getCenter();e&&(j(!1),s(V_.fetchNearbyDropOffPointsRequest({coordinates:{latitude:e.lat(),longitude:e.lng()},dropOffPointSource:U_.SearchAreaButton})))}}),o===Ne.Pending&&(0,z.jsx)("div",{className:"drop-off-point-map__loader",children:(0,z.jsx)(Dp.Z,{size:Dp.Z.Size.Large,styling:Dp.Z.Styling.Lifted,testId:"drop-off-point-map-loader"})})]}):null};var wZ,PZ=i(445),zZ=i(45188),TZ=i(68540);!function(e){e.Open="open",e.Closed="closed",e.Default="default"}(wZ||(wZ={}));const FZ=e=>{let{dropOffPoint:t,dropOffPointCarrier:i,navigating:n,chevron:s,onClick:r}=e;const a=(e,t,i)=>(0,z.jsxs)("div",{className:"u-flexbox u-gap-medium",children:[(0,z.jsx)(Wy.Z,{name:e,color:ht.Z.Color.GreyscaleLevel4}),(0,z.jsx)(xt.Z,{text:t,type:xt.Z.Type.Subtitle,theme:i})]});return(0,z.jsx)(gt.Z,{title:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,theme:"transparent",prefix:(0,z.jsx)(Kl.U,{src:null==i?void 0:i.iconUrl,fallbackSrc:"",size:Kl.U.Size.Regular,alt:""}),body:(0,z.jsx)("div",{className:"u-flexbox u-align-items-center u-gap-medium",children:(0,z.jsx)(xt.Z,{text:null==i?void 0:i.name,type:xt.Z.Type.Title,testId:"drop-off-point-carrier-title"})})}),body:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(()=>{if(!t)return null;const{dropOffPointAddress:e}=t;return(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,theme:"transparent",prefix:(0,z.jsx)(Kl.U,{src:null==t?void 0:t.descriptionIconUrl,fallbackSrc:"",size:Kl.U.Size.Small,alt:""}),body:(0,z.jsx)("div",{className:"u-flexbox u-align-items-center u-gap-medium",children:(0,z.jsx)(xt.Z,{text:null==t?void 0:t.name,type:xt.Z.Type.Subtitle,testId:"drop-off-point-locker-type"})})}),a(TZ.Z,e)]})})(),(()=>{if(!t)return null;const e=(e=>{switch(e){case wZ.Open:return"success";case wZ.Closed:return"warning";default:return}})(t.openingStatus.status);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),a(zZ.Z,t.openingStatus.text,e)]})})()]}),type:n?gt.Z.Type.Navigating:void 0,onClick:r,testId:"drop-off-point-info-card",chevron:s})},NZ=e=>{let{selectedDropOffPoint:t,dropOffPointCarrier:i,isAdvancedDetailsOpen:n,toggleSelectedPointDetailsState:s}=e;const r=U("conversation.drop_off_point_modal.tablets_up.drop_off_point_details"),a=(0,p.v9)($_),o=(0,p.v9)(J_),l=(0,p.v9)(qd),c=(0,p.v9)(Gu),{track:d}=vi(),u=()=>{if(null==t||!t.code||!l)return;const e=JSON.stringify({transaction_id:l,drop_off_point_code:null==t?void 0:t.code});d(Ri({screen:$t.SellerDropOffMap,target:qm.Hyperlink,targetDetails:e}))},m=e=>{const t=e.hours.map((e=>{let{opensAt:t,closesAt:i}=e;return(0,v.compact)([t,i]).join("")}));return(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsx)("div",{className:"u-flexbox u-flex-equal-size",children:(0,z.jsx)(xt.Z,{text:e.label})}),(0,z.jsx)("div",{className:"u-flexbox u-flex-equal-size u-justify-content-flex-end u-text-right",children:(0,z.jsx)(xt.Z,{children:e.hours.length?(0,v.compact)(t).join("; "):r("selected_point_details.opening_hours_closed")})})]},e.weekday)},h=()=>{if(!t)return null;const{description:e,businessHours:n}=t;return(0,z.jsxs)(z.Fragment,{children:[e&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{theme:"muted",text:r("selected_point_details.description"),testId:"drop-off-point-details-location-description"}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:e}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]}),!!n.length&&(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column","data-testid":"drop-off-point-details-opening-hours",children:[(0,z.jsx)(xt.Z,{theme:"muted",type:xt.Z.Type.Subtitle,text:r("selected_point_details.opening_hours")}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),n.map(m)]}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,body:(0,z.jsx)("span",{onClick:u,children:(0,z.jsx)(xt.Z,{text:null==i?void 0:i.locationMapNote,html:!0})})}),(0,z.jsx)(x.Z,{})]})};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Nm,{breakpoint:"tabletsUp",children:a===Ne.Pending?null:t?(0,z.jsx)("div",{className:"drop-off-point-map-details",children:(0,z.jsx)(g.Z,{styling:g.Z.Styling.Lifted,testId:"drop-off-point-map-details",children:(0,z.jsxs)(kp,{children:[(0,z.jsx)(FZ,{dropOffPoint:t,dropOffPointCarrier:i}),(0,z.jsx)(PZ.Z,{title:r("additional_details.title"),content:h(),headerId:"drop_off_points_additional_details_accordion_header",bodyId:"drop_off_points_additional_details_accordion_body",onToggle:()=>{if(!(null!=t&&t.code&&l&&c&&o))return;const e=JSON.stringify({transaction_id:l,drop_off_point_code:null==t?void 0:t.code,shipment_status:c,drop_off_points_source:o});d(Ri({screen:$t.SellerDropOffMap,target:qm.DropOffPointDetails,targetDetails:e}))}})]})})}):null}),(0,z.jsx)(Nm,{breakpoint:"phones",children:a===Ne.Pending?null:a===Ne.Failure?(0,z.jsx)(g.Z,{styling:g.Z.Styling.Lifted,children:(0,z.jsx)(nc.Z,{children:(0,z.jsx)(xt.Z,{text:r("empty_state"),alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent})})}):t?n?(f=t)?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(FZ,{dropOffPoint:f,dropOffPointCarrier:i,onClick:s}),(0,z.jsx)("div",{className:"u-background-gray",children:(0,z.jsx)(x.Z,{size:x.Z.Size.Large})}),n&&(0,z.jsx)("div",{className:"u-flexbox u-flex-direction-column",children:(0,z.jsx)(nc.Z,{children:h()})})]}):null:(0,z.jsx)("div",{className:"drop-off-point-map-details",children:(0,z.jsx)(g.Z,{styling:g.Z.Styling.Lifted,testId:"drop-off-point-map-details",children:(0,z.jsx)(FZ,{dropOffPoint:t,dropOffPointCarrier:i,onClick:s,navigating:!0,chevron:!0})})}):null})]});var f},LZ=e=>{let{isOpen:t,onClose:i}=e;const n=(0,p.I0)(),s=U("conversation.drop_off_point_modal"),r=E(),{track:a}=vi(),o=(0,p.v9)(Nb),l=(0,p.v9)(qy),c=(0,p.v9)(ee),d=(0,p.v9)(Vy),u=(0,p.v9)(W_),g=(0,p.v9)(Y_),f=(0,p.v9)(K_),y=(0,p.v9)($_),v=(0,p.v9)(qd),_=(0,p.v9)(Gu),b=(0,p.v9)(X_),[j,S]=(0,m.useState)(""),[Z,I]=(0,m.useState)(null),[C,k]=(0,m.useState)(!1),w=Yb(),P=(0,m.useCallback)((async()=>{if(!t||!d)return;const e=await qb(d);if(null==e||!e.formatted_address||null==e||!e.geometry)return;const i={latitude:e.geometry.location.lat(),longitude:e.geometry.location.lng()};S(e.formatted_address),I(i)}),[d,t]);(0,m.useEffect)((()=>{w&&P()}),[w,P]),(0,m.useEffect)((()=>{t&&n(Cb())}),[n,t]);const T=()=>{const e=Ri({screen:$t.SellerDropOffMap,target:qm.AddressSearchBar,targetDetails:JSON.stringify({transaction_id:v,shipment_status:_})});a(e)},F=(e,t)=>{t&&S(t)},N=e=>{let{geometry:t}=e;if(null==t||!t.location)return;const i={latitude:t.location.lat(),longitude:t.location.lng()};n(V_.fetchNearbyDropOffPointsRequest({coordinates:i,dropOffPointSource:U_.SearchBarAddress})),I(Z)},L=()=>{k((e=>!e))},O=()=>{r.phones||n(V_.setSelectedDropOffPoint({selectedDropOffPoint:null}))},R=()=>u&&w&&g?(0,z.jsx)(NZ,{selectedDropOffPoint:g,dropOffPointCarrier:f,isAdvancedDetailsOpen:C,toggleSelectedPointDetailsState:L}):null,D=(e,t,i)=>w?(0,z.jsx)(Jb,{type:Kb.InputBar,name:e,placeholder:t,initialValue:j,country:(null==l?void 0:l.countryIsoCode)||c,isLoading:y===Ne.Pending,onValueChange:F,suggestionsListMaxHeight:i,screen:$t.SellerDropOffMap,onPlaceDetailsChange:N}):null,A=()=>u&&w?(0,z.jsx)(kZ,{googleApiKey:o,onMapClick:O,addressCoordinates:Z}):null,M=()=>(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{text:s("tablets_up.empty_state.body"),type:xt.Z.Type.Title,alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent})}),B=r.wide?{width:"1240px",height:"calc(100% - 80px)"}:{width:"100%",height:"100%"};return(0,z.jsx)(cp.Z,{isFramed:!1,show:t,contentDimensions:B,children:(0,z.jsxs)("div",{className:"drop-off-point-map-modal","data-testid":"drop-off-point-map-modal",children:[(0,z.jsx)(Pm.Z,{left:C&&(0,z.jsx)(Nm,{breakpoint:"phones",children:(0,z.jsx)(ic.I,{deprecatedIconName:"arrow-left",styling:ic.I.Styling.Flat,onClick:L,inline:!0})}),body:(0,z.jsx)(xt.Z,{text:s("navigation.body"),type:xt.Z.Type.Title}),right:(0,z.jsx)(ic.I,{deprecatedIconName:"x",styling:ic.I.Styling.Flat,onClick:i,inline:!0,testId:"drop-off-point-modal-close-button"})}),(0,z.jsxs)(Nm,{breakpoint:"tabletsUp",children:[(0,z.jsx)(h.Z,{}),null!=b&&b.length||l?(0,z.jsxs)(z.Fragment,{children:[w&&(0,z.jsx)("div",{className:"u-ui-padding-regular",onClick:T,"data-testid":"search-bar-tablets-up",children:D("drop-off-places-autocomplete-tablets-up",s("autocomplete.placeholder"))}),A(),R()]}):(0,z.jsxs)(z.Fragment,{children:[w&&(0,z.jsx)("div",{className:"u-ui-padding-regular",onClick:T,"data-testid":"search-bar-tablets-up",children:D("drop-off-places-autocomplete-tablets-up",s("autocomplete.placeholder"))}),A(),M()]})]}),(0,z.jsx)(Nm,{breakpoint:"phones",children:null!=b&&b.length?C?R():(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"u-ui-padding-regular",onClick:T,"data-testid":"search-bar-phones",children:D("drop-off-places-autocomplete-phones",s("autocomplete.placeholder"))}),(0,z.jsx)(h.Z,{}),(0,z.jsx)("div",{className:"drop-off-point-map-modal__content",children:(0,z.jsxs)("div",{className:"pickup-point-modal__map-container",children:[A(),R()]})})]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(x.Z,{size:x.Z.Size.Regular}),(0,z.jsxs)("div",{className:"drop-off-point-map-modal--phones__container",children:[(0,z.jsx)("div",{className:"u-text-left",children:D("drop-off-places-autocomplete-phones",s("autocomplete.placeholder"),200)}),(0,z.jsx)(x.Z,{size:x.Z.Size.Regular}),A(),(0,z.jsx)("div",{className:"u-flexbox",children:M()})]})]})})]})})},EZ=function(e){const t=(0,m.useRef)();return(0,m.useEffect)((()=>{t.current=e}),[e]),t.current},OZ=e=>{let{isOpen:t,onClose:i,onSuccess:n}=e;const{track:s}=vi(),r=U("conversation.get_shipping_label.select_drop_off_method.modal"),a=U("conversation.get_shipping_label.select_packaging_type.modal"),o=(0,p.I0)(),l=(0,p.v9)(vu),c=(0,p.v9)(_u),d=(0,p.v9)(Zu),u=(0,p.v9)(Su),g=(0,p.v9)(qd),x=(0,p.v9)(oy),f=(0,p.v9)(ku),y=(0,p.v9)(wu),v=EZ(f);(0,m.useEffect)((()=>{g&&o(tg({transactionId:g}))}),[o,g]),(0,m.useEffect)((()=>{t&&v===Ne.Pending&&f===Ne.Success&&n()}),[t,v,f,n]);return(0,z.jsx)(cp.Z,{show:t,children:(0,z.jsxs)("div",{className:"drop-off-selection-flow__body",children:[(0,z.jsx)(Pm.Z,{body:r("title"),left:x?(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,deprecatedIconName:"arrow-left",inline:!0,onClick:function(){o(Dm.clearDropOffTypeSelection()),o(Dm.setActiveGenerateLabelModal({modal:td.ReturnTheOrder}))},testId:"selection-modal-previous"}):null,right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,onClick:function(){o(Dm.deleteDropOffTypeSelectionError()),o(Dm.clearDropOffTypeSelection()),i()},deprecatedIconName:"x",testId:"close-selection-modal",inline:!0})}),(0,z.jsx)(h.Z,{}),l?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{prefix:(0,z.jsx)(Kl.U,{src:l.iconUrl,size:Kl.U.Size.Large,styling:Kl.U.Styling.Rounded}),title:l.name,body:r("carrier_body")}),(0,z.jsx)(h.Z,{})]}):null,(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:function(){if(!c)return null;const e=c.map((e=>{let{key:t}=e;return t})).includes(sb.ReusablePackage);return e?a("body"):r("body")}()})}),(0,z.jsx)(kp,{children:null==c?void 0:c.map((function(e){return(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,prefix:(0,z.jsx)(Kl.U,{src:e.dropOffTypeMeta.iconUrl,size:Kl.U.Size.Regular,styling:Kl.U.Styling.Rounded}),title:e.title,body:(0,z.jsx)(xt.Z,{html:!0,text:e.subtitle}),onClick:(t=e.id,()=>{o(Dm.setSelectedDropOffTypeId({dropOffTypeId:t}))}),suffix:(0,z.jsx)(qx.J,{name:"".concat(e.id,"-radio"),checked:e.id===u,value:e.id,testId:"drop-off-type-selection-modal-".concat(e.id,"-radio")})},e.id);var t}))}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,theme:"warning",text:y})})]}),(0,z.jsxs)("div",{className:"drop-off-selection-flow__button",children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,text:r("actions.continue"),disabled:!d,onClick:function(){!function(){const e={transaction_id:g,dropoff_type_id:u};s(Ri({target:qm.SelectDropoffType,screen:$t.DropoffTypeSelection,targetDetails:JSON.stringify(e)}))}(),g&&u&&o(Dm.setSelectedDropOffTypeMethodRequest({transactionId:g,dropOffTypeId:u}))},isLoading:f===Ne.Pending,testId:"drop-off-type-selection-modal-submit"})})]})]})})},RZ=e=>{let{isOpen:t,onGoBack:i,onSuccess:n}=e;const s=(0,p.v9)(bu);return s?(0,z.jsx)(cp.Z,{show:t,title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:s.dropOffTypeMeta.confirmTitle,width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center}),body:(0,z.jsx)(xt.Z,{html:!0,text:s.dropOffTypeMeta.confirmMessage}),actions:[{text:s.dropOffTypeMeta.confirmSelectionTitle,style:cp.Z.ActionStyling.Filled,callback:n,testId:"drop-off-type-confirmation-modal-confirm-button"},{text:s.dropOffTypeMeta.cancelSelectionTitle,style:cp.Z.ActionStyling.Flat,callback:i,testId:"drop-off-type-confirmation-modal-cancel-button"}]}):null},DZ={requestState:Ne.Idle},AZ=(0,ad.oM)({name:js,initialState:DZ,reducers:{fetchSystemConfigurationRequest:e=>{e.requestState=Ne.Pending},fetchSystemConfigurationSuccess:(e,t)=>{e.systemConfiguration=t.payload.systemConfiguration,e.requestState=Ne.Success},fetchSystemConfigurationFailure:e=>{e.requestState=Ne.Failure}}}),{actions:MZ}=AZ,UZ={[js]:AZ.reducer};AZ.reducer;var BZ=i(72761);const qZ=e=>{let{transactionId:t,validations:i,value:n,persist:s,isCompleted:r,type:a,onBlur:o,onPersist:l}=e;const c=(0,p.I0)(),{track:d}=vi(),u=U("shipping_contact.".concat(a,".form.phone_number")),m=a===yd.Buyer?_d.BuyerPhoneNumber:_d.SellerPhoneNumber,g=(0,p.v9)((e=>Td(e,m))),h=(e,i)=>{t&&(a!==yd.Buyer?d((e=>{const{transactionId:t,targetDetails:i,screen:n,target:s,valid:r}=e,a={screen:n,target:s,valid:r};return t&&(a.transaction_id=t),i&&(a.target_details=i),{event:"transaction.seller_input",extra:a}})({screen:$t.SellerContactDetails,target:qm.SavePhoneNumber,valid:e,transactionId:t,targetDetails:i})):d($i({screen:$t.ContactDetails,target:"phone_number",transactionId:t,valid:e,targetDetails:i})))};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gh,{name:m,title:u("title"),placeholder:u("placeholder"),value:n,onBlur:e=>{const t=(n=e.target.value,null==i?void 0:i.find((e=>{let{regex:t}=e;return!new RegExp(t).test(n)})));var n;t?(e=>{const{trackingTarget:t,message:i}=e;h(!1,t),c(Ay.setShippingContactError({error:{field:m,value:i}}))})(t):(e=>{h(!0),o(e),g&&c(Ay.removeShippingContactError({error:g}))})(e.target.value)},validation:g&&(0,z.jsx)(xt.Z,{text:g.value,type:xt.Z.Type.Caption,theme:"warning"})}),(0,z.jsx)(gt.Z,{prefix:(0,z.jsx)(BZ.F,{name:"".concat(m,"_persist"),onClick:l,checked:s}),body:u(r?"save_for_later.update":"save_for_later.add")})]})},VZ=e=>{let{isOpen:t,type:i,transactionId:n,onClose:s}=e;const r=(0,p.I0)(),{track:a}=vi(),o=U("shipping_contact.".concat(i,".form")),l=(0,p.v9)(Zd),c=(0,p.v9)(Id),d=(0,p.v9)(Cd),u=(0,p.v9)(ks),g=(0,p.v9)(kd),f=(0,p.v9)(wd),y=(0,p.v9)(Pd),v=(0,p.v9)(zd),[_,b]=(0,m.useState)(!1),[j,S]=(0,m.useState)(!1),[Z,I]=(0,m.useState)((i===yd.Buyer?f:y)||u),C=EZ(l),k=EZ(c),w=i===yd.Buyer?!!f:!!y;(0,m.useEffect)((()=>{n&&t&&(i!==yd.Buyer?a(Ri({screen:$t.GetShippingLabel,target:qm.SellerAddContactDetails,targetDetails:JSON.stringify({transactionId:n})})):a(nn({transactionId:n,screen:$t.ContactDetails})))}),[t,n,a,i]),(0,m.useEffect)((()=>{k===Ne.Pending&&c===Ne.Success&&(_&&b(!1),s())}),[k,c,s,_]),(0,m.useEffect)((()=>{C===Ne.Pending&&l===Ne.Success&&s()}),[C,l,s]),(0,m.useEffect)((()=>{r(Ay.fetchShippingContactConfigurationRequest()),r(MZ.fetchSystemConfigurationRequest())}),[r]),(0,m.useEffect)((()=>{f||y||I(u)}),[f,u,y]);const P=()=>i===yd.Buyer?$t.ContactDetails:$t.SellerContactDetails,T=e=>{a(Ri({screen:P(),target:e}))};return(0,z.jsxs)(cp.Z,{show:t,hasScrollableContent:!0,testId:"shipping-contact-modal",children:[(0,z.jsxs)("div",{className:"u-fill-width",children:[(0,z.jsx)(Pm.Z,{body:o("title"),right:(0,z.jsx)(ic.I,{deprecatedIconName:"x",styling:ic.I.Styling.Flat,testId:"shipping-contact-modal-close",onClick:s})}),(0,z.jsx)(h.Z,{}),(0,z.jsxs)(Lg,{children:[(0,z.jsx)(nc.Z,{children:(0,z.jsx)(Lt.Z,{styling:Lt.Z.Styling.Default,children:(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),children:[(0,z.jsx)("div",{className:"u-flexbox",children:(0,z.jsx)(Kl.U,{src:"/assets/checkout/shipping_contact_notification_box.svg",size:Kl.U.Size.X2Large})}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent,text:o("information.title")}),(0,z.jsx)(xt.Z,{alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent,text:o("information.message")})]})})}),d===Ne.Pending?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Mp,{styling:Mp.Styling.Wide,size:Mp.Size.Large}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(qZ,{transactionId:n,validations:null==g||null===(F=g.phoneNumber)||void 0===F?void 0:F.validations,value:null!=Z?Z:null,persist:j,isCompleted:w,type:i,onBlur:e=>{I(e)},onPersist:()=>{S((e=>!e))}}),(0,z.jsx)(nc.Z,{children:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(ic.I,{text:o("actions.continue"),styling:ic.I.Styling.Filled,disabled:l===Ne.Pending,isLoading:l===Ne.Pending,onClick:()=>{a(Ri({screen:P(),target:qm.ContactDetailsContinue,targetDetails:JSON.stringify({remember_phone_number:j,transaction_id:n})})),v.length||r(Ay.saveTransactionShippingContactRequest({transactionId:n,buyerPhoneNumber:i===yd.Buyer&&null!=Z?Z:null,sellerPhoneNumber:i===yd.Seller&&null!=Z?Z:null,saveForLater:j}))},testId:"shipping-contact-continue-button"}),w&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(ic.I,{text:o("actions.delete"),theme:"warning",disabled:l===Ne.Pending,onClick:()=>{b(!0),T(qm.ContactDetailsDelete)},testId:"shipping-contact-delete-button"})]})]})})]})]})]}),_?(0,z.jsx)(cp.Z,{show:_,className:"checkout__shipping-contact__delete-modal",children:(0,z.jsx)(nc.Z,{children:(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),children:[(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center",children:(0,z.jsx)(xt.Z,{text:o("delete_confirmation.title"),type:xt.Z.Type.Heading})}),(0,z.jsx)(xt.Z,{text:o("delete_confirmation.message")}),(0,z.jsx)(ic.I,{text:o("delete_confirmation.actions.delete"),styling:ic.I.Styling.Filled,theme:"warning",disabled:c===Ne.Pending,isLoading:c===Ne.Pending,onClick:()=>{r(Ay.deleteTransactionShippingContactRequest({transactionId:n})),I(u),T(qm.ContactDetailsDeleteConfirm)},testId:"shipping-contact-delete-confirm-button"}),(0,z.jsx)(ic.I,{text:o("delete_confirmation.actions.cancel"),styling:ic.I.Styling.Flat,disabled:c===Ne.Pending,onClick:()=>{b(!1)}})]})})}):null]});var F},HZ=e=>{let{isOpen:t}=e;const i=U("conversation.get_shipping_label.select_label_type.modal"),n=(0,p.I0)(),{track:s}=vi(),r=(0,p.v9)(vu),a=(0,p.v9)(em),o=(0,p.v9)(nm),l=(0,p.v9)(im),c=(0,p.v9)(qd);function d(){switch(l){case nd.LabelTypePdf:return"printable";case nd.LabelTypeQr:return"digital";default:return null}}(0,m.useEffect)((()=>{c&&n(tg({transactionId:c}))}),[n,c]),(0,m.useEffect)((()=>{if(!t||!c)return;const e=JSON.stringify({transaction_id:c});s(Gi({screen:$t.LabelTypeSelection,target:cb.LabelTypeSelection,targetDetails:e}))}),[s,c,t]);return(0,z.jsx)(cp.Z,{show:t,children:(0,z.jsxs)("div",{className:"label-type-selection-modal__body",children:[(0,z.jsx)(Pm.Z,{body:i("title"),right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,onClick:function(){n(Dm.clearDigitalLabelTypeSelection()),n(Dm.setActiveGenerateLabelModal({modal:td.None}))},deprecatedIconName:"x",testId:"close-selection-modal",inline:!0})}),(0,z.jsx)(h.Z,{}),r?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{prefix:(0,z.jsx)(Kl.U,{src:r.iconUrl,size:Kl.U.Size.Large,styling:Kl.U.Styling.Rounded}),title:r.name,body:i("carrier_body")}),(0,z.jsx)(h.Z,{})]}):null,(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:i("body")})}),(0,z.jsx)(kp,{children:null==a?void 0:a.map((function(e){const{type:t,iconUrl:i,title:s,subtitle:r}=e;return(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,prefix:(0,z.jsx)(Kl.U,{src:i,size:Kl.U.Size.Regular,styling:Kl.U.Styling.Rounded}),title:s,body:(0,z.jsx)(xt.Z,{html:!0,text:r}),onClick:(a=t,()=>{n(Dm.setSelectedLabelType({labelType:a}))}),suffix:(0,z.jsx)(qx.J,{name:"".concat(s,"-radio"),checked:t===l,value:t,testId:"label-type-type-selection-modal-".concat(t,"-radio")})},t);var a}))}),(0,z.jsx)(h.Z,{})]}),(0,z.jsxs)("div",{className:"u-margin-top-auto",children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,text:i("action.continue"),disabled:!o,onClick:function(){!function(){if(!c)return;const e=JSON.stringify({transaction_id:c,label_type:d()});s(Ri({screen:$t.LabelTypeSelection,target:qm.SelectLabelType,targetDetails:e}))}(),n(Dm.setActiveGenerateLabelModal({modal:td.GetShippingLabelModal}))},testId:"label-type-type-selection-modal-submit-button"})})]})]})})},GZ=e=>{let{isOpen:t,onClose:i,discount:n,lowestPriceIn30Days:s}=e;const r=(0,p.v9)(Nc),a=U("checkout.shipping.delivery_details.discounts"),{formatDate:o}=(0,O.Z)();return(0,z.jsx)(cp.Z,{show:t,testId:"discount-modal",closeOnOverlay:!0,defaultCallback:i,children:(0,z.jsxs)("div",{className:"u-fill-width",children:[(0,z.jsx)(Pm.Z,{right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,theme:"amplified",deprecatedIconName:"x",inline:!0,onClick:i,testId:"shipping-discount-modal-close-x-button"}),body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,text:a("modal_header")})}),(0,z.jsx)(gt.Z,{title:(0,z.jsx)(xt.Z,{text:a("promotion_period_header"),type:xt.Z.Type.Title}),body:(0,z.jsx)(xt.Z,{text:(()=>{if(!n)return"";if(!n.validFrom||!n.validTo)return null!=n&&n.note?n.note:"";const e=o(n.validFrom*jt.L7,{month:"short",day:"numeric"}),t=o(n.validTo*jt.L7,{month:"short",day:"numeric"});return"".concat(e," - ").concat(t)})()}),testId:"promotion-period"}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{title:(0,z.jsx)(xt.Z,{text:a("lowest_price_in_30_days_header"),type:xt.Z.Type.Title}),body:(0,z.jsx)(xt.Z,{text:s?Ua(s,r):""}),testId:"lowest-price-in-30-days"}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(ic.I,{text:a("action.close"),styling:ic.I.Styling.Filled,onClick:i,testId:"shipping-discount-modal-close-action"})})]})})},WZ="activate-balance",XZ=e=>e[WZ],YZ=e=>XZ(e).form,KZ=e=>XZ(e).address,JZ=e=>XZ(e).canChange,QZ=e=>XZ(e).status,$Z=e=>XZ(e).isSsnNumberRequired,eI=e=>XZ(e).isPersonalIdNumberRequired,tI=e=>XZ(e).isNationalityRequired,iI=e=>XZ(e).isBalanceActivated,nI=e=>XZ(e).agreementHint,sI=e=>XZ(e).form.firstName,rI=e=>XZ(e).form.lastName,aI={form:{firstName:"",lastName:"",birthdate:"",ssn:"",personalIdNumber:"",nationality:null},address:null,canChange:!0,status:Ne.Idle,isSsnNumberRequired:!1,isPersonalIdNumberRequired:!1,isBalanceActivated:!1,isNationalityRequired:!1,agreementHint:""},oI=(0,ad.oM)({name:WZ,initialState:aI,reducers:{getDefaultFormValuesRequest:e=>{e.status=Ne.Pending},getDefaultFormValuesSuccess:(e,t)=>{const{form:i}=t.payload;e.form=i},setAddress:(e,t)=>{const{address:i}=t.payload;e.address=i},setCanChange:(e,t)=>{const{canChange:i}=t.payload;e.canChange=i},setIsSsnNumberRequired:(e,t)=>{const{status:i}=t.payload;e.isSsnNumberRequired=i},setIsPersonalIdNumberRequired:(e,t)=>{const{status:i}=t.payload;e.isPersonalIdNumberRequired=i},setIsBalanceActivated:(e,t)=>{const{status:i}=t.payload;e.isBalanceActivated=i},setIsNationalityRequired:(e,t)=>{const{status:i}=t.payload;e.isNationalityRequired=i},setAgreementHint:(e,t)=>{const{status:i}=t.payload;e.agreementHint=i},setStatus:(e,t)=>{const{status:i}=t.payload;e.status=i},prefillAddress:(e,t)=>{const{fullName:i}=t.payload;e.address={name:i,entryType:Xg.s1.Billing,countryId:null,city:null,line1:null,line2:null,postalCode:null,state:null}}}}),{actions:lI}=oI,cI={[WZ]:oI.reducer},dI=(oI.reducer,e=>{let{name:t,validation:i,title:n,disabled:s,styling:r,theme:a,value:o,onChange:l=v.noop,onBlur:c=v.noop,onFocus:d=v.noop}=e;const[u,p]=(0,m.useState)({}),g=(0,O.Z)(),h=U("birthdate");function x(e){return function(t){const i={...u,[e]:t.target.value},n=(e=>{const t=Number(e.year),i=Number(e.month),n=Number(e.day),s=new Date(t,i,n);if(!Number.isNaN(s.getTime()))return s.getFullYear()!==t||s.getMonth()!==i||s.getDate()!==n?void 0:s})(i);var s;l(n?[(s=n).getFullYear(),"0".concat(s.getMonth()+1).slice(-2),"0".concat(s.getDate()).slice(-2)].join("-"):null),p(i)}}(0,m.useEffect)((()=>{if(!o)return;const e=new Date(o);(e=>!Number.isNaN(e.getTime()))(e)&&p({year:e.getFullYear().toString(),month:e.getMonth().toString(),day:e.getDate().toString()})}),[o]);const f=(0,m.useMemo)((()=>Array.from(Array(12).keys()).map((e=>({value:e.toString(),label:g.formatDate(Date.UTC(2e3,e,1,0,0,0),{month:"long"})})))),[g]),_=y()("c-input",{["c-input--".concat(String(r))]:void 0!==r},{["c-input--".concat(String(a))]:void 0!==a});return(0,m.useMemo)((()=>{const e=(0,ls.ij)();return(()=>{if(St.X)return!1;const e=document.createElement("input");return e.setAttribute("type","date"),e.setAttribute("value","2000-01-01"),!!e.valueAsDate})()&&(as(e)||os(e))}),[])?(0,z.jsx)(gh,{name:"birthdate",type:"date",theme:a,title:n,styling:r,disabled:s,value:o,validation:i,onChange:function(e){const{value:t}=e.target;if(l(t),t){const e=new Date(t);p({year:e.getFullYear().toString(),month:e.getMonth().toString(),day:e.getDay.toString()})}else p({year:void 0,month:void 0,day:void 0})},onBlur:function(e){c(e)},onFocus:function(e){d(e)}}):(0,z.jsxs)("label",{htmlFor:t,className:_,children:[n&&(0,z.jsx)("div",{className:"c-input__title",children:n}),(0,z.jsxs)("div",{className:"c-input__content input-birthdate__content",children:[(0,z.jsx)(gh,{placeholder:h("day"),name:"day",type:"number",theme:a,styling:"tight",disabled:s,value:u.day,onChange:x("day"),onBlur:function(e){c(e)},onFocus:function(e){d(e)},testId:"day-input"}),(0,z.jsx)(yb.R,{name:"month",styling:yb.R.Styling.Tight,theme:a,required:!0,disabled:s,placeholder:h("month"),value:u.month,onChange:x("month"),options:f}),(0,z.jsx)(gh,{name:"year",type:"number",styling:"tight",theme:a,disabled:s,placeholder:h("year"),value:u.year,onChange:x("year"),onBlur:function(e){c(e)},onFocus:function(e){d(e)},testId:"year-input"})]}),i&&(0,z.jsx)("div",{className:"c-input__note",children:i})]})});var uI=i(93953);function mI(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class pI extends m.Component{constructor(){var e;super(...arguments),e=this,mI(this,"nodeRef",(0,m.createRef)()),mI(this,"inputRef",(0,m.createRef)()),mI(this,"state",{inputValue:this.formatValue(this.props.value),isOpen:!1,isSaveEnabled:!1}),mI(this,"testIdAttribute",(e=>{const{testId:t}=this.props;if(t)return"".concat(t,"-").concat(e)})),mI(this,"handleEscKey",(e=>{var t;const{breakpoints:i}=this.props,{isOpen:n}=this.state;n&&e.key===Lm.Escape&&!i.phones&&(this.closeDropdown(),null===(t=this.inputRef.current)||void 0===t||t.focus())})),mI(this,"handleKeyDown",(e=>{!this.props.readOnly&&e.key===Lm.Spacebar||Vg(e,this.toggleDropdown)})),mI(this,"setIsSaveEnabled",(function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e.setState({isSaveEnabled:t})})),mI(this,"setInputValue",(e=>{this.setState({inputValue:this.formatValue(e)})})),mI(this,"handleGlobalClick",(e=>{const{breakpoints:t,closeOnGlobalClick:i,onClose:n}=this.props;if(t.phones||!i)return;const s=this.nodeRef.current;null!=s&&s.contains(e.target)||this.hideDropdown(n)})),mI(this,"hideDropdown",(e=>{this.props.breakpoints.phones||(document.removeEventListener("mousedown",this.handleGlobalClick),document.removeEventListener("keydown",this.handleEscKey)),this.setState({isOpen:!1,isSaveEnabled:!1,inputValue:this.formatValue(this.props.value)},e)})),mI(this,"showDropdown",(()=>{const{onOpen:e,breakpoints:t,isLoading:i}=this.props,{isOpen:n}=this.state,{phones:s}=t;n||i||(s||(document.addEventListener("mousedown",this.handleGlobalClick),document.addEventListener("keydown",this.handleEscKey)),this.setState((e=>({isOpen:!0,inputValue:s?null:e.inputValue})),e))})),mI(this,"closeDropdown",(()=>{this.hideDropdown(this.props.onClose)})),mI(this,"toggleDropdown",(()=>this.state.isOpen?this.closeDropdown():this.showDropdown())),mI(this,"onModalInputClear",(()=>{this.setInputValue(null),this.props.onClear&&this.props.onClear()})),mI(this,"onModalInputChange",(e=>{this.onInputChange(e)})),mI(this,"onInputChange",(e=>{const{onChange:t}=this.props;this.setInputValue(e.target.value),t&&t(e)})),mI(this,"renderDropdown",(()=>{const{isDirectionUp:e}=this.props;if(!this.state.isOpen)return null;const t=y()("input-dropdown",{"input-dropdown--direction-up":e});return(0,z.jsx)("div",{className:t,"data-testid":this.testIdAttribute("content"),children:(0,z.jsx)(g.Z,{styling:g.Z.Styling.Elevated,children:this.renderWrappedContent()})})})),mI(this,"closeModal",(()=>{this.setState({isOpen:!1,isSaveEnabled:!1,inputValue:this.formatValue(this.props.value)}),this.props.onCancel&&this.props.onCancel()})),mI(this,"submitModal",(()=>{this.setState({isOpen:!1,isSaveEnabled:!1}),this.props.onSave&&this.props.onSave(this.state.inputValue)})),mI(this,"renderContent",(()=>this.props.render({...this.state,setIsSaveEnabled:this.setIsSaveEnabled,closeDropdown:this.closeDropdown}))),mI(this,"renderWrappedContent",(()=>this.props.isScrollable?(0,z.jsx)("div",{className:"input-dropdown__content input-dropdown__content--scrollable",children:(0,z.jsx)("div",{children:this.renderContent()})}):(0,z.jsx)("div",{className:"input-dropdown__content",children:this.renderContent()}))),mI(this,"renderModalInput",(()=>this.props.readOnly?null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{children:(0,z.jsx)(Tm.N,{name:"".concat(this.props.name,"-input-modal"),placeholder:this.props.placeholder||"",deprecatedIconName:"search",disabled:this.props.disabled,value:null===this.state.inputValue?"":this.state.inputValue,onChange:this.onModalInputChange,onValueClear:this.onModalInputClear,testId:"".concat(this.props.name,"-input-modal")})}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(x.Z,{size:x.Z.Size.XSmall})]}))),mI(this,"renderModal",(()=>{const{title:e,isSaveButtonShown:t}=this.props,{isOpen:i,isSaveEnabled:n}=this.state;return(0,z.jsxs)(cp.Z,{show:i,children:[(0,z.jsx)(Pm.Z,{body:e,right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,onClick:this.closeModal,deprecatedIconName:"x"})}),this.renderModalInput(),this.renderWrappedContent(),t&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(ic.I,{text:(0,z.jsx)(wx,{id:"actions.save"}),onClick:this.submitModal,styling:ic.I.Styling.Filled,disabled:!n,size:ic.I.Size.Medium,testId:"input-dropdown-save-button"})})]})]})})),mI(this,"renderPropsHandler",(()=>{const{breakpoints:{phones:e},isPopupVisible:t}=this.props;return t?e?this.renderModal():this.renderDropdown():null})),mI(this,"buttonize",(()=>({role:"button",onClick:this.toggleDropdown}))),mI(this,"renderDropdownState",(()=>{const{disabled:e}=this.props;return e?null:(0,z.jsx)("div",{className:"c-input__icon",...this.buttonize(),children:(0,z.jsx)(ht.Z,{name:this.state.isOpen?"chevron-up":"chevron-down",size:ht.Z.Size.Small,color:uI.S.GreyscaleLevel4})})})),mI(this,"renderLoader",(()=>(0,z.jsx)("div",{className:"c-input__icon",children:(0,z.jsx)(Dp.Z,{})})))}componentDidUpdate(e){const{value:t}=this.props;t!==e.value&&this.setInputValue(t)}componentWillUnmount(){document.removeEventListener("mousedown",this.handleGlobalClick),document.removeEventListener("keydown",this.handleEscKey)}formatValue(e){return e||""}render(){const{name:e,validation:t,title:i,readOnly:n,disabled:s,placeholder:r,styling:a,theme:o,breakpoints:l,isLoading:c,required:d}=this.props,u=y()("c-input",{["c-input--".concat(String(a))]:void 0!==a},{["c-input--".concat(String(o))]:void 0!==o}),m=y()("c-input__value","c-input__value--with-suffix",{"u-cursor-pointer":n});return(0,z.jsxs)("div",{className:u,children:[i&&(0,z.jsx)("label",{htmlFor:e,className:"c-input__title",children:i}),(0,z.jsxs)("div",{className:"c-input__content",ref:this.nodeRef,children:[(0,z.jsx)("input",{ref:this.inputRef,"data-testid":this.testIdAttribute("input"),autoComplete:"off",className:m,name:e,id:dh(e),value:null===this.state.inputValue?"":this.state.inputValue,readOnly:n||l.phones,disabled:s,required:d,placeholder:r,onChange:this.onInputChange,onClick:this.showDropdown,onKeyDown:this.handleKeyDown}),this.renderPropsHandler(),c?this.renderLoader():this.renderDropdownState()]}),t&&(0,z.jsx)("div",{className:"c-input__note",children:t})]})}}mI(pI,"defaultProps",{styling:"wide",readOnly:!1,disabled:!1,isScrollable:!0,isLoading:!1,isSaveButtonShown:!0,isPopupVisible:!0,closeOnGlobalClick:!0,onOpen:v.noop});const gI=F(pI),hI=e=>{let{title:t,placeholder:i,name:n,validation:s,showSuggestedCountries:r,disabled:a,value:o,styling:l,onChange:c}=e;const d=U("nationality_select"),u=E(),[p,g]=(0,m.useState)(Ne.Idle),[x,f]=(0,m.useState)([]),[y,v]=(0,m.useState)([]),[_,b]=(0,m.useState)(null),[j,S]=(0,m.useState)(o||null);(0,m.useEffect)((()=>{o&&S(o)}),[o,S]),(0,m.useEffect)((()=>{(async()=>{g(Ne.Pending);const e=await(0,Fe.cl3)();if("errors"in e)return void g(Ne.Failure);const t=e.countries.map((e=>({code:e.code,title:e.title}))),i=e.suggested_countries.map((e=>({code:e.code,title:e.title})));f(t),v(i),g(Ne.Success)})()}),[]);const Z=()=>{b(null)},I=(e,t)=>()=>{if(t.setIsSaveEnabled(!0),u.phones)return S(e),void c(e);S(e),c(e),t.closeDropdown()},C=(e,t,i)=>(0,z.jsx)(gt.Z,{title:t.title,suffix:(0,z.jsx)(qx.J,{name:"".concat(e,"-radio"),checked:t.code===(null==j?void 0:j.code),value:t.code}),onClick:I(t,i)},t.code),k=e=>!r||_||0===y.length?null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{type:yt.Z.Type.Leading,text:d("suggested_countries.title")}),(0,z.jsx)(kp,{children:y.map((t=>C("suggested-country-".concat(t.code),t,e)))}),(0,z.jsx)(h.Z,{})]}),w=e=>{const t=_?x.filter((e=>e.title.toLowerCase().includes(_.toLowerCase()))):x;return(0,z.jsxs)(z.Fragment,{children:[r&&!_&&(0,z.jsx)(yt.Z,{type:yt.Z.Type.Leading,text:d("other_countries.title")}),(0,z.jsx)(kp,{children:t.map((t=>C("country-".concat(t.code),t,e)))})]})};return p!==Ne.Success?(0,z.jsx)(Mp,{styling:Mp.Styling.Wide}):(0,z.jsx)(gI,{name:n,styling:l,title:t,placeholder:i,value:null==j?void 0:j.title,render:e=>(0,z.jsxs)(z.Fragment,{children:[k(e),w(e)]}),disabled:a,onChange:e=>{b(e.currentTarget.value)},onCancel:Z,onClose:Z,onSave:()=>{S(j),c(j),Z()},validation:s})},xI=e=>e>(e=>{const t=new Date;return new Date(t.getFullYear()-e,t.getMonth(),t.getDate())})(18),fI=e=>{if(!e)return;const t=new Date(e);return!xI(t)};let yI;!function(e){e.FullName="fullName",e.FirstName="firstName",e.LastName="lastName",e.Birthdate="birthdate",e.SsnNumber="ssn",e.PersonalIdNumber="personalIdNumber",e.Nationality="nationality",e.Address="address"}(yI||(yI={}));const vI=e=>{let{isLoading:t,canChange:i,wide:n,showTitle:s,isSsnNumberRequired:r,isPersonalIdNumberRequired:a,isNationalityRequired:o,isBalanceActivated:l}=e;const c=U("wallet.activation.general"),{register:d,control:u,watch:p,formState:{errors:g}}=(0,th.Gc)(),h=fh(g,"wallet.activation.general.fields"),f=p(yI.Nationality);(0,m.useEffect)((()=>{o&&d(yI.Nationality,{required:!0})}),[d,o]);const y=n?fb.M.Styling.Wide:fb.M.Styling.Narrow,_=t||!i;function b(e){return t=>{e(t)}}return(0,z.jsxs)(z.Fragment,{children:[s?(0,z.jsx)(yt.Z,{styling:yt.Z.Styling.Wide,type:yt.Z.Type.Leading,text:c("title")}):null,(0,z.jsx)(gt.Z,{styling:n?gt.Z.Styling.Tight:void 0,children:(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{}),children:[(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(fb.M,{...d(yI.FirstName,{required:!0}),styling:y,disabled:_,maxLength:50,title:c("fields.first_name.title"),placeholder:c("fields.first_name.placeholder"),validation:hh(h(yI.FirstName)),uncontrolled:!0}),(0,z.jsx)(fb.M,{...d(yI.LastName,{required:!0}),styling:y,disabled:_,maxLength:50,title:c("fields.last_name.title"),placeholder:c("fields.last_name.placeholder"),validation:hh(h(yI.LastName)),uncontrolled:!0})]}),(0,z.jsx)(th.Qr,{render:e=>{let{field:t}=e;const i=(0,v.omit)(t,"ref");return(0,z.jsx)(dI,{...i,styling:y,title:c("fields.birthdate.title"),disabled:_,validation:hh(h(yI.Birthdate))})},name:yI.Birthdate,control:u,rules:{required:!0,validate:fI}}),o?(0,z.jsx)(th.Qr,{control:u,name:yI.Nationality,render:e=>{let{field:{onChange:i}}=e;return(0,z.jsx)(hI,{name:yI.Nationality,styling:y,value:f,disabled:t,showSuggestedCountries:!l,title:c("fields.nationality.title"),placeholder:c("fields.nationality.placeholder"),validation:hh(h(yI.Nationality)),onChange:b(i)})}}):null,r?(0,z.jsx)(fb.M,{...d(yI.SsnNumber,{required:!0}),styling:y,title:c("fields.ssn.title"),placeholder:c("fields.ssn.placeholder"),maxLength:4,disabled:t,validation:hh(h(yI.SsnNumber))||c("fields.ssn.note"),uncontrolled:!0}):null,a?(0,z.jsx)(fb.M,{...d(yI.PersonalIdNumber,{required:!0}),styling:y,title:c("fields.personal_id_number.title"),placeholder:c("fields.personal_id_number.placeholder"),disabled:t,validation:hh(h(yI.PersonalIdNumber))||c("fields.personal_id_number.note"),uncontrolled:!0}):null]})})]})},_I=e=>{let{address:t,screenTrackingType:i,onChange:n,onCancel:s,onSubmitClick:r=v.noop}=e;const a=U("billing_address"),{track:o}=vi(),[l,c]=(0,m.useState)(Ne.Idle),[d,u]=(0,m.useState)([]);(0,m.useEffect)((()=>{o(Wi({screen:$t.BillingAddressUpdate}))}),[o]);const p=e=>{let{valid:t}=e;const n=Ri({screen:$t.BillingAddressUpdate,target:qm.SaveBillingAddress,targetDetails:JSON.stringify({valid:t,type:i})});o(n)};return(0,z.jsx)(Sb,{defaultValues:t,errors:d,isSubmitPending:l===Ne.Pending,onSubmit:async(e,t)=>{if(!t)return;r(),c(Ne.Pending),u([]);const i=await(0,Fe.y$3)({address:{...e,entryType:Xg.s1.Billing}});if("errors"in i){p({valid:!1});const{message:e,code:t}=i;let n=[];return e&&t===pm.Q.CountryChangeNotAllowed&&(n=[{field:Xg.GL.Country,value:i.message}]),c(Ne.Failure),void u([...i.errors,...n])}p({valid:!0}),c(Ne.Success),n((0,V.X)(i.user_address))},onCancel:s,translations:{name:{title:a("name.title"),placeholder:a("name.placeholder")},country:{title:a("country.title")},line1:{title:a("line1.title"),placeholder:a("line1.placeholder")},line2:{title:a("line2.title"),placeholder:a("line2.placeholder")},city:{title:a("city.title"),placeholder:a("city.placeholder")},postalCode:{title:a("postal_code.title"),placeholder:a("postal_code.placeholder")},buttons:{continue:a("buttons.continue"),cancel:a("buttons.cancel")},validation:{wrongPostalCode:a("validation.wrong_postal_code"),emptyCity:a("validation.empty_city")}}})};let bI;!function(e){e.Escrow="escrow",e.SettingsBillingAddress="settings_billing_address",e.SettingsShippingAddress="settings_shipping_address",e.SettingsBalanceActivation="settings_balance_activation"}(bI||(bI={}));const jI=e=>{let{isOpen:t,onChange:i,onCancel:n,address:s}=e;const r=U("activate_balance.edit_billing_address");return(0,z.jsxs)(cp.Z,{show:t,testId:"address-modal",children:[(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent,text:r("title")})}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(_I,{address:s,screenTrackingType:bI.SettingsBalanceActivation,onCancel:n,onChange:i})]})},SI=e=>{let{isDisabled:t,externalModal:i,onClick:n}=e;const s=U("wallet.activation.billing_address"),{register:r,control:a,watch:o,formState:{errors:l}}=(0,th.Gc)(),c=fh(l,"wallet.activation.billing_address.fields"),[d,u]=(0,m.useState)(!1),g=o(yI.Address),h=(0,p.v9)(Ze);function f(e){return t=>{e(t),u(!1)}}function y(){u(!0)}function v(){u(!1)}function _(){const e=i?n:y;return(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,type:gt.Z.Type.Navigating,suffix:(0,z.jsx)(ht.Z,{name:"plus",aria:{"aria-hidden":"true"}}),title:s("add_address"),onClick:e,disabled:t,validation:hh(c(yI.Address)),testId:"billing-address-details--add-address-button"})}function b(){const e=i?n:y;if(h){const e={"profile-link":e=>(0,z.jsx)("a",{href:Me.Svv,children:e})},t=(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,children:s("business_note",e)})]});return(0,z.jsx)(A_,{styling:gt.Z.Styling.Wide,address:g,validation:t})}return(0,z.jsx)(A_,{styling:gt.Z.Styling.Wide,type:gt.Z.Type.Navigating,address:g,suffix:!t&&(0,z.jsx)(ht.Z,{name:"pencil",aria:{"aria-hidden":"true"}}),isDisabled:t,onClick:e,validation:hh(c(yI.Address))})}function j(e){return(0,z.jsx)(jI,{address:g,isOpen:d,onChange:f(e),onCancel:v})}return(0,m.useEffect)((()=>{r(yI.Address,{required:!0})}),[r]),(0,z.jsx)(th.Qr,{control:a,name:yI.Address,render:e=>{let{field:{onChange:t}}=e;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{styling:yt.Z.Styling.Wide,type:yt.Z.Type.Leading,text:s("title")}),g?b():_(),!h&&j(t)]})}})},ZI=e=>{let{defaultValues:t,isSsnNumberRequired:i,isPersonalIdNumberRequired:n,isNationalityRequired:s,isBalanceActivated:r,agreementHint:a,canChange:o,apiErrors:l,isLoading:c,wide:d,onAddressClick:u,onSubmit:p,onCancel:g}=e;const h=U("wallet.activation"),f=(0,th.cI)({defaultValues:t});return(0,m.useEffect)((()=>{l.forEach((e=>{let{field:t,value:i}=e;const n=(0,v.camelCase)(t);(0,_i.IF)(n,yI)&&n!==yI.FullName&&f.setError(n,{type:"manual",message:i})}))}),[l,f]),(0,z.jsx)("form",{onSubmit:f.handleSubmit((function(){const e=f.getValues();return p(e)})),noValidate:!0,children:(0,z.jsxs)(th.RV,{...f,children:[(0,z.jsx)(vI,{isLoading:c,canChange:o,wide:d,isSsnNumberRequired:i,isPersonalIdNumberRequired:n,isNationalityRequired:s,isBalanceActivated:r}),(0,z.jsx)(SI,{externalModal:!0,isDisabled:c,onClick:function(){const e=f.getValues();return u(e)}}),(()=>{const e=h(r?"actions.update":"actions.save");return(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Wide,children:[(0,z.jsx)(xt.Z,{html:!0,type:xt.Z.Type.Caption,text:a}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(ic.I,{type:ic.I.Type.Submit,styling:ic.I.Styling.Filled,disabled:c,isLoading:c,testId:"balance-activation-modal--setup-form--submit-button",children:e}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,disabled:c,onClick:g,children:h("actions.cancel")})]})})()]})})};var II;!function(e){e[e.ActivateBalance=0]="ActivateBalance",e[e.Address=1]="Address"}(II||(II={}));const CI=e=>{let{labels:t,isOpen:i,onSuccess:n,onCancel:s=v.noop}=e;const r=(0,p.I0)(),a=U("activate_balance"),{track:o}=vi(),l=(0,p.v9)(YZ),c=(0,p.v9)(KZ),d=(0,p.v9)($Z),u=(0,p.v9)(eI),g=(0,p.v9)(tI),f=(0,p.v9)(JZ),y=(0,p.v9)(QZ),_=(0,p.v9)(nI),b=(0,p.v9)(X),j=(0,p.v9)(iI),[S,Z]=(0,m.useState)([]),[I,C]=(0,m.useState)(!1),[k,w]=(0,m.useState)(i?II.ActivateBalance:null);(0,m.useEffect)((()=>{o(Wi({screen:$t.PaymentsAccountInTransaction}))}),[o]),(0,m.useEffect)((()=>{r(lI.getDefaultFormValuesRequest())}),[r]);const P=()=>w(II.ActivateBalance);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(cp.Z,{show:k===II.ActivateBalance,hasScrollableContent:!0,testId:"balance-activation-modal",children:(0,z.jsxs)("div",{className:"u-fill-width",children:[(0,z.jsx)(Pm.Z,{right:(0,z.jsx)(ic.I,{aria:{"aria-label":a("a11y.actions.close")},styling:ic.I.Styling.Flat,theme:"amplified",deprecatedIconName:"x",inline:!0,onClick:s,testId:"balance-activation-modal-close-button"}),body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,text:a("header")})}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(Lg,{children:y!==Ne.Success&&y!==Ne.Failure?(0,z.jsx)(Mp,{styling:Mp.Styling.Wide}):(0,z.jsxs)(z.Fragment,{children:[t?(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Wide,children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:t.title}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Body,text:t.description})]}):null,(0,z.jsx)(ZI,{defaultValues:(()=>{const{firstName:e,lastName:t,birthdate:i,ssn:n,personalIdNumber:s,nationality:r}=l;return{firstName:e,lastName:t,birthdate:i,ssn:n,personalIdNumber:s,address:c,nationality:r}})(),isSsnNumberRequired:d,isPersonalIdNumberRequired:u,isNationalityRequired:g,isBalanceActivated:j,agreementHint:_,canChange:f,apiErrors:S,isLoading:I,onAddressClick:e=>{r(lI.getDefaultFormValuesSuccess({form:e})),w(II.Address)},onSubmit:async e=>{const t=(e=>{var t;return b&&null!==(t=e.address)&&void 0!==t&&t.id?{firstName:e.firstName,lastName:e.lastName,userId:b,birthdate:e.birthdate,ssnNumber:e.ssn,personalIdNumber:e.personalIdNumber,addressId:e.address.id,nationality:e.nationality}:null})(e);if(!t)return;C(!0);const i=await(0,Fe.LjM)(t);if("errors"in i)return Z(i.errors),void C(!1);C(!1),o(hn({source:Es.Transaction})),n&&n()},onCancel:()=>{s()}})]})})]})}),(0,z.jsx)(jI,{address:c,isOpen:k===II.Address,onChange:e=>{r(lI.setAddress({address:e})),P()},onCancel:P})]})},kI=(0,ad.oM)({name:H,initialState:{countryCodeByIp:"--",countryCode:"",user:null,anon_id:"",platform:"web",tracking_platform:"web",tracker_debug_pin:null,languageCode:"en",portalMergeSourceEnabled:!1,facebookAppId:"",googleClientId:"",appleClientId:"",googleMapsApiKey:"",braze:{sdkKey:"",apiKey:"",safariWebsitePushId:"",sdkEndpoint:""},isSmartAdServerAvailable:!1,isWebView:!1,isContentOnlyView:!1},reducers:{setUser:(e,t)=>{const{user:i}=t.payload;e.user=i},setUserDefaultAddress:(e,t)=>{const{address:i}=t.payload;e.user&&(e.user.default_address=i)},setFundraiserConfiguration:(e,t)=>{const{fundraiser:i}=t.payload;e.user&&(e.user.fundraiser=i)},setHasConfirmedPaymentsAccount:(e,t)=>{const{isConfirmed:i}=t.payload;e.user&&(e.user.has_confirmed_payments_account=i)},setAnonId:(e,t)=>{const{anonId:i}=t.payload;e.anon_id=i},setDebugPin:(e,t)=>{const{debugPin:i}=t.payload;e.tracker_debug_pin=i},setIsWebView:(e,t)=>{e.isWebView=t.payload.isWebView},setIsContentOnlyView:(e,t)=>{e.isContentOnlyView=t.payload.isContentOnlyView},setCountryCode:(e,t)=>{const{countryCode:i}=t.payload;e.countryCode=i}}}),{actions:wI}=kI,PI={[H]:kI.reducer},zI=(kI.reducer,e=>{let{children:t,title:i,primary:n,size:s,theme:r,inverse:a,onSuccess:o}=e;const l=(0,p.I0)(),c=U("conversation.actions.activate_balance"),d=(0,p.v9)(he),[u,g]=(0,m.useState)(!1),h=()=>g(!1),x=()=>{h(),l(wI.setHasConfirmedPaymentsAccount({isConfirmed:!0})),o()};return d?t:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Bx,{text:i,testId:"ensure-balance-activated-action-button",primary:n,size:s,theme:r,inverse:a,onClick:()=>g(!0)}),(()=>{const e={title:c("title"),description:c("description")};return u?(0,z.jsx)(CI,{labels:e,isOpen:u,onSuccess:x,onCancel:h}):null})()]})}),TI=e=>{let{action:t,title:i,primary:n,size:s,theme:r,inverse:a}=e;const o=(0,p.I0)(),{track:l}=vi(),c=(0,p.v9)(qd),d=(0,p.v9)(_u),u=(0,p.v9)(Xu),m=(0,p.v9)(nu),g=(0,p.v9)(Yu),h=(0,p.v9)(em),x=(0,p.v9)(im),f=(0,p.v9)(Ru),y=(0,p.v9)(oy),v=(0,p.v9)(ly),_=(0,p.v9)(qy);function b(e){o(Dm.setActiveGenerateLabelModal({modal:e}))}const j=e=>()=>o(Dm.setActiveGenerateLabelModal({modal:e}));function S(){o(Ay.removeShippingContactErrors()),b(td.GetShippingLabelModal)}async function Z(){if(!c)return;if(!_)return;const e=function(){var e,t;if(null!=m&&m.selectedCourierPickUpDate)return{date:m.selectedCourierPickUpDate,time:{from:null===(e=m.selectedCourierPickUpTime)||void 0===e?void 0:e.from,to:null===(t=m.selectedCourierPickUpTime)||void 0===t?void 0:t.to}}}(),t=function(){if(x)return x}();await(0,Fe.lUl)({transactionId:c,sellerAddressId:_.id,pickUpDate:e,digitalLabelType:t}),b(td.None)}function I(){b(td.GetShippingLabelModal)}function C(){return t===qc.ReturnOrder?function(){const e={transaction_id:c};l(Ri({target:qm.ReturnOrder,screen:$t.MessageReply,targetDetails:JSON.stringify(e)}))}():function(){const e={transaction_id:c};l(Ri({target:qm.GetShippingLabel,targetDetails:JSON.stringify(e)}))}(),y||t===qc.ReturnOrder?b(td.ReturnTheOrder):h?b(td.DigitalLabelTypeSelectionModal):d&&d.length>1?b(td.DropOffTypeSelectionModal):b(td.GetShippingLabelModal)}function k(){return d&&d.length>1?b(td.DropOffTypeSelectionModal):null!=m&&m.dropOffType&&g?b(td.CourierPickUpDateSelectionModal):b(h?td.DigitalLabelTypeSelectionModal:td.GetShippingLabelModal)}return c?(0,z.jsx)(zI,{title:i,action:t,primary:n,size:s,theme:r,inverse:a,onSuccess:C,children:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Bx,{primary:n,testId:"get-shipping-label-action-button",text:i,size:s,theme:r,inverse:a,onClick:C}),function(){var e;if(!c)return null;const i=f===md.Seller,n=null==v||null===(e=v.pricingSummary)||void 0===e?void 0:e.find((e=>e.pricing===Py.Postage));return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(ob,{isGetShippingLabelModalOpen:u===td.GetShippingLabelModal,onGenerateLabelClick:Z}),(0,z.jsx)(OZ,{isOpen:u===td.DropOffTypeSelectionModal,onClose:j(td.None),onSuccess:I}),(0,z.jsx)(RZ,{isOpen:u===td.ConfirmationModal,onSuccess:Z,onGoBack:j(td.GetShippingLabelModal)}),(0,z.jsx)(Ib,{isVisible:u===td.AddressModal,address:_||null,configuration:ab,onClose:j(td.GetShippingLabelModal),onSubmit:j(td.GetShippingLabelModal)}),(0,z.jsx)(VZ,{type:i?yd.Seller:yd.Buyer,transactionId:c,isOpen:u===td.ShippingContactModal,onClose:S}),(0,z.jsx)(lb,{isOpen:u===td.CourierPickUpDateSelectionModal}),(0,z.jsx)(HZ,{isOpen:u===td.DigitalLabelTypeSelectionModal}),(0,z.jsx)(LZ,{isOpen:u===td.DropOffPointMapModal,onClose:j(td.GetShippingLabelModal)}),t===qc.ReturnOrder&&(0,z.jsx)(ub,{isOpen:u===td.ReturnTheOrder,onClose:j(td.None),onContinue:k,onShippingDiscountModalClick:j(td.ShippingDiscountModal)}),(0,z.jsx)(GZ,{isOpen:u===td.ShippingDiscountModal,onClose:j(td.ReturnTheOrder),discount:null==n?void 0:n.discount,lowestPriceIn30Days:null==n?void 0:n.lowestPriceIn30days}),(0,z.jsx)(mb,{isOpen:u===td.ReturnCurrencyConversionModal,onClose:j(td.ReturnTheOrder)})]})}()]})}):null},FI=e=>{let{primary:t,title:i,inverse:n,theme:s,size:r}=e;const a=(0,p.v9)(qd),{track:o}=vi();return(0,z.jsx)(Bx,{primary:t,text:i,size:r,inverse:n,theme:s,url:Me.cz_,onClick:()=>{o(Ri({target:qm.GoToMyBalance,targetDetails:null==a?void 0:a.toString()}))}})};var NI=i(51479);const LI="cached_braze_custom_events";function EI(){try{const e=(0,Bn.le)(LI);return e?JSON.parse(e):[]}catch{return[]}}function OI(e){(0,Bn.D$)(LI,JSON.stringify([...EI(),e]))}const RI=(e,t)=>"was_braze_".concat(e,"_logged_or_deferred_").concat(t);async function DI(e,t){const{event:n,userExternalId:s,screen:r,modelId:a}=e;try{if(null!=t&&t.oncePerUser&&s){if(function(e,t){try{return"true"===(0,Bn.le)(RI(e,t))}catch{return!1}}(n,s))return;!function(e,t){try{(0,Bn.D$)(RI(e,t),"true")}catch{}}(n,s)}if(null!=t&&t.defer)return void OI(e);const{logCustomEvent:o}=await i.e(277).then(i.bind(i,58481));o(n,await async function(){const e=r?{screen:r}:{};if(!cg.KA.includes(n))return e;const t=await(0,Fe.UaB)({modelId:a,eventName:n});if("errors"in t)throw new Error("failed retrieving properties");return{...e,...t.properties}}())}catch(t){s&&OI(e),(0,ug.jL)("eventLoggingError(event: ".concat(n,", reason: ").concat(t.message,")"),"userExternalId: ".concat(String(s)))}}async function AI(e){const t=EI().filter((t=>t.userExternalId===e));if(0===t.length)return;const i=(await Promise.allSettled(t.map((e=>DI(e))))).map(((e,i)=>"fulfilled"===e.status?t[i]:null)).filter((e=>null!==e));var n;n=i,(0,Bn.D$)(LI,JSON.stringify(EI().filter((e=>!n.some((t=>(0,v.isEqual)(t,e)))))))}const MI=e=>{const t=is(cg.mO);if(e){if(t){const i=t.split(",").filter((t=>Number(t)!==e)).join(",");i?es(cg.mO,i):ts(cg.mO)}}else ts(cg.mO)};async function UI(e,t){const i=(()=>{const e=is(cg.mO),t=[];if(e){const i=e.split(",").map((e=>({eventName:cg.xy.ConfirmedEmail,userId:e})));t.push(...i)}return t})().filter((t=>Number(t.userId)===e));0!==i.length&&(await Promise.allSettled(i.map((async e=>{const{eventName:i,userId:n,...s}=e;await DI({event:i,userExternalId:t,...s})}))),MI(e))}const BI=(0,v.throttle)(((e,t)=>{Promise.allSettled([AI(e),UI(t,e)]).then(NI.o7)}),7e3,{leading:!0,trailing:!0}),qI=e=>{let{isOpen:t,onSubmit:i,onClose:n}=e;const s=(0,p.v9)(Ru)===md.Buyer,r=U(s?"conversation.confirm_everything_is_ok_modal":"conversation.confirm_everything_is_ok_modal.seller");return(0,z.jsx)(cp.Z,{title:r("title"),body:r("body"),testId:"confirm-everything-is-ok-modal",actions:[{text:r("actions.confirm"),style:cp.Z.ActionStyling.Filled,callback:i,testId:"confirm-everything-is-ok-modal--confirm-button"},{text:r("actions.close"),style:cp.Z.ActionStyling.Flat,callback:n,testId:"confirm-everything-is-ok-modal--close-button"}],show:t})},VI=e=>{let{primary:t,title:i,inverse:n,theme:s,size:r}=e;const{track:a}=vi(),o=(0,p.v9)(qd),l=(0,p.v9)(Y),c=(0,p.v9)(Wt("braze_sdk_enabled")),[d,u]=(0,m.useState)(!1);return o?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Bx,{primary:t,text:i,size:r,inverse:n,theme:s,onClick:function(){!function(){const e={transaction_id:o};a(Ri({target:qm.ConfirmEverythingIsOk,targetDetails:JSON.stringify(e)}))}(),o&&a(rn({screen:$t.ConfirmEverythingIsOkModal,transactionId:o})),u(!0)},testId:"conversation-action--complete-transaction-button"}),(0,z.jsx)(qI,{isOpen:d,onSubmit:async function(){o&&("errors"in await(0,Fe.dDV)(o)||(c&&DI({event:cg.xy.EscrowPurchaseCompleted,modelId:o,userExternalId:l},{defer:!0}),(0,ls.sl)()))},onClose:function(){u(!1)}})]}):null};let HI;!function(e){e.HelpCenter="help_center",e.Transaction="transaction",e.Search="search",e.Similar="similar",e.Conversation="conversation"}(HI||(HI={}));const GI=e=>{let{primary:t,title:i,inverse:n,theme:s,size:r}=e;const{track:a}=vi(),o=(0,p.v9)(qd),{relativeUrl:l}=xc();if(!o)return null;const c=(0,ys.Iq)((0,Me.wwh)(o),{ref_url:l,ch:HI.Conversation,related_only:!0});return(0,z.jsx)(Bx,{primary:t,text:i,size:r,inverse:n,theme:s,url:c,onClick:()=>{const e={transaction_id:o};a(Ri({target:qm.IHaveAnIssue,targetDetails:JSON.stringify(e)}))},testId:"conversation-action--report-problem-button"})},WI=e=>{let{primary:t,title:i,inverse:n,theme:s,size:r}=e;const a=(0,p.v9)(qd),o=(0,p.v9)(Wd),l=(0,p.v9)(dm),c=(0,p.v9)(Ru),d=(0,p.v9)(du),{relativeUrl:u}=xc();if(Xn({abTestName:"OFFLINE_VERIFICATION_FEEDBACK_FORM1",shouldTrackExpose:!!a&&!!o&&l&&c===md.Buyer&&(null==d?void 0:d.includes(gd.LeaveFeedback))}),!a||!o)return null;const m=(0,ys.Iq)((0,Me.xYj)(o),{ref_url:u,transaction_id:a,referer:"inbox"});return(0,z.jsx)(Bx,{primary:t,text:i,size:r,inverse:n,theme:s,url:m,testId:"leave-feedback-conversation-action"})},XI=e=>{let{primary:t,title:i,inverse:n,theme:s,size:r}=e;const a=(0,p.v9)(qd),o=(0,p.v9)(Wd);if(!o||!a)return null;const l=(0,ys.Iq)((0,Me.RR)(o),{transacion_id:a});return(0,z.jsx)(tp,{url:l,screen:$t.MessageReply,children:e=>{let{onClick:a}=e;return(0,z.jsx)(Bx,{size:r,text:i,theme:s,primary:t,inverse:n,onClick:a})}})},YI=e=>{let{transactionId:t,isOpen:i,onClose:n}=e;const s=U("conversation.actions.we_have_met.modal");return(0,z.jsx)(cp.Z,{show:i,defaultCallback:n,title:s("title"),body:s("body"),actions:[{text:s("button"),callback:async function(){await(0,Fe.pDD)(t),n(),(0,ls.sl)()},style:cp.Z.ActionStyling.Filled},{text:s("close"),callback:n,style:cp.Z.ActionStyling.Flat}]})},KI=e=>{const[t,i]=(0,m.useState)(!1),n=(0,p.v9)(qd),s=()=>i(!0),{primary:r,title:a,inverse:o,theme:l,size:c}=e;return n?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(zI,{...e,onSuccess:s,children:(0,z.jsx)(Bx,{text:a,primary:r,size:c,theme:l,inverse:o,onClick:s})}),(0,z.jsx)(YI,{isOpen:t,onClose:()=>i(!1),transactionId:n})]}):null},JI=e=>{let{primary:t,title:i,inverse:n,theme:s,size:r}=e;const a=(0,p.v9)(qd);return a?(0,z.jsx)(Bx,{text:i,primary:t,size:r,theme:s,inverse:n,onClick:async function(){a&&await(0,Fe.UKV)(a),(0,ls.sl)()}}):null},QI=e=>{let{transactionId:t,isPending:i,address:n,addressFormType:s,screenTrackingType:r,fieldConfiguration:a=[{field:Xg.GL.Country},{field:Xg.GL.Name},{field:Xg.GL.Line1},{field:Xg.GL.Line2},{field:Xg.GL.PostalCode},{field:Xg.GL.City}],translations:o,styling:l,onSubmit:c,onCancel:d}=e;const{track:u}=vi(),[p,g]=(0,m.useState)(Ne.Idle),[h,x]=(0,m.useState)([]),f=e=>{let{valid:i}=e;t&&s===Xg.tv.CheckoutAddress&&u(Ri({screen:$t.BillingAddressUpdate,target:qm.SaveAddress,targetDetails:JSON.stringify({valid:i,type:r,transaction_id:t})}))};return(0,z.jsx)(Sb,{styling:l,defaultValues:n,errors:h,fieldConfiguration:a,translations:o,loader:(0,z.jsx)(Mp,{styling:Mp.Styling.Wide,size:Mp.Size.Large,testId:"shipping-address-loader"}),isSubmitPending:i||p===Ne.Pending,onSubmit:async(e,i)=>{if(t&&s===Xg.tv.CheckoutAddress&&u((e=>{const{transactionId:t}=e;return{event:"buyer.precheckout",extra:{transaction_id:t}}})({transactionId:t})),!i)return void f({valid:i});g(Ne.Pending),x([]);const n=await(0,Fe.VES)({transactionId:t,address:e});if("errors"in n){f({valid:!1});const{code:e,message:t}=n;let i=[];return t&&e===pm.Q.CountryChangeNotAllowed&&(i=[{field:Xg.GL.Country,value:n.message}]),g(Ne.Failure),void x([...n.errors,...i])}f({valid:!0}),g(Ne.Success),c((0,V.X)(n.user_address))},onCancel:d})},$I=e=>{let{isOpen:t,address:i,translationPrefix:n,transactionId:s,addressFormType:r,fieldConfiguration:a,isPending:o,screenTrackingType:l,onSubmit:c,onClose:d=v.noop}=e;const u=U(n);return s?(0,z.jsxs)(cp.Z,{show:t,testId:"address-modal",children:[(0,z.jsx)(Pm.Z,{body:u("title"),right:(0,z.jsx)(ic.I,{inline:!0,iconName:$y.Z,styling:ic.I.Styling.Flat,onClick:d,testId:"address-modal-navigation-close-button"})}),(0,z.jsx)(QI,{address:i,transactionId:s,addressFormType:r,isPending:o,fieldConfiguration:a,screenTrackingType:l,onSubmit:c,onCancel:d})]}):null};let eC;!function(e){e.AddressModal="address_modal",e.ShippingContactModal="shipping_contact_modal",e.Intro="intro",e.ShippingDiscountModal="shipping_discount_modal"}(eC||(eC={}));var tC=i(50470),iC=i(2400);const nC=e=>{let{address:t,error:i,photo:n,handleEditAddressOpen:s}=e;const r=U("checkout.address");return(0,v.isEmpty)(t)?(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,title:r("empty.title"),suffix:(0,z.jsx)(Wy.Z,{name:Xy.Z,testId:"address-plus-icon"}),theme:"transparent",onClick:s,validation:(0,z.jsx)(zm.Z,{text:i,theme:"warning"})}):(0,z.jsx)(A_,{prefix:n,address:t,type:gt.Z.Type.Navigating,suffix:(0,z.jsx)(Wy.Z,{name:Yy.Z,color:Wy.Z.Color.GreyscaleLevel3,testId:"address-pencil-icon"}),onClick:s,validation:i})},sC=e=>{let{isLoading:t,returnShipment:i,transactionId:n,shipmentItems:s,isItemVerified:r,onClose:a,onConfirm:o,onAddressModalOpen:l,onShippingContactClick:c,onShippingDiscountClick:d}=e;const u=U("conversation.actions.request_return_modal"),f=(0,p.I0)(),{track:v}=vi(),_=If(),b=(0,p.v9)(Nc),j=(0,p.v9)(gy),S=j===Ty.Seller,[Z,I]=(0,m.useState)(""),{userAddress:C,phoneNumber:k,photoUrl:w,phoneNumberRequirement:P}=i,T=()=>{(()=>{const e=JSON.stringify({transaction_id:n});v(Ri({screen:$t.RequestItemReturn,target:qm.Confirm,targetDetails:e}))})(),C?P!==fd.Mandatory||k?o():f(Ay.setShippingContactError({error:{field:_d.ShippingContact,value:u("errors.shipping_contact")}})):I(u("errors.address"))},F=(e,t)=>t?(0,z.jsxs)("div",{className:"u-flexbox u-gap-medium",children:[(0,z.jsx)(Wy.Z,{name:e,color:Wy.Z.Color.GreyscaleLevel4,testId:"request-return-modal-shipping-point-".concat(e.Title,"-icon")}),(0,z.jsx)(xt.Z,{text:t,type:xt.Z.Type.Subtitle})]}):null,N=()=>{v(Ri({screen:$t.RequestItemReturn,target:qm.ShippingDiscountDetails,targetDetails:JSON.stringify({transaction_id:n})})),d()},E=e=>()=>{f(Ey.setReturnShipmentSelectedPaymentOptionSide({paymentOptionSide:e}))},O=e=>{const{code:t,title:i,subtitle:n}=e,s=y()({"return-card--selected":t===j});return(0,z.jsxs)(m.Fragment,{children:[(0,z.jsx)("div",{className:s,children:(0,z.jsx)(g.Z,{experimentalTheme:s?"primaryLightExperimental":void 0,children:(0,z.jsx)(gt.Z,{theme:"transparent",type:gt.Z.Type.Navigating,title:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:i}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]}),body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:n}),onClick:E(t),suffix:(0,z.jsx)(qx.J,{name:"".concat(i,"-radio"),checked:t===j,value:t,testId:"intro-".concat(t,"-radio")})})})}),(0,z.jsx)(x.Z,{})]},t)};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Pm.Z,{right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,iconName:$y.Z,inline:!0,onClick:()=>{f(Ey.setReturnShipmentSelectedPaymentOptionSide({paymentOptionSide:Ty.Seller})),a()},testId:"request-return-modal-close"}),body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:u("title")})}),(0,z.jsx)(h.Z,{})]}),(0,z.jsxs)("div",{className:"modal-contained-content",children:[(0,z.jsx)(db,{shipmentItems:s}),s&&s.length<2?null:(0,z.jsx)(ah.Z,{text:u("bundle_items_note")}),r?(0,z.jsx)(gt.Z,{children:(0,z.jsx)(Yp,{banner:{level:Vp.Info,body:(0,z.jsx)(xt.Z,{text:u("offline_verification",{"request-return-authenticity-link":e=>(0,z.jsx)("a",{href:Me.Lud,target:"_blank",rel:"noreferrer",children:e})})}),screenName:$t.ReturnOrder,extraNotice:!1},onBannerClick:()=>{const e=JSON.stringify({transaction_id:n,url:Me.Lud});v(Ri({screen:$t.RequestItemReturn,target:qm.Hyperlink,targetDetails:e}))}})}):null,(0,z.jsxs)(gt.Z,{children:[(0,z.jsxs)("div",{className:"u-text-center",children:[(0,z.jsx)(Kl.U,{src:_("images/free-return/return-illustration.svg"),size:Kl.U.Size.X2Large}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:u("header.title")})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{html:!0,type:xt.Z.Type.Body,text:i.explanationNote})]}),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{type:yt.Z.Type.Stacked,text:u("return_address")}),(0,z.jsx)(nC,{address:C,photo:(0,z.jsx)(Kl.U,{src:w||qe,size:Kl.U.Size.Regular,styling:Kl.U.Styling.Circle}),handleEditAddressOpen:l,error:Z}),(0,z.jsx)(h.Z,{})]}),P&&n?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(D_,{type:yd.ReturnLabel,translationPrefix:"shipping_contact.seller.return_label",phoneNumber:k,phoneRequirement:P,transactionId:n,isDisabled:P===fd.Disabled,isCompleted:!!k,onClick:c}),(0,z.jsx)(h.Z,{})]}):null,(()=>{const{payerSelection:e}=i;return null!=e&&e.length?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{type:yt.Z.Type.Stacked,text:u("return_payment_label")}),(0,z.jsx)(gt.Z,{children:null==e?void 0:e.map(O)})]}):null})(),S&&(i.pickupPointDetails?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{type:yt.Z.Type.Stacked,text:u("delivery_details")}),(0,z.jsx)(gt.Z,{testId:"return-shipment-delivery-details",children:(0,z.jsx)(Lt.Z,{styling:Lt.Z.Styling.Tight,children:(0,z.jsx)(gt.Z,{theme:"transparent",title:(()=>{if(!i.pickupPointDetails)return null;const{carrierName:e,carrierLogoUrl:t,discount:n}=i.pickupPointDetails,s=null!=n&&n.percent?(0,z.jsx)(xt.Z,{text:(0,z.jsxs)(z.Fragment,{children:[e,(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)(xt.Z,{text:"(-".concat(n.percent,"%)"),theme:"warning",testId:"request-return-discount-percent"})]}),type:xt.Z.Type.Title,testId:"request-return-carrier-title"}):(0,z.jsx)("div",{className:"u-flexbox u-align-items-center u-gap-medium",children:(0,z.jsx)(xt.Z,{text:e,type:xt.Z.Type.Title,testId:"request-return-carrier-title"})});return(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,theme:"transparent",prefix:(0,z.jsx)(Kl.U,{src:t,fallbackSrc:"/assets/shipping/carrier-placeholder.svg",size:Kl.U.Size.Regular,alt:""}),body:s})})(),body:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{}),(()=>{if(!i.pickupPointDetails)return null;const{price:e,priceBeforeDiscount:t}=i.pickupPointDetails;return t?(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center",children:[(0,z.jsx)(xt.Z,{text:"".concat(Ua(e,b)),type:xt.Z.Type.Body,bold:!0,testId:"request-return-price-after-discount"}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)(xt.Z,{text:Ua(t,b),type:xt.Z.Type.Subtitle,strikethrough:!0,testId:"request-return-price-before-discount"}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)("div",{className:"u-flexbox u-align-items-center u-cursor-pointer",onClick:N,children:(0,z.jsx)(Wy.Z,{name:iC.Z,color:Wy.Z.Color.GreyscaleLevel3,testId:"request-return-discount-info-icon"})})]}):(0,z.jsx)("div",{className:"u-flexbox u-align-items-center",children:(0,z.jsx)(xt.Z,{text:"".concat(Ua(e,b)),type:xt.Z.Type.Title,bold:!0})})})(),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(()=>{if(!i.pickupPointDetails)return null;const{pickupPointName:e,pickupPointAddress:t,valueProposition:n}=i.pickupPointDetails;return(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),children:[F(tC.Z,e),F(TZ.Z,t),F(zZ.Z,n)]})})()]})})})})]}):null),(()=>{const e=u(S?"actions.continue":"actions.confirm");return(0,z.jsx)(gt.Z,{children:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,text:e,isLoading:t,disabled:t,onClick:T,testId:"request-return-modal-confirm-button"})})})()]})]})},rC=e=>{let{isOpen:t,transactionId:i,url:n,onClose:s,onProceedToCheckout:r}=e;const a=(0,p.I0)(),o=(0,p.v9)(qd),l=(0,p.v9)(ry),c=(0,p.v9)(ay),d=(0,p.v9)(cm),u=(0,p.v9)(dm),g=(0,p.v9)(gy),h=(0,p.v9)(uy),[x,f]=(0,m.useState)(eC.Intro),[y,v]=(0,m.useState)(!1),_=i||o,b=u||d,j=g===Ty.Seller;(0,m.useEffect)((()=>{_&&(a(Ey.getReturnShipmentRequest({transactionId:_})),a(Ey.getShipmentItemsRequest({transactionId:_})))}),[a,_]);const S=()=>{f(eC.Intro)},Z=()=>{f(eC.AddressModal)},I=()=>{f(eC.ShippingContactModal)},C=()=>{f(eC.ShippingDiscountModal)},k=()=>{f(eC.Intro)},w=async()=>{if(j)return void r();if(!_)return;v(!0);const e=await(0,Fe.Kki)(_);v(!1),"errors"in e||(n?(0,ls.ru)(n):s())},P=()=>{_&&a(Ey.getReturnShipmentRequest({transactionId:_})),S()};return(0,z.jsx)(cp.Z,{show:t,testId:"request-return-modal",children:h===Ne.Pending?(0,z.jsx)(Mp,{size:Mp.Size.Large,testId:"request-return-modal-loader"}):(()=>{var e,t;switch(x){case eC.Intro:return c&&l&&(0,z.jsx)(sC,{isItemVerified:b,transactionId:_,shipmentItems:c,returnShipment:l,isLoading:y,onClose:s,onConfirm:w,onAddressModalOpen:Z,onShippingContactClick:I,onShippingDiscountClick:C});case eC.AddressModal:return(0,z.jsx)($I,{isOpen:!0,address:null==l?void 0:l.userAddress,transactionId:_,fieldConfiguration:ab,translationPrefix:"conversation.get_shipping_label.modal.address",addressFormType:Xg.tv.GenerateLabelAddress,isPending:!1,onClose:S,onSubmit:P});case eC.ShippingContactModal:return _&&(0,z.jsx)(VZ,{isOpen:!0,transactionId:_,type:yd.Seller,onClose:P});case eC.ShippingDiscountModal:return(0,z.jsx)(GZ,{isOpen:!0,onClose:k,discount:null==l||null===(e=l.pickupPointDetails)||void 0===e?void 0:e.discount,lowestPriceIn30Days:null==l||null===(t=l.pickupPointDetails)||void 0===t?void 0:t.lowestPriceIn30Days});default:return null}})()})},aC=e=>{let{show:t,messageType:i,onClose:n}=e;const s=U("sales_tax_modal");return(0,z.jsxs)(cp.Z,{show:t,children:[(0,z.jsx)(Pm.Z,{right:(0,z.jsx)(ic.I,{inline:!0,deprecatedIconName:"x",styling:ic.I.Styling.Flat,testId:"sales-tax-modal--navigation-close",onClick:n})}),(0,z.jsxs)("div",{className:"u-text-center",children:[(0,z.jsx)(Kl.U,{src:"/assets/sales-tax/sales-tax.svg",size:Kl.U.Size.XLarge,alt:"",testId:"sales-tax-modal--icon"}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(xt.Z,{text:s("title"),type:xt.Z.Type.Heading,testId:"sales-tax-modal--title"})]}),(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(xt.Z,{text:s("message.".concat(i)),testId:"sales-tax-modal--description"}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(ic.I,{text:s("actions.close"),styling:ic.I.Styling.Filled,onClick:n,testId:"sales-tax-modal--close"})]})]})};var oC=i(35907);const lC=e=>{let{payInMethodBrand:t}=e;const i=t.toLowerCase().replace(/\s+/g,"-"),n=ht.Z.buildIconName("payments",i);return n?(0,z.jsx)(ht.Z,{name:n,size:ht.Z.Size.Large,aria:{"aria-hidden":"true"},testId:"pay-in-method-icon-".concat(i)}):null},cC=e=>{const t=e.toLowerCase().replace(/\s+|_/g,""),i=Object.keys(cj).find((e=>e.toLowerCase()===t));return i?cj[i]:e};let dC;!function(e){e[e.NotClickable=0]="NotClickable",e[e.AlwaysClickable=1]="AlwaysClickable",e[e.NotExpiredClickable=2]="NotExpiredClickable"}(dC||(dC={}));const uC=e=>{let{card:t,suffix:i,onClick:n,clickableType:s}=e;const r=U("payments.card"),a=s!==dC.NotClickable,o=t.expired&&s===dC.NotExpiredClickable;return(0,z.jsx)(gt.Z,{disabled:o,prefix:(0,z.jsx)(lC,{payInMethodBrand:t.brand}),type:a?gt.Z.Type.Navigating:void 0,suffix:i,title:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:cC(t.brand),bold:!0,theme:"amplified"}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)(xt.Z,{text:r("ends_with")}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)(xt.Z,{text:t.lastFour,bold:!0,theme:"amplified"})]}),body:(()=>{const{expired:e,expirationYear:i,expirationMonth:n}=t,s="".concat((a=n,a.toString().padStart(2,"0")),"/").concat(i);var a;const o=(0,z.jsxs)(z.Fragment,{children:[r("expires"),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),s]});return(0,z.jsx)(xt.Z,{text:e?r("expired"):o,theme:e?"warning":void 0,type:xt.Z.Type.Subtitle})})(),onClick:()=>{a&&n(t)},testId:"credit-card-list--card-cell"})},mC=e=>{let{cards:t,renderSuffix:i,clickableItemType:n,onItemClick:s=v.noop}=e;return(0,z.jsx)(gt.Z,{testId:"credit-card-list",styling:gt.Z.Styling.Tight,children:t.map((e=>(0,z.jsxs)(m.Fragment,{children:[(0,z.jsx)(uC,{card:e,suffix:i(e.id),onClick:s,clickableType:n}),(0,z.jsx)(h.Z,{})]},e.id)))})},pC=e=>{let{payInMethodPromotion:{type:t,amount:i,expiryDate:n}}=e;const s=(0,O.Z)(),r=Ql(),a=(0,p.v9)(Nc),o=U("payment_method_selection.banner.".concat(t)),l=y()("pay-in-method-selection-banner",{"pay-in-method-selection-banner--dark":r}),c=i&&Ua(i,a,{keepFractionDigits:!1});return(0,z.jsx)("div",{"data-testid":"pay-in-method-selection-banner",className:l,children:(0,z.jsx)(gt.Z,{title:o("title",{amount:c}),body:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:o("body"),type:xt.Z.Type.Body}),n&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{}),(0,z.jsx)(xt.Z,{text:o("expiry_date",{expiryDate:(d=n,s.formatDate(new Date(d),{day:"numeric",month:"long",year:"numeric"}))}),type:xt.Z.Type.Subtitle})]})]}),suffix:(0,z.jsx)(Kl.U,{src:(()=>{const e="recommendation"===t?"hand-sparkle":"gift-truck",i=r?"-dark":"";return"".concat(Be.Fv,"/assets/").concat(e).concat(i,".svg")})(),size:Kl.U.Size.Large,alt:""}),theme:"transparent"})});var d},gC=e=>{let{note:t,incentive:i}=e;const n=(0,p.v9)(Nc),s=U("payment_method_selection.notes");function r(e){return(0,z.jsx)(ht.Z,{name:e,size:ht.Z.Size.Medium})}return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:function(){if(i){const e=Ua(i.amount,n,{keepFractionDigits:!1}),t=i.isDelayed?"credit_card_delayed_incentive":"credit_card_instant_incentive";return s(t,{amount:e})}return t||s("credit_card")}()}),(0,z.jsx)(x.Z,{size:x.Z.Size.XSmall}),(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge,orientation:x.Z.Orientation.Vertical}),children:[r("payments/mastercard"),r("payments/visa"),r("payments/discover")]})]})},hC=e=>{let{isDisabled:t,suffix:i,body:n,badge:s,payInMethod:r,onClick:a}=e;const{icon:o,code:l}=r;return(0,z.jsx)(gt.Z,{disabled:t,type:gt.Z.Type.Navigating,onClick:()=>a(r),title:(()=>{const{translatedName:e}=r;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:e,bold:!0,theme:"amplified"}),s&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),s,n&&(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Horizontal})]})]})})(),prefix:(0,z.jsx)(lC,{payInMethodBrand:o}),suffix:i,body:n,testId:"pay-in-method-".concat(l)})},xC=e=>{let{payInMethods:t,renderSuffix:i,renderBody:n,renderBadge:s,onItemClick:r}=e;const a=e=>r(e);return(0,z.jsx)(kp,{children:t.map((e=>{let{isDisabled:t,payInMethod:r}=e;return(0,z.jsx)(hC,{isDisabled:t,payInMethod:r,body:n(r),badge:s(r),suffix:i(r),onClick:a},r.id)}))})},fC=e=>{let{onBack:t,onSubmit:i,onAddNewCard:n,wallet:s,creditCards:r,payInMethods:a,payInMethodIncentive:o,payInMethodPromotion:l,wrapInScrollableArea:c,selectedCreditCardId:d,selectedPayInMethodId:u,recommendedPayInMethodCode:g,onSelect:f=v.noop,trackTargetDetails:y={}}=e;const{track:_}=vi(),b=U("payment_method_selection"),j=(0,p.v9)(Nc),[S,Z]=(0,m.useState)(),[I,C]=(0,m.useState)(),[k,w]=(0,m.useState)(d);function P(e){const t=Ri({target:e,targetDetails:JSON.stringify({...y}),screen:$t.PaymentOptions});_(t)}function T(e,t){f(e,t)}function F(e){const t=a.find((e=>{let{code:t}=e;return t===iv.CreditCard}));t&&(w(e.id),C(t),T(t,e))}function N(e){w(void 0),C(e),T(e)}function E(e){const t=(null==I?void 0:I.code)===iv.CreditCard&&k===e;return(0,z.jsx)("span",{"data-testid":"credit-card-".concat(e),children:(0,z.jsx)(qx.J,{name:"credit-card",value:e,checked:t})})}function O(e){if(e.code===iv.CreditCard){const t=(null==o?void 0:o.code)===iv.CreditCard?o:null;return(0,z.jsx)(gC,{incentive:t,note:e.note})}if(e.code===iv.Wallet&&null!=s&&s.balance){const{reason:e,balance:t,isDisabled:i}=s,{availableAmount:n}=t;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:b("notes.wallet",{balance:Ua(n,j)})}),i&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(xt.Z,{theme:"warning",text:e})]})]})}return e.note?(0,z.jsx)(xt.Z,{text:e.note}):null}function R(e){return(0,z.jsx)("span",{"data-testid":"pay-in-".concat(e.code),children:(0,z.jsx)(qx.J,{name:"pay-in-method",value:e.id,checked:(null==I?void 0:I.id)===e.id})})}function D(e){if(e.code===(null==o?void 0:o.code)){const e=Ua(o.amount,j,{keepFractionDigits:!1}),t=o.isDelayed?"delayed_incentive_badge":"instant_incentive_badge";return(0,z.jsx)(oC.Z,{content:b(t,{amount:e}),theme:"success"})}return e.code===g?(0,z.jsx)(oC.Z,{content:b("recommended_badge"),theme:"success"}):null}function A(){const e=a.find((e=>{let{code:t}=e;return t===iv.CreditCard}));e&&(n(e),P(qm.AddNewCardFromPaymentOptions))}function M(){I&&(I.code!==iv.CreditCard||0!==(null==S?void 0:S.length)?(P(qm.SubmitPaymentMethod),function(e){if(!y.transactionId)return;const t=tn({transactionId:y.transactionId,eventTrackingCode:e.translatedName,screen:$t.PaymentOptions});_(t)}(I),i(I,k)):A())}function B(){return(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{}),children:[(0,z.jsx)(ic.I,{disabled:!(null==I||!I.requiresCreditCard||null==S||!S.length||k),type:ic.I.Type.Submit,text:b("buttons.submit"),styling:ic.I.Styling.Filled,onClick:M,testId:"pay-in-method-selection--submit-button"}),t&&(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,text:b("buttons.back"),onClick:t})]})}function q(){const e=e=>{var t;let{code:i}=e;const n=null!==(t=null==s?void 0:s.isDisabled)&&void 0!==t&&t;return i===iv.Wallet&&n};return a.filter((e=>{let{code:t}=e;return t!==iv.CreditCard||0===(null==S?void 0:S.length)})).map((t=>({payInMethod:t,isDisabled:e(t)})))}function V(){return(0,z.jsxs)(z.Fragment,{children:[l&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(nc.Z,{children:(0,z.jsx)(pC,{payInMethodPromotion:l})}),(0,z.jsx)(h.Z,{})]}),S?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(mC,{cards:S,clickableItemType:dC.NotExpiredClickable,onItemClick:F,renderSuffix:E}),S.length>0&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,chevron:!0,title:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),b("add_new_credit_card"),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium})]}),onClick:A,testId:"pay-in-method-selection--add-new-card-button"}),(0,z.jsx)(h.Z,{})]})]}):(0,z.jsx)(Mp,{testId:"credit-card-list-loader",styling:Mp.Styling.Wide}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xC,{payInMethods:q(),renderBody:O,renderBadge:D,renderSuffix:R,onItemClick:N}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]})]})}return(0,m.useEffect)((()=>{r?Z(r):async function(){const e=await(0,Fe.Thf)();"errors"in e||Z(Cj(e.cards))}()}),[r]),(0,m.useEffect)((()=>{_(Wi({screen:$t.PaymentOptions}))}),[_]),(0,m.useEffect)((()=>{if(I)return;const e=function(){if(u&&a.length)return a.find((e=>{let{id:t}=e;return t===u}))}()||a.find((e=>{let{code:t}=e;return t===iv.CreditCard}));e&&C(e)}),[a,I,u]),(0,m.useEffect)((()=>{if(!d)return;const e=null==S?void 0:S.find((e=>{let{id:t}=e;return t===d}));w(null==e?void 0:e.id)}),[S,d]),c?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Lg,{children:V()}),(0,z.jsx)(gt.Z,{children:B()})]}):(0,z.jsxs)(gt.Z,{children:[V(),B()]})},yC="extraService",vC=e=>e[yC],_C=e=>vC(e).orderPayment,bC=e=>vC(e).payInMethods,jC=e=>bC(e).creditCards,SC=e=>bC(e).payInMethods,ZC=e=>bC(e).walletBalance,IC=(0,B.P1)(_C,(e=>{let{auth:t}=e;return t})),CC=(0,B.P1)(_C,(e=>{let{status:t}=e;return t})),kC=(0,B.P1)(_C,(e=>{let{error:t}=e;return t.message})),wC=(0,B.P1)(jC,(e=>e.filter((e=>{let{isSingleUse:t}=e;return!t})))),PC=Pl([ZC,(e,t)=>t],((e,t)=>!(!e||!t)&&parseFloat(t)>parseFloat(e.availableAmount.amount))),zC=(0,B.P1)(SC,(e=>e.find((e=>{let{preferred:t}=e;return!!t})))),TC=(0,B.P1)(SC,(e=>{var t;return null===(t=bC(e).selectedPayInMethod)||void 0===t?void 0:t.id}),((e,t)=>e.find((e=>{let{id:i}=e;return i===t})))),FC=(0,B.P1)(jC,(e=>{var t;return null===(t=bC(e).selectedPayInMethod)||void 0===t?void 0:t.creditCardId}),TC,zC,((e,t,i,n)=>{const s=i||n;return(null==s?void 0:s.code)!==iv.CreditCard?null:t?e.find((e=>{let{id:i}=e;return i===t})):e.find((e=>{let{isDefault:t}=e;return t}))})),NC=(0,B.P1)(FC,TC,zC,PC,((e,t,i,n)=>{const s=t||i;return(null==s?void 0:s.code)!==iv.CreditCard||e?(null==s?void 0:s.code)===iv.Wallet&&n||(null==s?void 0:s.code)===iv.ApplePay||(null==s?void 0:s.code)===iv.GooglePay?null:null!=s?s:null:null})),LC=(0,B.P1)(SC,(e=>e.find((e=>{let{code:t}=e;return t===iv.CreditCard})))),EC=Pl([NC,(e,t)=>t],((e,t)=>(null==e?void 0:e.code)===iv.BlikDirect&&(!t||parseFloat(t)>0))),OC=(0,B.P1)(_C,(e=>{let{configuration:t}=e;return t})),RC=(0,B.P1)(OC,(e=>(null==e?void 0:e.threeDS2)||null)),DC=e=>{let{screen:t,orderId:i,orderType:n,shouldTrack:s}=e;const{track:r}=vi();(0,m.useEffect)((()=>{i&&s&&r(nn({screen:t,orderId:i,orderType:n}))}),[r,t,i,n,s])},AC=e=>{let{show:t,orderId:i,orderType:n,orderPayable:s,selectedCreditCardId:r,selectedPayInMethodId:a,onBack:o,onCancel:l,onConfirm:c,onAddCreditCard:d}=e;const u=U("checkout.payment.select"),m=U("payment_method_selection"),g=(0,p.v9)(SC),h=(0,p.v9)(ZC),x=(0,p.v9)(wC),f=(0,p.v9)((e=>PC(e,null==s?void 0:s.amount)));function y(){o()}function v(e){d(e)}function _(e,t){e.code!==iv.CreditCard||t?c(e,t):v(e)}return DC({shouldTrack:t,orderId:i,orderType:n,screen:$t.PaymentOptions}),(0,z.jsx)(cp.Z,{show:t,hasScrollableContent:!0,testId:"extra-service-pay-in-method-selection-modal",children:(0,z.jsxs)("div",{className:"u-fill-width",children:[(0,z.jsx)(Pm.Z,{body:u("title"),right:(0,z.jsx)(ic.I,{inline:!0,deprecatedIconName:"x",styling:ic.I.Styling.Flat,testId:"extra-service-pay-in-method-selection-modal-close",onClick:function(){l()}})}),function(){if(!g.length)return(0,z.jsx)(Mp,{styling:Mp.Styling.Wide,testId:"extra-service-pay-in-methods-loader"});const e={balance:h||null,isDisabled:f,reason:m("validations.insufficient_wallet_funds")};return(0,z.jsx)(fC,{wrapInScrollableArea:!0,creditCards:x,wallet:e,payInMethods:g,selectedCreditCardId:r,selectedPayInMethodId:a,trackTargetDetails:{type:n,service_order_id:i},onBack:y,onSubmit:_,onAddNewCard:v})}()]})})},MC=e=>{let{type:t,name:i,card_number_patterns:n,card_number_format:s,card_number_min_length:r,card_number_max_length:a,card_number_luhn:o,cvv_required:l,cvv_min_length:c,cvv_max_length:d,image_url_small:u,image_url_medium:m}=e;return{type:t,name:i,cardNumberPatterns:n,cardNumberFormat:s,cardNumberMinLength:r,cardNumberMaxLength:a,cardNumberLuhn:o,cvvRequired:l,cvvMinLength:c,cvvMaxLength:d,imageUrlSmall:u,imageUrlMedium:m}},UC=/^\s*[a-zA-Z\u00C0-\u1FFF\u2C00-\uD7FF.\-,']+(\s+[a-zA-Z\u00C0-\u1FFF\u2C00-\uD7FF.\-,']+)+\s*$/;let BC;!function(e){e.Name="name",e.CardNumber="cardNumber",e.ExpirationDate="expirationDate",e.CVC="cvc",e.PostalCode="postalCode",e.IsSingleUse="isSingleUse"}(BC||(BC={}));const qC=e=>{let{onBlur:t,shouldFocus:i}=e;const n=U("credit_card_add.name"),{register:s,setFocus:r,formState:{errors:a}}=(0,th.Gc)(),o=fh(a,"credit_card_add");return(0,m.useEffect)((()=>{i&&r(BC.Name)}),[r,i]),(0,z.jsx)(fb.M,{...s(BC.Name,{required:!0,validate:function(e){if(!UC.test(e))return n("errors.format")}}),title:n("title"),placeholder:n("placeholder"),uncontrolled:!0,styling:fb.M.Styling.Tight,validation:hh(o(BC.Name)),onBlur:t})};function VC(e){const[t,i]=e.match(/\d{1,4}/g)||[],n=String((new Date).getFullYear()).slice(0,2),s=2===(null==i?void 0:i.length)?"".concat(n).concat(i):i,r=Number(t)-1,a=new Date(Number(s),r,1);if(a.getFullYear()===Number(s)&&a.getMonth()===r)return new Date(a.getFullYear(),a.getMonth()+1,0,23,59,59)}const HC=e=>{let{shouldFocus:t,cardConfigs:i,onConfigMatched:n,onBlur:s}=e;const r=U("credit_card_add"),[a,o]=(0,m.useState)(function(e){return e.find((e=>{let{type:t}=e;return t===lj.Unknown}))}(i)),{register:l,setValue:c,setFocus:d,formState:{errors:u}}=(0,th.Gc)(),p=fh(u,"credit_card_add");return(0,m.useEffect)((()=>{t&&d(BC.CardNumber)}),[d,t]),(0,z.jsx)(fb.M,{...l(BC.CardNumber,{required:!0,validate:function(e){const t=pj(e);if(!a)return;const{cardNumberFormat:i,cardNumberLuhn:n,cardNumberMaxLength:s,cardNumberMinLength:o}=a;return new RegExp(i).test(t)?s&&t.length>s||o&&t.length<o?r("card_number.errors.format"):n&&!function(e){const t=pj(e);let i=Number(t.slice(-1));const n=t.length,s=n%2;for(let e=0;e<n-1;e+=1){let n=Number(t.charAt(e));e%2===s&&(n*=2),n>9&&(n-=9),i+=n}return i%10==0}(t)?r("card_number.errors.luhn"):void 0:r("card_number.errors.format")}}),title:r("card_number.title"),placeholder:r("card_number.placeholder"),suffix:a?(0,z.jsx)(Kl.U,{src:a.imageUrlSmall,size:Kl.U.Size.Small}):null,uncontrolled:!0,styling:fb.M.Styling.Tight,onChange:function(e){const{value:t}=e.target,s=pj(t),r=function(e,t){const i=pj(e);return t.find((e=>{let{cardNumberPatterns:t}=e;return t.find((e=>new RegExp(e).test(i)))}))}(s,i);o(r),n(r),c(BC.CardNumber,function(e,t){var i,n;let s=pj(e);return t&&(s=s.substring(0,t.cardNumberMaxLength)),null!==(i=null===(n=s.match(/\d{1,4}/g))||void 0===n?void 0:n.join(" "))&&void 0!==i?i:""}(s,r))},onBlur:s,validation:hh(p(BC.CardNumber))})},GC="/",WC=e=>{let{onBlur:t}=e;const i=U("credit_card_add.expiration_date"),{register:n,setValue:s,watch:r,formState:{errors:a}}=(0,th.Gc)(),o=fh(a,"credit_card_add"),l=r(BC.ExpirationDate,"");return(0,z.jsx)(fb.M,{...n(BC.ExpirationDate,{required:!0,validate:function(e){const t=VC(e);return t?function(e){return e<new Date}(t)?i("errors.expired"):void 0:i("errors.invalid")}}),title:i("title"),placeholder:i("placeholder"),maxLength:7,uncontrolled:!0,styling:fb.M.Styling.Tight,onChange:function(e){let{value:t}=e.target;const i=pj(t);if(i.length>=4){var n;const e=i.match(/^(\d{2})(\d{2,4})$/);null==e||e.shift(),t=null!==(n=null==e?void 0:e.join(GC))&&void 0!==n?n:t}else t=t.replace(/[^0-9/]/g,"");s(BC.ExpirationDate,t)},onBlur:t,onKeyDown:function(e){const{key:t}=e;if(!/^\d+$/.test(t))return;const i=l+t;if(/^\d$/.test(i)&&"0"!==i&&"1"!==i)e.preventDefault(),s(BC.ExpirationDate,"0".concat(i).concat(GC));else if(/^\d\d$/.test(i)){e.preventDefault();const t=parseInt(i[0],10),n=parseInt(i[1].substring(0,2),10);s(BC.ExpirationDate,n>2&&0!==t?"".concat(t).concat(GC).concat(n):"".concat(i).concat(GC))}},validation:hh(o(BC.ExpirationDate))})},XC=e=>{let{config:t,masked:i,onBlur:n,onInfoIconClick:s}=e;const r=U("credit_card_add.cvc"),{watch:a,register:o,setValue:l,formState:{errors:c}}=(0,th.Gc)(),d=a(BC.CVC),u="".repeat(null==d?void 0:d.length),p=i?u:d,g=fh(c,"credit_card_add"),[h,x]=(0,m.useState)(!1);return 0===(null==t?void 0:t.cvvMaxLength)?null:(0,z.jsx)(fb.M,{...o(BC.CVC,{required:null==t?void 0:t.cvvRequired,minLength:null==t?void 0:t.cvvMinLength,maxLength:null==t?void 0:t.cvvMaxLength}),ignoreState:!0,value:p,title:r("title"),placeholder:r("placeholder"),onChange:function(e){const t=e.target.value,n=i?(s=t,[...s].map(((e,t)=>""===e?d[t]:pj(e))).join("")):pj(t);var s;l(BC.CVC,n)},onBlur:n,inputMode:fb.M.InputMode.Numeric,maxLength:null==t?void 0:t.cvvMaxLength,styling:fb.M.Styling.Tight,validation:hh(g(BC.CVC))||function(){if(!h)return null;const e=null!=t&&t.cvvRequired?"info_text":"info_text_optional";return hh(r(e),"muted")}(),suffix:(0,z.jsx)("div",{className:"u-flexbox u-align-items-center u-cursor-pointer",onClick:h?function(){x(!1)}:function(){x(!0),s()},"data-testid":"cvc-info-circle",children:(0,z.jsx)(ht.Z,{name:"info-circle",color:ht.Z.Color.GreyscaleLevel4,size:ht.Z.Size.Small})})})},YC=e=>{let{onBlur:t}=e;const i=U("credit_card_add.postal_code"),{register:n,formState:{errors:s}}=(0,th.Gc)(),r=fh(s,"credit_card_add");return(0,z.jsx)(fb.M,{...n(BC.PostalCode,{required:!0,validate:function(e){if(5!==pj(e).length)return i("errors.invalid")}}),title:i("title"),placeholder:i("placeholder"),uncontrolled:!0,styling:fb.M.Styling.Tight,validation:hh(r(BC.Name)),onBlur:t})},KC=()=>{const{setValue:e,control:t}=(0,th.Gc)(),i=U("credit_card_add.single_use");function n(t){let{target:i}=t;e(BC.IsSingleUse,!i.checked)}return(0,z.jsx)(th.Qr,{defaultValue:!0,render:e=>{let{field:{name:t,value:s}}=e;return(0,z.jsx)(BZ.F,{name:t,text:i("consent"),checked:!s,testId:"credit-card-form-single-use-checkbox",onChange:n})},name:BC.IsSingleUse,control:t})};let JC,QC,$C,ek,tk,ik;!function(e){e.US="US",e.IBAN="IBAN",e.GB="GB"}(JC||(JC={})),function(e){e.Stripe="stripe",e.Mangopay="mangopay",e.Adyen="adyen",e.AdyenBank="adyen_bank",e.CheckoutCom="checkout",e.Payrails="payrails",e.None="none"}(QC||(QC={})),function(e){e.Stripe="stripe"}($C||($C={})),function(e){e.Name="name",e.AccountNumber="account_number",e.RoutingNumber="routing_number",e.SpendingType="spending_type"}(ek||(ek={})),function(e){e.Checking="checking",e.Savings="savings"}(tk||(tk={})),function(e){e.Ok="ok",e.ProviderError="providerError",e.LibraryNotLoaded="libraryNoLoaded"}(ik||(ik={}));const nk={test:"https://test.adyen.com/hpp/cse/js/8215282108561142.shtml",live:"https://live.adyen.com/hpp/cse/js/2615399527220859.shtml"},sk={load:function(e){Hb({id:"adyen-tokenizer",src:nk[e.site||"live"]})},tokenize:async function(e,t){if(!window.adyen)return Promise.resolve({status:ik.LibraryNotLoaded});const i=window.adyen.createEncryption(t.accessKey),n=t.preregistrationData,s=e.expirationMonth.toString(),r=e.expirationYear.toString(),a={number:e.cardNumber,cvc:e.cvc,holderName:e.name,expiryMonth:s,expiryYear:r,generationtime:n},o=i.encrypt(a),l={cardNumber:i.encrypt({number:e.cardNumber,generationtime:n}),expirationMonth:i.encrypt({expiryMonth:s,generationtime:n}),expirationYear:i.encrypt({expiryYear:r,generationtime:n}),cvc:i.encrypt({cvc:e.cvc,generationtime:n})},c=!(0,v.some)(l,v.isEmpty);return Promise.resolve({status:o?ik.Ok:ik.ProviderError,encryptedCard:o,encryptedCardDetails:c?l:void 0})}},rk={load:function(){},tokenize:async function(e,t){var i;if(!t.cardRegistrationUrl)return Promise.resolve({status:ik.LibraryNotLoaded});const n="0".concat(e.expirationMonth).slice(-2),s="".concat(e.expirationYear).slice(-2),r=new URLSearchParams;r.append("data",t.preregistrationData),r.append("accessKeyRef",t.accessKey),r.append("cardNumber",e.cardNumber),r.append("cardExpirationDate","".concat(n).concat(s)),r.append("cardCvx",e.cvc.toString());const a=await ds().post(t.cardRegistrationUrl,r,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});return 0===(null===(i=a.data)||void 0===i?void 0:i.indexOf("data="))?Promise.resolve({status:ik.Ok,encryptedCard:a.data}):Promise.resolve({status:ik.ProviderError,error:JSON.stringify(a)})}};var ak=i(91695);const ok={load:function(){},tokenize:async function(e,t){if(!t.cardRegistrationUrl)return Promise.resolve({status:ik.LibraryNotLoaded});const i=new ak.Z,n=await i.post(t.cardRegistrationUrl,{type:"card",name:e.name,number:e.cardNumber,cvv:e.cvc.toString(),expiry_year:e.expirationYear,expiry_month:e.expirationMonth},{headers:{"content-type":"application/json",Authorization:"Bearer ".concat(t.accessKey)}});return"errors"in n?Promise.resolve({status:ik.ProviderError,error:JSON.stringify(n.errors)}):Promise.resolve({status:ik.Ok,encryptedCard:n.token})}},lk={load:function(){},tokenize:async function(e,t){try{if(!t.initializationData)return{status:ik.LibraryNotLoaded};const{PayrailsCSE:n}=await i.e(277).then(i.t.bind(i,21224,19)),s=n.init(t.initializationData),r={holderName:e.name,cardNumber:e.cardNumber,expiryMonth:e.expirationMonth.toString(),expiryYear:e.expirationYear.toString(),securityCode:e.cvc},a=await s.tokenize(r),o=await a.json();return"errors"in o||null==o||!o.id?{status:ik.ProviderError}:{status:ik.Ok,encryptedCard:o.id}}catch{return{status:ik.ProviderError}}}},ck=function(e){switch(e){case QC.Adyen:case QC.AdyenBank:return sk;case QC.Mangopay:return rk;case QC.CheckoutCom:return ok;case QC.Payrails:return lk;default:throw new Error("Unsupported payment provider for tokenization ".concat(e))}},dk=async function(e,t){const i=await Fe.Mq$({name:t.name,cardBrand:t.brand});if("errors"in i)return{error:i.message};const n=(e=>{let{id:t,preregistration_data:i,access_key:n,card_registration_url:s,credit_card:r,external_code:a,provider:o,initialization_data:l}=e;return{id:t,preregistrationData:i,accessKey:n,cardRegistrationUrl:s,creditCard:r?Ij(r):null,externalCode:a,provider:o,initializationData:l}})(i.info),{encryptedCard:s,encryptedCardDetails:r,error:a}=await ck(e).tokenize(t,n);return s?{id:n.id,encryptedCard:s,encryptedCardDetails:r}:{error:a,id:n.id}},uk="is_cc_save_confirmation_modal_seen";let mk,pk,gk;!function(e){e.Adyen="adyen",e.AdyenBank="adyen_bank"}(mk||(mk={})),function(e){e.ThreeDS2="threeDS2",e.Await="await"}(pk||(pk={})),function(e){e.Fingerprint="fingerprint",e.Challenge="challenge"}(gk||(gk={}));const hk={version:"5.2.0",resources:{test:[{type:"js",integrity:"sha384-qt4kgNMZ0UwOQ6AwZY31nwn5Cf4UU8wPfkhFu/tiF/Jta16AjBtfrkh1dFw2G7oP"},{type:"css",integrity:"sha384-gaEp/efBcplH05NvdYnrdMcaKBrhlK/jau5tB/MkhdOsY7sz6mUnu5fa26lNzt+i"}],live:[{type:"js",integrity:"sha384-qt4kgNMZ0UwOQ6AwZY31nwn5Cf4UU8wPfkhFu/tiF/Jta16AjBtfrkh1dFw2G7oP"},{type:"css",integrity:"sha384-gaEp/efBcplH05NvdYnrdMcaKBrhlK/jau5tB/MkhdOsY7sz6mUnu5fa26lNzt+i"}]}};function xk(e,t){return t.resources[e].map((i=>{const n=function(e,t,i){return"https://checkoutshopper-".concat(e,".adyen.com/checkoutshopper/sdk/").concat(t,"/adyen.").concat(i)}(e,t.version,i.type);return function(e,t){let{type:i,integrity:n}=t;const s="anonymous",r="adyen-".concat(i);switch(i){case"js":return Hb({id:r,src:e,crossOrigin:s,integrity:n});case"css":return(e=>{let{id:t,href:i,crossOrigin:n,integrity:s}=e;return new Promise(((e,r)=>{const a=document.createElement("link");a.id=t,a.href=i,a.type="text/css",a.rel="stylesheet",n&&(a.crossOrigin=n),s&&(a.integrity=s),a.onload=e,a.onerror=r,document.head.appendChild(a)}))})({id:r,href:e,crossOrigin:s,integrity:n});default:throw new Error("Unknown type to load ".concat(i))}}(n,i)}))}const fk=e=>{let{adyenCheckout:t,adyenAction:i}=e;const n=(0,m.useRef)(null),s=(0,m.useRef)();return(0,m.useEffect)((()=>((()=>{if(!n.current)return;const e=t.createFromAction(i).mount(n.current);s.current=e})(),()=>{var e;return null===(e=s.current)||void 0===e?void 0:e.remove()})),[i,t,n]),(0,z.jsx)("div",{className:"adyen-await",ref:n})},yk=e=>{let{adyenAction:t,adyenCheckout:i}=e;const n=U("blik_direct_payment_method.pending_payment_modal");return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{hidden:!0,children:(0,z.jsx)(fk,{adyenAction:t,adyenCheckout:i})}),(0,z.jsxs)(gt.Z,{children:[(0,z.jsxs)("div",{className:"u-text-center",children:[(0,z.jsx)(ht.Z,{name:"blik",size:ht.Z.Size.XLarge}),(0,z.jsx)(x.Z,{size:x.Z.Size.XSmall}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,alignment:xt.Z.Alignment.Center,text:n("title")}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]}),(0,z.jsx)(xt.Z,{html:!0,type:xt.Z.Type.Body,text:n("description")})]})]})};function vk(e){return(null==e?void 0:e.type)===pk.ThreeDS2||(null==e?void 0:e.type)===pk.Await}const _k=e=>{let{onError:t,onContinue:i,authAction:n,threeDS2Config:s,onInputRequested:r=v.noop}=e;const[a,o]=(0,m.useState)(),[l,c]=(0,m.useState)(Ne.Idle),d=(null==n?void 0:n.adyen)||(null==n?void 0:n.adyenBank),u=U("threeds2"),g=(0,p.v9)(Nc);function h(e){i(e)}function x(e){t(e.message)}if((0,m.useEffect)((()=>{(function(e){return e===Ne.Failure||e===Ne.Success})(l)&&async function(){if(!s||!window.AdyenCheckout)return void t(u("errors.resources_failed_loading"));const{providerConfig:e}=s,i={locale:g,environment:e.site,clientKey:e.apiKey,paymentMethodsConfiguration:{threeDS2:{challengeWindowSize:"05"}},onAdditionalDetails:h,onError:x},n=await window.AdyenCheckout(i);o(n)}()}),[d,l]),(0,m.useEffect)((()=>{s&&d&&l===Ne.Idle&&async function(e){c(Ne.Pending);try{await function(e){const t=hk;return Promise.all(xk(e,t))}(e),c(Ne.Success)}catch{c(Ne.Failure)}}(s.providerConfig.site)}),[l,s,d]),(0,m.useEffect)((()=>{vk(d)&&r()}),[d,r]),!a||!d)return null;if("blik"===(f=d).paymentMethodType&&f.type===pk.Await)return(0,z.jsx)(yk,{adyenAction:d,adyenCheckout:a});var f;if(vk(d))return(0,z.jsx)(fk,{adyenAction:d,adyenCheckout:a});throw new Error("Unknown Adyen action ".concat(d.type))},bk=e=>{let{onError:t,onContinue:i,authAction:n,threeDS2Config:s,onInputRequested:r}=e;if(!s)return null;switch(s.provider){case mk.Adyen:case mk.AdyenBank:return(0,z.jsx)(_k,{authAction:n,threeDS2Config:s,onError:t,onContinue:i,onInputRequested:r});default:return null}},jk=e=>{let{registrationId:t,initialAuthAction:i,onSuccess:n,onFailure:s}=e;const r=U("credit_card_add.threeds2"),[a,o]=(0,m.useState)(!1),[l,c]=(0,m.useState)(null),[d,u]=(0,m.useState)(null),p=(0,m.useCallback)((e=>{s(e||r("errors.resources_failed_loading"))}),[r,s]);(0,m.useEffect)((()=>{!async function(){const e=await(0,Fe.Ukv)();var t;if("errors"in e)return void p((null===(t=e.errors[0])||void 0===t?void 0:t.value)||e.message);const i=nS(e.checkout_configuration);u(i.threeDS2)}()}),[p]),(0,m.useEffect)((()=>{i&&c(i)}),[i]);const g=y()({"threeds2__card-form-challenge":a});return(0,z.jsx)("div",{className:g,children:(0,z.jsx)(bk,{authAction:l,threeDS2Config:d,onError:p,onContinue:function(e){c(null),o(!1),async function(e){if(!t)return void p();const i=await(0,Fe.ykQ)({registrationId:t,paymentData:{details:e.data.details,data:e.data.paymentData}});var s;if("errors"in i)return void p((null===(s=i.errors[0])||void 0===s?void 0:s.value)||i.message);const{authentication_action:r,authentication_redirect_url:a,credit_card:o}=i;r?c(tS(r)):a?(0,ls.ru)(a):(o&&n(Ij(o)),p())}(e)},onInputRequested:function(){o(!0)}})})},Sk=e=>{let{show:t,onCancel:i,onConfirm:n,transactionId:s}=e;const{track:r}=vi(),a=U("credit_card_save_confirmation_modal");function o(e){if(!s)return;const t=e?qm.SaveTheCard:qm.DontSaveTheCard;r(Ri({target:t,screen:$t.SaveCreditCardReminder,targetDetails:JSON.stringify({transaction_id:s})}))}return(0,z.jsx)(cp.Z,{show:t,testId:"credit-card-save-confirmation-modal",children:(0,z.jsxs)(gt.Z,{children:[(0,z.jsxs)("div",{className:"u-text-center",children:[(0,z.jsx)(Kl.U,{src:"".concat(Be.Fv,"/assets/credit-card-form/credit-card.svg"),size:Kl.U.Size.XLarge,alt:""}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:a("title"),type:xt.Z.Type.Heading,testId:"credit-card-save-confirmation-modal--title"})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:a("description"),testId:"credit-card-save-confirmation-modal--description"}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(ic.I,{text:a("actions.confirm"),styling:ic.I.Styling.Filled,onClick:function(){o(!0),n()},testId:"credit-card-save-confirmation-modal--confirm-button"}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,text:a("actions.cancel"),onClick:function(){o(!1),i()},testId:"credit-card-save-confirmation-modal--cancel-button"})]})})},Zk={[BC.Name]:"full_name",[BC.CardNumber]:"card_number",[BC.ExpirationDate]:"expiration_date",[BC.CVC]:"security_code",[BC.PostalCode]:"postal_Code"};var Ik;!function(e){e[e.WasShownOnLastSubmit=0]="WasShownOnLastSubmit",e[e.WasShownBeforeLastSubmit=1]="WasShownBeforeLastSubmit",e[e.NotShown=2]="NotShown",e[e.Shown=3]="Shown"}(Ik||(Ik={}));const Ck=e=>{var t;let{source:i,errorMessage:n,onCancel:s,onSuccess:r,submitActionText:a,trackingTargetDetails:o,allowSingleUse:l=!1,onLoaded:c=v.noop,onTrackableFieldChange:d=v.noop}=e;const u=U("credit_card_add"),{track:h}=vi(),f=(0,p.v9)(te),y=(0,th.cI)({mode:"onTouched",defaultValues:{[BC.Name]:f||""}}),{handleSubmit:_,formState:b,getValues:j,setValue:S}=y,{errors:Z}=b,[I,C]=(0,m.useState)(),[k,w]=(0,m.useState)(),[P,T]=(0,m.useState)(null),[F,N]=(0,m.useState)(null),[E,O]=(0,m.useState)({uiState:Ne.Idle}),[R,D]=(0,m.useState)("true"===(0,Bn.le)(uk)?Ik.WasShownBeforeLastSubmit:Ik.NotShown),{trackSubmit:A,trackTokenizationOutcome:M}=(e=>{let{getFormValues:t,creditCardType:i,trackingTargetDetails:n}=e;const{track:s}=vi();return{trackSubmit:(0,m.useCallback)((e=>{let{cardRegistrationId:r,hasFrontEndValidationPassed:a}=e;const o=a?null:(l=t().cardNumber,pj(l).slice(0,6)||null);var l;const c={valid:a,card_registration_id:null!=r?r:null,card_details_stored:!t().isSingleUse,card_brand:i||lj.Unknown,...o&&{card_brand_identificator:o}},d=Fi[n.type]||n.type;s(Ri({target:qm.UseThisCard,screen:$t.CreditCardAdd,targetDetails:JSON.stringify({...n,type:d,...c})}))}),[s,t,i,n]),trackTokenizationOutcome:(0,m.useCallback)((e=>{let{isSuccess:t,errorMessage:i,providerName:r}=e;s((e=>{const{outcome:t,orderId:i,checkoutType:n,errorMessage:s,providerName:r,transactionId:a}=e;return{event:"system.tokenization_outcome",extra:{outcome:t,order_id:i,error_message:s,provider_name:r,transaction_id:a,checkout_type:Fi[n]||n}}})({providerName:r,errorMessage:i,checkoutType:n.type,outcome:t?"success":"failure",..."transaction_id"in n&&{transactionId:n.transaction_id},..."service_order_id"in n&&{orderId:n.service_order_id}}))}),[s,n])}})({trackingTargetDetails:o,getFormValues:j,creditCardType:null==k?void 0:k.type});(0,m.useEffect)((()=>{n&&T(n)}),[n]),(0,m.useEffect)((()=>{P&&R===Ik.WasShownOnLastSubmit&&S(BC.IsSingleUse,!0)}),[S,P,R]),(0,m.useEffect)((()=>{h(Wi({screen:$t.CreditCardAdd}))}),[h]),(0,m.useEffect)((()=>{I&&c()}),[c,I]),(0,m.useEffect)((()=>{!async function(){const e=await Fe.yLj();if("errors"in e)return;const t=(e=>{let{provider:t,site:i,required_fields:n,configuration:s}=e;return{provider:t,site:i,requiredFields:n,configuration:(r=s,r.map(MC))};var r})(e.credit_card_registration);C(t),ck(t.provider).load(t)}()}),[]);const B="on"===(null===(t=Xn({abTestName:"mask_cvv_field_in_card_add_screen",shouldTrackExpose:!0}))||void 0===t?void 0:t.variant);function q(e){return()=>function(e){d({name:Zk[e],isValid:!Z[e]})}(e)}function V(){B&&h(Ri({screen:$t.CreditCardAdd,target:qm.CvvFieldInfo,targetDetails:JSON.stringify(o)}))}function H(){A({hasFrontEndValidationPassed:!1})}async function G(e){if(T(null),R===Ik.WasShownOnLastSubmit&&D(Ik.WasShownBeforeLastSubmit),R===Ik.Shown&&D(Ik.WasShownOnLastSubmit),!k||!I)return T(u("card_number.errors.format")),void A({hasFrontEndValidationPassed:!1});const t=function(e,t){const i=VC(e.expirationDate);return i?{brand:t.type,name:e.name,cardNumber:pj(e.cardNumber),cvc:pj(e.cvc),expirationYear:i.getFullYear(),expirationMonth:i.getMonth()+1,postalCode:e.postalCode}:null}(e,k);if(!t)return T(u("errors.generic")),void A({hasFrontEndValidationPassed:!1});const n=await dk(I.provider,t);if(!n.encryptedCard||!n.id)return T(n.error||u("errors.generic")),M({isSuccess:!1,errorMessage:n.error,providerName:I.provider}),void A({hasFrontEndValidationPassed:!0,cardRegistrationId:n.id});M({isSuccess:!0,providerName:I.provider});const s=await Fe.M9F({id:n.id,brand:t.brand,registrationData:n.encryptedCard,isSingleUse:j().isSingleUse,encryptedCardDetails:n.encryptedCardDetails,browserAttributes:hj(),source:i});if("errors"in s){const e=(0,v.compact)(s.errors.map((e=>{let{value:t}=e;return t}))).join("\n");return T(e||s.message||u("errors.generic")),void A({hasFrontEndValidationPassed:!0,cardRegistrationId:n.id})}const{authentication_redirect_url:a,credit_card:o,authentication_action:l}=s;if(!a)return l?(O({uiState:Ne.Pending,action:tS(l)}),void N(n.id)):void(o&&(A({hasFrontEndValidationPassed:!0,cardRegistrationId:n.id}),r(Ij(o))));(0,ls.mZ)(a)}async function W(e){e.isSingleUse&&R===Ik.NotShown?(i.entityType===mj.Transaction&&i.entityId&&h(nn({screen:$t.SaveCreditCardReminder,transactionId:i.entityId})),(0,Bn.D$)(uk,"true"),D(Ik.Shown)):await G(e)}const X=(0,m.useCallback)((e=>{T(e||u("errors.generic")),O({uiState:Ne.Failure})}),[u]);return I?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Lg,{children:(0,z.jsx)("div",{className:"u-position-relative",children:(0,z.jsx)(th.RV,{...y,children:(0,z.jsxs)("form",{onSubmit:_(W,H),children:[(0,z.jsxs)(gt.Z,{children:[(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{}),children:[(0,z.jsx)(xt.Z,{text:u("header.title"),type:xt.Z.Type.Heading}),(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-row u-align-items-center",children:[(0,z.jsx)(xt.Z,{text:u("header.subtitle"),theme:"muted"}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(ht.Z,{name:"lock",size:ht.Z.Size.Small,color:ht.Z.Color.GreyscaleLevel3,testId:"cc-form-lock-icon"})]}),(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),children:[(0,z.jsx)(ht.Z,{name:"payments/mastercard",size:ht.Z.Size.Medium,testId:"cc-form-master-icon"}),(0,z.jsx)(ht.Z,{name:"payments/visa",size:ht.Z.Size.Medium,testId:"cc-form-visa-icon"}),(0,z.jsx)(ht.Z,{name:"payments/discover",size:ht.Z.Size.Medium,testId:"cc-form-discover-icon"})]})]}),(0,z.jsx)(x.Z,{})]}),P?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{theme:"warning",styling:gt.Z.Styling.Wide,body:P}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})]}):null,function(){if(!I)return null;const e=I.requiredFields.includes(dj.PostalCode);return(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),children:[(0,z.jsx)(g.Z,{children:(0,z.jsx)(gt.Z,{children:(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),children:[(0,z.jsx)(qC,{shouldFocus:!f,onBlur:q(BC.Name)}),(0,z.jsx)(HC,{shouldFocus:!!f,cardConfigs:I.configuration,onConfigMatched:w,onBlur:q(BC.CardNumber)}),(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-row",children:[(0,z.jsx)("div",{className:"credit-card-form__expiry",children:(0,z.jsx)(WC,{onBlur:q(BC.ExpirationDate)})}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large,orientation:x.Z.Orientation.Vertical}),(0,z.jsx)("div",{className:"credit-card-form__cvc",children:(0,z.jsx)(XC,{config:k,masked:B,onInfoIconClick:V,onBlur:q(BC.CVC)})})]}),e&&(0,z.jsx)(YC,{onBlur:q(BC.PostalCode)})]})})}),l&&(0,z.jsx)(KC,{})]})}()]}),(0,z.jsx)(Sk,{show:R===Ik.Shown,transactionId:i.entityId,onConfirm:_((async function(){S(BC.IsSingleUse,!1),await G(j())}),H),onCancel:_((async function(){await G(j())}),H)})]})})})}),(0,z.jsx)(th.RV,{...y,children:(0,z.jsx)("form",{onSubmit:_(W,H),children:(0,z.jsxs)(gt.Z,{children:[function(){const e=b.isSubmitting||E.uiState===Ne.Pending;return(0,z.jsx)(ic.I,{disabled:e,isLoading:e,type:ic.I.Type.Submit,styling:ic.I.Styling.Filled,text:a||u("actions.submit"),testId:"credit-card-form--submit-button"})}(),(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),s?(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,text:u("actions.cancel"),onClick:s}):null]})})}),(0,z.jsx)(jk,{registrationId:F,initialAuthAction:E.action,onSuccess:r,onFailure:X})]}):(0,z.jsx)(Mp,{styling:Mp.Styling.Wide,testId:"credit-card-form--loader"})},kk=e=>{let{source:t,show:i,allowSingleUse:n,submitActionText:s,trackingTargetDetails:r,errorMessage:a,onCreditCardAddSuccess:o,onBack:l,onClose:c,onTrackableFieldChange:d}=e;const u=U("credit_card_add.modal");return(0,z.jsx)(cp.Z,{show:i,hasScrollableContent:!0,testId:"credit-card-form-modal",children:(0,z.jsxs)("div",{className:"u-ui-padding-regular u-fill-width",children:[(0,z.jsx)(Pm.Z,{body:u("title"),right:c&&(0,z.jsx)(ic.I,{inline:!0,deprecatedIconName:"x",styling:ic.I.Styling.Flat,onClick:c,testId:"close-credit-card-form-modal"})}),(0,z.jsx)(Lg,{children:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,children:(0,z.jsx)(Ck,{errorMessage:a,source:t,allowSingleUse:n,submitActionText:s,onSuccess:function(e){o(e)},onCancel:l,onTrackableFieldChange:d,trackingTargetDetails:r})})})]})})},wk=e=>{let{show:t,onBack:i,orderId:n,orderType:s,onSuccess:r,addCardSourceParams:a,isCardAddError:o=!1}=e;const l=U("credit_card_add.threeds2.errors"),c=(0,p.v9)(W),d=(0,p.v9)(Ht),u=o?l("redirect_return_error"):void 0;return DC({shouldTrack:t,orderId:n,orderType:s,screen:$t.CreditCardAdd}),c&&n?(0,z.jsx)(kk,{show:t,allowSingleUse:!0,errorMessage:u,source:Zj({orderId:n,userId:c.id,page:d,...a}),trackingTargetDetails:{service_order_id:n,type:s},onCreditCardAddSuccess:r,onBack:i}):null},Pk=e=>{var t;let{onError:i,onCancel:n,onAuthSubmitted:s}=e;const r=(0,p.v9)(IC),a=(0,p.v9)(RC),[o,l]=(0,m.useState)(!0),c=null===(t=r.embedded)||void 0===t?void 0:t.authAction;return c&&a?(0,z.jsxs)("div",{className:"threeds2__challenge-modal",children:[(0,z.jsx)(Pm.Z,{right:(0,z.jsx)(ic.I,{inline:!0,deprecatedIconName:"x",styling:ic.I.Styling.Flat,testId:"extra-service-payment-auth-modal--close",onClick:n})}),o?(0,z.jsx)("div",{className:"threeds2__extra-service-loader","data-testid":"3ds-loader",children:(0,z.jsx)(Dp.Z,{size:Dp.Z.Size.X2Large})}):null,(0,z.jsx)(bk,{authAction:c,threeDS2Config:a,onInputRequested:function(){l(!1)},onContinue:s,onError:i})]}):null},zk=e=>{let{show:t,onError:i,onCancel:n,onAuthSubmitted:s}=e;return(0,z.jsx)(cp.Z,{show:t,children:(0,z.jsx)(Pk,{onAuthSubmitted:s,onCancel:n,onError:i})})},Tk=jt.L7,Fk=5*jt.L7,Nk=[Oi.Failure,Oi.Success],Lk=e=>{var t;let{show:i,orderId:n,orderType:s,orderStatus:r,errorMessage:a,orderPayable:o,onContinue:l}=e;const c=(0,O.Z)(),{track:d}=vi(),u=(0,p.v9)(Nc),g=U("extra_services.checkout.order_status_modal.".concat(s)),h=U("extra_services.checkout.order_status_modal.common"),f=(null===(t=Xn({shouldTrackExpose:i,abTestName:"vas_pending_state"}))||void 0===t?void 0:t.variant)||"off",y="off"!==f,v=Li[f],_=(e=>{let{start:t,duration:i}=e;const n=(0,m.useRef)(null),s=(0,m.useRef)(null),[r,a]=(0,m.useState)({state:"idle"}),o=(0,m.useCallback)((()=>{a((e=>{if(!i)return e;const t="inProgress"===e.state?e.remainingTime:i;return{remainingTime:t-Tk,state:t>Tk?"inProgress":"over"}}))}),[i]),l=(0,m.useCallback)((()=>{n.current&&(clearInterval(n.current),n.current=null)}),[]),c=(0,m.useCallback)((()=>{n.current||(n.current=setInterval(o,Tk))}),[o]),d=(0,m.useCallback)((()=>{s.current&&(clearTimeout(s.current),s.current=null)}),[]),u=(0,m.useCallback)((()=>{s.current||(s.current=setTimeout(c,Fk))}),[c]);return(0,m.useEffect)((()=>(t&&i?u():(l(),d(),a({state:"idle"})),()=>{l(),d(),a({state:"idle"})})),[t,i,l,c,u,d]),(0,m.useEffect)((()=>{"inProgress"!==r.state&&l()}),[l,r.state]),r})({start:i&&y&&r===Oi.Processing,duration:v});DC({orderId:n,orderType:s,screen:$t.ExtraServicePendingPaymentModal,shouldTrack:i&&"inProgress"===_.state});const b=(0,m.useMemo)((()=>{if(!y)return null;if(r===Oi.Processing&&"idle"!==_.state){const e=c.formatDate(new Date(v),{second:"2-digit"});return{title:h("long_processing.title"),action:h("long_processing.action"),explanation:"inProgress"===_.state?h("long_processing.explanation.countdown",{countdownDuration:e}):h("long_processing.explanation.continue_waiting")}}if(r===Oi.Failure){const e={"help-center":e=>(0,z.jsx)(_p,{type:bp.PaymentFailed,accessChannel:Be.Si.ProductLink,render:t=>(0,z.jsx)("a",{href:t,target:"_blank",rel:"noreferrer","data-testid":"failed-order-explanation-faq-link",children:e})})};return{title:h("".concat(r,".title")),explanation:h("".concat(r,".explanation"),e),action:h("".concat(r,".action"))}}return null}),[c,r,_.state,h,v,y]);function j(){y&&"inProgress"!==_.state&&d(Ri({screen:$t.ExtraServicePendingPaymentModal,target:qm.ExtraServicePendingPaymentTryAgain,targetDetails:JSON.stringify({type:s,service_order_id:n})})),l()}if(r===Oi.Idle)return null;const S=o&&Ua(o,u);return(0,z.jsx)(cp.Z,{show:i,testId:"extra-service-order-status-modal",children:(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center",children:function(){switch(r){case Oi.Success:return(0,z.jsx)(ht.Z,{name:"check-circle-filled",testId:"extra-service-order-success-icon",color:ht.Z.Color.Success,size:ht.Z.Size.Large});case Oi.Failure:return(0,z.jsx)(ht.Z,{name:"cancel-circle-filled",testId:"extra-service-order-failure-icon",color:ht.Z.Color.Warning,size:ht.Z.Size.Large});case Oi.Processing:default:return(0,z.jsx)(Dp.Z,{testId:"extra-service-order-confirmation-loader",size:Dp.Z.Size.XLarge})}}()}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(xt.Z,{text:(null==b?void 0:b.title)||g("".concat(r,".title"),{orderPayable:S}),alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent,type:xt.Z.Type.Heading}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:a||(null==b?void 0:b.explanation)||g("".concat(r,".explanation")),alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),function(){const e=y&&r===Oi.Processing&&"idle"!==_.state;return Nk.includes(r)||e?(0,z.jsx)(ic.I,{disabled:e&&"over"!==_.state,text:(null==b?void 0:b.action)||g("".concat(r,".action")),styling:ic.I.Styling.Filled,onClick:j,testId:"continue-button"}):null}(),function(){if("idle"===_.state)return null;if(r!==Oi.Processing)return null;const e="inProgress"===_.state?c.formatDate(new Date(_.remainingTime),{minute:"2-digit",second:"2-digit"}):null,t="inProgress"===_.state?h("long_processing.bottom_note.countdown",{countdown:e}):h("long_processing.bottom_note.continue_waiting");return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:t,type:xt.Z.Type.Caption,width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center})]})}()]})})};var Ek;!function(e){e.BlikCode="blikCode"}(Ek||(Ek={}));const Ok=e=>{let{show:t,onCancel:i,trackingDetails:n,onInputConfirmed:s}=e;const{track:r}=vi(),a=U("blik_direct_payment_method.code_input_modal"),{reset:o,register:l,formState:c,getValues:d,setValue:u,handleSubmit:p}=(0,th.cI)({mode:"onChange",defaultValues:{[Ek.BlikCode]:""}}),{isValid:g}=c;return(0,m.useEffect)((()=>{var e;t&&r(nn({screen:$t.BlikCodeRequest,transactionId:null!==(e=null==n?void 0:n.transactionId)&&void 0!==e?e:null}))}),[t,r,n]),(0,z.jsx)(cp.Z,{show:t,children:(0,z.jsxs)(gt.Z,{children:[(0,z.jsxs)("div",{className:"u-text-center",children:[(0,z.jsx)(ht.Z,{name:"blik",size:ht.Z.Size.XLarge}),(0,z.jsx)(x.Z,{size:x.Z.Size.XSmall}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,alignment:xt.Z.Alignment.Center,text:a("title")}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{html:!0,type:xt.Z.Type.Body,text:a("description")})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(fb.M,{...l(Ek.BlikCode,{required:!0,minLength:6,maxLength:6,onChange:e=>{const t=e.target.value;u(Ek.BlikCode,t.substring(0,6))}}),type:fb.M.Type.Number,inputMode:ag.Decimal,styling:fb.M.Styling.Tight,placeholder:a("placeholder"),uncontrolled:!0}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(ic.I,{disabled:!g,type:ic.I.Type.Submit,styling:ic.I.Styling.Filled,text:a("actions.complete_purchase"),onClick:p((()=>{const e=d()[Ek.BlikCode];o(),s(e),(()=>{const e=null!=n&&n.transactionId?JSON.stringify({transaction_id:n.transactionId}):null;r(Ri({targetDetails:e,screen:$t.BlikCodeRequest,target:qm.PayWithBlikCode}))})()})),testId:"blik-code-input-modal-submit-button"}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,text:a("actions.cancel"),onClick:()=>{o(),i()}})]})})},Rk=(e,t)=>{const{relativeUrl:i,replaceHistoryState:n,urlQuery:s}=xc(),r=(0,m.useRef)(t.onSuccess),a=(0,m.useRef)(t.onFailure),o=(0,m.useRef)(t.onNoResult),l=(0,m.useRef)(s);r.current=t.onSuccess,a.current=t.onFailure,o.current=t.onNoResult,l.current=s,(0,m.useEffect)((()=>{const{cardId:t,orderId:s,cardAddResult:c}=((e,t)=>({...yj(e),orderId:fj(e,t)}))(l.current,e);var d;c&&s?(c===uj.Success&&t?r.current({cardId:t,orderId:s}):c===uj.Fail&&a.current({orderId:s}),n(((e,t)=>(0,ys.Sd)(e,t,["card_id","card_add_result","push_up_order_id","external_card_code","closet_promotion_order_id","direct_donation_order_id","featured_collection_order_id","return_shipment_order_id"]))(i,l.current))):null===(d=o.current)||void 0===d||d.call(o)}),[e,i,n])},Dk={payInMethods:{creditCards:[],payInMethods:[],walletBalance:null,selectedPayInMethod:null,uiState:Ne.Idle},orderPayment:{configuration:null,status:Oi.Idle,auth:{embedded:null,payInRedirectUrl:null},error:{isKycConfirmationNeeded:!1}}},Ak=(0,ad.oM)({name:yC,initialState:Dk,reducers:{triggerPaymentAuthWithRedirect:(e,t)=>{e.orderPayment.auth.payInRedirectUrl=t.payload.payInRedirectUrl},triggerEmbeddedPaymentAuth:(e,t)=>{e.orderPayment.auth.embedded=t.payload},setErrorMessage:(e,t)=>{e.errorMessage=t.payload.errorMessage},getCreditCardSuccess:(e,t)=>{e.payInMethods.creditCards.push(t.payload.creditCard)},addCreditCardSuccess:(e,t)=>{const i=t.payload.creditCard,n=e.payInMethods.creditCards.findIndex((e=>{let{id:t}=e;return t===i.id}));-1!==n?e.payInMethods.creditCards[n]=i:e.payInMethods.creditCards.push(i)},cancelOrderPaymentAuth:e=>{e.orderPayment.status=Oi.Idle,e.orderPayment.auth={embedded:null,payInRedirectUrl:null},e.orderPayment.error={isKycConfirmationNeeded:!1}},setSelectedPayInMethod:(e,t)=>{const{creditCardId:i,selectedPayInMethodId:n}=t.payload;e.payInMethods.selectedPayInMethod={creditCardId:i,id:n}},getPayInMethodsRequest:e=>{e.payInMethods.uiState=Ne.Pending},getPayInMethodsFailure:e=>{e.payInMethods.uiState=Ne.Failure},getPayInMethodsSuccess:(e,t)=>{e.payInMethods.uiState=Ne.Success,e.payInMethods.creditCards=t.payload.creditCards,e.payInMethods.payInMethods=t.payload.payInMethods,e.payInMethods.walletBalance=t.payload.walletBalance},fetchConfigurationFailure:(e,t)=>{e.orderPayment.configuration=null,e.orderPayment.status=Oi.Failure,e.orderPayment.error.message=t.payload.errorMessage},fetchConfigurationSuccess:(e,t)=>{e.orderPayment.configuration=t.payload.configuration},setIsKycConfirmationNeeded:(e,t)=>{e.orderPayment.error.isKycConfirmationNeeded=t.payload.isNeeded},confirmOrderPaymentRequest:e=>{e.orderPayment.status=Oi.Processing,e.orderPayment.error={isKycConfirmationNeeded:!1}},confirmOrderPaymentSuccess:e=>{e.orderPayment.status=Oi.Success,e.orderPayment.auth={embedded:null,payInRedirectUrl:null},e.orderPayment.error={isKycConfirmationNeeded:!1}},setOrderPaymentErrorMessage:(e,t)=>{e.orderPayment.status=Oi.Failure,e.orderPayment.auth={embedded:null,payInRedirectUrl:null},e.orderPayment.error.message=t.payload.errorMessage},updateOrderPaymentDataRequest:e=>{e.orderPayment.auth={embedded:null,payInRedirectUrl:null},e.orderPayment.error={isKycConfirmationNeeded:!1}}}}),{actions:Mk}=Ak,Uk={[yC]:Ak.reducer},Bk=(Ak.reducer,e=>{let{show:t,onBack:i,orderId:n,orderType:s,entityType:r,orderPayable:a,onCheckoutFinish:o,addCardSourceParams:l,orderConfirmationModal:c,onInitStartAfterCardAuth:d,isOrderFree:u=!1,shouldSelectPaymentMethodFirst:g=!0}=e;const h=(0,p.I0)(),{track:x}=vi(),[f,y]=(0,m.useState)(null),v=(0,p.v9)(kC),_=(0,p.v9)(CC),b=(0,p.v9)(IC),j=(0,p.v9)(FC),S=(0,p.v9)(LC),Z=(0,p.v9)((e=>NC(e,null==a?void 0:a.amount))),I=(0,p.v9)((e=>EC(e,null==a?void 0:a.amount))),[C,k]=(0,m.useState)(Ei.None);Xn({abTestName:"trustly_open_banking",shouldTrackExpose:C===Ei.OrderConfirmation}),DC({shouldTrack:C===Ei.OrderConfirmation,orderId:n,orderType:s,screen:$t.Checkout}),(0,m.useEffect)((()=>{h(Mk.getPayInMethodsRequest())}),[h]),Rk(s,{onSuccess:e=>{d(e.orderId),y({isError:!1,cardId:e.cardId})},onFailure:e=>{d(e.orderId),y({isError:!0})}});const w=(0,m.useCallback)(((e,t)=>{h(Mk.setSelectedPayInMethod({creditCardId:t,selectedPayInMethodId:e.id})),k(Ei.OrderConfirmation)}),[h,k]);(0,m.useEffect)((()=>{t?null!=f&&f.cardId&&S?w(S,f.cardId):null!=f&&f.isError?k(Ei.CreditCardForm):k(!g||Z||u?Ei.OrderConfirmation:Ei.PayInMethodSelection):k(Ei.None)}),[t,n,h,u,f,Z,S,g,w]),(0,m.useEffect)((()=>{!function(){const{embedded:e,payInRedirectUrl:i}=b;t&&C!==Ei.None&&(e?k(Ei.PaymentAuth):i&&(0,ls.ru)(i))}()}),[t,C,b,k]);const P=e=>{n&&(x(Ri({target:qm.CheckoutPayButton,targetDetails:JSON.stringify({valid:!0,service_order_id:n,type:Fi[s],payment_method:(null==Z?void 0:Z.code.toLowerCase())||null})})),!I||e?(h(Mk.confirmOrderPaymentRequest({orderId:n,blikCode:e,orderType:s,entityType:r,selectedCreditCardId:null==j?void 0:j.id,selectedPaymentMethodId:null==Z?void 0:Z.id})),k(Ei.OrderStatus)):k(Ei.BlikCodeInput))};function T(){k(Ei.OrderConfirmation)}function F(){k(Ei.PayInMethodSelection),y(null)}function N(){k(Ei.None),h(Mk.cancelOrderPaymentAuth()),o(_===Oi.Success)}return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(AC,{show:C===Ei.PayInMethodSelection,orderId:n,orderType:s,orderPayable:a,selectedCreditCardId:null==j?void 0:j.id,selectedPayInMethodId:null==Z?void 0:Z.id,onBack:i,onCancel:N,onAddCreditCard:function(){k(Ei.CreditCardForm)},onConfirm:w}),(0,z.jsx)(wk,{show:C===Ei.CreditCardForm,orderId:n,orderType:s,isCardAddError:null==f?void 0:f.isError,addCardSourceParams:l,onSuccess:function(e){S&&(h(Mk.addCreditCardSuccess({creditCard:e})),w(S,e.id))},onBack:F}),(0,z.jsx)(zk,{show:C===Ei.PaymentAuth,onError:function(e){h(Mk.setOrderPaymentErrorMessage({errorMessage:e})),k(Ei.OrderStatus)},onCancel:N,onAuthSubmitted:function(e){b.embedded&&(h(Mk.updateOrderPaymentDataRequest({state:e,paymentId:b.embedded.paymentId})),k(Ei.OrderStatus))}}),(0,z.jsx)(aC,{show:C===Ei.SalesTaxInfo,messageType:"extra_service",onClose:T}),(0,z.jsx)(Ok,{show:C===Ei.BlikCodeInput,onInputConfirmed:e=>P(e),onCancel:T}),(0,z.jsx)(Lk,{show:C===Ei.OrderStatus,orderId:n,orderType:s,orderStatus:_,orderPayable:a,errorMessage:v,onContinue:N}),c({show:C===Ei.OrderConfirmation,onBack:i,onConfirmOrder:()=>P(),onShowSalesTaxModal:function(){k(Ei.SalesTaxInfo)},onPaymentMethodSelect:F})]})}),qk=e=>{let{id:t,status:i,pay_in_redirect_url:n,failure_reason:s}=e;return{id:t,status:i,payInRedirectUrl:n,failureReason:s}},Vk=e=>{switch(e){case wi.Balance:return Pi.DirectDonationOrder;case wi.Donate:return Pi.WebviewDirectDonationOrder;case wi.MessageList:case wi.ViewIssueDetails:return Pi.MsgThreadReturnLabelOrder;default:return Pi.Unknown}},Hk=e=>{let{isLoading:t=!1,error:i,walletBalance:n,activePayInMethod:s,selectedCreditCard:r,onPaymentMethodSelect:a}=e;const o=U("payment_method_selection"),l=(0,p.v9)(Nc);function c(){return(0,z.jsx)(ht.Z,{name:"pencil",color:ht.Z.Color.GreyscaleLevel3,testId:"extra-service-active-pay-in-method-pencil-icon"})}return t?(0,z.jsx)(Mp,{testId:"extra-service-active-pay-in-method-loader"}):r?(0,z.jsx)(uC,{card:r,clickableType:dC.AlwaysClickable,onClick:a,suffix:c()}):s?(0,z.jsx)(hC,{body:function(){if((null==s?void 0:s.code)===iv.Trustly)return s.note;if((null==s?void 0:s.code)===iv.Wallet&&n){const{availableAmount:e}=n;return(0,z.jsx)(xt.Z,{text:o("notes.wallet",{balance:Ua(e,l)})})}return null}(),payInMethod:s,onClick:a,suffix:c()}):(0,z.jsx)(gt.Z,{title:o("choose_payment_method"),suffix:(0,z.jsx)(ht.Z,{name:"plus",aria:{"aria-hidden":"true"}}),validation:i&&(0,z.jsx)(zm.Z,{text:i,theme:"warning"}),type:gt.Z.Type.Navigating,styling:gt.Z.Styling.Wide,testId:"extra-service-active-pay-in-method-choose-payment-method",onClick:a})},Gk=e=>{let{show:t,onBack:i,onConfirmOrder:n,onPaymentMethodSelect:s}=e;const r=(0,p.I0)(),{track:a}=vi(),o=U("conversation.actions.return_shipment_order_confirmation.modal"),l=U("payment_method_selection.errors"),[c,d]=(0,m.useState)(),u=(0,p.v9)(ZC),g=(0,p.v9)(FC),f=(0,p.v9)(CC),y=(0,p.v9)(hy),v=(0,p.v9)(dy),_=(0,p.v9)((e=>NC(e,null==y?void 0:y.payableAmount.toString()))),b=(0,p.v9)(Nc),j=(0,p.v9)(um),S=!!_;return(0,m.useEffect)((()=>{if(!t)return;const e=JSON.stringify({transaction_id:j});a(Gi({screen:$t.ReturnLabeOrderConfirm,target:cb.ReturnOrder,targetDetails:e}))}),[t,a,j]),(0,m.useEffect)((()=>{S&&c&&d(void 0)}),[S,c]),(0,z.jsx)(cp.Z,{show:t,hasScrollableContent:!0,children:(0,z.jsxs)("div",{className:"u-fill-width",children:[(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,children:(0,z.jsx)(Pm.Z,{body:o("title"),testId:"return-shipment-confirmation-modal-title",right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,theme:"amplified",deprecatedIconName:"x",inline:!0,onClick:function(){var e;e=Fy.None,r(Ey.setActiveModal({modal:e})),r(Ey.cancelCheckout())},testId:"return-shipment-order-confirmation-modal-close-button"})})}),(0,z.jsx)("div",{className:"u-padding-horizontal-medium",children:(0,z.jsx)(Kp,{screen:Hp.VASCheckout})}),(0,z.jsx)(h.Z,{})]}),(0,z.jsxs)(Lg,{children:[y?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(gt.Z,{children:[y?(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,suffix:Ma(y.totalAmount,{locale:b,currency:y.currency}),children:(0,z.jsx)(xt.Z,{text:o("payment_title")})}):null,y?(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,title:o(v?"total_converted":"total"),suffix:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:Ma(y.payableAmount,{locale:b,currency:y.currency})})}):null,v?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("span",{onClick:()=>{r(Ey.setActiveModal({modal:Fy.ReturnCurrencyConversionModal}))},children:(0,z.jsx)(xt.Z,{clickable:!0,theme:"inverse",type:xt.Z.Type.Caption,text:o("currency_conversion_details.learn_more_link")})}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:o("currency_conversion_details.learn_more_about")})]}):null]}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(Hk,{error:c,walletBalance:u,selectedCreditCard:g,activePayInMethod:_,onPaymentMethodSelect:s}),(0,z.jsx)(h.Z,{})]}):null,(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(ic.I,{isLoading:f===Oi.Processing,text:o("actions.pay"),styling:ic.I.Styling.Filled,onClick:function(){S?n():d(l("not_selected_payment_method"))},testId:"return-shipment-order-confirmation--confirm-button"}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,text:o("actions.back"),onClick:i})]})]})]})})},Wk=e=>{let{transactionId:t,onCheckoutSuccess:i}=e;const n=(0,p.I0)(),s=(0,p.v9)(hy),r=(0,p.v9)(Hd),a=(0,p.v9)(au),o=(0,p.v9)(Ht),l=(0,p.v9)(xy),c=Number(r),d=Number(a),u=o===$t.Unknown?$t.ViewIssueDetails:o;(0,m.useEffect)((()=>{t&&n(MZ.fetchSystemConfigurationRequest())}),[n,t]),(0,m.useEffect)((()=>{n(Mk.getPayInMethodsRequest())}),[n]);const g=e=>{n(Ey.setActiveModal({modal:e}))};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Bk,{show:l===Ei.Checkout,orderType:Ti.ReturnLabel,isOrderFree:!1,orderId:Number(null==s?void 0:s.id),orderPayable:s&&{currencyCode:s.currency,amount:s.payableAmount.toString()},addCardSourceParams:{conversationId:c,complaintId:d,type:Ti.ReturnLabel},onBack:()=>{g(Fy.RequestReturnModal),n(Ey.cancelCheckout())},onCheckoutFinish:e=>{g(Ei.None),e&&i()},orderConfirmationModal:Gk,onInitStartAfterCardAuth:e=>{n(Ey.getReturnLabelOrderRequest({orderId:e})),g(Ei.Checkout)},entityType:Vk(u)}),(0,z.jsx)(mb,{isOpen:l===Fy.ReturnCurrencyConversionModal,onClose:(h=Ei.Checkout,()=>n(Ey.setActiveModal({modal:h})))})]});var h},Xk=e=>{let{primary:t,title:i,inverse:n,theme:s,size:r,complaintTransactionId:a,url:o,text:l}=e;const c=(0,p.I0)(),d=(0,p.v9)(qd),u=(0,p.v9)(ry),g=(0,p.v9)(xy),h=d||a,x=i||l;(0,m.useEffect)((()=>()=>{c(Ey.setActiveModal({modal:Ei.None}))}),[c]);const f=()=>{c(Ey.setActiveModal({modal:Fy.None}))},y=()=>{var e,t;h&&u&&u.pickupPointDetails&&u.userAddress&&u.userAddress.id&&u.packageTypeId&&(c(Ey.prepareReturnLabelOrderRequest({transactionId:h.toString(),pickupPointCode:null===(e=u.pickupPointDetails)||void 0===e?void 0:e.pickupPointCode,packageTypeId:u.packageTypeId,addressId:null===(t=u.userAddress)||void 0===t?void 0:t.id.toString()})),c(Ey.setActiveModal({modal:Ei.Checkout})))},v=()=>{c(Ey.setActiveModal({modal:Ei.None}))};return h?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Bx,{text:x,primary:t,size:r||ic.I.Size.Medium,theme:s,inverse:n,onClick:()=>{c(Ey.setActiveModal({modal:Fy.RequestReturnModal}))},testId:"request-return-action-button"}),(()=>{switch(g){case Fy.RequestReturnModal:return(0,z.jsx)(rC,{transactionId:h,url:o,isOpen:!0,onClose:f,onProceedToCheckout:y});case Ei.Checkout:case Fy.ReturnCurrencyConversionModal:return(0,z.jsx)(Wk,{transactionId:h,onCheckoutSuccess:v});default:return null}})()]}):null},Yk=e=>{let{primary:t,title:i,inverse:n,theme:s,size:r}=e;const a=(0,p.v9)(X),o=(0,p.v9)(Hd);return(0,z.jsx)(Bx,{primary:t,text:i,size:r,inverse:n,theme:s,onClick:async function(){a&&o&&(await(0,Fe.XSO)(o),(0,ls.sl)())}})},Kk=e=>{let{title:t,primary:i,size:n,theme:s,inverse:r}=e;const a=(0,p.v9)(X),o=(0,p.v9)(Hd);return(0,z.jsx)(Bx,{primary:i,text:t,size:n,inverse:r,theme:s,onClick:async function(){a&&o&&(await(0,Fe.Xcr)(o),(0,ls.sl)())}})},Jk=e=>{let{transactionId:t,isOpen:i,onClose:n}=e;const s=(0,p.I0)(),r=U("conversation.view_delivery_instructions.modal"),{track:a}=vi(),o=(0,p.v9)(lm),l=(0,p.v9)(mu),c=(0,p.v9)(Hu),d=(0,p.v9)(Gu);(0,m.useEffect)((()=>{t&&s(Dm.fetchShippingInstructionsRequest({transactionId:t}))}),[s,t]);const u=()=>n();return t?(0,z.jsxs)(cp.Z,{show:i,closeOnOverlay:!0,children:[(0,z.jsx)(Pm.Z,{body:r("title"),right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,onClick:u,deprecatedIconName:"x",inline:!0,testId:"delivery-instructions-close"})}),(0,z.jsx)(h.Z,{}),(0,z.jsx)("div",{className:"modal-contained-content",children:(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{type:yt.Z.Type.Stacked,text:r("label")}),(0,z.jsx)(gt.Z,{prefix:(0,z.jsx)(Kl.U,{src:null==o?void 0:o.carrier.iconUrl,size:Kl.U.Size.Large,styling:Kl.U.Styling.Rounded}),title:(0,z.jsx)(xt.Z,{text:null==o?void 0:o.carrier.name,type:xt.Z.Type.Title,theme:"amplified"}),body:(0,z.jsx)(xt.Z,{text:r("body")})})]}),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{type:yt.Z.Type.Stacked,text:r("instructions_field_label")}),(0,z.jsx)(gt.Z,{onClick:e=>{if(!(e.target instanceof HTMLAnchorElement))return;const i={transaction_id:t,url:e.target.href,transaction_status:l,shipment_id:c,shipment_status:d};a(Ri({screen:$t.DeliveryInstructions,target:qm.Hyperlink,targetDetails:JSON.stringify(i)}))},children:(0,z.jsx)(xt.Z,{html:!0,text:null==o?void 0:o.instructions})})]}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(ic.I,{onClick:u,styling:ic.I.Styling.Filled,text:r("actions.got_it")})})]})})]}):null},Qk=e=>{let{action:t,primary:i,title:n,inverse:s,theme:r,size:a}=e;const{track:o}=vi(),l=(0,p.v9)(qd),c=(0,p.v9)(mu),d=(0,p.v9)(Hu),u=(0,p.v9)(Gu),[g,h]=(0,m.useState)(!1),x=()=>{(()=>{const e={transaction_id:l,transaction_status:c,shipment_id:d,shipment_status:u};o(Ri({target:qm.ViewDeliveryInstructions,targetDetails:JSON.stringify(e)}))})(),l&&o(rn({screen:$t.DeliveryInstructions,transactionId:l})),h(!0)};return l?(0,z.jsx)(zI,{action:t,primary:i,size:a,theme:r,inverse:s,onSuccess:x,title:n,children:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Bx,{text:n,primary:i,size:a,theme:r,inverse:s,onClick:x,testId:"conversation-actions-view-delivery-instructions"}),(0,z.jsx)(Jk,{isOpen:g,onClose:()=>h(!1),transactionId:l})]})}):null};let $k;!function(e){e.Off="off",e.On="on",e.A="a",e.B="b",e.C="c",e.D="d"}($k||($k={}));const ew=e=>{let{isOpen:t,onClose:i,onDropOffPointModalOpen:n}=e;const s=U("conversation.digital_label.modal"),r=(0,p.I0)(),{track:a}=vi(),o=(0,p.v9)(qd),l=(0,p.v9)(Pu),c=(0,p.v9)(Vn("seller_drop_off_map")),d=(null==c?void 0:c.variant)===$k.A||(null==c?void 0:c.variant)===$k.B;(0,m.useEffect)((()=>{o&&r(ig({transactionId:o}))}),[r,o]),(0,m.useEffect)((()=>{if(!t||!o)return;const e={screen:$t.DigitalLabel,transactionId:o};a(rn(e))}),[a,t,o]);return(0,z.jsxs)(cp.Z,{show:t,testId:"digital-label-modal",children:[(0,z.jsx)(Pm.Z,{body:null==l?void 0:l.digitalLabelTitle,right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,onClick:i,deprecatedIconName:"x",testId:"close-qr-code-modal",inline:!0})}),(0,z.jsx)(h.Z,{}),(0,z.jsxs)("div",{className:"modal-contained-content",children:[(0,z.jsx)(gt.Z,{children:(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column u-align-items-center",children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:s("title"),alignment:xt.Z.Alignment.Center}),(0,z.jsxs)("div",{className:"digital-label-modal__image",children:[(0,z.jsx)("span",{onClick:d?e=>{e.preventDefault(),r(V_.fetchNearbyDropOffPointsRequest({})),n()}:e=>{if(!(e.target instanceof HTMLAnchorElement))return;const t=e.target.href,i=JSON.stringify({transaction_id:o,url:t});a(Ri({target:qm.Hyperlink,screen:$t.DigitalLabel,targetDetails:i}))},children:(0,z.jsx)(xt.Z,{text:null==l?void 0:l.headerSubtitle,alignment:xt.Z.Alignment.Center,html:!0})}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(Lt.Z,{styling:Lt.Z.Styling.Tight,children:(0,z.jsx)(Kl.U,{src:null==l?void 0:l.imageUrl,scaling:Kl.U.Scaling.Cover,testId:"digital-label-modal-image"})}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]}),(null==l?void 0:l.code)&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:s("code_title"),alignment:xt.Z.Alignment.Center}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:null==l?void 0:l.code,alignment:xt.Z.Alignment.Center})]})]})}),(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[(0,z.jsx)(gt.Z,{title:s("shipping_carrier"),body:null==l?void 0:l.carrier.name,suffix:(0,z.jsx)(Kl.U,{src:null==l?void 0:l.carrier.iconUrl,size:Kl.U.Size.Medium,styling:Kl.U.Styling.Rounded})}),(0,z.jsx)(gt.Z,{title:s("order"),body:function(){if(!l)return null;const{items:e}=l;if(e.length>1){const t=e.length.toString();return(0,z.jsx)(xt.Z,{text:s("order_count",{count:t})})}return(0,z.jsx)(xt.Z,{text:e[0].name})}(),suffix:l?(0,z.jsxs)(z.Fragment,{children:[l.items.length>3&&(0,z.jsx)(Kl.U,{label:"+".concat(l.items.length-3),styling:Kl.U.Styling.Rounded,size:Kl.U.Size.Medium,scaling:Kl.U.Scaling.Cover,color:ng(Le.GreyscaleLevel4)}),l.items.map(((e,t)=>t>=3?null:(0,z.jsxs)(m.Fragment,{children:[(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(Kl.U,{src:e.imageUrl,styling:Kl.U.Styling.Rounded,size:Kl.U.Size.Medium,scaling:Kl.U.Scaling.Cover})]},e.name)))]}):null}),(0,z.jsx)(gt.Z,{title:s("recipient"),suffix:(0,z.jsx)(xt.Z,{text:(null==l?void 0:l.receiverName)&&Sc(l.receiverName,20)})}),(0,z.jsx)(gt.Z,{title:s("delivery_estimate"),suffix:(0,z.jsx)(xt.Z,{alignment:xt.Z.Alignment.Right,text:null==l?void 0:l.deliveryEstimate})}),(0,z.jsx)(gt.Z,{title:null==l?void 0:l.labelExpiresTitle,suffix:(0,z.jsx)(xt.Z,{text:(0,z.jsx)(_t.Ji,{value:null==l?void 0:l.expirationDate,year:"numeric",month:"long",day:"numeric"})})}),(0,z.jsx)(gt.Z,{clickable:!0,prefix:(0,z.jsx)(ht.Z,{name:"qr-code",color:ht.Z.Color.GreyscaleLevel3}),title:null==l?void 0:l.downloadLabelTitle,suffix:(0,z.jsx)(ht.Z,{name:"download",color:ht.Z.Color.GreyscaleLevel1}),onClick:async function(){if(!o)return;!function(){const e={transaction_id:o};a(Ri({screen:$t.DigitalLabel,target:qm.DownloadDigitalLabel,targetDetails:JSON.stringify(e)}))}();const e=await(0,Fe.Hbo)(o);"errors"in e||(e=>{let{base64Data:t,fileName:i}=e;const n="data:application/pdf;base64,".concat(t),s=document.createElement("a");s.href=n,s.download=i,s.click()})({base64Data:e.file.label,fileName:e.file.filename})}}),(0,z.jsx)(x.Z,{})]})]})]})},tw=e=>{let{primary:t,title:i,inverse:n,theme:s,size:r}=e;const{track:a}=vi(),o=(0,p.I0)(),[l,c]=(0,m.useState)(!1),[d,u]=(0,m.useState)(!1),g=(0,p.v9)(qd);return(0,m.useEffect)((()=>{d&&o(V_.fetchNearbyDropOffPointsRequest({}))}),[o,d]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Bx,{primary:t,text:i,size:r,inverse:n,theme:s,onClick:function(){!function(){const e={transaction_id:g};a(Ri({screen:$t.MessageReply,target:qm.OpenDigitalLabel,targetDetails:JSON.stringify(e)}))}(),c(!0)},testId:"open-digital-label-button"}),(0,z.jsx)(ew,{isOpen:l,onClose:function(){c(!1)},onDropOffPointModalOpen:function(){u(!0)}}),(0,z.jsx)(LZ,{isOpen:d,onClose:function(){u(!1),c(!0)}})]})};var iw=i(10192);class nw extends m.Component{constructor(){super(...arguments),function(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(this,"translate",(e=>this.props.intl.formatMessage({id:"error_state.".concat(e)})))}renderCta(){const{ctaText:e,onCtaClick:t,ctaLoading:i}=this.props;if(t)return(0,z.jsx)(ic.I,{isLoading:i,text:e||this.translate("cta"),styling:ic.I.Styling.Filled,onClick:t})}render(){const{title:e,body:t}=this.props;return(0,z.jsx)(tc.Z,{title:e||this.translate("title"),body:t||this.translate("body"),action:this.renderCta()})}}const sw=(0,iw.ZP)(nw);var rw=i(13725),aw=i(55619);const ow=e=>{let{details:t}=e;const{formatDate:i,formatTime:n}=(0,O.Z)(),s=(e,t)=>(0,z.jsxs)(z.Fragment,{children:[i(e,{year:"numeric",month:"long",day:"numeric"}),t&&", ".concat(n(e))]}),r=e=>t.note?(0,z.jsx)(xt.Z,{text:t.note,type:xt.Z.Type.Caption,theme:e?"muted":void 0,html:!0}):null;if(!t)return null;switch(t.status){case sS.Completed:return(0,z.jsx)(gt.Z,{prefix:(0,z.jsx)(Wy.Z,{name:rw.Z,color:Wy.Z.Color.Primary}),title:(0,z.jsx)(xt.Z,{text:t.title,type:xt.Z.Type.Title}),body:(0,z.jsx)(xt.Z,{text:s(t.date,t.exactDate)}),validation:r()});case sS.Pending:return(0,z.jsx)(gt.Z,{prefix:(0,z.jsx)(Wy.Z,{name:rw.Z,color:Wy.Z.Color.GreyscaleLevel4}),title:(0,z.jsx)(xt.Z,{text:t.title,type:xt.Z.Type.Title,theme:"muted"}),body:(0,z.jsx)(xt.Z,{text:s(t.date,t.exactDate),theme:"muted"}),validation:r(!0)});case sS.Failed:return(0,z.jsx)(gt.Z,{prefix:(0,z.jsx)(Wy.Z,{name:aw.Z,color:Wy.Z.Color.Warning}),title:(0,z.jsx)(xt.Z,{text:t.title,type:xt.Z.Type.Title,theme:"warning"}),body:(0,z.jsx)(xt.Z,{text:s(t.date,t.exactDate)}),validation:r()});default:return null}},lw=e=>{let{amount:t,progressDetails:i,locale:n,currency:s,labels:r}=e;return i.length?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{title:r.amount,suffix:(0,z.jsx)(xt.Z,{width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Right,type:xt.Z.Type.Body,text:Ma(t,{locale:n,currency:s})})}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{body:r.progress}),i.map(((e,t)=>(0,z.jsx)(ow,{details:e},t)))]}):null},cw="refund",dw={refund:{amount:"",currency:"",progressDetails:[],uiState:Ne.Idle}},uw=(0,ad.oM)({name:cw,initialState:dw,reducers:{getRefundRequest:e=>{e.refund.uiState=Ne.Pending},getRefundFailure:e=>{e.refund.uiState=Ne.Failure},getRefundSuccess:(e,t)=>{const{refund:i}=t.payload;e.refund={...i,uiState:Ne.Success}}}}),{actions:mw}=uw,pw={[cw]:uw.reducer},gw=(uw.reducer,e=>(e=>e[cw])(e).refund),hw=(0,B.P1)(gw,(e=>{let{uiState:t}=e;return t})),xw=(0,B.P1)(gw,(e=>{let{amount:t}=e;return t})),fw=(0,B.P1)(gw,(e=>{let{currency:t}=e;return t})),yw=(0,B.P1)(gw,(e=>{let{progressDetails:t}=e;return t})),vw=e=>{let{transactionId:t}=e;const i=(0,p.I0)(),n=U("refund"),s=(0,p.v9)(hw),r=(0,p.v9)(xw),a=(0,p.v9)(fw),o=(0,p.v9)(yw),l=(0,p.v9)(Nc),c={amount:n("refund_amount"),progress:n("refund_progress")},d=(0,m.useCallback)((()=>{i(mw.getRefundRequest({transactionId:t}))}),[i,t]);return(0,m.useEffect)((()=>{d()}),[d]),s===Ne.Pending?(0,z.jsx)(Mp,{size:Mp.Size.Large}):s===Ne.Failure?(0,z.jsx)(gt.Z,{children:(0,z.jsx)(sw,{onCtaClick:d})}):o.length?(0,z.jsx)(lw,{amount:r,progressDetails:o,locale:l,currency:a,labels:c}):null},_w=e=>{let{transactionId:t,isOpen:i,onClose:n}=e;const s=U("conversation.actions.refund_progress.modal"),{track:r}=vi();return(0,m.useEffect)((()=>{i&&r(Wi({screen:$t.RefundStatus}))}),[r,i]),(0,z.jsxs)(cp.Z,{show:i,children:[(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Pm.Z,{right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,deprecatedIconName:"x",inline:!0,onClick:n,testId:"refund-progress-modal-close-button"}),body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:s("title")})}),(0,z.jsx)(h.Z,{})]}),(0,z.jsx)(vw,{transactionId:t})]})},bw=e=>{let{primary:t,title:i,inverse:n,theme:s,size:r}=e;const a=(0,p.v9)(qd),[o,l]=(0,m.useState)(!1);return a?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Bx,{text:i,primary:t,size:r,theme:s,inverse:n,onClick:()=>l(!0),testId:"conversation-actions-refund-progress"}),(0,z.jsx)(_w,{isOpen:o,onClose:()=>l(!1),transactionId:a})]}):null},jw=e=>{let{transactionId:t,isOpen:i,onClose:n,handleShippingInstructionsTipOpen:s}=e;const r=(0,p.I0)(),a=U("conversation.shipping_instructions.modal"),o=(0,p.v9)(nu),l=(0,p.v9)(xu),c=(0,p.v9)(hu),d=(0,p.v9)(uu),u=(0,p.v9)(Nc),[g,f]=(0,m.useState)(void 0),[y,v]=(0,m.useState)("");async function _(){t&&d&&d.includes(hd.ConfirmShipmentInstructions)&&await(0,Fe.tey)(t)}function b(){v("")}return(0,m.useEffect)((()=>{t&&r(tg({transactionId:t}))}),[r,t]),(0,m.useEffect)((()=>{c===Ne.Success&&(0,ls.sl)()}),[c]),(0,z.jsx)(cp.Z,{show:i,hasScrollableContent:!0,children:(0,z.jsxs)("div",{className:"u-fill-width",children:[(0,z.jsx)(Pm.Z,{right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,onClick:function(){b(),r(Dm.deleteEnterTrackingCodeError()),f(""),n(),_()},deprecatedIconName:"x",inline:!0,testId:"instructions-close-button"}),body:a("title")}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(Lg,{children:(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[function(){if(!o)return null;const e=Ma(o.shippingPrice.amount,{currency:o.shippingPrice.currencyCode,locale:u});return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{type:yt.Z.Type.Stacked,text:a("label")}),(0,z.jsx)(gt.Z,{prefix:(0,z.jsx)(Kl.U,{src:o.carrier.iconUrl,size:Kl.U.Size.Medium,styling:Kl.U.Styling.Rounded}),suffix:(0,z.jsx)(xt.Z,{truncate:!0,text:e}),title:(0,z.jsx)(xt.Z,{text:o.carrier.name,type:xt.Z.Type.Title}),body:(0,z.jsx)(xt.Z,{html:!0,text:o.carrier.shipmentInstructions})})]})}(),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{type:yt.Z.Type.Stacked,text:a("address_field_label")}),(0,z.jsx)(gt.Z,{prefix:(0,z.jsx)(Kl.U,{src:Qe(null==o?void 0:o.receiverPhoto),size:Kl.U.Size.Medium,styling:Kl.U.Styling.Circle}),title:(0,z.jsx)(xt.Z,{text:null==o?void 0:o.receiverName,type:xt.Z.Type.Title}),body:(0,z.jsx)(xt.Z,{html:!0,text:null==o?void 0:o.receiverFullAddress})})]}),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{type:yt.Z.Type.Stacked,text:a("tracking_code_label")}),(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(fb.M,{name:"tracking_code",type:fb.M.Type.Text,styling:fb.M.Styling.Tight,suffix:(0,z.jsx)("div",{className:"u-flexbox u-align-items-center u-cursor-pointer",onClick:s,"data-testid":"instructions-info-circle",children:(0,z.jsx)(ht.Z,{name:"info-circle",color:ht.Z.Color.GreyscaleLevel4,size:ht.Z.Size.Regular})}),onChange:function(e){const{value:t}=e.currentTarget;f(t)},value:g,validation:function(){const e=y||l;return e?(0,z.jsx)(xt.Z,{text:e,theme:"warning",type:xt.Z.Type.Subtitle}):null}(),maxLength:35}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,text:a("actions.item_sent"),onClick:function(){g?(b(),r(Dm.enterTrackingCodeRequest({transactionId:t,trackingCode:g})),_()):v(a("validation_error"))},isLoading:c===Ne.Pending})]})]})]})})]})})},Sw=e=>{let{isOpen:t,onClose:i}=e;const n=U("conversation.shipping_instructions.modal.tip"),s=(0,p.v9)(pu);return(0,z.jsxs)(cp.Z,{show:t,closeOnOverlay:!0,enableCloseButton:!0,children:[(0,z.jsx)(Kl.U,{src:(()=>{switch(null==s?void 0:s.toLowerCase()){case q.Uk:return"".concat(Be.SQ,"uk.jpg");case q.De:return"".concat(Be.SQ,"de.jpg");case q.Fr:case q.Nl:case q.Be:return"".concat(Be.SQ,"fr.jpg");default:return null}})(),scaling:Kl.U.Scaling.Contain,fallbackSrc:" "}),(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(xt.Z,{text:n("body")}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,text:n("action.got_it"),onClick:i,testId:"instructions-tip-close"})]})]})},Zw=e=>{let{action:t,primary:i,title:n,inverse:s,theme:r,size:a}=e;const o=(0,p.v9)(qd),[l,c]=(0,m.useState)(!1),[d,u]=(0,m.useState)(!1),g=()=>c(!0),h=()=>c(!1);return o?(0,z.jsx)(zI,{action:t,primary:i,size:a,theme:r,inverse:s,onSuccess:g,title:n,children:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Bx,{primary:i,text:n,size:a,theme:r,inverse:s,onClick:g}),(0,z.jsx)(jw,{isOpen:l,onClose:h,transactionId:o,handleShippingInstructionsTipOpen:()=>{h(),u(!0)}}),(0,z.jsx)(Sw,{isOpen:d,onClose:()=>{g(),u(!1)}})]})}):null},Iw=e=>{let{transactionId:t,isOpen:i,onClose:n}=e;const s=(0,p.I0)(),r=U("conversation.custom_shipping_instructions.modal"),a=(0,p.v9)(Nc),o=(0,p.v9)(nu),l=(0,p.v9)(Ku),c=(0,p.v9)(yu),d=(0,p.v9)(Wt("shipment_proof_optional")),u=(0,p.v9)(Wt("shipment_proof_required")),[g,f]=(0,m.useState)(""),[y,v]=(0,m.useState)(""),[_,b]=(0,m.useState)(""),[j,S]=(0,m.useState)(Ne.Idle),Z=(0,m.createRef)();return(0,m.useEffect)((()=>{s(tg({transactionId:t}))}),[s,t]),(0,m.useEffect)((()=>{c===Ne.Success&&(0,ls.sl)()}),[s,c]),(0,z.jsx)(cp.Z,{show:i,closeOnOverlay:!0,children:(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[(0,z.jsx)(Pm.Z,{right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,onClick:function(){b(""),n(),f(""),v("")},deprecatedIconName:"x",inline:!0,testId:"close-custom-shipping-modal"}),body:r(l?"return_title":"title")}),l?l?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{type:yt.Z.Type.Stacked,text:r("label")}),(0,z.jsx)(gt.Z,{prefix:(0,z.jsx)(Kl.U,{src:l.iconUrl,size:Kl.U.Size.Medium,styling:Kl.U.Styling.Rounded}),title:(0,z.jsx)(xt.Z,{text:l.title,type:xt.Z.Type.Title}),subtitle:(0,z.jsx)(xt.Z,{text:l.subtitle})})]}):null:function(){if(!o)return null;const e=Ma(o.shippingPrice.amount,{currency:o.shippingPrice.currencyCode,locale:a});return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{type:yt.Z.Type.Stacked,text:r("label")}),(0,z.jsx)(gt.Z,{prefix:(0,z.jsx)(Kl.U,{src:o.carrier.iconUrl,size:Kl.U.Size.Medium,styling:Kl.U.Styling.Rounded}),title:(0,z.jsx)(xt.Z,{text:o.carrier.name,type:xt.Z.Type.Title}),suffix:(0,z.jsx)(xt.Z,{truncate:!0,text:e})})]})}(),o?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{type:yt.Z.Type.Stacked,text:r("address_field_label")}),(0,z.jsx)(gt.Z,{prefix:(0,z.jsx)(Kl.U,{src:Qe(o.receiverPhoto),size:Kl.U.Size.Medium,styling:Kl.U.Styling.Circle}),title:(0,z.jsx)(xt.Z,{text:o.receiverName,type:xt.Z.Type.Title}),body:(0,z.jsx)(xt.Z,{html:!0,text:o.receiverFullAddress})})]}):null,(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{type:yt.Z.Type.Stacked,text:r("shipment_receipt_label")}),(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,prefix:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("input",{ref:Z,onChange:function(e){var t;const i=null===(t=e.target.files)||void 0===t?void 0:t[0];i&&(i.size>sp?b(r("file_size_error",{file_size:rp})):async function(e){S(Ne.Pending);const t=new FormData;t.append("photo[type]","user_msg"),t.append("photo[file]",e);const i=await(0,Fe.CbZ)(t);"errors"in i?b(i.errors[0].value):(f(lt(i).tempUuid),v(e.name),S(Ne.Success))}(i))},hidden:!0,type:"file",accept:np.Images,max:1,"data-testid":"proof-file-uploader"}),(0,z.jsx)(ic.I,{text:r("actions.choose_file"),size:ic.I.Size.Small,inline:!0,theme:"muted",onClick:function(){var e;b(""),null===(e=Z.current)||void 0===e||e.click()}})]}),children:(0,z.jsx)("div",{className:"u-flexbox",children:(0,z.jsx)(xt.Z,{text:y,truncate:!0})})}),(0,z.jsx)("div",{children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,theme:"warning",text:_})}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,children:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,text:r(l?"actions.item_sent":"actions.mark_as_shipped"),isLoading:j===Ne.Pending||c===Ne.Pending,onClick:function(){g||!u?g||!d?(b(""),s(Dm.markAsShippedRequest({transactionId:t,proofPhotoUuid:g}))):s(Dm.markAsShippedRequest({transactionId:t})):b(r("validation_error"))}})})]})]})]})})},Cw=e=>{let{action:t,title:i,primary:n,size:s,theme:r,inverse:a}=e;const o=(0,p.v9)(qd),[l,c]=(0,m.useState)(!1),d=()=>c(!0);return o?(0,z.jsx)(zI,{action:t,primary:n,size:s,theme:r,inverse:a,onSuccess:d,title:i,children:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Bx,{primary:n,text:i,size:s,theme:r,inverse:a,onClick:d}),(0,z.jsx)(Iw,{isOpen:l,onClose:()=>c(!1),transactionId:o})]})}):null},kw="helpCenterFeedbackState",ww=(0,ad.oM)({name:kw,initialState:{areProblemOptionsLoading:!1,areRatingsOptionsLoading:!1,isFeedbackModalOpen:!1,isProblemsModalOpen:!1,problemOptions:[]},reducers:{fetchFeedbackDenyOptionsRequest:e=>{e.areProblemOptionsLoading=!0},fetchFeedbackDenyOptionsSuccess:(e,t)=>{e.areProblemOptionsLoading=!1,e.isProblemsModalOpen=!0,e.problemOptions=t.payload},fetchFeedbackDenyOptionsFailure:e=>{e.areProblemOptionsLoading=!1},fetchFeedbackRatingsRequest:e=>{e.areRatingsOptionsLoading=!0},fetchFeedbackRatingsSuccess:(e,t)=>{e.areRatingsOptionsLoading=!1,e.isFeedbackModalOpen=!0,e.ratings=t.payload},fetchFeedbackRatingsFailure:e=>{e.areRatingsOptionsLoading=!1},closeProblemsModal:e=>{e.isProblemsModalOpen=!1},closeFeedbackModal:e=>{e.isFeedbackModalOpen=!1}}}),{actions:Pw}=ww,zw={[kw]:ww.reducer},Tw=(ww.reducer,e=>e[kw]);function Fw(e){return Tw(e).areProblemOptionsLoading}function Nw(e){return Tw(e).areRatingsOptionsLoading}function Lw(e){return Tw(e).isProblemsModalOpen}function Ew(e){return Tw(e).isFeedbackModalOpen}function Ow(e){return Tw(e).problemOptions}function Rw(e){return Tw(e).ratings}const Dw=(0,ad.PH)("".concat(kw,"/updateFeedbackDenyOptionsRequest")),Aw=(0,ad.PH)("".concat(kw,"/confirmComplaintRequest")),Mw=(0,ad.PH)("".concat(kw,"/confirmComplaintFailure")),Uw=(0,ad.PH)("".concat(kw,"/submitFeedbackRatingRequest")),Bw=(0,ad.PH)("".concat(kw,"/submitFeedbackRatingFailure"));var qw=i(78596);function Vw(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Hw extends m.Component{constructor(){super(...arguments),Vw(this,"state",{inputValue:this.props.value||""}),Vw(this,"handleChange",(e=>{const{onChange:t,uncontrolled:i}=this.props;i||this.setState({inputValue:e.target.value||""}),t&&t(e)}))}componentDidUpdate(e){this.props.value!==e.value&&this.setState({inputValue:this.props.value||""})}render(){const{name:e,validation:t,title:i,required:n,disabled:s,minLength:r,maxLength:a,icon:o,placeholder:l,styling:c,theme:d,rows:u,maxRows:m,forwardedRef:p,uncontrolled:g,onKeyPress:h,onKeyDown:x,onFocus:f,onInputClick:v}=this.props,_=y()("c-input",{["c-input--".concat(String(c))]:void 0!==c},{["c-input--".concat(String(d))]:void 0!==d});return(0,z.jsxs)("label",{htmlFor:e,className:_,children:[i&&(0,z.jsx)("div",{className:"c-input__title",children:i}),(0,z.jsxs)("div",{className:"c-input__content",children:[(0,z.jsx)(qw.Z,{className:"c-input__value",name:e,id:dh(e),value:g?void 0:this.state.inputValue,required:n,disabled:s,minLength:r,maxLength:a,placeholder:l,onChange:this.handleChange,onClick:v,onKeyPress:h,onKeyDown:x,onFocus:f,minRows:u,ref:p,maxRows:m}),o&&(0,z.jsx)("div",{className:"c-input__icon",children:o})]}),t&&(0,z.jsx)("div",{className:"c-input__note",children:t})]})}}Vw(Hw,"defaultProps",{required:!1,disabled:!1,rows:5});const Gw=(0,m.forwardRef)(((e,t)=>(0,z.jsx)(Hw,{forwardedRef:t,...e}))),Ww=e=>{let{isOpen:t,options:i,onClose:n,onSubmit:s}=e;const[r,a]=(0,m.useState)(),[o,l]=(0,m.useState)(!1),[c,d]=(0,m.useState)(""),u=(0,m.useRef)(null),p=U("help_center_feedback");return(0,m.useEffect)((()=>{const e=i.find((e=>e.id===r&&e.hasMessageInput));l(!!e)}),[i,r]),(0,m.useEffect)((()=>{var e;o&&(null===(e=u.current)||void 0===e||e.focus())}),[o]),(0,z.jsx)(cp.Z,{show:t,hasScrollableContent:!0,children:(0,z.jsx)("div",{className:"u-position-relative u-fill-width",children:(0,z.jsxs)(Lg,{children:[(0,z.jsx)("div",{className:"feedback-modal__title",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:p("feedback_deny_resolved.title")})}),i.map((function(e){let{id:t,body:i}=e;const n=r===t,s=(0,v.snakeCase)(i),o=(0,z.jsx)(qx.J,{name:"deny_feedback_option",value:s,checked:n});return(0,z.jsxs)(m.Fragment,{children:[(0,z.jsx)(gt.Z,{suffix:o,title:i,onClick:()=>{d(""),a(t)}}),(0,z.jsx)(h.Z,{})]},t)})),o&&(0,z.jsx)(Gw,{ref:u,maxRows:5,placeholder:p("feedback_deny_resolved.input_placeholder"),value:c,name:"auto_reply_deny_comment",onChange:function(e){let{target:t}=e;d(t.value)}}),(0,z.jsxs)("div",{className:"feedback-modal__actions",children:[(0,z.jsx)(ic.I,{text:p("actions.submit"),styling:ic.I.Styling.Filled,onClick:function(){s(r,c)},disabled:!r}),(0,z.jsx)(ic.I,{text:p("actions.close"),styling:ic.I.Styling.Flat,onClick:function(){d(""),a(void 0),n()}})]})]})})})},Xw=e=>{let{primary:t,title:i,inverse:n,theme:s,size:r}=e;const a=(0,p.v9)(Ow),o=(0,p.v9)(Fw),l=(0,p.v9)(Lw),c=(0,p.I0)();return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Bx,{text:i,primary:t,size:r,theme:s,inverse:n,isLoading:o,onClick:function(){c(Pw.fetchFeedbackDenyOptionsRequest())}}),(0,z.jsx)(Ww,{onClose:function(){c(Pw.closeProblemsModal())},onSubmit:function(e,t){c(Dw({selectedOption:e,message:t}))},options:a,isOpen:l})]})},Yw={1:"angry-face",2:"sad-face",3:"neutral-face",4:"happy-face",5:"laughing-face"},Kw=e=>{let{rating:t,isActive:i,onClick:n}=e;const s=U("user.feedback.feedback_form.rating"),r=Yw[t],a=i?ht.Z.Color.Primary:ht.Z.Color.GreyscaleLevel4;return(0,z.jsx)("button",{type:"button",className:"u-cursor-pointer","data-testid":"feedback-resolved-face-icon-".concat(t),onClick:function(){n(t)},title:s("rate_".concat(t)),"aria-pressed":i,children:(0,z.jsx)(ht.Z,{color:a,name:r,size:ht.Z.Size.Large})})};var Jw=i(54990);const Qw=e=>{let{onClick:t,options:i,ratingOptionsTitle:n,selectedValues:s}=e;return(0,z.jsxs)("div",{className:"u-ui-padding-horizontal-large",children:[(0,z.jsx)(xt.Z,{text:n,type:xt.Z.Type.Title}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)("div",{className:"u-flexbox u-flex-wrap u-align-items-center",children:i.map((e=>{let{body:i,id:n,hasMessageInput:r}=e;const a=null==s?void 0:s.includes(n);return(0,z.jsxs)("span",{children:[(0,z.jsx)(Jw.j,{testId:"feedback-statement-".concat(n),text:i,textType:xt.Z.Type.Subtitle,activated:a,type:"button",onClick:()=>{t(n,r)},aria:{"aria-pressed":a}}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(x.Z,{})]},n)}))})]})},$w=e=>{let{ratings:t,selectedRating:i,isOpen:n,onClose:s,onSubmit:r,isOptionsVisible:a=!0,isInputWithoutRatingOptions:o=!1,isCloseActionVisible:l=!0}=e;const[c,d]=(0,m.useState)(i),[u,p]=(0,m.useState)(),[g,h]=(0,m.useState)(""),f=(0,m.useRef)(null),y=U("help_center_feedback");function v(e){var t,i;let{finalized:n,rating:s=c}=e;const a=u||{};if(!s)return;const l=null===(t=a[s])||void 0===t?void 0:t.options,d=null===(i=a[s])||void 0===i?void 0:i.isInputActive;r(n?{finalized:n,rating:s,message:d||o?g:void 0,feedbackStatementIds:null!=l&&l.length?l:void 0}:{rating:s})}function _(){p(void 0),d(void 0),h(""),s()}function b(e){v({rating:e}),d(e)}function j(e){let{target:t}=e;h(t.value)}function S(e,t){var i,n;if(!c)return;const s=u||{},r=(null===(i=s[c])||void 0===i?void 0:i.options)||[],a=null==r?void 0:r.includes(e),o=null===(n=s[c])||void 0===n?void 0:n.isInputActive,l={...s,[c]:{isInputActive:t?!o:o,options:a?r.filter((t=>t!==e)):[...r,e]}};p(l)}return(0,m.useEffect)((()=>{d(i)}),[i]),(0,m.useEffect)((()=>{var e,t;u&&c&&null!==(e=u[c])&&void 0!==e&&e.isInputActive&&(null===(t=f.current)||void 0===t||t.focus())}),[c,u]),(0,z.jsx)(cp.Z,{testId:"feedback-modal",show:n,hasScrollableContent:!0,children:(0,z.jsxs)("div",{className:"u-fill-width",children:[(0,z.jsx)(Pm.Z,{theme:"transparent",right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,onClick:_,deprecatedIconName:"x",testId:"feedback-resolved-close",aria:{"aria-label":y("actions.close")}})}),(0,z.jsxs)(Lg,{children:[(0,z.jsx)(xt.Z,{width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,text:(null==t?void 0:t.titleText)||y("feedback_resolved.title"),type:xt.Z.Type.Heading}),(0,z.jsx)(xt.Z,{width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,text:null==t?void 0:t.subtitleText,type:xt.Z.Type.Subtitle}),t?(0,z.jsx)(gt.Z,{children:(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center",children:t.ratingIds.map((e=>(0,z.jsx)(Kw,{rating:e,isActive:c===e,onClick:b},e)))})}):null,function(){var e;if(!t||!c||!a)return null;const{options:i,title:n}=t.ratingOptions[c],s=null==u||null===(e=u[c])||void 0===e?void 0:e.options;return(0,z.jsx)(Qw,{onClick:S,ratingOptionsTitle:n,options:i,selectedValues:s})}(),function(){let e=!1;if(c&&o)e=!0;else{if(!c||!u)return null;var t;e=null===(t=u[c])||void 0===t?void 0:t.isInputActive}return e?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"feedback-input__title",children:(0,z.jsx)(xt.Z,{text:y("feedback_resolved.input_title"),type:xt.Z.Type.Title})}),(0,z.jsx)(Gw,{ref:f,maxRows:5,value:g,name:"feedback_deny_comment",placeholder:y("feedback_resolved.input_placeholder"),onChange:j})]}):null}(),c?(0,z.jsxs)("div",{className:"feedback-modal__actions",children:[(0,z.jsx)(ic.I,{text:y("actions.submit_feedback"),styling:ic.I.Styling.Filled,onClick:function(){v({finalized:!0})},testId:"feedback-resolved-submit"}),l&&(0,z.jsx)(ic.I,{text:y("actions.close"),styling:ic.I.Styling.Flat,onClick:_,testId:"feedback-resolved-close-button"})]}):null]}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]})})},eP=e=>{let{primary:t,title:i,inverse:n,theme:s,size:r,action:a}=e;const o=(0,p.v9)(Rw),l=(0,p.v9)(Nw),c=(0,p.v9)(Ew),d=(0,p.I0)();return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Bx,{text:i,primary:t,size:r,theme:s,inverse:n,onClick:function(){a===qc.ConfirmComplaintResolvedAndLeaveFeedback&&d(Aw()),d(Pw.fetchFeedbackRatingsRequest())},isLoading:l}),(0,z.jsx)($w,{isOpen:c,ratings:o,onClose:function(){d(Pw.closeFeedbackModal())},onSubmit:function(e){d(Uw(e))}}),(0,z.jsx)(x.Z,{})]})},tP=e=>{let{primary:t,title:i,inverse:n,theme:s,size:r}=e;const a=(0,p.v9)(X),o=(0,p.v9)(Hd),{fetch:l,isLoading:c,transformedData:d}=ih(Fe.qhu,Gh),[u,g]=(0,m.useState)(!1);return(0,m.useEffect)((()=>{a&&o&&l(a,o)}),[a,o,l]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Bx,{text:i,primary:t,size:r,theme:s,inverse:n,onClick:function(){g(!0)},isLoading:c}),(0,z.jsx)($w,{isOpen:u,ratings:d,onClose:function(){g(!1)},onSubmit:async function(e){a&&o&&(await(0,Fe.yZi)(a,o,{...e}),e.finalized&&(0,ls.sl)())}}),(0,z.jsx)(x.Z,{})]})},iP=e=>{let{primary:t,title:i,inverse:n,theme:s,size:r}=e;const a=U("conversation.actions.activate_balance"),o=(0,p.I0)(),l=(0,p.v9)(Hd),c=(0,p.v9)(X),[d,u]=(0,m.useState)(!1),g=()=>{u(!1)},h=()=>{u(!1),l&&c&&o(eg({conversationId:l}))};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Bx,{text:i,primary:t,size:r,theme:s,inverse:n,onClick:()=>u(!0)}),(()=>{const e={title:a("title"),description:a("description")};return d?(0,z.jsx)(CI,{labels:e,isOpen:d,onSuccess:h,onCancel:g}):null})()]})},nP=e=>{let{primary:t,title:i,inverse:n,theme:s,size:r}=e;const a=(0,p.v9)(qd),[o,l]=(0,m.useState)(!1);return a?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Bx,{text:i,primary:t,size:r,theme:s,inverse:n,onClick:function(){l(!0)}}),(0,z.jsx)(Yf,{transactionId:a,isOpen:o,onClose:function(){l(!1)},screen:$t.MessageReply})]}):null},sP=e=>{let{primary:t,title:i,inverse:n,theme:s,size:r}=e;const{track:a}=vi(),o=(0,p.v9)(qd),[l,c]=(0,m.useState)(i),[d,u]=(0,m.useState)(!1),[g,h]=(0,m.useState)(),[x,f]=(0,m.useState)(!1);return(0,m.useEffect)((()=>{g||async function(){if(!o)return;f(!0);const e=await(0,Fe.nH9)(o);if("errors"in e)return c(e.errors[0].value),u(!0),void f(!1);f(!1),h(e.reservation_link)}()}),[g,o]),o?(0,z.jsx)(Bx,{text:l,primary:t,disabled:d,size:r,theme:s,inverse:n,isLoading:x,url:g,onClick:function(e){if(function(){const e={transaction_id:o};a(Ri({target:qm.DownloadShippingLabel,targetDetails:JSON.stringify(e)}))}(),!g)return;e.preventDefault();const t=(0,ls.n6)(g,"_blank");t&&(t.opener=null)}}):null},rP=e=>{let{primary:t,title:i,inverse:n,theme:s,size:r}=e;const a=(0,p.v9)(Hd);return a?(0,z.jsx)(Bx,{primary:t,text:i,size:r,inverse:n,theme:s,url:(0,Me.VbG)(Number(a)),testId:"appeal-the-decision-conversation-action"}):null},aP=e=>{const{action:t}=e;switch(t){case qc.CustomShipment:case qc.UntrackedShipment:return(0,z.jsx)(Cw,{...e});case qc.TrackedShippment:return(0,z.jsx)(Zw,{...e});case qc.ConfirmPackageSize:return(0,z.jsx)(kf,{...e});case qc.ReuploadItem:return(0,z.jsx)(wf,{...e});case qc.ResolveComplaint:return(0,z.jsx)(Bf,{...e});case qc.ViewComplaint:return(0,z.jsx)(qf,{...e});case qc.DownloadShippingLabel:return(0,z.jsx)(Vf,{...e});case qc.CancellationConfirm:return(0,z.jsx)(Hf,{...e});case qc.CancellationDecline:return(0,z.jsx)(Gf,{...e});case qc.TrackShipment:return(0,z.jsx)(Qf,{...e});case qc.MarkAsDelivered:return(0,z.jsx)($f,{...e});case qc.MarkAsShipped:return(0,z.jsx)(ty,{...e});case qc.GetShippingLabel:return(0,z.jsx)(TI,{...e});case qc.GoToWallet:return(0,z.jsx)(FI,{...e});case qc.CompleteTransaction:return(0,z.jsx)(VI,{...e});case qc.ReportProblem:return(0,z.jsx)(GI,{...e});case qc.LeaveFeedback:return(0,z.jsx)(WI,{...e});case qc.UpdateBundle:return(0,z.jsx)(XI,{...e});case qc.WeHaveMet:return(0,z.jsx)(KI,{...e});case qc.ClaimCompensation:return(0,z.jsx)(JI,{...e});case qc.RequestReturn:return(0,z.jsx)(Xk,{...e});case qc.ConfirmComplaintResolved:return(0,z.jsx)(Yk,{...e});case qc.RefuseComplaintResolved:return(0,z.jsx)(Kk,{...e});case qc.ViewDeliveryInstructions:return(0,z.jsx)(Qk,{...e});case qc.OpenQrCode:return(0,z.jsx)(tw,{...e});case qc.RefundProgress:return(0,z.jsx)(bw,{...e});case qc.NeedHelpSelectChatbotIssue:case qc.SelectChatbotIssue:return(0,z.jsx)(Xw,{...e});case qc.ConfirmComplaintResolvedAndLeaveFeedback:case qc.LeaveComplaintFeedback:return(0,z.jsx)(eP,{...e});case qc.PushUpFeedback:return(0,z.jsx)(tP,{...e});case qc.ActivateBalance:return(0,z.jsx)(iP,{...e});case qc.ReturnOrder:return(0,z.jsx)(TI,{...e});case qc.MarkAsReturnedToSender:return(0,z.jsx)(nP,{...e});case qc.GetReservationLink:return(0,z.jsx)(sP,{...e});case qc.AppealTheDecision:return(0,z.jsx)(rP,{...e});default:return null}},oP=e=>{let{time:t,isFromMobileApp:i=!1}=e;const n=new Date(t).getTime();return(0,z.jsxs)("div",{className:"u-flexbox u-justify-content-center u-ui-margin-vertical-small",children:[(0,z.jsx)(xt.Z,{text:(0,z.jsx)(zt,{value:n}),type:xt.Z.Type.Caption}),i&&(0,z.jsx)("a",{href:Me.QwI,children:(0,z.jsx)(ht.Z,{name:"phone",size:ht.Z.Size.Small,color:ht.Z.Color.GreyscaleLevel4})})]})},lP=()=>{const{track:e}=vi(),t=(0,p.v9)(qd),[i,n]=(0,m.useState)(!1),s=(0,m.useCallback)((()=>{t&&e(rn({screen:$t.TrackShipmentView,transactionId:t,variant:"modal"}))}),[e,t]),r=(0,m.useCallback)((()=>{if(!t)return;const i={transaction_id:t};e(Ri({target:qm.TrackingInformationLink,targetDetails:JSON.stringify(i)}))}),[e,t]),a=(0,m.useCallback)((()=>{r(),s(),n(!0)}),[r,s,n]);return(0,m.useEffect)((()=>{let e=null;const t=document.getElementsByClassName(Kc.ShipmentTrackingLink);return t.length>0&&Array.from(t).forEach((t=>{t.addEventListener("click",(t=>{e=t.target,t.preventDefault(),a()}))})),()=>{var t;return null===(t=e)||void 0===t?void 0:t.removeEventListener("click",null)}}),[a]),t?(0,z.jsx)(Jf,{isOpen:i,transactionId:t,onClose:()=>n(!1)}):null},cP=e=>{let{isOpen:t,onClose:i}=e;const n=U("conversation.buyer_details.modal"),s=(0,p.v9)(qd),[r,a]=(0,m.useState)(null),o=(0,m.useCallback)((async()=>{if(!s)return;const e=await(0,Fe.sCS)({transactionId:s});"errors"in e||a((0,rt.B6)(e.business_account_invoice_instructions))}),[s]);(0,m.useEffect)((()=>{o()}),[o]);const l=e=>{let{name:t,line1:i,line2:n,postalCode:s,city:r,country:a}=e;return(0,v.compact)([t,i,n,s,r,a]).join("\n")},c=e=>{return(0,z.jsx)(Wf.Z,{placement:Wf.Z.Placement.Left,hover:!1,content:n("actions.copy"),children:(0,z.jsx)(ic.I,{deprecatedIcon:(0,z.jsx)(ht.Z,{name:"copy",color:ht.Z.Color.GreyscaleLevel3}),styling:ic.I.Styling.Flat,onClick:(t=e,()=>navigator.clipboard.writeText(t))})});var t};return(0,z.jsxs)(cp.Z,{show:t,children:[(0,z.jsx)(Pm.Z,{right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,onClick:i,deprecatedIconName:"x",inline:!0}),body:n("title")}),(0,z.jsx)(h.Z,{}),(()=>{if(!r)return null;const{address:e}=r,{name:t,line1:i,line2:s,postalCode:a,city:o,country:d}=e;return(0,z.jsx)("div",{id:"address-block",children:(0,z.jsxs)(gt.Z,{prefix:(0,z.jsx)(ht.Z,{name:"home",color:ht.Z.Color.GreyscaleLevel3}),suffix:c(l(e)),title:n("labels.address"),children:[(0,z.jsx)(xt.Z,{width:xt.Z.Width.Parent,children:t}),(0,z.jsx)(xt.Z,{width:xt.Z.Width.Parent,children:i}),s&&(0,z.jsx)(xt.Z,{width:xt.Z.Width.Parent,children:s}),(0,z.jsxs)(xt.Z,{width:xt.Z.Width.Parent,children:[a,", ",o]}),(0,z.jsx)(xt.Z,{width:xt.Z.Width.Parent,children:d})]})})})(),(()=>{if(!r)return null;const{email:e}=r;return(0,z.jsx)(gt.Z,{prefix:(0,z.jsx)(ht.Z,{name:"envelope",color:ht.Z.Color.GreyscaleLevel3}),suffix:c(e),title:n("labels.email"),children:(0,z.jsx)("div",{className:"u-ellipsis",children:e})})})(),(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large})]})},dP=()=>{const[e,t]=(0,m.useState)(!1),{track:i}=vi(),n=(0,m.useCallback)((e=>{e.preventDefault(),t(!0),i(Wi({screen:$t.BuyerInvoiceDetails}))}),[i]);return(0,m.useEffect)((()=>{const e=document.getElementsByClassName(Kc.BuyerDetailsLink)[0];if(e)return e.addEventListener("click",n),()=>{e.removeEventListener("click",n)}}),[n]),(0,z.jsx)(cP,{isOpen:e,onClose:()=>t(!1)})},uP="".concat(Be.Fv,"/assets/offline-authenticity/authenticity-diamond-48.svg"),mP="".concat(Be.Fv,"/assets/offline-authenticity/authenticity-diamond-48-dark.svg"),pP=e=>{let{verificationFee:t,show:i,onClose:n}=e;const s=U("item.authenticity_fee_modal"),{track:r}=vi(),a=(0,p.v9)(Wt("haov_offline_verification_discount"));(0,m.useEffect)((()=>{i&&r(Gi({target:cb.PhysicalAuthenticityBuyerModal}))}),[i,r]);const o=Bg()?mP:uP,l=a?"fee_with_discount":"fee";return(0,z.jsxs)(cp.Z,{show:i,testId:"offline-verification-modal",children:[(0,z.jsx)(Pm.Z,{right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,onClick:n,deprecatedIcon:(0,z.jsx)(ht.Z,{name:"x",testId:"icon-x"}),inline:!0,testId:"offline-verification-modal-navigation-close-button"})}),(0,z.jsxs)("div",{className:"modal-contained-content u-ui-padding-horizontal-x2-large","data-testid":"offline-verification-modal-content",children:[(0,z.jsxs)("div",{className:"u-text-center",children:[(0,z.jsx)(Kl.U,{src:o,size:Kl.U.Size.XLarge,alt:""}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:s("title"),type:xt.Z.Type.Heading}),t&&(0,z.jsx)(xt.Z,{text:s(l,{amount:t}),theme:"inherit",type:xt.Z.Type.Body,testId:"offline-verification-modal-fee-title",alignment:xt.Z.Alignment.Center})]}),(0,z.jsx)("div",{className:"u-ui-padding-vertical-x-large",children:(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),children:[[{translationId:"auth_center",iconName:"sorting-center"},{translationId:"check",iconName:"eye-magnifying-glass"},{translationId:"verified",iconName:"verified-check"},{translationId:"rejected",iconName:"exclamation-point"},{translationId:"includes"},{translationId:"delivery"}].map((e=>{let{translationId:t,iconName:i}=e;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,prefix:t&&(0,z.jsx)(ht.Z,{name:t,testId:"content-icon-".concat(t),aria:{"aria-hidden":"true"},color:ht.Z.Color.GreyscaleLevel4}),title:(0,z.jsx)(xt.Z,{text:s("".concat(e,"_title")),type:xt.Z.Type.Title,testId:"content-title-".concat(e)}),body:(0,z.jsx)(xt.Z,{text:s("".concat(e,"_body")),testId:"content-description-".concat(e)})},e)}(t,i)})),(0,z.jsx)(xt.Z,{text:s("more"),html:!0,testId:"offline-verification-modal-learn-more"}),(0,z.jsx)(xt.Z,{text:s("legal_disclaimer"),type:xt.Z.Type.Subtitle,testId:"offline-verification-modal-legal-disclaimer"})]})})]}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(ic.I,{text:s("action.close"),styling:ic.I.Styling.Filled,onClick:n,testId:"offline-verification-modal-close-button"})})]})},gP=()=>{const{track:e}=vi(),t=(0,p.v9)(qd),i=(0,p.v9)(mu),n=(0,p.v9)(Hu),s=(0,p.v9)(Gu),[r,a]=(0,m.useState)(!1),o=(0,m.useCallback)((()=>{if(!t)return;const r={transaction_id:t,transaction_status:i,shipment_id:n,shipment_status:s};e(Gi({screen:$t.MessageReply,target:cb.PhysicalAuthenticityBuyerModal,targetDetails:JSON.stringify(r)}))}),[e,t,i,n,s]),l=(0,m.useCallback)((()=>{if(!t)return;const r={transaction_id:t,transaction_status:i,shipment_id:n,shipment_status:s};e(Ri({target:qm.PhysicalAuthenticityBuyer,targetDetails:JSON.stringify(r)}))}),[e,t,i,n,s]),c=(0,m.useCallback)((()=>{l(),o(),a(!0)}),[l,o,a]);return(0,m.useEffect)((()=>{let e=null;const t=document.getElementsByClassName(Kc.OfflineVerificationInfoLink);return t.length>0&&Array.from(t).forEach((t=>{t.addEventListener("click",(t=>{e=t.target,t.preventDefault(),c()}))})),()=>{var t;return null===(t=e)||void 0===t?void 0:t.removeEventListener("click",null)}}),[c]),(0,z.jsx)(pP,{show:r,onClose:()=>a(!1)})},hP=()=>{const e=(0,p.I0)(),{track:t}=vi(),i=(0,p.v9)(qd),[n,s]=(0,m.useState)(!1);(0,m.useEffect)((()=>{n&&e(V_.fetchNearbyDropOffPointsRequest({}))}),[e,n]);const r=(0,m.useCallback)((()=>{if(!i)return;const e=JSON.stringify({transaction_id:i});t(Ri({target:qm.DropOffPointsMapLink,targetDetails:e}))}),[t,i]),a=(0,m.useCallback)((()=>{r(),s(!0)}),[r,s]);return(0,m.useEffect)((()=>{let e=null;const t=document.getElementsByClassName(Kc.DropOffPointMapLink);return t.length>0&&Array.from(t).forEach((t=>{t.addEventListener("click",(t=>{e=t.target,t.preventDefault(),a()}))})),()=>{var t;return null===(t=e)||void 0===t?void 0:t.removeEventListener("click",null)}}),[a]),(0,z.jsx)(LZ,{isOpen:n,onClose:()=>s(!1)})},xP=e=>{let{action:t}=e;switch(t){case Kc.ShipmentTrackingLink:return(0,z.jsx)(lP,{});case Kc.BuyerDetailsLink:return(0,z.jsx)(dP,{});case Kc.OfflineVerificationInfoLink:return(0,z.jsx)(gP,{});case Kc.DropOffPointMapLink:return(0,z.jsx)(hP,{});default:return null}},fP={[Wc.Gray]:"muted",[Wc.Green]:"success",[Wc.Red]:"warning",[Wc.Clear]:"transparent"},yP={[Wc.Gray]:"muted",[Wc.Green]:"success",[Wc.Red]:"warning",[Wc.Clear]:void 0},vP=e=>{let{transactionId:t,message:i,createdTime:n}=e;const{track:s}=vi(),r=E(),a=(0,p.v9)(mu),o=(0,p.v9)(Hu),l=(0,p.v9)(Gu),c=i.style!==Wc.Clear,d=!!i.actions,u=()=>{const{actions:e,style:t}=i;return e?(0,z.jsx)(L,{separatorAtBreakpoint:{phones:(0,z.jsx)(x.Z,{}),tabletsUp:(0,z.jsx)("div",{children:(0,z.jsx)(x.Z,{size:x.Z.Size.Large})})},children:e.map(((e,i)=>(0,z.jsx)("div",{"data-testid":"conversation-status-actions-".concat(e.action),children:(0,z.jsx)(aP,{...e,size:ic.I.Size.Medium,inverse:c,theme:yP[t]})},i)))}):null},m=y()("conversation-message__status",{"u-sticky-top u-zindex-bump":c});return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(oP,{time:n}),(0,z.jsxs)("div",{className:m,children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)("span",{onClick:e=>{if(!(e.target instanceof HTMLAnchorElement))return;const i={transaction_id:t,url:e.target.href,transaction_status:a,shipment_id:o,shipment_status:l},n=Ri({screen:$t.MessageReply,target:qm.Hyperlink,targetDetails:JSON.stringify(i)});s(n)},children:(()=>{const{title:e,subtitle:t,actions:n,style:s}=i,a=c&&d?"inverse":d?void 0:"muted";return(0,z.jsx)(gt.Z,{theme:fP[s],children:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,theme:a,text:e}),body:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{theme:a,html:!0,text:t}),Number(null==n?void 0:n.length)>0&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)("div",{className:r.phones?"":"u-flexbox",children:u()})]})]}),theme:fP[s],testId:"conversation-message--status-message"})})})()}),(0,z.jsx)(h.Z,{})]}),(()=>{const e=((e,t)=>{const i=new RegExp('<a.+?class=".*('.concat(t,')[ |"].*>'),"g");return e?e.split(i)[1]:null})(i.subtitle,Object.values(Kc).join("|"));return e?(0,z.jsx)(xP,{action:e}):null})()]})};let _P;!function(e){e.Member="user",e.Item="item",e.ForumPost="forum_post",e.Conversation="msg_thread"}(_P||(_P={}));const bP=e=>{let{conversationId:t}=e;const i=U(),{relativeUrl:n}=xc(),s=(0,ys.Iq)(Me.iDM,{ref_id:t,ref_type:_P.Conversation,ref_url:n}),r=i("conversation.report_suggestion.text",{"report-link":e=>(0,z.jsx)("a",{href:s,children:e})});return(0,z.jsx)(ah.Z,{text:r,alignment:ah.Z.Alignment.Center,styling:ah.Z.Styling.Wide})},jP=e=>{let{message:t,createdTime:i}=e;const n=U("conversation"),s=(0,p.v9)(X),r=(0,p.v9)(Gd),a=(0,p.v9)(Rd),o=(0,p.v9)(Ad),l=(0,p.v9)(Nc),c=t.userId===String(s),d=()=>{var e;const i=null==a?void 0:a.isPaymentActionAvailable,n=(null==a?void 0:a.buyerId)===s,r=wt(null==o||null===(e=o.seller)||void 0===e?void 0:e.closetCountdownEndDate);return t.isCurrentUser&&i&&n&&!r};if(!s||!a||!r)return null;const u=y()("conversation-message",{"conversation-message__current-author":c,"conversation-message__actions":d()});return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(oP,{time:i}),(0,z.jsxs)("div",{className:"u-fill-width u-inline-block",children:[(()=>{if(!r)return null;const{photo:e,profileUrl:t}=r;return(0,z.jsx)("div",{className:"u-ui-margin-right-regular u-inline-block u-float-left",children:(0,z.jsx)(Ax,{photo:e,profileUrl:t,isSystem:!1,isCurrentAuthor:c})})})(),(0,z.jsx)("div",{className:u,children:(0,z.jsxs)(Lt.Z,{inverse:c,children:[null!=a&&a.transactionId&&d()?t.isPriceFixed?null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:n("currency_exchange_rate_note")}),(0,z.jsx)(x.Z,{})]}):null,(()=>{const{price:e,originalPrice:i,currency:n}=t;return(0,z.jsxs)("div",{children:[(0,z.jsx)(xt.Z,{text:Ma(e,{currency:n,locale:l}),type:xt.Z.Type.Title,testId:"offer-current-price-label"}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)(xt.Z,{text:Ma(i,{currency:n,locale:l}),type:xt.Z.Type.Title,theme:"muted",strikethrough:!0,testId:"offer-original-price-label"})]})})(),t.note?(0,z.jsx)(xt.Z,{text:t.note,width:xt.Z.Width.Parent}):null,null!=a&&a.transactionId&&!1!==d()?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{}),(0,z.jsx)(ic.I,{text:n("offer_message.buy"),url:(0,Me.YJ3)(a.transactionId,$t.MessageReply),size:ic.I.Size.Medium,styling:ic.I.Styling.Filled,onClick:()=>{var e;null!=a&&null!==(e=a.transaction)&&void 0!==e&&e.itemId&&Jg({itemId:a.transaction.itemId})},testId:"offer-message-buy-button"})]}):null]})})]})]})},SP=e=>{let{inverse:t,aria:i}=e;const n=U("conversation.delete_message");return(0,z.jsx)(Lt.Z,{inverse:t,children:(0,z.jsx)(xt.Z,{theme:"muted",aria:i,testId:"deleted-message",children:n("message_deleted")})})},ZP=e=>{return{pricing:e.pricing,title:e.title,price:e.price&&(i=e.price,{amount:i.amount,currencyCode:i.currency_code}),priceNote:e.price_note,discount:e.discount&&(t=e.discount,{percent:t.percent,note:t.note}),priceBeforeDiscount:e.price_before_discount&&Va(e.price_before_discount),lowestPriceIn30days:e.lowest_price_in_30_days&&Va(e.lowest_price_in_30_days)};var t,i},IP=e=>{return{code:e.code,iconUrl:e.icon_url,title:e.title,subtitle:e.subtitle,pricingSummary:e.pricing_summary&&(t=e.pricing_summary,t.map(ZP)),actionTitle:e.action_title,note:e.note};var t},CP=e=>e.map(IP),kP=e=>{const{action:t,action_title:i,screen_title:n,type:s,url:r}=e;return{action:t,actionTitle:i,screenTitle:n,type:s,url:r}},wP=e=>{switch(e.entity_type){case Hc.ActionMessage:case Hc.StatusMessage:{const t=e.entity;return{style:t.template.style,title:t.title,subtitle:t.subtitle,notification:t.notification,actions:t.actions}}case Hc.OfferMessage:{const t=e.entity;return{note:t.note,price:t.price,isPriceFixed:t.price_fixed,originalPrice:t.original_price,currency:t.currency,isCurrentUser:t.current,userId:t.user_id.toString()}}case Hc.OfferRequestMessage:{const t=e.entity;return{userId:t.user_id.toString(),status:t.status,price:t.price,isPriceFixed:t.price_fixed,originalPrice:t.original_price,currency:t.currency,statusTitle:t.status_title,offerRequestId:t.offer_request_id.toString(),isCurrentUser:t.current,title:t.title,body:t.body,transactionId:t.transaction_id.toString()}}case Hc.Message:{const t=e.entity;return{id:t.id,content:t.body,isSentFromMobile:t.sent_via_mobile,photos:t.photos.map(lt),isHidden:t.is_hidden,userId:String(t.user_id),reaction:t.reaction}}case Hc.PortalMessage:{const t=e.entity;return{id:t.id,content:t.body,isSentFromMobile:t.sent_via_mobile,photos:t.photos.map(lt),isHidden:t.is_hidden}}case Hc.ReportSuggestion:default:return null}},PP=e=>({createdTime:e.created_at_ts,createdRelativeTime:e.created_time_ago,entityType:e.entity_type,message:wP(e)}),zP=e=>{let{label:t,price:i}=e;return{label:t,price:Va(i)}},TP=e=>{var t;return{remaining:e.remaining,maxDiscount:e.max_discount,canMakeMore:e.can_make_more,minPrice:Va(e.min_price),maxPrice:Va(e.max_price),offerSuggestions:(null===(t=e.offer_suggestions)||void 0===t?void 0:t.map(zP))||[],feesReductionThreshold:e.fees_reduction_threshold?Va(e.fees_reduction_threshold):null}},FP=e=>{return{message:e.message,timestamp:e.timestamp,carrier:e.carrier?(t=e.carrier,{id:t.id,logoUrl:t.logo_url,priority:t.priority,trackingCode:t.tracking_code,trackingUrl:t.tracking_url}):null,cellType:e.cell_type};var t},NP=e=>{return{details:e.details.map(FP),canMarkAsReceived:e.actions.includes("mark_as_received"),canMarkAsReturnedToSender:e.actions.includes("complete_return_to_sender"),currentCarrier:e.current_carrier&&(i=e.current_carrier,{id:i.id,priority:i.priority,name:i.name,trackingCode:i.tracking_code,trackingUrl:i.tracking_url}),estimatedDetail:e.estimated_detail&&(t=e.estimated_detail,{status:t.status,timePeriod:t.time_period,message:t.message}),userSide:e.user_side};var t,i},LP=e=>{return{carrier:zj(e.carrier),carrierCode:e.carrier_code,hint:e.hint,id:e.id,instructions:e.instructions,currency:e.currency,price:e.price,priceTitle:e.price_title,receiverAddress:e.receiver_address,receiverFullAddress:e.receiver_full_address,receiverName:e.receiver_name,receiverTitle:e.receiver_title,receiverPhoto:e.receiver_photo&&lt(e.receiver_photo),senderPhoto:e.sender_photo&&lt(e.sender_photo),dropOffType:e.drop_off_type&&Fj(e.drop_off_type),labelFormatDetails:e.label_format_details&&(t=e.label_format_details,{iconUrl:t.icon_url,title:t.title,subtitle:t.subtitle}),returnShippingOption:e.return_shipping_option&&IP(e.return_shipping_option),actionTitle:e.action_title,screenTitle:e.screen_title,shippingPrice:Va(e.shipping_price),dropOffMapEnabled:e.drop_off_map_enabled};var t},EP=e=>({name:e.name,imageUrl:e.image_url}),OP=e=>({name:e.name,iconUrl:e.icon_url}),RP=e=>({code:e.code,imageUrl:e.image_url,carrier:OP(e.carrier),items:e.items.map(EP),receiverName:e.receiver_name,deliveryEstimate:e.delivery_estimate,expirationDate:e.expiration_date,downloadUrl:e.download_url,digitalLabelTitle:e.digital_label_title,labelExpiresTitle:e.label_expires_title,downloadLabelTitle:e.download_label_title,headerSubtitle:e.header_subtitle}),DP=e=>({id:e.id,title:e.title,status:e.status,availabilityStatus:e.availability_status,size:e.size,photoUrl:e.photo_url}),AP=e=>{var t,i,n,s,r,a,o,l,c,d;return{id:e.id,messages:(0,v.compact)(e.messages.map(PP)),transactionId:null===(t=e.transaction)||void 0===t?void 0:t.id,isTranslated:e.translated,oppositeUser:e.opposite_user&&(d=e.opposite_user,{id:d.id.toString(),city:null,localCountryTitle:"",isLocationExposed:null,login:d.login,lastLoginTime:d.last_logged_in_at,feedbackCount:null,reviewCount:d.review_count,feedbackReputation:d.feedback_reputation,profileUrl:d.profile_url,photo:d.photo?lt(d.photo):null,photoThumbnail:Je(d.photo),isSystem:d.is_system,isHated:d.is_hated,locationDescription:d.location_description,isUserUnblockable:d.is_user_unblockable}),buyerId:null===(i=e.transaction)||void 0===i?void 0:i.buyer_id,isPaymentActionAvailable:null!==(n=null===(s=e.transaction)||void 0===s?void 0:s.available_actions.includes(gd.Buy||gd.Offer||gd.RequestOffer))&&void 0!==n&&n,translationType:e.localization,isReadByOppositeUser:e.read_by_opposite_user,itemId:null===(r=e.transaction)||void 0===r?void 0:r.item_id,isReplyAllowed:e.allow_reply,isSuspicious:e.is_suspicious,isBundleAvailable:null!==(a=null===(o=e.transaction)||void 0===o?void 0:o.available_actions.includes(hd.Bundle))&&void 0!==a&&a,transaction:e.transaction?(c=e.transaction,{id:c.id,order:{reserved:c.is_reserved,itemIds:c.item_ids,title:c.item_title},buyer:{id:c.buyer_id,business:null},userSide:c.current_user_side,shipment:c.shipment_id?{id:c.shipment_id,status:c.shipment_status,packageType:{packageSizeCode:c.package_size_code},price:c.shipment_price?c.shipment_price.amount:null,currency:c.shipment_price?c.shipment_price.currency_code:null}:null,canMarkAsReceived:c.available_actions.includes(hd.MarkAsReceived),availableActions:c.available_actions,itemsCount:c.item_count,itemId:c.item_id,isItemVerified:c.offline_verification,offer:{id:c.offer_id,price:Va(c.offer_price)},status:c.status,itemTitle:c.item_title,seller:c.seller_id?{id:c.seller_id,business:c.is_business_seller}:null}):null,suggestedMessages:e.suggested_messages,item:e.transaction&&{id:e.transaction.item_id,priceNumeric:e.transaction.offer_price.amount,currency:e.transaction.offer_price.currency_code,url:e.transaction.item_url,photo:e.transaction.item_photo?eo(e.transaction.item_photo):null},education:e.education?kP(e.education):null,moderatedItems:e.moderated_items?{itemCount:e.moderated_items.item_count,items:e.moderated_items.items.map(DP)}:null,isControl:!1,userHasSupportRole:!1,isFirstTimeListerEducationRequired:null!==(l=e.safety_education)&&void 0!==l&&l}},MP=e=>{let{show:t,onCancel:i,onConfirm:n}=e;const s=U("conversation.delete_message.modal");return(0,z.jsx)(cp.Z,{show:t,title:s("title"),body:s("body"),testId:"delete-message-modal",actions:[{text:s("actions.delete"),theme:"warning",style:ic.I.Styling.Filled,callback:n,testId:"delete-confirm-button"},{text:s("actions.cancel"),style:ic.I.Styling.Flat,callback:i,theme:"amplified"}]})},UP=e=>{let{messageId:t,photoId:i,isLast:n,isCurrentAuthor:s,reaction:r}=e;const a=(0,p.I0)(),o=U("conversation.delete_message"),{relativeUrl:l}=xc(),[c,d]=(0,m.useState)(!1),[u,h]=(0,m.useState)(!1),[x,f]=(0,m.useState)(Ne.Idle),v=(0,p.v9)(Wt("conversation_reactions_web")),_=(0,p.v9)(Hd),b=(0,p.v9)(Gd),{updateListConversationTitle:j}=(0,m.useContext)(ym),S=!(s||null!=b&&b.isSystem),Z=(0,ys.Iq)(Me.iDM,{ref_id:_,ref_type:_P.Conversation,ref_url:l,reported_message_id:t,reported_photo_id:i}),I=x===Ne.Pending,C=y()("message-menu__icon",{"message-menu--hidden":!c}),k=y()("message-menu__content",{"message-menu--hidden":!c});return(0,z.jsxs)("div",{className:"message-menu",children:[(0,z.jsx)(zp,{onOutsideClick:()=>{d(!1)},children:(0,z.jsxs)("div",{className:k,children:[s&&(0,z.jsx)(g.Z,{styling:g.Z.Styling.Lifted,children:(0,z.jsx)(gt.Z,{body:o("actions.delete"),clickable:!0,onClick:()=>{h(!0),d(!1)},testId:"delete-option"})}),S&&(0,z.jsxs)(g.Z,{styling:g.Z.Styling.Lifted,children:[(0,z.jsx)(gt.Z,{body:o("actions.report"),url:Z,testId:"report-option"}),v?r?(0,z.jsx)(gt.Z,{body:o("actions.unlike"),clickable:!0,onClick:()=>{i?(async()=>{const e=null==r?void 0:r.id;_&&i&&e&&(f(Ne.Pending),"errors"in await(0,Fe.m9e)({conversationId:_,messageId:t,photoId:i,reactionId:e})?f(Ne.Failure):(a(Dm.setMessageUnliked({messageId:t,photoId:i,reactionId:e})),f(Ne.Success)))})():(async()=>{const e=null==r?void 0:r.id;_&&e&&(f(Ne.Pending),"errors"in await(0,Fe.Ypy)({conversationId:_,messageId:t,reactionId:e})?f(Ne.Failure):(a(Dm.setMessageUnliked({messageId:t,photoId:i,reactionId:e})),f(Ne.Success)))})()},testId:"unlike-reaction-option",aria:{"aria-disabled":I},disabled:I}):(0,z.jsx)(gt.Z,{body:o("actions.like"),clickable:!0,onClick:()=>{i?(async()=>{if(!_||!i)return;f(Ne.Pending);const e=await(0,Fe.kNI)({conversationId:_,messageId:t,photoId:i,reactionType:Gc.Heart});if("errors"in e)return void f(Ne.Failure);const n=((e,t,i)=>{const n=AP(e).messages.find((e=>{let{message:i}=e;return i&&"id"in i&&i.id===t})),s=null==n?void 0:n.message,r=null==s?void 0:s.photos.find((e=>{let{id:t}=e;return t===i}));return null==r?void 0:r.reaction})(e.conversation,t,i);n?(a(Dm.setMessageLiked({messageId:t,photoId:i,reaction:n})),f(Ne.Success)):f(Ne.Failure)})():(async()=>{if(!_)return;f(Ne.Pending);const e=await(0,Fe.O9P)({conversationId:_,messageId:t,reactionType:Gc.Heart});if("errors"in e)return void f(Ne.Failure);const n=((e,t)=>{const i=AP(e).messages.find((e=>{let{message:i}=e;return i&&"id"in i&&i.id===t}));return(null==i?void 0:i.message).reaction})(e.conversation,t);n?(a(Dm.setMessageLiked({messageId:t,photoId:i,reaction:n})),f(Ne.Success)):f(Ne.Failure)})()},testId:"like-reaction-option",aria:{"aria-disabled":I},disabled:I}):null]})]})}),(0,z.jsx)("span",{"data-testid":"menu-icon",className:C,children:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,clickable:!0,onClick:()=>{d(!c)},children:(0,z.jsx)(ht.Z,{name:"vertical-dots",color:ht.Z.Color.GreyscaleLevel4,size:ht.Z.Size.Small})})}),(0,z.jsx)(MP,{show:u,onConfirm:async()=>{_&&(i?await(async()=>{_&&i&&await(0,Fe.DCS)({conversationId:_,messageId:t,photoId:i})})():await(async()=>{_&&await(0,Fe.$Zg)({conversationId:_,messageId:t})})(),n&&j({id:_,title:o("message_deleted")}),a(Dm.setMessageDeleted({messageId:t,photoId:i})),h(!1))},onCancel:()=>{h(!1)}})]})},BP=e=>{let{isCurrentAuthor:t,onClick:i}=e;const n=y()("conversation-message__suspicious-overlay",{"conversation-message__current-author":t});return(0,z.jsx)("span",{role:"presentation",className:n,onClick:i,children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,theme:"inverse",children:(0,z.jsxs)("div",{className:"u-ui-padding-regular",children:[(0,z.jsx)(Nm,{breakpoint:"desktops",children:(0,z.jsx)(wx,{id:"conversation.suspicious_photo.desktops"})}),(0,z.jsx)(Nm,{breakpoint:"portables",children:(0,z.jsx)(wx,{id:"conversation.suspicious_photo.portables"})})]})})})},qP=e=>{let{photo:t,isCurrentAuthor:i,isLastAndRead:n,isLast:s,showTime:r,createdTime:a,isSentFromMobile:o,messageId:l}=e;const c=U("conversation.message"),d=(0,p.v9)(Gd),u=(0,p.v9)(Wt("conversation_reactions_web")),[g,h]=(0,m.useState)(t.isSuspicious),f=!!t.reaction,{url:_,thumbnails:b}=t,j=(0,v.last)(b),S=(null==j?void 0:j.url)||_,Z=()=>(0,z.jsx)(Kl.U,{testId:"thumbnail",src:S,size:Kl.U.Size.X2Large,styling:Kl.U.Styling.Rounded}),I=y()("u-position-relative","conversation-message-container","conversation-message-container__grouped",{"conversation-message-container__current-author":i}),C=y()("conversation-message-menu-container",{"conversation-message-menu-container--reverse":!i});return(0,z.jsxs)(z.Fragment,{children:[r?(0,z.jsx)(oP,{time:a,isFromMobileApp:o}):null,(0,z.jsx)("div",{className:I,"data-ch":Dx.WebConversation,children:(0,z.jsxs)("div",{className:C,children:[t.isHidden?null:(0,z.jsx)(UP,{messageId:l,photoId:t.id,isLast:s,isCurrentAuthor:i,reaction:null==t?void 0:t.reaction}),(0,z.jsxs)("div",{children:[(()=>{const e=t.isHidden?i?c("a11y.deleted_message_from_me"):c("a11y.deleted_message_from_member",{member:null==d?void 0:d.login}):i?c("a11y.photo_message_from_me"):c("a11y.photo_message_from_member",{member:null==d?void 0:d.login}),n=y()("conversation-message__photo",{"conversation-message__photo--reaction":f});return t.isHidden?(0,z.jsx)(SP,{inverse:i,aria:{"aria-label":e}}):(0,z.jsx)("a",{href:_,rel:"fancybox","aria-label":e,"data-testid":"photo-message-link",children:u?(0,z.jsxs)("div",{className:n,children:[Z(),f?(0,z.jsx)("div",{className:"conversation-message__reaction-badge",children:(0,z.jsx)(ht.Z,{color:ht.Z.Color.Primary,name:"heart-filled",size:ht.Z.Size.XSmall,title:c("a11y.heart_badge"),testId:"heart-filled-icon"})}):null]}):Z()})})(),g?(0,z.jsx)(BP,{isCurrentAuthor:i,onClick:async()=>{"errors"in await(0,Fe.VcN)(t.id)||h(!1)}}):null,i&&n?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),(0,z.jsx)("div",{className:"u-text-right",children:(0,z.jsx)(xt.Z,{text:c("is_read"),theme:"muted",type:xt.Z.Type.Caption,alignment:xt.Z.Alignment.Right})})]}):null]})]})})]})};var VP=i(46433),HP=i.n(VP);const GP="linkified-message",WP=(e,t)=>(0,z.jsx)("a",{href:e,children:t}),XP=e=>{let{text:t,escapeText:i,renderUrl:n=WP,renderHashtag:s=WP,renderMention:r=WP}=e;const{messages:a,formatMessage:o}=(0,O.Z)();if(!t)return null;const l=((e,t,i)=>{try{let n=e;i&&(n=(0,v.escape)(n));const s=((e,t)=>{try{const i=(0,v.uniq)(HP().extractHashtags(e))||[],n={};let s=e;return i.forEach(((e,i)=>{const r="hashtag".concat(i+1),a="#".concat(e),o=new RegExp(a,"g"),l="".concat(Me.JXU,"?").concat((0,ys.Kf)({search_text:a}));n[r]=t(l,a),s=s.replace(o,"{".concat(r,"}"))})),{text:s,values:n}}catch(t){return{text:e}}})(n,t.hashtag),r=((e,t)=>{try{const i=(0,v.uniq)(HP().extractMentions(e))||[],n={};let s=e;return i.forEach(((e,i)=>{const r="mention".concat(i+1),a="@".concat(e),o=new RegExp(a,"g"),l="/mentions/"+e;n[r]=t(l,a),s=s.replace(o,"{".concat(r,"}"))})),{text:s,values:n}}catch(t){return{text:e}}})(s.text,t.mention),a=(0,ys.lN)(r.text,t.url),o={...s.values,...r.values,...a.values};return{text:a.text,values:Object.keys(o).length?o:void 0}}catch(t){return{text:e}}})((0,v.unescape)(t),{url:n,hashtag:s,mention:r},i);return a[GP]=l.text,(0,z.jsx)("span",{children:o({id:GP},l.values)})},YP=e=>{let{isOpen:t,onCancel:i,onContinue:n}=e;const s=U("conversation.conversation_info.leaving_vinted_modal");return(0,z.jsx)(cp.Z,{show:t,testId:"leaving-vinted-modal",title:s("title"),body:s("body"),actions:[{callback:n,style:cp.Z.ActionStyling.Filled,text:s("actions.continue"),testId:"leaving-vinted-modal--continue-button"},{callback:i,style:cp.Z.ActionStyling.Flat,text:s("actions.cancel"),testId:"leaving-vinted-modal--cancel-button"}]})},KP=e=>{let{text:t}=e;const{track:i}=vi(),[n,s]=(0,m.useState)(!1),[r,a]=(0,m.useState)(null),o=()=>s(!1);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(XP,{text:t,renderUrl:(e,t)=>(0,z.jsx)("a",{href:e,onClick:t=>(async(e,t)=>{var n;e.preventDefault();const r=(0,ls.n6)(),o=t.replace(/^\/\//,"http://"),l=await(0,Fe.lU0)(o);if(!("errors"in l))return(null===(n=l.app_links[o])||void 0===n?void 0:n.web)?void(r&&(r.location.href=t)):(null==r||r.close(),i(Ri({target:qm.ShowLeavingModal})),s(!0),void a(t));r&&(r.location.href=t)})(t,e),children:t})}),n&&(0,z.jsx)(YP,{isOpen:n,onCancel:()=>{i(Ri({target:qm.CancelLeavingModal})),o()},onContinue:()=>{r&&(i(Ri({target:qm.ProceedFromLeavingModal})),o(),(e=>{const t=(0,ls.n6)(e,"_blank");t&&(t.opener=null)})(r))}})]})},JP=e=>{let{isCurrentAuthor:t,isLastAndRead:i,isLast:n,isGrouped:s,createdTime:r,isPortalMessage:a,message:o}=e;const l=U("conversation.message"),c=(0,p.v9)(Gd),[d,u]=(0,m.useState)(!s),g=(0,p.v9)(Wt("conversation_reactions_web")),h=o.isSentFromMobile&&!(null!=c&&c.isSystem)&&!a,f=(null==c?void 0:c.isSystem)&&a,v=!!o.reaction,_=y()("conversation-message-container","u-ui-margin-top-medium",{"conversation-message-container__current-author":t,"conversation-message-container__grouped":s}),b=y()("conversation-message-menu-container",{"conversation-message-menu-container--reverse":!t});return(0,z.jsxs)(z.Fragment,{children:[d?(0,z.jsx)(oP,{time:r,isFromMobileApp:h}):null,(0,z.jsxs)("div",{className:_,children:[(()=>{if(!c||s)return null;const{photo:e,profileUrl:i,isSystem:n}=c;return(0,z.jsx)("div",{className:"u-ui-margin-right-regular u-inline-block u-float-left",children:(0,z.jsx)(Ax,{photo:e,profileUrl:i,isSystem:n,isCurrentAuthor:t,alt:l("a11y.user_profile_picture",{username:c.login})})})})(),(0,z.jsxs)("div",{className:b,children:[o.isHidden?null:(0,z.jsx)(UP,{messageId:o.id,isLast:n,isCurrentAuthor:t,reaction:null==o?void 0:o.reaction}),(0,z.jsxs)("div",{className:"conversation-message","data-ch":Dx.PrivateMessaging,onClick:()=>{s&&u((e=>!e))},children:[(()=>{const e=o.isHidden?t?l("a11y.deleted_message_from_me"):l("a11y.deleted_message_from_member",{member:null==c?void 0:c.login}):t?l("a11y.message_from_me",{content:o.content}):l("a11y.message_from_member",{member:null==c?void 0:c.login,content:o.content}),i=f?(0,ys.Kw)(o.content):(0,z.jsx)(KP,{text:o.content});return o.isHidden?(0,z.jsx)(SP,{inverse:t,aria:{"aria-label":e}}):g?(0,z.jsxs)("div",{className:"conversation-message__bubble",children:[(0,z.jsx)(Lt.Z,{inverse:t,children:(0,z.jsx)(xt.Z,{theme:"amplified",text:i,aria:{"aria-label":e},html:f,format:!0})}),v?(0,z.jsx)("div",{className:"conversation-message__reaction-badge",children:(0,z.jsx)(ht.Z,{color:ht.Z.Color.Primary,name:"heart-filled",size:ht.Z.Size.XSmall,title:l("a11y.heart_badge"),testId:"heart-filled-icon"})}):null]}):(0,z.jsx)(Lt.Z,{inverse:t,children:(0,z.jsx)(xt.Z,{theme:"amplified",text:i,aria:{"aria-label":e},html:f,format:!0})})})(),t&&i?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),(0,z.jsx)("div",{className:"u-text-right",children:(0,z.jsx)(xt.Z,{text:l("is_read"),theme:"muted",type:xt.Z.Type.Caption,alignment:xt.Z.Alignment.Right})})]}):null]})]})]})]})},QP=e=>{let{message:t,isGrouped:i,isLast:n,isCurrentAuthor:s,entityType:r,createdTime:a}=e;const o=(0,p.v9)(Gd),l=(0,p.v9)(Kd),c=t.content||t.isHidden;return(0,z.jsxs)(z.Fragment,{children:[c&&(0,z.jsx)(JP,{isCurrentAuthor:s,message:t,createdTime:a,isPortalMessage:r===Hc.PortalMessage,isGrouped:i,isLast:n,isLastAndRead:n&&!!l}),t.photos.map(((e,i)=>{const c=n&&!!l&&i+1===t.photos.length,d=t.isSentFromMobile&&!(null!=o&&o.isSystem)&&r!==Hc.PortalMessage;return(0,z.jsx)(qP,{photo:e,isCurrentAuthor:s,isLastAndRead:c,isLast:n,showTime:0===i,createdTime:a,isSentFromMobile:d,messageId:t.id},i)}))]})},$P=e=>{let{text:t,url:i,onClick:n,styling:s,testId:r}=e;const a=(0,p.v9)(Wt("web_platform_conversations_offer_request_message_api_update")),o=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];const[s,r]=(0,m.useState)(!1);return{isLoading:s,disabled:s,async onClick(){r(!0),await e(...i),r(!1)}}}(n);return a?(0,z.jsx)(ic.I,{...o,text:t,size:ic.I.Size.Medium,styling:s,testId:r}):(0,z.jsx)(ic.I,{text:t,url:i,"data-method":"put",size:ic.I.Size.Medium,styling:s,testId:r})};$P.Styling=ic.I.Styling;const ez=$P,tz=e=>{let{isGrouped:t,message:i,createdTime:n}=e;const s=U("conversation"),{track:r}=vi(),a=(0,p.v9)(Nc),o=(0,p.v9)(X),l=(0,p.v9)(Rd),c=(0,p.v9)(Gd),d=i.userId===String(o),u=i.status===Yc.Pending&&!d,m=(e,t)=>async()=>{if(null==l||!l.transactionId)return;const{price:n,originalPrice:s}=i;r((e=>{const{action:t,transactionId:i,currentPrice:n,offeredPrice:s}=e,r={transaction_id:i,current_price:Number(n),offered_price:Number(s)};return{event:"seller.".concat(t,"_offer_request"),extra:r}})({action:t,transactionId:l.transactionId,currentPrice:s,offeredPrice:n})),await e({transactionId:l.transactionId,offerRequestId:Number(i.offerRequestId)}),(0,ls.sl)()},{statusTitle:g,status:h}=i,f=h!==Yc.Pending||d,v=y()("conversation-message",{"conversation-message__current-author":d,"conversation-message__actions":u});return(0,z.jsxs)(z.Fragment,{children:[!t&&(0,z.jsx)(oP,{time:n}),(0,z.jsxs)("div",{className:"u-fill-width u-inline-block",children:[(()=>{if(!c)return null;const{photo:e,profileUrl:t,isSystem:i}=c;return(0,z.jsx)("div",{className:"u-ui-margin-right-regular u-inline-block u-float-left",children:(0,z.jsx)(Ax,{photo:e,profileUrl:t,isSystem:i,isCurrentAuthor:d})})})(),(0,z.jsx)("div",{className:v,children:(0,z.jsxs)(Lt.Z,{inverse:d,children:[(()=>{const{status:e,isPriceFixed:t}=i;return t||e!==Yc.Pending&&e!==Yc.Accepted?null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:s("currency_exchange_rate_note")}),(0,z.jsx)(x.Z,{})]})})(),(()=>{const{price:e,originalPrice:t,currency:n}=i,s=Ma(e,{currency:n,locale:a}),r=Ma(t,{currency:n,locale:a});return(0,z.jsxs)("div",{children:[(0,z.jsx)(xt.Z,{text:s,type:xt.Z.Type.Title,testId:"offer-current-price-label"}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)(xt.Z,{text:r,type:xt.Z.Type.Title,theme:"muted",strikethrough:!0,testId:"offer-original-price-label"})]})})(),f&&(0,z.jsx)(xt.Z,{text:g,testId:"offer-status-title"}),u&&null!=l&&l.transactionId?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{}),(0,z.jsx)(ez,{text:s("offer_request.accept"),url:(0,Me.Wqt)(l.transactionId,i.offerRequestId),onClick:m(Fe.doD,"accept"),styling:ez.Styling.Filled,testId:"offer-message-accept-button"}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(ez,{text:s("offer_request.decline"),url:(0,Me.C$7)(l.transactionId,i.offerRequestId),onClick:m(Fe.t$o,"reject"),testId:"offer-message-decline-button"})]}):null]})})]})]})},iz=e=>{let{conversationId:t,...i}=e;const{entityType:n,message:s}=i;switch(n){case Hc.ActionMessage:case Hc.StatusMessage:return(0,z.jsx)(vP,{...i,message:s});case Hc.ReportSuggestion:return(0,z.jsx)(bP,{conversationId:t});case Hc.OfferMessage:return(0,z.jsx)(jP,{...i,message:s});case Hc.OfferRequestMessage:return(0,z.jsx)(tz,{...i,message:s});case Hc.Message:case Hc.PortalMessage:return(0,z.jsx)(QP,{...i,message:s});default:return null}},nz=e=>{let{card:t}=e;const{track:i}=vi(),{logCardClick:n,logCardImpression:s,inboxMessageCardStore:r}=(0,m.useContext)(Im),a=(0,m.useRef)(!0),o=(0,m.useRef)(null),[l,c]=(0,m.useState)(!1),[d,u]=(0,m.useState)(!1),p=!!t.linkText&&!!t.url,g=!t.extras.videoURL&&!!t.imageUrl,h=!!t.extras.videoURL&&!!t.imageUrl,f=t.id;(0,m.useEffect)((()=>{const e=t.viewed;s(f).then((t=>{t&&!e&&r.state&&(r.state=Array.from(r.state||[]))}))}),[f]);const y=()=>{c(!1)},v=()=>{if(!o.current)return;const e=Number(o.current.duration.toFixed(2)),n=Number(o.current.currentTime.toFixed(2)),s=e===n;if(s&&!a.current)return;s&&(a.current=!1);const r=JSON.parse(t.extras.tracking),l=JSON.stringify({campaign_name:r.campaign_name,campaign_message_name:r.campaign_message_name,canvas_name:r.canvas_name,canvas_variant_name:r.canvas_variant_name,video_url:t.extras.videoURL,video_length:e,length_watched:n});i(Gi({target:cb.CrmMessageVideo,screen:$t.MessageReply,targetDetails:l}))},_=()=>{u(!1),v(),a.current=!0},b=e=>(0,z.jsx)("div",{className:"u-position-absolute u-fill-width",children:(0,z.jsx)(Pm.Z,{theme:"transparent",right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,inline:!0,onClick:e,deprecatedIconName:"x",deprecatedIconColor:ht.Z.Color.GreyscaleLevel7,testId:"braze-message-video-close-button"})})});return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(oP,{time:t.updated.toISOString()}),(0,z.jsxs)("div",{className:"u-ui-padding-bottom-small u-ui-margin-top-medium u-flexbox",children:[(0,z.jsx)("div",{className:"u-ui-margin-right-regular",children:(0,z.jsx)(Kl.U,{src:t.extras.logoURL||Ve,fallbackSrc:Ve,size:Kl.U.Size.Medium,styling:Kl.U.Styling.Circle,testId:"braze-message-logo"})}),(0,z.jsxs)("div",{className:"braze-conversation-message","data-testid":"braze-message-content",children:[g&&(0,z.jsx)("div",{className:"u-ui-margin-bottom-large u-cursor-pointer u-fill-width",onClick:()=>{c(!0)},children:(0,z.jsx)(Kl.U,{src:t.imageUrl,styling:Kl.U.Styling.Rounded})}),h&&(0,z.jsxs)("div",{className:"u-ui-margin-bottom-large u-cursor-pointer u-position-relative u-inline-block",onClick:()=>{u(!0)},children:[(0,z.jsx)(Kl.U,{src:t.imageUrl,styling:Kl.U.Styling.Rounded}),(0,z.jsx)("div",{className:"braze-conversation-message__video-thumbnail-play-button",children:(0,z.jsx)(Kl.U,{src:"/assets/onboarding-modal/play-button.svg",size:Kl.U.Size.Medium})})]}),(0,z.jsxs)(Lt.Z,{children:[(0,z.jsx)("span",{onClick:e=>{if(!(e.target instanceof HTMLAnchorElement))return;const n=JSON.parse(t.extras.tracking),s=JSON.stringify({url:e.target.href,campaign_name:n.campaign_name,campaign_message_name:n.campaign_message_name,canvas_name:n.canvas_name,canvas_variant_name:n.canvas_variant_name});i(Ri({target:qm.CrmMessageLink,screen:$t.MessageReply,targetDetails:s}))},children:(0,z.jsx)(xt.Z,{theme:"amplified",format:!0,html:!0,text:(0,ys.Kw)(t.description),testId:"braze-message-text"})}),p&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(ic.I,{text:t.linkText,onClick:()=>{n(f)},url:t.url,size:ic.I.Size.Medium,styling:ic.I.Styling.Filled})]})]})]}),(0,z.jsxs)(cp.Z,{show:l,closeOnOverlay:!0,defaultCallback:y,className:"braze-conversation-message__banner-overlay",children:[b(y),(0,z.jsx)(Kl.U,{src:t.imageUrl,styling:Kl.U.Styling.Rounded})]}),h&&(0,z.jsxs)(cp.Z,{show:d,closeOnOverlay:!0,defaultCallback:_,className:"u-width-auto u-position-relative",children:[b(_),(0,z.jsx)("div",{className:"u-transform-style-preserve-3d",children:(0,z.jsx)("video",{ref:o,"data-testid":"braze-message-video",className:"braze-conversation-message__video",autoPlay:!0,controls:!0,disablePictureInPicture:!0,controlsList:"nodownload noplaybackrate",muted:!0,onEnded:()=>{v()},children:(0,z.jsx)("source",{"data-testid":"braze-message-video-source",src:t.extras.videoURL})})})]})]})]})},sz=e=>{let{toggleSidebar:t}=e;const{relativeUrl:i}=xc(),n=Bc(i),s=(0,p.v9)(Xd),r=(0,p.v9)(X),a=(0,p.v9)(Gd),o=(0,p.v9)(Rd),{inboxMessageCards:l}=Cm(),c=(0,m.useMemo)((()=>null==l?void 0:l.find((e=>e.id===n))),[n,l]),d=e=>{if(e.entityType!==Hc.Message)return!1;const t=e.message;return t.userId!==(null==r?void 0:r.toString())&&(null==a?void 0:a.id)!==String(null==t?void 0:t.userId)?String(null==t?void 0:t.userId)!==(null==a?void 0:a.id):(null==t?void 0:t.userId)===(null==r?void 0:r.toString())};if(c)return(0,z.jsx)(nz,{card:c});if(!s)return null;const u=(null==o?void 0:o.buyerId)===r?md.Buyer:md.Seller;return(0,z.jsx)(z.Fragment,{children:s.map(((e,i)=>{return(0,z.jsx)(iz,{...e,userSide:u,transactionId:null==o?void 0:o.transactionId,isGrouped:(n=e,r=null==s?void 0:s[i-1],!(!n||!r)&&!!function(e,t){const i=e.message,n=t.message;return!(!i||!n)&&"".concat(i.userId)==="".concat(n.userId)}(n,r)&&function(e,t){return Ux(e)&&Ux(t)}(n,r)),isLast:i+1===s.length,isCurrentAuthor:d(e),toggleSidebar:t,conversationId:null==o?void 0:o.id},i);var n,r}))})},rz=()=>{const e=(0,p.I0)(),{track:t}=vi(),i=U("conversation.suggested_messages"),n=(0,p.v9)(Vd),s=(0,m.useRef)(new Set),r=(i,n,s)=>()=>{t((e=>{const{id:t,position:i}=e,n={id:t};return i&&(n.position=i),{event:"user.click_suggested_message",extra:n}})({id:i.toString(),position:s})),e(Dm.postReplyRequest({value:n}))},a=(e,i)=>()=>{s.current.has(e)||(s.current.add(e),t((e=>{const{id:t,position:i}=e,n={id:t};return i&&(n.position=i),{event:"user.view_suggested_message",extra:n}})({id:e.toString(),position:i})))};return null!=n&&n.length?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(ah.Z,{text:(0,z.jsx)(xt.Z,{html:!0,text:i("note"),type:xt.Z.Type.Caption,alignment:xt.Z.Alignment.Center}),alignment:ah.Z.Alignment.Center,styling:ah.Z.Styling.Wide,inverse:!0}),(0,z.jsx)(L,{separator:(0,z.jsx)(x.Z,{}),children:n.map(((e,t)=>{let{id:i,text:n}=e;return(0,z.jsx)(Jp.h,{onEnter:a(i,t+1),children:(0,z.jsx)("div",{className:"u-flexbox u-justify-content-flex-end",children:(0,z.jsx)(Jw.j,{radius:Jw.j.Radius.Round,text:n,textType:xt.Z.Type.Subtitle,suffix:(0,z.jsx)(ht.Z,{name:"arrow-right",size:ht.Z.Size.XSmall}),onClick:r(i,n,t+1)})})},i)}))})]}):null},az=e=>{let{toggleSidebar:t=v.noop}=e;const i=(0,p.v9)(Yd),n=(0,p.v9)(Rd),s=(0,p.v9)(Wt("conversation_translation_web")),r=(0,m.createRef)(),a=(0,m.useCallback)((()=>{requestAnimationFrame((()=>{r.current&&r.current.scrollTo(0,r.current.scrollHeight)}))}),[r]);return(0,m.useEffect)((()=>{a()}),[a]),(0,z.jsx)("div",{className:"thread__content",ref:r,children:(0,z.jsxs)("div",{className:"u-ui-margin-top-large",children:[null!=n&&n.id?(0,z.jsx)(Kp,{screen:$t.MessageReply,params:{user_msg_thread_id:n.id}}):null,(0,z.jsx)(Mx,{}),(0,z.jsx)(sz,{toggleSidebar:t}),(0,z.jsx)(rz,{}),s&&i!==Ue.None?(0,z.jsx)(Ex,{}):null]})})};var oz;!function(e){e[e.Reserve=0]="Reserve",e[e.RemoveReservation=1]="RemoveReservation"}(oz||(oz={}));const lz=e=>{let{transaction:t,oppositeUser:i}=e;const n=U("conversation.conversation_info"),[s,r]=(0,m.useState)(null),[a,o]=(0,m.useState)(!1);if(null==t||!t.availableActions)return null;const{availableActions:l}=t;return(0,z.jsxs)(z.Fragment,{children:[l.includes(hd.MarkAsSold)&&t?(0,z.jsx)(gt.Z,{title:n("transaction_actions.mark_as_sold"),url:(0,Me.Yi3)(t.id),prefix:(0,z.jsx)(ht.Z,{name:"price-tag",color:ht.Z.Color.Primary}),type:gt.Z.Type.Navigating}):null,l.includes(gd.Reserve)&&t?null!==(c=t.order)&&void 0!==c&&c.reserved?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{title:n("transaction_actions.unreserve"),prefix:(0,z.jsx)(ht.Z,{name:"bookmark-filled",color:ht.Z.Color.Primary}),onClick:function(e){e.preventDefault(),r(oz.RemoveReservation)},type:gt.Z.Type.Navigating}),(0,z.jsx)(Qg,{show:s===oz.RemoveReservation,theme:"primary",translationsPrefix:"conversation.conversation_info.remove_reservation_modal",onConfirm:async function(){await async function(){null!=t&&t.order&&!a&&(o(!0),await(0,Fe.HcE)(t.id,!1),o(!1))}(),r(null)},onCancel:function(){r(null)}})]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{title:n("transaction_actions.reserve"),onClick:function(){r(oz.Reserve)},prefix:(0,z.jsx)(ht.Z,{name:"bookmark",color:ht.Z.Color.Primary}),type:gt.Z.Type.Navigating}),(0,z.jsx)(Qg,{show:s===oz.Reserve,theme:"primary",translationsPrefix:"conversation.conversation_info.reserve_modal",onConfirm:async function(){t&&i&&!a&&(o(!0),await(0,Fe.HcE)(t.id,!0),o(!1),r(null))},onCancel:function(){r(null)}})]}):null]});var c},cz=e=>{let{userId:t,username:i,isUserBlocked:n,isVisible:s,onCancel:r,onConfirm:a}=e;const o=U("user.".concat(n?"unblock_modal":"block_modal")),l=(0,p.v9)(X);return(0,z.jsx)(cp.Z,{show:s,title:o("title",{username:i}),body:(0,z.jsx)(xt.Z,{text:o("body",{learn_more_link:(0,z.jsx)(_p,{type:bp.BlockingMember,render:e=>(0,z.jsx)("a",{href:e,target:"_blank",rel:"noreferrer",children:o("learn_more_link")})})}),html:!0}),testId:"user-block-modal",actions:[{text:o(n?"actions.unblock":"actions.block"),callback:async()=>{if(!l)return;const e=n?Fe.zvU:Fe.rfe;await e({currentUserId:l,blockedUserId:t}),a()},style:ic.I.Styling.Filled,theme:n?"primary":"warning",testId:"user-block-modal--".concat(n?"unblock":"block")},{text:o("actions.cancel"),callback:r,theme:n?"primary":"muted",style:ic.I.Styling.Flat,testId:"user-block-modal--cancel"}]})},dz=e=>{let{conversationId:t,show:i,onConfirm:n,onCancel:s}=e;const r=U("conversation.conversation_info.delete_conversation_modal"),{logCardDismissal:a}=(0,m.useContext)(Im);return(0,z.jsx)(cp.Z,{show:i,title:r("title"),body:r("body"),actions:[{text:r("buttons.confirm"),style:cp.Z.ActionStyling.Filled,theme:"warning",callback:async()=>{"string"==typeof t&&a(String(t)),await(0,Fe.SJ8)(t),n()}},{text:r("buttons.cancel"),style:cp.Z.ActionStyling.Flat,theme:"muted",callback:s}]})},uz=e=>({id:e.id,hasInput:e.has_input,reason:e.reason});let mz;!function(e){e.Reason="reason",e.UserExplanation="userExplanation"}(mz||(mz={}));const pz=e=>{let{show:t,transactionId:i,onSuccess:n,onCancel:s}=e;const{track:r}=vi(),a=U("conversation.conversation_info.cancel_transaction_modal"),[o,l]=(0,m.useState)(Ne.Idle),[c,d]=(0,m.useState)([]),u=(0,th.cI)(),{control:p,watch:g,handleSubmit:h,formState:{isSubmitting:f,errors:y}}=u,_=fh(y),b=function(){const e=U();return function(t){const i=e("conversation.conversation_info.cancel_transaction_modal.fields.".concat((0,v.snakeCase)(t),".title"));return{value:!0,message:e("errors.blank",{field:i})}}}(),j=g(mz.Reason);(0,m.useEffect)((()=>{t&&r(rn({screen:$t.TransactionCancellationReasons,transactionId:i}))}),[t,r,i]),(0,m.useEffect)((()=>{t&&async function(){l(Ne.Pending);const e=await(0,Fe.G24)(i);if("errors"in e)return void l(Ne.Failure);const t=(e=>e.map(uz))(e.reasons);d(t),l(Ne.Success)}()}),[t,i]);const S=h((async e=>{const{reason:t,userExplanation:s}=e;"errors"in await(0,Fe.o_z)({id:i,reasonId:t,userExplanation:s})||n()}));return(0,z.jsxs)(cp.Z,{show:t,children:[(0,z.jsx)(Pm.Z,{body:a("title"),right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,onClick:s,deprecatedIconName:"x",inline:!0})}),(0,z.jsx)("div",{className:"modal-contained-content u-ui-padding-horizontal-x2-large",children:o===Ne.Pending?(0,z.jsx)(Mp,{styling:Mp.Styling.Wide}):(0,z.jsxs)(th.RV,{...u,children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,body:a("body")}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),function(){const e=c.map((e=>({value:e.id,label:e.reason})));return(0,z.jsx)(th.Qr,{name:mz.Reason,render:t=>{let{field:i}=t;return(0,z.jsx)(yb.R,{...i,options:e,styling:yb.R.Styling.Tight,title:a("fields.reason.title"),placeholder:a("fields.reason.placeholder"),required:!0,validation:hh(_(mz.Reason))})},control:p,rules:{required:b(mz.Reason)}})}(),function(){if(!j)return null;const e=c.find((e=>{let{id:t}=e;return t===Number(j)}));return null!=e&&e.hasInput?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(th.Qr,{name:mz.UserExplanation,render:e=>{let{field:t}=e;return(0,z.jsx)(Gw,{...t,rows:4,maxLength:100,validation:hh(_(mz.UserExplanation)),styling:"tight",title:a("fields.user_explanation.title")})},defaultValue:null,rules:{required:b(mz.UserExplanation)}})]}):null}()]})}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(ic.I,{disabled:o===Ne.Pending||f,text:a("buttons.confirm"),styling:ic.I.Styling.Filled,onClick:S,testId:"cancel-transaction-modal-confirm"})})]})};var gz;!function(e){e[e.CancelTransaction=0]="CancelTransaction",e[e.DeleteConversation=1]="DeleteConversation",e[e.BlockUser=2]="BlockUser"}(gz||(gz={}));const hz=e=>{let{transaction:t,conversationId:i,oppositeUser:n,userId:s}=e;const r=U(),a=U("conversation.conversation_info"),{track:o}=vi(),l=(0,p.I0)(),{relativeUrl:c}=xc(),d=(0,p.v9)(Wt("conversation_blocking_improvements")),[u,g]=(0,m.useState)(null),{inboxMessageCards:h}=Cm(),x=(0,m.useMemo)((()=>null==h?void 0:h.find((e=>e.id===i))),[i,h]);function f(){g(null)}function y(){g(gz.DeleteConversation)}function v(){f(),(0,ls.ru)(Ec)}function _(){f(),(0,ls.sl)()}async function b(){if(!n||!s)return;if(d)return void g(gz.BlockUser);const e=n.isHated?Fe.zvU:Fe.rfe;await e({currentUserId:s,blockedUserId:Number(n.id)}),(0,ls.sl)()}return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{title:a("conversation_actions.help"),prefix:(0,z.jsx)(ht.Z,{name:"question-circle",color:ht.Z.Color.Primary}),type:gt.Z.Type.Navigating,url:t?(0,ys.Iq)((0,Me.wwh)(t.id),{access_channel:Be.Si.ConversationTx,ref_url:c,related_only:!1}):(0,ys.Iq)(Me.TVB,{access_channel:Be.Si.ConversationNoTx,ref_url:c}),onClick:function(){if(!t)return;const e={transaction_id:t.id};o(Ri({target:qm.Help,screen:$t.OrderDetails,targetDetails:JSON.stringify(e)}))}}),(null==t?void 0:t.availableActions.includes(hd.Cancel))&&t?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{title:a("conversation_actions.cancel"),prefix:(0,z.jsx)(ht.Z,{name:"cancel-circle",color:ht.Z.Color.Warning}),type:gt.Z.Type.Navigating,onClick:function(){g(gz.CancelTransaction)},testId:"conversation-actions-cancel"}),t?(0,z.jsx)(pz,{show:u===gz.CancelTransaction,transactionId:t.id,onSuccess:function(){f(),i&&s&&l(eg({conversationId:i}))},onCancel:f}):null]}):null,function(){var e;const s=null==t||null===(e=t.availableActions)||void 0===e?void 0:e.includes(hd.DeleteConversation);if(t&&!s||!i||!n||n.isSystem||x)return null;const r=(0,ys.Iq)(Me.iDM,{ref_id:i,ref_type:_P.Conversation,ref_url:c});return(0,z.jsx)(gt.Z,{title:a("conversation_actions.report"),prefix:(0,z.jsx)(ht.Z,{name:"flag",color:ht.Z.Color.Warning}),type:gt.Z.Type.Navigating,url:r,testId:"conversation-actions-report"})}(),function(){var e;const n=null==t||null===(e=t.availableActions)||void 0===e?void 0:e.includes(hd.DeleteConversation);return t&&!n||!i||!s?null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{title:a("conversation_actions.delete"),prefix:(0,z.jsx)(ht.Z,{name:"trash-bin",color:ht.Z.Color.Warning}),type:gt.Z.Type.Navigating,onClick:y,testId:"conversation-actions-delete"}),(0,z.jsx)(dz,{conversationId:i,show:u===gz.DeleteConversation,onConfirm:v,onCancel:f})]})}(),function(){if(!n||n.isUserUnblockable||x)return null;const e=n.isHated?"unblock":"block";return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{title:r("user.admin.actions.".concat(e)),prefix:(0,z.jsx)(ht.Z,{name:"block",color:ht.Z.Color.Warning}),type:gt.Z.Type.Navigating,onClick:b,testId:"conversation-actions-".concat(e)}),(0,z.jsx)(cz,{userId:Number(n.id),username:n.login,isUserBlocked:n.isHated,isVisible:u===gz.BlockUser,onCancel:f,onConfirm:_})]})}()]})},xz=e=>{let{item:t}=e;const i=U("conversation.moderated_items"),n=(0,v.compact)([t.size,t.status]).join("  "),s=e=>(0,z.jsx)("div",{children:(0,z.jsx)(Kl.U,{src:e,ratio:Kl.U.Ratio.Square,styling:Kl.U.Styling.Rounded,scaling:Kl.U.Scaling.Cover,size:Kl.U.Size.Large})});switch(t.availabilityStatus){case rd.Visible:return(0,z.jsx)(gt.Z,{prefix:s(t.photoUrl),title:t.title,body:n,url:(0,Me.DWf)(t.id),type:gt.Z.Type.Navigating,chevron:!0});case rd.Hidden:return(0,z.jsx)(gt.Z,{prefix:s(t.photoUrl),title:t.title,body:i("hidden"),url:(0,Me.DWf)(t.id),type:gt.Z.Type.Navigating,chevron:!0});case rd.Deleted:return(0,z.jsx)(gt.Z,{prefix:s(t.photoUrl),title:t.title,body:i("deleted"),disabled:!0});case rd.Expired:return(0,z.jsx)(gt.Z,{prefix:s(t.photoUrl),title:i("expired"),body:i("expired_description"),disabled:!0});default:return null}},fz=e=>{var t;let{toggleSidebar:i=v.noop}=e;const{relativeUrl:n}=xc(),s=U(),r=U("inbox"),a=U("conversation.conversation_info"),o=(0,p.v9)(Gd),l=(0,p.v9)(Ad),c=(0,p.v9)(Bd),d=(0,p.v9)(X),u=wt(null==l||null===(t=l.seller)||void 0===t?void 0:t.closetCountdownEndDate);function g(){var e;const t=null==l||null===(e=l.seller)||void 0===e?void 0:e.bundleDiscount;if(!t)return s("bundles.discounts.not_available");const{discounts:i}=t;if(!i||!t.isEnabled)return s("bundles.discounts.not_available");const n=100*Math.max(...i.map((e=>Number(e.fraction)))),r=Math.max(...i.map((e=>e.minimalItemCount)));return s("bundles.discounts.available",{availableDiscount:n,count:r})}function f(){if(null==l||!l.seller||u)return null;const e=(0,ys.Iq)((0,Me.RR)(l.seller.id),{transaction_id:l.id});return(0,z.jsx)(tp,{url:e,screen:$t.OrderDetails,children:e=>{let{onClick:t}=e;return(0,z.jsx)(gt.Z,{chevron:!0,title:a("edit_order"),body:g(),prefix:(0,z.jsx)(ht.Z,{name:"plus-square",color:ht.Z.Color.Primary}),type:gt.Z.Type.Navigating,onClick:t,testId:"conversation-info-add-more-items-cell"})}})}return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Pm.Z,{body:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,children:(0,z.jsx)(xt.Z,{text:a("details"),type:xt.Z.Type.Title,theme:"amplified"})}),right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,theme:"amplified",inline:!0,deprecatedIconName:"x",onClick:i,aria:{"aria-label":r("a11y.close")},testId:"conversation-info-close-button"})}),(0,z.jsx)(h.Z,{}),(0,z.jsxs)("div",{className:"thread__conversation-info",children:[function(){if(!l)return null;const{order:{items:e},availableActions:t}=l;return(0,z.jsxs)(z.Fragment,{children:[null==e?void 0:e.map((e=>(0,z.jsxs)(m.Fragment,{children:[(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,chevron:!0,title:e.title,body:"".concat(e.size,"  ").concat(e.status),prefix:(0,z.jsx)(Kl.U,{src:e.thumbnailUrl,size:Kl.U.Size.Large,styling:Kl.U.Styling.Rounded}),url:e.url}),(0,z.jsx)(h.Z,{})]},e.id))),(null==t?void 0:t.includes(hd.Bundle))&&f()]})}(),c?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(L,{separator:(0,z.jsx)(h.Z,{}),children:c.items.map((e=>(0,z.jsx)(xz,{item:e},e.id)))}),(0,z.jsx)(h.Z,{})]}):null,(0,z.jsx)(lz,{transaction:l,oppositeUser:o}),function(){if(!o)return null;const{login:e,profileUrl:t,photoThumbnail:i}=o;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{title:e,prefix:(0,z.jsx)(Tp,{src:i,size:Kl.U.Size.Medium,styling:Kl.U.Styling.Circle}),url:t,type:gt.Z.Type.Navigating}),(0,z.jsx)(h.Z,{})]})}(),(0,z.jsx)(hz,{transaction:l,conversationId:Bc(n),oppositeUser:o,userId:d}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]})]})},yz=e=>{let{toggleSidebar:t,moderatedItems:i}=e;const n=U("conversation.moderated_items");return 0===i.itemCount?null:(0,z.jsxs)("div",{"data-testid":"moderated-items-header",children:[1===i.itemCount?(0,z.jsx)(xz,{item:i.items[0]}):(0,z.jsx)(gt.Z,{testId:"moderated-items-header-cell",prefix:(0,z.jsx)(Kl.U,{src:i.items[0].photoUrl,label:i.itemCount.toString(),labelStyle:Kl.U.LabelStyle.Tight,ratio:Kl.U.Ratio.Square,styling:Kl.U.Styling.Rounded,scaling:Kl.U.Scaling.Cover,size:Kl.U.Size.Large}),title:n("item_count",{count:i.itemCount},{count:i.itemCount}),type:gt.Z.Type.Navigating,onClick:t,chevron:!0}),(0,z.jsx)(h.Z,{})]})},vz=e=>{let{userLogin:t,oppositeUserId:i}=e;const n=U("conversation.blocked_user_info"),[s,r]=(0,m.useState)(!1),[a,o]=(0,m.useState)(!1),l=(0,p.v9)(Hd),c=(0,p.v9)(X),d=E(),u=()=>{r(!s)},g=()=>{o(!a)};return l&&c?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{title:n("title"),body:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:n("body")}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,text:n("actions.unblock"),onClick:u,inline:!d.phones,testId:"blocked-user-action-unblock"}),(0,z.jsx)(x.Z,{orientation:d.phones?x.Z.Orientation.Horizontal:x.Z.Orientation.Vertical,size:x.Z.Size.Large}),(0,z.jsx)(ic.I,{text:n("actions.delete_conversation"),theme:"warning",onClick:g,inline:!d.phones,testId:"blocked-user-action-delete-conversation"})]})}),(0,z.jsx)(cz,{username:t,isUserBlocked:!0,userId:Number(i),isVisible:s,onCancel:u,onConfirm:()=>{r(!1),(0,ls.sl)()}}),(0,z.jsx)(dz,{conversationId:l,show:a,onConfirm:()=>{o(!1),(0,ls.ru)(Ec)},onCancel:g})]}):null};var _z=i(84488),bz=i(13696),jz=i(22852);const Sz=[{icon:_z.Z,translationKey:"personal_info"},{icon:bz.Z,translationKey:"avoid_links"},{icon:jz.Z,translationKey:"report"}],Zz=e=>{let{onClose:t}=e;const i=U("conversation.first_time_lister_education");return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"first-time-lister-education__header",children:[(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)("div",{className:"u-flexbox",children:(0,z.jsx)(Kl.U,{src:"".concat(Be.Fv,"/assets/first-time-lister-education/phone-lock.png"),size:Kl.U.Size.X3Large,alt:i("single_slide.title")})}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)("div",{className:"u-fill-width first-time-lister-education__tear"})]}),(0,z.jsxs)(nc.Z,{children:[(0,z.jsx)(xt.Z,{text:i("single_slide.title"),type:xt.Z.Type.Heading}),Sz.map((e=>(e=>{let{icon:t,translationKey:n}=e;return(0,z.jsxs)(m.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,prefix:(0,z.jsx)(Wy.Z,{name:t}),title:i("single_slide.".concat(n,".title")),body:i("single_slide.".concat(n,".body"))}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]},"cell-".concat(n))})(e))),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(ic.I,{text:i("actions.got_it"),styling:ic.I.Styling.Filled,onClick:t})]})]})};var Iz=i(81257);const Cz=100,kz=e=>{let{activeBarIndex:t,stepCount:i,timePerStep:n,onFinish:s}=e;const r=(0,m.useRef)(),[a,o]=(0,m.useState)(0),l=t===i-1;return(0,m.useEffect)((()=>(o(0),r.current=setInterval((()=>{o((e=>Math.min(Cz,e+1)))}),n/Cz),()=>{r.current&&clearInterval(r.current)})),[t,i,n]),(0,m.useEffect)((()=>{l&&a===Cz&&(r.current&&clearInterval(r.current),s())}),[l,a,s]),(0,z.jsx)("div",{className:"u-flexbox u-gap-small",children:Array.from({length:i}).map(((e,i)=>{const n=(e=>t===e?a:e<t?Cz:0)(i);return(0,z.jsx)("progress",{"data-testid":"progress-bar-".concat(i),className:"progress-bar",max:Cz,value:n},"progress-bar-".concat(i))}))})},wz=[{title:"slide_1.title",body:"slide_1.body",image:"/assets/first-time-lister-education/phone-vinted-pro.png"},{title:"slide_2.title",body:"slide_2.body",image:"/assets/first-time-lister-education/phone-lock.png"},{title:"slide_3.title",body:"slide_3.body",image:"/assets/first-time-lister-education/phone-hands.png"},{title:"slide_4.title",body:"slide_4.body",image:"/assets/first-time-lister-education/megaphone-messages.png"}];var Pz;!function(e){e.NotStarted="notStarted",e.InProgress="inProgress",e.Finished="finished"}(Pz||(Pz={}));const zz=e=>{let{onClose:t}=e;const i=U("conversation.first_time_lister_education"),[n,s]=(0,m.useState)(0),[r,a]=(0,m.useState)(Pz.NotStarted),o=(0,m.useRef)(),l=Xn({abTestName:"first_time_lister_education"}),c=(null==l?void 0:l.variant)===$k.B,d=wz.length-1,u=d===n;(0,m.useEffect)((()=>((()=>{if(c)if(u){if(!o.current)return;clearInterval(o.current)}else r===Pz.InProgress&&(o.current=setInterval((()=>{s((e=>e+1))}),5e3))})(),()=>{o.current&&clearInterval(o.current)})),[r,c,u]);const p=()=>{u?t():(0===n&&a(Pz.InProgress),s(n+1))},g=e=>(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)("div",{className:"u-flexbox",children:(0,z.jsx)(Kl.U,{src:"".concat(Be.Fv).concat(e.image),size:Kl.U.Size.X3Large,alt:i(e.title)})}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(xt.Z,{text:i(e.title),type:xt.Z.Type.Heading,alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(xt.Z,{text:i(e.body),type:xt.Z.Type.Body,alignment:xt.Z.Alignment.Center}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large})]});return(0,z.jsxs)(z.Fragment,{children:[c&&r!==Pz.NotStarted?(0,z.jsx)("div",{"data-testid":"education-progress-bar",children:(0,z.jsx)(kz,{activeBarIndex:n-1,stepCount:wz.length-1,timePerStep:5e3,onFinish:()=>{a(Pz.Finished)}})}):null,(0,z.jsxs)(nc.Z,{testId:"first-time-lister-education",children:[r===Pz.NotStarted?g(wz[0]):(0,z.jsx)(Iz.Z,{index:n-1,hideNavigation:0===n||c,arrows:Iz.Z.Arrows.Hidden,styling:Iz.Z.Styling.Floating,slides:wz.slice(1).map(g),onSlideInteract:e=>{c||s(e)}}),(()=>{if(c&&r===Pz.InProgress&&!u)return null;const e={0:"continue",[d]:"got_it"}[n]||"next";return(0,z.jsx)(ic.I,{text:i("actions.".concat(e)),styling:ic.I.Styling.Filled,onClick:p,disabled:c&&r===Pz.InProgress})})()]})]})},Tz=()=>{const e=(0,p.I0)(),t=(0,p.v9)(mm),i=Xn({abTestName:"first_time_lister_education"}),n=(null==i?void 0:i.variant)===$k.B,s=t=>{e(Dm.setFirstTimeListerEducationModalVisible({isVisible:t}))},r=()=>{s(!1)};return(0,z.jsx)(cp.Z,{show:t,defaultCallback:()=>{n||s(!1)},closeOnOverlay:!0,children:(null==i?void 0:i.variant)===$k.C?(0,z.jsx)(Zz,{onClose:r}):(0,z.jsx)(zz,{onClose:r})})},Fz=()=>{const{searchParams:e}=xc(),[t,i]=(0,m.useState)(!1),n=(0,p.v9)(qd),{track:s}=vi(),{offline_verification_feedback:r}=e,a=kc(r),{transformedData:o,fetch:l}=ih(Fe.qVB,Gh);return(0,m.useEffect)((()=>{o&&(i(!0),s(Wi({screen:$t.OfflineVerificationFeedbackForm})))}),[i,o,s]),(0,m.useEffect)((()=>{a&&n&&l(n)}),[a,n,l]),a?(0,z.jsx)($w,{isOpen:t,ratings:o,onClose:()=>{i(!1),s(Ri({screen:$t.OfflineVerificationFeedbackForm,target:qm.CloseScreen}))},onSubmit:async e=>{let{rating:t,message:s,feedbackStatementIds:r,finalized:a}=e;n&&(a?(i(!1),await(0,Fe.hdd)({transactionId:n,rating:t,comment:s,feedbackStatementIds:r,finalized:a})):await(0,Fe.hdd)({transactionId:n,rating:t}))},isCloseActionVisible:!1}):null},Nz=()=>{const e=(0,Nt.TH)(),t=Bc(e.pathname),{inboxMessageCards:i}=Cm(),n=(0,m.useMemo)((()=>null==i?void 0:i.find((e=>e.id===t))),[i,t]),s=(0,p.I0)(),{track:r}=vi(),a=E(),o=(0,Nt.s0)(),l=(0,p.v9)(Rd),c=(0,p.v9)(Dd),d=(0,p.v9)(Ud),u=(0,p.v9)(Vu)||(null==l?void 0:l.userHasSupportRole),g=(0,p.v9)(X),x=(0,p.v9)(Jd),f=(0,p.v9)(Wt("conversation_blocking_improvements")),y=(0,p.v9)(Wt("web_new_conversation_education")),{conversations:v,markAsRead:_,updateListConversationTitle:b}=(0,m.useContext)(ym),[j,S]=(0,m.useState)(!1);(0,m.useEffect)((()=>{S(!(null==l||!l.education))}),[l]);const Z=v.find((e=>(null==l?void 0:l.id)===e.id)),I=!(l||i&&c.uiState!==Ne.Pending&&c.uiState!==Ne.Idle),C=!I&&!!n,k=!I&&!l&&c.uiState===Ne.Failure,w=k&&c.status===pm.o.NotFound;(0,m.useEffect)((()=>{g&&!n&&i&&c.uiState===Ne.Idle&&String(null==l?void 0:l.id)!==t&&s(eg({conversationId:t}))}),[s,l,t,c,g,e,n,i]),(0,m.useEffect)((()=>{l&&Z&&!Mc(Z)&&("unread"in Z&&!Z.unread||_({id:l.id}))}),[Z,l,_]),(0,m.useEffect)((()=>{a.portables&&(0,ls.k3)()}),[a]),(0,m.useEffect)((()=>{if(!n||(null==l?void 0:l.id)===t)return;const e=pg(n);s(Dm.setConversation({conversation:e}))}),[n,s,t,null==l?void 0:l.id]);const P=(0,m.useCallback)((e=>{if(null==l||!l.transactionId)return;const t=rn({screen:e,transactionId:l.transactionId});r(t)}),[r,null==l?void 0:l.transactionId]);if((0,m.useEffect)((()=>{P($t.MessageReply)}),[P]),w)return(0,z.jsx)(Cg,{});if(k)return(0,z.jsx)(Ig,{});if(I)return(0,z.jsx)(Mp,{testId:"conversation-page-loader"});if(null!=l&&l.transactionId&&d!==Ne.Success)return(0,z.jsx)(Mp,{testId:"conversation-page-loader"});function T(){s(Dm.setIsSidebarOpen({isOpen:!x})),P($t.OrderDetails)}const F=a.tabletsUp||a.portables&&!x;return(0,z.jsxs)("div",{className:"thread__wrapper",children:[F&&(0,z.jsxs)("div",{className:"thread__messages-container",children:[(0,z.jsx)(Rg,{oppositeUser:null==l?void 0:l.oppositeUser,toggleSidebar:T,onGoBack:function(){o(Ec)},isSystem:C}),(0,z.jsx)(Zg,{}),(0,z.jsx)(h.Z,{}),null!=l&&null!==(O=l.transaction)&&void 0!==O&&O.order&&null!=l&&null!==(R=l.transaction)&&void 0!==R&&R.offer&&null!=l&&null!==(D=l.transaction)&&void 0!==D&&D.itemsCount?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(kx,{toggleSidebar:T}),(0,z.jsx)(h.Z,{})]}):null,null!=l&&null!==(L=l.moderatedItems)&&void 0!==L&&L.itemCount?(0,z.jsx)(yz,{moderatedItems:l.moderatedItems,toggleSidebar:T}):null,(0,z.jsx)("div",{className:"thread__messages-wrapper",children:(0,z.jsx)("div",{className:"thread__messages-main",children:(0,z.jsx)(az,{toggleSidebar:T})})}),u&&!C&&(0,z.jsx)(Zp,{type:Jc.Reply,onPostReply:b}),null!=l&&null!==(N=l.oppositeUser)&&void 0!==N&&N.isHated&&f?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(vz,{oppositeUserId:l.oppositeUser.id,userLogin:l.oppositeUser.login})]}):null,y&&null!=l&&l.education?(0,z.jsx)(Og,{type:l.education.type,action:l.education.action,isOpen:j,onClose:function(){S(!1)}}):null]}),x&&(0,z.jsx)("div",{className:"thread-sidebar__container thread-sidebar__container--reworked","data-testid":"sidebar",children:(0,z.jsx)(fz,{toggleSidebar:T})}),(0,z.jsx)(Tz,{}),(0,z.jsx)(Fz,{})]});var N,L,O,R,D},Lz=()=>{const{conversations:e}=(0,m.useContext)(ym);return e.length?(0,z.jsx)(Nt.Fg,{to:Rc(e[0].id),replace:!0}):null},Ez=function(e){const{logCardImpression:t}=(0,m.useContext)(Im);(0,m.useEffect)((()=>{e.forEach((e=>t(e)))}),[JSON.stringify(e)])},Oz=()=>{const{controlConversations:e}=(0,m.useContext)(ym);return Ez(e.map((e=>{let{id:t}=e;return String(t)}))),null},Rz=e=>{let{websocketHostUrl:t,location:i,renderWebsocketChannels:n}=e;const s=(0,p.v9)(Wt("web_ads_rokt_script")),r=(0,p.v9)(Vn("web_ads_rokt")),a=(0,p.v9)(we),{track:o}=vi(),l=E(),{setShouldShowRokt:c,shouldShowRokt:d}=_c();return(0,m.useEffect)((()=>{d&&s&&r&&o(bn({...a,...r}))}),[o,a,d,r,s]),(0,m.useEffect)((()=>{d&&c(!1)}),[c,d]),(0,z.jsxs)("div",{className:"inbox-page__container",children:[(0,z.jsxs)(km,{children:[(0,z.jsx)(Oz,{}),(0,z.jsx)(yc,{location:i,isServerSide:St.X,children:(0,z.jsx)(wm,{children:l.portables?(0,z.jsx)("div",{className:"inbox-page__mobile-card",children:(0,z.jsx)("div",{className:"u-fill-width",children:(0,z.jsx)("div",{className:"inbox-page__block",children:(0,z.jsx)("div",{className:"u-flexbox u-flex-direction-column u-fill-height u-justify-content-center",children:(0,z.jsx)(Nt.Z5,{children:(0,z.jsxs)(Nt.AW,{path:Ac,children:[(0,z.jsx)(Nt.AW,{index:!0,element:(0,z.jsx)(mc,{redirectRailsRoute:Me.mYc,children:(0,z.jsx)(Sg,{})})}),(0,z.jsx)(Nt.AW,{path:"new",element:(0,z.jsx)(mc,{redirectRailsRoute:Me.mYc,children:(0,z.jsx)(Rp,{})})}),(0,z.jsx)(Nt.AW,{path:":id",element:(0,z.jsx)(mc,{redirectRailsRoute:Me.mYc,children:(0,z.jsx)(Nz,{})})})]})})})})})}):(0,z.jsxs)("div",{className:"u-flexbox u-fill-width",children:[(0,z.jsx)("div",{className:"u-fill-width",children:(0,z.jsx)(Lt.Z,{styling:Lt.Z.Styling.Tight,children:(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsx)("div",{className:"inbox-page__block inbox-page__block--sidebar",children:(0,z.jsx)("div",{className:"u-flexbox u-flex-direction-column u-fill-height u-justify-content-center",children:(0,z.jsx)(Sg,{})})}),(0,z.jsx)("div",{className:"u-fill-width",children:(0,z.jsx)("div",{className:"inbox-page__block inbox-page__block--content",children:(0,z.jsx)(Nt.Z5,{children:(0,z.jsxs)(Nt.AW,{path:Ac,children:[(0,z.jsx)(Nt.AW,{index:!0,element:(0,z.jsx)(mc,{redirectRailsRoute:Me.mYc,children:(0,z.jsx)(Lz,{})})}),(0,z.jsx)(Nt.AW,{path:"new",element:(0,z.jsx)(mc,{redirectRailsRoute:Me.mYc,children:(0,z.jsx)(Rp,{})})}),(0,z.jsx)(Nt.AW,{path:":id",element:(0,z.jsx)(mc,{redirectRailsRoute:Me.mYc,children:(0,z.jsx)(Nz,{})})})]})})})})]})})}),l.wide&&(0,z.jsx)("div",{className:"inbox-page__ad","data-testid":"ad-container",children:(0,z.jsx)(uc,{shape:di.Skyscraper,id:"ad-skyscraper"})})]})})}),n({websocketHostUrl:t})]}),d&&(0,z.jsx)(Lc,{trackingDfpCode:"de_web_successful_purchase_rokt"})]})};var Dz=i(83460);const Az=e=>{let{url:t}=e;const i=(0,p.I0)(),n=(0,p.v9)(Hd),s=(0,p.v9)(Fs),r=(0,p.v9)(X),a=(0,m.useCallback)((()=>{n&&r&&(document.title.includes("*")||(document.title=["*",document.title].join(" ")),i(eg({conversationId:n})))}),[i,n,r]);return(0,m.useEffect)((()=>{const e=(0,Dz.createConsumer)(t),i={channel:"MsgThreadChannel",id:n,country:s,user_id:r};return n&&e.subscriptions.create(i,{received:a}),()=>e.disconnect()}),[t,n,r,s,a]),null},Mz=e=>{let{url:t}=e;const i=(0,p.v9)(Fs),n=(0,p.v9)(X),{websocketUserId:s,updateConversation:r}=(0,m.useContext)(ym),a=(0,m.useRef)(r),o=e=>{a.current({id:e.conversation_id})};return(0,m.useEffect)((()=>{a.current=r}),[r]),(0,m.useEffect)((()=>{const e=(0,Dz.createConsumer)(t);if(s){const t={channel:"InboxChannel",country:i,user_id:n,websocket_user_id:s};e.subscriptions.create(t,{received:o})}return()=>e.disconnect()}),[t,s,n,i]),null},Uz=e=>{let{websocketHostUrl:t}=e;return t?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Az,{url:t}),(0,z.jsx)(Mz,{url:t})]}):null};var Bz=i(90628),qz=i(86188);const Vz=e=>{let{children:t}=e;const[i,n]=(0,m.useState)(window.location.href),s=(0,m.useCallback)((()=>n(window.location.href)),[]),r=(0,m.useMemo)((()=>({back:()=>{window.history.back(),s()},push:e=>{window.history.pushState(void 0,"",e),s()},replace:e=>{window.history.replaceState(void 0,"",e),s()},refreshUrl:s})),[s]),a=(0,m.useMemo)((()=>({location:{...r,url:i,urlParams:(0,ys.Rq)(window.location.search)}})),[r,i]);return(0,z.jsx)(hc.Provider,{value:a,children:t})};function Hz(e,t){const i=(0,m.useRef)(t);(0,m.useEffect)((()=>{i.current=t}),[t]),(0,m.useEffect)((()=>{const t=e=>i.current(e);return window.addEventListener(e,t),()=>window.removeEventListener(e,t)}),[e])}const Gz={mobile:["phones","portables"],tablet:["tablets","tabletsUp"],desktop:["tabletsUp","desktops","wide"]},Wz={phones:[0,720],portables:[0,959],tablets:[721,959],tabletsUp:[721,1/0],desktops:[960,1/0],wide:[1200,1/0]},Xz={active:["tabletsUp","desktops"],phones:!1,portables:!1,tablets:!1,tabletsUp:!0,desktops:!0,wide:!1},Yz=e=>{const t=[],i=Object.entries(Wz).reduce(((i,n)=>{let[s,r]=n;const a=e>=r[0]&&e<=r[1];return a&&t.push(s),i[s]=a,i}),{});return{active:t,...i}};function Kz(){St.X||es("viewport_size",(0,ls.wi)().toString(),Pt({days:1}))}function Jz(){return Yz((0,ls.wi)())}function Qz(e,t){return St.X?function(e,t){return e?Yz(e):t?(e=>{const t=Gz[e];return{active:t,...Object.fromEntries(t.map((e=>[e,!0])))}})(t):Xz}(e,t):Jz()}const $z=e=>{let{children:t,viewportSize:i,device:n}=e;const[s,r]=(0,m.useState)((()=>Qz(i,n)));return(0,m.useEffect)((()=>{Kz()}),[]),Hz("resize",(0,v.throttle)((()=>{const e=Jz();Kz(),r((t=>(0,v.isEqual)(e,t)?t:e))}),50)),(0,z.jsx)(Z,{value:{breakpoints:s},children:t})};function eT(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class tT extends m.Component{constructor(){super(...arguments),eT(this,"tracker",Ol),eT(this,"contextValues",{tracker:this.tracker})}render(){return(0,z.jsx)(yi.Provider,{value:this.contextValues,children:this.props.children})}}const iT=tT;async function nT(e){const{logCardDismissal:t}=await i.e(277).then(i.bind(i,58481)),n=t(e);var s,r;return n||(0,ug.OW)(e.id,"card-dismissal",null===(s=e.extras)||void 0===s?void 0:s.channel,null===(r=e.extras)||void 0===r?void 0:r.tracking),n}async function sT(e){const{logCardClick:t}=await i.e(277).then(i.bind(i,58481)),n=t(e,!0);var s,r;return n||(0,ug.OW)(e.id,"card-click",null===(s=e.extras)||void 0===s?void 0:s.channel,null===(r=e.extras)||void 0===r?void 0:r.tracking),n}async function rT(){const{logCardImpressions:e}=await i.e(277).then(i.bind(i,58481));for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];const r=e(n,!0);return r||n.forEach((e=>{let{id:t,extras:i}=e;(0,ug.OW)(t,"card-impression",null==i?void 0:i.channel,null==i?void 0:i.tracking)})),r}async function aT(e){let{original:t}=e;const{logInAppMessageClick:n}=await i.e(277).then(i.bind(i,58481));n(t)||(0,ug.OW)(t.message,"in-app-click",cg.oQ.InAppMessage,t.extras.tracking)}async function oT(e,t){let{original:n}=e;const{logInAppMessageButtonClick:s}=await i.e(277).then(i.bind(i,58481));s(n.buttons[t],n)||(0,ug.OW)(n.message,"in-app-button-click",cg.oQ.InAppMessage,n.extras.tracking)}const lT={initialized:!1,stores:jm,providers:null},cT="profile";let dT;!function(e){e.Empty="empty",e.ListAnotherItem="list_another_item",e.PushUpValueProposition="push_up_value_proposition",e.PushUpCheckout="push_up_checkout",e.ItemUploadFeedback="item_upload_feedback",e.SellerOfflineVerification="seller_offline_verification"}(dT||(dT={}));const uT=e=>e.profile,mT=e=>uT(e).uploadedItem,pT=(0,B.P1)((e=>uT(e).ui),(e=>{let{currentPromotion:t}=e;return t})),gT=(0,B.P1)(mT,(e=>{let{id:t}=e;return t})),hT=(0,B.P1)(mT,(e=>{let{feedbackItemId:t}=e;return t})),xT=(0,B.P1)(mT,(e=>{let{pushedUpId:t}=e;return t})),fT=(0,B.P1)(uT,(e=>{let{promotedItemId:t}=e;return t})),yT=(0,B.P1)(fT,ko,((e,t)=>e&&t[e]||null)),vT=(0,B.P1)(uT,(e=>{var t,i;return Boolean(null==e||null===(t=e.ui)||void 0===t?void 0:t.currentPromotion)&&(null==e||null===(i=e.ui)||void 0===i?void 0:i.currentPromotion)!==dT.Empty})),_T=[Me.O8U];const bT=e=>{let{children:t}=e;const[n,s]=(0,m.useState)(),[r,a]=(0,m.useState)(Zm),[o,l]=(0,m.useState)(!1),{relativeUrl:c}=xc(),d=(0,p.v9)(Y),u=(0,p.v9)(X),g=(()=>{const e=(0,p.v9)(Y),t=(0,p.v9)(Ie),n=(0,p.v9)(zs),s=(0,p.v9)(_e),r=(0,p.v9)(Wt("braze_sdk_enabled")),a=(0,p.v9)(Wt("web_braze_logging")),o=(0,p.v9)(Wt("web_braze_log_app_health")),l=(0,p.v9)(Wt("web_braze_push_notifications")),c=(0,p.v9)(Wt("web_braze_non_error_logging")),d=(0,p.v9)(Wt("braze_sdk_in_webview_enabled")),u=(0,p.v9)(ze),g=(0,p.v9)(X),h=r&&(u&&d||!u),{sdkEndpoint:x,sdkKey:f,safariWebsitePushId:y}=n||t;return(0,m.useCallback)((async()=>h?e&&s&&f?(async(e,t)=>{try{const{unsafeInitializeBraze:t}=await Promise.all([i.e(277),i.e(410)]).then(i.bind(i,94410));return await t(e)}catch(e){return null==t||t(e),lT}})({userExternalId:e,apiKey:f,safariWebsitePushId:l?y:void 0,baseUrl:x,logger:o||a?t=>{const i=["error","exception","fail","fatal"].some((e=>t.toLowerCase().includes(e)));o&&(c||i)&&(0,ug.jL)("Braze_SDK_log: ".concat(t),"userExternalId: ".concat(e)),a&&console.log(t)}:void 0},(t=>{(0,NI.gI)(),(0,ug.p3)(t,"userExternalId: ".concat(e))})):((0,NI.gI)(),(0,ug.vy)({brazeSdkKey:f,userExternalId:e,isLoggedIn:s}),lT):((0,NI.gI)(),MI(g),(0,Bn.e8)(LI),lT)),[h,e,g,s,f,o,a,l,y,x,c])})();(function(e){const t="not shown"!==(0,p.v9)(wl),i=(0,p.v9)(vT),{relativeUrl:n}=xc(),s=t||i,r=(a=n,!(_T.some((e=>a.startsWith(e)))||s));var a;(0,m.useEffect)((()=>{e&&(r?(e.enable(),e.publishStoredMessages()):e.disable())}),[e,r])})(null==n?void 0:n.inAppMessageProvider),(0,m.useEffect)((()=>{g().then((e=>{let{initialized:t,stores:i,providers:n}=e;const r=(e=>{const t=t=>async i=>{const n=e.flatMap((e=>e.state)).find((e=>(null==e?void 0:e.id)===i));return!!n&&t(n)};return{logCardImpression:t(rT),logCardClick:t(sT),logCardDismissal:t(nT)}})([i.inboxMessageCardStore,i.inboxNotificationCardStore,i.promoBoxCardStore]);n&&s(n),l(t),a((e=>({...e,...i,...r})))}))}),[g]);const h=(0,m.useCallback)((()=>{if(u&&d&&o)try{BI(d,u),(0,NI.Kz)()}catch(e){e instanceof Error&&(0,ug.jL)("errorHandlingNewPage(".concat(e.message,")"))}}),[o,u,d]);return(0,m.useEffect)((()=>{h()}),[c,h]),(0,z.jsx)(Im.Provider,{value:r,children:t})},jT=(0,ad.PH)("".concat(Et,"/loadAdsPlacements")),ST=(0,ad.PH)("".concat(Et,"/loadAdsSegmentIds")),ZT=e=>{let{children:t}=e;const i=(0,p.v9)(Ht),n=(0,p.I0)();return(0,m.useEffect)((()=>{n(jT())}),[n,i]),t};function IT(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const CT=e=>({locale:Nc(e),messages:Fc(e)}),kT=((0,p.$j)(CT),(0,p.$j)(CT)((e=>(0,z.jsx)(Bz.Z,{...e}))));function wT(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MainStore";class i extends m.Component{constructor(){super(...arguments),IT(this,"store",d().getStore(t,!0))}render(){return this.store?(0,z.jsx)(cc,{FallbackComponent:cc.ComponentError,children:(0,z.jsx)(p.zt,{store:this.store,children:(0,z.jsx)(kT,{textComponent:"span",wrapRichTextChunksInFragment:!0,children:(0,z.jsx)(iT,{children:(0,z.jsx)(Vz,{children:(0,z.jsx)(bT,{children:(0,z.jsx)($z,{children:(0,z.jsx)(qz.Z,{mode:Bg()?Jl.UX.Dark:Jl.UX.Light,children:(0,z.jsx)(ZT,{children:(0,z.jsx)(e,{...this.props})})})})})})})})})}):null}}return IT(i,"AppComponent",e),i}var PT=i(16002);const zT=(0,ad.PH)("".concat(Ms,"/retryCatalogItemsRequest")),TT=(0,ad.PH)("".concat(Ms,"/getCatalogItemsSuccess"),((e,t)=>({payload:e,meta:t})));function FT(e,t){const i=t.map((e=>e.id));t.forEach((t=>{e.byId[t.id]=t})),e.ids=i}function NT(e,t){e.byId={},FT(e,t)}const LT=e=>e.ids.map((t=>e.byId[t])),ET={byId:{},ids:[]},OT=e=>{const{id:t,title:i,order:n}=e;return{id:t,title:i,order:n,isDefault:!!e.is_default,isOther:!!e.is_other}},RT=e=>e.map(OT),DT=e=>{const{id:t,description:i,sizes:n}=e;return{id:t,description:i,sizes:RT(n),faqEntryId:e.faq_entry_id}},AT=e=>({sizeGroups:e.map(DT),sizes:(0,v.flatten)(e.map((e=>e.sizes))).map(OT)}),MT=e=>({id:e.id,description:e.description,items:e.sizes}),UT=(e,t)=>e.order-t.order,BT=e=>{const{id:t,title:i,catalogIds:n,parentId:s,code:r,depth:a,photo:o}=e;return{id:t,title:i,value:t,data:{id:t,catalogIds:n,parentId:s,code:r,depth:a,photo:o}}},qT=(e,t)=>e&&t&&parseFloat(e)>parseFloat(t)?{priceFrom:t,priceTo:null}:{priceTo:t,priceFrom:e},VT={query:null,catalogIds:[],priceFrom:null,priceTo:null,currency:null,colorIds:[],brandIds:[],sizeIds:[],materialIds:[],videoGameRatingIds:[],statusIds:[],sortBy:null,isPopularCatalog:!1,isPersonalizationDisabled:!1,catalogFrom:null,disableSearchSaving:!1},HT={byId:{},ids:[]},GT={dynamicFilters:HT,selectedDynamicFilters:HT,selectedDefaultFilters:HT,temporarySelectedDynamicFilters:HT,temporaryCatalogIds:[],temporarySizeIds:[],temporaryBrandIds:[],supportedFilters:[],temporaryPriceRage:{priceFrom:null,priceTo:null},filterSearchQuery:{text:null,code:null},ui:{uiState:Ne.Idle,errors:[]}},WT={catalogs:HT,brands:HT,sizes:HT,sizeGroups:HT,uiState:Ne.Pending},XT=(e,t)=>{const{query:i}=t.payload;e.query=i},YT=(e,t)=>{const{filters:i}=t.payload;Object.assign(e,i)},KT=(0,ad.oM)({name:Os,initialState:VT,reducers:{toggleSortFilterOption:(e,t)=>{const{sortBy:i}=t.payload;e.sortBy=i},toggleBrandFilterOption:(e,t)=>{const{id:i}=t.payload;e.brandIds=(0,v.xor)(e.brandIds,[i])},toggleSizeFilterOption:(e,t)=>{const{id:i}=t.payload;e.sizeIds=(0,v.xor)(e.sizeIds,[i])},sizeFilterSet:(e,t)=>{const{ids:i}=t.payload;e.sizeIds=i},catalogFilterSet:(e,t)=>{const{ids:i}=t.payload;e.catalogIds=i},priceRangeFilterSet:(e,t)=>{const{priceRange:{priceTo:i,priceFrom:n},currency:s}=t.payload,r=qT(n,i);e.currency=s,e.priceFrom=r.priceFrom,e.priceTo=r.priceTo},setQuery:XT,submitSearchQuery:XT,applyPersonalizedSizesSuccess:(e,t)=>{const{ids:i}=t.payload;e.sizeIds=(0,v.uniq)([...e.sizeIds,...i])},changeFilters:YT,setFilters:YT,setInitialFilters:(e,t)=>{const{filters:i}=t.payload;Object.assign(e,i)},removeFilters:(e,t)=>{const{filters:i}=t.payload;return i.length?((e,t)=>{t.forEach((t=>{e[t]=VT[t]}))})(e,i):VT},removeFilter:(e,t)=>{const{filter:i}=t.payload,n=e[i.name];let s;s=(0,v.isArray)(n)&&"value"in i?(0,v.without)(n,i.value):VT[i.name],e[i.name]=s}}}),JT=(0,ad.oM)({name:Os,initialState:WT,reducers:{fetchDataRequest:e=>{e.uiState=Ne.Pending},fetchDataSuccess:(e,t)=>{const{catalogs:i,brands:n,sizes:s,sizeGroups:r}=t.payload;e.uiState=Ne.Success,FT(e.catalogs,i),FT(e.brands,n),FT(e.sizes,s),FT(e.sizeGroups,r)},fetchDataFailure:e=>{e.uiState=Ne.Failure},fetchBrandsSuccess:(e,t)=>{const{brands:i}=t.payload;FT(e.brands,i)},fetchBrandSuccess:(e,t)=>{const{brand:i}=t.payload,n=i.id;e.brands.ids=(0,v.uniq)([...e.brands.ids,n]),e.brands.byId[n]=i}}}),QT=(0,ad.oM)({name:Os,initialState:{correlationId:"",sessionId:"",globalSearchSessionId:null,isStale:!1},reducers:{},extraReducers:{[TT.type]:(e,t)=>{const{searchCorrelationId:i,searchSessionId:n,globalSearchSessionId:s}=t.payload;e.globalSearchSessionId=s||null,i&&n&&(e.correlationId=i,e.sessionId=n,e.isStale=!1)},[KT.actions.changeFilters.type]:e=>{e.isStale=!0}}}),$T=(e,t)=>{const{supportedFilters:i}=t.payload;e.ui.uiState=Ne.Pending,e.supportedFilters=i},eF=(e,t)=>{const{dynamicFilters:i,selectedDynamicFilters:n}=t.payload;e.selectedDynamicFilters={byId:{},ids:[]},e.dynamicFilters={byId:{},ids:[]},e.ui.errors=[],e.ui.uiState=Ne.Success,null==n||n.forEach((t=>{e.selectedDynamicFilters.byId[t.type]=t,e.selectedDynamicFilters.ids.push(t.type)})),null==i||i.forEach((t=>{e.dynamicFilters.byId[t.type]=t,e.dynamicFilters.ids.push(t.type)}))},tF=(e,t)=>{const{dynamicFilters:i,temporarySelectedDynamicFilters:n}=t.payload;e.temporarySelectedDynamicFilters={byId:{},ids:[]},e.dynamicFilters={byId:{},ids:[]},e.ui.errors=[],e.ui.uiState=Ne.Success,n.forEach((t=>{e.temporarySelectedDynamicFilters.byId[t.type]=t,e.temporarySelectedDynamicFilters.ids.push(t.type)})),i.forEach((t=>{e.dynamicFilters.byId[t.type]=t,e.dynamicFilters.ids.push(t.type)}))},iF=(e,t)=>{const{errors:i}=t.payload;e.ui.errors=i,e.ui.uiState=Ne.Failure},nF=(e,t)=>{const{temporaryCatalogIds:i}=t.payload;e.temporaryCatalogIds=i},sF=(0,ad.oM)({name:Os,initialState:GT,reducers:{fetchDynamicFiltersRequest:$T,fetchDynamicFiltersSuccess:eF,fetchDynamicFiltersFailure:iF,fetchTemporaryDynamicFiltersRequest:$T,fetchTemporaryDynamicFiltersSuccess:tF,fetchTemporaryDynamicFiltersFailure:iF,fetchDefaultDynamicFiltersRequest:e=>{e.ui.uiState=Ne.Pending},fetchDefaultDynamicFiltersSuccess:(e,t)=>{const{selectedDefaultFilters:i}=t.payload;e.selectedDefaultFilters={byId:{},ids:[]},null==i||i.forEach((t=>{e.selectedDefaultFilters.byId[t.type]=t,e.selectedDefaultFilters.ids.push(t.type)}))},fetchDefaultDynamicFiltersFailure:(e,t)=>{const{errors:i}=t.payload;e.ui.errors=i,e.ui.uiState=Ne.Failure},fetchDynamicFilterSearchSuccess:(e,t)=>{const{code:i,options:n,isSelectionHighlighted:s}=t.payload;e.dynamicFilters.byId[i].options=n,e.dynamicFilters.byId[i].isSelectionHighlighted=s},setTemporaryDynamicFiltersState:tF,setSelectedDynamicFilter:(e,t)=>{const{selectedDynamicFilter:i}=t.payload;e.selectedDynamicFilters.byId[i.type]=i,e.selectedDynamicFilters.ids.includes(i.type)||e.selectedDynamicFilters.ids.push(i.type)},setSelectedDynamicFilters:(e,t)=>{const{selectedDynamicFilters:i}=t.payload;e.selectedDynamicFilters={byId:{},ids:[]},i.forEach((t=>{e.selectedDynamicFilters.byId[t.type]=t,e.selectedDynamicFilters.ids.push(t.type)}))},removeSelectedDynamicFilterId:(e,t)=>{const{type:i,id:n}=t.payload;e.selectedDynamicFilters.byId[i].ids=e.selectedDynamicFilters.byId[i].ids.filter((e=>e!==n))},removeSelectedDynamicFilterIds:(e,t)=>{const{type:i,ids:n}=t.payload;e.selectedDynamicFilters.byId[i].ids=e.selectedDynamicFilters.byId[i].ids.filter((e=>!n.includes(e)))},removeSelectedDynamicFilters:e=>{e.selectedDynamicFilters.ids.forEach((t=>{e.selectedDynamicFilters.byId[t].ids=[]}))},removeSelectedDynamicFilter:(e,t)=>{const{type:i}=t.payload;delete e.selectedDynamicFilters.byId[i],e.selectedDynamicFilters.ids=e.selectedDynamicFilters.ids.filter((e=>e!==i))},setTemporarySelectedDynamicFilter:(e,t)=>{const{temporarySelectedDynamicFilter:i}=t.payload;e.temporarySelectedDynamicFilters.byId[i.type]=i,e.temporarySelectedDynamicFilters.ids.includes(i.type)||e.temporarySelectedDynamicFilters.ids.push(i.type)},setTemporarySelectedDynamicFilters:(e,t)=>{const{temporarySelectedDynamicFilters:i}=t.payload;e.temporarySelectedDynamicFilters={byId:{},ids:[]},i.forEach((t=>{e.temporarySelectedDynamicFilters.byId[t.type]=t,e.temporarySelectedDynamicFilters.ids.push(t.type)}))},removeTemporarySelectedDynamicFilterId:(e,t)=>{const{type:i,id:n}=t.payload;e.temporarySelectedDynamicFilters.byId[i].ids=e.temporarySelectedDynamicFilters.byId[i].ids.filter((e=>e!==n))},removeTemporarySelectedDynamicFilterIds:(e,t)=>{const{type:i,ids:n}=t.payload;e.temporarySelectedDynamicFilters.byId[i].ids=e.temporarySelectedDynamicFilters.byId[i].ids.filter((e=>!n.includes(e)))},removeTemporarySelectedDynamicFilters:e=>{e.temporarySelectedDynamicFilters={byId:{},ids:[]}},removeTemporarySelectedDynamicFilter:(e,t)=>{const{type:i}=t.payload;delete e.temporarySelectedDynamicFilters.byId[i],e.temporarySelectedDynamicFilters.ids=e.temporarySelectedDynamicFilters.ids.filter((e=>e!==i))},setTemporaryCatalogIds:nF,updateTemporaryCatalogIds:nF,removeTemporaryCatalogIds:e=>{e.temporaryCatalogIds=[]},setTemporarySizeIds:(e,t)=>{const{temporarySizeIds:i}=t.payload;e.temporarySizeIds=i},removeTemporarySizeIds:e=>{e.temporarySizeIds=[]},setTemporaryBrandIds:(e,t)=>{const{temporaryBrandIds:i}=t.payload;e.temporaryBrandIds=i},removeTemporaryBrandIds:e=>{e.temporaryBrandIds=[]},setTemporaryPriceRange:(e,t)=>{const{priceRange:{priceTo:i,priceFrom:n}}=t.payload,s=qT(n,i);e.temporaryPriceRage.priceFrom=s.priceFrom,e.temporaryPriceRage.priceTo=s.priceTo},removeTemporaryPriceRange:e=>{e.temporaryPriceRage={priceFrom:null,priceTo:null}},setFilterSearchQuery:(e,t)=>{const{text:i,code:n}=t.payload;e.filterSearchQuery.text=i,e.filterSearchQuery.code=n}},extraReducers:{[JT.actions.fetchDataSuccess.type]:eF}}),rF=(0,ad.oM)({name:Os,initialState:{catalogs:[],brands:[],sizeGroups:[]},reducers:{changeDtos:(e,t)=>{const{dtos:i}=t.payload;Object.assign(e,i)}}}),aF=(0,ad.oM)({name:Os,initialState:!1,reducers:{changeIsInCatalog:(e,t)=>t.payload}}),oF=(0,ad.oM)({name:Os,initialState:null,reducers:{},extraReducers:{[TT.type]:(e,t)=>{const{catalogTitle:i}=t.payload;return i}}}),lF=rF.reducer,cF=JT.reducer,dF=KT.reducer,uF=QT.reducer,mF=aF.reducer,pF=sF.reducer,gF=oF.reducer,hF={...KT.actions,...JT.actions,...rF.actions,...QT.actions,...sF.actions,...aF.actions,...oF.actions},xF=(0,rj.UY)({dtos:lF,data:cF,filters:dF,dynamicFilters:pF,searchSession:uF,isInCatalog:mF,catalogTitle:gF}),fF={[Os]:xF},yF="savedSearches",vF=300,_F=(0,ad.oM)({name:yF,initialState:{searches:{byId:{},ids:[]},currentSearchId:null,isSubscribeModalOpen:!1},reducers:{fetchSearchesSuccess:(e,t)=>{const{searches:i}=t.payload;i.forEach((t=>{e.searches.byId[t.id]=t})),e.searches.ids=i.map((e=>e.id))},fetchSearchSuccess:(e,t)=>{const{search:i}=t.payload;e.searches.byId[i.id]=i},openSubscribeModal:e=>{e.isSubscribeModalOpen=!0},closeSubscribeModal:e=>{e.isSubscribeModalOpen=!1},setCurrentSearch:(e,t)=>{e.currentSearchId=t.payload.currentSearchId}}}),{actions:bF}=_F,jF={[yF]:_F.reducer};_F.reducer;var SF=i(92674),ZF=i.n(SF);const IF="searchSuggestions",CF=(0,ad.oM)({name:IF,initialState:{suggestions:[],shouldSetSuggestions:!0,suggestionsListId:null},reducers:{fetchSuggestionsRequest:{reducer:e=>{e.shouldSetSuggestions=!0},prepare:(e,t)=>({payload:e,meta:t})},fetchSuggestionsSuccess:(e,t)=>{const{suggestions:i}=t.payload,{shouldSetSuggestions:n}=e;n&&(e.suggestions=i,e.suggestionsListId=ZF().v4())},fetchSuggestionsFailure:(e,t)=>{const{fallbackSuggestions:i}=t.payload,{shouldSetSuggestions:n}=e;n&&(e.suggestions=i,e.suggestionsListId=ZF().v4())},clearSuggestions:e=>{e.suggestions=[],e.shouldSetSuggestions=!1,e.suggestionsListId=null}}}),{actions:kF}=CF,wF={[IF]:CF.reducer},PF=(CF.reducer,"feedback");let zF;!function(e){e.View="VIEW",e.DeleteFeedback="DELETE_FEEDBACK",e.CreateComment="CREATE_COMMENT",e.EditComment="EDIT_COMMENT",e.DeleteComment="DELETE_COMMENT"}(zF||(zF={}));const TF={...ET,byTranslatedId:{}},FF={uiState:Ne.Idle,feedbackState:{},currentPage:0,totalPages:0},NF=(e,t)=>{const{feedback:i}=t.payload;e.byId[i.id]=i,delete e.byTranslatedId[i.id]},LF=(0,ad.oM)({name:PF,initialState:TF,reducers:{feedbackGetSuccess:(e,t)=>{const{feedback:i}=t.payload.feedbackData;i.forEach((t=>{e.byId[t.id]=t,e.ids.push(t.id)}))},feedbackDeleteSuccess:(e,t)=>{const{feedbackId:i}=t.payload;e.ids=e.ids.filter((e=>e!==i)),delete e.byId[i]},feedbackTranslateSuccess:(e,t)=>{const{feedback:i}=t.payload;e.byTranslatedId[i.id]=i},feedbackCommentCreateSuccess:NF,feedbackCommentEditSuccess:NF,feedbackCommentDeleteSuccess:NF,feedbackClearIds:e=>{e.ids=[]}}}),EF=(e,t,i)=>{e.feedbackState[t].uiState=i},OF=(e,t,i)=>{e.feedbackState[t].screen=i},RF=e=>(t,i)=>{const{feedbackId:n}=i.payload;EF(t,n,e)},DF=e=>(t,i)=>{const{feedbackId:n}=i.payload;OF(t,n,e)},AF=(e,t)=>{const{feedbackId:i}=t.payload;e.feedbackState[i].isTranslated=!1,EF(e,i,Ne.Success),OF(e,i,zF.View)},MF=(e,t)=>{const{feedbackId:i,error:n}=t.payload;EF(e,i,Ne.Failure),e.feedbackState[i].error=n},UF=(0,ad.oM)({name:PF,initialState:FF,reducers:{feedbackGetRequest:e=>{e.uiState=Ne.Pending},feedbackGetFailure:e=>{e.uiState=Ne.Failure},feedbackDeleteRequest:RF(Ne.Pending),feedbackDeleteFailure:MF,feedbackTranslateRequest:RF(Ne.Pending),feedbackTranslateFailure:MF,feedbackCommentCreateRequest:RF(Ne.Pending),feedbackCommentCreateFailure:MF,feedbackCommentEditRequest:RF(Ne.Pending),feedbackCommentEditFailure:MF,feedbackCommentDeleteRequest:RF(Ne.Pending),feedbackCommentDeleteFailure:MF,feedbackToggleReply:DF(zF.CreateComment),feedbackToggleCommentEdit:DF(zF.EditComment),feedbackToggleDelete:DF(zF.DeleteFeedback),feedbackToggleCommentDelete:DF(zF.DeleteComment),feedbackToggleCancel:(e,t)=>{const{feedbackId:i}=t.payload;EF(e,i,Ne.Idle),OF(e,i,zF.View),e.feedbackState[i].error=null},feedbackToggleTranslated:(e,t)=>{const{feedbackId:i,localize:n}=t.payload;e.feedbackState[i].isTranslated=n},feedbackResetCurrentPage:e=>{e.currentPage=0}},extraReducers:{[LF.actions.feedbackGetSuccess.type]:(e,t)=>{const{feedback:i,pagination:n}=t.payload.feedbackData,{totalPages:s,currentPage:r}=n;e.totalPages=s,e.currentPage=r,e.uiState=Ne.Success,void 0===e.showFilters&&(e.showFilters=i.length>0),i.forEach((t=>{e.feedbackState[t.id]={uiState:Ne.Idle,screen:zF.View,error:null,isTranslated:!1}}))},[LF.actions.feedbackDeleteSuccess.type]:(e,t)=>{const{feedbackId:i}=t.payload;delete e.feedbackState[i]},[LF.actions.feedbackTranslateSuccess.type]:(e,t)=>{const{feedbackId:i,localize:n}=t.payload;EF(e,i,Ne.Success),e.feedbackState[i].isTranslated=n},[LF.actions.feedbackCommentCreateSuccess.type]:AF,[LF.actions.feedbackCommentEditSuccess.type]:AF,[LF.actions.feedbackCommentDeleteSuccess.type]:AF}}),BF=LF.reducer,qF=UF.reducer,VF=(0,rj.UY)({ui:qF,data:BF}),HF={...LF.actions,...UF.actions},GF={[PF]:VF};var WF=i(84467);const XF="mediaUpload";let YF;!function(e){e.Forum="forum_post",e.Item="item",e.Complaint="complaint",e.UserMsg="user_msg"}(YF||(YF={}));const KF={photos:{byId:{},ids:[]},currentImageId:null,uiState:Ne.Idle};function JF(e,t){e.uiState=t}const QF=(e,t)=>{const{photos:i}=t.payload;i?(i.forEach((t=>{e.photos.byId[t.id]=t,e.photos.ids.push(t.id)})),JF(e,Ne.Success)):e.photos=KF.photos},$F=e=>{JF(e,Ne.Failure)},eN=(0,ad.oM)({name:XF,initialState:KF,reducers:{setCurrentImageId:(e,t)=>{e.currentImageId=t.payload},addPhotos:QF,setPhotoOrientation:(e,t)=>{const{id:i,orientation:n}=t.payload;i&&0!==e.photos.ids.length&&e.photos.byId[i]&&(e.photos.byId[i].orientation=n)},removePhoto:(e,t)=>{const{id:i}=t.payload;(0,v.remove)(e.photos.ids,(e=>e===i))},changePhotoOrder:(e,t)=>{const{oldIndex:i,newIndex:n}=t.payload,s=(0,WF.Rp)(e.photos.ids,i,n);e.photos.ids=s},fetchPhotosRequest:e=>{JF(e,Ne.Pending)},fetchPhotosSuccess:QF,fetchPhotosFailure:$F,uploadPhotoFiles:e=>{JF(e,Ne.Pending)},uploadPhotoSuccess:QF,uploadPhotoFailure:$F,submitEditedPhoto:e=>{JF(e,Ne.Pending)},updateExistingPhoto:(e,t)=>{const{photo:i,imageToReplaceId:n}=t.payload;if(e.photos.byId[i.id]=i,n){const t=e.photos.ids.indexOf(n);e.photos.ids[t]=i.id,delete e.photos.byId[n]}else e.photos.ids.push(i.id)},submitEditedPhotoSuccess:e=>{JF(e,Ne.Success)},submitEditedPhotoFailure:$F}}),{actions:tN}=eN,iN={[XF]:eN.reducer},nN=(eN.reducer,"notifications"),sN=(0,ad.oM)({name:nN,initialState:[],reducers:{showNotification:(e,t)=>{const{id:i}=t.payload;e.push(i)},hideNotification:(e,t)=>{const{id:i}=t.payload;e.includes(i)&&e.splice(e.indexOf(i),1)}}}),{actions:rN}=sN,aN={[nN]:sN.reducer},oN=(sN.reducer,(0,ad.oM)({name:dp,initialState:{byId:{},byType:{}},reducers:{setStateById:(e,t)=>{const{id:i,state:n}=t.payload;e.byId[i]={state:n}},setStateByType:(e,t)=>{const{type:i,state:n}=t.payload;e.byType[i]={state:n}},fetchFaqEntrySuccess:(e,t)=>{const{faqEntry:i,type:n}=t.payload,s={entry:i,state:Ne.Success};n&&(e.byType[n]=s),e.byId[i.id]=s}}})),{actions:lN}=oN,cN={[dp]:oN.reducer},dN=(oN.reducer,{}),uN={[bs]:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:dN}},mN={name:$t.Unknown},pN=(0,ad.oM)({name:Vt,initialState:mN,reducers:{setName:(e,t)=>{const{name:i}=t.payload;e.name=i}}}),{actions:gN}=pN,hN={[Vt]:pN.reducer},xN=(pN.reducer,(0,ad.oM)({name:zc,initialState:{locale:"en-us",messages:{}},reducers:{setLocale:(e,t)=>{e.locale=t.payload.locale},setMessages:(e,t)=>{e.messages=t.payload.translations}}})),{actions:fN}=xN,yN={[zc]:xN.reducer},vN=(xN.reducer,{[Vs.UserItems]:{...ET,uiState:Ne.Idle,errors:null,currentPage:0,totalPages:0,totalEntries:0,endReached:!1},[Vs.UserBundleItems]:{...ET,uiState:Ne.Idle,errors:null,currentPage:0,totalPages:0,totalEntries:0,endReached:!1,containsOfflineVerificationItem:!1,offlineVerificationFee:null},[Vs.FavouriteItems]:{...ET,uiState:Ne.Idle,errors:null,currentPage:0,totalPages:0,totalEntries:0,endReached:!1},[Vs.SimilarItems]:{...ET,uiState:Ne.Idle,errors:null},[Vs.CatalogItems]:{...ET,uiState:Ne.Idle,errors:null,currentPage:0,totalPages:0,totalEntries:0,perPage:Bs,time:null,endReached:!1},[Vs.RecommendedItems]:{...ET,uiState:Ne.Idle,errors:null,currentPage:0,totalPages:0,totalEntries:0,endReached:!1}}),_N=e=>t=>{t[e].uiState=Ne.Pending},bN=(e,t)=>(i,n)=>{const{items:s,pagination:r,itemParamsById:a,containsOfflineVerificationItem:o,offlineVerificationFee:l}=n.payload;i[e].uiState=Ne.Success,r&&(i[e].currentPage=r.current_page,i[e].totalPages=r.total_pages,i[e].totalEntries=r.total_entries,i[e].perPage=r.per_page,i[e].time=r.time,i[e].endReached=r.current_page>=r.total_pages,i[e].nextPageToken=r.next_page_token),o&&(i[e].containsOfflineVerificationItem=o);const c=[];s.forEach((t=>{c.push(t.id),i[e].byId[t.id]=t})),i[e].searchParams=a,i[e].errors=null,i[e].ids=t?c:(0,v.union)(i[e].ids,c),i[e].offlineVerificationFee=l},jN=e=>(t,i)=>{const{items:n}=i.payload;n.forEach((i=>{t[e].byId[i.id]=i}))},SN=e=>(t,i)=>{const{errors:n}=i.payload;t[e].uiState=Ne.Failure,t[e].errors=n},ZN=(0,ad.oM)({name:Ms,initialState:vN,reducers:{getCatalogItemsRequest:{reducer:_N(Vs.CatalogItems),prepare:(e,t)=>({payload:e,meta:t})},getUserItemsRequest:_N(Vs.UserItems),getUserBundleItemsRequest:_N(Vs.UserBundleItems),getFavouriteItemsRequest:_N(Vs.FavouriteItems),getSimilarItemsRequest:_N(Vs.SimilarItems),getRecommendedItemsRequest:_N(Vs.RecommendedItems),getUserItemsSuccess:bN(Vs.UserItems),getUserBundleItemsSuccess:bN(Vs.UserBundleItems),getFavouriteItemsSuccess:bN(Vs.FavouriteItems),getSimilarItemsSuccess:bN(Vs.SimilarItems),getRecommendedItemsSuccess:bN(Vs.RecommendedItems),getCatalogItemsFailure:SN(Vs.CatalogItems),getFavouriteItemsFailure:SN(Vs.FavouriteItems),getUserBundleItemsFailure:SN(Vs.UserBundleItems),getUserItemsFailure:SN(Vs.UserItems),getSimilarItemsFailure:SN(Vs.SimilarItems),getRecommendedItemsFailure:SN(Vs.RecommendedItems),resetSimilarItems:(IN=Vs.SimilarItems,e=>{e[IN]=vN[IN]}),setCatalogItemsPage:(e=>(t,i)=>{const{page:n}=i.payload;t[e].currentPage=n})(Vs.CatalogItems),setCatalogItemsPerPage:(e=>(t,i)=>{const{perPage:n}=i.payload;t[e].currentPage=1,t[e].perPage=n})(Vs.CatalogItems),setCatalogItemsPagination:(e=>(t,i)=>{const{time:n,page:s,perPage:r}=i.payload;t[e].time=n,t[e].currentPage=s,t[e].perPage=r})(Vs.CatalogItems),setUserItems:jN(Vs.UserItems),setUserBundleItems:jN(Vs.UserBundleItems),setCatalogItems:jN(Vs.CatalogItems)},extraReducers:{[TT.type]:bN(Vs.CatalogItems,!0),[hF.changeFilters.type]:(e=>t=>{t[e].currentPage=1,t[e].time=null,t[e].perPage=Bs})(Vs.CatalogItems)}});var IN;const CN={...ZN.actions,getCatalogItemsSuccess:TT},kN={[Ms]:ZN.reducer},wN=(ZN.reducer,e=>{let{button_title:t,button_icon:i,badge_title:n,badge_subtitle:s,promoted:r,...a}=e;return{...a,buttonTitle:t,buttonIcon:i,badgeTitle:n,badgeSubtitle:s,isPromoted:!!r}}),PN=e=>{let{closet_promotion_banners:t}=e;return{closetPromotionBanners:t.map(wN)}},zN=e=>{let{title:t,subtitle:i,action_title:n,bottom_title:s,bottom_subtitle:r,bottom_action_title:a}=e;return{title:t,subtitle:i,actionTitle:n,bottomTitle:s,bottomSubtitle:r,bottomActionTitle:a}},TN=e=>{let{question_title:t,open_question_title:i,score_explanation:n}=e;return{questionTitle:t,openQuestionTitle:i,scoreExplanation:n}},FN=e=>{let{button_title:t,hint:i,placeholder:n,real_name:s,subtitle:r,title:a}=e;return{buttonTitle:t,hint:i,placeholder:n,realName:s,subtitle:r,title:a}},NN=e=>{let{web_button_title:t,badge_title:i,badge_subtitle:n,...s}=e;return{...s,webButtonTitle:t,badgeTitle:i,badgeSubtitle:n}},LN=e=>{let{title:t,subtitle:i,button_title:n}=e;return{title:t,subtitle:i,buttonTitle:n}},EN=e=>{let{heading:t,text:i,cta_title:n,cta_url:s}=e;return{heading:t,text:i,buttonTitle:n,buttonUrl:s}},ON=e=>{let{animation_url:t,image_url:i,heading:n,text:s,text_link_title:r,text_link_url:a,cta_title:o,cta_url:l,close_title:c,close_url:d}=e;return{animationUrl:t,imageUrl:i,heading:n,text:s,textLinkTitle:r,textLinkUrl:a,primaryActionTitle:o,primaryActionUrl:l,closeActionTitle:c,closeActionUrl:null!=d?d:void 0}},RN=e=>{let{image_url:t,heading:i,text:n,text_link_title:s,text_link_url:r,main_cta_title:a,main_cta_url:o,secondary_web_cta_title:l}=e;return{animationUrl:void 0,imageUrl:t,heading:i,text:n,textLinkTitle:s,textLinkUrl:r,primaryActionTitle:a,primaryActionUrl:o,closeActionTitle:l}},DN=e=>{let{cta_title:t,heading:i,text:n}=e;return{heading:i,text:n,ctaTitle:t}},AN=e=>{let{image_url:t,heading:i,text:n,main_cta_title:s,main_cta_url:r,secondary_cta_title:a,secondary_cta_url:o}=e;return{animationUrl:void 0,heading:i,text:n,imageUrl:t,primaryActionTitle:s,primaryActionUrl:r||void 0,closeActionTitle:a,closeActionUrl:o||void 0}},MN=e=>{let{image_urls:t,catalog_id:i,title:n,subtitle:s,button_link_text:r,button_link_url:a}=e;return{imageUrls:t,catalogId:i,title:n,subtitle:s,buttonLinkText:r,buttonLinkUrl:a}},UN=e=>{let{name:t,steps:i}=e;return{name:t,steps:i.map((e=>({name:e.name,title:e.title,body:e.body,imageUrl:e.image_url,video:e.video&&{vertical:{formats:e.video.vertical.formats,imageUrl:e.video.vertical.image_url}}}))),isClosed:!1}},BN=e=>{let{title:t,body:i,cancel_button_label:n,continue_button_label:s,continue_button_url:r}=e;return{title:t,body:i,cancelButtonLabel:n,continueButtonLabel:s,continueButtonUrl:r}},qN=e=>{let{name:t,title:i,subtitle:n,action_title:s,action_url:r}=e;return{name:t,title:i,subtitle:n,actionTitle:s,actionUrl:r}},VN=e=>{let{name:t,title:i,subtitle:n,icon:s}=e;return{name:t,title:i,subtitle:n,icon:s}},HN=e=>{let{cta_title:t,cta_url:i,bottom_text:n,bottom_text_link_title:s,bottom_text_link_url:r}=e;return{ctaTitle:t,ctaUrl:i,bottomText:n,bottomTextLinkTitle:s,bottomTextLinkUrl:r}},GN=e=>{let{news_feed:t,type:i,title:n,body:s,version:r,actions:a,id:o}=e;return{newsFeed:{dismissed:t.dismissed,isDismissible:t.is_dismissible},type:i,title:n,body:s,version:r,id:o,actions:null==a?void 0:a.map((e=>({title:e.title,link:e.link,type:e.type})))}},WN=e=>{let{closet_promotion:t,feed_personalization_banner:i,nps:n,email_confirmation:s,full_name_confirmation:r,push_up_banner:a,terms_and_conditions:o,portal_merge_feed:l,portal_merge_source_announcement:c,portal_merge_target_announcement:d,portal_merge_welcome_screen:u,portal_merge_data_migration:m,portal_merge_go_to_old_portal:p,portal_merge_wait_for_migration:g,portal_merge_initiate_from_target:h,lister_activation:x,onboarding_modal:f,business_account:y,category_intent_banner:v,catalog_rules:_,featured_collection_banner:b,portal_merge_item_view_banner:j,taxpayer_banner:S,forum_closure_banner:Z}=e;return{closetPromotion:t&&PN(t),feedPersonalizationBanner:i&&zN(i),nps:n&&TN(n),emailConfirmation:s,fullNameConfirmation:r&&FN(r),pushUpBanner:a&&NN(a),termsAndConditions:o&&LN(o),portalMergeFeed:l&&EN(l),portalMergeSourceAnnouncement:c&&ON(c),portalMergeTargetAnnouncement:d&&ON(d),portalMergeWelcomeScreen:u&&RN(u),portalMergeDataMigration:m&&DN(m),portalMergeGoToOldPortalBannerModal:p&&AN(p),portalMergeWaitForMigrationModal:g&&AN(g),portalMergeInitiateFromTargetModal:h&&AN(h),listerActivation:(I=x,I?I.map(MN):[]),onboardingModal:f&&UN(f),businessAccount:y&&BN(y),categoryIntentBanner:v,catalogRules:_&&qN(_),featuredCollectionBanner:b&&VN(b),portalMergeItemViewBanner:j&&HN(j),taxpayerBanner:S&&GN(S),forumClosureBanner:Z};var I},XN={banners:WN({}),uiState:Ne.Idle},YN=(0,ad.oM)({name:Zl,initialState:XN,reducers:{changeUiState:(e,t)=>{const{uiState:i}=t.payload;e.uiState=i},fetchBannersSuccess:(e,t)=>{const{banners:i}=t.payload;e.uiState=Ne.Success,e.banners=i},setBanners:(e,t)=>{const{banners:i}=t.payload;e.banners=i}}}),{actions:KN}=YN,JN={[Zl]:YN.reducer},QN=(YN.reducer,"bumps"),$N="push_up_value_proposition_shown",eL={selectedIds:[],pushUpOrder:{fetchUiState:Ne.Idle,prepareUiState:Ne.Idle},pushUpCheckout:{activeModal:Ei.None},pushUpOptions:{freePushUpsCount:0,freePushUpsExpireInDays:0,hasPaymentsAccount:!1,options:[]},pushUpMinimumPrice:{payable:{amount:"0",currencyCode:"EUR"},discount:{amount:"0",currencyCode:"EUR"},total:{amount:"0",currencyCode:"EUR"},hasFreeBump:!1}},tL=(0,ad.oM)({name:QN,initialState:eL,reducers:{cancelCheckout:e=>{e.selectedPushUpOption=void 0,e.pushUpOrder={fetchUiState:Ne.Idle,prepareUiState:Ne.Idle}},setCheckoutModal:(e,t)=>{const{modal:i}=t.payload;e.pushUpCheckout.activeModal=i},setSelectedItems:(e,t)=>{const{itemIds:i}=t.payload;e.selectedIds=i},getPushUpOrderRequest:e=>{e.pushUpOrder={order:void 0,fetchUiState:Ne.Pending,prepareUiState:Ne.Idle}},getPushUpOrderFailure:e=>{e.pushUpOrder={order:void 0,fetchUiState:Ne.Failure,prepareUiState:Ne.Idle}},getPushUpOrderSuccess:(e,t)=>{const{pushUpOrder:i}=t.payload,n=i.pushUpOrderItems.map((e=>{let{itemId:t}=e;return t}));e.pushUpOrder={order:i,fetchUiState:Ne.Success,prepareUiState:Ne.Idle},e.selectedIds=n},setSelectedPushUpOption:(e,t)=>{const{selectedPushUpOption:i}=t.payload;e.selectedPushUpOption=i,e.pushUpOrder.fetchUiState=Ne.Idle},preparePushUpOrderRequest:e=>{e.pushUpOrder={order:void 0,prepareUiState:Ne.Pending,fetchUiState:Ne.Idle}},preparePushUpOrderFailure:e=>{e.pushUpOrder={order:void 0,prepareUiState:Ne.Failure,fetchUiState:Ne.Idle}},preparePushUpOrderSuccess:(e,t)=>{const{pushUpOrder:i}=t.payload;e.pushUpOrder={order:i,prepareUiState:Ne.Success,fetchUiState:Ne.Idle}},getPushUpOptionsSuccess:(e,t)=>{const{pushUpOptions:i}=t.payload;e.pushUpOptions=i},getPushUpMinimumPriceSuccess:(e,t)=>{const{pushUpMinimumPrice:i}=t.payload;e.pushUpMinimumPrice=i},getPushUpOptionsFailure:e=>{e.pushUpOrder={order:void 0,prepareUiState:Ne.Failure,fetchUiState:Ne.Idle}}}}),{actions:iL}=tL,nL={[QN]:tL.reducer},sL=(tL.reducer,"directDonation"),rL={directDonationOrder:{fetchUiState:Ne.Idle,prepareUiState:Ne.Idle},directDonationCheckout:{activeModal:Ei.None}},aL=(0,ad.oM)({name:sL,initialState:rL,reducers:{setCheckoutModal:(e,t)=>{const{modal:i}=t.payload;e.directDonationCheckout.activeModal=i},getOrderRequest:e=>{e.directDonationOrder={order:void 0,fetchUiState:Ne.Pending,prepareUiState:Ne.Idle}},getOrderFailure:e=>{e.directDonationOrder={order:void 0,fetchUiState:Ne.Failure,prepareUiState:Ne.Idle}},getOrderSuccess:(e,t)=>{const{order:i}=t.payload;e.directDonationOrder={order:i,fetchUiState:Ne.Success,prepareUiState:Ne.Idle}},clearCurrentOrder:e=>{e.directDonationOrder={order:void 0,prepareUiState:Ne.Idle,fetchUiState:Ne.Idle}},prepareOrderRequest:e=>{e.directDonationOrder={order:void 0,prepareUiState:Ne.Pending,fetchUiState:Ne.Idle}},prepareOrderFailure:(e,t)=>{const{message:i}=t.payload;e.directDonationOrder={order:void 0,errorMessage:i,prepareUiState:Ne.Failure,fetchUiState:Ne.Idle}},prepareOrderSuccess:(e,t)=>{const{order:i}=t.payload;e.directDonationOrder={order:i,prepareUiState:Ne.Success,fetchUiState:Ne.Idle}}}}),{actions:oL}=aL,lL={[sL]:aL.reducer};let cL;aL.reducer,function(e){e[e.CharitySelect=0]="CharitySelect",e[e.Overview=1]="Overview"}(cL||(cL={}));const dL="fundraiser",uL={fundraiser:void 0,charities:[],selectedCharity:null,currentModalScreen:cL.Overview,uiState:Ne.Idle},mL=e=>{e.uiState=Ne.Failure},pL=(e,t)=>{const{fundraiser:i}=t.payload;e.fundraiser=i,e.selectedCharity=i.charity||null,e.currentModalScreen=i.active?cL.Overview:cL.CharitySelect,e.uiState=Ne.Success},gL=(0,ad.oM)({name:dL,initialState:uL,reducers:{fetchFundraiserConfiguration:e=>{e.uiState=Ne.Pending},fetchFundraiserConfigurationSuccess:pL,fetchFundraiserConfigurationFailure:mL,manageFundraiserConfiguration:e=>{e.uiState=Ne.Pending},manageFundraiserConfigurationSuccess:pL,manageFundraiserConfigurationFailure:mL,stopActiveFundraiser:e=>{e.uiState=Ne.Pending},stopActiveFundraiserFailure:mL,fetchCharitiesSuccess:(e,t)=>{const{charities:i}=t.payload;e.charities=i},fetchCharitiesFailure:mL,setSelectedCharity:(e,t)=>{const{charity:i}=t.payload;e.selectedCharity=i,e.currentModalScreen=cL.Overview},setCurrentModalScreen:(e,t)=>{const{screenName:i}=t.payload;e.currentModalScreen=i}}}),{actions:hL}=gL,xL={[dL]:gL.reducer},fL=(gL.reducer,"favouriteItems"),yL=(0,ad.oM)({name:fL,initialState:{isSoldNotificationShown:!1},reducers:{hideSoldNotification:e=>{e.isSoldNotificationShown=!1}},extraReducers:{[CN.getFavouriteItemsSuccess.type]:(e,t)=>{const{sold:i}=t.payload;e.isSoldNotificationShown=!!i}}}),{actions:vL}=yL,_L={[fL]:yL.reducer},bL=(yL.reducer,{placements:[],segmentIds:[],uiState:Ne.Idle,isAdBlockerUsed:"true"===(0,vc.St)(ei)||null,hasAdBlockerBeenTracked:!!(0,vc.St)(ei)||!1,adBlockerVisitorId:(0,vc.St)(ii)||null}),jL=(0,ad.oM)({name:Et,initialState:bL,reducers:{setAdsPlacements:(e,t)=>{const{placements:i}=t.payload;e.placements=i},setAdsSegmentIds:(e,t)=>{const{segmentIds:i}=t.payload;e.segmentIds=i},setUiState:(e,t)=>{const{uiState:i}=t.payload;e.uiState=i},setIsAdBlockerUsed:(e,t)=>{const{isAdBlockerUsed:i}=t.payload;e.isAdBlockerUsed!==i&&(e.isAdBlockerUsed=i)},setHasAdBlockerBeenTracked:(e,t)=>{const{hasAdBlockerBeenTracked:i}=t.payload;e.hasAdBlockerBeenTracked=i},setAdBlockerVisitorId:(e,t)=>{const{id:i}=t.payload;e.adBlockerVisitorId=i}}}),{actions:SL}=jL,ZL={[Et]:jL.reducer},IL=(jL.reducer,{cookieConsentVersion:Kn.None}),CL={[Ml]:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:IL}},kL="auth";let wL,PL,zL;!function(e){e.SelectTypeRegister="select_type_register",e.SelectTypeLogin="select_type_login",e.EmailLogin="email_login",e.EmailRegister="email_register",e.ResetPassword="reset_password"}(wL||(wL={})),function(e){e.FacebookRegister="facebook_register",e.GoogleRegister="google_register",e.AppleRegister="apple_register",e.PasswordVerification="password_verification"}(PL||(PL={})),function(e){e.OptIn="opt_in",e.OptOut="opt_out",e.WithTerms="with_terms"}(zL||(zL={}));const TL={referrerId:null,isRealNameRequired:!1,isRandomUserSignupEnabled:!1,newsletterSubscription:zL.OptIn,isBusinessRegistrationLinkVisible:!1,isAuthPageOpen:!1},FL=(0,ad.oM)({name:kL,initialState:TL,reducers:{openAuthModal:(e,t)=>{var i,n;const s=is("last_user_id")?wL.SelectTypeLogin:wL.SelectTypeRegister;e.isAuthModalOpen=!0,e.authView=(null===(i=t.payload)||void 0===i?void 0:i.authView)||s,e.isBusiness=(null===(n=t.payload)||void 0===n?void 0:n.isBusiness)||!1},closeAuthModal:e=>{e.isAuthModalOpen=!1},setAuthView:(e,t)=>{const{authView:i}=t.payload;e.authView=i},setExternalRegisterData:(e,t)=>{const{view:i,data:n}=t.payload;e.authView=i,e.externalRegisterData=n},setIsFacebookIsInitialized:e=>{e.isFacebookIsInitialized=!0},setAuthConfigs:(e,t)=>{const{payload:i}=t;return{...e,...i}},setAuthPageOpen:(e,t)=>{e.isAuthPageOpen=t.payload}}}),{actions:NL}=FL,LL={[kL]:FL.reducer},EL=(FL.reducer,"location"),OL={cities:ET,countries:ET},RL=(0,ad.oM)({name:EL,initialState:OL,reducers:{searchCitiesSuccess:(e,t)=>{const{cities:i}=t.payload;NT(e.cities,i)},fetchCountriesSuccess:(e,t)=>{const{countries:i}=t.payload;NT(e.countries,i)}}}),{actions:DL}=RL,AL={[EL]:RL.reducer},ML=(RL.reducer,"accountSettings"),UL={settings:{realName:void 0,gender:Yt.NotSelected,birthday:void 0,isOnHoliday:!1,username:"",isInternationalTradingEnabled:null,isDarkMode:!1},uiState:Ne.Idle},BL=(0,ad.oM)({name:ML,initialState:UL,reducers:{setInitialSettings:(e,t)=>{e.settings=t.payload.settings},setRealName:(e,t)=>{e.settings.realName=t.payload.realName},setGender:(e,t)=>{e.settings.gender=t.payload.gender},setBirthday:(e,t)=>{e.settings.birthday=t.payload.birthday},setIsOnHoliday:(e,t)=>{e.settings.isOnHoliday=t.payload.isOnHoliday},setIsDarkMode:(e,t)=>{e.settings.isDarkMode=t.payload.isDarkMode},setUsername:(e,t)=>{e.settings.username=t.payload.username},setIsInternationalTradingEnabled:(e,t)=>{const{isInternationalTradingEnabled:i}=t.payload;e.settings.isInternationalTradingEnabled=i},setError:(e,t)=>{e.error=t.payload.error},changeUiState:(e,t)=>{const{uiState:i}=t.payload;e.uiState=i}}}),{actions:qL}=BL,VL={[ML]:BL.reducer},HL=(BL.reducer,"itemUpload"),GL=500,WL=1;let XL,YL,KL,JL,QL,$L,eE;!function(e){e.Found="found",e.NotFound="not found"}(XL||(XL={})),function(e){e.Unvalidated="unvalidated",e.Valid="valid",e.Invalid="invalid"}(YL||(YL={})),function(e){e.Unisex="unisex",e.Title="title",e.Size="size_id",e.Brand="brand_id",e.Status="status_id",e.Description="description",e.Price="price",e.PackageSize="package_size_id",e.DomesticShipmentPrice="shipment_prices.domestic",e.InternationalShipmentPrice="shipment_prices.international",e.Catalog="catalog_id",e.Color="color",e.Photos="photos",e.Isbn="isbn",e.Material="material_id",e.Gender="gender_id",e.VideoGameRating="video_game_rating_id",e.ShippingFromLocation="shipping_from_location",e.ShippingSettingsNearby="nearby_carriers",e.ShippingSettingsDistant="distant_carriers",e.ShippingSettingsUnknownDistance="unknown_distance_carriers",e.ShippingMethod="shipping_method",e.Bump="bump",e.MeasurementWidth="measurement_width",e.MeasurementLength="measurement_length"}(KL||(KL={})),function(e){e.Isbn="isbn",e.Price="price",e.Photo="photo",e.Material="material",e.Gender="gender",e.VideoGameRating="video_game_rating",e.Title="title",e.Catalog="catalog",e.Color="color",e.Description="description",e.Brand="brand",e.Size="size",e.Condition="condition",e.Category="category",e.CategoryUnisex="category_unisex",e.PackageSize="package_size",e.Bump="bump",e.MeasurementShoulderWidth="measurement_shoulder_width",e.MeasurementLength="measurement_length"}(JL||(JL={})),function(e){e.ValidationError="validation_error",e.ServerError="server_error",e.Other="other"}(QL||(QL={})),function(e){e.Material="material",e.Gender="gender"}($L||($L={})),function(e){e.Unisex="unisex",e.Gender="gender",e.Isbn="isbn",e.Author="author",e.BookTitle="book_title",e.Brand="brand",e.VideoGameRating="video_game_rating",e.Size="size",e.Measurements="measurements",e.Status="status",e.Color="color",e.Material="material"}(eE||(eE={}));const tE={id:null,assignedPhotos:[],catalogId:null,colorIds:[],title:"",description:"",statusId:null,sizeId:null,price:null,isUnisex:!1,isPromoted:!1,brandId:null,brandTitle:null,isbn:null,packageSize:{id:null,custom:{domestic:null,international:null}},catalog:{attributes:{byName:{},names:[]}},videoGameRatingId:null,alertType:null,isPushUpChecked:!1,feedbackId:null,measurementLength:null,measurementWidth:null},iE={brands:{...ET,suggested:ET,isLuxury:null},colors:{...ET,suggested:ET},catalogs:{...ET,initialIds:[],suggested:[]},sizes:{...ET,suggested:ET},statuses:ET,shippingOptions:[],sizeGroups:ET,photoTips:ET,videoGameRatings:ET,priceSuggestions:{min:null,max:null,currency:null,abTest:null},dynamicAttributes:{byName:{}},bookDetails:null,shouldShowSizeModal:!1,tempUuid:ZF().v4()},nE={screenName:$t.ItemUpload,uiState:Ne.Pending,errors:{byName:{},names:[]},isLuxuryItemModalOpen:!1,showMissingPostalCode:!1,shippingOptions:{uiState:Ne.Idle,isModalOpen:!1},isFormDisabled:!1,price:{hasSimilarItems:!1,isSimilarItemsModalOpen:!1,displayType:null},color:{uiState:Ne.Idle},containsWebPhoto:!1,isOfflineVerificationModalOpen:!1,isAuthenticityProofModalOpen:!1,authenticityModal:{isOpen:!1,content:null},canBumpItem:!1,dynamicAttributes:{uiState:Ne.Idle},isbn:{uiState:Ne.Idle}},sE={previousAttributes:tE,attributes:tE,formData:iE,ui:nE,isOfflineVerificationEligible:!1,configuration:{catalogFieldsOrder:[],maxShippingPrice:null,currency:""},isPackageSizeSelectedManually:!1,isSecondDayLister:!1,isPreviousLister:!1};function rE(e,t){e.ui.errors.byName[t]&&delete e.ui.errors.byName[t],(0,v.remove)(e.ui.errors.names,(e=>e===t))}const aE=e=>{e.ui.isFormDisabled=!0},oE=(e,t)=>{const{colors:i}=t.payload;NT(e.formData.colors,i),e.ui.color.uiState=Ne.Success},lE=e=>{e.ui.color.uiState=Ne.Pending},cE=e=>{e.ui.color.uiState=Ne.Failure},dE=(e,t)=>{const{currentIds:i}=t.payload;e.attributes.assignedPhotos=i,e.ui.isFormDisabled=!1},uE=(0,ad.oM)({name:HL,initialState:sE,reducers:{setInitialItemData:(e,t)=>{var i,n,s,r,a;const{item:o}=t.payload;e.attributes.id=o.id,e.attributes.title=o.title||"",e.attributes.description=o.description||"",e.attributes.isUnisex=o.isUnisex,e.attributes.catalogId=o.catalogId,e.attributes.statusId=o.statusId,e.attributes.sizeId=o.sizeId,e.attributes.colorIds=o.colorIds,e.attributes.price=o.price,e.attributes.brandId=o.brandId,e.attributes.brandTitle=(null===(i=o.brand)||void 0===i?void 0:i.title)||null,e.attributes.isPromoted=o.isPromoted,e.attributes.isbn=o.isbn,e.attributes.packageSize.id=o.packageSizeId,e.attributes.packageSize.custom.domestic=o.domesticShipmentPrice,e.attributes.packageSize.custom.international=o.internationalShipmentPrice,e.attributes.videoGameRatingId=o.videoGameRatingId,e.attributes.measurementLength=o.measurementLength,e.attributes.measurementWidth=o.measurementWidth,e.attributes.alertType=(null===(n=o.itemAlert)||void 0===n?void 0:n.itemAlertType)||null,e.previousAttributes.id=o.id,e.previousAttributes.title=o.title||"",e.previousAttributes.description=o.description||"",e.previousAttributes.catalogId=o.catalogId,e.previousAttributes.statusId=o.statusId,e.previousAttributes.sizeId=o.sizeId,e.previousAttributes.colorIds=o.colorIds,e.previousAttributes.price=o.price,e.previousAttributes.brandId=o.brandId,e.previousAttributes.brandTitle=(null===(s=o.brand)||void 0===s?void 0:s.title)||null,e.previousAttributes.isbn=o.isbn,e.previousAttributes.packageSize.id=o.packageSizeId,e.previousAttributes.packageSize.custom.domestic=o.domesticShipmentPrice,e.previousAttributes.packageSize.custom.international=o.internationalShipmentPrice,e.previousAttributes.videoGameRatingId=o.videoGameRatingId,e.previousAttributes.measurementLength=o.measurementLength,e.previousAttributes.measurementWidth=o.measurementWidth,e.previousAttributes.alertType=(null===(r=o.itemAlert)||void 0===r?void 0:r.itemAlertType)||null,e.formData.brands.isLuxury=(null===(a=o.brand)||void 0===a?void 0:a.isLuxury)||null,e.formData.bookDetails=o.bookDetails,e.ui.canBumpItem=o.canPushUp,e.ui.screenName=o.isDraft?$t.ItemDraft:$t.ItemEdit},toggleIsUnisex:e=>{e.attributes.isUnisex=!e.attributes.isUnisex},setCatalogId:(e,t)=>{e.attributes.catalogId=t.payload.id,rE(e,KL.Catalog)},setColorIds:(e,t)=>{const{ids:i}=t.payload;e.attributes.colorIds=i,rE(e,KL.Color)},setTitle:(e,t)=>{e.attributes.title=t.payload.title,rE(e,KL.Title)},setDescription:(e,t)=>{let{payload:i}=t;e.attributes.description=i.description,rE(e,KL.Description)},setFieldError:(e,t)=>{const{fieldError:i}=t.payload;e.ui.errors.byName[i.field]=i.value,e.ui.errors.names.includes(i.field)||e.ui.errors.names.push(i.field)},setFieldErrors:(e,t)=>{const{fieldErrors:i}=t.payload;i.forEach((t=>{e.ui.errors.byName[t.field]=t.value})),e.ui.errors.names=i.map((e=>e.field))},removeFieldError:(e,t)=>{rE(e,t.payload.fieldName)},setStatusId:(e,t)=>{e.attributes.statusId=t.payload.id,rE(e,KL.Status)},setSizeId:(e,t)=>{e.attributes.sizeId=t.payload.id,rE(e,KL.Size)},setStatuses:(e,t)=>{const{statuses:i}=t.payload;NT(e.formData.statuses,i)},setBrands:(e,t)=>{const{brands:i}=t.payload;NT(e.formData.brands,i)},setCatalogs:(e,t)=>{const{catalogs:i}=t.payload;NT(e.formData.catalogs,i);const n=[];i.forEach((e=>{e.parentId||n.push(e.id)})),e.formData.catalogs.initialIds=n},setColors:oE,setSizes:(e,t)=>{const{sizes:i}=t.payload;NT(e.formData.sizes,i)},setPrice:(e,t)=>{e.attributes.price=t.payload.price,rE(e,KL.Price)},setSuggestions:(e,t)=>{const{colors:i,sizes:n,brands:s,catalogs:r}=t.payload;e.formData.catalogs.suggested=r,NT(e.formData.colors.suggested,i),NT(e.formData.sizes.suggested,n),NT(e.formData.brands.suggested,s)},setColorPendingState:lE,setColorFailureState:cE,setBrand:(e,t)=>{e.attributes.brandId=t.payload.id,e.attributes.brandTitle=t.payload.title,e.formData.brands.isLuxury=t.payload.isLuxury,rE(e,KL.Brand)},setIsAuthenticityProofModalOpen:(e,t)=>{e.ui.isAuthenticityProofModalOpen=t.payload.isOpen},setAuthenticityModalContent:(e,t)=>{e.ui.authenticityModal.content=t.payload.content},setIsAuthenticityModalOpen:(e,t)=>{e.ui.authenticityModal.isOpen=t.payload.isOpen},fetchColorsSuccess:oE,fetchColorsRequest:lE,fetchColorsFailure:cE,setIsFormDisabled:(e,t)=>{const{isFormDisabled:i}=t.payload;e.ui.isFormDisabled=i},showMissingPostalCode:e=>{e.ui.showMissingPostalCode=!0},hideMissingPostalCode:e=>{e.ui.showMissingPostalCode=!1},toggleIsShippingOptionsModalOpen:e=>{e.ui.shippingOptions.isModalOpen=!e.ui.shippingOptions.isModalOpen},setIsLuxuryItemModalOpen:(e,t)=>{e.ui.isLuxuryItemModalOpen=t.payload.isOpen},fetchShippingOptionsRequest:e=>{e.ui.shippingOptions.uiState=Ne.Pending},fetchShippingOptionsFailure:e=>{e.ui.shippingOptions.uiState=Ne.Failure},fetchShippingOptionsSuccess:(e,t)=>{const{shippingOptions:i}=t.payload;e.formData.shippingOptions=i,e.ui.shippingOptions.uiState=Ne.Success},setUiState:(e,t)=>{const{uiState:i}=t.payload;e.ui.uiState=i},setPhotoTips:(e,t)=>{const{photoTips:i}=t.payload;NT(e.formData.photoTips,i)},setSizeGroups:(e,t)=>{const{sizeGroups:i}=t.payload;NT(e.formData.sizeGroups,i)},setVideoGameRatings:(e,t)=>{NT(e.formData.videoGameRatings,t.payload)},setPriceSuggestions:(e,t)=>{const{min:i,max:n,hasSimilarItems:s,currency:r,displayType:a,abTest:o}=t.payload.suggestions;e.formData.priceSuggestions.abTest=o,e.formData.priceSuggestions.min=i,e.formData.priceSuggestions.max=n,e.formData.priceSuggestions.currency=r,e.ui.price.hasSimilarItems=s,e.ui.price.displayType=a},clearPriceSuggestions:e=>{e.formData.priceSuggestions=iE.priceSuggestions,e.ui.price=nE.price},updateAssignedPhotoIds:dE,toggleIsSimilarItemsModalOpen:e=>{e.ui.price.isSimilarItemsModalOpen=!e.ui.price.isSimilarItemsModalOpen},setIsOfflineVerificationModalOpen:(e,t)=>{e.ui.isOfflineVerificationModalOpen=t.payload.isOpen},setIsOfflineVerificationEligible:(e,t)=>{e.isOfflineVerificationEligible=t.payload.eligible},fetchDynamicAttributesSuccess:(e,t)=>{const{dynamicAttributes:i}=t.payload;e.formData.dynamicAttributes.byName={},i.forEach((t=>{e.formData.dynamicAttributes.byName[t.code]=t})),e.ui.dynamicAttributes.uiState=Ne.Success},fetchDynamicAttributesFailure:e=>{e.ui.dynamicAttributes.uiState=Ne.Failure},setDynamicAttributesUiState:(e,t)=>{const{uiState:i}=t.payload;e.ui.dynamicAttributes.uiState=i},setSelectedDynamicAttributeValues:(e,t)=>{const{selectedValues:i}=t.payload;i.forEach((t=>{e.attributes.catalog.attributes.byName[t.field]=t.value})),e.attributes.catalog.attributes.names=i.map((e=>e.field))},setSelectedDynamicAttributeValue:(e,t)=>{const{field:i,value:n}=t.payload;e.attributes.catalog.attributes.byName[i]=n,e.attributes.catalog.attributes.names.includes(i)||e.attributes.catalog.attributes.names.push(i)},setConfiguration:(e,t)=>{const{payload:{configuration:i}}=t;e.configuration.catalogFieldsOrder=i.catalog_group_fields,e.configuration.maxShippingPrice=i.max_custom_shipping_price},setIsPackageSizeManuallySelected:(e,t)=>{const{isPackageSizeManuallySelected:i}=t.payload;e.isPackageSizeSelectedManually=i},setIsSecondDayLister:(e,t)=>{e.isSecondDayLister=t.payload.isSecondDayLister},setIsPreviousLister:(e,t)=>{e.isPreviousLister=t.payload.isPreviousLister},setIsbn:(e,t)=>{const{isbn:i}=t.payload;e.attributes.isbn=i,e.formData.bookDetails=null,e.ui.isbn.uiState=Ne.Idle},setBookDetails:(e,t)=>{const{bookDetails:i}=t.payload;e.formData.bookDetails=i,e.ui.isbn.uiState=Ne.Success},setIsbnPendingState:e=>{e.ui.isbn.uiState=Ne.Pending},setPackageSizeId:(e,t)=>{e.attributes.packageSize.id=t.payload.id,rE(e,KL.PackageSize)},setDomesticShippingPrice:(e,t)=>{e.attributes.packageSize.custom.domestic=t.payload.price,rE(e,KL.DomesticShipmentPrice)},setInternationalShippingPrice:(e,t)=>{e.attributes.packageSize.custom.international=t.payload.price,rE(e,KL.InternationalShipmentPrice)},setVideoGameRatingId:(e,t)=>{e.attributes.videoGameRatingId=t.payload.id,rE(e,KL.VideoGameRating)},setMeasurementLength:(e,t)=>{e.attributes.measurementLength=t.payload.length,rE(e,KL.MeasurementLength)},setMeasurementWidth:(e,t)=>{e.attributes.measurementWidth=t.payload.width,rE(e,KL.MeasurementWidth)},setShouldShowSizeModal:(e,t)=>{e.formData.shouldShowSizeModal=t.payload.shouldShowSizeModal},setFeedbackId:(e,t)=>{const{id:i}=t.payload;e.attributes.feedbackId=i,e.previousAttributes.feedbackId=i},toggleIsPushUpChecked:e=>{e.attributes.isPushUpChecked=!e.attributes.isPushUpChecked},setCurrency:(e,t)=>{e.configuration.currency=t.payload.currency}},extraReducers:{[tN.fetchPhotosSuccess.type]:(e,t)=>{const{photos:i}=t.payload;i.forEach((t=>{let{id:i,isWeb:n}=t;e.previousAttributes.assignedPhotos.push(i),e.attributes.assignedPhotos.push(i),n&&(e.ui.containsWebPhoto=!0)})),rE(e,KL.Photos)},[tN.uploadPhotoFiles.type]:aE,[tN.submitEditedPhoto.type]:aE,[tN.uploadPhotoSuccess.type]:(e,t)=>{const{photos:i}=t.payload;i.forEach((t=>{let{id:i,isWeb:n}=t;e.attributes.assignedPhotos.push(i),n&&(e.ui.containsWebPhoto=!0)})),e.ui.isFormDisabled=!1,rE(e,KL.Photos)},[tN.uploadPhotoFailure.type]:e=>{e.ui.isFormDisabled=!1},[tN.submitEditedPhotoSuccess.type]:dE,[tN.removePhoto.type]:(e,t)=>{const{id:i}=t.payload;(0,v.remove)(e.attributes.assignedPhotos,(e=>e===i))},[tN.changePhotoOrder.type]:(e,t)=>{const{oldIndex:i,newIndex:n}=t.payload,s=(0,WF.Rp)(e.attributes.assignedPhotos,i,n);e.attributes.assignedPhotos=s}}}),{actions:mE}=uE,pE={[HL]:uE.reducer},gE=(uE.reducer,(0,ad.oM)({name:Gt,initialState:{},reducers:{setFeatureSwitches:(e,t)=>{const{featureSwitches:i}=t.payload;i.forEach((t=>{e[t.name]=t.enabled}))}}})),{actions:hE}=gE,xE={[Gt]:gE.reducer},fE=(gE.reducer,{uploadedItem:{id:null,pushedUpId:null,feedbackItemId:null},promotedItemId:null,ui:{currentPromotion:null}}),yE=(0,ad.oM)({name:cT,initialState:fE,reducers:{setFeedbackItemId:(e,t)=>{const{id:i}=t.payload;e.uploadedItem.feedbackItemId=i},setUploadedItemId:(e,t)=>{const{id:i}=t.payload;e.uploadedItem.id=i},setPromotedItemId:(e,t)=>{const{id:i}=t.payload;e.promotedItemId=i},setUploadedItemPushedUpId:(e,t)=>{const{id:i}=t.payload;e.uploadedItem.pushedUpId=i},setCurrentPromotionAfterItemUpload:(e,t)=>{const{promo:i}=t.payload;e.ui.currentPromotion=i}}}),{actions:vE}=yE,_E={[cT]:yE.reducer},bE=(yE.reducer,"closetPromotions"),jE={...ET,seenClosetIds:[],uiState:Ne.Idle,pricingUiState:Ne.Idle,checkout:{order:null,orderFetchUiState:Ne.Idle,orderPrepareUiState:Ne.Idle,activeModal:Ei.None}};function SE(e,t){e.uiState=t}const ZE=(0,ad.oM)({name:bE,initialState:jE,reducers:{startPreCheckout:e=>{e.checkout.activeModal=Ei.PreCheckout},setCheckoutModal:(e,t)=>{const{modal:i}=t.payload;e.checkout.activeModal=i},setClosetPromotionOrder:(e,t)=>{e.checkout.order=t.payload.order},getClosetPromotionOrderRequest:e=>{e.checkout.order=null,e.checkout.orderFetchUiState=Ne.Pending,e.checkout.orderPrepareUiState=Ne.Idle},getClosetPromotionOrderFailure:e=>{e.checkout.order=null,e.checkout.orderFetchUiState=Ne.Failure,e.checkout.orderPrepareUiState=Ne.Idle},getClosetPromotionOrderSuccess:(e,t)=>{e.checkout.order=t.payload.closetPromotionOrder,e.checkout.orderFetchUiState=Ne.Success,e.checkout.orderPrepareUiState=Ne.Idle},prepareClosetPromotionOrderRequest:e=>{e.checkout.orderPrepareUiState=Ne.Pending,e.checkout.order=null},prepareClosetPromotionOrderSuccess:(e,t)=>{e.checkout.orderPrepareUiState=Ne.Success,e.checkout.order=t.payload.order,e.checkout.motivation=t.payload.motivation},prepareClosetPromotionOrderFailure:e=>{e.checkout.orderPrepareUiState=Ne.Failure,e.checkout.order=null},getClosetPromotionsRequest:e=>{SE(e,Ne.Pending)},getClosetPromotionsSuccess:(e,t)=>{const{closets:i}=t.payload;SE(e,Ne.Success);const n=i.map((e=>{let{user:t}=e;return t.id}));e.ids=n,i.forEach((t=>{e.byId[t.user.id]=t}))},getClosetPromotionsFailure:e=>{SE(e,Ne.Failure)},markClosetSeen:(e,t)=>{const{userId:i}=t.payload;e.seenClosetIds=(0,v.union)(e.seenClosetIds,[i])},clearSeenClosets:e=>{e.seenClosetIds=[]},getPricingRequest:e=>{e.pricingUiState=Ne.Pending},getPricingSuccess:(e,t)=>{const{pricing:i}=t.payload;e.pricingUiState=Ne.Success,e.pricing=i},getPricingFailure:e=>{e.pricingUiState=Ne.Failure}}}),{actions:IE}=ZE,CE={[bE]:ZE.reducer},kE=(ZE.reducer,"kyc");let wE;!function(e){e.FirstName="first_name",e.LastName="last_name",e.Birthdate="birthdate",e.SsnSerial="ssn_serial",e.PersonalIdNumber="personal_id_number",e.Address="address",e.IdentityDocument="identity_document",e.RegistrationNumber="registration_number",e.BusinessAddress="business_address",e.Ubo="ubos"}(wE||(wE={}));const PE={formData:{firstName:null,lastName:null,birthdate:null,ssnSerial:null,personalIdNumber:null,address:null,ubos:null,isLegalRepresentativeUbo:!0,documents:[]},generalErrors:{byName:{},names:[]},apiErrors:[],paymentsIdentityConfiguration:null,formState:{isFormDisabled:!1,uiState:Ne.Idle,isFormDirty:!1,hasUnknownApiErrorOccured:!1}},zE=(0,ad.oM)({name:kE,initialState:PE,reducers:{setIsFormDisabled:(e,t)=>{const{isFormDisabled:i}=t.payload;e.formState.isFormDisabled=i},setHasUnknownApiErrorOccured:(e,t)=>{const{status:i}=t.payload;e.formState.hasUnknownApiErrorOccured=i},setConfiguration:(e,t)=>{const{configuration:i}=t.payload;e.paymentsIdentityConfiguration=i,e.formData={firstName:i.firstName,lastName:i.lastName,birthdate:i.birthdate,address:i.address,ubos:null,isLegalRepresentativeUbo:e.formData.isLegalRepresentativeUbo,documents:[]},e.formState.isFormDirty=!1,e.formState.uiState=Ne.Success},submitFormRequest:e=>{e.formState.uiState=Ne.Pending},submitFormSuccess:e=>{e.formState.uiState=Ne.Success,e.formState.isFormDisabled=!1},setFormData:(e,t)=>{const{firstName:i,lastName:n,birthdate:s,ssnSerial:r,personalIdNumber:a,ubos:o,documents:l}=t.payload;e.formData.firstName=i,e.formData.lastName=n,e.formData.birthdate=s,e.formData.ssnSerial=r,e.formData.personalIdNumber=a,e.formData.ubos=o,e.formData.documents=l,e.formState.isFormDirty=!0},setGeneralErrors:(e,t)=>{const{errors:i}=t.payload;i.forEach((t=>{e.generalErrors.byName[t.field]=t.value})),e.generalErrors.names=i.map((e=>e.field)),e.apiErrors=i},setAddress:(e,t)=>{if(!e.paymentsIdentityConfiguration)return;const{address:i}=t.payload;e.formData.address=i,e.formState.isFormDirty=!0,function(e,t){t in e.generalErrors.byName&&delete e.generalErrors.byName[t],(0,v.remove)(e.generalErrors.names,(e=>e===t))}(e,wE.Address)},setIsLegalRepresentativeUbo:(e,t)=>{const{isLegalRepresentativeUbo:i}=t.payload;e.formData.isLegalRepresentativeUbo=i},setFormIsDirty:e=>{e.formState.isFormDirty=!0}}}),{actions:TE}=zE,FE={[kE]:zE.reducer},NE=(zE.reducer,"wallet"),LE={balance:{availableAmount:{amount:"0",currencyCode:"EUR"},pendingAmount:{amount:"0",currencyCode:"EUR"},uiState:Ne.Idle},invoices:{invoiceLines:[],startBalance:{amount:"",currencyCode:""},endBalance:{amount:"",currencyCode:""},startingDate:"",uiState:Ne.Idle,history:void 0}},EE=(0,ad.oM)({name:NE,initialState:LE,reducers:{getBalanceRequest:e=>{e.balance.uiState=Ne.Pending},getBalanceSuccess:(e,t)=>{const{balance:i}=t.payload;e.balance={...i,uiState:Ne.Success}},getBalanceFailure:e=>{e.balance.uiState=Ne.Failure},getCurrentInvoicesRequest:e=>{e.invoices.uiState=Ne.Pending},getCurrentInvoicesSuccess:(e,t)=>{const{invoices:i}=t.payload;e.invoices={...i,uiState:Ne.Success}},getCurrentInvoicesFailure:e=>{e.invoices.uiState=Ne.Failure},getHistoricalInvoicesRequest:e=>{e.invoices.uiState=Ne.Pending},getHistoricalInvoicesFailure:e=>{e.invoices.uiState=Ne.Failure},getHistoricalInvoicesSuccess:(e,t)=>{const{invoices:i}=t.payload;e.invoices={...i,uiState:Ne.Success}}}}),{actions:OE}=EE,RE={[NE]:EE.reducer},DE=(EE.reducer,"payout"),AE={payout:{amount:"",currency:"",progressDetails:[],uiState:Ne.Idle},payoutConfiguration:{amount:"",currency:"",note:null,uiState:Ne.Idle}},ME=(0,ad.oM)({name:DE,initialState:AE,reducers:{getPayoutConfigurationRequest:e=>{e.payoutConfiguration.uiState=Ne.Pending},getPayoutConfigurationSuccess:(e,t)=>{const{payoutConfiguration:i}=t.payload;e.payoutConfiguration={...i,uiState:Ne.Success}},getPayoutConfigurationFailure:e=>{e.payoutConfiguration.uiState=Ne.Failure},getPayoutRequest:e=>{e.payout.uiState=Ne.Pending},getPayoutSuccess:(e,t)=>{const{payout:i}=t.payload;e.payout={...i,uiState:Ne.Success}},getPayoutFailure:e=>{e.payout.uiState=Ne.Failure}}}),{actions:UE}=ME,BE={[DE]:ME.reducer},qE=(ME.reducer,"bank-account"),VE={registration:{bankAccountRegistration:null,uiState:Ne.Idle},bankAccounts:null,uiState:Ne.Idle},HE=(0,ad.oM)({name:qE,initialState:VE,reducers:{fetchBankAccountRegistrationRequest:e=>{e.registration.uiState=Ne.Pending},fetchBankAccountRegistrationFailure:e=>{e.registration.uiState=Ne.Failure},fetchBankAccountRegistrationSuccess:(e,t)=>{const{bankAccountRegistration:i}=t.payload;e.registration={bankAccountRegistration:i,uiState:Ne.Success}},fetchBankAccountsRequest:e=>{e.uiState=Ne.Pending},fetchBankAccountsFailure:e=>{e.uiState=Ne.Failure},fetchBankAccountsSuccess:(e,t)=>{const{bankAccounts:i}=t.payload;e.bankAccounts=i,e.uiState=Ne.Success}}}),{actions:GE}=HE,WE={[qE]:HE.reducer},XE=(HE.reducer,"profileSettings"),YE={settings:{countryId:null,cityId:null,cityTitle:null,isCityVisible:!1,about:void 0,languageCode:"",photoTempUuid:void 0,vat:null},uiState:Ne.Idle},KE=(0,ad.oM)({name:XE,initialState:YE,reducers:{setInitialSettings:(e,t)=>{e.settings=t.payload.settings},setCountryId:(e,t)=>{const{id:i}=t.payload;e.settings.countryId=i},setCity:(e,t)=>{const{id:i,title:n}=t.payload;e.settings.cityId=i,e.settings.cityTitle=n},setIsCityVisible:(e,t)=>{e.settings.isCityVisible=t.payload.isVisible},setAbout:(e,t)=>{e.settings.about=t.payload.about},setLanguageCode:(e,t)=>{e.settings.languageCode=t.payload.languageCode},setPhotoTempUuid:(e,t)=>{e.settings.photoTempUuid=t.payload.photoTempUuid},setUsername:(e,t)=>{e.settings.username=t.payload.username},setContactEmail:(e,t)=>{e.settings.contactEmail=t.payload.contactEmail},setContactNumber:(e,t)=>{e.settings.contactNumber=t.payload.contactNumber},setError:(e,t)=>{e.error=t.payload.error},setVat:(e,t)=>{e.settings.vat=t.payload.vat},changeUiState:(e,t)=>{const{uiState:i}=t.payload;e.uiState=i}}}),{actions:JE}=KE,QE={[XE]:KE.reducer},$E=(KE.reducer,"businessAddresses"),eO=(0,ad.oM)({name:$E,initialState:{isBusinessAddressModalOpen:!1,isReturnAddressModalOpen:!1,isReturnAddressErrorShown:!1,isUsingTheSameAddress:!0,businessAddress:null,returnAddress:null},reducers:{toggleBusinessAddressModal:e=>{e.isBusinessAddressModalOpen=!e.isBusinessAddressModalOpen},toggleReturnAddressModal:e=>{e.isReturnAddressModalOpen=!e.isReturnAddressModalOpen},toggleUsingTheSameAddress:e=>{e.isUsingTheSameAddress=!e.isUsingTheSameAddress},setReturnAddressErrorShown:(e,t)=>{e.isReturnAddressErrorShown=t.payload.isReturnAddressErrorShown},setBusinessAddress:(e,t)=>{e.businessAddress=t.payload},setReturnAddress:(e,t)=>{e.returnAddress=t.payload},fetchBusinessAddressesComplete:(e,t)=>{const{businessAddress:i,returnAddress:n,isUsingTheSameAddress:s}=t.payload;e.businessAddress=i,e.returnAddress=n,e.isUsingTheSameAddress=s}}}),{actions:tO}=eO,iO={[$E]:eO.reducer},nO=(eO.reducer,(0,ad.oM)({name:qn,initialState:{},reducers:{setAbTests:(e,t)=>{const{abTests:i}=t.payload;i.forEach((t=>{e[t.name]=t}))}}})),{actions:sO}=nO,rO={[qn]:nO.reducer},aO=(nO.reducer,"privacyPolicy"),oO=(0,ad.oM)({name:aO,initialState:{isContentExpanded:!1},reducers:{setPrivacyPolicyAccordionsExpanded:(e,t)=>{const{isExpanded:i}=t.payload;e.isContentExpanded=i}}}),{actions:lO}=oO,cO={[aO]:oO.reducer};let dO;oO.reducer,function(e){e.RightsToOrganization="rightsToOrganization",e.FirstName="firstName",e.LastName="lastName",e.Email="email",e.WorldCountry="worldCountry",e.City="city",e.PostalCode="postalCode",e.Company="company",e.Address="address",e.IntellectualPropertyCategory="intellectualPropertyCategory",e.IntellectualPropertyOwner="intellectualPropertyOwner",e.IntellectualPropertyName="intellectualPropertyName",e.RegistrationNumber="registrationNumber",e.RightsConsistOf="rightsConsistOf",e.ProofOfRights="proofOfRights",e.Attachments="attachments",e.Brand="brand",e.Description="description",e.InfringingUrlsTextArea="infringingUrlsTextArea",e.IsLegalFooterConfirmed="isLegalFooterConfirmed",e.IllegalContentType="illegalContentType",e.ReportReasonType="reportReasonType"}(dO||(dO={}));const uO="intellectualPropertyInfringement",mO={captchaUuid:void 0,filesToRetry:[],uploadUiState:Ne.Idle,failedFilenames:[],savedFiles:[],formData:null,formUiState:Ne.Idle,fieldErrors:{}},pO=(0,ad.oM)({name:uO,initialState:mO,reducers:{setCaptchaUuid:(e,t)=>{let{payload:i}=t;e.captchaUuid=i.uuid},resetCaptchaUuid:e=>{e.captchaUuid=void 0},uploadFilesRequest:e=>{e.uploadUiState=Ne.Pending,e.failedFilenames=[],e.filesToRetry=[]},uploadFilesSuccess:(e,t)=>{let{payload:i}=t;e.uploadUiState=Ne.Success,e.savedFiles=e.savedFiles.concat(i.savedFiles)},addFileToRetry:(e,t)=>{let{payload:i}=t;e.filesToRetry.push(i.file)},addFailedFilename:(e,t)=>{let{payload:i}=t;e.failedFilenames.push(i.filename)},deleteSavedFile:(e,t)=>{let{payload:i}=t;e.savedFiles=e.savedFiles.filter((e=>e.id!==i.id))},submitFormRequest:e=>{e.formUiState=Ne.Pending,e.formData=null,e.fieldErrors={}},submitFormSuccess:e=>{e.formUiState=Ne.Success,e.formData=null,e.savedFiles=[]},submitFormFailure:(e,t)=>{let{payload:i}=t;i.errors.forEach((t=>{if("property_rights.illegal_contents.urls"!==t.field)return;const i=t.value.split(",");i.length&&(e.fieldErrors[dO.InfringingUrlsTextArea]=i)})),e.formUiState=Object.keys(e.fieldErrors).length?Ne.Idle:Ne.Failure},setFormData:(e,t)=>{let{payload:i}=t;e.formData=i.formData},setFormUiState:(e,t)=>{let{payload:i}=t;e.formUiState=i.formUiState}}}),{actions:gO}=pO,hO={[uO]:pO.reducer},xO=(pO.reducer,"vasGallery"),fO={selectedIds:[],vasGalleryBanner:{uiState:Ne.Idle,items:[]},vasGalleryOrder:{uiState:Ne.Idle},vasGalleryCheckout:{activeModal:Ei.None},vasGalleryPricing:{uiState:Ne.Idle}},yO=(0,ad.oM)({name:xO,initialState:fO,reducers:{fetchVasGalleryRequest:e=>{e.vasGalleryBanner.uiState=Ne.Pending},fetchVasGallerySuccess:(e,t)=>{e.vasGalleryBanner={items:t.payload.items,uiState:Ne.Success}},fetchVasGalleryFailure:e=>{e.vasGalleryBanner.uiState=Ne.Failure},postVasGalleryOrderRequest:e=>{e.vasGalleryOrder={order:void 0,uiState:Ne.Pending}},postVasGalleryOrderSuccess:(e,t)=>{const{vasGalleryOrder:i}=t.payload;e.vasGalleryOrder={order:i,uiState:Ne.Success}},postVasGalleryOrderFailure:e=>{e.vasGalleryOrder={order:void 0,uiState:Ne.Failure}},getVasGalleryOrderRequest:e=>{e.vasGalleryOrder={order:void 0,uiState:Ne.Pending}},getVasGalleryOrderFailure:e=>{e.vasGalleryOrder={order:void 0,uiState:Ne.Failure}},getVasGalleryOrderSuccess:(e,t)=>{const{vasGalleryOrder:i}=t.payload;e.vasGalleryOrder={order:i,uiState:Ne.Success}},fetchVasGalleryPricingRequest:e=>{e.vasGalleryPricing.uiState=Ne.Pending},fetchVasGalleryPricingSuccess:(e,t)=>{const{vasGalleryPricing:i}=t.payload;e.vasGalleryPricing={pricing:i,uiState:Ne.Success}},fetchVasGalleryPricingFailure:e=>{e.vasGalleryPricing={pricing:void 0,uiState:Ne.Failure}},setSelectedItems:(e,t)=>{const{itemIds:i}=t.payload;e.selectedIds=i},setCheckoutModal:(e,t)=>{const{modal:i}=t.payload;e.vasGalleryCheckout.activeModal=i},startCheckout:(e,t)=>{const{selectedItemId:i}=t.payload||{};e.vasGalleryCheckout.activeModal=Ei.Checkout,i&&(e.selectedIds=[i])},cancelCheckout:e=>{e.vasGalleryOrder={uiState:Ne.Idle,order:void 0}}}}),{actions:vO}=yO,_O={[xO]:yO.reducer},bO=(yO.reducer,"verifications");let jO;!function(e){e.EnterCode="enterCode",e.NotReceiveEmail="notReceiveEmail",e.Success="success"}(jO||(jO={}));const SO={emailCodeView:jO.EnterCode},ZO=(0,ad.oM)({name:bO,initialState:SO,reducers:{setEmailCodeView:(e,t)=>{e.emailCodeView=t.payload}}}),{actions:IO}=ZO,CO={[bO]:ZO.reducer},kO=(ZO.reducer,{FACEBOOK_CLIENT_ID:void 0,APPLE_CLIENT_ID:void 0,GOOGLE_CLIENT_ID:void 0,GOOGLE_MAPS_API_KEY:void 0,RELEASE_VERSION:void 0,NEXT_JS:void 0,CSRF_TOKEN:void 0,NODE_ENV:void 0,IMG_TAG:void 0}),wO=(0,ad.oM)({name:wb,initialState:kO,reducers:{setEnvs:(e,t)=>t.payload.envs}}),{actions:PO}=wO,zO={[wb]:wO.reducer},TO=(wO.reducer,{...uN,...VL,...PI,...yN,...hN,...rO,...xE,...zO}),FO={...{...CL,...LL,...aN,...UZ,...fF},...AL,...Wm,...jF,...wF,...iN,...GF,...ud,...cN,...Am,...kN,...JN,...nL,...lL,...xL,...ZL,...pE,...fZ,..._L,...CE,...Jx,...FE,...RE,...cI,...BE,...pw,...WE,...QE,...iO,...zw,...Zf,...cO,...My,...Oy,...Uk,...hO,..._E,..._O,...CO,...Df,...H_,...nb};let NO,LO;!function(e){e.RecentSearch="recent_search",e.SubscribedSearch="subscribed_search"}(NO||(NO={})),function(e){e.SearchSuggestions="search_suggestions",e.SearchManual="search_manual"}(LO||(LO={}));const EO=()=>{const e=(0,ys.oZ)(window.location.search);return{searchStartId:e.search_start_id||null,searchStartType:e.search_start_type||null}},OO=()=>{const e=(0,Bn.le)(Ii);let t=null;return e&&(e=>Object.values(LO).includes(e))(e)&&(t=e),{searchStartId:(0,Bn.le)(Zi),searchStartType:t}},RO=e=>{let{searchStartId:t,searchStartType:i}=e;t&&i&&((0,Bn.D$)(Zi,t),(0,Bn.D$)(Ii,i))},DO=()=>{(0,Bn.e8)(Ii),(0,Bn.e8)(Zi)},AO=()=>({searchSessionId:(0,Bn.le)(Ci),globalSearchSessionId:(0,Bn.le)(ki)}),MO=e=>{let{searchSessionId:t,globalSearchSessionId:i}=e;t&&(0,Bn.D$)(Ci,t),i&&(0,Bn.D$)(ki,i)};function UO(e){return"url"in e}const BO=e=>{const{id:t,title:i,code:n,url:s,url_en:r,photo:a,order:o,depth:l}=e;return{id:t,title:i,code:n,url:s,photo:UO(a)?a:null,urlEn:r,order:o,depth:l||0,isShippable:e.shippable,isColorAvailable:!!e.color_field_visibility,isLocationAvailable:e.location_field_visible,isSizesAvailable:!!e.size_field_visibility,isVideoGameRatingAvailable:!!e.video_game_rating_field_visibility,isBrandsAvailable:!!e.brand_field_visibility,isIsbnAvailable:!!e.isbn_field_visibility,isAuthorAvailable:!!e.author_field_visibility,isMeasurementsAvailable:!!e.measurements_field_visibility,isBookTitleAvailable:!!e.book_title_field_visibility,landing:(c=e.landing,c?{imageUrl:c.image_url,itemsRemaining:c.items_remaining}:null),canBrowseSubcategories:e.allow_browsing_subcategories,restrictedToStatusId:e.restricted_to_status_id,unisexCatalogId:e.unisex_catalog_id,catalogIds:e.catalogs.map((e=>e.id)),sizeGroupId:e.size_group_id,sizeGroupIds:e.size_group_ids,itemCount:e.item_count,catalogs:e.catalogs.map((e=>BO(e)))};var c},qO=e=>e.map(BO),VO=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.map((e=>[{...e,depth:t},...VO(e.catalogs,t+1)]))},HO=(e,t,i)=>{const n=i.find((t=>t.catalogIds.includes(e.id))),s=n?n.id:va;return{...e,parentId:s}},GO=e=>(e=>(0,v.flattenDeep)(VO(e)))(e).map(BO).map(HO),WO=(e,t)=>e.reduce(((e,i)=>{let n=[],s=0;if(i.catalogs.length){const e=WO(i.catalogs,t);n=e.catalogs,s=e.count}if(t[i.id]||n.length){const r=s+(t[i.id]||0);e.catalogs.push({...i,catalogs:n,item_count:r}),e.count+=r}return e}),{catalogs:[],count:0}),XO=(e,t)=>{const i=t.reduce(((e,t)=>{let{id:i,count:n}=t;return{...e,[i]:n}}),{}),n=WO(e,i).catalogs;return GO(n)},YO=e=>{var t,i;if(e)return{placeholder:e.placeholder,noResults:{title:null===(t=e.no_results)||void 0===t?void 0:t.title,body:null===(i=e.no_results)||void 0===i?void 0:i.body}}},KO=e=>null!=e&&e.length?e.map((e=>{let{id:t,title:i,description:n,type:s,prefix:r,items_count:a,items_count_max:o,options:l}=e;return{id:t,title:i,description:n,type:s,prefix:r,itemsCount:a,itemsCountMax:o,options:KO(l)}})):[],JO=e=>{let{id:t,title:i,code:n,display_type:s,selection_type:r,is_selection_highlighted:a,search_translations:o,is_new_filter:l,options:c}=e;return{id:t,title:i,type:n,displayType:s,selectionType:r,isSelectionHighlighted:a,searchTranslations:YO(o),isNewFilter:l,options:KO(c)}},QO=e=>e.map(JO),$O=e=>{let{code:t,ids:i}=e;return{type:t,ids:i}},eR=e=>e.map($O),tR=e=>e.map($O),iR=e=>e[yF],nR=(0,B.P1)(iR,(e=>{let{searches:t}=e;return t})),sR=(0,B.P1)(nR,(e=>{let{byId:t}=e;return t})),rR=(0,B.P1)(nR,(e=>{let{ids:t}=e;return t})),aR=(0,B.P1)(rR,sR,((e,t)=>e.map((e=>t[e])))),oR=((0,B.P1)(aR,(e=>{const t=e.filter((e=>{let{subscribed:t}=e;return t}));return t?t.map((e=>{let{id:t}=e;return t})):null})),(0,B.P1)(aR,(e=>{const t=e.filter((e=>{let{subscribed:t}=e;return!t}));return t?t.map((e=>{let{id:t}=e;return t})):null})),e=>iR(e).currentSearchId),lR=e=>iR(e).isSubscribeModalOpen,cR=(e,t)=>t?iR(e).searches.byId[t]:null,dR=e=>cR(e,oR(e));let uR;!function(e){e.Relevance="relevance",e.PriceHighToLow="price_high_to_low",e.PriceLowToHigh="price_low_to_high",e.NewestFirst="newest_first"}(uR||(uR={})),(0,ad.PH)("".concat(Os,"/fetchDataFailure"));const mR=(0,ad.PH)("".concat(Os,"/fetchBrandsRequest"),(function(){return{payload:{query:arguments.length>0&&void 0!==arguments[0]?arguments[0]:null}}})),pR=(0,ad.PH)("".concat(Os,"/fetchBrandsFailure")),gR=(0,ad.PH)("".concat(Os,"/fetchBrandRequest")),hR=(0,ad.PH)("".concat(Os,"/applyPersonalizedSizesRequest")),xR=(0,ad.PH)("".concat(Os,"/applyPersonalizedSizesFailure")),fR=(0,ad.PH)("".concat(Os,"/fetchDynamicFilterSearchRequest"),(function(e){return{payload:{text:arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,code:e}}})),yR=(0,ad.PH)("".concat(Os,"/fetchDynamicFilterSearchFailure")),vR=1;function*_R(e){let{payload:t}=e;const{relativeUrl:i,searchParams:n}=t;yield(0,aj.gz)(hF.changeIsInCatalog(!0)),yield(0,aj.gz)(CN.setCatalogItemsPagination({time:Number(n.time)||void 0,page:Number(n.page)||vR,perPage:Bs}));const s=ir(i,n),r=yield*(0,oj.RE)(Fe.ehx,s);if("errors"in r)return void(yield(0,aj.gz)(hF.fetchDataFailure()));const{dtos:a,filters:o}=r,l={brands:[],sizes:[],sizeGroups:[]};yield(0,aj.gz)(hF.changeDtos({dtos:{...a,...l}}));const c={catalogs:GO(a.catalogs),...l};a.dynamicFilters&&a.selectedDynamicFilters&&(c.dynamicFilters=QO(a.dynamicFilters),c.selectedDynamicFilters=eR(a.selectedDynamicFilters),c.supportedFilters=a.supportedFilters),yield(0,aj.gz)(hF.fetchDataSuccess(c)),yield(0,aj.gz)(hF.fetchDefaultDynamicFiltersSuccess({selectedDefaultFilters:tR(a.selectedDefaultFilters||[])})),yield(0,aj.gz)(hF.setInitialFilters({filters:o}))}function*bR(e){let{payload:t}=e;yield(0,aj.gw)(Rs);const i=yield*(0,oj.RE)(Fe.vp3,{keyword:t.query});"errors"in i?yield(0,aj.gz)(pR()):yield(0,aj.gz)(hF.fetchBrandsSuccess({brands:Ih(i.brands)}))}function*jR(e){let{payload:t}=e;const i=yield*(0,oj.RE)(Fe.Rbq,t.brandId);if("errors"in i)return;const n=Zh(i.brand);yield(0,aj.gz)(hF.fetchBrandSuccess({brand:n}))}function*SR(e){let{payload:t}=e;yield(0,aj.gw)(Rs);const i=yield*(0,oj.Ys)(hr),n=yield*(0,oj.Ys)(sa),s=yield*(0,oj.RE)(Fe.bRb,{...i,selectedDynamicFilters:n,filterSearchText:t.text,filterSearchCode:t.code});"errors"in s?yield(0,aj.gz)(yR()):yield(0,aj.gz)(hF.fetchDynamicFilterSearchSuccess({code:t.code,options:KO(s.options),isSelectionHighlighted:s.is_selection_highlighted}))}function*ZR(e){let{shouldReplaceHistory:t}=e;const i=yield*(0,oj.Ys)(hr),n=yield*(0,oj.Ys)(sa),s=yield*(0,oj.Ys)(al),r=yield*(0,oj.Ys)(cl),a=yield*(0,oj.Ys)(dl),o=yield*(0,oj.Ys)(oR),l={...(0,ys.oZ)(window.location.search),search_id:o},c=tr({pagination:{page:s,perPage:r,time:a},extraParams:l,filters:i,selectedDynamicFilters:n}),d="".concat(Me.JXU,"?").concat((0,ys.Kf)(c)),u=t?window.history.replaceState:window.history.pushState;yield(0,oj.RE)([window.history,u],void 0,"",d)}function*IR(e){var t,i;let{meta:{isPaginationEvent:n}}=e;const s=yield*(0,oj.Ys)(hr),r=yield*(0,oj.Ys)(sa),a=yield*(0,oj.Ys)(Vr),o=yield*(0,oj.Ys)(Hr),l=yield*(0,oj.Ys)(Gr),c=null!==(t=yield*(0,oj.Ys)(ml))&&void 0!==t?t:0,d=yield*(0,oj.Ys)(ll),u=null!==(i=yield*(0,oj.Ys)(al))&&void 0!==i?i:0,m=yield*(0,oj.Ys)(cl),{searchStartId:p,searchStartType:g}=yield*(0,oj.RE)(OO),{searchStartId:h,searchStartType:x}=yield*(0,oj.RE)(EO),f=p||h,y=g||x,v=[];n?v.push(Zn({currentPage:u,searchCorrelationId:a,searchSessionId:o,globalSearchSessionId:l})):(v.push(an({itemCount:c,searchCorrelationId:a,searchSessionId:o,filters:s,globalSearchSessionId:l,searchStartId:f,searchStartType:y,selectedDynamicFilters:r})),(f||y)&&(yield*(0,oj.RE)(DO)),s.sortBy&&s.sortBy!==uR.Relevance&&v.push(Cn({order:s.sortBy,searchSessionId:o,globalSearchSessionId:l}))),d&&v.push(Hi({itemCount:c,page:u,perPage:m})),yield(0,oj.$6)(v.map((e=>(0,oj.nn)(Ol,Ol.track,[e]))))}function*CR(){var e;const t=yield*(0,oj.Ys)(hr),i=yield*(0,oj.Ys)(sa),n=yield*(0,oj.Ys)(Vr),s=yield*(0,oj.Ys)(Hr),r=yield*(0,oj.Ys)(Gr),a=null!==(e=yield*(0,oj.Ys)(ml))&&void 0!==e?e:0,{searchStartId:o,searchStartType:l}=yield*(0,oj.RE)(OO),{searchStartId:c,searchStartType:d}=yield*(0,oj.RE)(EO),u=o||c,m=l||d,p=[an({itemCount:a,searchCorrelationId:n,searchSessionId:s,filters:t,globalSearchSessionId:r,searchStartId:u,searchStartType:m,selectedDynamicFilters:i})];(u||m)&&(yield*(0,oj.RE)(DO)),t.sortBy&&t.sortBy!==uR.Relevance&&p.push(Cn({order:t.sortBy,searchSessionId:s,globalSearchSessionId:r})),yield(0,oj.$6)(p.map((e=>(0,oj.nn)(Ol,Ol.track,[e]))))}function*kR(){const e=yield*(0,oj.Ys)(fr),t=yield*(0,oj.Ys)(Er);(yield*(0,oj.Ys)(X))&&1===e.length&&t&&(yield(0,aj.gz)(gR({brandId:e[0]})))}function*wR(){const e=yield*(0,oj.Ys)(Er),t=yield*(0,oj.Ys)(Lr),i=yield*(0,oj.Ys)(fr),n=yield*(0,oj.Ys)(vr),s=yield*(0,oj.Ys)(Mr);i.length&&!e&&(yield(0,aj.gz)(hF.removeFilter({filter:{name:"brandIds"}}))),n.length&&(t?yield(0,aj.gz)(hF.sizeFilterSet({ids:s})):yield(0,aj.gz)(hF.removeFilter({filter:{name:"sizeIds"}})))}function*PR(){if(!(yield*(0,oj.Ys)(mr)))return;const e=yield*(0,oj.Ys)(hr);yield(0,aj.gz)(hF.changeFilters({filters:e}))}function zR(e){const t=[];return e.materialFilter&&t.push(As.material),e.conditionFilter&&t.push(As.status),e.videoGameRatingFilter&&t.push(As.videoGameRating),e.colorFilter&&t.push(As.color),e.sizeFilter&&t.push(As.size),e.brandFilter&&t.push(As.brand),t}function*TR(){const e=yield*(0,oj.Ys)(Wt("dynamic_size_filter_web")),t=yield*(0,oj.Ys)(Vn("dynamic_size_filter")),i="on"===(null==t?void 0:t.variant),n=yield*(0,oj.Ys)(Wt("dynamic_brand_filter_web")),s=yield*(0,oj.Ys)(Vn("dynamic_brand_filter")),r=i&&e,a="on"===(null==s?void 0:s.variant)&&n;yield(0,aj.gz)(hF.fetchDynamicFiltersRequest({supportedFilters:zR({materialFilter:!0,conditionFilter:!0,videoGameRatingFilter:!0,colorFilter:!0,sizeFilter:r,brandFilter:a})}))}function*FR(){const e=yield*(0,oj.Ys)(Wt("dynamic_size_filter_web")),t=yield*(0,oj.Ys)(Vn("dynamic_size_filter")),i="on"===(null==t?void 0:t.variant),n=yield*(0,oj.Ys)(Wt("dynamic_brand_filter_web")),s=yield*(0,oj.Ys)(Vn("dynamic_brand_filter")),r=i&&e,a="on"===(null==s?void 0:s.variant)&&n;yield(0,aj.gz)(hF.fetchTemporaryDynamicFiltersRequest({supportedFilters:zR({materialFilter:!0,conditionFilter:!0,videoGameRatingFilter:!0,colorFilter:!0,sizeFilter:r,brandFilter:a})}))}function*NR(e){let{payload:t}=e;const{filter:i}=t;"value"in i&&"catalogIds"===i.name&&(yield(0,oj.RE)(TR),yield(0,oj.RE)(wR))}function*LR(e){var t;let{payload:i}=e;const{filters:n}=i;null!=n&&null!==(t=n.catalogIds)&&void 0!==t&&t.length&&(yield(0,oj.RE)(TR),yield(0,oj.RE)(PR))}function*ER(){const e=yield*(0,oj.Ys)(Fr),t=yield*(0,oj.Ys)(kr),i=Ks(t,e);if(yield*(0,oj.Ys)(oR))return;const n=yield*(0,oj.RE)(Fe.y79);if("errors"in n)return void(yield(0,aj.gz)(xR()));const s=e.length?Js(i,n.size_ids):n.size_ids;s.length&&(yield(0,aj.gz)(hF.applyPersonalizedSizesSuccess({ids:s})))}function*OR(){yield(0,aj.gw)(Ds),yield(0,oj.RE)(ls.k3)}function*RR(){const e=yield*(0,oj.Ys)(Hr),t=yield*(0,oj.Ys)(Gr);yield*(0,oj.RE)(CR),yield*(0,oj.RE)(MO,{searchSessionId:e,globalSearchSessionId:t})}function*DR(e){const{searchSessionId:t,globalSearchSessionId:i}=e.payload;yield*(0,oj.RE)(IR,e),t&&(yield*(0,oj.RE)(MO,{searchSessionId:t})),i&&(yield*(0,oj.RE)(MO,{globalSearchSessionId:i}))}function*AR(){const e=yield*(0,oj.Ys)(hr),t=yield*(0,oj.Ys)(sa),i=yield*(0,oj.Ys)(ya),n=yield*(0,oj.Ys)(xa),s=yield*(0,oj.Ys)(dl),r=yield*(0,oj.RE)(Fe.sld,{...e,selectedDynamicFilters:t,time:s,supportedFilters:i,filterSearchText:n.text,filterSearchCode:n.code});"errors"in r?yield(0,aj.gz)(hF.fetchDynamicFiltersFailure({errors:r.errors})):yield(0,aj.gz)(hF.fetchDynamicFiltersSuccess({dynamicFilters:QO(r.filters),selectedDynamicFilters:eR(r.selected_filters)}))}function*MR(){const e=yield*(0,oj.Ys)(hr),t=yield*(0,oj.Ys)(ua),i=yield*(0,oj.Ys)(ma),n=yield*(0,oj.Ys)(pa),s=yield*(0,oj.Ys)(ga),r=yield*(0,oj.Ys)(ha),a=yield*(0,oj.Ys)(ya),o=yield*(0,oj.Ys)(xa),l=yield*(0,oj.Ys)(dl),c=yield*(0,oj.RE)(Fe.sld,{...e,catalogIds:i,sizeIds:n,brandIds:s,priceFrom:r.priceFrom,priceTo:r.priceTo,selectedDynamicFilters:t,filterSearchText:o.text,filterSearchCode:o.code,time:l,supportedFilters:a});"errors"in c?yield(0,aj.gz)(hF.fetchTemporaryDynamicFiltersFailure({errors:c.errors})):yield(0,aj.gz)(hF.fetchTemporaryDynamicFiltersSuccess({dynamicFilters:QO(c.filters),temporarySelectedDynamicFilters:eR(c.selected_filters)}))}function*UR(){const e=yield*(0,oj.Ys)(yr),t=yield*(0,oj.Ys)(sa),i=yield*(0,oj.RE)(Fe.CS2,{catalogIds:e});if("errors"in i)yield(0,aj.gz)(hF.fetchDefaultDynamicFiltersFailure({errors:i.errors}));else{const e=tR(i.defaults||[]);yield(0,aj.gz)(hF.fetchDefaultDynamicFiltersSuccess({selectedDefaultFilters:e})),yield(0,aj.gz)(hF.setSelectedDynamicFilters({selectedDynamicFilters:(0,v.unionBy)(e,t,"type")}))}}function*BR(){const e=yield*(0,oj.Ys)(ma),t=yield*(0,oj.Ys)(ua),i=yield*(0,oj.RE)(Fe.CS2,{catalogIds:e});if("errors"in i)yield(0,aj.gz)(hF.fetchDefaultDynamicFiltersFailure({errors:i.errors}));else{const e=tR(i.defaults||[]);yield(0,aj.gz)(hF.fetchDefaultDynamicFiltersSuccess({selectedDefaultFilters:e})),yield(0,aj.gz)(hF.setTemporarySelectedDynamicFilters({temporarySelectedDynamicFilters:(0,v.unionBy)(e,t,"type")}))}}function*qR(){if(yield*(0,oj.Ys)(Wt("catalog_client_side_fetching")))return;if(!(yield*(0,oj.Ys)(mr)))return;const e=yield*(0,oj.Ys)(cr),{sizes:t,sizeGroups:i}=AT(e.sizeGroups),n={catalogs:GO(e.catalogs),brands:Ih(e.brands),sizes:t,sizeGroups:i};e.dynamicFilters&&e.selectedDynamicFilters&&(n.dynamicFilters=QO(e.dynamicFilters),n.selectedDynamicFilters=eR(e.selectedDynamicFilters),n.supportedFilters=e.supportedFilters),yield(0,aj.gz)(hF.fetchDataSuccess(n)),yield(0,aj.gz)(hF.fetchDefaultDynamicFiltersSuccess({selectedDefaultFilters:tR(e.selectedDefaultFilters||[])}))}function*VR(){yield(0,aj.Cs)(qR),yield(0,aj.Fm)(hF.fetchDataRequest,_R),yield(0,aj.Fm)(mR,bR),yield(0,aj.ib)(gR,jR),yield(0,aj.Fm)(hF.fetchDynamicFiltersRequest,AR),yield(0,aj.Fm)(hF.fetchTemporaryDynamicFiltersRequest,MR),yield(0,aj.ib)(CN.getCatalogItemsSuccess,DR),yield(0,aj.ib)(hF.removeFilter,NR),yield(0,aj.ib)(hR,ER),yield(0,aj.Fm)(hF.catalogFilterSet,wR),yield(0,aj.Fm)(hF.catalogFilterSet,UR),yield(0,aj.Fm)(hF.setTemporaryCatalogIds,BR),yield(0,aj.Fm)(fR,SR),yield(0,aj.Fm)(hF.setQuery,OR),yield(0,aj.Fm)(hF.setFilters,LR),yield(0,aj.Fm)([hF.removeFilter,hF.removeFilters,hF.toggleBrandFilterOption,hF.toggleSizeFilterOption,hF.priceRangeFilterSet,hF.toggleSortFilterOption,hF.sizeFilterSet,hF.setQuery,hF.fetchDynamicFiltersSuccess],PR),yield(0,aj.Fm)([hF.submitSearchQuery,hF.removeFilter,hF.toggleBrandFilterOption,hF.toggleSizeFilterOption,hF.priceRangeFilterSet,hF.setSelectedDynamicFilter,hF.setSelectedDynamicFilters,hF.removeSelectedDynamicFilterId,hF.removeSelectedDynamicFilter,hF.removeSelectedDynamicFilters],TR),yield(0,aj.Fm)([hF.setTemporarySelectedDynamicFilter,hF.setTemporarySelectedDynamicFilters,hF.removeTemporarySelectedDynamicFilter,hF.removeTemporarySelectedDynamicFilterId,hF.removeTemporarySelectedDynamicFilters,hF.removeTemporaryCatalogIds,hF.setTemporarySizeIds,hF.removeTemporarySizeIds,hF.setTemporaryBrandIds,hF.removeTemporaryBrandIds,hF.setTemporaryPriceRange,hF.removeTemporaryPriceRange],FR),yield(0,aj.Fm)([hF.changeFilters,CN.setCatalogItemsPage,CN.setCatalogItemsPerPage],ZR,{shouldReplaceHistory:!1}),yield(0,aj.Fm)([hF.applyPersonalizedSizesSuccess,bF.setCurrentSearch],ZR,{shouldReplaceHistory:!0}),yield(0,aj.Fm)([hF.changeFilters,hF.setInitialFilters,hF.fetchDataSuccess],kR),yield(0,aj.ib)(hF.fetchDataSuccess,RR)}const HR="saved_searches_subscribed",GR="true",WR=new(Qn()),XR=()=>{const e=new Date,t=new Date(e.setFullYear(e.getFullYear()+1));WR.set(HR,GR,{expires:t,path:"/"})},YR=()=>WR.get(HR)===GR,KR=e=>{var t,i,n,s;const r=e.brands.map((e=>e.id)),a=null===(t=e.price_from)||void 0===t?void 0:t.amount,o=null===(i=e.price_to)||void 0===i?void 0:i.amount,l=(null===(n=e.price_from)||void 0===n?void 0:n.currency_code)||(null===(s=e.price_to)||void 0===s?void 0:s.currency_code);return{...(0,v.omit)(e,["brands","title","subtitle","new_items_count","last_visited_at","unrestricted_new_items_count"]),brand_ids:r,price_from:a,price_to:o,currency:l}},JR=e=>{const t={};return e.forEach((e=>{let{type:i,ids:n}=e;t["".concat(i,"_ids")]=n})),t},QR=(e,t)=>{const i={search_text:e.query||void 0,brand_ids:e.brandIds,color_ids:e.colorIds,size_ids:e.sizeIds,material_ids:e.materialIds,video_game_rating_ids:e.videoGameRatingIds,status_ids:e.statusIds,catalog_id:(0,v.first)(e.catalogIds),price_from:e.priceFrom||void 0,price_to:e.priceTo||void 0,currency:e.currency||void 0};return(0,_i.Gj)({...i,...JR(t)})},$R=(0,ad.PH)("".concat(yF,"/fetchSearchesRequest")),eD=(0,ad.PH)("".concat(yF,"/fetchSearchesFailure")),tD=(0,ad.PH)("".concat(yF,"/fetchSearchRequest")),iD=(0,ad.PH)("".concat(yF,"/fetchSearchFailure")),nD=(0,ad.PH)("".concat(yF,"/createSearchRequest")),sD=(0,ad.PH)("".concat(yF,"/createSearchSuccess")),rD=(0,ad.PH)("".concat(yF,"/createSearchFailure")),aD=(0,ad.PH)("".concat(yF,"/updateSearchRequest")),oD=(0,ad.PH)("".concat(yF,"/updateSearchSuccess")),lD=(0,ad.PH)("".concat(yF,"/updateSearchFailure")),cD=(0,ad.PH)("".concat(yF,"/toggleSearchSubscription")),dD=(0,ad.PH)("".concat(yF,"/checkCurrentSearch")),uD=(0,ad.PH)("".concat(yF,"/toggleCurrentSearchSubscription"));function*mD(e){let{payload:t}=e;const{userId:i}=t,n=yield*(0,oj.RE)(Fe.v9r,i);"errors"in n?yield(0,aj.gz)(eD()):yield(0,aj.gz)(bF.fetchSearchesSuccess({searches:n.searches}))}function*pD(e){let{payload:t}=e;const{userId:i,searchId:n}=t,s=yield*(0,oj.RE)(Fe.uPS,{id:n,userId:i});"errors"in s?yield(0,aj.gz)(iD()):yield(0,aj.gz)(bF.fetchSearchSuccess({search:s.search}))}function*gD(e){let{payload:t}=e;const{userId:i,search:n}=t,s=yield*(0,oj.RE)(Fe.cBQ,{userId:i,search:n});"errors"in s?yield(0,aj.gz)(rD()):yield(0,aj.gz)(sD({searchId:s.search.id}))}function*hD(e){let{payload:t}=e;const{searchId:i,userId:n,search:s,keepLastVisitTime:r}=t,a={userId:n,search:s,keepLastVisitTime:r};"errors"in(yield*(0,oj.RE)(Fe._6y,{id:i,...a}))?yield(0,aj.gz)(lD()):yield(0,aj.gz)(oD())}function*xD(){(yield*(0,oj.RE)(YR))||(yield(0,oj.RE)(XR),yield(0,aj.gz)(bF.openSubscribeModal()))}function*fD(e){let{userId:t}=e;yield(0,oj.qn)([sD,oD]),yield(0,aj.gz)($R({userId:t}))}function*yD(){const e=yield(0,aj.S3)({success:(0,oj.qn)(sD),failure:(0,oj.qn)(rD)});e.success&&(yield(0,aj.gz)(bF.setCurrentSearch({currentSearchId:e.success.payload.searchId})))}function*vD(e){let{payload:t}=e;const{userId:i,searchId:n}=t,s=yield*(0,oj.Ys)(cR,n);if(!s)return;yield(0,aj.rM)(xD);const r={...KR(s),subscribed:!s.subscribed};yield(0,aj.gz)(aD({searchId:n,userId:i,search:r,keepLastVisitTime:!0})),yield(0,aj.rM)(fD,{userId:i})}function*_D(e){let{payload:t}=e;const{userId:i}=t,n=yield*(0,oj.Ys)(dR);if(yield(0,aj.rM)(xD),n){const e={...KR(n),subscribed:!n.subscribed};yield(0,aj.gz)(aD({searchId:n.id,userId:i,search:e,keepLastVisitTime:!0})),yield(0,aj.rM)(fD,{userId:i})}else{const e=yield*(0,oj.Ys)(hr),t=yield*(0,oj.Ys)(sa),n={...QR(e,t),subscribed:!0};yield(0,aj.gz)(nD({userId:i,search:n})),yield(0,aj.rM)(yD),yield(0,aj.rM)(fD,{userId:i})}}function*bD(){yield(0,aj.gw)(vF);const e=yield*(0,oj.Ys)(oR),t=yield*(0,oj.Ys)(X),i=yield*(0,oj.Ys)(hr),n=yield*(0,oj.Ys)(sa),s=yield*(0,oj.Ys)(Zr),r=QR(i,n);if(t&&!s)if(yield(0,aj.rM)(fD,{userId:t}),e){var a;let n=yield*(0,oj.Ys)(dR);n||(yield(0,aj.gz)(tD({userId:t,searchId:e})),n=(yield*(0,oj.qn)(bF.fetchSearchSuccess)).payload.search),(0,v.isEmpty)(i.query)||i.query===(null===(a=n)||void 0===a?void 0:a.search_text)?yield(0,aj.gz)(aD({searchId:e,userId:t,search:{...r,subscribed:n.subscribed},keepLastVisitTime:!1})):(yield(0,aj.gz)(nD({userId:t,search:r})),yield(0,aj.rM)(yD))}else{if((0,v.isEmpty)(i.query))return;yield(0,aj.gz)(nD({userId:t,search:r})),yield(0,aj.rM)(yD)}}function*jD(){yield(0,aj.Fm)($R,mD),yield(0,aj.ib)(tD,pD),yield(0,aj.ib)(nD,gD),yield(0,aj.ib)(aD,hD),yield(0,aj.ib)(cD,vD),yield(0,aj.ib)(uD,_D),yield(0,aj.Fm)([dD,hF.changeFilters,hF.setInitialFilters],bD)}const SD=e=>{const{id:t,title:i,params:n}=e,s={id:t,title:i,params:n};if("filters"in e)return{...s,subtitle:e.subtitle,query:e.filters.search_text,filters:{query:e.filters.search_text,catalogIds:[e.filters.catalog_id]},type:ji.Scoped};const r=[ji.Brand,ji.Catalog,ji.Multiword];return{...s,query:i,typeId:e.suggestion_id.toString(),type:r[e.suggestion_type]}},ZD=e=>e.map(SD),ID=(e,t)=>({id:Be.kU,title:e,query:t,type:ji.Fallback}),CD=350;function*kD(e){let{payload:t,meta:i}=e;yield(0,aj.gw)(CD);const{query:n}=t,{title:s}=i,r=[ID(s,n)],a=yield*(0,oj.RE)(Fe.KFn,{query:n});if("errors"in a)return void(yield(0,aj.gz)(kF.fetchSuggestionsFailure({fallbackSuggestions:r})));const o=[...ZD(a.search_suggestions),...r];yield(0,aj.gz)(kF.fetchSuggestionsSuccess({suggestions:o}))}function*wD(){yield(0,aj.Fm)(kF.fetchSuggestionsRequest.type,kD)}const PD=e=>{var t;if(!e)return;const i="photo"in e?null===(t=e.photo)||void 0===t?void 0:t.url:e.photo_url;return{id:e.id,login:e.login,profileUrl:e.profile_url,photoUrl:i||void 0}},zD=e=>{let{current_page:t,total_pages:i}=e;return{currentPage:t,totalPages:i}},TD=(e,t)=>{let{comment:i,user:n}=e;if(i)return{user:PD(n),text:i,isSystem:t}},FD=e=>{let{id:t,user:i,feedback:n,rating:s,created_at_ts:r,system_feedback:a,comment:o,is_system_comment:l,can_comment:c,can_change:d,can_delete:u,can_change_comment:m,can_delete_comment:p,localization:g}=e;return{id:t,text:n,rating:s,user:PD(i),comment:TD(o,!!l),createdAt:r,isSystem:a,canReply:c,canChange:d,canDelete:u,canChangeComment:m,canDeleteComment:p,localization:g}},ND=e=>{let{pagination:t,user_feedbacks:i}=e;return{pagination:zD(t),feedback:i.map(FD)}},LD=(0,ad.PH)("".concat(PF,"/feedbackInitiateTranslation")),ED=e=>e[PF],OD=e=>ED(e).data,RD=(e,t)=>OD(e).byId[t],DD=(e,t)=>OD(e).byTranslatedId[t],AD=(0,B.P1)(OD,(e=>e.ids)),MD=(0,B.P1)(RD,(e=>e.comment)),UD=e=>ED(e).ui,BD=(e,t)=>UD(e).feedbackState[t],qD=(0,B.P1)(UD,(e=>e.uiState)),VD=(0,B.P1)(UD,(e=>e.currentPage)),HD=(0,B.P1)(UD,(e=>e.totalPages)),GD=(0,B.P1)([VD,HD],((e,t)=>!!t&&e>=t)),WD=(0,B.P1)(BD,(e=>e.screen)),XD=(0,B.P1)(BD,(e=>e.uiState)),YD=(0,B.P1)(BD,(e=>e.error)),KD=(0,B.P1)(BD,(e=>e.isTranslated)),JD=(0,B.P1)(UD,(e=>e.showFilters)),QD=(0,B.P1)([KD,RD,DD],((e,t,i)=>e?i:t));function*$D(e){let{payload:{userId:t,feedbackFilterType:i}}=e;const n=yield*(0,oj.Ys)(VD),s=yield*(0,oj.RE)(Fe.KL1,{userId:t,perPage:20,page:n+1,feedbackFilterType:i});"errors"in s?yield(0,aj.gz)(HF.feedbackGetFailure({error:s})):yield(0,aj.gz)(HF.feedbackGetSuccess({feedbackData:ND(s)}))}function*eA(e){let{payload:{feedbackId:t}}=e;const i=yield*(0,oj.RE)(Fe.qq4,{feedbackId:t});"errors"in i?yield(0,aj.gz)(HF.feedbackDeleteFailure({feedbackId:t,error:i})):yield(0,aj.gz)(HF.feedbackDeleteSuccess({feedbackId:t}))}function*tA(e){let{payload:{feedbackId:t,comment:i}}=e;const n=yield*(0,oj.RE)(Fe.nL5,{feedbackId:t,comment:i});"errors"in n?yield(0,aj.gz)(HF.feedbackCommentCreateFailure({feedbackId:t,error:n})):yield(0,aj.gz)(HF.feedbackCommentCreateSuccess({feedbackId:t,feedback:FD(n.feedback)}))}function*iA(e){let{payload:{feedbackId:t,comment:i}}=e;const n=yield*(0,oj.RE)(Fe.nL5,{feedbackId:t,comment:i});"errors"in n?yield(0,aj.gz)(HF.feedbackCommentEditFailure({feedbackId:t,error:n})):yield(0,aj.gz)(HF.feedbackCommentEditSuccess({feedbackId:t,feedback:FD(n.feedback)}))}function*nA(e){let{payload:{feedbackId:t}}=e;const i=yield*(0,oj.RE)(Fe.FrJ,{feedbackId:t});"errors"in i?yield(0,aj.gz)(HF.feedbackCommentDeleteFailure({feedbackId:t,error:i})):yield(0,aj.gz)(HF.feedbackCommentDeleteSuccess({feedbackId:t,feedback:FD(i.feedback)}))}function*sA(e){let{payload:{feedbackId:t,localize:i}}=e;i?(yield*(0,oj.Ys)(DD,t))?yield(0,aj.gz)(HF.feedbackToggleTranslated({feedbackId:t,localize:i})):yield(0,aj.gz)(HF.feedbackTranslateRequest({feedbackId:t,localize:i})):yield(0,aj.gz)(HF.feedbackToggleTranslated({feedbackId:t,localize:i}))}function*rA(e){let{payload:{feedbackId:t,localize:i}}=e;const n=yield*(0,oj.RE)(Fe.qmj,{feedbackId:t,localize:i});"errors"in n?yield(0,aj.gz)(HF.feedbackTranslateFailure({feedbackId:t,error:n})):yield(0,aj.gz)(HF.feedbackTranslateSuccess({feedbackId:t,feedback:FD(n.user_feedback),localize:i}))}function*aA(){yield(0,aj.ib)(HF.feedbackGetRequest,$D),yield(0,aj.ib)(HF.feedbackDeleteRequest,eA),yield(0,aj.ib)(HF.feedbackCommentCreateRequest,tA),yield(0,aj.ib)(HF.feedbackCommentEditRequest,iA),yield(0,aj.ib)(HF.feedbackCommentDeleteRequest,nA),yield(0,aj.ib)(HF.feedbackTranslateRequest,rA),yield(0,aj.ib)(LD,sA)}const oA=e=>({id:e.id,width:e.width,height:e.height,url:e.url,tempUuid:e.temp_uuid,dominantColor:e.dominant_color,dominantColorOpaque:e.dominant_color_opaque,isSuspicious:e.is_suspicious,fullSizeUrl:e.full_size_url,isWeb:e.extra.is_web,orientation:e.orientation||0,thumbnails:ot(e.thumbnails)}),lA=e=>e.map(oA),cA=(e,t,i)=>{const n=new FormData;return n.append("photo[type]",t),n.append("photo[file]",e),i&&n.append("photo[temp_uuid]",i),n},dA=e=>e[XF],uA=e=>dA(e).photos.byId,mA=(e,t)=>uA(e)[t],pA=e=>dA(e).photos.ids,gA=e=>dA(e).uiState,hA=e=>e.mediaUpload.photos.ids.length,xA=e=>{const{currentImageId:t}=dA(e);return t?mA(e,t):null},fA=(0,aS.P1)(uA,pA,((e,t)=>{const i=t.map((t=>{var i;return null===(i=e[t])||void 0===i?void 0:i.tempUuid})).filter((e=>"string"==typeof e&&e));return i.length?i:void 0}));function*yA(e){let{payload:t}=e;try{const e=cA(new File([t.image],"imgly"),t.type,t.tempUuid),i=yield(0,oj.RE)(Fe.CbZ,e);if("errors"in i)return void(yield(0,aj.gz)(tN.submitEditedPhotoFailure()));const n=yield*(0,oj.RE)(oA,i);yield(0,aj.gz)(tN.updateExistingPhoto({photo:n,imageToReplaceId:t.id}));const s=yield*(0,oj.Ys)(pA);yield(0,aj.gz)(tN.submitEditedPhotoSuccess({currentIds:s}));const r=Dn({tempUuid:n.tempUuid,photoId:"".concat(t.id,", ").concat(n.id)});yield(0,aj.nn)(Ol,Ol.track,[r])}catch(e){yield(0,aj.gz)(tN.submitEditedPhotoFailure())}}function*vA(e){let{payload:t}=e;const{tempUuid:i,type:n,files:s}=t;try{const e=s.map((e=>cA(e,n,i))),t=yield*(0,oj.$6)(e.map((e=>(0,oj.RE)(Fe.CbZ,e)))),r=t.filter((e=>!("errors"in e)));if(t.reduce(((e,t)=>e||"errors"in t),!1))return void(yield(0,aj.gz)(tN.uploadPhotoFailure()));const a=yield*(0,oj.RE)(lA,r);yield(0,aj.gz)(tN.uploadPhotoSuccess({photos:a}));const o=yield*(0,oj.Ys)(hA),l=yield*(0,oj.Ys)(pe);Bb(Ob.PhotoUpload,{photo_count:o,occurrence_number:l+1})}catch(e){yield(0,aj.gz)(tN.uploadPhotoFailure())}}function*_A(e){let{payload:t}=e;const{type:i,photoEntryId:n,tempUuid:s}=t,r=yield*(0,oj.RE)(Fe.wP8,{type:i,photoEntryId:n,tempUuid:s});if("errors"in r)return void(yield(0,aj.gz)(tN.fetchPhotosFailure()));const a=yield*(0,oj.RE)(lA,r.photos_dto);yield(0,aj.gz)(tN.fetchPhotosSuccess({photos:a}))}function*bA(){yield(0,aj.ib)(tN.uploadPhotoFiles,vA),yield(0,aj.ib)(tN.fetchPhotosRequest,_A),yield(0,aj.ib)(tN.submitEditedPhoto,yA)}const jA=e=>{const{id:t,title:i,body:n,url:s,transaction_id_visible:r,transaction_id_required:a,member_id_visible:o,member_id_required:l,item_id_visible:c,item_id_required:d,attachments_visible:u,attachments_required:m,submit_photo_tips:p,submit_button:g,english_allowed_visible:h,question:x,proceed_button:f,contact_allowed:y,children:v,code:_}=e;return{id:t,body:n,title:i||"",url:s,transactionIdVisible:r,transactionIdRequired:a,memberIdVisible:o,memberIdRequired:l,itemIdVisible:c,itemIdRequired:d,attachmentsVisible:u,attachmentsRequired:m,submitPhotoTips:p,submitButton:g,englishAllowedVisible:h,isQuestion:x,proceedButton:f||void 0,isContactAllowed:y,children:v,code:_}};function*SA(e){let{payload:{id:t}}=e;if((yield*(0,oj.Ys)(yp,t))!==Ne.Idle)return;yield*(0,oj.gz)(lN.setStateById({id:t,state:Ne.Pending}));const i=yield*(0,oj.RE)(Fe.DMe,t.toString());if("errors"in i||!i.faq_entry)return void(yield*(0,oj.gz)(lN.setStateById({id:t,state:Ne.Failure})));const n=yield*(0,oj.RE)(jA,i.faq_entry);yield(0,oj.gz)(lN.fetchFaqEntrySuccess({faqEntry:n}))}function*ZA(e){let{payload:{type:t}}=e;if((yield*(0,oj.Ys)(vp,t))!==Ne.Idle)return;yield*(0,oj.gz)(lN.setStateByType({type:t,state:Ne.Pending}));const i=yield*(0,oj.RE)(Fe.mAo,t);if("errors"in i||!i.faq_entry)return void(yield*(0,oj.gz)(lN.setStateByType({type:t,state:Ne.Failure})));const n=yield*(0,oj.RE)(jA,i.faq_entry);yield(0,oj.gz)(lN.fetchFaqEntrySuccess({faqEntry:n,type:t}))}function*IA(){yield(0,aj.ib)(up,SA),yield(0,aj.ib)(mp,ZA)}const CA=e=>{let{from:t,to:i,is_available:n}=e;return{from:t,to:i,isAvailable:n}},kA=e=>{let{date:t,is_available:i,times:n}=e;return{date:t,isAvailable:i,times:n?n.map(CA):null}},wA=e=>e.map(kA),PA=e=>{return{id:e.id,carrier:(t=e.carrier,{name:t.name,iconUrl:t.icon_url}),instructions:e.instructions};var t},zA=e=>{let{id:t,price:i,currency:n}=e;return{id:t,price:Ha(i,n)}},TA=e=>{let{code:t,custom:i,education_text:n,format_description:s,id:r,standard:a,title:o,weight_description:l,image:c}=e;return{code:t,custom:i,educationText:n,formatDescription:s,id:r,standard:a,title:o,weightDescription:l,image:c}},FA=e=>e.map(TA),NA=e=>({id:e.id,takenItemCount:e.taken_item_count,defaultAddress:e.default_address&&(0,V.X)(e.default_address),bundleDiscount:e.bundle_discount?nt(e.bundle_discount):null,countryCode:e.country_code,business:e.business,closetCountdownEndDate:e.closet_countdown_end_date,login:e.login}),LA=e=>null!=e&&e.item_price&&null!=e&&e.currency?{amount:null==e?void 0:e.item_price,currencyCode:null==e?void 0:e.currency}:null,EA=(e,t)=>({items:no(e.items),itemIds:e.item_ids,creditCardId:(null==t?void 0:t.external_card_code)||null,title:e.title,reserved:e.reserved,packageSize:e.package_size?TA(e.package_size):null,price:LA(t)}),OA=e=>({id:e.id,takenItemCount:e.taken_item_count,bundleDiscount:e.bundle_discount?nt(e.bundle_discount):null,countryCode:e.country_code,business:e.business,defaultAddress:e.default_address&&(0,V.X)(e.default_address),login:e.login}),RA=e=>{let{id:t,buyer_debit_id:i,buyer_debit:n,buyer:s,order:r,shipment:a,available_actions:o,debit_processed_at:l,user_msg_thread_id:c,items_count:d,item_id:u,offer:m,status:p,seller:g,meet_and_pickup:h,status_title:x,user_side:f,buyer_phone_number:y,seller_phone_number:v,transaction_checksum:_,tax_coverage_available:b,item_title:j,suspending_complaint_id:S,offline_verification:Z,total_amount_without_tax:I,service_fee:C}=e;return{id:t,buyerDebitId:i,order:EA(r,n),buyer:OA(s),buyerDebit:n?(k=n,{id:k.id,creditCardId:k.external_card_code,offerId:k.offer_id,status:k.status,failureReason:k.failure_reason,itemDiscount:k.item_discount,itemDiscountType:k.item_discount_type,itemPrice:k.item_price,itemPriceSellerShare:k.item_price_seller_share,protectionFee:k.service_fee,protectionFeeDiscount:k.service_fee_discount,protectionFeeWithoutDiscount:k.service_fee_without_discount,shipmentPrice:k.total_shipment_price,totalAmount:k.total_amount,totalAmountWithoutTax:Ha(k.total_amount_without_tax,k.currency).amount,cardAmount:k.card_amount,discount:k.discount,marketplaceShare:k.marketplace_share,sellerShare:k.seller_share,shipmentDiscount:k.shipment_discount,payInRedirectUrl:k.pay_in_redirect_url,payInMethod:k.pay_in_method&&kj(k.pay_in_method),walletAmount:k.wallet_amount,payInAmount:k.pay_in_amount,currency:k.currency,conversion:k.conversion&&Hj(k.conversion),salesTax:k.sales_tax?Ga(k.sales_tax):null,isTaxCovered:null!==(w=k.tax_covered)&&void 0!==w?w:null}):null,userSide:f,address:null!=a&&a.to_address?(0,V.X)(a.to_address):null,shipment:a&&Dj(a),canMarkAsReceived:o.includes(hd.MarkAsReceived),isDebitProcessed:!!l,conversationId:c,availableActions:o,itemsCount:d,itemId:u,offer:zA(m),status:p,seller:g?NA(g):null,isMeetAndPickup:h,statusTitle:x,buyerPhoneNumber:y,sellerPhoneNumber:v,transactionChecksum:_,isTaxCoverageAvailable:null!=b?b:null,itemTitle:j,complaintId:S?S.toString():null,offlineVerification:Z,totalAmountWithoutTax:Va(I),serviceFee:Va(C)};var k,w};function*DA(e){let{payload:{conversationId:t,translate:i}}=e;const n=yield*(0,oj.RE)(Fe.x9b,{conversationId:t,translate:i});"errors"in n||(yield(0,aj.gz)(Dm.getConversationSuccess({conversation:AP(n.conversation),status:n.status})))}function*AA(e){let{payload:{conversationId:t,fromPostReply:i=!1}}=e;if(yield(0,aj.gz)(Dm.getConversationUiPending({fromPostReply:i})),Number.isNaN(Number(t)))return void(yield(0,aj.gz)(Dm.getConversationUiFailure({error:null,status:pm.o.NotFound})));const n=yield*(0,oj.RE)(Fe.ccy,t),s=yield*(0,oj.Ys)(Rd),r=yield*(0,oj.Ys)(we),a=yield*(0,oj.Ys)(Vn("first_time_lister_education"));if(s&&!i)return;var o;if("errors"in n)return void(yield(0,aj.gz)(Dm.getConversationUiFailure({error:(null===(o=n.errors[0])||void 0===o?void 0:o.value)||null,status:n.status})));const l=AP(n.conversation);if(l.transactionId&&(yield(0,aj.gz)(Dm.fetchTransactionRequest({transactionId:l.transactionId}))),l.isFirstTimeListerEducationRequired){if(!a)return;const e=bn({...r,...a});yield(0,aj.nn)(Ol,Ol.track,[e]),a.variant!==$k.Off&&(yield(0,aj.gz)(Dm.setFirstTimeListerEducationModalVisible({isVisible:!0})))}yield(0,aj.gz)(Dm.getConversationSuccess({conversation:l,status:n.status}))}function*MA(e){let{payload:{transactionId:t}}=e;const i=yield*(0,oj.RE)(Fe.jsu,{transactionId:t});var n,s;"errors"in i?yield(0,aj.gz)(Dm.getTrackingJourneySummaryFailure({error:(null==i||null===(n=i.errors)||void 0===n||null===(s=n[0])||void 0===s?void 0:s.value)||null})):yield(0,aj.gz)(Dm.getTrackingJourneySummarySuccess(NP(i.journey_summary)))}function*UA(e){let{payload:{transactionId:t}}=e;const i=yield*(0,oj.RE)(Fe.ROS,{transactionId:t});"errors"in i||(i.shipment_instructions&&(yield(0,aj.gz)(Dm.getShipmentInstructionsSuccess(LP(i.shipment_instructions)))),i.shipment_instructions.return_shipping_option&&(yield(0,aj.gz)(Dm.getReturnShipmentOptionSuccess(IP(i.shipment_instructions.return_shipping_option)))))}function*BA(e){var t;let{payload:{value:i,photoTempUuids:n}}=e;const s=yield*(0,oj.Ys)(X),r=yield*(0,oj.Ys)(Rd),a=yield*(0,oj.Ys)(sm),o=yield*(0,oj.Ys)(rm),l=yield*(0,oj.Ys)(am);if(null==r||!r.id||!s)return;const c=yield*(0,oj.RE)(Fe.j2D,{conversationId:r.id,body:i,photoTempUuids:n});var d,u,m,p;if((null==c?void 0:c.code)===pm.Q.HarassmentInMessageDetected&&"errors"in c)return void(yield(0,aj.gz)(Dm.setHarassmentMessage({messageText:i||"",correlationId:null!==(d=null===(u=c.payload)||void 0===u?void 0:u.correlation_id)&&void 0!==d?d:null})));if((null==c?void 0:c.code)===pm.Q.EmailSharingDetected&&"errors"in c&&(yield(0,aj.gz)(Dm.setEmailSharingModalVisible({isVisible:!0}))),a){const e=wn({wasEdited:o!==i,conversationId:r.id,correlationId:l});yield(0,aj.gz)(Dm.clearHarassmentMessage()),yield(0,aj.nn)(Ol,Ol.track,[e])}if("errors"in c)return void(yield(0,aj.gz)(Dm.postReplyFailure({error:(null==c||null===(m=c.errors)||void 0===m||null===(p=m[0])||void 0===p?void 0:p.value)||null})));r.isSuspicious&&(yield*(0,oj.RE)(Fe.OB5,r.id)),yield(0,aj.gz)(Dm.postReplySuccess()),yield(0,aj.gz)(eg({conversationId:r.id,fromPostReply:!0}));const g=Ki({userId:s,itemId:null!==(t=r.itemId)&&void 0!==t?t:null});yield(0,aj.nn)(Ol,Ol.track,[g])}function*qA(e){let{payload:{recipientId:t,value:i,photoTempUuids:n}}=e;const s=yield*(0,oj.Ys)(X),r=yield*(0,oj.Ys)(sm),a=yield*(0,oj.Ys)(rm),o=yield*(0,oj.Ys)(am);if(!s)return;const l=yield*(0,oj.RE)(Fe.hXi,{recipientId:t,photoTempUuids:n});if((null==l?void 0:l.code)===pm.Q.EmailSharingDetected&&"errors"in l&&(yield(0,aj.gz)(Dm.setEmailSharingModalVisible({isVisible:!0}))),(null==l?void 0:l.code)===pm.Q.HarassmentInMessageDetected&&"errors"in l){var c,d;yield(0,aj.gz)(Dm.setHarassmentMessage({messageText:i||"",correlationId:null!==(c=null===(d=l.payload)||void 0===d?void 0:d.correlation_id)&&void 0!==c?c:null}))}else{if(r){const e=yield*(0,oj.Ys)(Rd),t=wn({wasEdited:a!==i,conversationId:(null==e?void 0:e.id)||null,correlationId:o});yield(0,aj.gz)(Dm.clearHarassmentMessage()),yield(0,aj.nn)(Ol,Ol.track,[t])}var u;if("errors"in l)yield(0,aj.gz)(Dm.createConversationThreadFailure({error:(null===(u=l.errors[0])||void 0===u?void 0:u.value)||null}));else if("conversation"in l){const e=Qi({userId:s,itemId:null});yield*(0,oj.RE)(Fe.j2D,{conversationId:l.conversation.id,body:i,photoTempUuids:n}),yield(0,aj.nn)(Ol,Ol.track,[e]),(0,ls.ru)(Rc(l.conversation.id))}}}function*VA(e){let{payload:{itemId:t,sellerId:i,initiator:n}}=e;const s=yield*(0,oj.RE)(Fe.H0Q,{itemId:t,initiator:n,receiverId:i});var r;if("errors"in s)return void(yield(0,aj.gz)(Dm.createItemConversationThreadFailure({error:(null===(r=s.errors[0])||void 0===r?void 0:r.value)||null})));if(!("conversation"in s))return;const a=AP(s.conversation);yield(0,aj.gz)(Dm.createItemConversationThreadSuccess({conversation:a}))}function*HA(e){let{payload:{transactionId:t,trackingCode:i}}=e;const n=yield*(0,oj.RE)(Fe.jn8,{transactionId:t,trackingCode:i});var s,r;"errors"in n?yield(0,aj.gz)(Dm.enterTrackingCodeUiFailure({error:(null==n||null===(s=n.errors)||void 0===s||null===(r=s[0])||void 0===r?void 0:r.value)||null})):yield(0,aj.gz)(Dm.enterTrackingCodeSuccess())}function*GA(e){let{payload:{transactionId:t,proofPhotoUuid:i}}=e;const n=yield*(0,oj.RE)(Fe.RlN,{transactionId:t,proofPhotoUuid:i});var s;"errors"in n?yield(0,aj.gz)(Dm.markAsShippedUiFailure({error:(null===(s=n.errors[0])||void 0===s?void 0:s.value)||null})):yield(0,aj.gz)(Dm.markAsShippedSuccess())}function*WA(e){let{payload:{transactionId:t,dropOffTypeId:i}}=e;const n=yield*(0,oj.RE)(Fe.bJN,{transactionId:t,dropOffTypeId:i});var s;"errors"in n?yield(0,aj.gz)(Dm.setSelectedDropOffTypeMethodFailure({error:(null===(s=n.errors[0])||void 0===s?void 0:s.value)||null})):(yield(0,oj.RE)(UA,{type:tg.type,payload:{transactionId:t}}),yield(0,aj.gz)(Dm.setSelectedDropOffTypeMethodSuccess()))}function*XA(e){let{payload:{transactionId:t}}=e;const i=yield*(0,oj.RE)(Fe.BRv,{transactionId:t});"errors"in i||(yield(0,aj.gz)(Dm.getDigitalLabelSuccess(RP(i.digital_label))))}function*YA(e){let{payload:{price:t,isBuyer:i,currency:n,transactionId:s}}=e;const r=i?Fe.K5E:Fe.CmA,a=yield*(0,oj.RE)(r,{transactionId:s,price:t,currency:n});var o,l;"errors"in a?yield(0,aj.gz)(Dm.createOfferFailure({error:(null==a||null===(o=a.errors)||void 0===o||null===(l=o[0])||void 0===l?void 0:l.value)||null})):yield(0,aj.gz)(Dm.createOfferSuccess())}function*KA(e){let{payload:{transactionId:t,offerRequestId:i}}=e;const n=yield*(0,oj.RE)(Fe.doD,{transactionId:t,offerRequestId:i});var s,r;"errors"in n?yield(0,aj.gz)(Dm.acceptOfferFailure({error:(null==n||null===(s=n.errors)||void 0===s||null===(r=s[0])||void 0===r?void 0:r.value)||null})):yield(0,aj.gz)(Dm.acceptOfferSuccess())}function*JA(e){let{payload:{transactionId:t,offerRequestId:i}}=e;const n=yield*(0,oj.RE)(Fe.t$o,{transactionId:t,offerRequestId:i});var s,r;"errors"in n?yield(0,aj.gz)(Dm.rejectOfferFailure({error:(null==n||null===(s=n.errors)||void 0===s||null===(r=s[0])||void 0===r?void 0:r.value)||null})):yield(0,aj.gz)(Dm.rejectOfferSuccess())}function*QA(e){let{payload:{transactionId:t}}=e;const i=yield*(0,oj.RE)(Fe.iNF,t);if("errors"in i){var n,s;yield(0,aj.gz)(Dm.getCourierPickUpDatesFailure({error:(null==i||null===(n=i.errors)||void 0===n||null===(s=n[0])||void 0===s?void 0:s.value)||null}))}else{const e=wA(i.pick_up_dates);yield(0,aj.gz)(Dm.getCourierPickUpDatesSuccess(e))}}function*$A(e){let{payload:{itemPrice:t}}=e;const i=yield*(0,oj.RE)(Fe.YYw,{itemPrice:t});var n,s;"errors"in i?yield(0,aj.gz)(Dm.getOfferRequestOptionsFailure({error:null==i||null===(n=i.errors)||void 0===n||null===(s=n[0])||void 0===s?void 0:s.value})):yield(0,aj.gz)(Dm.getOfferRequestOptionsSuccess({offerRequestOptions:TP(i.request_options)}))}function*eM(e){let{payload:t}=e;const i=yield*(0,oj.RE)(Fe.foU,{id:t.transactionId});var n,s;if("errors"in i)return void(yield(0,aj.gz)(Dm.fetchTransactionRequestFailure({error:null==i||null===(n=i.errors)||void 0===n||null===(s=n[0])||void 0===s?void 0:s.value})));const r=RA(i.transaction);yield(0,aj.gz)(Dm.fetchTransactionRequestSuccess({transaction:r}))}function*tM(e){let{payload:{transactionId:t}}=e;const i=yield*(0,oj.RE)(Fe.hTU,t);var n,s;if("errors"in i)return void(yield(0,aj.gz)(Dm.fetchShippingInstructionsRequestFailure({error:(null==i||null===(n=i.errors)||void 0===n||null===(s=n[0])||void 0===s?void 0:s.value)||null})));const r=PA(i.shipping_instructions);yield(0,aj.gz)(Dm.fetchShippingInstructionsRequestSuccess({shippingInstructions:r}))}function*iM(){yield(0,aj.ib)($p,DA),yield(0,aj.ib)(eg,AA),yield(0,aj.ib)(Dm.getTrackingJourneySummaryRequest,MA),yield(0,aj.ib)(tg,UA),yield(0,aj.ib)(Dm.postReplyRequest,BA),yield(0,aj.ib)(Dm.createConversationThreadRequest,qA),yield(0,aj.ib)(Dm.createItemConversationThreadRequest,VA),yield(0,aj.ib)(Dm.enterTrackingCodeRequest,HA),yield(0,aj.ib)(Dm.markAsShippedRequest,GA),yield(0,aj.ib)(Dm.setSelectedDropOffTypeMethodRequest,WA),yield(0,aj.ib)(ig,XA),yield(0,aj.ib)(Dm.createOfferRequest,YA),yield(0,aj.ib)(Dm.acceptOfferRequest,KA),yield(0,aj.ib)(Dm.rejectOfferRequest,JA),yield(0,aj.ib)(Dm.getCourierPickUpDatesRequest,QA),yield(0,aj.ib)(Dm.getOfferRequestOptionsRequest,$A),yield(0,aj.ib)(Dm.fetchTransactionRequest,eM),yield(0,aj.ib)(Dm.fetchShippingInstructionsRequest,tM)}const nM="new_pushed_item_id",sM="new_saved_item_id",rM="feedback_item_id",aM=e=>e[QN],oM=e=>aM(e).pushUpOptions,lM=e=>aM(e).pushUpMinimumPrice,cM=e=>aM(e).selectedIds,dM=e=>aM(e).pushUpOrder,uM=e=>dM(e).prepareUiState,mM=e=>(e=>aM(e).pushUpCheckout)(e).activeModal,pM=(0,B.P1)(oM,(e=>e.options)),gM=hl(cM,ko),hM=(0,B.P1)(gM,(e=>vo(e.filter((e=>!("international_shipping_price"in e)))))),xM=(0,B.P1)(lM,(e=>e)),fM=(0,B.P1)(oM,(e=>{let{options:t}=e;return t.length?t.find((e=>e.isDefault))||t[0]:null})),yM=e=>aM(e).selectedPushUpOption||fM(e),vM=(0,B.P1)(dM,(e=>{let{order:t}=e;return t&&parseFloat(t.payable.amount)<=0})),_M=(0,B.P1)(dM,(e=>{let{order:t}=e;return!t||!1===t.isTaxCoverageAvailable})),bM=(0,B.P1)(lM,(e=>{let{hasFreeBump:t}=e;return t})),jM=(0,B.P1)(oM,(e=>{let{options:t}=e;return t.some((e=>{let{discountedPrice:t}=e;return t}))})),SM=(0,B.P1)(bM,jM,Vn("international_national_bump"),((e,t,i)=>!i||e||t?"off":i.variant)),ZM=(0,ad.PH)("".concat(cT,"/startPromosAfterItemUpload")),IM=(0,ad.PH)("".concat(cT,"/nextPromoAfterItemUpload"));function*CM(){const e=yield*(0,oj.RE)(Bn.le,sM),t=parseInt(e||"",10);t&&(yield*(0,oj.RE)(Bn.e8,sM),yield(0,aj.gz)(vE.setUploadedItemId({id:t})));const i=yield*(0,oj.RE)(Bn.le,nM),n=parseInt(i||"",10);n&&(yield*(0,oj.RE)(Bn.e8,nM),yield(0,aj.gz)(vE.setUploadedItemPushedUpId({id:n})));const s=yield*(0,oj.RE)(Bn.le,rM),r=parseInt(s||"",10);r&&(yield*(0,oj.RE)(Bn.e8,rM),yield(0,aj.gz)(vE.setFeedbackItemId({id:r})))}function*kM(){const e=yield*(0,oj.Ys)(xT);e?(yield*(0,oj.Ys)(mM))===Ei.None&&(yield(0,aj.gz)(iL.setSelectedItems({itemIds:[e]})),yield(0,aj.gz)(iL.setCheckoutModal({modal:Ei.OrderReview})),yield(0,aj.gz)(vE.setCurrentPromotionAfterItemUpload({promo:dT.PushUpCheckout}))):yield(0,aj.gz)(IM())}function*wM(){yield(0,aj.gz)(vE.setCurrentPromotionAfterItemUpload({promo:dT.ListAnotherItem}))}function*PM(){const e=yield*(0,oj.Ys)(Wt("item_upload_feedback_form"));if(!(yield(0,oj.Ys)(hT))||!e)return void(yield(0,aj.gz)(IM()));const t=yield*(0,oj.RE)(Fe.y7s);!("errors"in t)&&t.show_feedback?yield(0,aj.gz)(vE.setCurrentPromotionAfterItemUpload({promo:dT.ItemUploadFeedback})):yield(0,aj.gz)(IM())}function*zM(){yield(0,oj.RE)(CM),yield(0,aj.rM)(kM),yield(0,oj.qn)(IM),yield(0,aj.rM)(wM),yield(0,oj.qn)(IM),yield(0,aj.rM)(PM),yield(0,oj.qn)(IM),yield(0,aj.gz)(vE.setCurrentPromotionAfterItemUpload({promo:dT.Empty}))}function*TM(){yield(0,aj.Fm)(ZM,zM)}function*FM(e){let{payload:{userId:t,filter:i}}=e;const n=yield(0,oj.Ys)(Po),s=yield*(0,oj.RE)(Fe.RDp,{userId:t,currentPage:n,perPage:Us,filter:i});"errors"in s||!s.items&&!s.drafts?yield(0,aj.gz)(CN.getUserItemsFailure({errors:[]})):yield(0,aj.gz)(CN.getUserItemsSuccess(s))}function*NM(e){let{payload:{userId:t,selectedItemId:i}}=e;const n=yield(0,oj.Ys)(Eo),s=yield*(0,oj.RE)(Fe.Yh_,{userId:t,currentPage:n,selectedItemId:i,perPage:Us});"errors"in s?yield(0,aj.gz)(CN.getUserBundleItemsFailure({errors:[]})):yield(0,aj.gz)(CN.getUserBundleItemsSuccess({items:s.items,pagination:s.pagination,containsOfflineVerificationItem:s.contains_offline_verification_item,offlineVerificationFee:s.offline_verification_fee&&Va(s.offline_verification_fee)}))}function*LM(e){let{payload:{userId:t}}=e;const i=yield(0,oj.Ys)(qo),n=yield*(0,oj.RE)(Fe.Tt0,{page:i+1,perPage:Us,userId:t,includeSold:!0});"errors"in n?yield(0,aj.gz)(CN.getFavouriteItemsFailure({errors:[]})):yield(0,aj.gz)(CN.getFavouriteItemsSuccess(n))}function*EM(e){let{payload:{userId:t}}=e;const i=yield*(0,oj.Ys)(Yo),n=yield*(0,oj.Ys)(Jo),s=yield*(0,oj.RE)(Fe.q5k,{page:i+1,perPage:Us,nextPageToken:n,userId:t});"errors"in s?yield(0,aj.gz)(CN.getRecommendedItemsFailure({errors:[]})):yield(0,aj.gz)(CN.getRecommendedItemsSuccess(s))}function*OM(e){let{payload:{brandId:t,statusId:i,catalogId:n}}=e;const s=yield*(0,oj.RE)(Fe.P7_,{brandId:t,statusId:i,catalogId:n});"errors"in s?yield(0,aj.gz)(CN.getSimilarItemsFailure({errors:[]})):yield(0,aj.gz)(CN.getSimilarItemsSuccess({items:s.items}))}function*RM(e){let{payload:{filters:t,selectedDynamicFilters:i,pagination:n,searchSessionId:s},meta:{isPaginationEvent:r}}=e;const a=yield*(0,oj.RE)(Fe.l3L,{...t,...n,searchSessionId:s,selectedDynamicFilters:i});"errors"in a?yield(0,aj.gz)(CN.getCatalogItemsFailure({errors:a.errors})):yield(0,aj.gz)(CN.getCatalogItemsSuccess({items:a.items,pagination:a.pagination,searchCorrelationId:a.search_tracking_params.search_correlation_id,searchSessionId:a.search_tracking_params.search_session_id,globalSearchSessionId:a.search_tracking_params.global_search_session_id,catalogTitle:a.title},{isPaginationEvent:r}))}function*DM(){yield(0,oj.RE)(ls.k3)}function*AM(e){let{isPaginationEvent:t,skipDelay:i}=e;i||(yield(0,aj.gw)(qs)),t||(yield(0,aj.gz)(IE.clearSeenClosets()));const n=yield*(0,oj.Ys)(hr),s=yield*(0,oj.Ys)(sa),r=yield*(0,oj.Ys)(al),a=yield*(0,oj.Ys)(dl),o=yield*(0,oj.Ys)(cl),l=yield*(0,oj.Ys)(Hr),c=yield*(0,oj.Ys)(Wr);yield(0,aj.gz)(CN.getCatalogItemsRequest({filters:n,selectedDynamicFilters:s,pagination:{page:r,perPage:o,time:a},searchSessionId:c||!l?void 0:l},{isPaginationEvent:t}))}function*MM(){yield(0,aj.gz)(IE.getClosetPromotionsRequest({screenName:$t.Catalog}))}function*UM(){yield(0,aj.ib)(CN.getUserItemsRequest,FM),yield(0,aj.ib)(CN.getUserBundleItemsRequest,NM),yield(0,aj.ib)(CN.getFavouriteItemsRequest,LM),yield(0,aj.ib)(CN.getSimilarItemsRequest,OM),yield(0,aj.ib)(CN.getRecommendedItemsRequest,EM),yield(0,aj.Fm)(CN.getCatalogItemsRequest,RM),yield(0,aj.ib)([CN.setCatalogItemsPage,CN.setCatalogItemsPerPage],DM),yield(0,aj.Fm)([hF.changeFilters,hF.applyPersonalizedSizesSuccess,zT],AM,{isPaginationEvent:!1}),yield(0,aj.Fm)([CN.setCatalogItemsPage,CN.setCatalogItemsPerPage],AM,{isPaginationEvent:!0}),yield(0,aj.Fm)(hF.setInitialFilters,AM,{isPaginationEvent:!0,skipDelay:!0}),yield(0,aj.Fm)(CN.getCatalogItemsSuccess,MM)}const BM=e=>({id:e.id,title:e.title,countryId:e.country_id,isDefault:!!e.is_default}),qM=e=>e.map(BM),VM=(0,ad.PH)("".concat(EL,"/fetchCountriesRequest")),HM=(0,ad.PH)("".concat(EL,"/fetchCountriesFailure")),GM=(0,ad.PH)("".concat(EL,"/searchCitiesRequest")),WM=(0,ad.PH)("".concat(EL,"/searchCitiesFailure"));function*XM(){const e=yield*(0,oj.RE)(Fe.ox$);if("errors"in e)return void(yield(0,aj.gz)(HM()));const t=gb(e.countries);yield(0,aj.gz)(DL.fetchCountriesSuccess({countries:t}))}function*YM(e){let{payload:t}=e;const i=yield*(0,oj.RE)(Fe.NSJ,{searchText:t.searchText,countryId:t.countryId});if("errors"in i)return void(yield(0,aj.gz)(WM()));const n=qM(i.cities);yield(0,aj.gz)(DL.searchCitiesSuccess({cities:n}))}function*KM(){yield(0,aj.Fm)(VM,XM),yield(0,aj.Fm)(GM,YM)}var JM=i(22111),QM=i.n(JM);const $M=async()=>{const e=await QM().getPromise({excludes:{hasLiedOs:!0,hasLiedBrowser:!0,sessionStorage:!0,hasLiedLanguages:!0,fontsFlash:!0,enumerateDevices:!0}});return QM().x64hash128(e.map((e=>{let{value:t}=e;return t})).join(""),0)},eU=(0,ad.PH)("".concat(ML,"/loadFormAttributes")),tU=(0,ad.PH)("".concat(ML,"/saveSettings")),iU=e=>e[ML],nU=e=>({realName:iU(e).settings.realName,gender:iU(e).settings.gender,birthday:iU(e).settings.birthday}),sU=e=>iU(e).settings.isOnHoliday,rU=e=>iU(e).settings.isDarkMode,aU=e=>iU(e).settings.username,oU=e=>iU(e).settings,lU=e=>iU(e).uiState,cU=e=>iU(e).error,dU=(0,B.P1)(oU,(e=>{let{isInternationalTradingEnabled:t}=e;return t}));function*uU(){const e=yield*(0,oj.Ys)(W);if(!e)return;const{real_name:t,gender:i,birthday:n,is_on_holiday:s,login:r,international_trading_enabled:a}=e,o={realName:t||void 0,isOnHoliday:s,username:r,gender:i,birthday:n||void 0,isInternationalTradingEnabled:a,isDarkMode:is(Ag)===Ug.Dark||void 0};yield(0,aj.gz)(qL.setInitialSettings({settings:o}))}function*mU(){if((yield*(0,oj.Ys)(lU))===Ne.Pending)return;const{isDarkMode:e,...t}=yield*(0,oj.Ys)(oU);yield(0,aj.gz)(qL.changeUiState({uiState:Ne.Pending}));const i=yield*(0,oj.RE)($M),n=yield*(0,oj.RE)(Fe.SFz,{...t,fingerprint:i});if("errors"in n)return yield(0,aj.gz)(qL.setError({error:n})),yield(0,aj.gz)(qL.changeUiState({uiState:Ne.Failure})),void(yield*(0,oj.RE)(ls.k3));void 0!==e&&(Ol.track(kn({theme:e?Ug.Dark:Ug.Light})),e?yield*(0,oj.RE)(es,Ag,Ug.Dark):yield*(0,oj.RE)(ts,Ag)),yield*(0,oj.RE)(ls.sl)}function*pU(){yield(0,aj.ib)(eU,uU),yield(0,aj.ib)(tU,mU)}var gU=i(825);const hU=e=>null!=e&&e.length?e.map((e=>{let{id:t,title:i,type:n,options:s}=e;return{id:t,title:i,type:n,options:hU(s)}})):[],xU=e=>{let{id:t,title:i,code:n,description:s,placeholder:r,display_type:a,selection_type:o,required:l,selection_limit:c,options:d}=e;return{id:t,title:i,code:n,description:s,placeholder:r,displayType:a,selectionType:o,required:l,selectionLimit:c,options:hU(d)}},fU=e=>e.map(xU),yU=e=>e.map((e=>({field:e,value:[]}))),vU=e=>{const{id:t,title:i}=e;return{id:t,title:i}},_U=e=>e.map(vU),bU=e=>{let{ids:t,code:i}=e;return{ids:t,code:i}},jU=e=>{let{color1_id:t,color2_id:i}=e;const n=[];return t&&n.push(t),i&&n.push(i),n},SU=e=>{let{author:t,book_title:i}=e;return t&&i?{author:t,title:i}:null},ZU=e=>{return{id:e.id,title:e.title,description:e.description,colorIds:jU(e),sizeId:e.size_id,catalogId:e.catalog_id,packageSizeId:e.package_size_id,domesticShipmentPrice:e.domestic_shipment_price,internationalShipmentPrice:e.international_shipment_price,brand:Zh(e.brand_dto),brandId:e.brand_id,statusId:e.status_id,status:e.status,realValueNumeric:e.real_value_numeric,currency:e.currency,photos:to(e.photos),isbn:e.isbn,bookDetails:SU(e),price:e.price,measurementWidth:e.measurement_width,measurementLength:e.measurement_length,measurementUnit:e.measurement_unit,videoGameRating:e.video_game_rating&&vU(e.video_game_rating)||null,videoGameRatingId:e.video_game_rating_id,isUnisex:!!e.is_unisex,canPushUp:e.can_push_up,itemAlert:e.item_alert&&ao(e.item_alert),itemAttributes:e.item_attributes&&(t=e.item_attributes,t.map(bU))||[],isPromoted:e.promoted,isDraft:e.is_draft};var t},IU=e=>{let{image_url:t,text:i}=e;return{imageUrl:t,text:i}},CU=e=>{let{title:t,subtitle:i,note:n,cta:s,cta_url:r,photo_tips:a}=e;return{title:t,subtitle:i,note:n,cta:s,ctaUrl:r,photoTips:null==a?void 0:a.map(IU)}},kU=(0,ad.PH)("".concat(HL,"/fetchItemOfflineVerificationEligibility")),wU=(0,ad.PH)("".concat(HL,"/requestItemAuthenticityModal"),(function(){return{payload:{force:arguments.length>0&&void 0!==arguments[0]&&arguments[0]}}})),PU=(0,ad.PH)("".concat(HL,"/fetchBrands"),(e=>{let{keyword:t="",includeAllBrands:i=!1}=e;return{payload:{keyword:t,includeAllBrands:i}}})),zU=(0,ad.PH)("".concat(HL,"/fetchShippingOptionsRequest")),TU=(0,ad.PH)("".concat(HL,"/fetchPriceSuggestions")),FU=(0,ad.PH)("".concat(HL,"/fetchItemRequest")),NU=(0,ad.PH)("".concat(HL,"/fetchIsSecondDayListerRequest")),LU=(0,ad.PH)("".concat(HL,"/fetchIsPreviousListerRequest ")),EU=(0,ad.PH)("".concat(HL,"/fetchPhotoTips")),OU=(0,ad.PH)("".concat(HL,"/submitItem"),(function(e){return{payload:{},meta:{saveAsDraft:e,isItemPushedUp:arguments.length>1&&void 0!==arguments[1]&&arguments[1]}}})),RU=(0,ad.PH)("".concat(HL,"/deleteDraft")),DU=(0,ad.PH)("".concat(HL,"/selectCatalog")),AU=(0,ad.PH)("".concat(HL,"/fetchCatalogs")),MU=(0,ad.PH)("".concat(HL,"/fetchSizesConfiguration")),UU=(0,ad.PH)("".concat(HL,"/fetchStatuses")),BU=(0,ad.PH)("".concat(HL,"/fetchSizeGroups")),qU=(0,ad.PH)("".concat(HL,"/fetchVideoGameRatings")),VU=(0,ad.PH)("".concat(HL,"/fetchPackageSizesRequest")),HU=(0,ad.PH)("".concat(HL,"/getDropOffLocationPrompt")),GU=e=>{const{id:t,title:i,code:n,hex:s,order:r}=e;return{id:t,title:i,code:n,hex:s,order:r}},WU=e=>e.map(GU),XU=e=>e.map((e=>{let{id:t,title:i,explanation:n}=e;return{id:t,title:i,body:n}})),YU=e=>e.map((e=>{let{id:t,title:i,code:n}=e;return{id:t,title:i,code:n}})),KU=e=>(null==e?void 0:e.map((e=>{let{code:t,ids:i}=e;return{field:t,value:i}})))||[];function JU(e){return"url"in e}const QU=e=>{const t=[];function i(e,n){const s=[];e.catalogs&&e.catalogs.forEach((t=>{i(t,e.id),s.push(t.id)}));const r={id:e.id,code:e.code,parentId:n,catalogIds:s,url:e.url,title:e.title,restrictedToStatusId:e.restricted_to_status_id,isColorSelectShown:!!e.color_field_visibility,isSizeSelectShown:!!e.size_field_visibility,isBrandSelectShown:!!e.brand_field_visibility,isIsbnInputShown:!!e.isbn_field_visibility,isAuthorInputShown:!!e.author_field_visibility,isBookTitleInputShown:!!e.book_title_field_visibility,isMeasurementsSelectShown:!!e.measurements_field_visibility,sizeGroupId:e.size_group_id,unisexCatalogId:e.unisex_catalog_id,isVideoGameRatingSelectShown:!!e.video_game_rating_field_visibility,photo:JU(e.photo)?e.photo:null};t.push(r)}return e.forEach((e=>i(e,0))),t},$U=e=>{let{price_suggestion:t,similar_sold_items_present:i,display_type:n,ab_test:s}=e;return{min:t?Number(t.minimum):null,max:t?Number(t.maximum):null,currency:(null==t?void 0:t.currency)||null,hasSimilarItems:i,displayType:n||null,abTest:s?{testId:s.test_id,testName:s.test_name,countryCode:s.country_code,testAnonId:s.test_anon_id,testUserId:s.test_user_id,variant:s.variant}:null}},eB=e=>{let{book_details:t}=e;return{author:t.author,title:t.title}},tB=function(e,t,i,n){let{id:s,catalogId:r,colorIds:a,title:o,description:l,isUnisex:c,statusId:d,price:u,sizeId:m,brandId:p,brandTitle:g,isbn:h,packageSize:x,videoGameRatingId:f,measurementLength:y,measurementWidth:v}=e;return{id:s,currency:n,temp_uuid:arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",title:o,description:l,brand_id:p,brand:g,size_id:m,catalog_id:r,isbn:h,is_unisex:c,status_id:d,video_game_rating_id:f,price:u,package_size_id:x.id,shipment_prices:{domestic:x.custom.domestic,international:x.custom.international},color_ids:a,assigned_photos:t,measurement_length:y,measurement_width:v,item_attributes:null==i?void 0:i.map((e=>({code:e.field,ids:e.value})))}},iB=e=>{let{brands:t,colors:i,sizes:n,catalogs:s}=e;return{catalogs:s,brands:Ih(t),colors:WU(i),sizes:RT(n)}},nB=e=>e.itemUpload,sB=e=>nB(e).configuration,rB=e=>nB(e).ui,aB=e=>nB(e).formData,oB=e=>nB(e).attributes,lB=e=>sB(e).catalogFieldsOrder,cB=e=>sB(e).maxShippingPrice,dB=e=>sB(e).currency,uB=(0,B.P1)(nB,(e=>{let{isOfflineVerificationEligible:t}=e;return t})),mB=(0,B.P1)(rB,(e=>{let{uiState:t}=e;return t})),pB=(0,B.P1)(oB,(e=>{let{assignedPhotos:t}=e;return t})),gB=(0,B.P1)(rB,(e=>{let{isOfflineVerificationModalOpen:t}=e;return t})),hB=(0,B.P1)(rB,(e=>{let{containsWebPhoto:t}=e;return t})),xB=(0,B.P1)(nB,(e=>{let{attributes:t,previousAttributes:i}=e;return!(0,v.isEqual)(t,i)})),fB=(0,B.P1)(aB,(e=>{let{tempUuid:t}=e;return t})),yB=e=>aB(e).brands.isLuxury,vB=(0,B.P1)(rB,(e=>{let{isAuthenticityProofModalOpen:t}=e;return t})),_B=(0,B.P1)(rB,(e=>{let{authenticityModal:t}=e;return t.content})),bB=(0,B.P1)(rB,(e=>{let{authenticityModal:t}=e;return t.isOpen})),jB=(0,B.P1)(aB,(e=>{let{brands:t}=e;return LT(t.suggested)})),SB=(0,B.P1)(aB,(e=>{let{colors:t}=e;return LT(t.suggested)})),ZB=(0,B.P1)(aB,(e=>{let{sizes:t}=e;return LT(t.suggested)})),IB=(0,B.P1)(aB,(e=>{let{brands:t}=e;return LT(t)}));function CB(e,t){var i;const{catalogs:n}=nB(e).formData,s=[];let r=null===(i=n.byId[t])||void 0===i?void 0:i.parentId;if(!r)return null;for(;r;){var a;const e=n.byId[r];s.unshift(e.title),r=null===(a=n.byId[r])||void 0===a?void 0:a.parentId}return s.join(" > ")}function kB(e){const{catalogs:t}=nB(e).formData;return t.suggested.map((i=>({catalog:t.byId[i],path:CB(e,i)}))).filter((e=>e.catalog||e.path))}function wB(e,t){const{catalogs:i}=nB(e).formData;return t?null==i?void 0:i.byId[t]:null}function PB(e,t){var i;const n=wB(e,t);return function(e,t){const{catalogs:i}=nB(e).formData;return(null!=t&&t.length?t:i.initialIds).map((e=>i.byId[e]))}(e,null!==(i=null==n?void 0:n.catalogIds)&&void 0!==i?i:null)}function zB(e){const{catalogId:t}=oB(e);return t?nB(e).formData.catalogs.byId[t]:null}function TB(e){var t;return null===(t=zB(e))||void 0===t?void 0:t.restrictedToStatusId}const NB=(0,B.P1)(aB,(e=>{let{colors:t}=e;return LT(t)}));function LB(e){const{colors:t}=nB(e).formData,{colorIds:i}=oB(e);return t.ids.length?i.map((t=>nB(e).formData.colors.byId[t])):[]}const EB=(0,B.P1)(rB,(e=>{let{color:t}=e;return t.uiState}));function OB(e){const{sizeId:t}=oB(e);return t?function(e,t){const{sizes:i}=nB(e).formData;return i.byId[t]}(e,t):null}const RB=(e,t)=>rB(e).errors.byName[t]||void 0,DB=e=>t=>rB(t).errors.byName[e]||void 0,AB=(0,B.P1)(rB,(e=>{let{shippingOptions:t}=e;return t.isModalOpen})),MB=e=>rB(e).isLuxuryItemModalOpen,UB=e=>rB(e).showMissingPostalCode,BB=(0,B.P1)(rB,(e=>{let{shippingOptions:t}=e;return t.uiState})),qB=(0,B.P1)(aB,(e=>{let{shippingOptions:t}=e;return t})),VB=(0,B.P1)(rB,(e=>{let{screenName:t}=e;return t})),HB=(0,B.P1)(aB,(e=>{let{photoTips:t}=e;return LT(t)}));function GB(e){const t=zB(e),{sizeGroups:i}=nB(e).formData;return void 0!==(null==t?void 0:t.sizeGroupId)&&null!==(null==t?void 0:t.sizeGroupId)&&i?0!==t.catalogIds.length?null:i.byId[t.sizeGroupId]:null}function WB(e){const t=GB(e);return t?t.sizes:[]}function XB(e){const{videoGameRatingId:t}=oB(e);return t?function(e,t){const{videoGameRatings:i}=nB(e).formData;return null==i?void 0:i.byId[t]}(e,t):null}function YB(e){const{videoGameRatings:t}=nB(e).formData;return t?t.ids.map((t=>nB(e).formData.videoGameRatings.byId[t])):[]}const KB=(0,B.P1)(oB,(e=>{let{catalogId:t}=e;return!!t})),JB=(0,B.P1)(rB,(e=>{let{isFormDisabled:t}=e;return t})),QB=(0,B.P1)(aB,(e=>{let{priceSuggestions:t}=e;return t})),$B=(0,B.P1)(QB,(e=>{let{abTest:t}=e;return t})),eq=(0,B.P1)(QB,(e=>{let{min:t}=e;return t})),tq=(0,B.P1)(QB,(e=>{let{max:t}=e;return t})),iq=(0,B.P1)(QB,(e=>{let{currency:t}=e;return t})),nq=(0,B.P1)(rB,(e=>{let{price:t}=e;return t.hasSimilarItems})),sq=(0,B.P1)(rB,(e=>{let{price:t}=e;return t.isSimilarItemsModalOpen})),rq=(0,B.P1)(rB,(e=>{let{price:t}=e;return t.displayType})),aq=e=>{const t=eq(e),i=tq(e),{price:n}=oB(e);return i&&t&&n&&n>i};function oq(e){const{statusId:t}=oB(e);return t?nB(e).formData.statuses.byId[t]:null}const lq=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,B.P1)(zB,(i=>i?i[e]:t))},cq=lq("isBrandSelectShown",!0),dq=lq("isSizeSelectShown"),uq=lq("isColorSelectShown"),mq=lq("isVideoGameRatingSelectShown"),pq=lq("isIsbnInputShown"),gq=lq("isAuthorInputShown"),hq=lq("isBookTitleInputShown"),xq=lq("isMeasurementsSelectShown"),fq=(0,B.P1)(rB,(e=>{let{isbn:t}=e;return t.uiState})),yq=(0,B.P1)(aB,(e=>{let{bookDetails:t}=e;return t?t.author:null})),vq=(0,B.P1)(aB,(e=>{let{bookDetails:t}=e;return t?t.title:null}));function _q(e){const{bookDetails:t}=aB(e);return pq(e)&&t?t.author||t.title?XL.Found:XL.NotFound:null}const bq=(0,B.P1)(rB,(e=>{let{canBumpItem:t}=e;return t})),jq=(0,B.P1)(rB,(e=>{let{dynamicAttributes:t}=e;return t.uiState})),Sq=e=>{const{catalog:{attributes:t}}=oB(e),{dynamicAttributes:i}=aB(e);return t.names.map((e=>i.byName[e]?{field:e,value:t.byName[e]}:null)).filter((e=>!!e))},Zq=e=>{const{isPackageSizeSelectedManually:t}=nB(e);return t},Iq=(0,B.P1)(oB,(e=>{let{isPromoted:t}=e;return t})),Cq=(0,B.P1)(oB,(e=>{let{alertType:t}=e;return t})),kq=(0,B.P1)((e=>nB(e).previousAttributes),(e=>{let{alertType:t}=e;return t})),wq=((0,B.P1)(oB,(e=>{let{feedbackId:t}=e;return t})),(0,B.P1)(oB,(e=>{let{measurementWidth:t}=e;return t}))),Pq=(0,B.P1)(oB,(e=>{let{measurementLength:t}=e;return t})),zq=e=>aB(e).shouldShowSizeModal,Tq=(0,B.P1)(oB,(e=>{let{isPushUpChecked:t}=e;return t})),Fq=(0,B.P1)(nB,(e=>{let{isSecondDayLister:t}=e;return t})),Nq=(0,B.P1)(nB,(e=>{let{isPreviousLister:t}=e;return t}));function Lq(e){var t;if("errors"in e)return;if(!("item"in e))return;if(!e.item.id)return;const i=e.item.id.toString();(null===(t=e.after_upload_actions)||void 0===t?void 0:t.includes(Ra.ShowOfflineVerificationModal))||(0,Bn.D$)(sM,i)}function Eq(e){"errors"in e||("item"in e&&e.item.id?(0,Bn.D$)(nM,e.item.id.toString()):"draft"in e&&e.draft.id&&(0,Bn.D$)(nM,e.draft.id.toString()))}const Oq=e=>Object.keys(e).filter((t=>e[t])).map((e=>e));function*Rq(){const e=yield*(0,oj.Ys)(Vn("parcel_size_suggestion_web"));return"on"===(null==e?void 0:e.variant)}function*Dq(){const e=Oq({[$L.Material]:!0,[$L.Gender]:!0}),t=yU(e);yield(0,aj.gz)(mE.setSelectedDynamicAttributeValues({selectedValues:t}))}function*Aq(e){if(!e)return;yield(0,aj.gz)(mE.setDynamicAttributesUiState({uiState:Ne.Pending}));const t=yield*(0,oj.RE)(Fe.wDm,{catalogId:e});if("errors"in t)return yield(0,aj.gz)(mE.setCatalogId({id:null})),void(yield(0,aj.gz)(mE.fetchDynamicAttributesFailure()));yield(0,aj.gz)(mE.fetchDynamicAttributesSuccess({dynamicAttributes:fU(t.catalog_attributes)}))}function*Mq(e){let{payload:{id:t}}=e;yield(0,aj.gz)(AU()),yield(0,oj.RE)(Dq);const i=yield*(0,oj.Ys)(fB);(yield*(0,oj.Ys)(Gn))&&(yield(0,aj.gz)(MU()));const n=yield*(0,oj.Ys)(X);n&&(yield(0,aj.gz)(HU({userId:n})));const s=yield*(0,oj.RE)(Fe.jLV);if("errors"in s)return;if(yield(0,aj.gz)(mE.setConfiguration({configuration:s})),!t){const e=yield*(0,oj.RE)(Fe.PsI);if("errors"in e)return;return yield(0,aj.gz)(mE.setCurrency({currency:e.session_defaults_configuration.currency})),yield(0,aj.gz)(mE.setUiState({uiState:Ne.Success})),void(yield(0,oj.RE)(Ol.track,xn({tempUuid:i,screenName:$t.ItemUpload})))}const r=yield*(0,oj.RE)(Fe.Ko5,{id:t});if("errors"in r)return void((yield*(0,oj.Ys)(Wt("next_page_item_upload")))&&(yield(0,aj.gz)(mE.setUiState({uiState:Ne.Failure}))));const a=ZU(r.item);yield(0,aj.gz)(mE.setInitialItemData({item:a})),yield(0,aj.gz)(mE.setCurrency({currency:a.currency})),yield(0,oj.RE)(Aq,a.catalogId);const o=KU(a.itemAttributes);yield(0,aj.gz)(mE.setSelectedDynamicAttributeValues({selectedValues:o})),yield(0,aj.gz)(TU()),yield(0,aj.gz)(kU()),yield(0,aj.gz)(mE.setUiState({uiState:Ne.Success})),yield(0,oj.RE)(Ol.track,xn({tempUuid:i,screenName:a.isDraft?$t.ItemDraft:$t.ItemEdit}))}function*Uq(e){return{id:e,orientation:(yield*(0,oj.Ys)(mA,e)).orientation||Ge.Degree0}}function*Bq(e){let{payload:t}=e;const{catalogId:i,brandId:n,id:s}=yield*(0,oj.Ys)(oB);if(!n)return;const r=yield*(0,oj.RE)(Fe.shP,i,s,t.force);if("errors"in r)return;if(!r.authenticity_modal)return;const a=yield*(0,oj.RE)(CU,r.authenticity_modal);yield(0,aj.gz)(mE.setAuthenticityModalContent({content:a})),yield(0,aj.gz)(mE.setIsAuthenticityModalOpen({isOpen:!0}))}function*qq(e){let{payload:t}=e;yield(0,aj.gw)(200);const{keyword:i,includeAllBrands:n}=t,s=yield*(0,oj.RE)(Fe.vp3,{keyword:i,includeAllBrands:n});if("errors"in s)return;const r=yield*(0,oj.RE)(Ih,s.brands);yield(0,aj.gz)(mE.setBrands({brands:r}))}function*Vq(e){let{payload:t}=e;const i=yield*(0,oj.Ys)(zB),n=yield*(0,oj.Ys)(wB,t.catalogId);n&&(n.restrictedToStatusId&&(yield(0,aj.gz)(mE.setStatusId({id:null}))),n.isIsbnInputShown||(yield(0,aj.gz)(mE.setIsbn({isbn:null,validity:YL.Unvalidated}))),n.isBrandSelectShown||(yield(0,aj.gz)(mE.setBrand({id:WL,title:null,isLuxury:!1}))),i&&i.sizeGroupId!==n.sizeGroupId&&(yield(0,aj.gz)(mE.setSizeId({id:null}))),yield(0,aj.gz)(mE.setCatalogId({id:t.catalogId})),yield(0,oj.RE)(Aq,t.catalogId),(yield*(0,oj.Ys)(yB))&&(yield(0,aj.gz)(wU())))}function*Hq(){const e=yield*(0,oj.RE)(Fe.Ztj);if("errors"in e)return;const t=yield*(0,oj.RE)(AT,e.size_groups);yield(0,aj.gz)(mE.setSizeGroups({sizeGroups:t.sizeGroups})),yield(0,aj.gz)(mE.setSizes({sizes:t.sizes}))}function*Gq(){const e=yield*(0,oj.RE)(Fe.Cf2);if("errors"in e)return;const t=yield*(0,oj.RE)(_U,e.video_game_ratings);yield(0,aj.gz)(mE.setVideoGameRatings(t))}function*Wq(){const e=yield*(0,oj.RE)(Fe.jkM);if("errors"in e)return;const t=yield*(0,oj.RE)(QU,e.catalogs);yield(0,aj.gz)(mE.setCatalogs({catalogs:t}))}function*Xq(){const e=yield*(0,oj.RE)(Fe.E5C);if("errors"in e)return yield(0,aj.gw)(GL),void(yield(0,aj.gz)(mE.fetchColorsRequest()));const t=yield*(0,oj.RE)(YU,e.colors);yield(0,aj.gz)(mE.fetchColorsSuccess({colors:t}))}function*Yq(){const e=yield*(0,oj.RE)(Fe.JBB);if("errors"in e)return;const t=yield*(0,oj.RE)(XU,e.statuses);yield(0,aj.gz)(mE.setStatuses({statuses:t}))}function*Kq(){const{catalogId:e,statusId:t,brandId:i}=yield*(0,oj.Ys)(oB);if(!i||!t||!e)return void(yield(0,aj.gz)(mE.clearPriceSuggestions()));const n=yield*(0,oj.RE)(Fe.ncE,{brandId:i,statusId:t,catalogId:e});if("errors"in n)return void(yield(0,aj.gz)(mE.clearPriceSuggestions()));const s=$U(n);yield(0,aj.gz)(mE.setPriceSuggestions({suggestions:s}))}function*Jq(){if(yield*(0,oj.Ys)(sq)){const{catalogId:e,statusId:t,brandId:i}=yield*(0,oj.Ys)(oB);if(!i||!t||!e)return void(yield(0,aj.gz)(CN.resetSimilarItems()));yield(0,aj.gz)(CN.getSimilarItemsRequest({brandId:i,statusId:t,catalogId:e}))}else yield(0,aj.gz)(CN.resetSimilarItems())}function*Qq(e){let{payload:t}=e;if(t.validity===YL.Unvalidated)return;if(t.validity===YL.Invalid||!t.isbn)return void(yield(0,aj.gz)(mE.removeFieldError({fieldName:KL.Isbn})));yield(0,aj.gz)(mE.setIsbnPendingState()),yield(0,aj.gw)(GL);const i=yield*(0,oj.RE)(Fe.zdL,{isbn:t.isbn});if("errors"in i)return void(yield(0,aj.gz)(mE.setFieldError({fieldError:{field:KL.Isbn,value:i.message}})));const n=eB(i);yield(0,aj.gz)(mE.setBookDetails({bookDetails:n}))}function*$q(){const{catalogId:e,price:t,brandId:i}=yield*(0,oj.Ys)(oB),n=yield*(0,oj.Ys)(dB),s=t?{amount:t.toString(),currency_code:n}:void 0;e&&(yield(0,aj.gz)(Kx.fetchCatalogPackageSizesRequest({catalogId:e,brandId:i||void 0,price:s})))}function*eV(){if(yield(0,aj.gw)(GL),!(yield*(0,oj.RE)(Rq)))return;const e=yield*(0,oj.Ys)(oB);if(!e.catalogId)return;const t=yield*(0,oj.$6)(e.assignedPhotos.map((e=>(0,oj.RE)(Uq,e)))),i=yield*(0,oj.Ys)(Sq),n=yield*(0,oj.Ys)(dB),s=yield*(0,oj.RE)(tB,e,t,i,n||"",""),r=yield*(0,oj.RE)(Fe.D8A,{item:s});"errors"in r?yield(0,aj.gz)(Kx.fetchSuggestedPackageSizeCodeFailure({errors:r.errors})):yield(0,aj.gz)(Kx.fetchSuggestedPackageSizeCodeSuccess({suggestedPackageSizeCode:r.package_size_code}))}function*tV(){(yield*(0,oj.Ys)(AB))&&(yield(0,aj.gz)(zU()))}function*iV(){const{id:e}=yield*(0,oj.Ys)(oB);if(!e)return;yield(0,aj.gz)(mE.setIsFormDisabled({isFormDisabled:!0})),yield*(0,oj.RE)(Fe.lcj,e);const t=yield*(0,oj.Ys)(X),i=t?(0,Me.G0B)(t):Me.mYc;yield*(0,oj.RE)(ls.ru,i)}function*nV(e){var t;let{meta:i}=e;yield(0,aj.gz)(mE.showMissingPostalCode()),null!==(t=(yield*(0,oj.qn)(mE.hideMissingPostalCode)).payload)&&void 0!==t&&t.resubmitItem&&(yield(0,aj.gz)(OU(i.saveAsDraft,i.isItemPushedUp)))}function*sV(e){let{responseCode:t,meta:i}=e;switch(t){case pm.Q.IncompleteTaxAddress:yield*(0,oj.RE)(nV,{meta:i});break;case pm.Q.PhotoMinimumCountRequired:yield(0,aj.gz)(mE.setIsLuxuryItemModalOpen({isOpen:!0}))}}function*rV(e){var t;yield(0,aj.gz)(mE.setIsAuthenticityProofModalOpen({isOpen:!0})),yield(0,oj.qn)(mE.setIsAuthenticityProofModalOpen),null!==(t=e.after_upload_actions)&&void 0!==t&&t.includes(Ra.ShowOfflineVerificationModal)?yield(0,aj.gz)(mE.setIsOfflineVerificationModalOpen({isOpen:!0})):yield*(0,oj.RE)(ls.ru,(0,Me.G0B)(e.item.user_id))}function*aV(e){const t=yield*(0,oj.Ys)(Wt("web_gtm_ec_field")),i={item_name:e.title,item_id:e.id,value:parseFloat(e.price.amount),currency:e.currency,user_email:e.user.email};yield(0,oj.RE)(Bb,Ob.ItemList,{...i,item_category_id:e.catalog_id,item_brand:e.brand,item_brand_id:e.brand_id,item_condition:e.disposal_conditions},t),(yield*(0,oj.Ys)(Nq))||(yield(0,oj.RE)(Bb,Ob.FirstList,i,t)),(yield*(0,oj.Ys)(Fq))&&(yield(0,oj.RE)(Bb,Ob.SecondDayList,i,t))}function*oV(e,t){yield(0,oj.RE)(DI,{event:cg.xy.ListingCreated,modelId:e.id,userExternalId:e.user.external_id||null,screen:t},{defer:!0})}function*lV(e){var t;let i,{meta:n}=e;yield(0,aj.gz)(mE.setIsFormDisabled({isFormDisabled:!0}));const s=yield*(0,oj.Ys)(fB),r=yield*(0,oj.Ys)(VB),a=yield*(0,oj.Ys)(oB),o=yield*(0,oj.$6)(a.assignedPhotos.map((e=>(0,oj.RE)(Uq,e)))),l=yield*(0,oj.Ys)(Sq),c=yield*(0,oj.Ys)(dB),d=yield*(0,oj.RE)(tB,a,o,l,c,s),{isItemPushedUp:u,saveAsDraft:m}=n;if(m)i=d.id?yield*(0,oj.RE)(Fe.TZ0,d.id,d,a.feedbackId):yield*(0,oj.RE)(Fe.Qqe,d,a.feedbackId);else if(r===$t.ItemDraft&&d.id)i=yield*(0,oj.RE)(Fe.UaW,d.id,d,a.feedbackId),u?Eq(i):Lq(i);else if(d.id){if(i=yield*(0,oj.RE)(Fe.$GW,d.id,d,a.feedbackId),u&&Eq(i),"item"in i){var p;const{item:e}=i;if((yield*(0,oj.Ys)(kq))===Fa.ReplicaProof&&(null===(p=e.item_alert)||void 0===p?void 0:p.item_alert_type)===Fa.UnderReview)return void(yield(0,oj.RE)(rV,i))}}else i=yield*(0,oj.RE)(Fe.fCy,d,a.feedbackId),u?Eq(i):Lq(i);if(a.feedbackId||function(e){var t;"errors"in e||null!==(t=e.after_upload_actions)&&void 0!==t&&t.includes(Ra.ShowOfflineVerificationModal)||("item"in e&&e.item.id?(0,Bn.D$)(rM,e.item.id.toString()):"draft"in e&&e.draft.id&&(0,Bn.D$)(rM,e.draft.id.toString()))}(i),!i)return void(yield(0,aj.gz)(mE.setIsFormDisabled({isFormDisabled:!1})));var g;if("errors"in i)return yield(0,aj.gz)(mE.setFieldErrors({fieldErrors:i.errors})),yield*(0,oj.RE)(ls.H5,null===(g=i.errors[0])||void 0===g?void 0:g.field),yield(0,aj.gz)(mE.setIsFormDisabled({isFormDisabled:!1})),Ol.track(yn({reason:QL.ValidationError,validationErrors:i.errors.map((e=>e.value)),screen:r,tempUuid:s})),void(yield(0,oj.RE)(sV,{responseCode:i.code,meta:n}));let h=Me.mYc,x=d.id;if("item"in i){const{item:e}=i,t=r===$t.ItemEdit;!m&&!t&&(yield(0,oj.RE)(aV,e),yield(0,oj.RE)(oV,e,r)),h=(0,Me.G0B)(e.user_id),x=e.id}else"draft"in i&&(h=(0,Me.G0B)(i.draft.user_id),x=i.draft.id);Ol.track(vn({itemId:x||void 0,tempUuid:s,screen:r})),null!==(t=i.after_upload_actions)&&void 0!==t&&t.includes(Ra.ShowOfflineVerificationModal)?yield(0,aj.gz)(mE.setIsOfflineVerificationModalOpen({isOpen:!0})):yield*(0,oj.RE)(ls.ru,h)}function*cV(){const e=yield*(0,oj.RE)(Fe.Uel,gU.U.NewItem);if("errors"in e)return;const t=yield*(0,oj.RE)(Ph,e.photo_tips);yield(0,aj.gz)(mE.setPhotoTips({photoTips:t}))}function*dV(){yield(0,aj.gw)(GL);const{title:e,description:t,catalogId:i}=yield*(0,oj.Ys)(oB),n={title:e,description:t,catalogId:i,photoIds:yield*(0,oj.Ys)(pB)},s=yield*(0,oj.RE)(Fe.OjX,n);if("errors"in s)return;const{colors:r,sizes:a,brands:o,catalogs:l}=yield*(0,oj.RE)(iB,s);yield(0,aj.gz)(mE.setSuggestions({colors:r,sizes:a,brands:o,catalogs:l}))}function*uV(){const{catalogId:e,price:t,brandId:i,packageSize:n}=yield*(0,oj.Ys)(oB),s=yield*(0,oj.Ys)(dB),r=t?{amount:t.toString(),currency_code:s}:void 0;if(!n.id||!e)return;const a=yield*(0,oj.RE)(Fe.LZL,{packageSizeId:n.id,catalogId:e,brandId:i||void 0,price:r});if("errors"in a)return void(yield(0,aj.gz)(mE.fetchShippingOptionsFailure()));const o=Nh(a.shipping_options);yield(0,aj.gz)(mE.fetchShippingOptionsSuccess({shippingOptions:o}))}function*mV(){const e=yield*(0,oj.RE)(Fe.uVi);"errors"in e?yield(0,aj.gz)(mE.setShouldShowSizeModal({shouldShowSizeModal:!1})):yield(0,aj.gz)(mE.setShouldShowSizeModal({shouldShowSizeModal:e.require_size_check_reminder}))}function*pV(){yield(0,aj.gw)(GL);const{catalogId:e,price:t,brandId:i}=yield*(0,oj.Ys)(oB);if(!i||!t||!e)return void(yield(0,aj.gz)(mE.setIsOfflineVerificationEligible({eligible:!1})));const n=yield*(0,oj.RE)(Fe._uL,{brandId:i,price:t,catalogId:e});"errors"in n?yield(0,aj.gz)(mE.setIsOfflineVerificationEligible({eligible:!1})):yield(0,aj.gz)(mE.setIsOfflineVerificationEligible({eligible:n.eligible}))}function*gV(){const e=yield*(0,oj.RE)(Fe.dwk);"errors"in e?yield(0,aj.gz)(mE.setIsSecondDayLister({isSecondDayLister:!1})):yield(0,aj.gz)(mE.setIsSecondDayLister({isSecondDayLister:e.value}))}function*hV(){const e=yield*(0,oj.RE)(Fe.JUY);"errors"in e?yield(0,aj.gz)(mE.setIsPreviousLister({isPreviousLister:!1})):yield(0,aj.gz)(mE.setIsPreviousLister({isPreviousLister:e.value}))}function*xV(){yield(0,aj.Fm)([mE.setTitle,mE.setDescription,mE.setCatalogId,tN.uploadPhotoSuccess,tN.fetchPhotosSuccess],dV),yield(0,aj.Fm)(FU,Mq),yield(0,aj.Fm)(NU,gV),yield(0,aj.Fm)(LU,hV),yield(0,aj.Fm)(wU,Bq),yield(0,aj.ib)(DU,Vq),yield(0,aj.ib)(mE.fetchColorsRequest,Xq),yield(0,aj.ib)(UU,Yq),yield(0,aj.ib)(BU,Hq),yield(0,aj.ib)(qU,Gq),yield(0,aj.Fm)(PU,qq),yield(0,aj.Fm)(EU,cV),yield(0,aj.ib)(RU,iV),yield(0,aj.ib)(OU,lV),yield(0,aj.Fm)([TU,mE.setBrand,mE.setStatusId,mE.setCatalogId],Kq),yield(0,aj.Fm)(mE.toggleIsSimilarItemsModalOpen,Jq),yield(0,aj.Fm)(mE.setIsbn,Qq),yield(0,aj.Fm)([mE.setCatalogId,VU],$q),yield(0,aj.Fm)([mE.setTitle,mE.setDescription,mE.setCatalogId,mE.setPrice,tN.uploadPhotoSuccess,tN.fetchPhotosSuccess,mE.setBrand,mE.setStatusId,mE.setColorIds,mE.setSizeId],eV),yield(0,aj.Fm)(mE.toggleIsShippingOptionsModalOpen,tV),yield(0,aj.Fm)(zU,uV),yield(0,aj.Fm)(AU,Wq),yield(0,aj.ib)(MU,mV),yield(0,aj.Fm)([kU,mE.setBrand,mE.setPrice,mE.setCatalogId],pV)}const fV=(0,ad.PH)("".concat(Zl,"/fetchBannersRequest"),(function(){let{shouldRefresh:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{payload:{shouldRefresh:e}}}));function*yV(e){let{payload:{shouldRefresh:t}}=e;const i=yield*(0,oj.Ys)(kl);if(!t&&(0,v.includes)([Ne.Success,Ne.Pending],i))return;yield*(0,oj.gz)(KN.changeUiState({uiState:Ne.Pending}));const n=yield*(0,oj.RE)(Fe.EyV);if("errors"in n)return void(yield*(0,oj.gz)(KN.changeUiState({uiState:Ne.Failure})));const s=yield*(0,oj.RE)(WN,n.banners);yield*(0,oj.gz)(KN.fetchBannersSuccess({banners:s}))}function*vV(){yield(0,oj.ib)(fV,yV)}const _V=function(e){e instanceof Error&&(e.message="".concat("PushUp",": ").concat(e.message),(0,ls.H)(e))};function bV(e){return function(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];return function*(){try{yield(0,oj.RE)(t,...n)}catch(t){e(t)}}}}const jV=(0,ad.PH)("".concat(QN,"/getPushUpOptionsRequest")),SV=(0,ad.PH)("".concat(QN,"/startCheckout")),ZV=(0,ad.PH)("".concat(QN,"/startCheckoutReview")),IV=(0,ad.PH)("".concat(QN,"/getPushUpMinimumPriceRequest")),CV=(0,ad.PH)("".concat(QN,"/getPushUpMinimumPriceFailure")),kV=e=>({itemId:e.item_id,total:Va(e.total),payable:Va(e.payable),discount:Va(e.discount),discounted:Va(e.discounted)}),wV=e=>{let{days:t,payable:i,description:n,price_per_day:s,discounted_price:r,default:a,best_value:o,international:l,countries:c,total:d,discount:u,discounted:m,push_up_order_items:p}=e;return{days:t,isDefault:a,description:n,pricePerDay:Va(s),discountedPrice:r?Va(r):void 0,isBestValue:!!o,international:l,countries:c,payable:Va(i),total:Va(d),discount:Va(u),discounted:Va(m),pushUpOrderItems:p.map(kV)}},PV=e=>({title:e.title,description:e.description,highlight:e.highlight}),zV=e=>({total:Va(e.total),payable:Va(e.payable),discount:Va(e.discount),hasFreeBump:e.has_free_bump}),TV=e=>{return{freePushUpsCount:0,freePushUpsExpireInDays:0,hasPaymentsAccount:!0,motivation:e.motivation?PV(e.motivation):void 0,options:e.options?(t=e.options,t.map(wV)):[]};var t},FV=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(kV)},NV=e=>{var t,i;return{id:e.id,status:e.status,freeCount:e.free_count,totalCount:e.total_count,total:Va(e.total),payIn:Va(e.pay_in),payable:Va(e.payable),discount:Va(e.discount),discounted:Va(e.discounted),freePushUpsValue:Va(e.free_push_ups_value),discountPercentage:e.discount_percentage,pushUpOrderItems:FV(e.push_up_order_items),salesTax:e.sales_tax?Va(e.sales_tax):null,isTaxCoverageAvailable:null!==(t=e.tax_coverage_available)&&void 0!==t?t:null,isTaxCovered:null!==(i=e.tax_covered)&&void 0!==i?i:null}},LV=bV(_V);function*EV(){const e=yield*(0,oj.Ys)(cM);if(!e.length)return;const t=yield*(0,oj.RE)(Fe.vG0,{itemIds:e});if("errors"in t)return void(yield(0,aj.gz)(iL.getPushUpOptionsFailure()));const i=TV(t);yield(0,aj.gz)(iL.getPushUpOptionsSuccess({pushUpOptions:i}))}function*OV(e){let{payload:{itemPrice:t}}=e;const i=yield*(0,oj.RE)(Fe.Zqr,{itemPrice:t});if("errors"in i)return void(yield(0,aj.gz)(CV()));const n=i.minimum_price,s=zV(n);yield(0,aj.gz)(iL.getPushUpMinimumPriceSuccess({pushUpMinimumPrice:s}))}function*RV(){yield(0,aj.gz)(iL.preparePushUpOrderRequest());const e=yield*(0,oj.Ys)(cM),t=yield*(0,oj.Ys)(yM);if(!t)return;const i=yield*(0,oj.RE)(Fe.cdQ,e,t.days,t.international);if("errors"in i)return void(yield(0,aj.gz)(iL.preparePushUpOrderFailure()));const n=i.push_up_order;yield(0,aj.gz)(iL.preparePushUpOrderSuccess({pushUpOrder:NV(n)}))}function*DV(e){let{payload:{pushUpOrderId:t}}=e;const i=yield*(0,oj.RE)(Fe.khY,t);if("errors"in i)return void(yield(0,aj.gz)(iL.getPushUpOrderFailure()));const n=NV(i.push_up_order);yield(0,aj.gz)(iL.getPushUpOrderSuccess({pushUpOrder:n}))}function*AV(e){let{payload:{selectedItemId:t}}=e;t&&(yield(0,aj.gz)(iL.setSelectedItems({itemIds:[t]})));const i=is($N);if(!i||"false"===i)return es($N,"true"),void(yield(0,aj.gz)(iL.setCheckoutModal({modal:Ei.ValueProposition})));yield(0,aj.gz)(iL.setCheckoutModal({modal:Ei.OrderReview}))}function*MV(){yield(0,aj.Fm)(SV.type,AV),yield(0,aj.Fm)(ZV.type,LV(RV)),yield(0,aj.Fm)([jV.type,iL.setSelectedItems],LV(EV)),yield(0,aj.Fm)(iL.getPushUpOrderRequest.type,DV),yield(0,aj.Fm)(IV.type,OV)}const UV=(0,ad.PH)("".concat(sL,"/prepareOrder")),BV=e=>({id:e.id,charityCode:e.charity_code,totalAmount:Va(e.total_amount),payableAmount:Va(e.payable_amount),termsNote:e.terms_note});function*qV(e){let{payload:t}=e;yield(0,aj.gz)(oL.prepareOrderRequest());const{amount:i,charityCode:n,currencyCode:s}=t;if(!i||!n||!s)return;const r=yield*(0,oj.RE)(Fe.hRd,{amount:i,charityCode:n,currencyCode:s});if("errors"in r){const e="message"in r?r.message:void 0;return void(yield(0,aj.gz)(oL.prepareOrderFailure({message:e})))}const a=r.direct_donation_order;yield(0,aj.gz)(oL.prepareOrderSuccess({order:BV(a)}))}function*VV(e){let{payload:{orderId:t}}=e;const i=yield*(0,oj.RE)(Fe.JHI,t);if("errors"in i)return void(yield(0,aj.gz)(oL.getOrderFailure()));const n=BV(i.direct_donation_order);yield(0,aj.gz)(oL.getOrderSuccess({order:n}))}function*HV(){yield(0,aj.Fm)(UV.type,qV),yield(0,aj.Fm)(oL.getOrderRequest.type,VV)}const GV=e=>{const{heading:t,description:i,code:n,logo:s}=e;return{heading:t,description:i,code:n,logo:{darkUrl:s.dark_url,lightUrl:s.light_url}}},WV=e=>{const{active:t,percentage:i}=e;return{active:t||!1,percentage:i}},XV=e=>{const{active:t,charity_code:i,charity:n,percentage:s,donations_total:{currency_code:r,amount:a}}=e;return{active:t,charityCode:i,charity:n?GV(n):null,percentage:s,currency:r,amountDonated:a}},YV=e=>e.map(GV);function*KV(){const e=yield*(0,oj.RE)(Fe.zzc);"errors"in e?yield(0,aj.gz)(hL.fetchFundraiserConfigurationFailure()):yield(0,aj.gz)(hL.fetchFundraiserConfigurationSuccess({fundraiser:XV(e.fundraiser)}))}function*JV(e){let{payload:{charityCode:t,percentage:i}}=e;const n=yield*(0,oj.RE)(Fe.Pkn,{charityCode:t,percentage:i});"errors"in n?yield(0,aj.gz)(hL.manageFundraiserConfigurationFailure()):(yield(0,aj.gz)(wI.setFundraiserConfiguration({fundraiser:WV(n.fundraiser)})),yield(0,aj.gz)(hL.manageFundraiserConfigurationSuccess({fundraiser:XV(n.fundraiser)})))}function*QV(){"errors"in(yield*(0,oj.RE)(Fe.U3Z))?yield(0,aj.gz)(hL.stopActiveFundraiserFailure()):yield(0,aj.gz)(hL.fetchFundraiserConfiguration())}function*$V(){const e=yield*(0,oj.RE)(Fe.Pa5);"errors"in e?yield(0,aj.gz)(hL.fetchCharitiesFailure()):yield(0,aj.gz)(hL.fetchCharitiesSuccess({charities:YV(e.charities)}))}function*eH(){yield(0,aj.Fm)(hL.fetchFundraiserConfiguration.type,KV),yield(0,aj.Fm)(hL.fetchFundraiserConfiguration.type,$V),yield(0,aj.ib)(hL.manageFundraiserConfiguration.type,JV),yield(0,aj.ib)(hL.stopActiveFundraiser.type,QV)}const tH=(0,ad.PH)("".concat(Vm,"/getBundleSummaryRequest")),iH=(0,ad.PH)("".concat(Vm,"/getInstantBundleSummaryOrderReviewRequest")),nH=(0,ad.PH)("".concat(Vm,"/getBundleSummaryFailure")),sH=e=>{let{discount_amount:t,discount_applied:i,discount_explanation:n,discount_fraction:s,discount_text:r,full_price:a,price:o,shipping_price:l,show:c,total_price:d,currency:u,offline_verification_fee:m,buyer_protection_fee:p,price_with_buyer_protection_fee:g,conversion:h}=e;return{discountAmount:t,discountApplied:i,discountExplanation:n,discountFraction:s,discountText:r,fullPrice:a,price:o,shippingPrice:l,show:c,totalPrice:d,currency:u,offlineVerificationFee:m&&Va(m),buyerProtectionFee:Va(p),priceWithBuyerProtectionFee:Va(g),conversion:h&&Hj(h)}},rH=e=>{let{discount_amount:t,discount_applied:i,discount_explanation:n,discount_fraction:s,discount_text:r,total_price:a,shipping_price:o,offline_verification_fee:l,buyer_protection_fee:c,price_with_buyer_protection_fee:d,conversion:u,items_price:m,bundle_shipping_type:p,contains_offline_verification_item:g}=e;return{discountAmount:t?Va(t):null,discountApplied:i,discountExplanation:n,discountFraction:s,discountText:r,offlineVerificationFee:l&&Va(l),buyerProtectionFee:Va(c),priceWithBuyerProtectionFee:Va(d),conversion:u&&Gj(u),itemsPrice:Va(m),totalPrice:Va(a),shippingPrice:o?Va(o):null,bundleShippingType:p,containsOfflineVerificationItem:g}};function*aH(e){let{payload:{itemIds:t,userId:i}}=e;const n=yield*(0,oj.Ys)(Vn("instant_bundles")),s=yield*(0,oj.Ys)(Wt("instant_bundles"));(null==n?void 0:n.variant)===$k.On&&s?yield(0,aj.gz)(iH({itemIds:t,userId:i})):yield(0,aj.gz)(tH({itemIds:t,userId:i}))}function*oH(e){let{payload:{itemIds:t,userId:i}}=e;const n=yield*(0,oj.RE)(Fe.H92,{itemIds:t,sellerId:i});"errors"in n?yield(0,aj.gz)(nH()):n&&(yield(0,aj.gz)(Gm.getBundleSummarySuccess({bundleSummary:sH(n.bundle_summary)})))}function*lH(e){let{payload:{itemIds:t,userId:i}}=e;const n=yield*(0,oj.RE)(Fe.MgG,{itemIds:t,sellerId:i});"errors"in n?yield(0,aj.gz)(nH()):n&&(yield(0,aj.gz)(Gm.getInstantBundleSummarySuccess({instantBundleSummary:rH(n.bundle_order_review)})))}function*cH(){const e=ZF().v4();yield(0,aj.gz)(Gm.setBundleTrackingId({bundleTrackingId:e}))}function*dH(){yield(0,aj.Fm)(Gm.startBundling,cH),yield(0,aj.Fm)(Gm.setSelectedItems,aH),yield(0,aj.Fm)(tH,oH),yield(0,aj.Fm)(iH,lH)}const uH=e=>({id:e.id,name:e.login,image:Je(e.photo),url:e.url,rating:$e(e.feedback_reputation),ratingCount:e.feedback_count,isFollowed:e.is_favourite,itemCount:e.item_count}),mH=e=>{const{items:t,user:i}=e;return{user:uH(i),items:t,showBanner:!1}},pH=e=>e.map(mH),gH=(0,ad.PH)("".concat(bE,"/proceedToCheckout")),hH=e=>e[bE],xH=e=>e.closetPromotions.checkout,fH=e=>xH(e).order,yH=e=>xH(e).orderPrepareUiState,vH=e=>xH(e).activeModal,_H=e=>e.closetPromotions.pricing,bH=e=>e.closetPromotions.pricingUiState,jH=(Pl([yH,(e,t)=>t],((e,t)=>e===Ne.Pending||t===Ne.Pending)),(0,B.P1)(fH,(e=>e&&parseFloat(e.payable.amount)<=0))),SH=(0,B.P1)(fH,(e=>!e||!1===e.isTaxCoverageAvailable)),ZH=(0,B.P1)(hH,(e=>{let{ids:t}=e;return t})),IH=(0,B.P1)(hH,(e=>{let{byId:t}=e;return t})),CH=(0,B.P1)(hH,(e=>{let{seenClosetIds:t}=e;return t})),kH=(0,B.P1)(ZH,IH,((e,t)=>e.map((e=>t[e])))),wH=(0,B.P1)(kH,(e=>e.length?[{...e[0],showBanner:!0},...e.slice(1)]:e));function*PH(e){let{payload:t}=e;const i=yield*(0,oj.Ys)(hr),n=(null==t?void 0:t.selectedDynamicFilters)||(yield*(0,oj.Ys)(sa)),s=(null==t?void 0:t.searchSessionId)||(yield*(0,oj.Ys)(Hr)),r=yield*(0,oj.Ys)(CH),a=yield*(0,oj.RE)(Fe.sk7,{excludedUserIds:r,perPage:Be.Ku,itemCount:Be.R9,searchSessionId:s,...i,...t,selectedDynamicFilters:n});"errors"in a?yield(0,aj.gz)(IE.getClosetPromotionsFailure()):yield(0,aj.gz)(IE.getClosetPromotionsSuccess({closets:pH(a.promoted_closets)}))}function*zH(){const e=yield*(0,oj.RE)(Fe.mEg);"errors"in e?yield(0,aj.gz)(IE.getPricingFailure()):yield(0,aj.gz)(IE.getPricingSuccess({pricing:Wh(e)}))}function*TH(){const e=yield*(0,oj.RE)(Fe.dM4);if("errors"in e)return void(yield(0,aj.gz)(IE.prepareClosetPromotionOrderFailure()));const{motivation:t,closet_promotion_order:i}=e.closet_promotion;yield(0,aj.gz)(IE.prepareClosetPromotionOrderSuccess({order:Ch(i),motivation:t&&kh(t)}))}function*FH(e){let{payload:{closetPromotionOrderId:t}}=e;const i=yield*(0,oj.RE)(Fe.VFx,t);if("errors"in i)return void(yield(0,aj.gz)(IE.getClosetPromotionOrderFailure()));const n=Ch(i.closet_promotion_order);yield(0,aj.gz)(IE.getClosetPromotionOrderSuccess({closetPromotionOrder:n}))}function*NH(){(yield*(0,oj.Ys)(yH))!==Ne.Success&&(yield(0,aj.gz)(IE.prepareClosetPromotionOrderRequest()))}function*LH(){Ol.track(Ri({target:qm.PromoteCloset})),yield(0,aj.gz)(IE.getPricingRequest())}function*EH(){yield(0,aj.ib)(IE.getClosetPromotionsRequest,PH),yield(0,aj.Fm)(IE.startPreCheckout.type,LH),yield(0,aj.Fm)(IE.getClosetPromotionOrderRequest.type,FH),yield(0,aj.Fm)(IE.prepareClosetPromotionOrderRequest.type,TH),yield(0,aj.Fm)(IE.getPricingRequest.type,zH),yield(0,aj.Fm)(gH.type,NH)}const OH=e=>{let{available_amount:t,escrow_amount:i}=e;return{pendingAmount:Va(i),availableAmount:Va(t)}},RH=(0,ad.PH)("".concat(yC,"/handleOrderConfirmationResult")),DH=(0,ad.PH)("".concat(yC,"/fetchConfigurationRequest"));function AH(e,t){return e.filter((e=>{let{code:i}=e;return i!==iv.Wallet||parseFloat(t.amount)>0}))}function*MH(e){let{payload:{creditCardId:t}}=e;if(!t)return;if((yield(0,aj.Ys)(jC)).some((e=>{let{id:i}=e;return i===t})))return;const i=yield(0,aj.RE)(Fe.C$d,{cardId:t});if("errors"in i)return void(yield(0,aj.gz)(Mk.getPayInMethodsFailure()));const n=Ij(i.card);yield(0,aj.gz)(Mk.getCreditCardSuccess({creditCard:n}))}function*UH(){const e=yield(0,aj.Ys)(X);if(!e)return;const{creditCardsResponse:t,payInMethodsResponse:i,walletBalanceResponse:n}=yield(0,aj.$6)({creditCardsResponse:(0,aj.RE)(Fe.Thf),payInMethodsResponse:(0,aj.RE)(Fe.zgX),walletBalanceResponse:(0,aj.RE)(Fe.pdA,e)});if("errors"in t||"errors"in i||"errors"in n)return void(yield(0,aj.gz)(Mk.getPayInMethodsFailure()));const s=Cj(t.cards),r=wj(i.pay_in_methods),a=OH(n.user_balance);yield(0,aj.gz)(Mk.getPayInMethodsSuccess({creditCards:s,walletBalance:a,payInMethods:AH(r,a.availableAmount)}))}function*BH(e){var t;null!=e&&e.code&&(e.code===pm.Q.KYCError?yield(0,aj.gz)(Mk.setIsKycConfirmationNeeded({isNeeded:!0})):yield(0,aj.gz)(Mk.setOrderPaymentErrorMessage({errorMessage:null===(t=e.errors[0])||void 0===t?void 0:t.value})))}function*qH(e){let{extra_service_payment:t}=e;const i=qk(t);i.failureReason&&(yield(0,aj.gz)(Mk.setOrderPaymentErrorMessage({errorMessage:i.failureReason})))}function*VH(e){let{extra_service_payment:t}=e;yield(0,aj.gw)(Ni);const i=qk(t),n=yield(0,aj.RE)(Fe.VyP,i.id);yield(0,aj.gz)(RH({response:n}))}function*HH(e){let{payload:{response:t}}=e;if("errors"in t)return void(yield(0,aj.RE)(BH,t));if(t.extra_service_payment.status===zi.Failed)return void(yield(0,aj.RE)(qH,t));const i=function(e){let{extra_service_payment:t,authentication_action:i}=e;const n=qk(t);if(i){const e=tS(i);return Mk.triggerEmbeddedPaymentAuth({paymentId:n.id,authAction:e})}return n.payInRedirectUrl?Mk.triggerPaymentAuthWithRedirect({payInRedirectUrl:n.payInRedirectUrl}):null}(t);if(i){if(yield(0,aj.gz)(DH()),(yield(0,aj.S3)({success:(0,aj.qn)(Mk.fetchConfigurationSuccess),failure:(0,aj.qn)(Mk.fetchConfigurationFailure)})).failure)return;yield(0,aj.gz)(i)}else t.extra_service_payment.status!==zi.Pending?yield(0,aj.gz)(Mk.confirmOrderPaymentSuccess()):yield(0,aj.RE)(VH,t)}function*GH(e){let{payload:t}=e;const{orderId:i,blikCode:n,orderType:s,entityType:r,selectedCreditCardId:a,selectedPaymentMethodId:o}=t,l={orderId:i,blikCode:n,orderType:s,entityType:r,creditCardId:a,paymentMethodId:o,browserAttributes:hj()},c=yield(0,aj.RE)(Fe.v6_,l);yield(0,aj.gz)(RH({response:c}))}function*WH(){const e=yield(0,aj.RE)(Fe.Ukv);var t;"errors"in e?yield(0,aj.gz)(Mk.fetchConfigurationFailure({errorMessage:null===(t=e.errors[0])||void 0===t?void 0:t.value})):yield(0,aj.gz)(Mk.fetchConfigurationSuccess({configuration:nS(e.checkout_configuration)}))}function*XH(e){let{payload:t}=e;if((yield(0,aj.Ys)(CC))===Oi.Success)return;const i=yield(0,aj.RE)(Fe.VA7,t.paymentId,{paymentData:{details:t.state.data.details,data:t.state.data.paymentData}});yield(0,aj.gz)(RH({response:i}))}function*YH(){yield(0,aj.A7)(Mk.getPayInMethodsRequest.type,UH),yield(0,aj.Fm)(Mk.confirmOrderPaymentRequest.type,GH),yield(0,aj.Fm)(Mk.setSelectedPayInMethod.type,MH),yield(0,aj.Fm)(Mk.updateOrderPaymentDataRequest.type,XH),yield(0,aj.Fm)(DH.type,WH),yield(0,aj.Fm)(RH.type,HH)}function*KH(e){let{payload:t}=e;const{transactionId:i}=t,n=yield*(0,oj.RE)(Fe._oX,{transactionId:i});"errors"in n?yield(0,aj.gz)(Kx.fetchTransactionPackageSizesFailure({errors:n.errors})):yield(0,aj.gz)(Kx.fetchTransactionPackageSizesSuccess({packageSizes:FA(n.package_sizes)}))}function*JH(e){let{payload:t}=e;const{transactionId:i,packageSizeId:n,customShipmentPrice:s}=t,r=yield*(0,oj.RE)(Fe.aoC,{transactionId:i,packageSizeId:n,customShipmentPrice:s});"errors"in r&&r.errors?yield(0,aj.gz)(Kx.selectTransactionPackageSizeFailure({errors:r.errors})):yield(0,aj.gz)(Kx.selectTransactionPackageSizeSuccess())}function*QH(e){let{payload:t}=e;const{brandId:i,catalogId:n,price:s}=t,r=yield*(0,oj.RE)(Fe.HcP,{brandId:i,catalogId:n,price:s});"errors"in r?yield(0,aj.gz)(Kx.fetchCatalogPackageSizesFailure({errors:r.errors})):yield(0,aj.gz)(Kx.fetchCatalogPackageSizesSuccess({packageSizes:FA(r.package_sizes),isOfflineVerificationEligible:r.is_offline_verification_eligible}))}function*$H(){yield(0,aj.ib)(Kx.fetchTransactionPackageSizesRequest,KH),yield(0,aj.ib)(Kx.selectTransactionPackageSizeRequest,JH),yield(0,aj.ib)(Kx.fetchCatalogPackageSizesRequest,QH)}const eG=(0,ad.PH)("".concat(kE,"/fetchFormConfigurationRequest")),tG=(0,ad.PH)("".concat(kE,"/fetchFormConfigurationFailure")),iG=e=>({files:e.files.map((e=>(e=>({identifier:e.identifier,uploadNote:e.upload_note}))(e))),title:e.title,type:e.type,maximumFileSize:e.maximum_file_size,mediaTypes:e.media_types}),nG=e=>{let{title:t,description:i}=e;return{title:t,description:i}},sG=e=>({field:e.field,group:e.group,hint:e.hint,options:e.options.map(iG),info:e.info?nG(e.info):null}),rG=e=>{let{payments_identity:t}=e;return{firstName:t.first_name,lastName:t.last_name,birthdate:t.birthdate,ssnSerial:t.ssn_serial,personalIdNumber:t.personal_id_number,status:t.status,requiredFields:t.required_fields,address:t.address&&(0,V.X)(t.address)||null,agreementHint:t.agreement_hint,businessAddress:t.business_address&&(0,V.X)(t.business_address),registrationNumber:t.registration_number,accountType:t.account_type,documentFieldConfigurations:(i=t.document_field_configurations,i.map(sG)),verificationFailures:t.verification_failures&&[...t.verification_failures],statusMessage:t.status_message,statusNote:t.status_note};var i};let aG,oG;!function(e){e.Personal="personal",e.Business="business"}(aG||(aG={})),function(e){e.IdentityDocuments="identity_documents",e.SupportingDocuments="supporting_documents"}(oG||(oG={}));const lG=e=>e.kyc,cG=e=>lG(e).formData,dG=e=>lG(e).paymentsIdentityConfiguration,uG=e=>lG(e).formState.uiState,mG=e=>cG(e).firstName||"",pG=e=>cG(e).lastName||"",gG=e=>cG(e).birthdate||"",hG=e=>lG(e).apiErrors,xG=e=>cG(e).address,fG=(0,B.P1)(dG,(e=>e)),yG=e=>{var t;return null===(t=dG(e))||void 0===t?void 0:t.accountType},vG=e=>lG(e).formState.isFormDisabled,_G=e=>{var t;return null===(t=dG(e))||void 0===t?void 0:t.requiredFields},bG=e=>lG(e).formState.isFormDirty,jG=e=>{var t;return(null===(t=dG(e))||void 0===t?void 0:t.agreementHint)||""},SG=e=>cG(e).isLegalRepresentativeUbo,ZG=e=>{var t;return null===(t=dG(e))||void 0===t?void 0:t.documentFieldConfigurations},IG=(0,B.P1)(cG,yG,mG,pG,gG,xG,SG,(e=>cG(e).ubos),_G,((e,t,i,n,s,r,a,o,l)=>{const c=null==l?void 0:l.includes(wE.Ubo),d=t===aG.Business;if(c&&d&&a&&r){const t=(null==o?void 0:o[0])||{nationality:"",birthplaceCountry:"",birthplaceCity:""};return{...e,ubos:[{...t,firstName:i,lastName:n,birthday:s,address:r}]}}return e})),CG=(0,B.P1)(fG,(e=>null==e?void 0:e.status)),kG=(0,B.P1)(ZG,(e=>{var t;return null==e||null===(t=e.filter((e=>{let{group:t}=e;return t===oG.IdentityDocuments})))||void 0===t?void 0:t[0]})),wG=(0,B.P1)(ZG,(e=>null==e?void 0:e.filter((e=>{let{group:t,options:i}=e;return t===oG.SupportingDocuments&&1===i.length})))),PG=(0,B.P1)(wG,_G,((e,t)=>{var i;const n=null==e?void 0:e.map((e=>{let{options:t}=e;return null==t?void 0:t[0].type}));return!(null==t||null===(i=t.filter((e=>null==n?void 0:n.includes(e))))||void 0===i||!i.length)})),zG=e=>(e=>lG(e).formState)(e).hasUnknownApiErrorOccured;function*TG(){const e=yield*(0,oj.RE)(Fe.$20);if("errors"in e)return void(yield(0,aj.gz)(tG()));const t=rG(e);yield(0,aj.gz)(TE.setConfiguration({configuration:t}))}function*FG(){yield(0,aj.gz)(TE.setIsFormDisabled({isFormDisabled:!0})),yield(0,aj.gz)(TE.setHasUnknownApiErrorOccured({status:!1}));const e=yield*(0,oj.Ys)(IG),t=yield*(0,oj.RE)(Fe.Hjk,e);if("errors"in t)return yield(0,aj.gz)(TE.setGeneralErrors({errors:t.errors})),yield(0,aj.gz)(TE.setIsFormDisabled({isFormDisabled:!1})),void(t.errors.length||(yield(0,aj.gz)(TE.setHasUnknownApiErrorOccured({status:!0}))));const i=rG(t);yield(0,aj.gz)(TE.setConfiguration({configuration:i})),yield(0,aj.gz)(TE.submitFormSuccess())}function*NG(){yield(0,aj.Fm)(eG,TG),yield(0,aj.Fm)(TE.submitFormRequest,FG)}const LG=e=>{const{id:t,amount:i,date:n,title:s,subtitle:r,type:a,entity_id:o,entity_type:l}=e;return{id:t,amount:Va(i),date:n,title:s,subtitle:r,type:a,entityId:o,entityType:l}},EG=e=>{var t,i;return{invoiceLines:(i=e.invoice_lines,i.map(LG)),startBalance:Va(e.previous_balance),endBalance:Va(e.balance),startingDate:e.starting_date,history:null===(t=e.history)||void 0===t?void 0:t.map((e=>({title:e.title,year:e.year,month:e.month,balance:Va(e.balance)})))}};function*OG(e){let{payload:{userId:t}}=e;const i=yield*(0,oj.RE)(Fe.pdA,t);"errors"in i?yield(0,aj.gz)(OE.getBalanceFailure()):yield(0,aj.gz)(OE.getBalanceSuccess({balance:OH(i.user_balance)}))}function*RG(){const e=yield*(0,oj.RE)(Fe.twF);"errors"in e?yield(0,aj.gz)(OE.getCurrentInvoicesFailure()):yield(0,aj.gz)(OE.getCurrentInvoicesSuccess({invoices:EG(e)}))}function*DG(e){let{payload:{year:t,month:i}}=e;const n=yield*(0,oj.RE)(Fe.co$,t,i);"errors"in n?yield(0,aj.gz)(OE.getHistoricalInvoicesFailure()):yield(0,aj.gz)(OE.getHistoricalInvoicesSuccess({invoices:EG(n)}))}function*AG(){yield(0,aj.Fm)(OE.getBalanceRequest.type,OG),yield(0,aj.Fm)(OE.getCurrentInvoicesRequest.type,RG),yield(0,aj.Fm)(OE.getHistoricalInvoicesRequest.type,DG)}const MG=e=>{return{firstName:e.first_name,lastName:e.last_name,birthdate:e.birthdate,nationality:e.nationality?(t=e.nationality,{code:t.code,title:t.title}):null,address:e.user_address?(0,V.X)(e.user_address):null};var t};function*UG(){var e,t,i,n;const s=yield*(0,oj.Ys)(X);if(!s)return;const[r,a]=yield*(0,oj.$6)([(0,oj.RE)(Fe.o_O),(0,oj.RE)(Fe.dLX,s)]);let o=null,l=null,c=!1,d=!1,u=!1,m=!1,p=!1,g="";"user_address"in r&&(o=(0,V.X)(r.user_address)),"payments_account"in a&&a.payments_account&&(l=MG(a.payments_account)),"locked_account_details"in a&&(u=a.locked_account_details),"ssn_number_required"in a&&(c=a.ssn_number_required),"balance_activated"in a&&(m=a.balance_activated),"personal_id_number_required"in a&&(d=a.personal_id_number_required),"nationality_required"in a&&(p=a.nationality_required),"agreement_hint"in a&&(g=a.agreement_hint);const h={firstName:(null===(e=l)||void 0===e?void 0:e.firstName)||"",lastName:(null===(t=l)||void 0===t?void 0:t.lastName)||"",birthdate:(null===(i=l)||void 0===i?void 0:i.birthdate)||"",ssn:"",personalIdNumber:"",nationality:(null===(n=l)||void 0===n?void 0:n.nationality)||null};yield(0,aj.gz)(lI.getDefaultFormValuesSuccess({form:h})),yield*(0,oj.$6)([(0,aj.gz)(lI.setCanChange({canChange:!u})),(0,aj.gz)(lI.setIsSsnNumberRequired({status:c})),(0,aj.gz)(lI.setIsPersonalIdNumberRequired({status:d})),(0,aj.gz)(lI.setIsBalanceActivated({status:m})),(0,aj.gz)(lI.setIsNationalityRequired({status:p})),(0,aj.gz)(lI.setAgreementHint({status:g}))]),yield(0,aj.gz)(lI.setAddress({address:o})),yield(0,aj.gz)(lI.setStatus({status:Ne.Success}))}function*BG(){yield(0,aj.Fm)(lI.getDefaultFormValuesRequest.type,UG)}const qG=e=>{const{status:t,title:i,exact_date:n,date:s,note:r}=e;return{status:t,title:i,exactDate:n,date:s,note:r}},VG=e=>{let{amount:t,currency:i,progress_details:n}=e;return{amount:t,currency:i,progressDetails:n.map(qG)}},HG=e=>{let{amount:t,note:i}=e;return{amount:t.amount,currency:t.currency_code,note:i}};function*GG(e){let{payload:{userId:t,payoutId:i}}=e;const n=yield*(0,oj.RE)(Fe.nAo,t,i);"errors"in n?yield(0,aj.gz)(UE.getPayoutFailure()):yield(0,aj.gz)(UE.getPayoutSuccess({payout:VG(n.payout)}))}function*WG(e){let{payload:{userId:t}}=e;const i=yield*(0,oj.RE)(Fe.SvV,t);"errors"in i?yield(0,aj.gz)(UE.getPayoutConfigurationFailure()):yield(0,aj.gz)(UE.getPayoutConfigurationSuccess({payoutConfiguration:HG(i.payout)}))}function*XG(){yield(0,aj.Fm)(UE.getPayoutRequest.type,GG),yield(0,aj.Fm)(UE.getPayoutConfigurationRequest.type,WG)}const YG=e=>{let{amount:t,currency:i,progress_details:n}=e;return{amount:t,currency:i,progressDetails:n.map(qG)}};function*KG(e){let{payload:{transactionId:t}}=e;const i=yield*(0,oj.RE)(Fe.hSL,t);"errors"in i?yield(0,aj.gz)(mw.getRefundFailure()):yield(0,aj.gz)(mw.getRefundSuccess({refund:YG(i.refund)}))}function*JG(){yield(0,aj.Fm)(mw.getRefundRequest.type,KG)}const QG=e=>{let{required:t,keyboard_input_type:i,format:n,min_length:s,max_length:r,adjust_pattern:a}=e;return{required:t,keyboardInputType:i,format:n,minLength:s,maxLength:r,adjustPattern:a}},$G=e=>Object.keys(e).reduce(((t,i)=>{const n=e[i];return{...t,[i]:n?QG(n):null}}),{}),eW=e=>{let{provider_name:t,account_type:i,info:n,tokenizer:s,fields:r}=e;return{provider:t,accountType:i,tokenizer:s,info:{country:n.country,currency:n.currency},fields:$G(r)}},tW=e=>{let{id:t,name:i,account_number:n,routing_number:s,is_default:r,user_id:a,user_address_id:o,spending_type:l}=e;return{id:t,name:i,accountNumber:n,routingNumber:s,isDefault:!!r,userId:a,userAddressId:o,spendingType:l}},iW=e=>e.map(tW);function*nW(){const e=yield*(0,oj.RE)(Fe.xs$);"errors"in e?yield(0,aj.gz)(GE.fetchBankAccountRegistrationFailure()):yield(0,aj.gz)(GE.fetchBankAccountRegistrationSuccess({bankAccountRegistration:eW(e)}))}function*sW(){const e=yield*(0,oj.RE)(Fe.T7i);"errors"in e?yield(0,aj.gz)(GE.fetchBankAccountsFailure()):yield(0,aj.gz)(GE.fetchBankAccountsSuccess({bankAccounts:iW(e.bank_accounts)}))}function*rW(){yield(0,aj.Fm)(GE.fetchBankAccountRegistrationRequest.type,nW),yield(0,aj.Fm)(GE.fetchBankAccountsRequest.type,sW)}const aW=e=>e[EL],oW=e=>{const{countries:t}=aW(e);return t.ids.map((e=>t.byId[e]))},lW=e=>{const{cities:t}=aW(e);return t.ids.map((e=>t.byId[e]))},cW=(e,t)=>null===t?null:aW(e).cities.byId[t]||null,dW=(0,ad.PH)("".concat(XE,"/loadFormAttributes")),uW=(0,ad.PH)("".concat(XE,"/saveSettings")),mW=(0,ad.PH)("".concat(XE,"/selectCountry")),pW=(0,ad.PH)("".concat(XE,"/selectCity")),gW=e=>e[XE],hW=e=>gW(e).settings.countryId,xW=e=>gW(e).settings.cityId,fW=e=>gW(e).settings.cityTitle,yW=e=>gW(e).settings.isCityVisible,vW=e=>gW(e).settings.about,_W=e=>gW(e).settings,bW=e=>gW(e).uiState,jW=e=>gW(e).error,SW=e=>gW(e).settings.languageCode,ZW=e=>gW(e).settings.username,IW=e=>gW(e).settings.contactEmail,CW=e=>gW(e).settings.contactNumber,kW=e=>gW(e).settings.vat;function*wW(e){let{payload:t}=e;yield(0,aj.gz)(JE.setCountryId({id:t.id})),yield(0,aj.gz)(JE.setCity({id:null,title:null})),yield(0,aj.gz)(GM({countryId:t.id}))}function*PW(e){let{payload:t}=e;const i=yield*(0,oj.Ys)(cW,t.id);i&&(yield(0,aj.gz)(JE.setCity({id:i.id,title:i.title})))}function*zW(){const e=yield*(0,oj.Ys)(W),t=yield*(0,oj.Ys)(ce);if(!e)return;const{country_id:i,city_id:n,city:s,is_location_public:r,about:a,business_account:o}=e,l={countryId:i,cityId:n,cityTitle:s,isCityVisible:!!r,about:(0,v.unescape)(a),languageCode:t,photoTempUuid:void 0};if(o){const{name:e,email:t,phone_number:i,vat:n}=o;Object.assign(l,{username:e,contactEmail:t,contactNumber:i,vat:n})}yield(0,aj.gz)(JE.setInitialSettings({settings:l})),i&&(yield(0,aj.gz)(GM({countryId:i})))}function*TW(){if((yield*(0,oj.Ys)(bW))===Ne.Pending)return;const e=yield*(0,oj.Ys)(_W),t=yield*(0,oj.Ys)(ce),i=yield*(0,oj.Ys)(je),n=yield*(0,oj.Ys)(Ze);yield(0,aj.gz)(JE.changeUiState({uiState:Ne.Pending}));const{languageCode:s,...r}=e;let a;if(i&&n){const{username:e,contactEmail:t,contactNumber:n,vat:s,about:o,photoTempUuid:l}=r;a=yield*(0,oj.RE)(Fe.u6S,{businessAccountId:i.id,username:e,contactEmail:t,contactNumber:n,about:o,photoTempUuid:l,vat:s})}else a=yield*(0,oj.RE)(Fe.SFz,r);if("errors"in a)return yield(0,aj.gz)(JE.setError({error:a})),yield(0,aj.gz)(JE.changeUiState({uiState:Ne.Failure})),void(yield*(0,oj.RE)(ls.k3));t!==s&&(yield*(0,oj.RE)(Fe.jk0,s)),yield*(0,oj.RE)(ls.sl)}function*FW(){yield(0,aj.ib)(mW,wW),yield(0,aj.ib)(pW,PW),yield(0,aj.ib)(dW,zW),yield(0,aj.ib)(uW,TW)}const NW=(0,ad.PH)("".concat($E,"/fetchBusinessAddresses"));function*LW(){const e=yield*(0,oj.Ys)(Se),t=yield*(0,oj.RE)(Fe.CX1,{businessAccountId:e});if("errors"in t)return;const i={businessAddress:null,returnAddress:null,isUsingTheSameAddress:!0},{addresses:{business_address:n,return_address:s}}=t;n&&(i.businessAddress=(0,rt.f_)(n)),s&&(i.returnAddress=(0,rt.f_)(s),i.isUsingTheSameAddress=!1),yield(0,aj.gz)(tO.fetchBusinessAddressesComplete(i))}function*EW(){yield(0,aj.ib)(NW.type,LW)}const OW=e=>e.map((e=>{const{id:t,body:i,allow_user_input:n}=e;return{id:t,body:i,hasMessageInput:n}}));function*RW(){const e=yield*(0,oj.Ys)(Ow);if(e.length)return void(yield(0,aj.gz)(Pw.fetchFeedbackDenyOptionsSuccess(e)));const t=yield*(0,oj.Ys)(X),i=yield*(0,oj.Ys)(Hd);if(!t||!i)return void(yield(0,aj.gz)(Pw.fetchFeedbackDenyOptionsFailure()));const n=yield*(0,oj.RE)(Fe.ZzY,t,i);if("errors"in n)return void(yield(0,aj.gz)(Pw.fetchFeedbackDenyOptionsFailure()));const s=OW(n.problem_options);yield(0,aj.gz)(Pw.fetchFeedbackDenyOptionsSuccess(s))}function*DW(e){let{payload:t}=e;const i=yield*(0,oj.Ys)(X),n=yield*(0,oj.Ys)(Hd),{selectedOption:s,message:r}=t;i&&n&&s&&(yield*(0,oj.RE)(Fe.jhK,{userId:i,conversationId:n,message:r||void 0,problemOptionId:s})),yield(0,aj.gz)(Pw.closeProblemsModal())}function*AW(){const e=yield*(0,oj.Ys)(Hd);e?yield*(0,oj.RE)(Fe.XSO,e):yield(0,aj.gz)(Mw())}function*MW(){const e=yield*(0,oj.Ys)(Rw);if(e)return void(yield(0,aj.gz)(Pw.fetchFeedbackRatingsSuccess(e)));const t=yield*(0,oj.Ys)(X),i=yield*(0,oj.Ys)(Hd);if(!t||!i)return void(yield(0,aj.gz)(Pw.fetchFeedbackRatingsFailure()));const n=yield*(0,oj.RE)(Fe.mSX,t,i);if("errors"in n)return void(yield(0,aj.gz)(Pw.fetchFeedbackRatingsFailure()));const s=Gh(n);s?yield(0,aj.gz)(Pw.fetchFeedbackRatingsSuccess(s)):yield(0,aj.gz)(Pw.fetchFeedbackRatingsFailure())}function*UW(e){let{payload:t}=e;const i=yield*(0,oj.Ys)(X),n=yield*(0,oj.Ys)(Hd);if(!i||!n)return void(yield(0,aj.gz)(Bw()));const{rating:s,feedbackStatementIds:r,message:a,finalized:o}=t;yield*(0,oj.RE)(Fe.XaO,i,n,{rating:s,message:a,feedbackStatementIds:r,finalized:o}),o&&(yield*(0,oj.RE)(ls.sl))}function*BW(){yield(0,aj.Fm)(Pw.fetchFeedbackDenyOptionsRequest,RW),yield(0,aj.Fm)(Dw,DW),yield(0,aj.Fm)(Aw,AW),yield(0,aj.Fm)(Pw.fetchFeedbackRatingsRequest,MW),yield(0,aj.Fm)(Uw,UW)}const qW=e=>{let{prices:t}=e;return{prices:{minimum:Va(t.minimum),maximum:Va(t.maximum)}}};function*VW(){const e=yield*(0,oj.RE)(Fe.lRP);"errors"in e?yield(0,aj.gz)(Sf.fetchCustomShipmentConfigFailure()):yield(0,aj.gz)(Sf.fetchCustomShipmentConfigSuccess({config:qW(e.custom_shipment_configuration)}))}function*HW(){yield(0,aj.ib)(Sf.fetchCustomShipmentConfigRequest,VW)}const GW=e=>({regex:e.regex,message:e.message,trackingTarget:e.tracking_target}),WW=e=>{var t;return{phoneNumber:{validations:(null===(t=e.phone_number)||void 0===t?void 0:t.validations.map(GW))||[]}}};function*XW(){const e=yield*(0,oj.RE)(Fe.K8V);"errors"in e?yield(0,aj.gz)(Ay.fetchShippingContactConfigurationFailure()):yield(0,aj.gz)(Ay.fetchShippingContactConfigurationSuccess({configuration:WW(e.shipping_contact_configuration)}))}function*YW(e){const{transactionId:t,buyerPhoneNumber:i,sellerPhoneNumber:n,saveForLater:s}=e.payload;if(!t)return;if(!i&&!n)return;const r=yield*(0,oj.RE)(Fe.Rtx,{transactionId:t,buyerPhoneNumber:i,sellerPhoneNumber:n,saveForLater:s});"errors"in r?yield(0,aj.gz)(Ay.saveTransactionShippingContactFailure({error:r.errors[0]})):yield(0,aj.gz)(Ay.saveTransactionShippingContactSuccess({transactionId:t,buyerPhoneNumber:i,sellerPhoneNumber:n}))}function*KW(e){const{transactionId:t}=e.payload;t&&("errors"in(yield*(0,oj.RE)(Fe.h9K,t))?yield(0,aj.gz)(Ay.deleteTransactionShippingContactFailure()):yield(0,aj.gz)(Ay.deleteTransactionShippingContactSuccess({transactionId:t})))}function*JW(){yield(0,aj.Fm)(Ay.saveTransactionShippingContactRequest,YW),yield(0,aj.Fm)(Ay.fetchShippingContactConfigurationRequest,XW),yield(0,aj.Fm)(Ay.deleteTransactionShippingContactRequest,KW)}const QW=e=>{let{escrow_provider:t}=e;return{escrowProvider:t||QC.None}},$W=e=>{let{measurements:t,portal_flavour:i,url_prefix_items:n,transparency_law_translation_keys:s,urls:r,user_country:a,stripe_api_key:o,business_account_informational_links_visible:l,payments:c,newsletter_subscription_type:d,phone_number_prefix:u,multitier_bundle_discount_config:m,featured_collection_discounts:p,registration_real_name_required:g,portal:h,cookie_consent_version:x,websocket_url:f,number_of_images_per_item:y,crm:v,welcome_images:_}=e;return{measurements:t,portalFlavour:i,urlPrefixItems:n,transparencyLawKeys:{buyerRights:s.buyer_rights,professionalSeller:s.professional_seller},urls:{impressum:r.impressum,buyerProtection:r.buyer_protection,ourPlatform:r.our_platform,relevancyDescription:r.relevancy_description,feedbackDescription:r.feedback_description,buyerRights:r.buyer_rights,civilCode:r.civil_code,lawOfObligations:r.law_of_obligations,professionalSeller:r.professional_seller,onlineComplaints:r.online_complaints},userCountry:a,stripeApiKey:o,businessAccountInformationalLinksVisible:l,payments:QW(c),newsletterSubscriptionType:d,phoneNumberPrefix:u,bundleDiscountsConfiguration:st(m),featuredCollectionDiscounts:p,registrationRealNameRequired:g,portal:h,cookieConsentVersion:x,websocketUrl:f,numberOfImagesPerItem:y,crm:{brazeConfig:v.braze_config&&{sdkEndpoint:v.braze_config.sdk_endpoint,sdkKey:v.braze_config.sdk_key,apiKey:v.braze_config.api_key,safariWebsitePushId:v.braze_config.safari_push_id}},welcomeImages:{phone:_.web.phone,tabletsUp:_.web.tablets_up,wide:_.web.wide}}};function*eX(){const e=yield*(0,oj.RE)(Fe.q0f);if("errors"in e)return void(yield(0,oj.gz)(MZ.fetchSystemConfigurationFailure()));const t=yield*(0,oj.RE)($W,e.system_configuration);yield(0,oj.gz)(MZ.fetchSystemConfigurationSuccess({systemConfiguration:t}))}function*tX(){yield(0,oj.A7)(MZ.fetchSystemConfigurationRequest,eX)}const iX=e=>{let{percent:t,note:i}=e;return{percent:t,note:i}},nX=e=>{let{pickup_point_code:t,carrier_logo_url:i,carrier_name:n,price:s,pickup_point_name:r,pickup_point_address:a,value_proposition:o,discount:l,price_before_discount:c,lowest_price_in_30_days:d}=e;return{pickupPointCode:t,carrierLogoUrl:i,carrierName:n,price:Va(s),pickupPointName:r,pickupPointAddress:a,valueProposition:o,discount:l&&iX(l),priceBeforeDiscount:c&&Va(c),lowestPriceIn30Days:d&&Va(d)}},sX=e=>{let{code:t,title:i,subtitle:n}=e;return{code:t,title:i,subtitle:n}},rX=e=>{let{photo_url:t,user_address:i,phone_number:n,phone_number_requirement:s,explanation_note:r,payer_selection:a,pickup_point_details:o,package_type_id:l}=e;return{photoUrl:t,userAddress:i&&(0,V.X)(i),phoneNumber:n,phoneNumberRequirement:s,explanationNote:r,payerSelection:a&&(c=a,c.map(sX)),pickupPointDetails:o&&nX(o),packageTypeId:l};var c},aX=e=>{let{name:t,image_url:i}=e;return{name:t,imageUrl:i}},oX=e=>e.map(aX),lX=e=>({afterConversionPrice:Va(e.after_conversion_price),beforeConversionPrice:Va(e.before_conversion_price)}),cX=e=>{return{itemPrice:e.item_price&&lX(null==e?void 0:e.item_price),factualShipping:e.factual_shipping&&(n=null==e?void 0:e.factual_shipping,{method:n.method,afterConversionPrice:Va(n.after_conversion_price),beforeConversionPrice:Va(n.before_conversion_price)}),returnShipping:e.return_shipping&&lX(null==e?void 0:e.return_shipping),buyerProtectionFee:e.buyer_protection_fee&&Va(null==e?void 0:e.buyer_protection_fee),exchange:(i=e.exchange,{baseRate:Va(i.base_rate),roundedRate:Va(i.rounded_rate)}),markup:(t=e.markup,{rate:t.rate,provider:t.provider})};var t,i,n},dX=e=>({id:e.id,totalAmount:e.total_amount,payableAmount:e.payable_amount,currency:e.currency});function*uX(e){let{payload:{transactionId:t}}=e;const i=yield*(0,oj.RE)(Fe.JHf,t);if("errors"in i){var n,s;yield(0,aj.gz)(Ey.getReturnShipmentFailure({error:(null==i||null===(n=i.errors)||void 0===n||null===(s=n[0])||void 0===s?void 0:s.value)||null}))}else{const e=rX(i.request_return_details);yield(0,aj.gz)(Ey.getReturnShipmentSuccess(e))}}function*mX(e){let{payload:{transactionId:t}}=e;const i=yield*(0,oj.RE)(Fe.R8n,t);if("errors"in i){var n,s;yield(0,aj.gz)(Ey.getShipmentItemsFailure({error:(null==i||null===(n=i.errors)||void 0===n||null===(s=n[0])||void 0===s?void 0:s.value)||null}))}else{const e=oX(i.items);yield(0,aj.gz)(Ey.getShipmentItemsSuccess(e))}}function*pX(e){let{payload:{transactionId:t}}=e;const i=yield*(0,oj.RE)(Fe.cY0,t);if("errors"in i){var n,s;yield(0,aj.gz)(Ey.getReturnShippingOptionsFailure({error:(null==i||null===(n=i.errors)||void 0===n||null===(s=n[0])||void 0===s?void 0:s.value)||null}))}else{const e=CP(i.return_shipping_options),t=i.currency_conversion&&cX(i.currency_conversion);yield(0,aj.gz)(Ey.getReturnShippingOptionsSuccess({returnShipment:e,currencyConversion:t}))}}function*gX(e){let{payload:{transactionId:t,returnShippingOption:i}}=e;const n=yield*(0,oj.RE)(Fe.Piy,{transactionId:t,returnShippingOption:i});var s,r;"errors"in n?yield(0,aj.gz)(Ey.createCustomReturnShipmentFailure({error:(null==n||null===(s=n.errors)||void 0===s||null===(r=s[0])||void 0===r?void 0:r.value)||null})):yield(0,aj.gz)(Ey.createCustomReturnShipmentSuccess())}function*hX(e){let{payload:{transactionId:t,pickupPointCode:i,packageTypeId:n,addressId:s}}=e;const r=yield*(0,oj.RE)(Fe.md9,{transactionId:t,pickupPointCode:i,packageTypeId:n,addressId:s});if("errors"in r){var a,o;yield(0,aj.gz)(Ey.prepareReturnLabelOrderFailure({error:(null==r||null===(a=r.errors)||void 0===a||null===(o=a[0])||void 0===o?void 0:o.value)||null}))}else{const e=dX(r.return_label_order),t=r.return_label_order.currency_conversion&&cX(r.return_label_order.currency_conversion);yield(0,aj.gz)(Ey.prepareReturnLabelOrderSuccess({returnShipmentOrder:e,currencyConversion:t}))}}function*xX(e){let{payload:{orderId:t}}=e;const i=yield*(0,oj.RE)(Fe.M0K,t);if("errors"in i)return void(yield(0,aj.gz)(Ey.getReturnLabelOrderFailure()));const n=dX(i.return_label_order);yield(0,aj.gz)(Ey.getReturnLabelOrderSuccess({returnShipmentOrder:n}))}function*fX(){yield(0,aj.ib)(Ey.getReturnShipmentRequest,uX),yield(0,aj.ib)(Ey.getShipmentItemsRequest,mX),yield(0,aj.ib)(Ey.getReturnShippingOptionsRequest,pX),yield(0,aj.ib)(Ey.createCustomReturnShipmentRequest,gX),yield(0,aj.ib)(Ey.prepareReturnLabelOrderRequest,hX),yield(0,aj.ib)(Ey.getReturnLabelOrderRequest,xX)}const yX=e=>({itemId:e.item_id,total:Va(e.total),payable:Va(e.payable)}),vX=e=>({id:e.id,durationDays:e.duration_days,total:Va(e.total),payable:Va(e.payable),items:e.items.map(yX),termsNote:e.terms_note}),_X=e=>({durationDays:e.duration_days,total:Va(e.total),payable:Va(e.payable),items:e.items.map(yX)}),bX=function(e){e instanceof Error&&(e.message="".concat("VasGallery",": ").concat(e.message),(0,ls.H)(e))},jX=e=>e[xO],SX=e=>jX(e).vasGalleryBanner.items,ZX=(0,B.P1)(Vn("vas_gallery_iteration1_v2"),(e=>({visible:e&&"off"!==e.variant,variant:null==e?void 0:e.variant}))),IX=e=>jX(e).selectedIds,CX=hl(IX,ko),kX=(0,B.P1)(CX,(e=>vo(e.filter((e=>e&&!("international_shipping_price"in e)))))),wX=e=>jX(e).vasGalleryPricing,PX=e=>(e=>jX(e).vasGalleryCheckout)(e).activeModal,zX=e=>jX(e).vasGalleryOrder,TX=bV(bX);function*FX(){const e=yield*(0,oj.Ys)(Vn("vas_gallery_iteration1_v2"));if(e&&"off"!==e.variant){const e=yield*(0,oj.Ys)(hr),t=(yield*(0,oj.Ys)(sa)).reduce(((t,i)=>{const n=Object.keys(e).find((e=>e.includes(i.type)));return{...t,...n&&{[n]:i.ids}}}),{}),i=yield*(0,oj.RE)(Fe.yYT,{...e,...t});if("errors"in i)return void(yield(0,oj.gz)(vO.fetchVasGalleryFailure()));const n=yield*(0,oj.$6)(i.items.map((e=>(0,oj.RE)(jo,e))));yield(0,oj.gz)(vO.fetchVasGallerySuccess({items:n}))}}function*NX(){const e=yield*(0,oj.Ys)(IX),t=yield*(0,oj.RE)(Fe.VcV,e);if("errors"in t)return void(yield(0,oj.gz)(vO.fetchVasGalleryPricingFailure()));const i=yield*(0,oj.RE)(_X,t.pricing);yield(0,oj.gz)(vO.fetchVasGalleryPricingSuccess({vasGalleryPricing:i}))}function*LX(){yield(0,oj.gz)(vO.postVasGalleryOrderRequest());const e=yield*(0,oj.Ys)(IX),t=yield*(0,oj.RE)(Fe.r7C,e);if("errors"in t)return void(yield(0,oj.gz)(vO.postVasGalleryOrderFailure()));const i=yield*(0,oj.RE)(vX,t.vas_gallery_order);yield(0,oj.gz)(vO.postVasGalleryOrderSuccess({vasGalleryOrder:i}))}function*EX(e){let{payload:{orderId:t}}=e;const i=yield*(0,oj.RE)(Fe.$Ek,t);if("errors"in i)return void(yield(0,oj.gz)(vO.getVasGalleryOrderFailure()));const n=yield*(0,oj.RE)(vX,i.vas_gallery_order);yield(0,oj.gz)(vO.getVasGalleryOrderSuccess({vasGalleryOrder:n}))}function*OX(){yield*(0,oj.Fm)(vO.startCheckout,TX(LX)),yield*(0,oj.Fm)([vO.fetchVasGalleryRequest,hF.removeFilter,hF.removeFilters,hF.toggleBrandFilterOption,hF.toggleSizeFilterOption,hF.sizeFilterSet,hF.catalogFilterSet,hF.setQuery,hF.setSelectedDynamicFilter,hF.setSelectedDynamicFilters,hF.removeSelectedDynamicFilterId,hF.removeSelectedDynamicFilter,hF.removeSelectedDynamicFilters],TX(FX)),yield*(0,oj.Fm)(vO.getVasGalleryOrderRequest,EX),yield*(0,oj.Fm)(vO.fetchVasGalleryPricingRequest,TX(NX))}const RX=e=>({isSticky:e.is_sticky}),DX=e=>{return e.config.kind===li.Direct?{kind:(t=e.config).kind,shape:t.shape,page:t.page,options:RX(t.options),segmentIds:t.segment_ids,code:t.code,mediation:t.mediation}:(e=>({kind:e.kind,shape:e.shape,page:e.page,dfpCode:e.dfp_code,dfpAccountId:e.dfp_account_id,options:RX(e.options),sizes:e.sizes,bids:e.bids,mediation:e.mediation}))(e.config);var t},AX=e=>e.map(DX);function*MX(){const e=yield*(0,oj.Ys)(Ht),t=yield*(0,oj.Ys)(Rt),i=xi[e];if(!i)return;const n=yield*(0,oj.Ys)(Mt(i));if(t!==Ne.Idle||n)return;yield*(0,oj.gz)(SL.setUiState({uiState:Ne.Pending}));const s=yield*(0,oj.RE)(Fe.o$z,{pageName:i});"object"!=typeof s||null===s||"errors"in s?yield*(0,oj.gz)(SL.setUiState({uiState:Ne.Failure})):(yield*(0,oj.gz)(SL.setAdsPlacements({placements:AX(s.placements)})),yield*(0,oj.gz)(SL.setUiState({uiState:Ne.Idle})))}function*UX(){if((yield*(0,oj.Ys)(Rt))!==Ne.Idle)return;yield*(0,oj.gz)(SL.setUiState({uiState:Ne.Pending}));const e=yield*(0,oj.RE)(Fe.b41);"object"!=typeof e||null===e||"errors"in e?yield*(0,oj.gz)(SL.setUiState({uiState:Ne.Failure})):(yield*(0,oj.gz)(SL.setAdsSegmentIds({segmentIds:e.segments})),yield*(0,oj.gz)(SL.setUiState({uiState:Ne.Idle})))}function*BX(){yield(0,aj.ib)(jT,MX),yield(0,aj.ib)(ST,UX)}const qX=(0,ad.PH)("".concat(uO,"/continueFormSubmit")),VX=e=>e[uO],HX=e=>VX(e).captchaUuid,GX=e=>VX(e).failedFilenames,WX=e=>VX(e).savedFiles,XX=e=>VX(e).uploadUiState,YX=e=>VX(e).filesToRetry,KX=e=>VX(e).formData,JX=e=>VX(e).formUiState,QX=e=>VX(e).fieldErrors;function*$X(e){const t=yield*(0,oj.Ys)(HX),i=yield*(0,oj.RE)(Fe.m6G,e,t);return i.status===pm.o.Forbidden?(yield(0,aj.gz)(gO.addFileToRetry({file:e})),null):i.code===pm.Q.InvalidCaptchaToken?(yield(0,aj.gz)(gO.addFileToRetry({file:e})),yield(0,aj.gz)(gO.resetCaptchaUuid()),null):"errors"in i?(yield(0,aj.gz)(gO.addFailedFilename({filename:e.name})),null):{id:i.attachment.temp_uuid,fileName:e.name}}function*eY(e){let{payload:t}=e;const i=(yield*(0,oj.$6)(t.files.map($X))).filter((e=>!!e));yield(0,aj.gz)(gO.uploadFilesSuccess({savedFiles:i}))}function*tY(e){let{payload:t}=e;const i=yield*(0,oj.Ys)(HX),n=yield*(0,oj.RE)(Fe._c_,t.formData,i);if(n.status!==pm.o.Forbidden)return n.code===pm.Q.InvalidCaptchaToken?(yield(0,aj.gz)(gO.setFormData({formData:t.formData})),void(yield(0,aj.gz)(gO.resetCaptchaUuid()))):void("errors"in n?yield(0,aj.gz)(gO.submitFormFailure({errors:n.errors})):yield(0,aj.gz)(gO.submitFormSuccess()));yield(0,aj.gz)(gO.setFormData({formData:t.formData}))}function*iY(){const e=yield*(0,oj.Ys)(YX);if(e.length)return void(yield(0,aj.gz)(gO.uploadFilesRequest({files:e})));const t=yield*(0,oj.Ys)(KX);t&&(yield(0,aj.gz)(gO.submitFormRequest({formData:t})))}function*nY(){yield(0,aj.ib)(gO.uploadFilesRequest,eY),yield(0,aj.ib)(gO.submitFormRequest,tY),yield(0,aj.ib)([gO.setCaptchaUuid,qX],iY)}const sY=e=>({url:e.url}),rY=e=>({action:e.action,isPrimary:e.is_primary,tip:e.tip,button:e.button,confirmTitle:e.confirm_title,confirmButton:e.confirm_button,confirmation:e.confirmation}),aY=e=>{return{buyerId:e.buyer_id,eligibleForReturnLabel:e.eligible_for_return_label,escalated:e.escalated,escalation:(n=e.escalation,{tip:n.tip,button:n.button,confirmTitle:n.confirm_title,confirmButton:n.confirm_button,confirmation:n.confirmation,englishAllowedVisible:n.english_allowed_visible,close:n.close}),id:e.id,message:e.message,transactionId:e.transaction_id,sellerId:e.seller_id,photos:(i=e.photos,i.map(sY)),resolutions:e.resolutions.map(rY),faqEntry:jA(e.faq_entry),user:(t=e.user,{id:t.id,login:t.login}),returnable:e.returnable};var t,i,n};function*oY(e){let{payload:{complaintId:t}}=e;const i=yield*(0,oj.RE)(Fe.MVD,t.toString());var n,s;"errors"in i?yield(0,aj.gz)(Rf.getComplaintFailure({error:(null==i||null===(n=i.errors)||void 0===n||null===(s=n[0])||void 0===s?void 0:s.value)||null})):yield(0,aj.gz)(Rf.getComplaintSuccess(aY(i.complaint)))}function*lY(){yield(0,aj.ib)(Rf.getComplaintRequest,oY)}const cY=e=>{let{name:t,icon_url:i,location_map_note:n}=e;return{name:t,iconUrl:i,locationMapNote:n}},dY=e=>{let{status:t,text:i}=e;return{status:t,text:i}},uY=e=>{let{code:t,name:i,distance:n,distance_unit:s,description:r,drop_off_point_address:a,latitude:o,longitude:l,photo_url:c,point_type_icon_url:d,description_icon_url:u,opening_status:m,business_hours:p}=e;return{code:t,name:i,distance:n,distanceUnit:s,description:r,dropOffPointAddress:a,latitude:o,longitude:l,photoUrl:c,pointTypeIconUrl:d,descriptionIconUrl:u,openingStatus:dY(m),businessHours:null==p?void 0:p.map(Ej)}},mY=e=>{let{suggested_drop_off_point_code:t,carrier:i,drop_off_points:n}=e;return{suggestedDropOffPointCode:t,carrier:cY(i),dropOffPoints:n.map(uY)}};function*pY(){const e=yield*(0,oj.Ys)(re),t=yield*(0,oj.Ys)(qy),i=(null==t?void 0:t.countryId)||e;if(!i)return;const n=yield*(0,oj.RE)(Fe.YQH,i);if("errors"in n)return;const s=MS(n.country_bounds);yield(0,aj.gz)(V_.fetchCountryBoundsSuccess({countryBounds:s}))}function*gY(e){let{payload:t}=e;const i=yield*(0,oj.Ys)(qy),n=yield*(0,oj.Ys)(ee),s=yield*(0,oj.Ys)(Vy),r=(null==i?void 0:i.countryIsoCode)||n;let a,o,l;const{coordinates:c,dropOffPointSource:d}=t;if(c)a=c.latitude,o=c.longitude;else if(s){const e=yield*(0,oj.RE)(qb,s);a=null==e?void 0:e.geometry.location.lat(),o=null==e?void 0:e.geometry.location.lng(),l=U_.UserAddress}yield(0,aj.gz)(kb({countryCode:r,longitude:o,latitude:a,dropOffPointSource:l||d}))}function*hY(e){var t,i;let{payload:n}=e;const s=yield*(0,oj.Ys)(Hu),r=yield*(0,oj.Ys)(im);if(!s)return;const a=yield*(0,oj.RE)(Fe.rbY,{shipmentId:s,labelTypeId:r,...n});if("errors"in a||null===(t=a.nearby_drop_off_points)||void 0===t||!t.drop_off_points.length||null===(i=a.nearby_drop_off_points)||void 0===i||!i.suggested_drop_off_point_code)return void(yield(0,aj.gz)(V_.fetchNearbyDropOffPointFailure()));const o=mY(a.nearby_drop_off_points),{dropOffPoints:l,suggestedDropOffPointCode:c,carrier:d}=o,u=l.find((e=>e.code===c)),{dropOffPointSource:m}=n;yield(0,aj.gz)(V_.setSelectedDropOffPoint({selectedDropOffPoint:u})),yield(0,aj.gz)(V_.fetchNearbyDropOffPointSuccess({suggestedDropOffPointCode:c,dropOffPoints:l,dropOffPointCarrier:d,dropOffPointSource:m}))}function*xY(){yield(0,aj.ib)(Cb,pY),yield(0,aj.ib)(kb,hY),yield(0,aj.ib)(V_.fetchNearbyDropOffPointsRequest,gY)}function*fY(){const e=yield*(0,oj.RE)(Fe.rG$);if("errors"in e)yield(0,aj.gz)(ib.fetchDefaultShippingAddressFailure());else{if(e.user_address){const t=(0,V.X)(e.user_address);yield(0,aj.gz)(ib.fetchDefaultShippingAddressSuccess({address:t}))}e.user_address||(yield(0,aj.gz)(ib.fetchDefaultShippingAddressSuccess({address:null})))}}function*yY(){yield(0,aj.ib)(ib.fetchDefaultShippingAddressRequest,fY)}let vY;const _Y=()=>e=>t=>{try{return e(t)}catch(e){throw(0,ls.H)(e,{extra:"string"==typeof t.type?t.type:"unknown"}),e}},bY=(e,t)=>{(0,ls.H)(e,{extra:"redux-saga: ".concat(t.sagaStack)})};const jY="".concat(Be.Fv,"/assets/logo/square/transparent.png"),SY="app_banner",ZY=5*jt.Nf,IY=[$t.NewsFeed,$t.UserProfile,$t.ForumPosts,$t.ForumTopic,$t.Catalog],CY=e=>{let{userAgent:t=(0,ls.ij)(),isHeader:i}=e;const{track:n}=vi(),s=U("app_banner"),r=(0,p.v9)(X),a=(0,p.v9)(Ht),o=(0,p.v9)(Vn("web_2_app_conversion_v1")),l=(0,p.v9)(we),[c,d]=(0,m.useState)(!1);if((0,m.useEffect)((()=>{o&&n(bn({...l,...o}))}),[o,l,n]),St.X)return null;if(c)return null;if(r)return null;if(is(SY))return null;if(!(as(t)||os(t)&&(()=>{const e=t.toLowerCase().match(/android\s([0-9.]*)/i);return e?parseInt(e[1],10):7})()>=7))return null;if(!IY.includes(a))return null;if("on"===(null==o?void 0:o.variant)&&!i&&a===$t.NewsFeed)return null;function u(e){n(Ri({target:e,targetDetails:rs(t)}))}function g(){u(qm.InstallAppBanner)}function f(){d(!0),u(qm.CancelInstallAppBanner),es(SY,"hidden",Pt({seconds:ZY}))}function y(){return(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsx)(ic.I,{size:ic.I.Size.Medium,text:s("close_cta"),onClick:f,testId:"app-banner-close-button"}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(ic.I,{theme:"primary",styling:ic.I.Styling.Filled,size:ic.I.Size.Medium,text:s("cta"),onClick:g,url:"https://4uwb.adj.st/?adjust_t=l2fpdc8_rnxf4nj&adjust_campaign=UX_SmartBanner&adjust_engagement_type=fallback_click",testId:"app-banner-open-button"})]})}return(0,z.jsx)("div",{className:"app-banner",children:(0,z.jsx)("div",{className:i&&"on"===(null==o?void 0:o.variant)?"sticky-header":"sticky-footer","data-testid":"app-banner-wrapper",children:(0,z.jsxs)("div",{className:"u-line-height-default",children:[!i&&(0,z.jsx)(h.Z,{}),(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,prefix:(0,z.jsx)(Kl.U,{size:Kl.U.Size.Large,src:jY}),suffix:(0,z.jsx)("div",{className:"u-tablets-only",children:y()}),title:(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:s("title"),truncate:!0}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsxs)("div",{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XSmall}),(0,z.jsx)(Ox.Z,{value:4.5})]})]}),body:(0,z.jsx)(xt.Z,{text:s("description"),truncate:!0}),fullWidthTitle:!0}),(0,z.jsxs)("div",{className:"u-phones-only",children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,children:y()})]})]}),i&&(0,z.jsx)(h.Z,{})]})})})};var kY;!function(e){e.Android="android",e.Ios="ios"}(kY||(kY={}));const wY={[kY.Android]:"https://".concat(Xt.Lp.Fr,"/l/app-android-landing"),[kY.Ios]:"https://".concat(Xt.Lp.Fr,"/l/app-ios-landing")},PY={[kY.Android]:qm.DownloadAndroidApp,[kY.Ios]:qm.DownloadIosApp},zY=e=>{let{platform:t}=e;const{track:i}=vi(),n=U("app_store_buttons"),s=(0,p.v9)(Nc),r="".concat(Be.Fv,"/assets/app-badges/").concat(t),a=s.split("-")[0];return(0,z.jsx)("a",{href:wY[t],target:"_blank",rel:"noopener noreferrer",onClick:function(){i(Ri({target:PY[t]}))},children:(0,z.jsx)(Kl.U,{src:"".concat(r,"/").concat(a,".svg"),fallbackSrc:"".concat(r,"/default.svg"),alt:n("a11y.".concat(t))})})};zY.Platform=kY;const TY=zY,FY=()=>(0,z.jsxs)("div",{children:[(0,z.jsx)(TY,{platform:TY.Platform.Ios}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Large}),(0,z.jsx)(TY,{platform:TY.Platform.Android}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Large})]}),NY=e=>e[kL],LY=e=>NY(e).referrerId,EY=e=>NY(e).isRealNameRequired,OY=e=>NY(e).isRandomUserSignupEnabled,RY=e=>NY(e).newsletterSubscription,DY=e=>NY(e).isAuthModalOpen||!1,AY=e=>NY(e).authView||(is("last_user_id")?wL.SelectTypeLogin:wL.SelectTypeRegister),MY=e=>AY(e)===wL.SelectTypeLogin,UY=e=>NY(e).isBusinessRegistrationLinkVisible,BY=e=>NY(e).externalRegisterData,qY=e=>NY(e).isFacebookIsInitialized||!1,VY=e=>NY(e).isBusiness||!1,HY=e=>NY(e).isAuthPageOpen,GY=/^[/\\]([^/\\]|$)/,WY=/^(?:https?:)?[/\\]{2,}([^/\\]+)/,XY=e=>{const{host:t,relativeUrl:i,urlQuery:n,searchParams:s}=xc(),{ref_url:r}=s;return((e,t)=>{var i;if("string"!=typeof e)return!1;if(new RegExp(GY).test(e))return!0;const n=null===(i=e.match(WY))||void 0===i?void 0:i[1];return!(!t||!n||n!==t&&"old.".concat(n)!==t)})(r,t)?r:null!=e?e:"".concat(i).concat(n)},YY=e=>{const t=(0,p.v9)(VY),i=XY(e);return t?Me.suX:i};let KY,JY,QY,$Y,eK,tK;!function(e){e.Password="password",e.Assertion="assertion"}(KY||(KY={})),function(e){e.PublicUser="public user",e.PublicUserAdmin="public user admin"}(JY||(JY={})),function(e){e.Bearer="bearer"}(QY||(QY={})),function(e){e.Facebook="facebook",e.Google="google",e.Apple="apple",e.CrossPortal="cross_portal"}($Y||($Y={})),function(e){e.Connected="connected"}(eK||(eK={})),function(e){e.Success="AppleIDSignInOnSuccess",e.Failure="AppleIDSignInOnFailure"}(tK||(tK={}));const iK="email";var nK=i(98353),sK=i(33952),rK=i(12931);const aK=new ak.Z({},[nK.jN,nK.ud,nK.Ch,e=>e.interceptors.response.use((async e=>{var t;const i=e.data.access_token||(null===(t=e.data.auth_token)||void 0===t?void 0:t.access_token);if(!i)return Promise.reject(new Error("Token was not provided"));try{const t=await ds().get("/member/general/session_from_token",{headers:{Authorization:"Bearer ".concat(i)}});return t.data&&"redirect_to"in t.data&&t.data.redirect_to?((0,ls.ru)(t.data.redirect_to),await new Promise(v.noop)):e}catch(e){return e.code=pm.Q.SessionFromTokenError,Promise.reject(e)}}),(e=>Promise.reject(e)))]),oK=ds().create();async function lK(){try{const e=await oK.post("/member/general/logout");return"".concat(e.status).startsWith("2")}catch{return!1}}function cK(e){return aK.post("/oauth/token",{client_id:"web",scope:"user",...(0,rK.tP)(e)})}nK.jN(oK);const dK=e=>{let{email:t,idToken:i}=e;const n=U("user.wrong_email_in_registration"),s=XY(Me.mYc),r=YY(),{register:a,formState:{errors:o},setError:l,handleSubmit:c}=(0,th.cI)(),d=fh(o),[u,p]=(0,m.useState)(!1),g=(e,t)=>(0,z.jsx)("a",{href:e,children:(0,z.jsx)(xt.Z,{bold:!0,text:t,clickable:!0})}),h=u?"eye-denied":"eye";return(0,z.jsxs)("form",{onSubmit:c((async e=>{let{password:n}=e;if(!t)return;const a=await $M(),o=await cK({grantType:KY.Password,username:t,controlCode:i,password:n,fingerprint:a});o.code===pm.Q.Required2FA&&"payload"in o&&o.payload?(0,ls.ru)((0,Me.Le8)({refUrl:r,authProps:o.payload})):"errors"in o?l("password",{type:"manual",message:o.message}):(0,ls.ru)(s)})),children:[(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(xt.Z,{text:n("heading",{registration_email:t}),alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent,type:xt.Z.Type.Heading}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(wx,{id:"user.wrong_email_in_registration.error_explanation",values:{registration_email:(0,z.jsx)(xt.Z,{text:t,bold:!0})}})]}),(0,z.jsx)(fb.M,{...a("password"),placeholder:n("placeholder"),validation:hh(d("password")),type:u?fb.M.Type.Text:fb.M.Type.Password,suffix:(0,z.jsx)(ic.I,{size:ic.I.Size.Medium,deprecatedIcon:(0,z.jsx)(ht.Z,{name:h,color:ht.Z.Color.GreyscaleLevel3,size:ht.Z.Size.Small}),styling:ic.I.Styling.Flat,onClick:()=>{p((e=>!e))}})}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)("div",{className:"u-text-center",children:(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),children:[(0,z.jsx)(ic.I,{testId:"login-button",type:ic.I.Type.Submit,text:n("button",{registration_email:t}),styling:ic.I.Styling.Filled}),(e=>g(e,n("reset_password")))(Me.Ife),(0,z.jsx)(_p,{type:bp.CantLogin,accessChannel:Be.Si.ProductLink,render:e=>(e=>g(e,n("contact_us")))(e)})]})})}),(0,z.jsx)(x.Z,{})]})};function uK(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class mK extends m.Component{constructor(){var e;super(...arguments),e=this,uK(this,"state",{error:!1,isLoading:!1,isSettingsModalOpen:!1,isGod:!0}),uK(this,"setError",(function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e.setState({error:t})})),uK(this,"setIsLoading",(function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.setState({isLoading:t})})),uK(this,"toggleModal",(()=>{this.setState((e=>({isSettingsModalOpen:!e.isSettingsModalOpen})))})),uK(this,"generateUser",(async()=>{const{isLoading:e,isGod:t}=this.state;if(!e){this.setError(),this.setIsLoading();try{await function(e){const{isGod:t}=e;return aK.post("".concat(sK.Lt,"/generate_random_user"),{is_god:t})}({isGod:t}),(0,ls.ru)(Me.mYc)}catch(e){this.setError(!0)}finally{this.setIsLoading(!1)}}})),uK(this,"toggleIsGod",(()=>{this.setState((e=>({isGod:!e.isGod})))})),uK(this,"renderModal",(()=>{const{isSettingsModalOpen:e,isLoading:t,isGod:i}=this.state;return(0,z.jsx)(cp.Z,{show:e,children:(0,z.jsxs)(kp,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent,text:"Generate user settings"})}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,title:"Assign god role?",suffix:(0,z.jsx)(BZ.F,{name:"is_god",checked:i,onClick:this.toggleIsGod})}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,children:(0,z.jsx)(ic.I,{text:"Save",styling:ic.I.Styling.Filled,isLoading:t,onClick:this.toggleModal})})]})})}))}render(){const{isLoading:e,error:t}=this.state;return(0,z.jsxs)(z.Fragment,{children:[t&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{theme:"warning",type:xt.Z.Type.Subtitle,alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent,text:"Server error"}),(0,z.jsx)(x.Z,{})]}),(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsx)(ic.I,{text:"Generate random user",isLoading:e,onClick:this.generateUser}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(ic.I,{deprecatedIcon:(0,z.jsx)(ht.Z,{name:"settings",color:ht.Z.Color.Primary}),inline:!0,onClick:this.toggleModal})]}),this.renderModal()]})}}const pK=mK,gK={[Db.Checkout]:Ab.Checkout,[Db.AddListing]:Ab.AddListing};const hK=function(){const{host:e,relativeUrl:t,searchParams:i}=xc(),n=(0,p.v9)(Ll),s=(0,p.v9)(Wt("web_ga4_analytics")),r=(0,p.v9)(Wt("web_gtm_ec_field")),{anonymousId:a,language:o,screenName:l}=n,c="string"==typeof i.search_text?i.search_text:"",d=function(e){return(null==e?void 0:e.split("/").splice(1,2).join("/"))||""}(n.currentCatalogUrl),u=String(n.userId||""),g=n.authStatus?Mb.Logged:Mb.NotLogged,h=function(e,t,i,n){return t?Db.SearchResult:function(e){return e===$t.Item}(n)?Db.ProductDisplay:i?Db.ProductListings:e.endsWith("/checkout")?Db.Checkout:e.endsWith("/member/items/favourite_list")?Db.Favourites:e.endsWith("/items/new")?Db.AddListing:Db.Others}(t,c,d,l),x=function(e){return gK[e]||""}(h);return{googleTagManagerTrack:(0,m.useCallback)(((e,t)=>Bb(e,t,r)),[r]),googleAnalyticsTrack:(0,m.useCallback)((t=>{let{event:i=Ob.pageLoad,customTagObject:n}=t;const r=(0,_i.Mr)({anonymousId:a,language:o,siteSearchString:c,loginStatus:g,userId:u,pageCategory:d,pageType:h,formName:x,...n,domain:e});s&&Bb(i,r)}),[a,x,e,s,o,g,d,h,c,u])}},xK=()=>{const e=(0,p.v9)(zb),t=(0,p.v9)(qY),i=(0,p.I0)();return(0,m.useEffect)((()=>{e&&(t||async function(){await Hb({id:"facebook-sdk",isAsync:!0,isDefer:!0,crossOrigin:"anonymous",src:"https://connect.facebook.net/en_US/sdk.js"}),window.fbAsyncInit=()=>{FB.init({appId:e,cookie:!0,xfbml:!0,version:"v13.0"}),i(NL.setIsFacebookIsInitialized())}}())}),[e,i,t]),{isInitialized:t,isEnabled:!!e}},fK=e=>{let{text:t,isLoading:i,onClick:n=v.noop,onSuccess:s,onFailure:r=v.noop}=e;const[a,o]=(0,m.useState)(!1),{isInitialized:l,isEnabled:c}=xK();return c?(0,z.jsx)(ic.I,{theme:"amplified",deprecatedIconName:"signup/facebook",onClick:()=>{n(),o(!0),FB.login((e=>{if(e.status!==eK.Connected)return r(),void o(!1);try{FB.api("/me",{fields:["email","birthday","gender","name","first_name","last_name"]},(t=>{s(e.authResponse.accessToken,t)}))}catch(i){var t;null===(t=window.apphealth)||void 0===t||t.captureError(i),s(e.authResponse.accessToken,{})}finally{o(!1)}}),{scope:iK})},disabled:!l||i||a,isLoading:i||a,children:t}):null},yK=()=>{const e=(0,p.v9)(Wt("assertion_captcha_uuid_validate")),t=(0,m.useCallback)((async(t,i)=>{const n=await $M(),s=async e=>cK({grantType:KY.Assertion,assertion:i,provider:t,fingerprint:n,uuid:e});if(!e)return s();const r=await(0,Fe.Xkj)({entityType:"login",payload:{username:""}});return"errors"in r?Promise.reject(r):s(null==r?void 0:r.uuid)}),[e]);return t},vK=e=>{let{setError:t}=e;const{track:i}=vi(),n=U(),s=(0,p.I0)(),{googleTagManagerTrack:r}=hK(),a=YY(),o=yK(),[l,c]=(0,m.useState)(!1),[d,u]=(0,m.useState)(""),[g,h]=(0,m.useState)();function x(e){i(cn({type:"facebook",error:e}))}async function f(e,n){u(e),h(n),c(!0);const l=await o($Y.Facebook,e);if("errors"in l){var d;if(l.code===pm.Q.NotFound&&n.email){const t=n.name||[n.first_name,n.last_name].filter(Boolean).join(" ")||void 0;s(NL.setExternalRegisterData({view:PL.FacebookRegister,data:{idToken:e,realName:t,email:n.email}}))}else l.code===pm.Q.LoginWithoutEmail&&null!==(d=l.payload)&&void 0!==d&&d.control_code?(m=l.payload.control_code,p=n.email,s(NL.setExternalRegisterData({view:PL.PasswordVerification,data:{idToken:m,email:p}}))):l.code===pm.Q.Required2FA&&l.payload?(0,ls.ru)((0,Me.Le8)({refUrl:a,authProps:l.payload})):(n.email?x(l.message):x("FB API didn't return an email"),c(!1),t(l.message));return}var m,p;const g=await(0,Fe.tse)(),f="errors"in g?void 0:g.user.id;r(Ob.Login,{auth_type:"facebook",user_email:n.email}),i(ln({type:"facebook",userId:f})),(0,ls.ru)(a)}return Um((()=>{d&&g&&(t(void 0),f(d,g))})),(0,z.jsx)(fK,{text:n("auth.select_type.actions.facebook"),isLoading:l,onClick:function(){i(Ri({target:qm.LoginWithFacebook}))},onSuccess:f,onFailure:function(){x("User closed screen or did not provide permissions")}})},_K=e=>{let{onSuccess:t,onFailure:i}=e;const{relativeUrl:n,searchParams:s}=xc(),r=YY(n),{track:a}=vi(),o=U("auth.select_type"),[l,c]=(0,m.useState)(!1),d=(0,ys.Iq)(Me.TcE,{redirect_uri:r}),u=(0,ys.pN)(s.code),p=(0,ys.pN)(s.state),g=Xb(p);return(0,m.useEffect)((()=>{u&&p&&!l&&(c(!0),(async()=>{const e=await(0,Fe.IcB)({code:u,state:p});if("errors"in e)return void i();const{id_token:n}=e,{email:s,name:r}=(0,Vb.t)(n);t({token:n,fields:{name:r,email:s},redirectUrl:g})})())}),[u,l,g,p,t,i]),(0,z.jsx)(ic.I,{theme:"amplified",deprecatedIconName:"signup/google",onClick:()=>{c(!0),a(Ri({target:qm.LoginWithGoogle}))},url:d,isLoading:l,text:o("actions.google")})},bK=e=>{let{setError:t}=e;const{track:i}=vi(),n=U("auth.select_type"),s=(0,p.I0)(),{googleTagManagerTrack:r}=hK(),[a,o]=(0,m.useState)(""),[l,c]=(0,m.useState)(),[d,u]=(0,m.useState)(),g=YY(),h=yK(),x=async e=>{let{token:n,fields:{email:a,name:l},redirectUrl:d}=e;o(n),c({email:a,name:l}),u(d);const m=await h($Y.Google,n);var p;if("errors"in m)return void(m.code===pm.Q.NotFound?s(NL.setExternalRegisterData({view:PL.GoogleRegister,data:{idToken:n,realName:l,email:a}})):m.code===pm.Q.LoginWithoutEmail&&null!==(p=m.payload)&&void 0!==p&&p.control_code?function(e,t){s(NL.setExternalRegisterData({view:PL.PasswordVerification,data:{idToken:e,email:t}}))}(m.payload.control_code,a):m.code===pm.Q.Required2FA&&m.payload?(0,ls.ru)((0,Me.Le8)({refUrl:d||g,authProps:m.payload})):t(m.message));const x=await(0,Fe.tse)(),f="errors"in x?void 0:x.user.id;r(Ob.Login,{auth_type:"google",user_email:a}),i(ln({type:"google",userId:f})),(0,ls.ru)(d||g)};Um((()=>{a&&l&&(t(void 0),x({token:a,fields:l,redirectUrl:d}))}));const f=(0,m.useCallback)((()=>{t(n("social_login_error")),i(cn({type:"google",error:"User closed screen or did not provide permissions"}))}),[i,t,n]);return(0,z.jsx)(_K,{onSuccess:x,onFailure:f})};var jK=i(97513);const SK=e=>{let{text:t,isLoading:i,onClick:n=v.noop,onSuccess:s,onFailure:r=v.noop}=e;const[a,o]=(0,m.useState)(!1),[l,c]=(0,m.useState)(!1),d=(0,p.v9)(Tb),u=(0,m.useRef)(s);u.current=s;const g=(0,m.useRef)(r);g.current=r;const h=(0,m.useCallback)((e=>{const{detail:t}=e,{email:i,is_private_email:n=!1}=(0,Vb.t)(t.authorization.id_token),s=(0,jK.Uy)(t,(e=>{n||!i||e.user||(e.user={name:{firstName:"",lastName:""},email:i})}));u.current(s),o(!1)}),[]),x=(0,m.useCallback)((()=>{g.current(),o(!1)}),[]);return(0,m.useEffect)((()=>(document.addEventListener(tK.Success,h),document.addEventListener(tK.Failure,x),()=>{document.removeEventListener(tK.Success,h),document.removeEventListener(tK.Failure,x)})),[x,h]),(0,m.useEffect)((()=>{!async function(){d&&(await Hb({id:"apple-sdk",isAsync:!0,src:"https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js"}),(e=>{window.AppleID.auth.init({clientId:e,scope:"name email",redirectURI:window.location.origin,state:"init",usePopup:!0})})(d),c(!0))}()}),[d]),d?(0,z.jsx)(ic.I,{theme:"amplified",deprecatedIconName:"signup/apple",iconPosition:ic.I.IconPosition.Left,onClick:function(){var e;n(),o(!0),null===(e=window.AppleID)||void 0===e||e.auth.signIn()},disabled:!l||i||a,isLoading:i||a,text:t}):null},ZK=e=>{let{setError:t}=e;const{track:i}=vi(),n=U(),s=(0,p.I0)(),{googleTagManagerTrack:r}=hK(),[a,o]=(0,m.useState)(!1),[l,c]=(0,m.useState)(),d=YY(),u=yK();async function g(e){c(e),o(!0);const{authorization:{id_token:n},user:a}=e,l=await u($Y.Apple,n);var m,p,g;if("errors"in l)return void(l.code===pm.Q.NotFound||l.code===pm.Q.ValidationError?function(e,t){s(NL.setExternalRegisterData({view:PL.AppleRegister,data:{idToken:e,realName:(null==t?void 0:t.name)&&"".concat(t.name.firstName," ").concat(t.name.lastName),email:null==t?void 0:t.email}}))}(n,a):l.code===pm.Q.LoginWithoutEmail&&null!==(m=l.payload)&&void 0!==m&&m.control_code?(p=l.payload.control_code,g=null==a?void 0:a.email,s(NL.setExternalRegisterData({view:PL.PasswordVerification,data:{idToken:p,email:g}}))):l.code===pm.Q.Required2FA&&l.payload?(0,ls.ru)((0,Me.Le8)({refUrl:d,authProps:l.payload})):(t(l.message),o(!1)));const h=await(0,Fe.tse)(),x="errors"in h?void 0:h.user.id;r(Ob.Login,{auth_type:"apple",user_email:null==a?void 0:a.email}),i(ln({type:"apple",userId:x})),(0,ls.ru)(d)}return Um((()=>{l&&(t(void 0),g(l))})),(0,z.jsx)(SK,{text:n("auth.select_type.actions.apple"),isLoading:a,onClick:function(){i(Ri({target:qm.LoginWithApple}))},onSuccess:g,onFailure:function(){i(cn({type:"apple",error:"User closed screen or did not provide permissions"}))}})},IK=()=>{const e=(0,p.v9)(MY),t=(0,p.v9)(UY),i=U();return!t||e?null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)("div",{className:"u-ui-padding-horizontal-large u-ui-padding-vertical-x-large",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,alignment:xt.Z.Alignment.Center,text:i("auth.select_type.register.are_you_a_business"),width:xt.Z.Width.Parent,html:!0})})]})},CK=()=>{const e=(0,p.v9)(MY),t=(0,p.I0)(),i=e?"login":"register",n=U("auth.select_type.".concat(i)),{host:s}=xc();return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(xt.Z,{width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,children:[n("actions.proceed.title"),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)("span",{role:"button",onKeyDown:Vg,className:"u-cursor-pointer",tabIndex:0,onClick:function(){e?t(NL.setAuthView({authView:wL.EmailLogin})):function(){const e=(0,ys.E_)(s);e?(0,ls.ru)("".concat(e).concat(Me.jgR)):t(NL.setAuthView({authView:wL.EmailRegister}))}()},"data-testid":"auth-select-type--".concat(i,"-email"),children:(0,z.jsx)(xt.Z,{text:n("actions.proceed.link"),theme:"primary"})})]}),(0,z.jsx)(x.Z,{}),(0,z.jsxs)(xt.Z,{width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,children:[n("actions.switch.title"),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)("span",{role:"button",onClick:function(){t(NL.setAuthView({authView:e?wL.SelectTypeRegister:wL.SelectTypeLogin}))},onKeyDown:Vg,className:"u-cursor-pointer",tabIndex:0,"data-testid":"auth-select-type--".concat(i,"-switch"),children:(0,z.jsx)(xt.Z,{text:n("actions.switch.link"),theme:"primary"})})]})]})},kK=e=>{let{login:t,businessAccountName:i,isBusiness:n,isBody:s,isLoginForced:r,isBottomLoginHidden:a,isBadgeHidden:o,truncate:l}=e;const c=n&&!r&&i,d=c||t,u=U("business");return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center",children:[(0,z.jsx)(xt.Z,{text:d,type:s?xt.Z.Type.Body:xt.Z.Type.Heading,theme:"amplified",truncate:l,bold:!0,testId:"profile-username"}),!c||o?null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Regular}),(0,z.jsx)(oC.Z,{content:u("title"),testId:"profile-pro-badge"})]})]}),!c||a||r?null:(0,z.jsx)(xt.Z,{width:xt.Z.Width.Parent,text:"@".concat(t),type:xt.Z.Type.Subtitle,testId:"profile-business-name"})]})},wK=e=>{let{referrer:t,referrerModel:i}=e;const n=(0,p.v9)(MY),s=(0,p.v9)(VY),r=U("auth.select_type.".concat(n?"login":"register")),a=U("business.account"),o=U("user.feedback"),l=e=>{let{referrerId:t,login:i,photoUrl:n,feedbackReputation:s,feedbackCount:a,isBusiness:l,businessAccountName:c}=e;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center",children:(0,z.jsx)("div",{children:(0,z.jsx)(gt.Z,{clickable:!0,styling:gt.Z.Styling.Tight,prefix:(0,z.jsx)(Tp,{src:n,styling:Kl.U.Styling.Circle,size:Kl.U.Size.Large}),title:(0,z.jsx)(kK,{businessAccountName:c||void 0,login:i,isBusiness:l,isBody:!0,isBottomLoginHidden:!0,isBadgeHidden:!0}),url:(0,Me.G0B)(t),children:(0,z.jsx)(Ox.Z,{value:$e(s),text:o("reviews",{count:a},{count:a}),size:Ox.Z.Size.Regular,emptyStateText:o("no_reviews")})})})}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:r("referrer_title",{username:i}),type:xt.Z.Type.Heading,alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent})]})};var c,d;return t&&!n?l({referrerId:t.id,login:t.login,photoUrl:(null===(c=t.photo)||void 0===c?void 0:c.url)||null,feedbackReputation:t.feedback_reputation,feedbackCount:t.feedback_count,isBusiness:t.business,businessAccountName:(null===(d=t.business_account)||void 0===d?void 0:d.name)||null}):i&&!n?l(i):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{id:"auth_modal_title",text:s?a("title"):r("title"),type:xt.Z.Type.Heading,alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent}),s?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,children:a("subtitle")})]}):null]})},PK=()=>{const e=(0,p.v9)(LY),t=(0,p.v9)(OY),i=!(0,p.v9)(MY),n=(0,p.v9)(Wt("react_register_referrer_api")),{googleAnalyticsTrack:s}=hK(),{s:r}=xc().searchParams,[a,o]=(0,m.useState)(),[l,c]=(0,m.useState)(!1),[d,u]=(0,m.useState)(null),[g,h]=(0,m.useState)(),f=i&&e&&(null==d?void 0:d.id)!==e&&!n;(0,m.useEffect)((()=>{s(i?{event:Ob.modalView,customTagObject:{formName:Ab.Register,pageType:Db.Registration}}:{event:Ob.modalView,customTagObject:{formName:Ab.Login,pageType:Db.Login}})}),[i,s]),(0,m.useEffect)((()=>{f&&async function(){if(!e)return;const t=await(0,Fe.GAF)({id:e});"errors"in t?c(!0):u(t.user)}()}),[n,f,e]);const y=n&&i&&!g&&"referral"===r;return(0,m.useEffect)((()=>{y&&(async()=>{const e=await(0,Fe.anN)();!("errors"in e)&&e.referrer_id?h((e=>{let{referrer_id:t,login:i,photo_url:n,feedback_count:s,feedback_reputation:r,is_business:a,business_account_name:o}=e;return{referrerId:t,login:i,photoUrl:n,feedbackReputation:r,feedbackCount:s,isBusiness:a,businessAccountName:o}})(e)):c(!0)})()}),[y,e]),l||!f&&!y?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"u-ui-padding-horizontal-large u-ui-padding-bottom-x-large",children:[(0,z.jsx)(wK,{referrer:d,referrerModel:g}),(0,z.jsx)(x.Z,{}),a&&(0,z.jsx)(xt.Z,{text:a,theme:"warning",width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{}),children:[(0,z.jsx)(vK,{setError:o}),(0,z.jsx)(bK,{setError:o}),(0,z.jsx)(ZK,{setError:o}),t&&i&&(0,z.jsx)(pK,{})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(CK,{})]}),i&&(0,z.jsx)(IK,{})]}):(0,z.jsx)(Mp,{styling:Mp.Styling.Wide,size:Mp.Size.Large,testId:"select-type-loader"})},zK=e=>Pc[e]||"en",TK="6Lfr9LwZAAAAALlS5CqkzKrEfqKgfEwjz9E7asvq",FK="captcha-script",NK=e=>{let{onComplete:t,siteKey:i=TK}=e;const n=(0,m.useRef)(null),[s,r]=(0,m.useState)(!1),a=(0,p.v9)(ce);return(0,m.useEffect)((()=>(async function(){await Hb({id:FK,isAsync:!0,src:(0,ys.Iq)("https://www.google.com/recaptcha/api.js",{render:"explicit",hl:zK(a)})})}(),()=>(e=>{const t=document.getElementById(e);t&&document.head.removeChild(t)})(FK))),[a]),(0,m.useEffect)((()=>{let e;function a(e){t(e),grecaptcha.reset()}function o(){var e;if(s)return;const t=document.createElement("div");window.grecaptcha.render(t,{sitekey:i,callback:a}),null===(e=n.current)||void 0===e||e.appendChild(t),r(!0)}function l(){return window.grecaptcha&&"function"==typeof window.grecaptcha.render}return l()?o():e=setInterval((function(){l()&&(clearInterval(e),o())}),1e3),()=>clearInterval(e)}),[t,s,r,i]),(0,z.jsx)("div",{className:"u-flexbox u-flex-direction-column u-align-items-center",ref:n})},LK=e=>{let{onComplete:t}=e;const i=U("captcha"),{track:n}=vi();return(0,m.useEffect)((()=>{n(Wi({screen:$t.CaptchaPage}))}),[n]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:i("title"),type:xt.Z.Type.Heading,alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(xt.Z,{text:i("text"),alignment:xt.Z.Alignment.Center}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(NK,{onComplete:t})]})},EK=(0,m.forwardRef)(((e,t)=>{const[i,n]=(0,m.useState)(!1);return(0,z.jsx)(fb.M,{...e,ref:t,type:i?fb.M.Type.Text:fb.M.Type.Password,suffix:(0,z.jsx)("span",{onClick:function(e){e.preventDefault(),n((e=>!e))},className:"u-cursor-pointer","data-testid":"auth-password-eye-icon",children:(0,z.jsx)(ht.Z,{name:i?"eye":"eye-denied",size:ht.Z.Size.Small})})})})),OK=()=>{const{login:e}=xc().searchParams,t="string"==typeof e?e:void 0,i=(0,p.v9)(Wt("user_captcha_uuid_validate")),[n,s]=(0,m.useState)(!1),r=(0,p.I0)(),a=U("auth.email.login"),{register:o,handleSubmit:l}=(0,th.cI)({defaultValues:{username:t}}),{googleTagManagerTrack:c}=hK(),[d,u]=(0,m.useState)(""),[g,h]=(0,m.useState)(!1),[f,y]=(0,m.useState)(!1),[v,_]=(0,m.useState)(""),[b,j]=(0,m.useState)(),S=YY();async function Z(e,t){const n=await $M(),r={grantType:KY.Password,fingerprint:n,...e};i&&(r.uuid=t);const a=await cK(r);if(a.code===pm.Q.Required2FA&&"payload"in a&&a.payload)return void(0,ls.ru)((0,Me.Le8)({refUrl:S,authProps:a.payload}));if("errors"in a)return u(a.message),h(!1),y(!1),void s(!1);const o=await(0,Fe.tse)(),l="errors"in o?null:o.user;c(Ob.Login,{auth_type:"email",user_email:null==l?void 0:l.email}),(0,ls.ru)(S)}async function I(e){s(!0),u(""),j(e);const t=await(0,Fe.Xkj)({entityType:"login",payload:{username:e.username}});if(!("errors"in t))return t.verified?void Z(e,t.uuid):(_(t.uuid),void h(!0))}return Um((()=>{b&&I(b)})),g?(0,z.jsx)("div",{className:"u-ui-padding-large",children:f?(0,z.jsx)("div",{className:"u-ui-padding-bottom-x2-large",children:(0,z.jsx)(Mp,{styling:Mp.Styling.Wide})}):(0,z.jsx)(LK,{onComplete:async function(e){if(!b)return;y(!0);const t=await(0,Fe.SwO)({uuid:v,captchaToken:e});!("errors"in t)&&t.verified?Z(b,t.uuid):(0,ls.sl)()}})}):(0,z.jsxs)("form",{onSubmit:l(I),children:[(0,z.jsxs)("div",{className:"u-ui-margin-horizontal-large",children:[(0,z.jsx)(xt.Z,{id:"auth_modal_title",text:a("title"),type:xt.Z.Type.Heading,width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),!!d&&(0,z.jsx)(xt.Z,{text:d,theme:"warning",width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center})]}),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(fb.M,{...o("username",{required:!0}),placeholder:a("fields.login"),uncontrolled:!0,disabled:!!t}),!!t&&(0,z.jsx)("input",{type:"hidden",...o("username"),value:t}),(0,z.jsx)(EK,{...o("password",{required:!0}),placeholder:a("fields.password"),uncontrolled:!0})]}),(0,z.jsx)(x.Z,{}),(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(ic.I,{text:a("actions.submit"),type:ic.I.Type.Submit,styling:ic.I.Styling.Filled,disabled:n,isLoading:n}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(xt.Z,{width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,children:(0,z.jsx)("a",{href:Me.Ife,onClick:function(e){e.preventDefault(),r(NL.setAuthView({authView:wL.ResetPassword}))},children:a("actions.forgot_password")})}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(xt.Z,{width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,children:(0,z.jsx)("a",{href:Me.XQy,children:a("actions.help")})}),(0,z.jsx)(x.Z,{})]})]})},RK=/^((([a-z]|\d|[!#$%&'*+\-/=?^_`{|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#$%&'*+\-/=?^_`{|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,DK=e=>RK.test(e),AK=/^[a-z0-9][a-z0-9_.-]*[a-z0-9]$/i,MK=async(e,t)=>{const i=await(0,Fe.h3H)({user:{[e]:t}});var n,s;return!("errors"in i)||null===(n=null===(s=i.errors.find((t=>t.field===e)))||void 0===s?void 0:s.value)||void 0===n||n},UK=(0,v.debounce)((e=>MK("login",e)),500),BK=(0,v.debounce)((e=>MK("real_name",e)),500),qK=(0,v.debounce)((e=>MK("password",e)),500),VK=e=>DK(e),HK=e=>{return t=e,AK.test(t)&&UK(e);var t};let GK;!function(e){e.RealName="realName",e.Login="login",e.Email="email",e.Password="password",e.SubscribeToNewsletter="subscribeToNewsletter",e.AgreeRules="agreeRules"}(GK||(GK={}));const WK="auth.register",XK=e=>{let{realName:t,email:i,isPasswordRequired:n,onSubmit:s}=e;const r=Xn({abTestName:"terms_checkbox",shouldTrackExpose:!0}),{searchParams:a}=xc(),o=(0,p.v9)(EY),l=(0,p.v9)(RY),c=(0,p.v9)(VY),[d,u]=(0,m.useState)(""),[g,h]=(0,m.useState)(!1),[f,y]=(0,m.useState)(!1),_="on"===(null==r?void 0:r.variant),b=l===zL.WithTerms,j=(0,ys.pN)(a.state),S=Xb(j),Z=YY(S),{setError:I,control:C,register:k,handleSubmit:w,getValues:P,formState:{isSubmitting:T,errors:F}}=(0,th.cI)({mode:"onTouched",defaultValues:{realName:t}}),N=fh(F,"".concat(WK,".fields")),E=U(WK),O=U("business"),R=(0,m.useCallback)((e=>{let t="",i=!1;e.forEach((e=>{let{field:n,value:s}=e;const r=(0,v.camelCase)(n);r===GK.RealName&&h(!0),"base"===r&&(t||(t=s)),(0,_i.IF)(r,GK)&&(i=!0,I(r,{type:"manual",message:s}))})),u(i?"":t)}),[I]);async function D(e){const t=await s(e);t&&("errors"in t?R(t.errors):(0,ls.ru)(Z))}function A(e){return t=>e(t.target.checked)}function M(e){return t=>(0,z.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",children:t})}function B(e){return E(e,{"terms-and-conditions":M(Me.qyY),"pro-terms-of-sale":M(Me.$ru),"privacy-policy":M(Me.hOY),impressum:M(Me.v24)})}return Um((()=>{const e=P();e&&D(e)})),(0,m.useEffect)((()=>{o&&async function(){y(!0);const e=await(0,Fe.h3H)({user:{real_name:t}});"errors"in e&&R(e.errors),y(!1)}()}),[t,R,o]),f?(0,z.jsx)(Mp,{}):(0,z.jsxs)("form",{onSubmit:w(D),children:[d?(0,z.jsx)("div",{className:"u-ui-padding-horizontal-large u-ui-padding-top-large u-ui-padding-bottom-small",children:(0,z.jsx)(xt.Z,{text:d,theme:"warning",width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center})}):null,(0,z.jsxs)(z.Fragment,{children:[o||g?t&&!g?(0,z.jsx)("input",{...k(GK.RealName),type:"hidden",value:t}):(0,z.jsx)(fb.M,{...k(GK.RealName,{required:!0,validate:e=>e?(e=>xb(e)&&BK(e))(e):void 0}),uncontrolled:!0,placeholder:E("fields.real_name.title"),validation:hh(N(GK.RealName))||E("fields.real_name.hint")}):null,(0,z.jsx)(fb.M,{...k(GK.Login,{required:!0,minLength:3,maxLength:20,validate:HK}),uncontrolled:!0,placeholder:E("fields.login.title"),validation:hh(N(GK.Login))||E("fields.login.hint")}),i?(0,z.jsx)("input",{...k(GK.Email),type:"hidden",value:i}):(0,z.jsx)(fb.M,{...k(GK.Email,{required:!0,validate:VK}),uncontrolled:!0,placeholder:E("fields.email.title"),validation:hh(N(GK.Email))}),n&&(0,z.jsx)(EK,{...k(GK.Password,{required:!0,validate:e=>e?(e=>qK(e))(e):void 0}),uncontrolled:!0,validation:hh(N(GK.Password))||E("fields.password.hint"),placeholder:E("fields.password.title")}),(!b||_)&&(0,z.jsx)(gt.Z,{children:(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),children:[(0,z.jsx)(th.Qr,{defaultValue:l===zL.OptOut,render:e=>{let{field:{value:t,name:i,onChange:n}}=e;return(0,z.jsx)(BZ.F,{name:i,text:E("fields.subscribe.title",{"privacy-policy":M(Me.hOY)}),checked:t,onChange:A(n)})},name:GK.SubscribeToNewsletter,control:C}),_&&function(){const e=N(GK.AgreeRules);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(th.Qr,{defaultValue:!1,render:e=>{let{field:{name:t,value:i,onChange:n}}=e;return(0,z.jsx)(BZ.F,{name:t,text:B("fields.agree_rules.title"),checked:i,onChange:A(n)})},rules:{required:!0},name:GK.AgreeRules,control:C}),e&&(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),hh(e)]})}()]})})]}),(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(ic.I,{text:E("actions.submit"),type:ic.I.Type.Submit,styling:ic.I.Styling.Filled,disabled:T,isLoading:T}),(0,z.jsx)(x.Z,{}),!_&&(0,z.jsxs)(z.Fragment,{children:[c?(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:O("account.signup.commercial_seller_terms",{"business-terms":M(Me.vK_),"privacy-policy":M(Me.hOY)})}):(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:B(b?"agree_terms_with_subscription":"agree_terms")}),(0,z.jsx)(x.Z,{})]})]})]})},YK={apple:"apple",facebook:"facebook",google:"google",internal:"email"},KK=()=>{const{track:e}=vi(),{googleTagManagerTrack:t}=hK();return i=>{let{response:n,authType:s,email:r}=i;const a=YK[s];if("errors"in n)return void e((e=>{const{type:t,errors:i}=e;return{event:"user.register_fail",extra:{type:t,reason:"validation_error",details:null==i?void 0:i.map((e=>e.value)).join(", ")}}})({type:s,errors:n.errors}));t(Ob.Register,{auth_type:a,user_email:r}),e((e=>{const{type:t,userId:i}=e;return{event:"user.register_success",extra:{type:t},userId:i}})({type:s,userId:n.user.id})),e(ln({type:s,userId:n.user.id}));const{external_id:o}=n.user;o&&DI({event:cg.xy.RegistrationCompleted,userExternalId:o},{defer:!0})}},JK=()=>{const[e,t]=(0,m.useState)(!1),[i,n]=(0,m.useState)(!1),[s,r]=(0,m.useState)(""),[a,o]=(0,m.useState)(""),[l,c]=(0,m.useState)(),d=U("auth.email.register"),u=(0,p.v9)(LY),g=KK(),h=(0,p.v9)(Wt("registration_captcha_enabled")),f=YY();async function y(e,t){const i=await $M(),n=await function(e){const{realName:t,login:i,email:n,password:s,agreeRules:r,referrerId:a,subscribeToNewsletter:o=!1,fingerprint:l,uuid:c}=e,d={real_name:t,login:i,email:n,password:s,agree_rules:r,user_settings:{is_newsletter_subscriber:o}};return aK.post("".concat(sK.Lt,"/users"),{user:d,referrer_id:a,fingerprint:l,uuid:c})}({agreeRules:!0,password:"",...e,referrerId:u,fingerprint:i,uuid:t});return await g({response:n,authType:"internal",email:e.email}),n}return e?(0,z.jsx)("div",{className:"u-ui-padding-large",children:i?(0,z.jsx)("div",{className:"u-ui-padding-bottom-x2-large",children:(0,z.jsx)(Mp,{styling:Mp.Styling.Wide})}):(0,z.jsx)(LK,{onComplete:async function(e){if(!l)return;n(!0);const i=await(0,Fe.SwO)({uuid:s,captchaToken:e});if("errors"in i||!i.verified)return void(0,ls.sl)();const r=await y(l,i.uuid);if("errors"in r)return o(r.message),t(!1),void n(!1);(0,ls.ru)(f)}})}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"u-ui-margin-horizontal-large",children:[(0,z.jsx)(xt.Z,{id:"auth_modal_title",text:d("title"),type:xt.Z.Type.Heading,width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),a?(0,z.jsx)(xt.Z,{text:a,theme:"warning",width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center}):null]}),(0,z.jsx)(XK,{isPasswordRequired:!0,onSubmit:async function(e){if(c(e),!h)return y(e);const i=await(0,Fe.Xkj)({entityType:"registration",payload:{username:e.login,email:e.email}});return"errors"in i?null:i.verified?y(e,i.uuid):(r(i.uuid),t(!0),null)}}),(0,z.jsxs)("div",{className:"u-ui-margin-horizontal-large",children:[(0,z.jsx)(xt.Z,{width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,children:(0,z.jsx)("a",{href:Me.XQy,children:d("actions.help")})}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})]})]})},QK="auth.forgot_password",$K=()=>{const{register:e,handleSubmit:t,getValues:i,formState:{isSubmitting:n,errors:s}}=(0,th.cI)(),r=U(QK),a=fh(s,"".concat(QK,".fields")),[o,l]=(0,m.useState)(!1);async function c(e){let{email:t}=e;await function(e){let{email:t}=e;return aK.post("".concat(sK.Lt,"/users/reset_password"),{email:t})}({email:t}),l(!0)}return Um((()=>{c(i())})),(0,z.jsxs)("form",{onSubmit:t(c),children:[(0,z.jsx)("div",{className:"u-ui-padding-horizontal-large",children:(0,z.jsx)(xt.Z,{id:"auth_modal_title",text:r("title"),type:xt.Z.Type.Heading,width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center})}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),o&&(0,z.jsx)("div",{className:"u-ui-padding-horizontal-large",children:(0,z.jsx)(g.Z,{children:(0,z.jsx)(gt.Z,{prefix:(0,z.jsx)(ht.Z,{name:"check-circle-filled",color:ht.Z.Color.Success}),body:r("success_note")})})}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(fb.M,{...e("email",{required:!0}),placeholder:r("fields.email.title"),validation:hh(a("email")),uncontrolled:!0}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(ic.I,{text:r("actions.submit"),type:ic.I.Type.Submit,styling:ic.I.Styling.Filled,disabled:n,isLoading:n})})]})},eJ={[wL.SelectTypeRegister]:PK,[wL.SelectTypeLogin]:PK,[wL.EmailLogin]:OK,[wL.EmailRegister]:JK,[wL.ResetPassword]:$K},tJ={[PL.FacebookRegister]:e=>{let{idToken:t,realName:i,email:n}=e;const s=U(),r=(0,p.v9)(LY),a=KK();return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"u-ui-padding-horizontal-large",children:(0,z.jsx)(xt.Z,{id:"auth_modal_title",text:s("auth.external_register.title"),type:xt.Z.Type.Heading,alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent})}),(0,z.jsx)(XK,{email:n,realName:i,onSubmit:async function(e){const i=await $M(),n=await function(e){const{token:t,login:i,email:n,referrerId:s,subscribeToNewsletter:r=!1,realName:a,fingerprint:o}=e,l={login:i,real_name:a,email:n,user_setting:{is_newsletter_subscriber:r}};return aK.post("".concat(sK.Lt,"/facebook_users"),{fb_access_token:t,user:l,referrer_id:s,fingerprint:o})}({agreeRules:!0,...e,referrerId:r,token:t,fingerprint:i});return await a({response:n,authType:"facebook",email:e.email}),n}})]})},[PL.GoogleRegister]:e=>{let{idToken:t,realName:i,email:n}=e;const s=U(),r=(0,p.v9)(LY),a=KK();return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"u-ui-padding-horizontal-large",children:(0,z.jsx)(xt.Z,{id:"auth_modal_title",text:s("auth.external_register.title"),type:xt.Z.Type.Heading,alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent})}),(0,z.jsx)(XK,{email:n,realName:i,onSubmit:async function(e){const i=await $M(),n=await function(e){const{token:t,login:i,email:n,referrerId:s,subscribeToNewsletter:r=!1,realName:a,fingerprint:o}=e,l={login:i,real_name:a,email:n,user_setting:{is_newsletter_subscriber:r},referrer_id:s};return aK.post("".concat(sK.Lt,"/google_user"),{id_token:t,user:l,fingerprint:o})}({agreeRules:!0,...e,referrerId:r,token:t,fingerprint:i});return await a({response:n,authType:"google",email:e.email}),n}})]})},[PL.AppleRegister]:e=>{let{idToken:t,realName:i,email:n}=e;const s=U(),r=(0,p.v9)(LY),a=KK();return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"u-ui-padding-horizontal-large",children:(0,z.jsx)(xt.Z,{id:"auth_modal_title",text:s("auth.external_register.title"),type:xt.Z.Type.Heading,alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent})}),(0,z.jsx)(XK,{email:n,realName:i,onSubmit:async function(e){const i=await $M(),n=await function(e){const{token:t,login:i,email:n,referrerId:s,subscribeToNewsletter:r=!1,realName:a,fingerprint:o}=e,l={login:i,real_name:a,email:n,user_setting:{is_newsletter_subscriber:r},referrer_id:s};return aK.post("".concat(sK.Lt,"/apple_user"),{id_token:t,user:l,fingerprint:o})}({agreeRules:!0,...e,referrerId:r,token:t,fingerprint:i});return await a({response:n,authType:"apple",email:e.email}),n}})]})},[PL.PasswordVerification]:dK},iJ=()=>{const e=(0,p.v9)(AY),t=(0,p.v9)(BY);if((0,_i.IF)(e,wL)){const t=eJ[e];return(0,z.jsx)(t,{})}if(!t)return(0,z.jsx)(sw,{});const i=tJ[e];return(0,z.jsx)(i,{...t})},nJ=()=>{const e=U("auth"),t=(0,p.v9)(DY),i=(0,p.I0)();function n(){i(NL.closeAuthModal())}return E().phones?(0,z.jsx)(Bp.Z,{isVisible:t,onClose:n,closeButtonEnabled:!0,initialHeight:Bp.Z.Height.FullHeight,children:(0,z.jsx)("div",{className:"u-ui-padding-top-x-large",children:(0,z.jsx)(iJ,{})})}):(0,z.jsx)(cp.Z,{testId:"auth-modal",show:t,defaultCallback:n,closeOnOverlay:!0,hasScrollableContent:!0,className:"auth__container",aria:{labelledby:"auth_modal_title"},children:(0,z.jsxs)("div",{className:"u-fill-width",children:[(0,z.jsx)(Pm.Z,{right:(0,z.jsx)(ic.I,{deprecatedIcon:(0,z.jsx)(ht.Z,{name:"x"}),inverse:!0,inline:!0,onClick:n,aria:{"aria-label":e("a11y.close")}})}),(0,z.jsx)("div",{className:"u-overflow-auto","aria-live":"polite","aria-relevant":"additions",children:(0,z.jsx)(iJ,{})})]})})},sJ=e=>{let{carrier:t,enabled:i}=e;return{enabled:i,carrier:zj(t)}},rJ=[{field:Xg.GL.Country},{field:Xg.GL.Name,required:!0},{field:Xg.GL.Line1,required:!0},{field:Xg.GL.Line2},{field:Xg.GL.PostalCode,required:!0},{field:Xg.GL.City,required:!0}].map((e=>({field:e.field,required:e.required,trackingEvent:on({screen:$t.BillingAddressUpdate,target:e.field,isValid:!0})}))),aJ=e=>{let{show:t,configuration:i,address:n,onClose:s,onSubmit:r}=e;const a=(0,p.v9)(te),o=U("profile_shipping_settings.address_settings"),l=(0,p.I0)(),[c,d]=(0,m.useState)(!1),[u,g]=(0,m.useState)(),f=(0,m.useMemo)((()=>({...n||u,name:(null==n?void 0:n.name)||a})),[n,a,u]);(0,m.useEffect)((()=>{n||async function(){const e=await(0,Fe.vr1)();"errors"in e||e.user_address&&g((0,V.X)(e.user_address))}()}),[n]);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(cp.Z,{show:t,hasScrollableContent:!0,testId:"address-modal",children:(0,z.jsxs)("div",{className:"u-overflow-auto u-fill-width",children:[(0,z.jsx)(nc.Z,{children:(0,z.jsx)(xt.Z,{text:o("title"),type:xt.Z.Type.Title,alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent})}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(Zb,{address:f,translations:{buttons:{continue:o("buttons.continue")}},fieldConfiguration:i,onSubmit:e=>{l(wI.setUserDefaultAddress({address:e})),r()},onCancel:()=>{d(!0)},addressEntryType:Xg.s1.Shipping})]})}),(0,z.jsxs)(cp.Z,{show:c,className:"shipping-settings__address-modal__discard-modal",children:[(0,z.jsxs)(nc.Z,{children:[(0,z.jsx)(xt.Z,{text:o("discard_confirmation.title"),type:xt.Z.Type.Heading,alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:o("discard_confirmation.body")})]}),(0,z.jsxs)(nc.Z,{children:[(0,z.jsx)(ic.I,{text:o("discard_confirmation.buttons.proceed"),styling:ic.I.Styling.Filled,onClick:()=>{s(),d(!1)}}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(ic.I,{text:o("discard_confirmation.buttons.cancel"),styling:ic.I.Styling.Flat,onClick:()=>{d(!1)}})]})]})]})},oJ=e=>{let{address:t,getAddress:i}=e;const n=U("profile_shipping_settings.address_settings"),{track:s}=vi(),[r,a]=(0,m.useState)(!1),[o,l]=(0,m.useState)(!1);(0,m.useEffect)((()=>{a(((e,t)=>!!e&&!!t&&t.map((t=>{let{field:i,required:n}=t;return!n||!(0,v.isEmpty)(e[(0,v.camelCase)(i)])})).every(Boolean))(t,rJ))}),[t]);const c=()=>{l(!0)};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{text:n("label")}),r?(0,z.jsx)(A_,{type:gt.Z.Type.Navigating,address:t,onClick:c,showChevron:!0}):(0,z.jsx)(gt.Z,{title:n("title"),type:gt.Z.Type.Navigating,onClick:c,chevron:!0,testId:"address-details"}),(0,z.jsx)(aJ,{show:o,address:t,configuration:rJ,onClose:()=>{l(!1)},onSubmit:()=>{l(!1),i(),s(Ri({screen:$t.BillingAddressUpdate,target:qm.SaveAddress,targetDetails:JSON.stringify({valid:!0,type:bI.SettingsShippingAddress})}))}})]})};var lJ=i(51047);const cJ=e=>{let{carrierPreference:t,onSave:i}=e;const n=U("profile_shipping_settings.carrier_settings"),{track:s}=vi(),r=(0,p.v9)(X),[a,o]=(0,m.useState)(!1),[l,c]=(0,m.useState)(!1),d=e=>{e.target instanceof HTMLAnchorElement&&s(Ri({screen:$t.ShippingSettings,target:qm.SeeDropoffPointsInformation,targetDetails:JSON.stringify({carrier_code:t.carrier.code})}))},u=async()=>{const{carrier:e,enabled:n}=t;r&&(i({enabled:!n,carrier:e}),"errors"in await Fe.iwV({userId:r,carrierId:e.id,enabled:!n})?i({enabled:n,carrier:e}):s((e=>{const{screen:t,target:i,targetDetails:n}=e;return{event:"user.modify_carrier_preferences",extra:{screen:t,target:i,target_details:n}}})({screen:$t.ShippingSettings,target:qm.CarrierPreferencesToggle,targetDetails:JSON.stringify({enable:!t.enabled,carrier_code:t.carrier.code})})))},{carrier:{id:g,name:h,description:x,isMandatory:f,iconUrl:y},enabled:v}=t,_=f||a;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{prefix:(e=>e?(0,z.jsx)(Kl.U,{src:e,size:Kl.U.Size.Medium}):null)(y),title:h,body:(e=>e?(0,z.jsx)("span",{onClick:d,children:(0,z.jsx)(xt.Z,{text:e,html:!0})}):null)(x),suffix:(0,z.jsx)(lJ.Z,{name:"carrier_preference_".concat(g),checked:v,disabled:_,onClick:()=>{t.enabled?(o(!0),c(!0)):u()},testId:"carrier-toggle-".concat(g)})}),(0,z.jsx)(cp.Z,{show:l,title:n("carrier_disable_modal.title"),body:n("carrier_disable_modal.body"),actions:[{text:n("carrier_disable_modal.actions.confirm"),style:cp.Z.ActionStyling.Filled,callback:()=>{u(),o(!1),c(!1)},testId:"carrier-disable-modal-confirm-button"},{text:n("carrier_disable_modal.actions.cancel"),style:cp.Z.ActionStyling.Flat,callback:()=>{o(!1),c(!1),s(Ri({screen:$t.ShippingSettings,target:qm.CloseCarrierDisableModal,targetDetails:JSON.stringify({carrier_code:t.carrier.code})}))}}]})]})},dJ=e=>{let{carrierPreferences:t,isLoading:i=!1,onSetCarrierPreferences:n}=e;const s=U("profile_shipping_settings.carrier_settings"),{track:r}=vi(),a=e=>{const i=t.findIndex((t=>{let{carrier:i}=t;return i.id===e.carrier.id}));if(-1===i)return;const s=[...t];s[i]=e,n(s)};return t.length||i?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{text:s("label"),testId:"carrier-settings-label"}),i?(0,z.jsx)(Mp,{styling:Mp.Styling.Wide,size:Mp.Size.Large,testId:"carrier-settings-loader"}):(0,z.jsx)(kp,{children:t.map((e=>(0,z.jsx)(cJ,{carrierPreference:e,onSave:a},e.carrier.id)))}),(0,z.jsx)(gt.Z,{body:(0,z.jsx)("span",{onClick:e=>{e.target instanceof HTMLAnchorElement&&r(Ri({screen:$t.ShippingSettings,target:qm.SeeCompensationInformation}))},children:(0,z.jsx)(xt.Z,{html:!0,text:s("note"),type:xt.Z.Type.Caption,testId:"carrier-settings-note"})}),theme:"transparent"})]}):null};var uJ=i(10422),mJ=i(95639);class pJ extends m.Component{render(){const{position:e}=this.props,t=y()("u-z-index-notification",{"u-sticky-bottom u-ui-padding-bottom-x-large":e===og.Bottom,"u-fixed-top u-ui-padding-top-x-large":e===og.Top,"u-fixed-top u-right u-ui-padding-top-x5-large":e===og.TopRight});return uJ.createPortal((0,z.jsx)("div",{className:"u-flexbox u-align-items-center u-justify-content-center",children:(0,z.jsx)("div",{className:t,children:(0,z.jsx)(mJ.Z,{...this.props})})}),document.body)}}!function(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(pJ,"defaultProps",{position:og.Bottom});const gJ=pJ,hJ=e=>(e=>e[nN])(e)[0];function xJ(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const fJ={showNotification:rN.showNotification,hideNotification:rN.hideNotification},yJ=(0,p.$j)((e=>({currentlyShowingNotificationId:hJ(e)})),fJ);let vJ;!function(e){e.CloseButtonClick="close_button_click",e.BodyClick="body_click",e.Auto="auto"}(vJ||(vJ={}));class _J extends m.Component{constructor(){super(...arguments),xJ(this,"state",{id:ZF().v4()}),xJ(this,"hideNotification",(()=>this.props.hideNotification({id:this.state.id}))),xJ(this,"showNotification",(()=>this.props.showNotification({id:this.state.id}))),xJ(this,"handleNotificationClose",(e=>{var t,i;this.hideNotification(),null===(t=(i=this.props).onNotificationClose)||void 0===t||t.call(i,e)}))}componentDidMount(){this.showNotification()}componentWillUnmount(){this.hideNotification()}render(){return this.props.currentlyShowingNotificationId===this.state.id?(0,z.jsx)(gJ,{...this.props,onClose:this.handleNotificationClose}):null}}const bJ=yJ(_J),jJ=e=>{let{onConfirm:t,onCancel:i,show:n}=e;const s=U("settings.security.two_step_verification_modal");return(0,z.jsx)(cp.Z,{show:n,title:s("title"),body:s("body"),actions:[{text:s("actions.confirm"),callback:t,style:ic.I.Styling.Filled,theme:"warning"},{text:s("actions.cancel"),callback:i}]})},SJ=()=>{var e;const{relativeUrl:t}=xc(),i=(0,p.v9)(Ze),n="on"===(null===(e=(0,p.v9)(Vn("fundraisers")))||void 0===e?void 0:e.variant)&&!i,s=U("profile_navigation"),{track:r}=vi(),a=[{url:Me.Svv,title:s("page_title.profile_details")},{url:Me.dm4,title:s("page_title.account_settings")},{url:Me.zDS,title:s("page_title.shipping")},{url:Me.hu_,title:s("page_title.payments")},{url:Me.yu7,title:s("page_title.bundle_discounts")},{url:Me.V55,title:s("page_title.donations"),disabled:!n},{url:Me.b1y,title:s("page_title.notifications")},{url:Me.fMY,title:s("page_title.privacy_settings")},{url:Me.KPt,title:s("page_title.security")},{url:Me.Q4U,title:s("page_title.your_polices"),disabled:!i}].filter((e=>!(null!=e&&e.disabled)));return(0,z.jsxs)("nav",{className:"body-content__sidebar",children:[(0,z.jsx)(gt.Z,{theme:"transparent",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:s("title")})}),a.map((e=>{let{url:i,title:n}=e;const s=(0,ys.G9)(t,i);return(0,z.jsx)(gt.Z,{url:i,onClick:()=>(e=>{e===Me.V55&&r(dn({screen:$t.ProfileTab,target:qm.EnterDonationFromSettings}))})(i),theme:"transparent",type:gt.Z.Type.Navigating,children:(0,z.jsx)(xt.Z,{testId:s?"side-menu-link-active":"side-menu-link",theme:s?"amplified":"muted",bold:!0,children:n})},n)}))]})},ZJ=e=>({id:e.id,sessionId:e.session_id,device:e.device,location:e.location,lastSeen:e.last_seen,isCurrent:!!e.current}),IJ=e=>{let{onConfirm:t,onCancel:i,show:n,session:s}=e;const r=U("settings.security.sessions.modal");return(0,z.jsx)(cp.Z,{testId:"logged-out-modal",show:n,title:r("title"),body:(0,z.jsx)(xt.Z,{text:r("body",{session_location:s.location,session_device:s.device}),html:!0}),actions:[{text:r("actions.change_password"),callback:t,style:ic.I.Styling.Filled,testId:"logged-out-modal-change--password-button"},{text:r("actions.dismiss"),callback:i,testId:"logged-out-modal--dismiss-button"}]})},CJ=()=>{const e=U("settings.email_change"),t=(0,p.v9)(W),i=(0,p.v9)(Wt("mandatory_change_email_confirmation")),n=null==t?void 0:t.verification.email.valid,s=n||i?{url:Me.CcO}:{url:Me.fbH};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{title:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:null==t?void 0:t.email,type:xt.Z.Type.Title}),n&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XSmall}),(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-row",children:[(0,z.jsx)(xt.Z,{text:e("status_confirmed"),type:xt.Z.Type.Caption}),(0,z.jsx)(x.Z,{size:x.Z.Size.XSmall,orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(ht.Z,{name:"checkmark",color:ht.Z.Color.Success,size:ht.Z.Size.XSmall})]})]})]}),styling:gt.Z.Styling.Wide,suffix:(0,z.jsx)(ic.I,{size:ic.I.Size.Small,text:e("change_button"),url:s.url})}),!n&&(0,z.jsx)(ah.Z,{text:e("unverified_email",{email:(0,z.jsx)("a",{href:Me.sAE,children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,clickable:!0,text:e("confirm")})})})})]})},kJ=()=>{const[e,t]=(0,m.useState)(),i=(0,p.I0)(),n=U("account_settings.username"),s=(0,p.v9)(aU),r=(0,p.v9)(W),a=(0,v.debounce)((async function(e){i(qL.setUsername({username:e}));const n=await(0,Fe.h3H)({user:{login:e}});var s;t("errors"in n?null===(s=n.errors.find((e=>"login"===e.field)))||void 0===s?void 0:s.value:void 0)}),500);if(null==r||!r.generated_login)return null;const o=n("note");return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,children:(0,z.jsx)(gh,{name:"username",styling:"wide",title:n("title"),value:s,onChange:function(e){a(e.currentTarget.value)},validation:(0,z.jsx)(zm.Z,{text:e,theme:"warning"})})}),o?(0,z.jsx)(ah.Z,{text:n("note")}):(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]})},wJ=()=>{const e=(0,p.I0)(),t=U("account_settings"),i=(0,p.v9)(nU),n=[{value:Yt.NotSelected,label:t("gender.placeholder")},{value:Yt.Female,label:t("gender.options.female")},{value:Yt.Male,label:t("gender.options.male")},{value:Yt.Other,label:t("gender.options.other")}];return(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,children:(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[(0,z.jsx)(gh,{name:"real-name",styling:"wide",title:t("name.title"),value:i.realName,placeholder:t("name.placeholder"),onChange:function(t){e(qL.setRealName({realName:t.target.value}))}}),(0,z.jsx)(yb.R,{name:"gender",styling:yb.R.Styling.Wide,title:t("gender.title"),value:i.gender,options:n,onChange:function(t){e(qL.setGender({gender:t.target.value}))}}),(0,z.jsx)(dI,{name:"birthday",styling:"wide",value:i.birthday,title:t("birthday.title"),onChange:function(t){e(qL.setBirthday({birthday:t||void 0}))}})]})})},PJ=()=>{const e=(0,p.I0)(),t=U("account_settings.vacation"),i=(0,p.v9)(sU),n=t("note");return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:t("title")}),suffix:(0,z.jsx)(lJ.Z,{name:"vacation",checked:i,onChange:function(){e(qL.setIsOnHoliday({isOnHoliday:!i}))}})}),n?(0,z.jsx)(ah.Z,{text:t("note")}):(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]})};class zJ extends m.Component{constructor(){super(...arguments),function(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(this,"renderAction",(()=>(0,z.jsx)(ic.I,{text:(0,z.jsx)(vt.Z,{id:"account_settings.password.change"}),url:Me.ojr,size:ic.I.Size.Small})))}render(){return(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,title:(0,z.jsx)(vt.Z,{id:"account_settings.password.title"}),suffix:this.renderAction()})}}const TJ=zJ,FJ=()=>{const e=(0,p.v9)(W);return e&&e.account_status!==Be.Fx?(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,styling:gt.Z.Styling.Wide,chevron:!0,url:Me.vHQ,title:(0,z.jsx)(vt.Z,{id:"account_settings.delete_account.title"})}):null},NJ=e=>{let{show:t,onClose:i}=e;const n=U("account_settings.social.setup_password_modal");return(0,z.jsx)(cp.Z,{show:t,title:n("title"),body:n("text"),actions:[{text:n("button"),style:cp.Z.ActionStyling.Filled,url:Me.ojr},{text:(0,z.jsx)(vt.Z,{id:"actions.close"}),callback:i}]})},LJ=()=>{const[e,t]=(0,m.useState)(!1),[i,n]=(0,m.useState)(),[s,r]=(0,m.useState)(!1),a=(0,p.v9)(W),o=U("account_settings.social"),[l,c]=function(){const e=U(),t={title:e("errors.modal.title"),body:e("errors.modal.body")},[i,n]=(0,m.useState)(t),[s,r]=(0,m.useState)(!1);function a(){n(t),r(!1)}return[{show:s,defaultCallback:a,title:i.title,body:i.body,actions:[{text:e("actions.close"),callback:a}]},function(e){n((t=>{var i,n;return{title:(null==e?void 0:e.message)||t.title,body:(null==e||null===(i=e.errors)||void 0===i||null===(n=i[0])||void 0===n?void 0:n.value)||t.body}})),r(!0)}]}(),{isInitialized:d,isEnabled:u}=xK();function g(e){t(!1),"connected"===e.status?async function(e){const t=await(0,Fe.hBm)(e);"errors"in t?c(t):n(!0)}(e.authResponse.accessToken):c()}return(0,m.useEffect)((()=>{n(null==a?void 0:a.verification.facebook.valid)}),[a]),u&&a?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,title:o("facebook.title"),suffix:(0,z.jsx)(ic.I,{text:o(i?"linked":"link"),size:ic.I.Size.Small,theme:i?"muted":"primary",onClick:function(){t(!0),i?async function(){const e=await(0,Fe.OGS)();t(!1),"errors"in e?null!=a&&a.is_login_via_external_system_only&&r(!0):n(!1)}():FB.login(g,{scope:iK})},disabled:e||!d})}),(0,z.jsx)(NJ,{show:s,onClose:function(){r(!1)}}),(0,z.jsx)(cp.Z,{...l})]}):null},EJ=()=>{const[e,t]=(0,m.useState)(),i=(0,p.v9)(Fb);return(0,m.useEffect)((()=>{!async function(){var e;await Hb({id:"google-sdk",isAsync:!0,src:"https://apis.google.com/js/api:client.js"}),null===(e=window.gapi)||void 0===e||e.load("auth2",(()=>{t(window.gapi.auth2.init({client_id:i}))}))}()}),[i]),e},OJ=e=>{var t;let{show:i,response:n,onClose:s}=e;const r=U();return(0,z.jsx)(cp.Z,{show:i,title:(null==n?void 0:n.message)||r("errors.modal.title"),body:(null==n||null===(t=n.errors)||void 0===t?void 0:t[0].value)||r("errors.modal.body"),actions:[{text:r("actions.close"),callback:s}]})},RJ=()=>{const e=EJ(),{searchParams:t}=xc(),i=U("account_settings.social"),[n,s]=(0,m.useState)(!1),[r,a]=(0,m.useState)(),[o,l]=(0,m.useState)(!1),[c,d]=(0,m.useState)(void 0),[u,g]=(0,m.useState)(!1),h=(0,p.v9)(W),x=(0,p.v9)(Wt("oauth_google_login")),f=(0,p.v9)(Wt("google_oauth_state_validation")),y=(0,ys.pN)(t.code),v=f?(0,ys.pN)(t.state):"link",_=(0,ys.Iq)(Me.TcE,{state:f?void 0:"link",take_action:f?"link":void 0});(0,m.useEffect)((()=>{a(null==h?void 0:h.verification.google.valid)}),[h]);const b=(0,m.useCallback)((async e=>{const t=await(0,Fe.k1g)(e);if("errors"in t)return g(!0),void d(t);a(!0)}),[]);function j(e){s(!1),e?b(e.getAuthResponse().id_token):g(!0)}return(0,m.useEffect)((()=>{y&&(async()=>{const e=await(0,Fe.IcB)({code:y,state:v,action:"link"});if("errors"in e)return g(!0),void d(e);b(e.id_token)})()}),[y,v,b]),h?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,title:i("google.title"),suffix:(0,z.jsx)(ic.I,{text:i(r?"linked":"link"),size:ic.I.Size.Small,theme:r?"muted":"primary",onClick:function(){if(s(!0),r)!async function(){const e=await(0,Fe.SNK)();s(!1),"errors"in e?null!=h&&h.is_login_via_external_system_only&&e.code===pm.Q.ValidationError&&l(!0):a(!1)}();else{if(x)return void(0,ls.ru)(_);null==e||e.signIn().then(j)}},disabled:n})}),(0,z.jsx)(NJ,{show:o,onClose:function(){l(!1)}}),(0,z.jsx)(OJ,{show:u,response:c,onClose:function(){g(!1),d(void 0)}})]}):null},DJ=()=>(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,children:(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[(0,z.jsx)(LJ,{}),(0,z.jsx)(RJ,{})]})}),(0,z.jsx)(ah.Z,{text:(0,z.jsx)(vt.Z,{id:"account_settings.social.note"})})]}),AJ=e=>{let{error:t}=e;const[i,n]=(0,m.useState)(!0);if((0,m.useEffect)((()=>{n(!0)}),[t]),!i)return null;const s=(0,z.jsx)(ic.I,{deprecatedIcon:(0,z.jsx)(ht.Z,{name:"x",color:ht.Z.Color.GreyscaleLevel7,size:ht.Z.Size.Small}),size:ic.I.Size.Medium,inline:!0,onClick:function(){n(!1)},styling:ic.I.Styling.Flat}),r=t.errors.map((e=>{let{value:t}=e;return" ".concat(t)})).join("\n");return(0,z.jsxs)(gt.Z,{theme:"warning",children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,theme:"warning",prefix:(0,z.jsx)(ht.Z,{name:"cancel-circle",color:ht.Z.Color.GreyscaleLevel7,size:ht.Z.Size.Medium}),title:(0,z.jsx)(xt.Z,{text:t.message,theme:"inverse",type:xt.Z.Type.Title}),suffix:s}),(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large,orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(xt.Z,{text:r,format:!0,theme:"inverse"})]})]})},MJ=e=>{let{internationalTradingAbTest:t}=e;const i=(0,p.I0)(),n=U("account_settings.international_trading"),s=(0,p.v9)(dU),r=null!=s?s:t===Be.z5.InitiallyEnabled;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:n("title")}),suffix:(0,z.jsx)(lJ.Z,{name:"international_trading",checked:r,onChange:function(){i(qL.setIsInternationalTradingEnabled({isInternationalTradingEnabled:!r}))}})}),(0,z.jsx)(ah.Z,{styling:ah.Z.Styling.Narrow,text:n("note")})]})},UJ=e=>{let{isDividerVisible:t}=e;const i=U("settings.phone_number"),n=(0,p.v9)(X),s=(0,p.v9)(de),[r,a]=(0,m.useState)(),{relativeUrl:o}=xc();return(0,m.useEffect)((()=>{n&&(async()=>{const e=await(0,Fe.agi)(n);"errors"in e||a(e.security.masked_phone_number)})()}),[n]),(0,z.jsxs)(z.Fragment,{children:[t&&(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,children:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,title:s&&r?r:i("title"),suffix:(()=>{const e=(0,ys.Iq)(s?Me.kHg:Me.j9U,{ref_url:o});return(0,z.jsx)(ic.I,{text:i(s?"actions.change":"actions.verify"),size:ic.I.Size.Small,url:e})})()})}),(0,z.jsx)(ah.Z,{styling:ah.Z.Styling.Narrow,text:i("note")})]})},BJ=()=>{const e=(0,p.v9)(Wt("web_dark_mode_adoption")),t=Ql();return e&&!(0,Bn.le)(Mg)&&!t},qJ=()=>{const e=(0,p.I0)(),t=U(),i=(0,p.v9)(rU),n=BJ();return(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,body:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:t("account_settings.dark_mode.title")}),n&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)(oC.Z,{theme:"primary",content:t("common.new_badge")})]})]}),suffix:(0,z.jsx)(lJ.Z,{name:"dark_mode",checked:i,onChange:function(){e(qL.setIsDarkMode({isDarkMode:!i}))}})})},VJ=()=>{const e=(0,p.v9)(je),t=U("policies_settings.legal_imprint");if(!e)return null;const{legal_name:i,legal_code:n}=e;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{title:t("title")}),(0,z.jsx)(gt.Z,{title:t("business_name"),children:i}),(0,z.jsx)(gt.Z,{title:t("legal_code"),children:n})]})},HJ=e=>{let{name:t,title:i,placeholder:n}=e;const{register:s,watch:r}=(0,th.Gc)(),a=r(t);return(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Tight,children:[(0,z.jsx)(gt.Z,{title:i}),(0,z.jsx)(Gw,{...s(t),placeholder:n,maxLength:1e4,validation:"".concat(a.length,"/").concat(1e4),uncontrolled:!0})]})};var GJ;!function(e){e.TermsAndConditions="termsAndConditions",e.ReturnPolicy="returnPolicy",e.AdditionalInformation="additionalInformation"}(GJ||(GJ={}));function WJ(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class XJ extends m.Component{constructor(){super(...arguments),WJ(this,"state",{selectedValue:this.props.selectedValue}),WJ(this,"isSelectedValue",(e=>{const{selectedValue:t}=this.state;return!!t&&t&&t.id===e})),WJ(this,"onListClick",((e,t)=>()=>{this.setState({selectedValue:e},(()=>{t.setIsSaveEnabled(!0),this.props.breakpoints.phones||t.closeDropdown()}))})),WJ(this,"renderSelectableList",(e=>{const{data:t,group:i}=this.props;return(0,z.jsx)(kp,{children:t.map((t=>{if(null==t||!t.title)return null;const n=i?"".concat(i,"-").concat(t.id.toString()):t.id.toString();return(0,z.jsx)(gt.Z,{id:n,title:t.title,body:t.body,suffix:(0,z.jsx)(qx.J,{tabIndex:-1,name:"".concat(n,"-radio"),checked:this.isSelectedValue(t.id),aria:{"aria-labelledby":n}}),onClick:this.onListClick(t,e),clickable:!0},n)}))})})),WJ(this,"onCancel",(()=>{this.setState({selectedValue:this.props.selectedValue})})),WJ(this,"onSave",(()=>{const{selectedValue:e}=this.state;e!==this.props.selectedValue&&this.setState({selectedValue:null},(()=>this.props.onSave(e)))})),WJ(this,"onClose",(()=>{this.onSave()})),WJ(this,"onOpen",(()=>{const{onOpen:e}=this.props;e&&e()}))}componentDidUpdate(e){const{selectedValue:t}=this.props;t!==e.selectedValue&&this.setState({selectedValue:t})}render(){const{name:e,inputTitle:t,placeholder:i,isDirectionUp:n,disabled:s,isLoading:r,validation:a,required:o}=this.props,{selectedValue:l}=this.state;return(0,z.jsx)(gI,{name:e,title:t,placeholder:i,readOnly:!0,isDirectionUp:n,disabled:s,isLoading:r,render:this.renderSelectableList,onCancel:this.onCancel,onOpen:this.onOpen,onSave:this.onSave,onClose:this.onClose,validation:a,value:null==l?void 0:l.title,required:o})}}WJ(XJ,"defaultProps",{data:[]});const YJ=F(XJ),KJ=e=>{let{isDisabled:t,discountFractions:i,selectedDiscounts:n,onDiscountSelection:s}=e;const r=U("settings.bundle_discounts"),a=(0,m.useMemo)((()=>i.map((e=>{const t=Number(e);return{id:e,title:0===t?r("no_discount"):"".concat(100*t,"%")}}))),[r,i]);function o(e){return a.find((t=>t.id===e.fraction))}function l(e){return t=>{t&&s({...e,fraction:String(t.id)})}}return(0,z.jsx)(L,{separator:(0,z.jsx)(h.Z,{}),children:n.map(((e,i)=>(0,z.jsx)(YJ,{disabled:t,name:"bundle-discount-selector-".concat(i),inputTitle:r("items",{count:e.minimalItemCount},{count:e.minimalItemCount}),data:a,selectedValue:o(e),onSave:l(e)},e.minimalItemCount)))})},JJ=e=>{let{onChange:t,isChecked:i,isDisabled:n}=e;const s=U("settings.bundle_discounts");return(0,z.jsx)(gt.Z,{title:s("title"),suffix:(0,z.jsx)(lJ.Z,{name:"bundle-discounts-toggle",testId:"bundle-discounts-toggle",checked:i,disabled:n,onChange:function(e){let{target:i}=e;t(i.checked)}}),styling:gt.Z.Styling.Wide})};var QJ=i(34813),$J=i(63965),eQ=i(78144),tQ=i(39971),iQ=i(79982);const nQ=e=>{let{x:t=0,y:i=0,payload:n={value:""}}=e;return(0,z.jsx)("g",{transform:"translate(".concat(t,", ").concat(i,")"),children:(0,z.jsx)("foreignObject",{x:-10,y:10,width:20,height:16,children:(0,z.jsx)(xt.Z,{text:n.value,width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,type:xt.Z.Type.Caption})})})};class sQ extends m.Component{constructor(){super(...arguments),function(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(this,"handleClick",(e=>{const{payload:t,index:i,onClick:n}=this.props;e.stopPropagation(),n(t,i)}))}render(){const{cx:e,cy:t,stroke:i,strokeWidth:n,index:s,interactive:r,value:a,activePoint:o,testId:l}=this.props,c=o===s;if(null==a)return null;const d={r:c?8:4,strokeWidth:c?4:n},u=y()({"u-cursor-pointer":r});return(0,z.jsx)("circle",{...d,stroke:i,fill:"#fff",cx:e,cy:t,onClick:this.handleClick,className:u,"data-testid":l})}}const rQ=sQ;function aQ(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const oQ={top:QJ.K.Medium,right:QJ.K.Large,left:QJ.K.Large,bottom:QJ.K.Medium};class lQ extends m.Component{constructor(){var e;super(...arguments),e=this,aQ(this,"chartColor",sg(Bg())),aQ(this,"handleClick",(e=>{const{interactive:t,onClick:i}=this.props;t&&i&&i(e)})),aQ(this,"handlePointClick",((e,t)=>{const{interactive:i,onPointClick:n}=this.props;i&&n&&n(e,t)})),aQ(this,"renderChartContent",(function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{data:i,interactive:n,activePoint:s,width:r,height:a}=e.props,o=t?{width:r,height:a}:null,l=(0,z.jsx)(rQ,{testId:"performance-chart-dot",onClick:e.handlePointClick,activePoint:s,interactive:n});return(0,z.jsxs)($J.w,{...o,data:i,margin:oQ,children:[(0,z.jsx)(eQ.K,{dataKey:"label",axisLine:!1,tickLine:!1,tick:(0,z.jsx)(nQ,{}),interval:0}),(0,z.jsx)(tQ.x,{dataKey:"value_1",stroke:"#999",strokeWidth:2,dot:l,isAnimationActive:!1}),(0,z.jsx)(tQ.x,{dataKey:"value_2",stroke:e.chartColor,strokeWidth:2,dot:l,isAnimationActive:!1})]})})),aQ(this,"renderChart",(()=>{const{width:e,height:t}=this.props;return(0,v.isNumber)(e)&&(0,v.isNumber)(t)?this.renderChartContent(!0):(0,z.jsx)(iQ.h,{width:e,height:t,children:this.renderChartContent()})}))}render(){return(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,onClick:this.handleClick,testId:"performance-chart",children:this.renderChart()})}}aQ(lQ,"defaultProps",{data:[],interactive:!1,width:"100%",height:150});const cQ=lQ,dQ=e=>{let{isOpen:t,photoTips:i,nextButtonText:n,backButtonText:s,handleClose:r,handleBack:a}=e;const[o,l]=(0,m.useState)(0),c=U("item_upload.photo_tips");function d(e){return()=>l(e)}return(0,z.jsx)(cp.Z,{testId:"photo-tips-modal",show:t&&i.length>0,children:(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(Pm.Z,{left:a&&(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,inline:!0,deprecatedIconName:"arrow-left",onClick:a,testId:"back-button"}),right:r&&(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,inline:!0,deprecatedIconName:"x",onClick:r,testId:"close-button"})}),function(){const e=i[o];return e?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Narrow,children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,children:e.title})}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Narrow,children:(0,z.jsx)(Kl.U,{src:e.imageUrl})}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Narrow,children:(0,z.jsx)(xt.Z,{children:e.body})})]}):null}(),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),i.length<=1?null:(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsx)(ic.I,{testId:"photo-tip-previous-button",onClick:function(){l((e=>(e||i.length)-1))},inline:!0,text:s||c("previous_tip")}),(0,z.jsx)("div",{className:"photo-tips__indicator-container",children:i.length?i.map(((e,t)=>{const i=y()("photo-tips__action",{"photo-tips__action--active":t===o});return(0,z.jsx)("span",{className:"photo-tips__indicator",onClick:d(t),children:(0,z.jsx)("span",{className:i})},e.id)})):null}),(0,z.jsx)(ic.I,{testId:"photo-tip-next-button",onClick:function(){l((e=>e===i.length-1?0:e+1))},styling:ic.I.Styling.Filled,inline:!0,text:n||c("next_tip")})]})]})})},uQ=e=>{let{show:t,onClose:i}=e;const n=U("item_performance.interactions.rating.help");return(0,z.jsx)(cp.Z,{show:t,hasScrollableContent:!0,children:(0,z.jsx)("div",{className:"u-fill-width",children:(0,z.jsxs)(Lg,{children:[(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(x.Z,{}),(0,z.jsx)(xt.Z,{text:n("what_it_is.title"),type:xt.Z.Type.Heading}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(xt.Z,{text:n("what_it_is.body"),html:!0})]}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,text:n("action.close"),onClick:i,testId:"listing-score-help-close"})})]})})})},mQ=e=>{let{itemId:t,show:i,onClose:n,onPhotoTipsClick:s}=e;const{track:r}=vi(),a=U("item_performance.selling_tips");function o(){r(Ri({screen:$t.ImprovementTips,target:qm.PriceTips}))}function l(){r(Ri({screen:$t.ImprovementTips,target:qm.DescriptionTips}))}return(0,z.jsx)(cp.Z,{show:i,hasScrollableContent:!0,children:(0,z.jsx)("div",{className:"u-fill-width",children:(0,z.jsxs)(Lg,{children:[(0,z.jsx)(Pm.Z,{right:(0,z.jsx)(ic.I,{theme:"amplified",deprecatedIconName:"x",styling:ic.I.Styling.Flat,testId:"item_selling_tips_close_button",onClick:n}),body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:a("title")})}),(0,z.jsx)(h.Z,{}),(0,z.jsxs)(gt.Z,{prefix:(0,z.jsx)(ht.Z,{name:"picture-tshirt",color:ht.Z.Color.GreyscaleLevel3}),title:a("first_photo.title"),children:[(0,z.jsx)(xt.Z,{text:a("first_photo.body")}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)("span",{onClick:s,"data-testid":"photo-tips-link",children:(0,z.jsx)(xt.Z,{text:a("first_photo.link"),as:"a",clickable:!0})})]}),(0,z.jsxs)(gt.Z,{prefix:(0,z.jsx)(ht.Z,{name:"price-tag",color:ht.Z.Color.GreyscaleLevel3}),title:a("price.title"),children:[(0,z.jsx)(xt.Z,{text:a("price.body")}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(_p,{type:bp.SetCorrectPrice,accessChannel:Be.Si.HcTopics,render:e=>(0,z.jsx)("a",{href:e,onClick:o,target:"_blank",rel:"noreferrer",children:a("price.link")})})]}),(0,z.jsxs)(gt.Z,{prefix:(0,z.jsx)(ht.Z,{name:"description",color:ht.Z.Color.GreyscaleLevel3}),title:a("description.title"),children:[(0,z.jsx)(xt.Z,{text:a("description.body")}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(_p,{type:bp.WriteGoodItemDescription,accessChannel:Be.Si.HcTopics,render:e=>(0,z.jsx)("a",{href:e,onClick:l,target:"_blank",rel:"noreferrer",children:a("description.link")})})]}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,text:a("action.update_item"),url:(0,Me.dZJ)(t),onClick:function(){r(Ri({screen:$t.ImprovementTips,target:qm.UpdateItem}))},testId:"update-item-button"})})]})})})},pQ=e=>{let{performance:t}=e;const i=U(),{track:n}=vi(),[s,r]=(0,m.useState)(!1),[a,o]=(0,m.useState)(!1),[l,c]=(0,m.useState)(!1),{fetch:d,transformedData:u}=ih(Fe.Uel,Xh);function p(){o(!0),n(Ri({target:qm.SellingTips}))}return(0,m.useEffect)((()=>{a&&(u&&u.length>0||d())}),[d,u,a]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{testId:"push-up-interactions",children:(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,title:i("item_performance.interactions.title"),suffix:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:i("item_performance.interactions.subtitle",{days:t.chartData.length})})}),function(){if(!t.listingScore||t.listingScore===Oa.AboveAverage)return null;const e={"learn-more":e=>(0,z.jsx)("span",{onClick:p,children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:e,as:"a",clickable:!0})})};return(0,z.jsx)(g.Z,{children:(0,z.jsx)("div",{className:"u-overflow-hidden",children:(0,z.jsx)(gt.Z,{title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,theme:"amplified",text:i("item_performance.selling_tips.title")}),body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:i("item_performance.selling_tips.body",e)}),highlighted:!0})})})}(),(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),children:[t.listingScore?(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,body:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:i("item_performance.interactions.rating.title")}),(0,z.jsx)(ic.I,{deprecatedIcon:(0,z.jsx)(ht.Z,{name:"info-circle",size:ht.Z.Size.Small,color:ht.Z.Color.GreyscaleLevel3}),inline:!0,size:ic.I.Size.Small,styling:ic.I.Styling.Flat,onClick:function(){r(!0),n(Ri({target:qm.InteractionRate}))},testId:"interaction-rating-info-circle"})]}),suffix:function(){if(!t.listingScore)return null;const e=i("item_performance.interactions.rating.".concat(t.listingScore));return e.length>=15?(0,z.jsx)(Wf.Z,{content:e,hover:!0,testId:"interaction-rate-tooltip",children:(0,z.jsx)(oC.Z,{content:"".concat(e.substring(0,12),"...")})}):(0,z.jsx)(oC.Z,{content:e})}()}):null,(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,body:i("item_performance.interactions.item_clicks"),suffix:(0,z.jsx)(xt.Z,{theme:"amplified",text:t.views})}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,body:i("item_performance.interactions.favourites"),suffix:(0,z.jsx)(xt.Z,{theme:"amplified",text:t.favorites})}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,body:i("item_performance.interactions.conversations"),suffix:(0,z.jsx)(xt.Z,{theme:"amplified",text:t.conversations})})]})]})}),(0,z.jsx)(uQ,{show:s,onClose:function(){r(!1)}}),(0,z.jsx)(mQ,{show:a,onClose:function(){o(!1)},itemId:t.itemId,onPhotoTipsClick:function(){o(!1),c(!0),n(Ri({screen:$t.ImprovementTips,target:qm.PhotoTips}))}}),u&&(0,z.jsx)(dQ,{isOpen:l,photoTips:u,handleBack:function(){c(!1),o(!0)}})]})},gQ=e=>{let{performance:t,initialActivePoint:i,itemPromoted:n=!1,renderChart:s=(e=>(0,z.jsx)(cQ,{...e,interactive:!0}))}=e;const r=(0,O.Z)(),a=U("item_performance"),[o,l]=(0,m.useState)(void 0!==i),[c,d]=(0,m.useState)(i),[u,p]=(0,m.useState)(void 0===i?void 0:t.chart_data[i]),g=Xn({abTestName:"item_performance_engagement_score",shouldTrackExpose:!0});return(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,onClick:function(){l(!1),d(void 0),p(void 0)},testId:"bump-statistic",children:(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[function(){if(!t.recently_promoted)return null;if("on"!==(null==g?void 0:g.variant))return null;const e=n?"".concat(a("bump")," ").concat(t.humanized_hours_left):a("bump_ended_days_ago",{count:t.promotion_ends_in_days},{count:t.promotion_ends_in_days});return(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:e,testId:"top-expiration-date-text"})})}(),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{title:(0,z.jsx)(wx,{id:"item_performance.title"}),suffix:function(){if(o&&u){const e=new Date(u.date);return(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,children:(0,z.jsx)(_t.Ji,{value:e,year:"numeric",month:"long",day:"numeric"})})}return(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,children:(0,z.jsx)(wx,{id:"item_performance.subtitle",values:{days:t.chart_data.length}})})}()}),(0,z.jsx)("div",{className:"u-ui-padding-horizontal-medium",children:(0,z.jsx)(s,{data:t.chart_data.map((function(e){const t=r.formatDate(new Date(e.date),{day:"2-digit"});return{value_1:e.impressions,value_2:e.highlighted?e.impressions:null,label:t}})),activePoint:c,onPointClick:function(e,i){i&&(l(!0),d(i),p(t.chart_data[i]))}})}),(0,z.jsx)(gt.Z,{children:function(){let e=null;if(o&&u){const{impressions:t}=u;e=(0,z.jsx)(wx,{id:"item_performance.impressions",pluralize:!0,count:t,values:{count:(0,z.jsx)(xt.Z,{text:t,theme:"amplified"})}})}else{const{impressions:i}=t,s=[(0,z.jsx)(wx,{id:"item_performance.impressions_over_days",pluralize:!0,count:i,values:{count:(0,z.jsx)(xt.Z,{text:i,theme:"amplified"}),days:(0,z.jsx)(xt.Z,{text:t.chart_data.length,theme:"amplified"})}})];t.impression_difference>1&&s.push((0,z.jsx)(wx,{id:"item_performance.impression_diff",values:{change:(0,z.jsx)(xt.Z,{text:"".concat(t.impression_difference,"x"),theme:"amplified"})}})),t.recently_promoted&&"on"!==(null==g?void 0:g.variant)&&(n?(s.push((0,z.jsx)(wx,{id:"item_performance.bump"})),s.push("".concat(t.humanized_hours_left,"."))):s.push((0,z.jsx)(wx,{id:"item_performance.bump_ended_days_ago",pluralize:!0,count:t.promotion_ends_in_days,values:{count:(0,z.jsx)(xt.Z,{text:t.promotion_ended_days_ago,theme:"amplified"})}})));const r=s.reduce(((e,t)=>e.length?[...e," ",t]:[t]),[]);e=(0,z.jsx)(xt.Z,{children:m.Children.toArray(r)})}return e}()})]}),"on"===(null==g?void 0:g.variant)?(0,z.jsx)(pQ,{performance:(x=t,{id:x.id,itemId:x.item_id,impressions:x.impressions,favorites:x.favorites,views:x.views,conversations:x.conversations,promotedUntil:x.promoted_until,promotionEndsInDays:x.promotion_ends_in_days,humanizedHoursLeft:x.humanized_hours_left,promotionEndedDaysAgo:x.promotion_ended_days_ago,recentlyPromoted:x.recently_promoted,impressionDifference:x.impression_difference,chartData:x.chart_data,nextPushUpTime:x.next_push_up_time,lastPushUpAt:x.last_push_up_at,listingScore:x.listing_score})}):(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(gt.Z,{title:(0,z.jsx)(wx,{id:"item_performance.interactions.title"}),suffix:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,children:(0,z.jsx)(wx,{id:"item_performance.interactions.subtitle",values:{days:t.chart_data.length}})}),styling:gt.Z.Styling.Tight}),(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Tight,children:[(0,z.jsx)(xt.Z,{children:(0,z.jsx)(wx,{id:"item_performance.views",values:{count:(0,z.jsx)(xt.Z,{text:t.views,theme:"amplified"})}})}),(0,z.jsx)("br",{}),(0,z.jsx)(xt.Z,{children:(0,z.jsx)(wx,{id:"item_performance.favourites",values:{count:(0,z.jsx)(xt.Z,{text:t.favorites,theme:"amplified"})}})}),(0,z.jsx)("br",{}),(0,z.jsx)(xt.Z,{children:(0,z.jsx)(wx,{id:"item_performance.conversations",pluralize:!0,count:t.conversations,values:{count:(0,z.jsx)(xt.Z,{text:t.conversations,theme:"amplified"})}})})]})]})]})});var x},hQ=e=>{let{stroke:t="#999"}=e;return(0,z.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"8",height:"8",viewBox:"0 0 8 8",children:(0,z.jsx)("circle",{cx:"4",cy:"4",r:"3",fill:"none",strokeWidth:"2",stroke:t})})};function xQ(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class fQ extends m.Component{constructor(e){super(e),xQ(this,"state",{selectedDate:(0,v.isNumber)(this.props.activePoint),activePoint:this.props.activePoint,currentData:this.props.activePoint?this.props.statistics.chart_data[this.props.activePoint]:null}),xQ(this,"data",void 0),xQ(this,"dayCount",void 0),xQ(this,"chartColor",sg(Bg())),xQ(this,"statsToChartData",((e,t)=>{const{intl:i}=this.props,n=i.formatDate(new Date(e.date),{month:0===t?"2-digit":void 0,day:"2-digit"});return{value_1:e.value,value_2:e.highlighted?e.value:null,label:n}})),xQ(this,"handleClick",(()=>{this.setState({selectedDate:!1,activePoint:null,currentData:null})})),xQ(this,"handlePointClick",((e,t)=>{t&&this.setState({selectedDate:!0,activePoint:t,currentData:this.props.statistics.chart_data[t]})})),this.data=e.statistics.chart_data.map(this.statsToChartData),this.dayCount=e.statistics.chart_data.length}renderDate(){const{selectedDate:e,currentData:t}=this.state;if(e&&t){const e=new Date(t.date);return(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,children:(0,z.jsx)(_t.Ji,{value:e,year:"numeric",month:"long",day:"numeric"})})}return(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,children:(0,z.jsx)(wx,{id:"closet_promotion.stats.chart.subtitle",values:{days:this.dayCount}})})}renderInfo(){const{selectedDate:e,currentData:t}=this.state;if(e&&t){const e=t.value;return(0,z.jsx)(wx,{id:"closet_promotion.stats.chart.impressions",pluralize:!0,count:e,values:{count:(0,z.jsx)(xt.Z,{text:e,theme:"amplified"})}})}const{statistics:i}=this.props,{impressions:n}=i;return(0,z.jsx)(wx,{id:"closet_promotion.stats.chart.impressions",pluralize:!0,count:n,values:{count:(0,z.jsx)(xt.Z,{text:n,theme:"amplified"})}})}render(){return(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Tight,onClick:this.handleClick,children:[(0,z.jsx)(gt.Z,{title:(0,z.jsx)(wx,{id:"closet_promotion.stats.chart.title"}),suffix:this.renderDate()}),(0,z.jsx)(gt.Z,{children:(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center",children:[(0,z.jsx)(hQ,{}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,children:(0,z.jsx)(wx,{id:"closet_promotion.stats.chart.before_promotion"})})]}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Large}),(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center",children:[(0,z.jsx)(hQ,{stroke:this.chartColor}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,children:(0,z.jsx)(wx,{id:"closet_promotion.stats.chart.after_promotion"})})]})]})}),(0,z.jsx)("div",{className:"u-ui-padding-horizontal-medium",children:(0,z.jsx)(cQ,{data:this.data,interactive:!0,activePoint:this.state.activePoint,onPointClick:this.handlePointClick})}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{children:this.renderInfo()})})]})}}xQ(fQ,"defaultProps",{activePoint:null});const yQ=(0,iw.ZP)(fQ);function vQ(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const _Q="start",bQ="helpful",jQ="not_helpful",SQ={chart:0,interactions:1,tips:2};class ZQ extends m.Component{constructor(){super(...arguments),vQ(this,"categoryId",{chart:ZF().v4(),interactions:ZF().v4(),tips:ZF().v4()}),vQ(this,"state",{stage:_Q,helpful:null,feedback:null,disableSubmit:!0}),vQ(this,"handleButtonClick",(e=>{let{helpful:t}=this.state;null===t&&(t=e===bQ),this.setState({stage:e,helpful:t}),(0,Fe.Gn$)({uuid:this.categoryId[this.props.category],category:SQ[this.props.category],positive:!!t,feedback:this.state.feedback})})),vQ(this,"handleInputChange",(e=>{this.setState({feedback:e.target.value,disableSubmit:0===e.target.value.length})})),vQ(this,"handleSubmitButtonClick",(()=>{this.handleButtonClick("finished")})),vQ(this,"renderLink",(e=>{const t="closet_promotion.stats.feedback.".concat(e,"_action");return(0,z.jsx)("span",{tabIndex:0,role:"button",onClick:()=>this.handleButtonClick(e),onKeyPress:v.noop,children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,clickable:!0,text:(0,z.jsx)(wx,{id:t})})})}))}renderStartDescription(){return(0,z.jsxs)("div",{className:"closet-stats-feedback__body",children:[(0,z.jsxs)("div",{children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:(0,z.jsx)(wx,{id:"closet_promotion.stats.feedback.start"})}),(0,z.jsx)(x.Z,{size:x.Z.Size.Small,orientation:x.Z.Orientation.Vertical})]}),(0,z.jsxs)("div",{children:[this.renderLink(bQ),(0,z.jsx)(x.Z,{size:x.Z.Size.Small,orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:(0,z.jsx)(wx,{id:"closet_promotion.stats.feedback.separator"})}),(0,z.jsx)(x.Z,{size:x.Z.Size.Small,orientation:x.Z.Orientation.Vertical}),this.renderLink(jQ)]})]})}renderTextDescription(){return(0,z.jsx)("div",{className:"closet-stats-feedback__body",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:(0,z.jsx)(wx,{id:"closet_promotion.stats.feedback.".concat(String(this.state.stage))})})})}renderDescription(){return this.state.stage===_Q?this.renderStartDescription():this.renderTextDescription()}renderInput(){if(this.state.stage!==bQ&&this.state.stage!==jQ)return null;const e=(0,z.jsx)(ic.I,{disabled:this.state.disableSubmit,styling:ic.I.Styling.Flat,onClick:this.handleSubmitButtonClick,text:(0,z.jsx)(wx,{id:"closet_promotion.stats.feedback.submit"})});return(0,z.jsxs)("div",{children:[(0,z.jsx)(Gw,{name:"feedback_input",rows:1,onChange:this.handleInputChange}),(0,z.jsx)(gt.Z,{suffix:e})]})}render(){return(0,z.jsxs)("div",{children:[(0,z.jsx)(gt.Z,{children:(0,z.jsx)("div",{className:"u-flexbox",children:this.renderDescription()})}),this.renderInput()]})}}const IQ=ZQ;class CQ extends m.Component{renderTips(){const{tips:e}=this.props;return e.map((e=>(0,z.jsxs)("div",{children:[(0,z.jsx)(gt.Z,{prefix:(0,z.jsx)(ht.Z,{name:"light-bulb",color:ht.Z.Color.Primary}),type:gt.Z.Type.Navigating,chevron:!0,url:e.url,children:(0,z.jsx)("div",{children:(0,z.jsx)(wx,{id:"closet_promotion.stats.tips.".concat(e.name)})})}),(0,z.jsx)(h.Z,{})]},"tip-".concat(e.name))))}renderFeedback(e){const{performance:t,isFeedbackFeatureEnabled:i}=this.props;return t.ask_feedback[e]&&i?(0,z.jsxs)("div",{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(IQ,{category:e})]}):null}render(){const{performance:e,intl:t}=this.props;if((0,v.isEmpty)(e)||(0,v.isEmpty)(e.chart_data))return(0,z.jsxs)("div",{className:"small-container",children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(tc.Z,{title:(0,z.jsx)(wx,{id:"closet_promotion.stats.empty_state.title"}),body:(0,z.jsx)(wx,{id:"closet_promotion.stats.empty_state.body"}),animation:(0,z.jsx)(u.Z,{animationUrl:"".concat(Be.Fv,"/assets/animations/feedback-empty-state.json")})})]});const{item_clicks:i,item_favourites:n,followers:s}=(r=e.since_promotion,{item_clicks:t.formatNumber(Number(r.item_clicks)),profile_clicks:t.formatNumber(Number(r.profile_clicks)),followers:t.formatNumber(Number(r.followers)),item_favourites:t.formatNumber(Number(r.item_favourites))});var r;return(0,z.jsxs)("div",{className:"closet-stats",children:[(0,z.jsxs)("div",{className:"closet-stats__item u-background-white",children:[(0,z.jsx)("div",{className:"closet-stats__item-body",children:(0,z.jsx)(yQ,{statistics:this.props.performance})}),this.renderFeedback("chart")]}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Large}),(0,z.jsxs)("div",{className:"closet-stats__item u-background-white",children:[(0,z.jsxs)("div",{className:"closet-stats__item-body",children:[(0,z.jsx)(gt.Z,{title:(0,z.jsx)(wx,{id:"closet_promotion.stats.interactions.title"}),suffix:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,children:(0,z.jsx)(wx,{id:"closet_promotion.stats.interactions.since_promotion"})})}),(0,z.jsx)(gt.Z,{suffix:(0,z.jsx)(xt.Z,{text:"+".concat(i),type:xt.Z.Type.Heading}),children:(0,z.jsx)(xt.Z,{text:(0,z.jsx)(wx,{id:"closet_promotion.stats.interactions.item_clicks"}),width:xt.Z.Width.Parent})}),(0,z.jsx)(gt.Z,{suffix:(0,z.jsx)(xt.Z,{text:"+".concat(n||""),type:xt.Z.Type.Heading}),children:(0,z.jsx)(xt.Z,{text:(0,z.jsx)(wx,{id:"closet_promotion.stats.interactions.item_favourites"}),width:xt.Z.Width.Parent})}),(0,z.jsx)(gt.Z,{suffix:(0,z.jsx)(xt.Z,{text:"+".concat(s),type:xt.Z.Type.Heading}),children:(0,z.jsx)(xt.Z,{text:(0,z.jsx)(wx,{id:"closet_promotion.stats.interactions.followers"}),width:xt.Z.Width.Parent})})]}),this.renderFeedback("interactions")]}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Large}),(0,z.jsxs)("div",{className:"closet-stats__item u-background-white",children:[(0,z.jsxs)("div",{className:"closet-stats__item-body",children:[(0,z.jsx)(gt.Z,{title:(0,z.jsx)(wx,{id:"closet_promotion.stats.tips.title"})}),(0,z.jsx)(h.Z,{}),this.renderTips()]}),this.renderFeedback("tips")]})]})}}!function(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(CQ,"defaultProps",{tips:[],isFeedbackFeatureEnabled:!1});const kQ=(0,iw.ZP)(CQ),wQ=Pt({years:20});var PQ=i(67226);const zQ=e=>({hasObligations:e.has_obligations});function TQ(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const FQ=(0,p.$j)((e=>({locale:Nc(e),currentUser:W(e),exposee:we(e),autotranslateItemAbTest:Vn("autotranslate_item_machine_translations")(e)})));class NQ extends m.Component{constructor(){super(...arguments),TQ(this,"state",{isContentTranslated:!1,translatedContent:null}),TQ(this,"getAutotranslateAbTestExposeEvent",(()=>{const{autotranslateItemAbTest:e,userLocale:t,locale:i,track:n,exposee:s}=this.props;e&&t&&t.substring(0,2)!==i.substring(0,2)&&n(bn({...s,...e}))})),TQ(this,"translate",(async()=>{const{translatedContent:e}=this.state,{itemId:t}=this.props;if(e)return void this.setState({isContentTranslated:!0});const i=await(0,Fe.rVG)({id:t,localize:!0});if("errors"in i)return;const{item:n}=i;if(null==n||!n.description)return;const{title:s,description:r}=n;this.setState({translatedContent:{title:s,description:r},isContentTranslated:!0})})),TQ(this,"showOriginal",(()=>this.setState({isContentTranslated:!1}))),TQ(this,"handleTranslate",(e=>e?this.showOriginal():this.translate()))}componentDidMount(){this.getAutotranslateAbTestExposeEvent()}render(){const{translation:e,content:t}=this.props,{isContentTranslated:i,translatedContent:n}=this.state,s=i&&n||t;return(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Tight,children:[(0,z.jsx)("div",{itemProp:"name",children:(0,z.jsx)(xt.Z,{text:s.title,type:xt.Z.Type.Title})}),(0,z.jsx)(x.Z,{}),(0,z.jsx)("div",{className:"u-text-wrap",itemProp:"description",children:(0,z.jsx)(xt.Z,{format:!0,children:(0,z.jsx)(XP,{text:s.description})})}),(0,z.jsx)(x.Z,{}),e!==Ue.None&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Lx,{isTranslated:i,autotranslate:e===Ue.Auto,onClick:this.handleTranslate,tracking:{target:qm.TranslateDescription,targetDetails:this.props.itemId.toString()}}),(0,z.jsx)(x.Z,{})]})]})}}const LQ=FQ(zx(NQ)),EQ=e=>{let{show:t,onCloseClick:i,units:n,width:s,length:r}=e;const{track:a}=vi(),o=U(),l=If();return(0,m.useEffect)((()=>{t&&a(Gi({screen:$t.Item,target:cb.MeasurementsInfo}))}),[a,t]),(0,z.jsxs)(cp.Z,{testId:"measurements-info-modal",show:t,children:[(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(xt.Z,{text:o("item.measurements.modal.title"),type:xt.Z.Type.Heading,width:xt.Z.Width.Parent}),(0,z.jsx)(x.Z,{size:x.Z.Size.Regular}),(0,z.jsx)(xt.Z,{text:o("item.measurements.modal.body"),type:xt.Z.Type.Body})]}),s&&(0,z.jsx)(gt.Z,{testId:"measurements-info-modal-measurement-1",prefix:(0,z.jsx)(Kl.U,{size:Kl.U.Size.XLarge,alt:o("item.measurements.modal.a11y.image_shoulder_width_alt"),src:l("items/upload/shoulder-width.png")}),title:(0,z.jsx)(xt.Z,{text:o("item.measurements.shirt.shoulder_width")}),body:(0,z.jsxs)("b",{children:[s," ",n]})}),r&&(0,z.jsx)(gt.Z,{testId:"measurements-info-modal-measurement-2",prefix:(0,z.jsx)(Kl.U,{size:Kl.U.Size.XLarge,alt:o("item.measurements.modal.a11y.image_length_alt"),src:l("items/upload/lenght.png")}),title:(0,z.jsx)(xt.Z,{text:o("item.measurements.shirt.length")}),body:(0,z.jsxs)("b",{children:[r," ",n]})})]}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(ic.I,{testId:"measurements-info-modal-close-button",text:o("item.measurements.modal.actions.close"),styling:ic.I.Styling.Filled,onClick:i})})]})},OQ=e=>{let{width:t,length:i,units:n}=e;const s=Xn({abTestName:"measurements_redesigned",shouldTrackExpose:!0}),r="on"===(null==s?void 0:s.variant),[a,o]=(0,m.useState)(!1),l=U();return(t||i)&&r?(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Tight,children:[(0,z.jsxs)(gt.Z,{testId:"measurements-info",styling:gt.Z.Styling.Tight,onClick:()=>{o(!0)},clickable:!0,children:[(0,z.jsx)(xt.Z,{inline:!0,testId:"measurements-info-title",type:xt.Z.Type.Subtitle,text:l("item.measurements.title").toUpperCase()}),(0,z.jsx)(x.Z,{size:x.Z.Size.Small,orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(ht.Z,{name:"info-circle-filled",testId:"measurements-info-icon",size:ht.Z.Size.Small,color:ht.Z.Color.GreyscaleLevel3})]}),(0,z.jsx)(x.Z,{}),t&&(0,z.jsx)(gt.Z,{testId:"item-measurements-1",styling:gt.Z.Styling.Tight,body:"".concat(l("item.measurements.shirt.shoulder_width")," ").concat(t," ").concat(n)}),i&&(0,z.jsx)(gt.Z,{testId:"item-measurements-2",styling:gt.Z.Styling.Tight,body:"".concat(l("item.measurements.shirt.length")," ").concat(i," ").concat(n)}),(0,z.jsx)(EQ,{show:a,onCloseClick:()=>{o(!1)},width:t,length:i,units:n}),(0,z.jsx)(x.Z,{})]}):null},RQ="help_center_search_session_id",DQ="/help",AQ=/^\/([^/]+)\/?(\d+)?\/?(\d+)?/,MQ=/https?:\/\/[^\s/$.?#].[^\s"'>]*/g,UQ=(e,t,i)=>{if(3===e.id)return(0,ys.Iq)(DQ,{thread_id:i});const n="string"==typeof t?t:void 0,s=n===Be.Si.ConversationNoTx||n===Be.Si.ConversationTx,r=(e=>{let{id:t,title:i,faqEntryParentId:n}=e,s="";return n&&(s="".concat(n,"/")),s+=i?(0,v.kebabCase)("".concat(t,"-").concat(i)):t.toString(),s})(e);return(0,ys.Iq)("/help/".concat(r),{access_channel:s?n:Be.Si.HcTopics,thread_id:i})},BQ=(e,t)=>e.replace(MQ,(e=>e.includes(Me.lw5)?(0,ys.Iq)(e,{access_channel:Be.Si.HcTopics,thread_id:t}):e)),qQ=e=>{let{faqEntryId:t,accessChannel:i}=e;const n=(0,p.v9)(ze),{access_channel:s,thread_id:r}=xc().searchParams,a=(0,m.useRef)(Ct()),o=(0,m.useRef)(0),l=(0,m.useRef)(0),{track:c}=vi(),d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t=document.body.scrollHeight,i=document.documentElement.clientHeight+e;return i<=0?0:Math.floor(i/t*100)},u=(0,m.useCallback)((()=>{if(n)return;if(Array.isArray(s))return;const e=Ct()-a.current;var r;c({event:"user.leave_faq_entry",extra:{faq_entry_id:(r={faqEntryId:t,faqAccessChannel:s||i||null,initialPageScrollDepth:o.current,maxPageScrollDepth:l.current,totalViewTime:e}).faqEntryId,faq_access_channel:r.faqAccessChannel,initial_page_scroll_depth:r.initialPageScrollDepth,max_page_scroll_depth:r.maxPageScrollDepth,total_view_time:r.totalViewTime}})}),[n,s,c,t,i]),g=(0,m.useCallback)((()=>{const e=d(),t=d(window.pageYOffset);o.current=e,t>l.current&&(l.current=t)}),[]);return(0,m.useEffect)((()=>{n||"string"==typeof r&&c({event:"notices.user.open_faq",extra:{thread_id:{threadId:r}.threadId}})}),[n,r,c]),(0,m.useEffect)((()=>{const e=new ResizeObserver(g),t=document.body;return e.observe(t),()=>{e.unobserve(t)}}),[g]),(0,m.useEffect)((()=>(window.addEventListener("beforeunload",u),()=>{window.removeEventListener("beforeunload",u)})),[u]),(0,m.useEffect)((()=>(window.addEventListener("scroll",g),()=>{window.removeEventListener("scroll",g)})),[g]),null},VQ=e=>{let{faqEntryId:t,title:i,content:n,xhrRequest:s=!1,accessChannel:r}=e;const{thread_id:a}=xc().searchParams;return(0,z.jsxs)("article",{className:"faq__question-answer faq-content faq-content--accordion",children:[(0,z.jsx)(qQ,{faqEntryId:t,accessChannel:r}),!s&&(0,z.jsx)(x.Z,{}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:i}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),!!n&&(0,z.jsx)(xt.Z,{text:BQ(n,a),width:xt.Z.Width.Parent,html:!0})]})},HQ=e=>{let{faqEntryId:t,label:i,accessChannel:n,testId:s}=e;const[r,a]=(0,m.useState)(!1),[o,l]=(0,m.useState)(null),[c,d]=(0,m.useState)(null),{fetch:u,transformedData:p,isLoading:g}=ih(Fe.DMe,ex);(0,m.useEffect)((()=>{p&&(l(p.title),d(p.body))}),[p]);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(cp.Z,{hasScrollableContent:!0,show:r,children:(0,z.jsxs)("div",{className:"u-fill-width",children:[(0,z.jsx)(Pm.Z,{right:(0,z.jsx)(ic.I,{onClick:()=>{a(!1)},styling:ic.I.Styling.Flat,theme:"amplified",deprecatedIconName:"x",testId:"item-info-link-modal-close-button",inline:!0})}),(0,z.jsx)(Lg,{className:"u-padding-large",children:g?(0,z.jsx)(Mp,{styling:Mp.Styling.Wide,size:Mp.Size.Large,testId:"help-center-faq-entry-loader"}):(0,z.jsx)(VQ,{faqEntryId:t,accessChannel:n,title:o,content:c})})]})}),(0,z.jsx)("div",{"data-testid":s,className:"overflow-menu overflow-menu--top-right u-cursor-pointer",role:"button",tabIndex:0,onClick:()=>{a(!0),u(t.toString())},children:(0,z.jsx)(ht.Z,{name:"info-circle-filled",size:ht.Z.Size.XSmall,color:ht.Z.Color.GreyscaleLevel3,aria:{"aria-label":i},title:i})})]})};var GQ;!function(e){e.Item="item",e.User="user",e.Brand="brand"}(GQ||(GQ={}));const WQ=e=>{let{type:t,entityId:i,isFavourite:n,count:s=0}=e;const r=(0,p.I0)(),a=Ip(),o=(0,p.v9)(_e)||!1,[l,c]=(0,m.useState)(n),d=s+Number(l)-Number(n),[u,g]=(0,m.useState)(!1);(0,m.useEffect)((()=>{c(n)}),[n]);const h=ql((async function(e){"errors"in await(0,Fe.EZ0)({type:t,entityId:i})||a()&&(c((t=>{var i;const n=!t;return null==e||null===(i=e.onSuccess)||void 0===i||i.call(e,n),n})),g(!0))}),250);return{isFavourite:l,favouriteCount:d,toggleFavourite:o?h:function(){r(NL.openAuthModal())},hasFavouritedChanged:u}};WQ.Type=GQ;const XQ=WQ,YQ={[ic.I.Size.Small]:ht.Z.Size.XSmall,[ic.I.Size.Medium]:ht.Z.Size.Small},KQ=e=>{let{userId:t,username:i,isActive:n,useIcon:s,isFlat:r,size:a,inline:o,onFollowToggle:l,testId:c}=e;const d=U("user.follow_button"),{track:u}=vi(),{isFavourite:m,toggleFavourite:p}=XQ({type:XQ.Type.User,entityId:t,isFavourite:n});return(0,z.jsx)(ic.I,{size:a,styling:r?ic.I.Styling.Flat:m?void 0:ic.I.Styling.Filled,onClick:function(e){l?l({isFollowEvent:!m},e):u(Mi({userId:t,isFollowEvent:!m})),p()},text:m?d("following"):i?d("follow_username",{username:i}):d("follow"),deprecatedIcon:function(){const e=a?YQ[a]:ht.Z.Size.Regular;if(s)return m?(0,z.jsx)(ht.Z,{name:"checkmark",color:ht.Z.Color.Primary,size:e}):(0,z.jsx)(ht.Z,{name:"plus",color:ht.Z.Color.GreyscaleLevel7,size:e})}(),inline:o,testId:c})},JQ=e=>{let{children:t,iconName:i,truncate:n}=e;return(0,z.jsxs)("div",{className:"u-flexbox u-align-items-baseline",children:[(0,z.jsx)(ht.Z,{name:i,size:ht.Z.Size.Small,color:ht.Z.Color.GreyscaleLevel4,aria:{"aria-hidden":"true"}}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)("div",{className:n?"u-ellipsis":"",children:t})]})},QQ=e=>{let{user:t,showActions:i=!0,testId:n}=e;const s=U(),{formatRelativeTime:r}=Rx(),a=(0,p.v9)(W),{relativeUrl:o}=xc();return t?(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[(()=>{var e,i;if(!t)return null;const r=$e(t.feedback_reputation);return(0,z.jsxs)(gt.Z,{prefix:(0,z.jsx)(Tp,{src:null===(e=t.photo)||void 0===e?void 0:e.url,styling:Kl.U.Styling.Circle,size:Kl.U.Size.Large}),title:(0,z.jsx)(kK,{businessAccountName:null===(i=t.business_account)||void 0===i?void 0:i.name,login:t.login,isBusiness:t.business,isBody:!0,isBottomLoginHidden:!0,isBadgeHidden:!0}),url:(0,Me.G0B)(t.id),type:gt.Z.Type.Navigating,testId:n?"".concat(n,"-header"):void 0,chevron:!0,children:[(0,z.jsx)(Ox.Z,{aria:{"aria-label":r&&s("user.a11y.rating",{rating:r,max_rating:5})||""},value:r,text:t.feedback_count,size:Ox.Z.Size.Small,emptyStateText:s("user.feedback.no_reviews")}),t.business&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),(0,z.jsx)(oC.Z,{content:s("business.title"),testId:"seller-pro-badge"})]})]})})(),(()=>{var e,i;if(!t)return null;const a=t.business,o=a&&(null===(e=t.business_account)||void 0===e?void 0:e.email),l=a&&(null===(i=t.business_account)||void 0===i?void 0:i.legal_code);return(0,z.jsx)(gt.Z,{testId:n?"".concat(n,"-info"):void 0,children:(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),children:[(0,z.jsx)(JQ,{iconName:"location-pin",children:et(t)}),o&&(0,z.jsx)(JQ,{iconName:"envelope",truncate:!0,children:(0,z.jsx)("a",{href:"mailto:".concat(o),title:o,"data-testid":"seller-email-link",children:o})}),l&&(0,z.jsx)(JQ,{iconName:"check-circle",children:(0,z.jsx)("span",{"data-testid":"seller-legal-code",children:"".concat(s("user.verification.legal_code",{count:t.msg_template_count})," ").concat(l)})}),t.is_on_holiday&&(0,z.jsx)(JQ,{iconName:"umbrella",children:(0,z.jsx)("span",{children:s("user.on_holiday")})}),t.last_loged_on_ts&&(0,z.jsx)(JQ,{iconName:"clock",children:"".concat(s("user.last_seen")," ").concat(r(t.last_loged_on_ts))})]})})})(),i&&(()=>{if(!t)return null;if(!a||a.id===t.id)return null;if(wt(t.closet_countdown_end_date))return null;if(t.hates_you||t.is_hated)return(0,z.jsx)(gt.Z,{testId:n?"".concat(n,"-actions"):void 0,children:(0,z.jsx)(KQ,{userId:t.id,isActive:t.is_favourite,isFlat:!0})});const e=(0,ys.Iq)(Oc,{receiver_id:t.id,ref_url:o});return(0,z.jsx)(gt.Z,{testId:n?"".concat(n,"-actions"):void 0,children:(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsx)(ic.I,{text:s("user.action.write_message"),styling:ic.I.Styling.Flat,url:e}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large,orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(h.Z,{orientation:h.Z.Orientation.Vertical}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large,orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(KQ,{userId:t.id,isActive:t.is_favourite,isFlat:!0})]})})})()]}):null},$Q=e=>{var t;let{user:i,show:n,onClose:s}=e;const{track:r}=vi(),a=U("user.seller_policies"),{policies:o}=function(e){const[t,i]=(0,m.useState)(),n=(0,m.useCallback)((async()=>{if(!e)return;const t=await(0,Fe.fH7)({businessAccountId:e});"errors"in t||i((0,rt.mI)(t.terms))}),[e]);return(0,m.useEffect)((()=>{n()}),[n]),{policies:t}}(null===(t=i.business_account)||void 0===t?void 0:t.id);return(0,m.useEffect)((()=>{n&&r(Wi({screen:$t.SellerPolicies}))}),[r,n]),(0,z.jsx)(cp.Z,{show:n,hasScrollableContent:!0,testId:"policies-modal",children:(0,z.jsxs)("div",{className:"u-fill-width",children:[(0,z.jsx)(Pm.Z,{body:a("title"),right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,onClick:s,deprecatedIconName:"x"})}),(0,z.jsxs)(Lg,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,children:(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:a("legal_imprint")}),fullWidthTitle:!0}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,title:a("business_name"),body:(0,z.jsx)(xt.Z,{text:null===(l=i.business_account)||void 0===l?void 0:l.legal_name,testId:"policies-modal-business-name"})}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,title:a("legal_code_number"),body:(0,z.jsx)(xt.Z,{text:null===(c=i.business_account)||void 0===c?void 0:c.legal_code,testId:"policies-modal-legal-code"})})]})}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:a("terms_and_conditions")}),body:(0,z.jsx)(xt.Z,{text:(null==o?void 0:o.termsAndConditions)||a("not_specified"),testId:"policies-modal-terms-conditions"}),fullWidthTitle:!0}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:a("return_policy")}),body:(0,z.jsx)(xt.Z,{text:(null==o?void 0:o.returnPolicy)||a("not_specified"),testId:"policies-modal-return-policy"}),fullWidthTitle:!0}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:a("additional_information")}),body:(0,z.jsx)(xt.Z,{text:(null==o?void 0:o.additionalInformation)||a("not_specified"),testId:"policies-modal-additional-information"}),fullWidthTitle:!0}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]})]})});var l,c},e$=e=>{let{user:t}=e;const[i,n]=(0,m.useState)(!1),s=U("item.footnotes");function r(){n((e=>!e))}const a={"exceptions-link":e=>(0,z.jsx)(_p,{type:bp.BusinessRow,render:t=>(0,z.jsx)("a",{href:t,"data-testid":"item-legal-footnote-exceptions-link",children:e})}),"pro-terms-of-sale-link":e=>(0,z.jsx)("a",{href:Me.$ru,"data-testid":"item-legal-footnote-pro-terms-link",children:e}),"pro-sellers-policies":e=>(0,z.jsx)("span",{onClick:r,children:(0,z.jsx)(xt.Z,{as:"a",clickable:!0,text:e,type:xt.Z.Type.Caption,testId:"item-legal-footnote-policies-link"})}),"buyer-protection-pro-link":e=>(0,z.jsx)("a",{href:Me.hXo,"data-testid":"item-legal-footnote-pro-protection-link",children:e})},o={"here-link":e=>(0,z.jsx)("span",{onClick:r,children:(0,z.jsx)(xt.Z,{as:"a",clickable:!0,text:e,type:xt.Z.Type.Caption,testId:"item-dpo-footnote-here-link"})}),"privacy-policy-link":e=>(0,z.jsx)("a",{href:Me.hOY,"data-testid":"item-dpo-privacy-policy-link",children:e})};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(ah.Z,{styling:ah.Z.Styling.Narrow,text:s("legal",a),testId:"item-legal-footnote"}),(0,z.jsx)(ah.Z,{styling:ah.Z.Styling.Narrow,text:s("dpo",o),testId:"item-dpo-footnote"}),(0,z.jsx)($Q,{user:t,show:i,onClose:r})]})};let t$,i$;!function(e){e[e.ShipmentInstructionsConfirmed=250]="ShipmentInstructionsConfirmed"}(t$||(t$={})),function(e){e.All="all",e.Home="home",e.DropOff="drop_off"}(i$||(i$={}));const n$="".concat(Be.Fv,"/assets/shipping/box-discount.svg"),s$="".concat(Be.Fv,"/assets/shipping/box-discount-dark.svg"),r$=e=>{let{deliveryType:t,discountPercentage:i}=e;const n=U("item.shipment_options.discount.title"),s=Bg()?s$:n$,r=y()("shipping-discount-banner",{"shipping-discount-banner--dark":Bg()});return(0,z.jsx)("div",{className:r,"data-testid":"shipping-discount-banner",children:(0,z.jsx)(gt.Z,{title:(0,z.jsx)(xt.Z,{text:n(t===i$.All?"all":t===i$.DropOff?"drop_off":"home",{percentage:i}),type:xt.Z.Type.Subtitle,theme:"amplified"}),suffix:(0,z.jsx)(Kl.U,{src:s,size:Kl.U.Size.Medium,testId:"shipping-discount-banner-icon"}),theme:"transparent"})})},a$=e=>{let{itemId:t}=e;const i=U("item.shipment_options"),{track:n}=vi(),{fetch:s,transformedData:r}=ih(Fe.VTe,Kh),a=function(e){let{shippingDetails:t,trimTranslation:i=!1}=e;const n=U("item.shipment_options"),s=(0,p.v9)(Nc),r=(0,p.v9)(se);if(!t)return null;const{price:a,isPickupOnly:o,isFreeShipping:l,areMultipleShippingOptionsAvailable:c}=t,d=Ua(a,s);return c?l?n("free_shipping"):i?n("price_from",{value:d}).toLowerCase():n("shipping_from",{value:d}):o?r?n("pickup_at",{location:r}):n("no_shipping"):l?n("free_shipping"):i?d:"".concat(n("shipping")," ").concat(d)}({shippingDetails:r||void 0,trimTranslation:!0});if((0,m.useEffect)((()=>{t&&s(t)}),[t,s]),(0,m.useEffect)((()=>{if(!r)return;const e=Ji({screen:$t.Item,prices:[r.price.amount],itemId:t});n(e)}),[n,t,r]),!r)return null;const o=r.isFreeShipping?i("free_shipping"):i("shipping"),l=r.isFreeShipping?"":a;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,title:(0,z.jsx)(xt.Z,{text:o,type:xt.Z.Type.Subtitle,theme:"amplified",testId:"item-shipping-banner-title"}),suffix:(0,z.jsx)(xt.Z,{text:l,type:xt.Z.Type.Subtitle,testId:"item-shipping-banner-price"}),testId:"item-shipping-banner"}),r.discount&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{}),(0,z.jsx)(r$,{deliveryType:r.discount.deliveryType,discountPercentage:r.discount.maxPercent})]})]})};function o$(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const l$={fetchSystemConfiguration:MZ.fetchSystemConfigurationRequest},c$=(0,p.$j)((e=>({systemConfiguration:Is(e)})),l$);class d$ extends m.Component{constructor(){super(...arguments),o$(this,"state",{isExpanded:!1,urls:{buyerProtection:null,civilCode:null,lawOfObligations:null}}),o$(this,"handleActionClick",(()=>{this.setState((e=>({isExpanded:!e.isExpanded})))}))}componentDidMount(){this.props.fetchSystemConfiguration()}setUrls(e){let{urls:t}=e;const{buyerProtection:i,civilCode:n,lawOfObligations:s}=t;this.setState({urls:{buyerProtection:i||"",civilCode:n||"",lawOfObligations:s||""}})}componentDidUpdate(e){const{systemConfiguration:t}=this.props;t&&e.systemConfiguration!==t&&this.setUrls(t)}renderLink(e,t){return null===e?t:(0,z.jsx)("a",{href:e,target:"blank",rel:"noopener noreferrer",children:t})}renderAction(){const{isExpanded:e}=this.state;return e?null:(0,z.jsx)("span",{onClick:this.handleActionClick,children:(0,z.jsx)(xt.Z,{inline:!0,type:xt.Z.Type.Subtitle,clickable:!0,children:(0,z.jsx)(vt.Z,{id:"buyer_rights.actions.show_more"})})})}renderExpandedMessage(){const{isExpanded:e,urls:t}=this.state;if(!e)return null;const i={"link-law-obligations":e=>this.renderLink(t.lawOfObligations,e),"link-civil-code":e=>this.renderLink(t.civilCode,e),"link-buyer-protection":e=>this.renderLink(t.buyerProtection,e)};return(0,z.jsx)(vt.Z,{id:"buyer_rights.message.remaining",values:i})}render(){return(0,z.jsxs)(gt.Z,{theme:"transparent",children:[(0,z.jsxs)(xt.Z,{inline:!0,type:xt.Z.Type.Subtitle,children:[(0,z.jsx)(vt.Z,{id:"buyer_rights.message.initial"}),this.renderExpandedMessage()]}),this.renderAction()]})}}const u$=c$((0,iw.ZP)(d$)),m$=e=>{let{title:t,url:i,subtitle:n,bottomLinkTitle:s,bottomLinkUrl:r}=e;const{track:a}=vi();function o(e){a(Ri({target:e}))}return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(ic.I,{text:t,url:i,styling:ic.I.Styling.Filled,onClick:function(){o(qm.MergeAnnouncementAction)}}),(0,z.jsx)(x.Z,{}),(0,z.jsxs)(xt.Z,{type:xt.Z.Type.Subtitle,alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent,children:["".concat(n," "),(0,z.jsx)("a",{href:r,className:"u-no-wrap",onClick:function(){o(qm.MergeAnnouncementLink)},children:s})]})]})};class p$ extends m.Component{constructor(){super(...arguments),function(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(this,"handleToggle",(()=>{const{track:e,trackingProps:t}=this.props;t&&e(Ri(t))}))}renderContent(e){return"string"!=typeof e?e:(0,z.jsx)("span",{dangerouslySetInnerHTML:{__html:e}})}render(){const{content:e,title:t,isExpanded:i,headerId:n,bodyId:s}=this.props;return(0,z.jsx)(PZ.Z,{content:this.renderContent(e),title:t,onToggle:this.handleToggle,isExpanded:i,headerId:n,bodyId:s})}}const g$=zx(p$),h$=e=>{let{faqId:t}=e;const i=U("help_center.faq_feedback_form"),[n,s]=(0,m.useState)(!1),[r,a]=(0,m.useState)(),[o,l]=(0,m.useState)(),[c,d]=(0,m.useState)(),{access_channel:u}=xc().searchParams;(0,m.useEffect)((()=>{(async()=>{const e=await(0,Fe.Q1T)(t);if("errors"in e)return;const i=Lh(e.feedback_ratings);a(e.feedback_uuid),d(i)})()}),[t]);const p=async e=>{let{rating:i,message:n,feedbackStatementIds:s,finalized:a}=e;r&&await(0,Fe.Lu2)({accessChannel:"string"==typeof u?u:void 0,message:n,feedbackUuid:r,faqId:t,rating:i,feedbackStatementIds:s,finalized:a})},g=(e,t)=>{return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(ic.I,{inline:!0,deprecatedIconName:Yw[t],deprecatedIconColor:"parent",size:ic.I.Size.Medium,onClick:(i=t,async()=>{l(i),s(!0),await p({rating:i})}),testId:"feedback-button-".concat(Yw[t]),children:e})]});var i};return(0,z.jsxs)(z.Fragment,{children:[(()=>{const e={"no-link":e=>g(e,2),"yes-link":e=>g(e,4)},t=o?i("answer"):i("question",e);return(0,z.jsx)(xt.Z,{type:xt.Z.Type.Body,bold:!0,as:"div",text:t})})(),(0,z.jsx)($w,{selectedRating:o,isOpen:n,ratings:c,onClose:()=>{s(!1)},onSubmit:async e=>{let{rating:t,message:i,feedbackStatementIds:n,finalized:r}=e;if(r)return s(!1),void await p({rating:t,message:i,feedbackStatementIds:n,finalized:r});await p({rating:t})}})]})},x$=e=>{let{feedbacks_path:t}=e;const i=U("help_center_feedback.feedback_form_link");return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(ic.I,{url:t,text:i("fill_feedback_form_text"),styling:ic.I.Styling.Filled,size:ic.I.Size.Medium,testId:"fill-feedback-form-button",inline:!0})]})};let f$;!function(e){e.Full="full",e.Partial="partial"}(f$||(f$={}));const y$=e=>{let{children:t,showControls:i=!0,allowVerticalOverflow:n,disableIosSmoothScroll:s,controlsScrollType:r=f$.Full}=e;const a=U(),[o,l]=(0,m.useState)(!1),[c,d]=(0,m.useState)(!1),u=(0,m.useRef)(null),p=(0,m.useCallback)((()=>{const e=u.current;e&&(l(e.scrollLeft>0),d(e.scrollWidth>e.clientWidth+e.scrollLeft))}),[]);(0,m.useEffect)((()=>{p()}),[p]);const g=(e,t,i)=>{const n=u.current;if(!n)return;const s=i||n.scrollLeft,r=t?e-s:e-s-n.clientWidth;if(!r)return;const a=Math.min(10,Math.abs(r)),o=r>0?s+a:s-a;n.scrollTo(o,0),setTimeout(g.bind(null,e,t,o),5)},h=y()("u-position-relative",{"u-overflow-hidden":!n}),x=y()("horizontal-scroll__content",{"horizontal-scroll__content--ios-smooth-scroll":!s});return(0,z.jsx)("div",{className:h,children:(0,z.jsx)("div",{className:x,ref:u,onScroll:p,children:(0,z.jsxs)("div",{className:"horizontal-scroll__rail",children:[t,i&&(0,z.jsxs)("div",{className:"horizontal-scroll__controls",children:[o&&(0,z.jsx)("button",{type:"button",className:"horizontal-scroll__handle horizontal-scroll__left-handle",onClick:e=>{if(e.preventDefault(),!u.current)return;const t=r===f$.Full?0:u.current.scrollLeft-u.current.clientWidth;g(t,!0)},children:(0,z.jsx)(ht.Z,{title:a("a11y.actions.move_left"),name:"slider-arrow-left",size:ht.Z.Size.Medium})}),c&&(0,z.jsx)("button",{type:"button",className:"horizontal-scroll__handle horizontal-scroll__right-handle",onClick:e=>{if(e.preventDefault(),!u.current)return;const t=r===f$.Full?u.current.scrollWidth+1:2*u.current.clientWidth+u.current.scrollLeft;g(t)},children:(0,z.jsx)(ht.Z,{title:a("a11y.actions.move_right"),name:"slider-arrow-right",size:ht.Z.Size.Medium})})]})]})})})};y$.Item=e=>{let{children:t,className:i,innerRef:n,onClick:s=v.noop,testId:r}=e;const a=y()("horizontal-scroll__item",i);return(0,z.jsx)("article",{className:a,ref:n,onClick:s,"data-testid":r,children:t})};const v$=y$;function _$(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const b$={onSetSelectedItems:iL.setSelectedItems,onStartCheckout:SV},j$=(0,p.$j)((e=>({locale:Nc(e)})),b$);class S$ extends m.Component{constructor(){super(...arguments),_$(this,"handleAddButtonClick",(e=>{const{onAddButtonClick:t,isInitiatedFromMultiSelect:i}=this.props;(t||i)&&e.preventDefault(),t?t():i&&gs("react:fancybox:close")})),_$(this,"handleRemoveButtonClick",(e=>()=>{const{items:t,onSetSelectedItems:i,onStartCheckout:n}=this.props;e&&(i({itemIds:(0,v.filter)(t,(t=>t.id!==e.id)).map((e=>{let{id:t}=e;return t}))}),n({}))})),_$(this,"formatNullPriceLabel",((e,t)=>{const{isOrderLoading:i}=this.props;return t&&!i?e:(0,z.jsx)("span",{className:"u-visibility-hidden",children:"-"})}))}renderOldPrice(e){const{locale:t}=this.props,i=parseFloat(e.payable.amount),n=parseFloat(e.discount.amount);return 0!==i&&0===n?(0,z.jsx)("span",{className:"u-visibility-hidden",children:"-"}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),(0,z.jsx)(xt.Z,{width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,type:xt.Z.Type.Subtitle,strikethrough:!0,text:Ua(Va(e.total),t)})]})}renderItemPrice(e){const{locale:t}=this.props,i=e?Ua(Va(e.payable),t):"",n=this.formatNullPriceLabel(i,e),s=e?this.renderOldPrice(e):"",r=this.formatNullPriceLabel(s,e);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{}),(0,z.jsx)(xt.Z,{width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,type:xt.Z.Type.Subtitle,theme:"amplified",text:n}),r]})}renderItems(){const{items:e,orderItems:t,canAddItems:i}=this.props,n=(0,v.keyBy)(t,"item_id"),s=Bg();return e.map((t=>{const r=Wa(t.photos,Xe.Medium);return(0,z.jsxs)(v$.Item,{children:[1===e.length?(0,z.jsx)(Kl.U,{src:r,size:Kl.U.Size.X3Large,styling:Kl.U.Styling.Rounded}):(0,z.jsxs)("div",{className:"bump-items_content-overlay",children:[i&&(0,z.jsx)("button",{type:"button",className:y()("button-overlay",s&&"button-overlay--dark"),onClick:this.handleRemoveButtonClick(t),"data-testid":"push-up-remove-item-button-".concat(t.id),children:(0,z.jsx)(ht.Z,{name:"x",size:ht.Z.Size.XSmall,color:s?ht.Z.Color.GreyscaleLevel7:ht.Z.Color.GreyscaleLevel1})}),(0,z.jsx)(Kl.U,{src:r,size:Kl.U.Size.X3Large,styling:Kl.U.Styling.Rounded})]}),this.renderItemPrice(n[t.id])]},t.id)}))}renderAddButton(){const{canAddItems:e,items:t}=this.props,i=t.map((e=>{let{id:t}=e;return t})),n=(0,ys.Iq)(Me.aeV,{item_ids:i});return e?(0,z.jsx)("div",{className:"u-flexbox u-align-items-center",children:(0,z.jsx)("a",{className:"u-flexbox",href:n,onClick:this.handleAddButtonClick,"data-testid":"push-up-add-more-items-button",children:(0,z.jsx)(ht.Z,{name:"plus-square",size:ht.Z.Size.Medium,color:"parent"})})}):null}render(){const{canAddItems:e}=this.props;return(0,z.jsx)(gt.Z,{children:(0,z.jsx)("div",{className:"u-flexbox u-align-items-center",children:(0,z.jsx)("div",{className:"u-fill-width u-text-right u-nowrap u-overflow-hidden",children:(0,z.jsxs)(v$,{showControls:!0,children:[this.renderItems(),e&&(0,z.jsx)(v$.Item,{children:(0,z.jsx)("div",{className:"u-flexbox u-fill-height u-align-items-center u-ui-padding-horizontal-x-large",children:this.renderAddButton()})},"add-more-items")]})})})})}}_$(S$,"defaultProps",{items:[],orderItems:[],canAddItems:!0,isOrderLoading:!1,isInitiatedFromMultiSelect:!1});const Z$=j$(S$),I$=()=>{const e=U("bump_items.selection_confirmation_modal");return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Small,orientation:x.Z.Orientation.Horizontal}),(0,z.jsx)(oC.Z,{theme:"success",content:(0,z.jsx)(xt.Z,{theme:"inverse",type:xt.Z.Type.Caption,text:e("duration.best_value_badge_text")})}),(0,z.jsx)(x.Z,{size:x.Z.Size.Small,orientation:x.Z.Orientation.Horizontal})]})},C$=e=>{let{index:t,onSelect:i,isSelected:n,pushUpOption:s,shouldShowPrice:r,isInternationalBumpEnabled:a}=e;const o=(0,p.v9)(Nc);return(0,z.jsx)(gt.Z,{clickable:!0,title:function(){const{description:e,isBestValue:t}=s;return(0,z.jsxs)(z.Fragment,{children:[!a&&t&&(0,z.jsx)(I$,{}),(0,z.jsx)(xt.Z,{text:e})]})}(),body:function(){if(!a)return null;const{countries:e}=s;return(0,z.jsx)(xt.Z,{theme:"muted",text:e})}(),suffix:function(){const{payable:e}=s;return(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Narrow,suffix:(0,z.jsx)(qx.J,{checked:n,name:"push_up_option",value:t}),children:r?Ua(e,o):void 0})}(),styling:gt.Z.Styling.Narrow,onClick:function(){n||i()}})},k$=e=>{let{onSelect:t,pushUpOptions:i,selectedPushUpOption:n,internationalPushUpVariant:s}=e;const r=(0,p.I0)();(0,m.useEffect)((()=>{n&&r(iL.setSelectedPushUpOption({selectedPushUpOption:n}))}),[]);const a=e=>()=>{t(e)};return(0,z.jsx)(kp,{children:i.map(((e,t)=>{return(0,z.jsx)(m.Fragment,{children:(0,z.jsx)(C$,{index:t,pushUpOption:e,onSelect:a(e),isSelected:(i=e,r=n,i===r||i.days===r.days&&i.international===r.international),shouldShowPrice:"b"===s,isInternationalBumpEnabled:"off"!==s})},t);var i,r}))})},w$=e=>{let{pushUpOption:t}=e;const i=U("bump_items.selection_confirmation_modal"),n=t.days;return(0,z.jsx)(xt.Z,{text:i("duration.days",{count:n},{count:n})})},P$=e=>{let{canAddItems:t=!0,show:i,onCancel:n,onConfirm:s,onAddButtonClick:r,onHelpButtonClick:a,isInitiatedFromMultiSelect:o}=e;const l=(0,p.v9)(Nc),c=(0,p.v9)(gM),d=(0,p.v9)(oM),u=(0,p.v9)(pM),g=(0,p.v9)(yM),f=(0,p.v9)(dM),y=(0,p.v9)(SM),v="off"!==y&&!!u.length&&u.length<4;Xn({abTestName:"international_national_bump",shouldTrackExpose:i});const _=(0,p.I0)(),{track:b}=vi(),j=U("bump_items.selection_confirmation_modal"),S=f.prepareUiState===Ne.Pending;function Z(){!S&&g&&(s(),b(Ri({screen:$t.PushUpOrderReview,target:qm.ReviewPushupOrder,targetDetails:g.days.toString()})))}function I(){n(),b(Ri({screen:$t.PushUpOrderReview,target:qm.CloseScreen}))}return(0,m.useEffect)((()=>{i&&b(Wi({screen:$t.PushUpOrderReview}))}),[i,b]),(0,z.jsx)(cp.Z,{show:i,hasScrollableContent:!0,testId:"push-ups-selection-confirmation-modal",children:(0,z.jsxs)("div",{className:"u-fill-width",children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Narrow,prefix:(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Horizontal,size:x.Z.Size.X3Large}),suffix:(0,z.jsx)(ic.I,{deprecatedIconName:"question-circle",styling:ic.I.Styling.Flat,onClick:function(){a(),b(Ri({screen:$t.PushUpOrderReview,target:qm.PushUpLearnMode}))}}),children:(0,z.jsx)("div",{className:"u-text-center",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,alignment:xt.Z.Alignment.Center,text:j("title")})})}),(0,z.jsxs)(Lg,{children:[null!=d&&d.motivation?(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Narrow,children:(0,z.jsx)(xt.Z,{format:!0,type:xt.Z.Type.Subtitle,width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,text:d.motivation.description,theme:d.motivation.highlight?"success":void 0})}):null,(0,z.jsxs)("div",{className:"u-fill-width",children:[(0,z.jsx)(Z$,{items:c,canAddItems:t,isOrderLoading:S,orderItems:function(){if(null==g||!g.pushUpOrderItems)return[];const{pushUpOrderItems:e}=g;return e.map((e=>({item_id:e.itemId,total:{amount:e.total.amount,currency_code:e.total.currencyCode},payable:{amount:e.payable.amount,currency_code:e.payable.currencyCode},discount:{amount:e.discount.amount,currency_code:e.discount.currencyCode},discounted:{amount:e.discounted.amount,currency_code:e.discounted.currencyCode}})))}(),isInitiatedFromMultiSelect:o,onAddButtonClick:function(){r(),b(Ri({screen:$t.PushUpOrderReview,target:qm.MultiplePushUp}))}}),(0,z.jsx)(h.Z,{}),(0,z.jsxs)(gt.Z,{title:j("duration.details.title"),prefix:(0,z.jsx)(ht.Z,{size:ht.Z.Size.Regular,name:"bump"}),children:[(0,z.jsx)(xt.Z,{text:j("duration.details.subtitle_single_option")}),(0,z.jsx)(x.Z,{}),(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Horizontal}),children:[v||!d?null:u.length>1&&g?(0,z.jsx)(k$,{pushUpOptions:u,selectedPushUpOption:g,internationalPushUpVariant:y,onSelect:function(e){_(iL.setSelectedPushUpOption({selectedPushUpOption:e})),b(Ri({screen:$t.PushUpOrderReview,target:qm.PushUpDurationChange,targetDetails:JSON.stringify({dutation:e.days.toString(),is_international:e.international})}))}}):1===u.length?(0,z.jsx)(w$,{pushUpOption:d[0]}):null,function(){const{order:e}=f;return null!=e&&e.salesTax?(0,z.jsx)(xt.Z,{text:j("duration.details.sales_tax_note"),testId:"push-ups-selection-confirmation-modal--sales-tax-note"}):null}()]})]})]}),function(){const e=g?Ua(g.payable,l):"";return(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(ic.I,{isLoading:S||v,styling:ic.I.Styling.Filled,text:j("actions.review_order",{amount:e}),onClick:Z,testId:"push-ups-review-order-button"}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,text:j("actions.cancel"),onClick:I})]})}()]})]})})},z$=e=>{let{theme:t}=e;const i=U("extra_services");function n(e,t){return(0,z.jsx)("a",{href:e,target:"blank",rel:"noopener noreferrer",children:t})}return(0,z.jsx)(gt.Z,{theme:"transparent",children:(0,z.jsx)(xt.Z,{theme:t,children:i("checkout.policy_note",{terms:n(Me.qyY,i("terms")),price_list:n(Me.Z2t,i("price_list"))})})})},T$=e=>{let{order:t,selectedOption:i,onShowSalesTaxModal:n}=e;const s=U("bump_items.order_confirmation_modal.order_summary"),r=(0,p.v9)(Nc),a=(0,p.v9)(SM);return(0,z.jsxs)(gt.Z,{children:[(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),children:[function(){const e=t.pushUpOrderItems.length,n=s("price.push_up_count",{count:e},{count:e}),o="off"===a?s("price.push_up_period_and_count",{period:i.days,pushUpCountTranslation:n},{count:i.days}):i.description;return(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,suffix:Ua(t.total,r),children:(0,z.jsx)(xt.Z,{text:o})})}(),parseFloat(t.discount.amount)<=0?null:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,suffix:"".concat(Ua(t.discount,r,{formatAsNegative:!0})),children:(0,z.jsx)(xt.Z,{theme:"success",text:s("discount",{percentage:t.discountPercentage})})}),parseFloat(t.freePushUpsValue.amount)<=0?null:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,suffix:"".concat(Ua(t.freePushUpsValue,r,{formatAsNegative:!0})),children:(0,z.jsx)(xt.Z,{text:s("free_push_ups",{count:t.freeCount},{count:t.freeCount})})})]}),function(){const{salesTax:e}=t;return null!=e&&e.amount?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,suffix:"".concat(Ua(e,r)),testId:"push-ups-order-summary-sales-tax",children:(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center",children:[(0,z.jsx)(xt.Z,{text:s("sales_tax"),testId:"push-ups-order-summary-sales-tax--title"}),(0,z.jsx)(ic.I,{deprecatedIcon:(0,z.jsx)(ht.Z,{name:"info-circle",size:ht.Z.Size.Small,color:ht.Z.Color.GreyscaleLevel3,aria:{"aria-label":s("a11y.sales_tax_info")}}),inline:!0,size:ic.I.Size.Small,styling:ic.I.Styling.Flat,onClick:n,testId:"push-ups-order-summary-sales-tax--info-circle"})]})}),t.isTaxCovered&&(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,body:(0,z.jsx)(xt.Z,{text:s("sales_tax_covered_by_vinted"),highlightTheme:"amplified",type:xt.Z.Type.Subtitle,testId:"push-ups-order-summary-sales-tax--covered-by-vinted"})})]}):null}(),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,title:s("total"),suffix:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:Ua(t.payable,r)})})]})]})},F$=e=>{let{show:t,onBack:i,onConfirmOrder:n,onShowSalesTaxModal:s,onPaymentMethodSelect:r}=e;const a=U("bump_items.order_confirmation_modal"),o=U("payment_method_selection.errors"),{track:l}=vi(),[c,d]=(0,m.useState)(),u=(0,p.v9)(gM),g=(0,p.v9)(vM),f=(0,p.v9)(ZC),y=(0,p.v9)(CC),v=(0,p.v9)(yM),_=(0,p.v9)(FC),b=(0,p.v9)(dM),j=(0,p.v9)(_M),{order:S}=b,Z=(0,p.v9)((e=>NC(e,null==S?void 0:S.payable.amount))),I=(0,p.v9)((e=>PC(e,null==S?void 0:S.payable.amount))),C=!!Z||g;return(0,m.useEffect)((()=>{t&&l(Wi({screen:$t.PushUpOrderConfirmation}))}),[t,l]),(0,m.useEffect)((()=>{C&&c&&d(void 0)}),[C,c]),(0,z.jsx)(cp.Z,{show:t,hasScrollableContent:!0,testId:"push-ups-order-confirmation-modal",children:(0,z.jsxs)("div",{className:"u-fill-width",children:[(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{children:(0,z.jsx)(Pm.Z,{body:a("order_summary.title"),testId:"push-ups-confirmation-modal-title"})}),(0,z.jsx)("div",{className:"u-padding-horizontal-medium",children:(0,z.jsx)(Kp,{screen:Hp.VASCheckout})}),(0,z.jsx)(h.Z,{})]}),(0,z.jsxs)(Lg,{children:[S?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Z$,{items:u,canAddItems:!1,orderItems:function(){if(!S)return[];const{pushUpOrderItems:e}=S;return e.map((e=>({item_id:e.itemId,total:{amount:e.total.amount,currency_code:e.total.currencyCode},payable:{amount:e.payable.amount,currency_code:e.payable.currencyCode},discount:{amount:e.discount.amount,currency_code:e.discount.currencyCode},discounted:{amount:e.discounted.amount,currency_code:e.discounted.currencyCode}})))}()}),(0,z.jsx)(h.Z,{}),S&&v?(0,z.jsx)(T$,{order:S,selectedOption:v,onShowSalesTaxModal:function(){var e;s(),l(Ri({target:qm.SalesTaxInfo,screen:$t.PushUpOrderConfirmation,targetDetails:JSON.stringify({vas_order_id:null===(e=b.order)||void 0===e?void 0:e.id})}))}}):null,(0,z.jsx)(h.Z,{}),!g&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Hk,{error:c,walletBalance:f,activePayInMethod:Z,selectedCreditCard:_,onPaymentMethodSelect:r}),(0,z.jsx)(h.Z,{})]}),(0,z.jsx)(z$,{}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),function(){if(!S||!f)return null;const e=(null==Z?void 0:Z.code)===iv.Wallet;return I||e?null:(0,z.jsx)(ah.Z,{alignment:ah.Z.Alignment.Center,text:a("wallet_funds_availability_note")})}()]}):null,(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(ic.I,{disabled:j,isLoading:y===Oi.Processing,text:a("actions.place_order"),styling:ic.I.Styling.Filled,onClick:function(){C?(function(){if(!S)return;const e=S.pushUpOrderItems.length>1?qm.ConfirmMultipleItemsPushUp:qm.ConfirmItemPushUp;l(Ri({screen:$t.PushUpOrderConfirmation,target:e}))}(),n()):d(o("not_selected_payment_method"))},testId:"push-ups-place-order-button"}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,text:a("actions.back"),onClick:i})]})]})]})})},N$=e=>{let{show:t,onCloseOrConfirm:i}=e;const n=U("bump_items.value_proposition_modal_v2"),s=Ql()?"-dark":"",r={"help-center":e=>(0,z.jsx)(_p,{type:bp.PushUp,accessChannel:Be.Si.ProductLink,render:t=>(0,z.jsx)("a",{href:t,target:"_blank",rel:"noreferrer",children:e})})},a=[{icon:"bump",text:n("body.one")},{icon:"target-arrow",text:n("body.two")},{icon:"chart",text:n("body.three")},{icon:"price-tag",text:n("body.four")}],o=()=>{i()};return(0,z.jsx)(cp.Z,{defaultCallback:o,show:t,testId:"push-ups-value-proposition-modal",children:(()=>{const e="".concat(Be.Fv,"/assets/push-ups/new-value-proposition").concat(s,".png"),t="".concat(Be.Fv,"/assets/push-ups/new-value-proposition").concat(s,".png 1x, ").concat(Be.Fv,"/assets/push-ups/new-value-proposition").concat(s,"@2x.png 2x");return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Pm.Z,{body:n("title"),right:(0,z.jsx)(ic.I,{inverse:!0,inline:!0,deprecatedIconName:"x",onClick:o}),testId:"push-ups-confirmation-modal-title"}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(Kl.U,{src:e,srcset:t,scaling:Kl.U.Scaling.Cover,ratio:Kl.U.Ratio.Landscape}),(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Wide,children:[(0,z.jsx)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),children:a.map((e=>{let{icon:t,text:i}=e;return(0,z.jsxs)("div",{className:"u-flexbox u-gap-medium",children:[(0,z.jsx)(ht.Z,{color:ht.Z.Color.GreyscaleLevel4,name:t,title:t}),(0,z.jsx)(xt.Z,{html:!0,text:i,type:xt.Z.Type.Body})]},"body-bullet-".concat(t))}))}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Body,children:n("actions.learn_more",r)}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(ic.I,{text:n("actions.confirm"),styling:ic.I.Styling.Filled,size:ic.I.Size.Medium,onClick:i,testId:"push-ups-confirm-button"})]})]})})()})},L$=()=>{const e=U("extra_services.checkout.order_status_modal.push_up_order.item_deleted"),[t,i]=(0,m.useState)(!0);return(0,z.jsx)(cp.Z,{show:t,testId:"push-up-order-error-modal",children:(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center",children:(0,z.jsx)(ht.Z,{name:"cancel-circle-filled",testId:"push-up-failure-icon",color:ht.Z.Color.Warning,size:ht.Z.Size.Large})}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(xt.Z,{text:e("title"),alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent,type:xt.Z.Type.Heading}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:e("explanation"),alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(ic.I,{text:e("action"),styling:ic.I.Styling.Filled,onClick:()=>i(!1),testId:"continue-button"})]})})},E$=e=>{var t,i;let{onCheckoutSuccess:n,isInitiatedFromMultiSelect:s}=e;const r=(0,p.I0)(),a=(0,p.v9)(vM),o=(0,p.v9)(cM),l=(0,p.v9)(dM),c=(0,p.v9)(mM),d=(0,p.v9)(uM);(0,m.useEffect)((()=>{r(jV())}),[r]);const u=e=>{r(iL.setCheckoutModal({modal:e}))};function g(){u(Ei.OrderReview)}function h(){u(Ei.None),r(iL.cancelCheckout())}return d===Ne.Failure?(0,z.jsx)(L$,{}):(0,z.jsxs)(cc,{FallbackComponent:cc.ComponentError,preventLog:!0,onError:_V,children:[(0,z.jsx)(P$,{show:c===Ei.OrderReview,isInitiatedFromMultiSelect:s,onAddButtonClick:s?h:function(){(0,ls.ru)((0,ys.Iq)(Me.aeV,{item_ids:o}))},onConfirm:function(){r(ZV()),u(Ei.Checkout)},onCancel:h,onHelpButtonClick:function(){u(Ei.ValueProposition)}}),(0,z.jsx)(N$,{show:c===Ei.ValueProposition||c===Ei.ValuePreview,onCloseOrConfirm:g}),(0,z.jsx)(Bk,{show:c===Ei.Checkout,orderType:Ti.PushUp,isOrderFree:a,orderId:null===(t=l.order)||void 0===t?void 0:t.id,orderPayable:null===(i=l.order)||void 0===i?void 0:i.payable,addCardSourceParams:{type:Ti.PushUp,itemId:o[0]},onBack:g,onCheckoutFinish:function(e){h(),e&&n()},orderConfirmationModal:F$,onInitStartAfterCardAuth:function(e){r(iL.getPushUpOrderRequest({pushUpOrderId:e})),u(Ei.Checkout)}})]})},O$=e=>{let{order:t}=e;const i=U("vas_gallery.checkout"),n=(0,p.v9)(Nc);return(0,z.jsxs)(gt.Z,{children:[function(){const e=t.items.length,s=i("price.items_count",{count:e},{count:e}),r=i("price.period_and_count",{period:t.durationDays,itemsCount:s},{count:t.durationDays});return(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,suffix:Ua(t.total,n),children:(0,z.jsx)(xt.Z,{text:r})})}(),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,title:i("total"),suffix:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:Ua(t.payable,n)})})]})]})},R$=e=>{let{show:t,onBack:i,onConfirmOrder:n,onShowValueProposition:s,onPaymentMethodSelect:r}=e;const a=U("vas_gallery.checkout"),o=U("payment_method_selection.errors"),{track:l}=vi(),[c,d]=(0,m.useState)(),u=(0,p.v9)(CX),g=(0,p.v9)(ZC),f=(0,p.v9)(CC),y=(0,p.v9)(FC),{order:v}=(0,p.v9)(zX),_=(0,p.v9)((e=>NC(e,null==v?void 0:v.payable.amount))),b=!!_;return(0,m.useEffect)((()=>{t&&l(Wi({screen:$t.VasGalleryOrderConfirm}))}),[t,l]),(0,m.useEffect)((()=>{b&&c&&d(void 0)}),[b,c]),(0,z.jsx)(cp.Z,{show:t,hasScrollableContent:!0,testId:"vas-gallery-order-confirmation-modal",children:(0,z.jsxs)("div",{className:"u-fill-width",children:[(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Narrow,prefix:(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Horizontal,size:x.Z.Size.X3Large}),suffix:(0,z.jsx)(ic.I,{deprecatedIconName:"question-circle",styling:ic.I.Styling.Flat,testId:"vas-gallery-help-button",inline:!0,onClick:function(){l(Ri({screen:$t.VasGalleryOrderConfirm,target:qm.VasGalleryHelp})),s()}}),children:(0,z.jsx)(Pm.Z,{body:a("title"),testId:"vas-gallery-checkout-modal-title"})}),(0,z.jsx)(h.Z,{})]}),(0,z.jsxs)(Lg,{children:[v?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Z$,{items:u,canAddItems:!1,orderItems:v?v.items.map((e=>{let{itemId:t,total:i,payable:n}=e;const s=parseInt(t,10);return{id:s,item_id:s,total:{amount:i.amount,currency_code:i.currencyCode},payable:{amount:n.amount,currency_code:n.currencyCode},discount:{amount:"0",currency_code:i.currencyCode},discounted:{amount:i.amount,currency_code:i.currencyCode}}})):[]}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(O$,{order:v}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(Hk,{error:c,walletBalance:g,activePayInMethod:_,selectedCreditCard:y,onPaymentMethodSelect:r}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(z$,{theme:"muted"}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]}):null,(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(ic.I,{isLoading:f===Oi.Processing,text:a("actions.place_order"),styling:ic.I.Styling.Filled,onClick:function(){b?(l(Ri({screen:$t.VasGalleryOrderConfirm,target:qm.VasGalleryConfirmOrder})),n()):d(o("not_selected_payment_method"))},testId:"vas-gallery-place-order-button"}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,text:a("actions.back"),onClick:i})]})]})]})})},D$=e=>{let{show:t,onConfirm:i}=e;const n=U("vas_gallery.value_proposition_modal"),{track:s}=vi();(0,m.useEffect)((()=>{t&&s(Wi({screen:$t.VasGalleryValueProposition}))}),[t,s]);const r=[{text:n("body_v2.one"),icon:"bookmark"},{text:n("body_v2.two"),icon:"camera"},{text:n("body_v2.three"),icon:"chart"}];return(0,z.jsx)(cp.Z,{hasScrollableContent:!0,show:t,testId:"vas-gallery-value-proposition-modal",children:(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column",children:[(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center u-background-theme",children:(0,z.jsx)("div",{className:"vas-gallery__modal-animation",children:(0,z.jsx)(u.Z,{animationUrl:"".concat(Be.Fv,"/assets/animations/vas-gallery.json")})})}),(0,z.jsx)(Lg,{children:(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:n("title"),type:xt.Z.Type.Heading,width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),children:r.map((e=>{let{text:t,icon:i}=e;return(0,z.jsxs)("div",{className:"u-flexbox u-gap-medium",children:[(0,z.jsx)(ht.Z,{color:ht.Z.Color.GreyscaleLevel4,name:i,title:i}),(0,z.jsx)(xt.Z,{html:!0,text:t,type:xt.Z.Type.Body})]},"body-bullet-".concat(i))}))}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(ic.I,{text:n("actions.confirm"),styling:ic.I.Styling.Filled,onClick:i,testId:"vas-gallery-confirm-button"})]})})]})})},A$=e=>{var t,i;let{onCheckoutSuccess:n}=e;const s=(0,p.I0)(),r=(0,p.v9)(IX),a=(0,p.v9)(zX),o=(0,p.v9)(PX),l=e=>{s(vO.setCheckoutModal({modal:e}))};function c(){l(Ei.ValueProposition)}function d(){l(Ei.None),s(vO.cancelCheckout())}return(0,z.jsxs)(cc,{FallbackComponent:cc.ComponentError,preventLog:!0,onError:bX,children:[(0,z.jsx)(D$,{show:o===Ei.ValueProposition,onConfirm:function(){l(Ei.Checkout)}}),(0,z.jsx)(Bk,{show:o===Ei.Checkout,orderType:Ti.VasGallery,orderId:null===(t=a.order)||void 0===t?void 0:t.id,orderPayable:null===(i=a.order)||void 0===i?void 0:i.payable,addCardSourceParams:{type:Ti.VasGallery,itemId:r[0]},onBack:d,onCheckoutFinish:function(e){d(),e&&n()},onInitStartAfterCardAuth:function(e){s(vO.getVasGalleryOrderRequest({orderId:e})),l(Ei.Checkout)},shouldSelectPaymentMethodFirst:!1,orderConfirmationModal:e=>(0,z.jsx)(R$,{show:e.show,onBack:e.onBack,onConfirmOrder:e.onConfirmOrder,onPaymentMethodSelect:e.onPaymentMethodSelect,onShowValueProposition:c})})]})},M$=e=>{let{show:t,onConfirm:i}=e;const n=U("vas_gallery.animated_value_proposition_modal"),{track:s}=vi(),r=[{text:n("body.one"),spacer:"Medium"},{text:n("body.two"),spacer:"Medium"},{text:n("body.three"),spacer:"X2Large"}];return(0,m.useEffect)((()=>{t&&s(Wi({screen:$t.VasComparison}))}),[t,s]),(0,z.jsx)(cp.Z,{hasScrollableContent:!0,show:t,testId:"promotional-tools-modal",children:(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column",children:[(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center u-background-theme",children:(0,z.jsx)("div",{className:"vas-gallery__modal-animation",children:(0,z.jsx)(u.Z,{animationUrl:"".concat(Be.Fv,"/assets/animations/promotional-tools.json")})})}),(0,z.jsx)(Lg,{children:(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:n("title"),type:xt.Z.Type.Heading,width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),r.map((e=>{let{text:t,spacer:i}=e;return(0,z.jsxs)(m.Fragment,{children:[(0,z.jsx)(xt.Z,{html:!0,highlight:!0,highlightTheme:"muted",text:t,type:xt.Z.Type.Body,width:xt.Z.Width.Parent}),(0,z.jsx)(x.Z,{size:x.Z.Size[i]})]},"promo-tools-body-".concat(t))})),(0,z.jsx)(ic.I,{text:n("close"),styling:ic.I.Styling.Filled,onClick:i,testId:"promotional-tools-confirm-button"})]})})]})})},U$=["vas-bump","vas-gallery-card"],B$=e=>{let{show:t,onClose:i,showInlineVasGalleryCheckout:n,onCheckoutSuccess:s=(()=>null)}=e;const r=(0,p.v9)(yT),a=U("vas_gallery.promotion_selection"),o=(0,p.I0)(),{track:l}=vi(),c=E(),d=Ql(),[u,f]=(0,m.useState)(!1);if((0,m.useEffect)((()=>{t&&r&&l(Wi({screen:$t.VasOptionSelectionDrawer}))}),[t,r,l]),!n&&!r)return null;const y=()=>{r&&(i(),o(CN.setUserItems({items:[r]})),o(SV({selectedItemId:r.id})),l(Ri({screen:$t.VasOptionSelectionDrawer,target:qm.PushUpItem,targetDetails:r.id.toString()})))},v=()=>{r&&(i(),l(Ri({screen:$t.VasOptionSelectionDrawer,target:qm.VasGalleryItem,targetDetails:r.id.toString()})),n?(o(CN.setUserItems({items:[r]})),o(vO.startCheckout({selectedItemId:r.id}))):(0,ls.ru)((0,ys.Iq)(Me.YYh,{item_ids:[r.id]})))},_=()=>{i(),l(Ri({screen:$t.VasOptionSelectionDrawer,target:qm.CloseScreen}))},b=()=>{f((e=>!e))},j=()=>{if(!r)return[];const{can_push_up:e,can_vas_gallery_promote:t}=r;return[{title:a("bump_card.".concat(e?"":"disabled_","title")),body:e?a("bump_card.body"):"",callback:y,icon:"vas-bump",testId:"push-up-entry-link",disabled:!e},{title:a("vas_gallery_card.".concat(t?"":"disabled_","title")),body:t?a("vas_gallery_card.body"):"",callback:v,icon:"vas-gallery-card",testId:"vas-gallery-entry-link",disabled:!t}].filter(Boolean)},S=e=>{const t=(e=>{if(!e)return null;if(U$.includes(e)){const t="".concat(e).concat(d?"-dark":"");return(0,z.jsx)(Kl.U,{src:"".concat(Be.Fv,"/assets/profile-banners/").concat(t,".svg"),size:Kl.U.Size.XLarge,testId:t})}return null})(e.icon),i=(0,z.jsx)(xt.Z,{text:e.body,type:xt.Z.Type.Subtitle,html:!0});return(0,z.jsx)(gt.Z,{disabled:e.disabled,title:e.title,body:i,type:gt.Z.Type.Navigating,suffix:t,testId:e.testId,theme:"transparent",onClick:e.callback})},Z=e=>(0,z.jsxs)(m.Fragment,{children:[(0,z.jsx)("div",{className:"u-fill-width u-fill-child-component",children:(0,z.jsx)(g.Z,{experimentalTheme:"primaryLightExperimental",children:(0,z.jsx)("div",{className:"u-overflow-hidden u-fill-height u-fill-child-component",children:S(e)})})}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium})]},"action-card-".concat(e.title));return c.phones?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Bp.Z,{title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:a("title")}),isVisible:t,onClose:_,closeButtonEnabled:!0,children:(0,z.jsx)(gt.Z,{children:j().map(Z)})}),n&&(0,z.jsx)(A$,{onCheckoutSuccess:s})]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(cp.Z,{show:t,closeOnOverlay:!0,isFramed:!0,testId:"promote-modal",children:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Pm.Z,{body:a("title"),right:(0,z.jsx)(ic.I,{inverse:!0,inline:!0,deprecatedIconName:"x",onClick:_}),testId:"promotion-selection-modal"}),(0,z.jsx)(h.Z,{}),(0,z.jsxs)(gt.Z,{children:[j().map(Z),(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),(0,z.jsx)(ic.I,{size:ic.I.Size.Medium,styling:ic.I.Styling.Flat,text:a("link"),onClick:b})]})]})}),n&&(0,z.jsx)(A$,{onCheckoutSuccess:s}),(0,z.jsx)(M$,{show:u,onConfirm:b})]})},q$=e=>{let{item:t}=e;const i=(0,p.I0)(),{track:n}=vi(),s=U("item.actions"),r=(0,p.v9)(ZX),a=(0,p.v9)(Wt("disable_vas_gallery_orders")),o=(0,p.v9)(fT),l=(0,p.v9)(X),c=r.visible&&!a;function d(){(0,ls.sl)()}return(0,z.jsxs)(z.Fragment,{children:[function(){const e=(null==t?void 0:t.promoted)&&c&&(null==t?void 0:t.vas_gallery_promoted)||!c&&(null==t?void 0:t.promoted)||!c&&!t.can_push_up;return!(null!=t&&t.is_closed||null!=t&&t.is_reserved||t.user.id!==l||e)}()&&(0,z.jsx)(ic.I,{text:s(c?"promote":"bump"),size:ic.I.Size.Medium,styling:ic.I.Styling.Filled,onClick:c?function(){i(CN.setUserItems({items:[t]})),i(vE.setPromotedItemId({id:t.id})),n(Ri({target:qm.PromoteItem,targetDetails:"".concat(t.id)}))}:function(){i(CN.setUserItems({items:[t]})),i(SV({selectedItemId:t.id})),n(Ri({target:qm.PushUpItem,targetDetails:"".concat(t.id),screen:"item"}))},testId:"item-push-up-button"}),c&&(0,z.jsx)(B$,{show:null!==o,onClose:function(){i(vE.setPromotedItemId({id:null}))},showInlineVasGalleryCheckout:!0,onCheckoutSuccess:d}),(0,z.jsx)(E$,{isInitiatedFromMultiSelect:!1,onCheckoutSuccess:d})]})},V$=e=>{let{itemId:t,isFavourite:i=!1,viewingSelf:n}=e;const{track:s}=vi(),r=U("item.actions"),a=(0,p.v9)(Y),{isFavourite:o,toggleFavourite:l,hasFavouritedChanged:c}=XQ({type:XQ.Type.Item,entityId:t,isFavourite:i}),d=(0,p.v9)(Wt("pride_favourite_button")),m=o?"heart-filled":"heart",g=o?ht.Z.Color.Warning:"parent",h=o?"unfavourite":"favourite",x=e=>{e&&DI({event:cg.xy.AddedToFavourites,modelId:t,userExternalId:a})};return(0,z.jsx)(ic.I,{text:r(h),deprecatedIcon:d&&o&&c?(0,z.jsx)(u.Z,{size:u.Z.Size.Small,animationUrl:"".concat(Be.Fv,"/assets/animations/pride-heart.json"),aria:{"aria-hidden":"true"},loop:!1}):(0,z.jsx)(ht.Z,{name:m,color:g,size:ht.Z.Size.Small,aria:{"aria-hidden":"true"}}),theme:"muted",size:ic.I.Size.Medium,disabled:n,onClick:function(){n||(s(Ri({target:qm.Favourite})),s(Ai({itemId:t,isFollowEvent:!o,contentSource:Es.UserItems,globalSearchSessionId:AO().globalSearchSessionId,homepageSessionId:Bm()})),l({onSuccess:x}))}})},H$=e=>{let{itemId:t,isSellerBusiness:i}=e;const n=U("item.service_fee"),[s,r]=(0,m.useState)(null);if((0,m.useEffect)((()=>{(async()=>{const e=await(0,Fe.Za4)(t);var i;"errors"in e||r({itemPricePercentage:(i=e.service_fee).item_price_percentage,fixedAmount:i.fixed_amount,currencyCode:i.currency_code})})()}),[t]),!s)return null;const a=n(i?"business.title":"title"),o=n(i?"business.description":"description"),l=i?"buyer-protection-pro-shield.svg":"buyer-protection-shield.svg",c=Bg()?"".concat(Be.Fv,"/assets/buyer-protection/dark/").concat(l):"".concat(Be.Fv,"/assets/buyer-protection/").concat(l);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,prefix:(0,z.jsx)(Kl.U,{src:c,size:Kl.U.Size.Medium,testId:"item-service-fee-shield-image"}),title:(0,z.jsx)(xt.Z,{text:a,theme:"amplified",type:xt.Z.Type.Title,testId:"item-service-fee-title"}),body:(0,z.jsx)(xt.Z,{text:o,theme:"inherit",type:xt.Z.Type.Subtitle,testId:(()=>{const e="item-safety-description";return i?"".concat(e,"-business"):e})(),html:!0})}),(0,z.jsx)(x.Z,{})]})},G$="".concat(Be.Fv,"/assets/offline-verification/seller_illustration.png"),W$="".concat(Be.Fv,"/assets/offline-verification/seller_illustration_dark.png"),X$=e=>{let{show:t,onClose:i}=e;const n=Ql(),s=U("item.offline_verification.seller_modal"),{track:r}=vi();function a(){r(Ri({screen:"upload_item",target:qm.OfflineVerificationLearnMore}))}return(0,m.useEffect)((()=>{t&&r(Gi({screen:"upload_item",target:cb.OfflineVerificationSellerModal}))}),[r,t]),(0,z.jsx)(cp.Z,{show:t,testId:"offline-verification-seller-modal",hasScrollableContent:!0,children:(0,z.jsxs)("div",{className:"u-fill-width",children:[(0,z.jsxs)("div",{className:"u-overflow-auto",children:[(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center",children:(0,z.jsx)(Kl.U,{src:n?W$:G$,alt:s("a11y.illustration_alt"),scaling:Kl.U.Scaling.Contain})}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{text:s("title"),type:xt.Z.Type.Heading,width:xt.Z.Width.Parent})}),(0,z.jsx)(gt.Z,{testId:"offline-verification-seller-modal-cell-1",prefix:(0,z.jsx)(ht.Z,{name:"dashed-check-circle",color:uI.S.GreyscaleLevel4}),title:s("cell_1.title"),body:s("cell_1.body")}),(0,z.jsx)(gt.Z,{testId:"offline-verification-seller-modal-cell-2",prefix:(0,z.jsx)(ht.Z,{name:"authenticity-diamond",color:uI.S.GreyscaleLevel4}),title:s("cell_2.title"),body:(0,z.jsxs)(z.Fragment,{children:[s("cell_2.body"),(0,z.jsx)(_p,{type:bp.OfflineVerification,accessChannel:Be.Si.ProductLink,render:e=>(0,z.jsx)("a",{href:e,target:"_blank",rel:"noreferrer",onClick:a,"data-testid":"offline-verification-seller-modal-learn-more-action",children:(0,z.jsx)(xt.Z,{clickable:!0,theme:"inverse",width:xt.Z.Width.Parent,text:s("cell_2.actions.learn_more")})})})]})}),(0,z.jsx)(gt.Z,{testId:"offline-verification-seller-modal-cell-3",prefix:(0,z.jsx)(ht.Z,{name:"money",color:uI.S.GreyscaleLevel4}),title:s("cell_3.title"),body:s("cell_3.body")})]}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(ic.I,{text:s("actions.close"),styling:ic.I.Styling.Filled,onClick:function(){r(Ri({screen:"upload_item",target:qm.OfflineVerificationGotIt})),i()},testId:"offline-verification-seller-modal-close-button"})}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]})})},Y$="".concat(Be.Fv,"/assets/offline-authenticity/authenticity-diamond-48.svg"),K$="".concat(Be.Fv,"/assets/offline-authenticity/authenticity-diamond-48-dark.svg"),J$=e=>{let{isOfflineVerificationAvailable:t,verificationFee:i,isViewingOwnItem:n}=e;const s=U("item.authenticity_fee.".concat(n?"seller":"buyer")),{track:r}=vi(),a=(0,p.v9)(Nc),o=(0,p.v9)(Wt("haov_offline_verification_discount")),[l,c]=(0,m.useState)(!1),[d,u]=(0,m.useState)(!1);if(!t||!i)return null;const g=Va(i),h=Ua(g,a),f=Bg()?K$:Y$,y=e=>n?u(e):c(e),v=()=>{y(!0);const e=n?qm.PhysicalAuthenticitySeller:qm.PhysicalAuthenticityBuyer;r(Ri({target:e}))},_=()=>{y(!1)},b={"how-it-works":e=>(0,z.jsx)("span",{onClick:v,children:(0,z.jsx)(xt.Z,{as:"a",clickable:!0,text:e,type:xt.Z.Type.Subtitle,testId:"item-offline-verification-block-how-it-works-link"})})},j=o?"fee_with_discount":"fee";return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,prefix:(0,z.jsx)(Kl.U,{src:f,size:Kl.U.Size.Medium,testId:"item-offline-verification-block-icon"}),title:(0,z.jsx)(xt.Z,{text:s("title"),theme:"amplified",type:xt.Z.Type.Title,testId:"item-offline-verification-block-title"}),body:(0,z.jsxs)(z.Fragment,{children:[!n&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:s(j,{amount:h}),theme:"inherit",type:xt.Z.Type.Subtitle,testId:"item-offline-verification-block-amount"}),(0,z.jsx)(x.Z,{})]}),(0,z.jsx)(xt.Z,{text:s("body",b),theme:"inherit",type:xt.Z.Type.Subtitle,testId:"item-offline-verification-block-description",html:!0})]})}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(pP,{show:l,onClose:_,verificationFee:h}),(0,z.jsx)(X$,{show:d,onClose:_})]})},Q$=()=>{const e=U("item"),t={"currency-conversion-note-link":e=>(0,z.jsx)(_p,{type:bp.CrossCurrency,accessChannel:Be.Si.ProductLink,render:t=>(0,z.jsx)("a",{href:t,target:"_blank",rel:"noreferrer","data-testid":"cross-currency-faq-entry-link",children:e})})};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:e("currency_conversion_note",t),type:xt.Z.Type.Subtitle}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium})]})},$$=e=>{let{image:t,image2x:i,tabletsUpImage:n,tabletsUp2xImage:s,wideImage:r,wide2xImage:a,phonesContent:o,tabletsUpContent:l}=e;const c=E();function d(){return c.wide&&r?r:c.tabletsUp&&n?n:t}return(0,z.jsxs)("div",{className:"hero-block",children:[(0,z.jsxs)("div",{className:"hero-block__background",children:[(0,z.jsx)(Kl.U,{src:d(),scaling:Kl.U.Scaling.Cover,srcset:function(){const e=c.wide?a:c.tabletsUp?s:i;if(e)return"".concat(d()," 1x, ").concat(e," 2x")}(),alt:""}),(0,z.jsx)("div",{className:"hero-block__overlay"})]}),(0,z.jsx)(Nm,{breakpoint:"tabletsUp",children:(0,z.jsx)("div",{className:"container",children:(0,z.jsx)("div",{className:"hero-block__wrapper",children:(0,z.jsx)(g.Z,{children:l})})})}),(0,z.jsx)(Nm,{breakpoint:"phones",children:(0,z.jsx)("div",{className:"u-fill-width",children:o})})]})},e0="seller_header_visits",t0=[q.Lt,q.De,q.At];function i0(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const n0={fetchSystemConfiguration:MZ.fetchSystemConfigurationRequest},s0=(0,p.$j)((e=>({systemConfiguration:Is(e),systemConfigurationState:Zs(e)})),n0);class r0 extends m.Component{constructor(){super(...arguments),i0(this,"state",{isExpanded:!1,secondText:null,text:null}),i0(this,"setText",(e=>{var t;const{intl:i}=this.props;if(!e)return;let n=null,s=null===(t=i.formatMessage({id:e}))||void 0===t?void 0:t.toString().split("[read_more]");s||(s=i.formatMessage({id:e}).split("[read_more]"));const r="".concat(s[0].trim()," ");s[1]&&(n=s[1].trim()),this.setState({text:r,secondText:n})})),i0(this,"handleActionClick",(()=>this.setState((e=>({isExpanded:!e.isExpanded})))))}componentDidMount(){const{systemConfigurationState:e,subject:t,systemConfiguration:i}=this.props;e===Ne.Success&&i?this.setText(i.transparencyLawKeys[t]):this.props.fetchSystemConfiguration()}componentDidUpdate(e){const{subject:t,systemConfiguration:i}=this.props;i&&e.systemConfiguration!==i&&this.setText(i.transparencyLawKeys[t])}renderAction(){const{isExpanded:e,secondText:t}=this.state;return e||!t?null:(0,z.jsx)("span",{onClick:this.handleActionClick,children:(0,z.jsx)(xt.Z,{inline:!0,type:xt.Z.Type.Subtitle,clickable:!0,children:(0,z.jsx)(vt.Z,{id:"transparency_law.actions.read_more"})})})}render(){const{secondText:e,text:t,isExpanded:i}=this.state;return t?(0,z.jsxs)(gt.Z,{theme:"transparent",testId:"item-transparency-law",children:[(0,z.jsx)(xt.Z,{html:!0,inline:!0,type:xt.Z.Type.Subtitle,text:i?t+e:t}),this.renderAction()]}):null}}const a0=s0((0,iw.ZP)(r0)),o0=()=>{const[e,t]=(0,m.useState)(!1),i=y()("back-to-top-button",{"back-to-top-button--visible":e});return(0,m.useEffect)((()=>{const e=()=>{window.pageYOffset>0?t(!0):t(!1)};return window.addEventListener("scroll",(0,v.debounce)(e,250)),()=>{window.removeEventListener("scroll",e)}}),[]),(0,z.jsx)(Nm,{breakpoint:"phones",children:(0,z.jsx)("div",{className:i,children:(0,z.jsx)(ic.I,{deprecatedIconName:"chevron-up",inline:!0,onClick:()=>{window.scrollTo(0,0)}})})})},l0=e=>(e=>e[aO])(e).isContentExpanded;let c0;!function(e){e.ExportAvailable="EXPORT_AVAILABLE",e.ExportPending="EXPORT_PENDING",e.EmailNotVerified="EMAIL_NOT_VERIFIED"}(c0||(c0={}));var d0=i(69150),u0=i.n(d0);function m0(e,t){if(e)return t?"".concat(e,"--").concat(t):e}const p0=e=>{let{favourited:t=!1,count:i=0,onClick:n,titleIcon:s,ariaIcon:r,experimentalIndicator:a,testId:o}=e;const l=!!n,c=u0()("u-flexbox u-align-items-center",{"u-cursor-pointer":l});return(0,z.jsxs)("div",{className:c,role:"button",tabIndex:0,onClick:n,onKeyDown:e=>Vg(e,n),"data-testid":m0(o,"favourite"),children:[(()=>{const e=t?"heart-filled":"heart",i=t?ht.Z.Color.Warning:ht.Z.Color.GreyscaleLevel5;return a||(0,z.jsx)(ht.Z,{name:e,size:ht.Z.Size.Small,color:i,title:s,aria:r,testId:m0(o,"favourite-icon")})})(),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.XSmall}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:i,testId:m0(o,"favourite-count")})]})},g0=e=>{let{favourite:t}=e;return(0,z.jsx)(p0,{...t,experimentalIndicator:function(){if(t.favourited)return(0,z.jsx)(u.Z,{size:u.Z.Size.Small,animationUrl:"".concat(Be.Fv,"/assets/animations/pride-heart.json"),aria:t.ariaIcon,testId:t.testId?"".concat(t.testId,"--favourite-icon"):void 0,loop:!1})}()})},h0=e=>{let{title:t,subtitle:i,testId:n}=e;return(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Tight,testId:m0(n,"description"),children:[(0,z.jsx)("div",{className:"new-item-box__description",children:(0,z.jsx)(xt.Z,{text:t,type:xt.Z.Type.Caption,testId:m0(n,"description-title")})}),(0,z.jsx)("div",{className:"new-item-box__description",children:(0,z.jsx)(xt.Z,{text:i,type:xt.Z.Type.Caption,testId:m0(n,"description-subtitle")})})]})},x0=e=>{let{name:t,image:i,url:n,alt:s,urlProps:r,testId:a}=e;return(0,z.jsx)("div",{"data-testid":m0(a,"owner"),children:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Narrow,prefix:(0,z.jsx)(Kl.U,{src:i,alt:s,styling:Kl.U.Styling.Circle,size:Kl.U.Size.Regular,testId:m0(a,"owner-image")}),url:n,urlProps:r,children:(0,z.jsx)("div",{className:"u-flexbox",children:(0,z.jsx)(xt.Z,{text:t,type:xt.Z.Type.Caption,testId:m0(a,"owner-name")})})})})},f0=e=>{let{theme:t,content:i,suffix:n,testId:s,className:r,onClick:a}=e;return(0,z.jsx)("div",{className:r,"data-testid":m0(s,"status"),children:(0,z.jsx)(gt.Z,{suffix:n,styling:gt.Z.Styling.Narrow,theme:t,clickable:!!a,onClick:e=>{a&&(e.preventDefault(),e.stopPropagation(),a())},children:(0,z.jsx)(xt.Z,{text:i,type:xt.Z.Type.Caption,theme:"inverse",testId:m0(s,"status-text")})})})};var y0=i(13606),v0=i(40916);const _0=e=>{let{iconBadge:t}=e;const{title:i,description:n,linkText:s,verificationFee:r}=t,{track:a}=vi(),[o,l]=(0,m.useState)(!1),c=((e,t,i)=>{const n=new RegExp("(\\{".concat("link","\\})"),"g"),s=e.split(n);for(let e=1;e<s.length;e+=2)s[e]=i;return s})(n,0,(0,z.jsx)("span",{onClick:()=>{l(!0),a(Ri({target:qm.PhysicalAuthenticityBuyer,screen:"icons_explanation"}))},children:(0,z.jsx)(xt.Z,{text:s,as:"a",clickable:!0})}));return(0,z.jsx)(gt.Z,{prefix:(0,z.jsx)(Wy.Z,{name:v0.Z}),title:i,body:(0,z.jsxs)(z.Fragment,{children:[c.map(((e,t)=>(0,z.jsx)("span",{children:e},"icon-description-element-".concat(t)))),(0,z.jsx)(pP,{show:o,onClose:()=>{l(!1)},verificationFee:r})]})})},b0=e=>{let{show:t,onClose:i,itemId:n,onItemClick:s}=e;const r=U("item_box.icons_explanation_modal"),a=U("errors"),o=E(),{iconBadges:l,isNotificationDisplayed:c,isOpen:d,itemDetails:u,handleNotificationClose:p}=function(e,t){const[i,n]=(0,m.useState)([]),[s,r]=(0,m.useState)(void 0),[a,o]=(0,m.useState)(!1),[l,c]=(0,m.useState)(!1);return(0,m.useEffect)((()=>{t||o(!1),t&&async function(){const t=await(0,Fe.m$V)(e);if("errors"in t)return void c(!0);const i={title:(s=t.item_badges_explanation).title,brand:{title:s.brand.title,url:s.brand.url},sizeTitle:s.size_title,photo:lt(s.photo),iconBadges:(a=s.icon_badges,a.length?a.map((e=>({icon:e.icon,title:e.title,description:e.description,linkText:e.link_text,verificationFee:e.verification_fee}))):[])};var s,a;n(i.iconBadges),r({title:i.title,brandDetails:i.brand,size:i.sizeTitle,photo:i.photo}),o(!0)}()}),[t,e]),{iconBadges:i,itemDetails:s,isOpen:a,isNotificationDisplayed:l,handleNotificationClose:()=>{c(!1)}}}(n,t);const g=o.phones?{}:{width:"343px"};return(0,z.jsxs)("div",{onClick:e=>{e.stopPropagation()},children:[(0,z.jsxs)(cp.Z,{isFramed:!1,show:d,testId:"icons-explanation-modal",contentDimensions:g,closeOnOverlay:!0,children:[(0,z.jsx)(Pm.Z,{body:r("navigation_title"),right:(0,z.jsx)(ic.I,{inline:!0,iconName:$y.Z,styling:ic.I.Styling.Flat,onClick:i,testId:"icons-explanation-modal-navigation-close-button"})}),(0,z.jsxs)("div",{className:"new-item-box_icons-explanation-modal-body",children:[(0,z.jsx)(gt.Z,{prefix:(0,z.jsx)(Kl.U,{size:Kl.U.Size.X2Large,ratio:Kl.U.Ratio.SmallPortrait,src:null==u?void 0:u.photo.url}),title:null==u?void 0:u.title,body:(0,z.jsxs)("span",{children:[(0,z.jsx)(xt.Z,{text:null==u?void 0:u.size})," "," ",(0,z.jsx)("span",{onClick:()=>{null!=u&&u.brandDetails&&(0,ls.ru)(u.brandDetails.url)},children:(0,z.jsx)(xt.Z,{text:null==u?void 0:u.brandDetails.title,underline:!0,as:"a"})})]})}),l.length?l.map((function(e){return e.icon==="".concat(v0.Z.Title).concat(v0.Z.Size)?(0,z.jsx)(_0,{iconBadge:e},"ivs-explanation-cell"):null})):null]}),(0,z.jsx)(gt.Z,{body:(0,z.jsx)(ic.I,{text:r("actions.see_item_details_cta"),styling:ic.I.Styling.Filled,testId:"icons-explanation-modal-button",onClick:function(e){s&&s(e),(0,ls.ru)((0,Me.DWf)(n))}})})]}),c&&(0,z.jsx)(bJ,{body:a("generic"),onClose:p,testId:"icons-explanation-modal-error-notification"})]})},j0=e=>e==="".concat(y0.Z.Title).concat(y0.Z.Size)?(0,z.jsx)(Wy.Z,{name:y0.Z}):e==="".concat(v0.Z.Title).concat(v0.Z.Size)?(0,z.jsx)(Wy.Z,{name:v0.Z}):null,S0=e=>{let{element:t,itemId:i,onItemClick:n}=e;const[s,r]=(0,m.useState)(!1),{track:a}=vi();return(0,z.jsxs)("div",{children:[(0,z.jsx)("div",{onClick:e=>{r(!0),a(Ri({target:qm.IconsExplanation})),e.preventDefault(),e.stopPropagation()},"data-testid":"clickable-icon",children:t}),(0,z.jsx)(b0,{show:s,onClose:()=>{r(!1)},itemId:i,onItemClick:n})]})},Z0=e=>{let{iconBadges:t,testId:i,itemId:n,onItemClick:s}=e;return 0===t.length?null:(0,z.jsx)("div",{"data-testid":m0(i,"icon-badges"),children:t.map((function(e){const t=j0(e.iconSmall);return t?(0,z.jsxs)("div",{children:[(0,z.jsx)(x.Z,{}),(0,z.jsx)(S0,{element:(0,z.jsxs)("div",{className:"u-flexbox u-ui-padding-small new-item-box__icon-badges","data-testid":m0(i,"icon-badges-".concat(e.iconSmall)),children:[t,(0,z.jsx)(xt.Z,{text:e.label,type:xt.Z.Type.Caption,theme:"amplified"})]}),itemId:n,onItemClick:s})]},e.iconSmall):null}))})},I0=e=>{let{iconBadges:t,testId:i,itemId:n,onItemClick:s}=e;return null!=t&&t.length?t.map((e=>{const t=j0(e.iconBig);return t?(0,z.jsx)("div",{"data-testid":m0(i,"overlay-icon-".concat(e.iconBig)),className:"new-item-box__overlay-icon",children:(0,z.jsx)(S0,{element:t,itemId:n,onItemClick:s})},e.iconBig):null})):null},C0=e=>{let{price:t,favourite:i,selected:n=!1,swappable:s=!1,oldPrice:r,url:a,urlTitle:o,badge:l,owner:c,description:d,image:u,imageColor:m,imageRatio:p=Kl.U.Ratio.Portrait,imagesExperimental:g,imagesExperimentalOverlayDisabled:h=!1,alt:f,renderFavourite:v,renderFooter:_,iconBadges:b,renderExperimentalIcon:j,renderBreakdownExperimental:S,renderDescription:Z,onClick:I,status:C,bumpText:k,swappableIconTitle:w,swappableIconAria:P,selectedIconTitle:T,selectedIconAria:F,testId:N,allowTooltipInTitleExperimental:L,secondaryBadgeExperimental:E,informationCellCssClasses:O,id:R}=e;const D=Xn({abTestName:"ivs_badge"}),A=()=>(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"u-flexbox u-fill-width u-justify-content-between",children:[l||E||b?(0,z.jsx)("div",{"data-testid":m0(N,"badge-container"),children:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Narrow,theme:"transparent",children:(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column u-align-items-flex-start u-gap-small",children:[l?(0,z.jsx)(oC.Z,{testId:m0(N,"badge"),...l}):null,E?(0,z.jsx)(oC.Z,{testId:m0(N,"secondary-badge"),...E}):null,"a"===(null==D?void 0:D.variant)&&b&&(0,z.jsx)(I0,{iconBadges:b,testId:N,itemId:Number(R),onItemClick:I})]})})}):null,n?(0,z.jsx)("div",{className:"new-item-box__state",children:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Narrow,theme:"transparent",children:(0,z.jsx)(ht.Z,{name:"check-solid",size:ht.Z.Size.Medium,title:T,aria:F,testId:m0(N,"selected-icon")})})}):null]}),C?(0,z.jsx)(f0,{testId:N,...C}):null]}),M=y()("new-item-box__container",{selected:n}),U=y()("new-item-box__overlay",{"new-item-box__overlay--clickable":!!I||!!a});return(0,z.jsxs)("div",{className:M,"data-testid":N,children:[c?(0,z.jsx)(x0,{testId:N,...c}):null,(0,z.jsxs)("div",{className:"u-position-relative u-min-height-none u-flex-auto",children:[(()=>{if(!g||g.length<3)return null;const e=g.length>3&&!h,t=g.length-3+1;return(0,z.jsxs)("div",{className:"new-item-box__collage","data-testid":m0(N,"collage"),children:[(0,z.jsx)("div",{className:"new-item-box__image collage--image-1",children:(0,z.jsx)(Kl.U,{src:g[0],scaling:Kl.U.Scaling.Cover,ratio:p,color:m,alt:f,testId:m0(N,"image-1")})}),(0,z.jsx)("div",{className:"new-item-box__image collage--image-2",children:(0,z.jsx)(Kl.U,{src:g[1],scaling:Kl.U.Scaling.Cover,ratio:p,color:m,alt:f,testId:m0(N,"image-2")})}),(0,z.jsxs)("div",{className:"new-item-box__image collage--image-3",children:[(0,z.jsx)(Kl.U,{src:g[2],scaling:Kl.U.Scaling.Cover,ratio:p,color:m,alt:f,testId:m0(N,"image-3")}),e?(0,z.jsx)("div",{className:"new-item-box__image-overlay",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,theme:"inverse",text:"+".concat(t)})}):null]})]})})()||(0,z.jsx)("div",{className:"new-item-box__image",children:(0,z.jsx)(Kl.U,{src:u,scaling:Kl.U.Scaling.Cover,ratio:p,color:m,alt:f,testId:m0(N,"image")})}),a?(0,z.jsx)("a",{href:a,className:U,onClick:I,"data-testid":m0(N,"overlay-link"),title:o,children:A()}):(0,z.jsx)("div",{className:U,onClick:I,"aria-hidden":"true",children:A()})]}),(0,z.jsx)("div",{className:O,children:(0,z.jsxs)(gt.Z,{styling:O?gt.Z.Styling.Tight:gt.Z.Styling.Narrow,children:[(()=>{const e=L?"new-item-box__title--with-tooltip-experimental":"new-item-box__title";return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,suffix:i?v?v({favourite:i}):(0,z.jsx)(p0,{testId:N,...i}):null,children:(0,z.jsx)("div",{className:e,"data-testid":m0(N,"title-container"),children:(0,z.jsxs)("div",{className:"title-content",children:[(0,z.jsx)(xt.Z,{text:t,type:xt.Z.Type.Subtitle,theme:"amplified",bold:!0,testId:m0(N,"price-text")}),j?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Small,orientation:x.Z.Orientation.Vertical}),j]}):null,r?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)(xt.Z,{text:r,type:xt.Z.Type.Subtitle,theme:"muted",strikethrough:!0,testId:m0(N,"old-price-text")})]}):null,(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),s?(0,z.jsx)(ht.Z,{name:"rotate-360",size:ht.Z.Size.XSmall,title:w,aria:P,testId:m0(N,"swappable-icon")}):null]})})}),(0,z.jsxs)("div",{className:"u-flexbox u-align-items-flex-end",children:[(0,z.jsxs)("div",{className:"u-min-width-none u-flex-grow",children:[S?(0,z.jsxs)("div",{"data-testid":m0(N,"breakdown"),children:[S,(0,z.jsx)(x.Z,{size:x.Z.Size.Small})]}):null,d?Z?Z({description:d}):(0,z.jsx)(h0,{testId:N,...d}):null]}),k?(0,z.jsx)("div",{className:"u-padding-left-small",children:(0,z.jsx)(xt.Z,{text:k,theme:"amplified",type:xt.Z.Type.Caption,testId:m0(N,"bump-text")})}):null]})]})})(),_&&(0,z.jsxs)("div",{"data-testid":m0(N,"footer"),children:[(0,z.jsx)(x.Z,{}),_]}),"b"===(null==D?void 0:D.variant)&&b&&(0,z.jsx)(Z0,{iconBadges:b,testId:N,itemId:Number(R),onItemClick:I})]})})]})},k0=e=>{var t,i,n,s;let{item:r,onClick:a,renderFooter:o,testId:l,url:c,showOwner:d=!0,showStatus:u=!1,showStatusAsBadge:m=!1,showFavourite:g=!0,viewingSelf:h=!1,isUrlDisabled:x=!1,showItemFeeBreakdown:f=!0,onFavouriteToggle:y,hideBusinessBadge:v,showPhotoCollage:_,isDescriptionHidden:b,imagesExperimentalOverlayDisabled:j,imageRatio:S,informationCellCssClasses:Z,collectionTitle:I,showLatestPriceOnly:C=!1}=e;const k=U(),{track:w}=vi(),P=(0,p.v9)(be),T=(0,p.v9)(Nc),F=null!==(t=null===(i=(0,p.v9)(W))||void 0===i?void 0:i.is_god)&&void 0!==t&&t,N=(0,p.v9)(Y),L=null!==(n=null===(s=(0,p.v9)(W))||void 0===s?void 0:s.moderator)&&void 0!==n&&n,E=(0,p.v9)(Wt("pride_favourite_button")),O=(0,p.v9)(ZX),R=(0,p.v9)(Wt("favourite_button_aria_label_with_count")),D=g&&!h&&!P,A=h||F||L,M=f&&!!r.serviceFee&&!h,{isFavourite:B,favouriteCount:q,toggleFavourite:V,hasFavouritedChanged:H}=XQ({type:XQ.Type.Item,entityId:r.id,isFavourite:r.isFavourite,count:r.favouriteCount}),G=()=>{if(I)return{content:k("item.status.in_collection",{name:I}),theme:"amplified"};let e=u?function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{isDraft:i,isReserved:n,isHidden:s,isClosed:r,canPushUp:a,canVasGalleryPromote:o,areStatsVisible:l,itemAlertType:c,itemAlert:d,itemClosingAction:u,isProcessing:m,isPromoted:p,isVasGalleryPromoted:g}=e;return m?"processing":null!=d&&d.itemAlertType&&t&&d.itemAlertType!==Fa.EligibleForAuthenticity&&d.itemAlertType!==Fa.VerifiedOnlineAuthenticity?qa(d.itemAlertType):c&&t?qa(c):i?"draft":r&&u?u:n?"reserved":s?"hidden":l&&t?a===o&&a?null:g?"promoted":p?"bumped":"promoted":null}(r,A):null;O.visible&&"bumped"===e&&(e="promoted");const t=Ja(e),i="promoted"===e&&r.isPromoted&&!A;return!t||i?null:{content:k(String(t.content)),theme:t.theme,testId:"promoted"===e?"promoted-badge":void 0}},X=e=>{e&&DI({event:cg.xy.AddedToFavourites,modelId:r.id,userExternalId:N})},K=()=>{y?y({itemId:r.id,itemContentSource:r.contentSource,isFollowEvent:!B}):(w(Ri({target:qm.Favourite})),w(Ai({itemId:r.id,isFollowEvent:!B}))),V({onSuccess:X})},J=()=>m?null:G(),{id:Q,title:$,url:ee,priceWithDiscount:te,price:ie,thumbnailUrl:ne,thumbnailUrls:se,dominantColor:re,user:ae,iconBadges:oe}=r;let le=null;d&&ae.thumbnailUrl&&ae.login&&ae.profileUrl&&(le={name:ae.login,image:ae.thumbnailUrl,url:ae.profileUrl,alt:""});const ce=Ua(te||ie,T),de=te?Ua(ie,T):null,ue=b?null:r.isDraft?{title:"",subtitle:""}:{title:h&&void 0!==r.viewCount?k("item.view_count",{count:r.viewCount},{count:r.viewCount}):r.sizeTitle,subtitle:h?k("item.favourite_count",{count:r.favouriteCount},{count:r.favouriteCount}):r.brandTitle},me=((e,t,i)=>k("item.a11y.url_title",{title:e,price:t,brand:(null==i?void 0:i.subtitle)||k("item.a11y.no_brand"),size:(null==i?void 0:i.title)||k("item.a11y.no_size")}))($,ce,ue),pe=l||"product-item-id-".concat(Q);return(0,z.jsx)(C0,{id:Q,url:x?void 0:c||ee,urlTitle:me,alt:$,price:ce,oldPrice:C?null:de,image:ne,imageColor:re,imagesExperimental:_?se:void 0,onClick:a,owner:le,favourite:function(){if(!D)return;const e=k(B?"item.a11y.favorited":"item.a11y.not_favorited"),t=k(B?"item.a11y.unfavourite":"item.a11y.favourite",{count:q},{count:q});return{favourited:B,count:q,ariaIcon:{"aria-label":R?t:e},onClick:K}}(),renderFavourite:E&&H?g0:void 0,description:ue,renderFooter:o,status:J(),badge:(()=>{if(m){const e=G();if(e)return{...e,deprecatedIconName:void 0}}if(!r.badge)return null;const{theme:e,body:t,icon:i}=r.badge;return{theme:e,content:t,deprecatedIconName:i}})(),secondaryBadgeExperimental:function(){if(r.user.isBusiness&&!v)return{content:k("business.badge")}}(),bumpText:!J()&&r.isPromoted?(0,z.jsx)("span",{"data-testid":"bump-badge",children:k("item.status.bumped")}):null,testId:pe,renderBreakdownExperimental:(()=>{const{serviceFee:e,id:t,price:i,totalItemPrice:n,user:s,priceWithDiscount:a}=r;return M?(0,z.jsx)(Wg,{itemId:t,currency:i.currencyCode,itemPrice:(null==a?void 0:a.amount)||i.amount,serviceFee:null==e?void 0:e.amount,totalItemPrice:null==n?void 0:n.amount,isSellerBusiness:!!s.isBusiness,shouldTrimTitle:!0,shouldMinimiseTitle:!0}):null})(),imagesExperimentalOverlayDisabled:j,imageRatio:S,informationCellCssClasses:Z,iconBadges:oe})};function w0(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function P0(e){class t extends m.Component{constructor(){super(...arguments),w0(this,"onClick",(e=>{this.props.track(qi(this.props.tracking)),this.props.onClick&&this.props.onClick(e)}))}render(){return(0,z.jsx)(e,{...this.props,onClick:this.onClick})}}return w0(t,"displayName",b(e)),zx(t)}let z0;!function(e){e.Item="item",e.User="user",e.Brand="brand",e.MatchingBrandSuggestion="matching_brand_suggestion",e.Promo="promo",e.Ad="ad",e.PromotedCloset="promoted_closet",e.ListerActivationBanner="lister_activation_banner",e.FeaturedCollection="featured_collection",e.FollowedUserBlock="followed_user_block"}(z0||(z0={}));const T0=P0(k0),F0=e=>{let{items:t,contentSource:i,refererScreen:n,itemTestId:s}=e;const{track:r}=vi(),a=(0,m.useRef)([]),o=(0,p.v9)(X),l=AO(),c=(0,m.useRef)(n===$t.Catalog?l.searchSessionId:null),d=Bm(),u=(e,t)=>()=>{const{id:n,user:s}=e,{id:o}=s,u="search_tracking_params"in e?e.search_tracking_params:null;a.current.includes(n)||(r(Bi({id:n,position:t,contentSource:i,itemOwnerId:o,globalSearchSessionId:l.globalSearchSessionId,searchSessionId:c.current,contentType:z0.Item,searchScore:null==u?void 0:u.score,searchSignals:null==u?void 0:u.matched_queries,itemDistance:null==u?void 0:u.buyer_item_distance_km,homepageSessionId:d})),a.current.push(n))};return(0,z.jsx)("div",{className:"item-view-items",children:t.map(((e,t)=>{const n=t+1,{id:r}=e,a="search_tracking_params"in e?e.search_tracking_params:null,m={id:r,position:n,contentSource:i,globalSearchSessionId:l.globalSearchSessionId,searchSessionId:c.current,contentType:z0.Item,searchScore:null==a?void 0:a.score,searchSignals:null==a?void 0:a.matched_queries,itemDistance:null==a?void 0:a.buyer_item_distance_km,homepageSessionId:d};return(0,z.jsx)(Jp.h,{onEnter:u(e,n),children:(0,z.jsx)("div",{className:"item-view-items__item",children:(0,z.jsx)(T0,{item:co(e),showFavourite:!0,testId:s&&"".concat(s,"-").concat(r),tracking:m,viewingSelf:o===e.user.id,hideBusinessBadge:i===Es.OtherUserItems})})},r)}))})};function N0(e,t){const i=(0,m.useSyncExternalStore)(e.subscribe,(()=>e.state),(()=>null));return t&&i?t(i):i}const L0=e=>{let{inAppMessage:t,onClose:i,onLinkClick:n,onEnter:s}=e;(0,m.useEffect)(s,[s]);const r=e=>{if(!t.url)return e;const i=t.shouldOpenLinkInNewTab?"_target":void 0;return(0,z.jsx)("a",{href:t.url,target:i,onClick:n,children:e})};return(0,z.jsx)(bJ,{deprecatedIcon:(()=>{if(t.imageUrl)return r((0,z.jsx)(Kl.U,{src:t.imageUrl,size:Kl.U.Size.Large}))})(),body:r((0,z.jsx)(xt.Z,{text:t.message,html:!0})),displayDuration:t.duration&&(a=t.duration,Math.ceil(a/1e3)),forceVisibility:!t.duration,position:t.position,onNotificationClose:i,testId:"in-app-message-notification"});var a},E0=e=>{let{inAppMessage:t,isOpen:i,onClose:n,onEnter:s,onPrimaryButtonClick:r,onSecondaryButtonClick:a,onLinkClick:o}=e;const l=E(),c=t.shouldOpenLinkInNewTab?{target:"_blank"}:void 0,d=t.type===dg.Splash,u=t.type===dg.Cover,p=(0,m.useMemo)((()=>t.secondaryButtonText?Boolean(t.primaryButtonUrl&&t.secondaryButtonUrl):Boolean(t.primaryButtonUrl)),[t]),g=y()("u-justify-content-between u-flexbox u-flex-direction-column u-fill-height"),h=y()({"u-margin-auto":u}),f=y()("u-position-relative u-flexbox",{"u-fill-height u-fill-width":!d&&l.phones,"modal-in-app-message--cover":u});return(0,z.jsx)(cp.Z,{closeOnOverlay:!0,testId:"in-app-message-modal",show:i,className:f,hasScrollableContent:d||l.tabletsUp,defaultCallback:n,onAfterOpen:s,isFramed:d,children:(0,z.jsx)("div",{className:"u-overflow-auto u-fill-width",children:(0,z.jsxs)("div",{className:g,children:[(0,z.jsx)("div",{className:"u-position-absolute u-fill-width",children:(0,z.jsx)(Pm.Z,{theme:"transparent",right:p&&(0,z.jsx)(ic.I,{testId:"close-modal-button",styling:ic.I.Styling.Flat,inline:!0,onClick:n,deprecatedIconName:"x",deprecatedIconColor:ht.Z.Color.GreyscaleLevel7})})}),(()=>{const e=y()({"u-fill-width u-fill-height u-position-absolute":u,"modal-in-app-message__splash-image":!u});return(0,z.jsx)("div",{className:e,children:(0,z.jsx)(Kl.U,{src:t.imageUrl,scaling:Kl.U.Scaling.Cover})})})(),(0,z.jsxs)("div",{className:"u-justify-content-between u-flexbox u-fill-height u-flex-direction-column",children:[(0,z.jsx)("div",{className:h,children:(0,z.jsxs)(gt.Z,{theme:u?"transparent":void 0,children:[t.header&&(0,z.jsx)("div",{className:"u-text-wrap",children:(0,z.jsx)(xt.Z,{text:t.header,type:xt.Z.Type.Heading,theme:u?"inverse":void 0,width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center})}),t.message?(0,z.jsxs)("div",{onClick:e=>{if(!(e.target instanceof HTMLAnchorElement))return;const t=e.target.href;t&&o(t)},className:"u-text-wrap",children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:(0,ys.Kw)(t.message),html:!0,format:!0,theme:u?"inverse":void 0,alignment:xt.Z.Alignment.Center})]}):null]})}),(0,z.jsx)(gt.Z,{theme:u?"transparent":void 0,children:(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),children:[t.primaryButtonText&&(0,z.jsx)(ic.I,{text:t.primaryButtonText,onClick:r,styling:ic.I.Styling.Filled,url:t.primaryButtonUrl,urlProps:c,testId:"in-app-message-primary-button"}),t.secondaryButtonText&&(u?(0,z.jsx)(ic.I,{onClick:a,styling:ic.I.Styling.Flat,url:t.secondaryButtonUrl,urlProps:c,testId:"in-app-message-secondary-button",children:(0,z.jsx)(xt.Z,{theme:"inverse",text:t.secondaryButtonText,alignment:xt.Z.Alignment.Center})}):(0,z.jsx)(ic.I,{text:t.secondaryButtonText,onClick:a,styling:ic.I.Styling.Flat,url:t.secondaryButtonUrl,urlProps:c,testId:"in-app-message-secondary-button"}))]})})]})]})})})},O0=e=>{let{show:t,onClose:i}=e;const n=U("delayed_publication.modal");return(0,z.jsx)(cp.Z,{show:t,testId:"delayed-publication-modal",children:(0,z.jsxs)(nc.Z,{children:[(0,z.jsx)(xt.Z,{text:n("title"),alignment:xt.Z.Alignment.Left,type:xt.Z.Type.Heading}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:n("body",{"catalog-rules-link":e=>(0,z.jsx)("a",{href:Me.xLf,target:"_blank",rel:"noopener noreferrer",children:e})}),html:!0}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(ic.I,{text:n("actions.close"),onClick:i,styling:ic.I.Styling.Filled,testId:"delayed-publication-modal-close-button"})]})})},R0=()=>{const[e,t]=(0,m.useState)(!1),i=U("delayed_publication.status_box");return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{theme:"amplified",testId:"item-status-delayed-publication",children:(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center",children:[(0,z.jsx)(xt.Z,{text:i("title"),type:xt.Z.Type.Title,theme:"inherit",inline:!0}),(0,z.jsx)(ic.I,{deprecatedIcon:(0,z.jsx)(ht.Z,{name:"info-circle",size:ht.Z.Size.Small,color:ht.Z.Color.GreyscaleLevel5}),size:ic.I.Size.Small,styling:ic.I.Styling.Flat,onClick:()=>{t(!0)},title:"Show additional information",inline:!0})]})}),(0,z.jsx)(O0,{show:e,onClose:()=>{t(!1)}})]})},D0=e=>{let{show:t,onClose:i}=e;const n=U("processing_listing.modal"),{track:s}=vi(),r=()=>{s(Ri({target:qm.ProcessingListingStatusModalFaqLink,screen:$t.ProcessingListingStatusModal}))};return(0,z.jsx)(cp.Z,{show:t,testId:"processing-listing-modal",children:(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(xt.Z,{text:n("title"),alignment:xt.Z.Alignment.Left,type:xt.Z.Type.Heading}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:n("body",{"catalog-rules-link":e=>(0,z.jsx)("a",{onClick:r,href:Me.xLf,target:"_blank",rel:"noopener noreferrer",children:e})}),html:!0}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(ic.I,{text:n("actions.close"),onClick:i,styling:ic.I.Styling.Filled,testId:"processing-listing-modal-close-button"})]})})},A0=()=>{const[e,t]=(0,m.useState)(!1),i=U("processing_listing.status_box"),{track:n}=vi();return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{theme:"amplified",testId:"item-status-processing",children:(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center",children:[(0,z.jsx)(xt.Z,{text:i("title"),type:xt.Z.Type.Title,theme:"inherit",inline:!0}),(0,z.jsx)(ic.I,{deprecatedIcon:(0,z.jsx)(ht.Z,{name:"info-circle",size:ht.Z.Size.Small,color:ht.Z.Color.GreyscaleLevel5}),size:ic.I.Size.Small,styling:ic.I.Styling.Flat,onClick:()=>{t(!0),n(Ri({target:qm.ProcessingListingStatusInfo,screen:$t.ProcessingListingStatusModal}))},title:i("a11y.learn_more"),inline:!0})]})}),(0,z.jsx)(D0,{show:e,onClose:()=>{t(!1)}})]})},M0=e=>{let{price:t,currency:i,isItemOwner:n,...s}=e;const r=(0,p.v9)(Nc);return(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,...s,text:Ma(t,{currency:i,locale:r})})},U0=e=>{let{badge:t,price:i,discountedPrice:n,offerPrice:s,currency:r,isItemOwner:a}=e;const o=s&&s!==n&&s!==i;return(0,z.jsxs)("div",{className:"u-flexbox u-justify-content-between","data-testid":"item-price",children:[o?(0,z.jsx)(M0,{price:s,currency:r,isItemOwner:a}):n?(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center",children:[(0,z.jsx)(M0,{price:n,currency:r,isItemOwner:a}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(M0,{price:i,currency:r,type:xt.Z.Type.Subtitle,strikethrough:!0,isItemOwner:a})]}):(0,z.jsx)(M0,{price:i,currency:r,isItemOwner:a}),!t||o?null:(0,z.jsx)("div",{className:"u-flexbox u-align-items-center",children:(0,z.jsx)(oC.Z,{content:t.body,theme:t.theme,deprecatedIcon:t.icon})})]})},B0=e=>{var t;let{itemId:i,sellerId:n}=e;const s=U(),{track:r}=vi(),{searchParams:a}=xc(),o=(0,p.I0)(),l=(0,p.v9)(_e),c=(0,p.v9)(Rd),[d,u]=(0,m.useState)(Ne.Idle),g=null===(t=a.referrer)||void 0===t?void 0:t.toString(),h=AO(),x=(0,m.useRef)(g===$t.Catalog?h.searchSessionId:null);return(0,m.useEffect)((()=>{if(null==c||!c.transaction)return;if(d!==Ne.Pending)return;const{transaction:e}=c;r(gn({transactionId:e.id,itemId:e.itemId,button:"buy",globalSearchSessionId:h.globalSearchSessionId,searchSessionId:x.current,homepageSessionId:Bm()})),e.availableActions.includes(gd.Buy)?(r(Pn({transactionId:e.id,screen:"item",globalSearchSessionId:h.globalSearchSessionId,homepageSessionId:Bm()})),(0,ls.ru)((0,Me.sEI)(e.id))):(0,ls.ru)(Rc(c.id))}),[c,h.globalSearchSessionId,r,d]),(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,text:s("item.actions.buy"),size:ic.I.Size.Medium,onClick:()=>{l?(u(Ne.Pending),Jg({itemId:Number(i)}),o(Dm.createItemConversationThreadRequest({itemId:i,sellerId:n,initiator:Vc.Buy}))):o(NL.openAuthModal())},testId:"item-buy-button",disabled:d===Ne.Pending,isLoading:d===Ne.Pending})},q0=e=>{const[t,i]=(0,m.useState)(),[n,s]=(0,m.useState)(),[r,a]=(0,m.useState)(!0);return(0,m.useEffect)((()=>{if(!e)return;const t=kt(e);t?i(t):a(!1)}),[e]),function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=(0,m.useRef)(e);s.current=e,(0,m.useEffect)((()=>{if(!t)return;n&&s.current();const e=setInterval(s.current,t);return()=>clearInterval(e)}),[t,...i||[]])}((()=>{if(!t)return;const e=t-Ct();a(e>0),s((e=>{const t=Math.floor(e/jt.Nf),i=Math.floor(e%jt.Nf/jt.Xx),n=Math.floor(e%jt.Xx/jt.Yt);return{seconds:Math.floor(e%jt.Yt),minutes:n,hours:i,days:t}})(e))}),jt.L7,[t],!0),{formattedRemainingTime:n,isActive:r}},V0=e=>{let{userId:t,username:i,isFollowed:n,endDate:s,onCountdownEnd:r,isHatePresent:a}=e;const{formattedRemainingTime:o,isActive:l}=q0(s),c=U("closet_countdown"),d=(0,p.v9)(X),u=Ql(),g=t!==d&&!a,h="/assets/closet-countdown".concat(u?"/dark":"","/clothes-star-64.png");return(0,m.useEffect)((()=>{l||r()}),[l,r]),(0,z.jsxs)("section",{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Tight,suffix:(0,z.jsx)("div",{className:"closet-countdown__image",children:(0,z.jsx)(Kl.U,{src:h,size:Kl.U.Size.XLarge,alt:"",styling:Kl.U.Styling.Rounded})}),children:[(0,z.jsx)(xt.Z,{theme:"amplified",children:c("subtitle")}),(0,z.jsx)(x.Z,{}),(()=>{if(!o)return null;const{days:e,hours:t,minutes:i,seconds:n}=o;return(0,z.jsx)("ul",{className:"closet-countdown__timer",children:(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),children:[(0,z.jsxs)("li",{className:"closet-countdown__timer-unit",children:[(0,z.jsx)("div",{className:"closet-countdown__timer-unit-value",children:e}),(0,z.jsx)("div",{className:"closet-countdown__timer-unit-name",children:c("time.days",void 0,{count:e})})]}),(0,z.jsxs)("li",{className:"closet-countdown__timer-unit",children:[(0,z.jsx)("div",{className:"closet-countdown__timer-unit-value",children:t}),(0,z.jsx)("div",{className:"closet-countdown__timer-unit-name",children:c("time.hours",void 0,{count:t})})]}),(0,z.jsxs)("li",{className:"closet-countdown__timer-unit",children:[(0,z.jsx)("div",{className:"closet-countdown__timer-unit-value",children:i}),(0,z.jsx)("div",{className:"closet-countdown__timer-unit-name",children:c("time.minutes",void 0,{count:i})})]}),(0,z.jsxs)("li",{className:"closet-countdown__timer-unit",children:[(0,z.jsx)("div",{className:"closet-countdown__timer-unit-value",children:n}),(0,z.jsx)("div",{className:"closet-countdown__timer-unit-name",children:c("time.seconds",void 0,{count:n})})]})]})})})(),g&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,children:c("title",{username:i})})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,as:"p",html:!0,children:c("disclaimer")}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})]}),g&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(KQ,{userId:t,username:i,isActive:n,size:ic.I.Size.Medium}),(0,z.jsx)(x.Z,{})]})]})},H0=e=>{let{userId:t,itemId:i,endDate:n,sellerId:s,isFollowed:r,ownerLogin:a,isHatePresent:o}=e;const[l,c]=(0,m.useState)(!0);return l?(0,z.jsx)(V0,{isFollowed:r,userId:t,endDate:n,username:a,onCountdownEnd:()=>c(!1),isHatePresent:o}):i&&s?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(B0,{itemId:i,sellerId:s}),(0,z.jsx)(x.Z,{})]}):null},G0=e=>{let{isOpen:t,itemId:i,onClose:n,currency:s,itemPrice:r}=e;const a=(0,th.cI)(),{reset:o,setError:l,getValues:c,handleSubmit:d}=a,[u,g]=(0,m.useState)(!1),h=(0,p.I0)(),{track:x}=vi();Xn({shouldTrackExpose:t,abTestName:"offers_price_guiding_discount_buttons"});const f=(0,p.v9)(X),y=(0,p.v9)(Nc),v=(0,p.v9)(Rd),_=(0,p.v9)(zu),b=(0,p.v9)(Lu),j=(0,p.v9)(Eu),S=(0,p.v9)(Ou),Z=null==b?void 0:b.remaining,I=Number(null==b?void 0:b.minPrice.amount),C=Number(null==b?void 0:b.maxPrice.amount),k=(0,m.useCallback)((e=>{l(lh.Offer,{type:"manual",message:e}),g(!1)}),[l]),w=(0,m.useCallback)((e=>{null!=v&&v.transactionId&&x(jn({isBuyer:!0,currentPrice:Number(r),offeredPrice:Number(e),transactionId:v.transactionId}))}),[x,r,v]);if((0,m.useEffect)((()=>{t&&S&&o({[lh.Offer]:S.price.amount})}),[o,t,S]),(0,m.useEffect)((()=>{h(Dm.getOfferRequestOptionsRequest({itemPrice:{amount:r,currencyCode:s}}))}),[h,s,r]),(0,m.useEffect)((()=>{_.uiState===Ne.Success&&v&&f&&(x(Qi({userId:f,itemId:i})),(0,ls.ru)(Rc(v.id))),_.uiState===Ne.Failure&&_.error&&k(_.error)}),[f,i,x,k,v,_]),0===Z)return(0,z.jsx)(Sh,{show:t,onClose:n});if(!b||!Z)return null;const{feesReductionThreshold:P}=b,T=P?Ua(P,y):null;return(0,z.jsx)(th.RV,{...a,children:(0,z.jsx)(jh,{isBuyer:!0,show:t,isSubmitting:u,minItemPrice:I,maxItemPrice:C,itemPrice:{amount:r,currencyCode:s},thresholdPrice:T,remainingOffers:Z,offerPriceSuggestions:j,preselectedOfferPriceSuggestion:S,onSubmit:d((function(){if(null==v||!v.transactionId)return;g(!0);const e=c().offer.replace(",",".");w(e),h(Dm.createOfferRequest({currency:s,isBuyer:!0,price:e,transactionId:v.transactionId}))})),onClose:function(){u||n()}})})},W0=e=>{var t;let{itemId:i,currency:n,sellerId:s,itemPrice:r}=e;const a=(0,p.I0)(),{track:o}=vi(),l=U("item.actions"),{searchParams:c}=xc(),d=(0,p.v9)(we),u=(0,p.v9)(Rd),g=(0,p.v9)(_e),h=(0,p.v9)(Vn("offers_limitations")),[x,f]=(0,m.useState)(!1),y=null===(t=c.referrer)||void 0===t?void 0:t.toString(),v=AO(),_=(0,m.useRef)(y===$t.Catalog?v.searchSessionId:null);return(0,m.useEffect)((()=>{x&&null!=u&&u.transactionId&&(o(Ri({screen:$t.Item,target:qm.MakeBuyerSideOffer,targetDetails:JSON.stringify({item_id:i,transaction_id:u.transactionId})})),o(gn({itemId:Number(i),transactionId:u.transactionId,button:"make_offer",globalSearchSessionId:v.globalSearchSessionId,searchSessionId:_.current,homepageSessionId:Bm()})))}),[o,i,u,x,v.globalSearchSessionId]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(ic.I,{text:l("offer_request"),size:ic.I.Size.Medium,onClick:function(){if(g)return f(!0),h&&o(bn({...d,...h})),void a(Dm.createItemConversationThreadRequest({itemId:i,sellerId:s,initiator:Vc.BuyerEntersOfferForm}));a(NL.openAuthModal())},testId:"item-buyer-offer-button"}),g&&(0,z.jsx)(G0,{isOpen:x,itemId:i,currency:n,itemPrice:r,onClose:function(){f(!1)}})]})},X0=e=>{let{testId:t,url:i}=e;const n=U("header");return(0,z.jsx)("a",{"data-testid":t,className:"u-flexbox u-align-items-center",href:i,children:(0,z.jsx)(ht.Z,{name:"question-circle",aria:{"aria-label":n("a11y.help")},color:ht.Z.Color.GreyscaleLevel4})})},Y0="".concat(Be.Fv,"/assets/web-logo"),K0=e=>{let{portal:t,onClick:i=v.noop}=e;const n=U("header.a11y"),{track:s}=vi(),r=(0,p.v9)(W),a=["de","de_babies"].includes(t),o=(e=>e?["de","de_babies"].includes(e)?e:e.startsWith("fr")?"default":"inactive":"default")(t),l=()=>(0,z.jsx)("div",{className:y()("l-header__logo-container",{"l-header__logo-container--wide":a}),children:(0,z.jsx)(Kl.U,{src:"".concat(Y0,"/").concat(o,"/logo.svg"),alt:n("logo")})});return(0,z.jsx)("div",{className:"l-header__logo",children:(0,z.jsx)("a",{className:"u-block",href:Me.mYc,title:n("logo"),"aria-label":n("logo"),onClick:e=>{const t=Ri({target:qm.Logo});return s(t),i(e)},"data-testid":"header-logo-id",children:r?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"u-phones-only",children:(0,z.jsx)(Kl.U,{src:"".concat(Y0,"/").concat(o,"/symbol.svg"),alt:n("logo")})}),(0,z.jsx)("div",{className:y()("u-tablets-up-only","u-ui-padding-left-small"),children:l()})]}):(0,z.jsx)("div",{className:"u-ui-padding-left-small",children:l()})})})},J0=e=>{let{languages:t,activeLanguage:i,isMenuOpen:n,hideLanguageMenu:s,onLanguageMenuToggle:r,saveLanguageSelection:a}=e;const{title_short:o}=i,l=e=>{const{id:t}=i,n=e.id===t?{theme:"amplified",bold:!0}:{};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:e.title_local,...n}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)(xt.Z,{text:"(".concat(e.title,")"),...n})]})},c=e=>()=>{a(e)};return(0,z.jsx)(zp,{onOutsideClick:()=>{s()},children:(0,z.jsxs)("div",{className:"u-ui-padding-left-small",children:[(0,z.jsx)(ic.I,{text:o.toUpperCase(),styling:ic.I.Styling.Flat,size:ic.I.Size.Medium,theme:"muted",inline:!0,truncated:!1,deprecatedIcon:(0,z.jsx)(ht.Z,{name:"dropdown",size:ht.Z.Size.Small,color:ht.Z.Color.GreyscaleLevel3}),iconPosition:ic.I.IconPosition.Right,onClick:r,aria:{"aria-expanded":n}}),n&&(0,z.jsx)("div",{className:"language-selector__dropdown",children:(0,z.jsx)(g.Z,{styling:g.Z.Styling.Elevated,children:(0,z.jsx)("div",{className:"u-overflow-hidden",children:(0,z.jsx)(L,{separator:(0,z.jsx)(h.Z,{}),children:t.map((e=>(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,onClick:c(e),children:l(e)},e.id)))})})})})]})})},Q0=e=>{let{languages:t,activeLanguage:i,selectedLanguage:n,isMenuOpen:s,isStandalone:r,onLanguageMenuToggle:a,onLanguageSelect:o,saveLanguageSelection:l}=e;const c=e=>()=>o(e);return(0,z.jsxs)(z.Fragment,{children:[r?(0,z.jsx)("div",{className:"u-ui-padding-left-small",children:(0,z.jsx)(ic.I,{text:i.title_short.toUpperCase(),styling:ic.I.Styling.Flat,size:ic.I.Size.Medium,theme:"muted",inline:!0,truncated:!1,deprecatedIcon:(0,z.jsx)(ht.Z,{name:"dropdown",size:ht.Z.Size.Small,color:ht.Z.Color.GreyscaleLevel3}),iconPosition:ic.I.IconPosition.Right,onClick:a})}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{type:yt.Z.Type.Stacked,styling:yt.Z.Styling.Default,text:(0,z.jsx)(wx,{id:"language_selector.menu_title"})}),(0,z.jsxs)(gt.Z,{prefix:(0,z.jsx)(ht.Z,{name:"globe",color:ht.Z.Color.GreyscaleLevel3}),type:gt.Z.Type.Navigating,onClick:a,children:[(0,z.jsx)(xt.Z,{text:i.title_local,type:xt.Z.Type.Subtitle,theme:"amplified"}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)(xt.Z,{text:"(".concat(i.title,")"),type:xt.Z.Type.Subtitle,theme:"muted"})]})]}),(0,z.jsx)(cp.Z,{show:s,children:(0,z.jsxs)(g.Z,{styling:g.Z.Styling.Elevated,children:[(0,z.jsx)(gt.Z,{children:(0,z.jsx)("div",{className:"u-text-center",children:(0,z.jsx)(xt.Z,{text:(0,z.jsx)(wx,{id:"language_selector.menu_title"}),type:xt.Z.Type.Heading})})}),t.map((e=>{const t=e.id===n.id;return(0,z.jsxs)(m.Fragment,{children:[(0,z.jsxs)(gt.Z,{type:gt.Z.Type.Navigating,onClick:c(e),suffix:(0,z.jsx)(qx.J,{name:"language_selector_".concat(e.id),checked:t}),children:[(0,z.jsx)(xt.Z,{text:e.title_local,theme:"amplified",bold:!0}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)(xt.Z,{text:"(".concat(e.title,")"),bold:!0})]}),(0,z.jsx)(h.Z,{})]},e.id)})),(0,z.jsx)("div",{className:"u-ui-padding-large",children:(0,z.jsx)(ic.I,{text:(0,z.jsx)(wx,{id:"language_selector.menu_options.save"}),styling:ic.I.Styling.Filled,onClick:(d=n,()=>l(d)),testId:"language-selector-modal-save"})}),(0,z.jsx)("div",{className:"u-ui-padding-large u-padding-top-none",children:(0,z.jsx)(ic.I,{text:(0,z.jsx)(wx,{id:"language_selector.menu_options.cancel"}),styling:ic.I.Styling.Flat,onClick:a,testId:"language-selector-modal-cancel"})})]})})]});var d},$0=(e,t)=>{const i=e.find((e=>e.current)),n=e.find((e=>e.code===t));return i||n},e1=e=>{let{isStandalone:t=!1,initialLanguages:i=[]}=e;const n=E(),s=(0,p.v9)(Nc),r=$0(i,s),[a,o]=(0,m.useState)(i),[l,c]=(0,m.useState)(r||null),[d,u]=(0,m.useState)(r||null),[g,h]=(0,m.useState)(!1);(0,m.useEffect)((()=>{(async()=>{if(a.length)return;const e=await(0,Fe.Vbs)();if("errors"in e)return;const t=$0(e.languages,s);t&&(u(t),c(t)),o(e.languages)})()}),[s,a]);const x=()=>{h(!1)},f=()=>{h((e=>!e))},y=async e=>{x(),await(0,Fe.jk0)(e.code)&&(u(e),(0,ls.sl)())};return a.length<=1||!d||!l?null:n.portables?(0,z.jsx)(Q0,{languages:a,activeLanguage:d,isMenuOpen:g,isStandalone:t,onLanguageMenuToggle:f,selectedLanguage:l,onLanguageSelect:e=>{c(e)},saveLanguageSelection:y}):(0,z.jsx)(J0,{languages:a,activeLanguage:d,isMenuOpen:g,onLanguageMenuToggle:f,hideLanguageMenu:()=>{x()},saveLanguageSelection:y})};var t1=i(85232),i1=i(34458),n1=i(17589),s1=i(74639);const r1={toggle:uD},a1=(0,p.$j)((e=>({currentSearch:dR(e),query:xr(e),errors:gl(e),isPopularCatalog:Zr(e),searchSessionId:Hr(e),globalSearchSessionId:Gr(e),userId:X(e)})),r1);class o1 extends m.Component{constructor(){super(...arguments),function(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(this,"toggleSubscription",(()=>{var e;const{userId:t,currentSearch:i,query:n,searchSessionId:s,toggle:r,track:a,globalSearchSessionId:o}=this.props;t&&(r({userId:t}),a(_n({isSubscribing:!(null!=i&&i.subscribed),searchSessionId:s,searchTitle:null==i?void 0:i.title,searchQuery:null!==(e=null==i?void 0:i.search_text)&&void 0!==e?e:n,globalSearchSessionId:o})))}))}renderIcon(){const{currentSearch:e,breakpoints:t}=this.props;return t.phones?(0,z.jsx)(Wy.Z,{name:null!=e&&e.subscribed?t1.Z:i1.Z,color:null!=e&&e.subscribed?Wy.Z.Color.Primary:Wy.Z.Color.GreyscaleLevel1}):(0,z.jsx)(Wy.Z,{name:null!=e&&e.subscribed?n1.Z:s1.Z,color:null!=e&&e.subscribed?Wy.Z.Color.Primary:Wy.Z.Color.GreyscaleLevel1})}render(){const{currentSearch:e,errors:t,isPopularCatalog:i,breakpoints:n,intl:s,userId:r}=this.props;if(t||i||!r)return null;const a=null!=e&&e.subscribed?"delete":"save",o=(0,z.jsx)(vt.Z,{id:"saved_searches.actions.".concat(a)}),l=n.phones?s.formatMessage({id:"saved_searches.a11y.".concat(a)}):void 0;return(0,z.jsx)(Jw.j,{text:!n.phones&&o,textType:xt.Z.Type.Subtitle,prefix:this.renderIcon(),onClick:this.toggleSubscription,aria:{"aria-label":l},testId:"catalog-search-".concat(a,"-button")})}}const l1=a1(zx((0,iw.ZP)(F(o1))));var c1=i(72763);const d1=["pl","nl","de","it","es"],u1=["en","fr","lt"],m1=e=>"".concat(Me.n$u).concat((e=>u1.includes(e)?"/".concat(e):"")(e)),p1=e=>"".concat(m1(e),"/sustainability").concat((e=>d1.includes(e)?"?lang=".concat(e):"")(e)),g1=e=>{let{title:t,url:i,onClick:n,testId:s}=e;return(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,styling:gt.Z.Styling.Narrow,url:i,onClick:n,body:(0,z.jsx)(xt.Z,{children:t}),testId:s})},h1=e=>{let{title:t,children:i}=e;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{text:t,type:yt.Z.Type.Stacked,styling:yt.Z.Styling.Narrow}),(0,z.jsx)(x.Z,{}),(0,z.jsx)("div",{children:i})]})},x1=e=>{let{isBusinessAccountLinksVisible:t}=e;const i=U("header.main_navigation.about"),{track:n}=vi(),s=(0,p.v9)(Wt("sustainability_page_press_center_link")),r=(0,p.v9)(Wt("web_item_verification_page_link")),a=(0,p.v9)(Wt("press_menu")),o=(0,p.v9)(Wt("web_press_center_link")),l=(0,p.v9)(Wt("jobs_page")),c=(0,p.v9)(Wt("new_jobs_career_portal")),d=(0,p.v9)(Nc),u=()=>{n(Ri({target:qm.SustainabilityPageLink,targetDetails:"navigation_web"}))};return(0,z.jsxs)("div",{children:[(0,z.jsxs)(h1,{title:i("discover.title"),children:[(0,z.jsx)(g1,{title:i("discover.items.how_it_works"),url:Me.OkD}),r&&(0,z.jsx)(g1,{title:i("discover.items.item_verification"),url:Me.J55}),(0,z.jsx)(g1,{title:i("discover.items.app"),url:Me.QwI}),(0,z.jsx)(g1,{title:i("discover.items.help"),url:Me.lw5}),(0,z.jsx)(g1,{title:i("discover.items.infoboard"),url:Me.Ga_}),t&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(g1,{title:i("discover.items.pro"),url:Me.Jo}),(0,z.jsx)(g1,{title:i("discover.items.pro_guide"),url:Me._qi})]})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(()=>{const e=String(d.substring(0,2)),t=o?m1(e):Me.v6v,n=c?Me.VHG:Me.Ch7;return(0,z.jsxs)(h1,{title:i("company.title"),children:[(0,z.jsx)(g1,{title:i("company.items.about"),url:Me.ouD}),l&&(0,z.jsx)(g1,{testId:"jobs-link-header",title:i("company.items.jobs"),url:n}),s&&(0,z.jsx)(g1,{title:i("company.items.sustainability"),url:p1(e),onClick:u}),a&&(0,z.jsx)(g1,{title:i("company.items.press"),url:t,testId:"press-link"}),(0,z.jsx)(g1,{title:i("company.items.advertising"),url:Me.E2e})]})})()]})},f1=e=>{let{impressumUrl:t,isBusinessAccountLinksVisible:i}=e;const n=U("header.main_navigation.about");return(0,z.jsxs)("div",{children:[(0,z.jsxs)(h1,{title:n("policies.title"),children:[(0,z.jsx)(g1,{title:n("policies.items.safety"),url:Me.c1u}),t&&(0,z.jsx)(g1,{title:n("policies.items.impressum"),url:t}),(0,z.jsx)(g1,{title:n("policies.items.privacy_policy"),url:Me.hOY}),(0,z.jsx)(g1,{title:n("policies.items.terms_and_conditions"),url:Me.qyY}),(0,z.jsx)(g1,{title:n("policies.items.cookie_policy"),url:Me.ljN}),i&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(g1,{title:n("policies.items.pro_terms_of_sale"),url:Me.$ru}),(0,z.jsx)(g1,{title:n("policies.items.pro_terms_of_use"),url:Me.vK_})]})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(h1,{title:n("privacy.title"),children:(0,z.jsx)(g1,{title:n("privacy.items.cookies"),url:"#",onClick:e=>{e.preventDefault(),(0,ls.ap)()},testId:"about-panel-cookie-settings-button"})})]})},y1=()=>{const e=U("header.main_navigation.about.communities"),t=(0,p.v9)(W);return(0,z.jsx)("div",{children:(0,z.jsxs)(h1,{title:e("title"),children:[(0,z.jsx)(g1,{title:e("items.forum"),url:Me.R1Q}),!(null==t||!t.favourite_topic_count)&&(0,z.jsx)(g1,{title:e("items.forum_favourite_topics"),url:Me.Nei}),!!t&&(0,z.jsx)(g1,{title:e("items.forum_own_topics"),url:Me.AnP})]})})},v1=e=>{let{impressumUrl:t,isBusinessAccountLinksVisible:i}=e;const n=(0,p.v9)(Wt("disable_forum_web"));return(0,z.jsx)(g.Z,{styling:g.Z.Styling.Elevated,children:(0,z.jsx)("div",{className:"u-overflow-auto",children:(0,z.jsx)(gt.Z,{body:(0,z.jsx)("div",{className:"catalog-dropdown__content",children:(0,z.jsxs)("div",{className:"u-flexbox u-nowrap",children:[(0,z.jsx)(x1,{isBusinessAccountLinksVisible:i}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(f1,{impressumUrl:t,isBusinessAccountLinksVisible:i}),!n&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{}),(0,z.jsx)(y1,{})]})]})})})})})},_1=e=>{let{selectedCategory:t,selectedCategoryId:i,triggerCatalogModal:n}=e;const s=U(),{track:r}=vi(),a=[{...t,code:_a,title:s("header.main_navigation.catalogs.see_all")},...t.catalogs],o=e=>{let{id:t,title:i,landing:s}=e;return e=>{if(s)e.preventDefault(),n({catalogName:i,itemsRemaining:s.itemsRemaining,imageUrl:s.imageUrl});else{const e=sn({catalogIds:[t],attributeId:Za.Navigation});r(e)}}};return(0,z.jsx)("div",{className:y()("catalog-dropdown__category",{active:t.id===i}),children:a.map((e=>(0,z.jsx)("div",{className:"catalog-dropdown__item",children:(0,z.jsx)(gt.Z,{suffix:e.landing&&(0,z.jsx)(oC.Z,{theme:"primary",content:s("common.new_badge")}),type:gt.Z.Type.Navigating,styling:gt.Z.Styling.Narrow,body:(0,z.jsx)(xt.Z,{truncate:!0,children:e.title}),url:e.url,urlProps:{title:e.title},onClick:o(e),testId:"catalog-item-".concat(e.id),aria:{"aria-label":e.title}})},e.id)))})},b1=e=>{var t;let{rootCategory:i,triggerCatalogModal:n}=e;const s=U(),[r,a]=(0,m.useState)((null===(t=i.catalogs[0])||void 0===t?void 0:t.id)||va),o=[{...i,code:_a,title:s("header.main_navigation.catalogs.see_all")},...i.catalogs],l=o.length>=8?gt.Z.Styling.Narrow:void 0,c=e=>{let{id:t,url:i,code:s,title:r,catalogs:o,landing:l}=e;return e=>{e.preventDefault(),e.stopPropagation(),o.length&&s!==_a&&!l?(e.nativeEvent.stopImmediatePropagation(),a(t)):l?n({catalogName:r,itemsRemaining:l.itemsRemaining,imageUrl:l.imageUrl}):(0,ls.ru)(i)}};return(0,z.jsx)("div",{className:"catalog-dropdown",children:(0,z.jsx)(g.Z,{styling:g.Z.Styling.Elevated,children:(0,z.jsx)("div",{className:"u-overflow-auto",children:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Narrow,body:(0,z.jsx)("div",{className:"catalog-dropdown__content",children:(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsx)("div",{className:"catalog-dropdown__categories",children:o.map((e=>{var t;return(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,styling:l,prefix:e.code===_a?(0,z.jsx)(ht.Z,{name:"dots",color:ht.Z.Color.Primary}):(0,z.jsx)(Kl.U,{src:null===(t=e.photo)||void 0===t?void 0:t.url,scaling:Kl.U.Scaling.Cover,size:Kl.U.Size.Regular}),suffix:e.landing&&(0,z.jsx)(oC.Z,{theme:"primary",content:s("common.new_badge")}),body:(0,z.jsx)(xt.Z,{truncate:!0,bold:e.id===r,theme:e.id===r?"amplified":"inherit",children:e.title}),url:e.url,urlProps:{title:e.title},onClick:c(e),testId:"category-item-".concat(e.id),aria:{"aria-label":e.title}},e.id)}))}),(0,z.jsx)("div",{className:"catalog-dropdown__catalogs",children:o.map((e=>(0,z.jsx)(_1,{selectedCategory:e,selectedCategoryId:r,triggerCatalogModal:n},e.id)))})]})})})})})})},j1=e=>{let{tree:t,impressumUrl:i,isBusinessAccountLinksVisible:n,isOurPlatformVisible:s}=e;const r=U("header.main_navigation"),{track:a}=vi(),[o,l]=(0,m.useState)(va),[c,d]=(0,m.useState)(!1),[u,p]=(0,m.useState)({catalogName:"",imageUrl:"",itemsRemaining:0}),g=(0,m.useMemo)((()=>qO(t)),[t]),h=e=>{let{catalogName:t,itemsRemaining:i,imageUrl:n}=e;p({catalogName:t,itemsRemaining:i,imageUrl:n}),d(!0)},x=()=>{p({catalogName:"",imageUrl:"",itemsRemaining:0}),d(!1)},f=e=>{e.preventDefault()},v=(e,t,i)=>(0,z.jsx)("a",{className:"nav-links",role:"button",href:e,onClick:f,"data-testid":i,tabIndex:-1,children:t}),_=e=>(0,z.jsx)("div",{id:"nav-menu-".concat(e.id),"aria-hidden":e.id!==o,"data-testid":"category-panel-".concat(e.id),className:y()("u-padding-none",{"is-active":e.id===o}),children:(0,z.jsx)(b1,{rootCategory:e,triggerCatalogModal:h})},e.id),b=e=>(0,z.jsx)("div",{id:"nav-menu-about","aria-hidden":!e,"data-testid":"category-panel-about",className:y()("u-padding-none",{"is-active":e}),children:(0,z.jsx)(v1,{impressumUrl:i,isBusinessAccountLinksVisible:n})}),j=(0,m.useCallback)((()=>{l(va)}),[]);(0,m.useEffect)((()=>(o!==va&&document.addEventListener("click",j),()=>document.removeEventListener("click",j))),[o,j]),(0,m.useEffect)((()=>{if(o===va||o===ba||o===ja)return;const e=Ri({target:qm.CatalogTab,targetDetails:"".concat(o)});a(e)}),[o,a]);const S=r("catalogs.new.title",{name:u.catalogName}),Z=r("catalogs.new.details",{count:u.itemsRemaining},{count:u.itemsRemaining}),I=u.imageUrl||void 0;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("nav",{className:"u-fit-content-width",children:(0,z.jsx)(c1.Z,{items:(()=>{const e=[],t=o===ba;return g.forEach((t=>{e.push({id:t.id,title:v(t.url,t.title,"nav-tab-".concat(t.id)),aria:{"aria-expanded":o===t.id,"aria-controls":"nav-menu-".concat(t.id),"aria-label":t.title},contentExperimental:_(t)})})),e.push({id:ba,title:v(Me.ouD,r("tabs.about"),"nav-tab-about"),aria:{"aria-expanded":t,"aria-controls":"nav-menu-about","aria-label":r("tabs.about")},contentExperimental:b(t)}),s&&e.push({id:ja,title:v(Me.Nc0,r("tabs.platform"),"nav-tab-platform"),aria:{"aria-label":r("tabs.platform")}}),e})(),activeItemId:o,onClick:(e,t)=>{let{id:i}=e;t.nativeEvent.stopImmediatePropagation(),l(i===o?va:i),i===ja&&(0,ls.ru)(Me.Nc0)},role:"menu"})}),(0,z.jsx)(cp.Z,{show:c,closeOnOverlay:!0,defaultCallback:x,imageUrl:I,title:S,body:Z,actions:[{text:r("catalogs.new.actions.upload"),style:cp.Z.ActionStyling.Filled,url:Me.UNR},{text:r("catalogs.new.actions.close"),style:cp.Z.ActionStyling.Flat,callback:x}]})]})},S1=()=>{const e=(0,p.I0)(),t=XY(),i=U(),{track:n}=vi(),s=(0,p.v9)(HY);return(0,z.jsx)(ic.I,{text:i("header.actions.login"),size:ic.I.Size.Small,url:"".concat(Me.iGV,"?").concat((0,ys.Kf)({ref_url:t})),onClick:function(t){n(Ri({target:qm.Login})),s||(t.preventDefault(),e(NL.openAuthModal()))},testId:"header--login-button"})},Z1=e=>{let{isActive:t,onToggle:i}=e;const{track:n}=vi(),s=U("header"),r=t?"x":"menu",a=t?"close":"open";return(0,z.jsx)(ic.I,{onClick:function(){n(Ri({target:qm.NavigationMenuToggle})),i()},deprecatedIconName:r,deprecatedIconColor:uI.S.GreyscaleLevel3,styling:ic.I.Styling.Flat,aria:{"aria-label":s("a11y.menu.".concat(a))}})},I1=()=>{const e=(0,p.v9)(X),t=U(),{track:i}=vi();return(0,z.jsx)(ic.I,{text:t("header.actions.upload_item"),styling:ic.I.Styling.Filled,size:ic.I.Size.Small,url:e?Me.UNR:"".concat(Me.iGV,"?").concat((0,ys.Kf)({ref_url:Me.UNR})),rel:"nofollow",onClick:function(){i(Ri({target:qm.UploadItem}))}})},C1=e=>{var t;let{unreadConversationCount:i=0}=e;const n=U("header.a11y.conversations"),{inboxMessageCards:s}=Cm(),r=i+(null!==(t=null==s?void 0:s.filter((e=>!e.viewed)).length)&&void 0!==t?t:0),a=s?Math.min(r,99):0,o=r>99?"+":"";return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(ic.I,{testId:"header-notification-button",styling:ic.I.Styling.Flat,deprecatedIcon:(0,z.jsx)(ht.Z,{name:"envelope",size:ht.Z.Size.Regular,color:ht.Z.Color.GreyscaleLevel4,aria:{"aria-label":r?n("new_conversations",{count:r}):n("conversations")}}),url:Ec}),!!a&&(0,z.jsx)("div",{className:"user-actions__notification","data-testid":"conversations-badge",children:(0,z.jsx)(oC.Z,{content:(0,z.jsx)("span",{"aria-hidden":"true",children:"".concat(a).concat(o)}),theme:"warning"})})]})},k1=e=>({id:String(e.id),body:e.body,link:e.link,photoUrl:e.small_photo_url,photoStyle:"user"===e.photo_type?Kl.U.Styling.Circle:Kl.U.Styling.Rounded,time:new Date(e.updated_at).getTime(),type:lg.Vinted,isViewed:e.is_read,note:e.note,isControl:!1}),w1=e=>[...e].sort(((e,t)=>t.time-e.time)),P1=5,z1=function(){let{perPage:e=P1,isPaginated:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[i,n]=(0,m.useState)(Ne.Idle),[s,r]=(0,m.useState)(!1),[a,o]=(0,m.useState)([]),[l,c]=(0,m.useState)(!1),d=(0,m.useRef)(1),{brazeNotificationCards:u,brazeControlNotificationCards:p}=function(){const{inboxNotificationCardStore:e}=(0,m.useContext)(Im),t=(0,m.useSyncExternalStore)(e.subscribe,(()=>e.state),(()=>null)),[i,n]=(0,m.useMemo)((()=>t?(0,v.partition)(t,(e=>"control"===e.extras.variant)):[void 0,void 0]),[t]);return{brazeNotificationCards:n,brazeControlNotificationCards:i}}(),g=(0,m.useMemo)((()=>u?u.map((e=>{return{id:(t=e).id,body:t.description,link:t.url,photoUrl:t.extras.logoURL||Ve,photoStyle:Kl.U.Styling.Circle,time:t.updated.getTime(),type:lg.Braze,isViewed:t.viewed,isControl:"control"===t.extras.variant,note:null};var t})):[]),[u]),h=g.filter((e=>!e.isViewed)).length,x=[...a,...g],f=t?((e,t)=>{if(t)return w1(e);const i=e.filter((e=>e.type===lg.Vinted));if(!i.length)return w1(e);const n=i[i.length-1].time,s=e.filter((e=>e.type===lg.Vinted||e.time>=n));return w1(s)})(x,l):w1(x);return(0,m.useEffect)((()=>{i===Ne.Pending&&(async()=>{const t=await(0,Fe.gGZ)({perPage:e,page:d.current});if("errors"in t)return n(Ne.Failure),void c(!0);if(!t.notifications.length)return n(Ne.Success),c(!0),void r(!0);d.current+=1;const i=t.notifications.map(k1);o((e=>[...e,...i])),r(!0),n(Ne.Success),c(t.notifications.length<e)})()}),[i,e]),{notifications:s?f:[],setNotifications:o,controlNotificationCards:p,brazeNotificationCount:h,uiState:i,setUiState:n,isEndReached:l}},T1=()=>{const{track:e}=vi(),{logCardClick:t,logCardImpression:i,inboxNotificationCardStore:n}=(0,m.useContext)(Im),s=(0,m.useRef)([]);return{onClick:i=>()=>{switch(i.type){case lg.Vinted:e(Ri({target:qm.Notification,targetDetails:JSON.stringify({notification_id:i.id})}));break;case lg.Braze:if(!i.link)return;t(i.id)}},onEnter:t=>()=>{const r=s.current.includes(t.id);r||s.current.push(t.id);const a={notification_id:t.id};switch(t.type){case lg.Vinted:if(r)break;e(Gi({target:cb.Notification,targetDetails:JSON.stringify(a)}));break;case lg.Braze:{const e=t.isViewed;i(t.id).then((t=>{t&&!e&&n.state&&(n.state=Array.from(n.state))}));break}}}}},F1=e=>{let{notification:t,onClick:i,onEnter:n,defaultHighlighted:s}=e;const[r]=(0,m.useState)(s);return(0,z.jsx)(Jp.h,{onEnter:n,children:(0,z.jsx)("div",{children:(0,z.jsx)(gt.Z,{type:t.link?gt.Z.Type.Navigating:void 0,onClick:i,highlighted:r,prefix:(0,z.jsx)(Kl.U,{src:t.photoUrl,fallbackSrc:t.type===lg.Braze?Ve:void 0,size:Kl.U.Size.Large,styling:t.photoStyle}),body:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:t.body,html:!0,width:xt.Z.Width.Parent}),!!t.note&&(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,width:xt.Z.Width.Parent,text:t.note,html:!0}),(0,z.jsx)(xt.Z,{text:(0,z.jsx)(zt,{value:t.time}),type:xt.Z.Type.Subtitle,width:xt.Z.Width.Parent})]}),url:t.link||void 0,testId:"user-notification-item".concat(r?"-highlighted":"")})})})},N1=e=>{let{notifications:t,isLoading:i}=e;const n=U(),{onClick:s,onEnter:r}=T1();return i?(0,z.jsx)("div",{className:"u-ui-margin-x-large u-flexbox u-justify-content-center","data-testid":"loader",children:(0,z.jsx)(Dp.Z,{size:Dp.Z.Size.Large})}):t.length?(0,z.jsxs)("div",{children:[(0,z.jsx)(Lg,{children:(0,z.jsx)("div",{className:"header-notification-dropdown__container",children:(0,z.jsx)(L,{separator:(0,z.jsx)(h.Z,{}),children:t.map((function(e){return(0,z.jsx)(F1,{notification:e,onClick:s(e),onEnter:r(e),defaultHighlighted:!e.isViewed},e.id)}))})})}),(0,z.jsx)("div",{className:"header-notification-dropdown__button-container",children:(0,z.jsx)(ic.I,{url:Me.CqN,text:n("header.notifications.see_all"),size:ic.I.Size.Medium})})]}):(0,z.jsxs)("div",{className:"u-ui-margin-vertical-x-large u-ui-margin-horizontal-x2-large u-flexbox u-flex-direction-column u-align-items-center",children:[(0,z.jsx)(u.Z,{animationUrl:"/assets/animations/notifications-empty-state.json",size:u.Z.Size.Large}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:n("header.notifications.empty_state.title"),alignment:xt.Z.Alignment.Center,type:xt.Z.Type.Title}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(xt.Z,{text:n("header.notifications.empty_state.body"),alignment:xt.Z.Alignment.Center,type:xt.Z.Type.Body,html:!0})]})},L1=e=>{let{unreadNotificationCount:t=0,onNotificationsFetched:i}=e;const n=U("header.a11y.notifications"),[s,r]=(0,m.useState)(!1),{notifications:a,controlNotificationCards:o,setNotifications:l,brazeNotificationCount:c,uiState:d,setUiState:u}=z1();function p(){const e=s;e&&l((e=>e.map((e=>e.isViewed?e:{...e,isViewed:!0})))),e||d!==Ne.Idle&&d!==Ne.Failure||u(Ne.Pending),r(!e)}Ez(s&&o?o.map((e=>{let{id:t}=e;return t})):[]),(0,m.useEffect)((()=>{d===Ne.Success&&(null==i||i())}),[d,i]);const g=t+c,h=Math.min(g,99),x=g>99?"+":"";return(0,z.jsxs)(zp,{onOutsideClick:function(){s&&p()},children:[(0,z.jsx)(ic.I,{testId:"header-notification-button",onClick:function(e){e.preventDefault(),p()},styling:ic.I.Styling.Flat,deprecatedIcon:(0,z.jsx)(ht.Z,{name:"bell",size:ht.Z.Size.Regular,color:ht.Z.Color.GreyscaleLevel4,aria:{"aria-label":g?n("new_notifications",{count:g}):n("notifications")}}),url:Me.CqN}),!!h&&(0,z.jsx)("div",{className:"user-actions__notification","data-testid":"header-notifications-badge",children:(0,z.jsx)(oC.Z,{content:(0,z.jsx)("span",{"aria-hidden":"true",children:"".concat(h).concat(x)}),theme:"warning"})}),s&&(0,z.jsx)("div",{className:"header-notification-dropdown","data-testid":"header-notification-dropdown",children:(0,z.jsx)(N1,{isLoading:d===Ne.Pending,notifications:a.slice(0,5)})})]})},E1=()=>{const e=U("header"),{userStats:t,fetchUserStats:i}=fm(),{unreadMsgCount:n=0,unreadNotificationCount:s=0}=null!=t?t:{},r=(0,m.useCallback)((()=>{s>0&&i()}),[s,i]);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"u-position-relative",children:(0,z.jsx)(C1,{unreadConversationCount:n})}),(0,z.jsx)("div",{className:"u-position-relative",children:(0,z.jsx)(L1,{onNotificationsFetched:r,unreadNotificationCount:s})}),(0,z.jsx)("div",{className:"u-position-relative",children:(0,z.jsx)(ic.I,{deprecatedIconName:"heart",deprecatedIconColor:uI.S.GreyscaleLevel4,styling:ic.I.Styling.Flat,url:Me.eUh,aria:{"aria-label":e("a11y.favorited_items")}})})]})},O1=e=>{let{query:t,items:i,highlightedIndex:n,searchSessionId:s,globalSearchSessionId:r,suggestionUrl:a,setSuggestionsSessionId:o,suggestionsListId:l,onSuggestionClick:c=v.noop}=e;const{track:d}=vi(),u=(0,p.I0)(),g=(0,m.useRef)(),h=(0,m.useRef)(t),x=(0,m.useRef)(null),f=(0,p.v9)(Wt("web_add_view_search_suggestion_event"));(0,m.useEffect)((()=>{x.current=ZF().v4(),o(x.current)}),[o]),(0,m.useEffect)((()=>{h.current=t}),[t]),(0,m.useEffect)((()=>{i.length&&!(0,v.isEqual)(g.current,i)&&(d((e=>{const{suggestions:t,query:i,suggestionsSessionId:n}=e,s={suggestions_list:t,query:i};return n&&(s.suggestions_session_id=n),{event:"user.view_search_suggestions",extra:s}})({suggestions:i.map((e=>e.query)),query:h.current,suggestionsSessionId:x.current})),g.current=i)}),[d,i]),(0,m.useEffect)((()=>()=>{u(kF.clearSuggestions())}),[u]);const y=(e,t)=>n=>{const s=i.filter((e=>e.type===ji.Scoped));c(e,t,s.length,n)},_=e=>e.type===ji.Scoped?[e.id,(0,v.kebabCase)(e.subtitle)].join("-"):e.id,b=e=>{const i=(0,v.escape)(t);return(0,v.escape)(e).replace(new RegExp("^".concat((0,v.escapeRegExp)(i)),"i"),"<b>$&</b>")},j=(e,t)=>{const i={type:gt.Z.Type.Navigating,url:a(e),highlighted:n===t,testId:"suggestion-".concat(e.id)};switch(e.type){case ji.Scoped:return(0,m.createElement)(gt.Z,{...i,onClick:y(e,t),key:_(e)},(0,z.jsx)(xt.Z,{theme:"amplified",text:b(e.title),html:!0,highlight:!0,highlightTheme:"muted"})," ",(0,z.jsx)(xt.Z,{text:e.subtitle,type:xt.Z.Type.Subtitle,theme:"primary",as:"span"}));case ji.Multiword:case ji.Brand:case ji.Catalog:return(0,m.createElement)(gt.Z,{...i,onClick:y(e,t),key:_(e)},(0,z.jsx)(xt.Z,{theme:"amplified",text:b(e.title),html:!0,highlight:!0,highlightTheme:"muted"}));case ji.Fallback:return(0,m.createElement)(gt.Z,{...i,onClick:y(e,t),title:e.title,key:_(e)});default:return null}},S=(e,t)=>()=>{const i=e.type===ji.Fallback,n={frontendGeneratedTextSelected:i,globalSearchSessionId:r,query:e.query,searchSessionId:s||null,selectedSuggestionText:i?e.query:e.title,suggestionPosition:t+1,suggestionsListId:l,suggestionsSessionId:x.current};"params"in e&&(n.params=e.params),d((e=>{const{suggestionPosition:t,query:i,suggestionsSessionId:n,selectedSuggestionText:s,suggestionsListId:r,params:a,frontendGeneratedTextSelected:o,searchSessionId:l,globalSearchSessionId:c}=e,d={suggestion_position:t,selected_suggestion_text:s,query:i,suggestions_session_id:n,suggestions_list_id:r,frontend_generated_text_selected:o,search_session_id:l,global_search_session_id:c};return null!=a&&a.length&&(d.params=a),{event:"user.view_search_suggestion",extra:d}})(n))};return i.length?(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,children:f?(Z=i,(0,z.jsx)(kp,{children:Z.map(((e,t)=>(0,z.jsx)(Jp.h,{onEnter:S(e,t),children:(0,z.jsx)("div",{children:j(e,t)})},_(e))))})):(0,z.jsx)(kp,{children:i.map(((e,t)=>j(e,t)))})}):null;var Z},R1=e=>{var t,i,n,s;const{search_text:r}=e,a=["is_for_sell"].filter((t=>e[t])).map((e=>"search_".concat(e))),o={search_text:r,brand_ids:e.brands.map((e=>e.id)),color_ids:e.color_ids,size_ids:e.size_ids,status_ids:e.status_ids,catalog:(0,v.compact)([e.catalog_id]),material_ids:e.material_ids,video_game_rating_ids:e.video_game_rating_ids,disposal:(0,v.compact)(a),price_from:null===(t=e.price_from)||void 0===t?void 0:t.amount,price_to:null===(i=e.price_to)||void 0===i?void 0:i.amount,currency:(null===(n=e.price_from)||void 0===n?void 0:n.currency_code)||(null===(s=e.price_to)||void 0===s?void 0:s.currency_code)};return(0,_i.Gj)(o)},D1=e=>{let{searches:t,searchUrl:i,highlightedIndex:n,searchSessionId:s,globalSearchSessionId:r,onSearchClick:a,onSubscribeClick:o}=e;const l=U("saved_searches"),{track:c}=vi(),d=(0,m.useRef)(null);(0,m.useEffect)((()=>{var e;null===(e=d.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"nearest"})}),[n]);const u=e=>t=>{a&&a(e,t)},p=e=>t=>{t.stopPropagation(),t.preventDefault(),c(_n({searchSessionId:s,isSubscribing:!e.subscribed,searchTitle:e.title,searchQuery:e.search_text,globalSearchSessionId:r})),o&&o(e,t)};function g(e){const t=e.subscribed?ht.Z.Color.Primary:ht.Z.Color.GreyscaleLevel1,i=e.subscribed?"bookmark-filled":"bookmark";return(0,z.jsx)("div",{className:"u-position-relative u-zindex-bump",children:(0,z.jsx)(ic.I,{deprecatedIcon:(0,z.jsx)(ht.Z,{name:i,color:t,title:e.subscribed?l("a11y.remove_saved_search",{title:e.title}):l("a11y.save_search",{title:e.title})}),styling:ic.I.Styling.Flat,theme:"muted",testId:"subscription-toggle",onClick:p(e)})})}function h(e,t){return(0,z.jsxs)("div",{className:"u-flexbox",children:[!!t&&(0,z.jsx)("div",{className:"u-ui-padding-right-small",children:(0,z.jsx)(xt.Z,{text:"+".concat(t),theme:"primary"})}),e]})}return(0,z.jsx)("div",{className:"saved-searches",children:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,testId:"saved-searches",children:(0,z.jsx)("div",{className:"saved-searches__content",children:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{text:l("list.title"),type:yt.Z.Type.Stacked}),t.map(((e,t)=>(e=>{let{search:t,index:s}=e;const{id:r,title:a,subtitle:o,new_items_count:l}=t,c={...R1(t),search_id:r,order:uR.NewestFirst},m="".concat(i,"?").concat((0,ys.Kf)(c)),p=s===n;return(0,z.jsx)("div",{ref:p?d:null,children:(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,title:h(a,l),suffix:g(t),highlighted:p,url:m,onClick:u(t),aria:{"aria-label":t.title},children:!!o&&(0,z.jsx)(xt.Z,{text:o})})},r)})({search:e,index:t})))]})})})})};function A1(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class M1 extends m.PureComponent{constructor(){super(...arguments),A1(this,"translate",(e=>this.props.intl.formatMessage({id:"saved_searches.first_time_subscribe_modal.".concat(e)})))}render(){return(0,z.jsx)(cp.Z,{show:this.props.isOpen,testId:"search-subscribe-modal",title:this.translate("title"),body:this.translate("text"),actions:[{text:this.translate("action"),style:cp.Z.ActionStyling.Filled,callback:this.props.onClose,testId:"search-subscribe-modal-close-button"}]})}}A1(M1,"defaultProps",{isOpen:!1,onClose:null});const U1=(0,iw.ZP)(M1),B1=e=>e[IF],q1=e=>B1(e).suggestions,V1=e=>B1(e).suggestionsListId;function H1(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const G1=[Si.Item,Si.User,Si.Forum,Si.Faq],W1=(0,p.$j)((e=>({isForumDisabled:Wt("disable_forum_web")(e)})));class X1 extends m.Component{constructor(){super(...arguments),H1(this,"translate",(e=>this.props.intl.formatMessage({id:"searchbar.".concat(e)}))),H1(this,"handleButtonClick",(()=>{this.props.onClick&&this.props.onClick()})),H1(this,"handleTypeClick",(e=>()=>{this.props.onSelect&&this.props.onSelect(e)}))}renderDropdown(e){return this.props.isOpen?(0,z.jsx)("div",{className:"u-ui-margin-top-regular u-position-absolute",style:{width:150},children:(0,z.jsx)(g.Z,{children:(0,z.jsx)("div",{className:"u-overflow-hidden",children:e.map((e=>(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,styling:gt.Z.Styling.Narrow,onClick:this.handleTypeClick(e),testId:"search-bar-search-type-".concat(e),children:this.translate("types.".concat(e))},e)))})})}):null}render(){const{isForumDisabled:e}=this.props,t=e?G1.filter((e=>e!==Si.Forum)):G1,i=t.find((e=>e===this.props.selectedType));return i?(0,z.jsxs)("div",{className:"u-position-relative",children:[(0,z.jsx)(ic.I,{text:(0,z.jsx)("span",{id:"search-".concat(i),children:this.translate("types.".concat(i))}),styling:ic.I.Styling.Flat,size:ic.I.Size.Medium,theme:"muted",deprecatedIcon:(0,z.jsx)(ht.Z,{name:"dropdown",size:ht.Z.Size.Small,color:ht.Z.Color.GreyscaleLevel3}),iconPosition:ic.I.IconPosition.Right,onClick:this.handleButtonClick,testId:"search-bar-search-type",aria:{"aria-expanded":this.props.isOpen}}),this.renderDropdown(t)]}):null}}H1(X1,"defaultProps",{isOpen:!1,selectedType:Si.Item,onClick:null,onSelect:null});const Y1=W1((0,iw.ZP)(X1)),K1={[Si.Item]:Me.JXU,[Si.User]:Me.hIg,[Si.Faq]:Me.ssV,[Si.Forum]:Me.qVU},J1=e=>(0,v.isEmpty)(e)||e.length<Be.MW,Q1=e=>{let{searchType:t=Si.Item,isInCatalog:i=!1}=e;const{searchParams:n}=xc(),s=U(),{track:r}=vi(),a=(0,p.I0)(),o=(0,p.v9)(X),l=(0,p.v9)(lR),c=(0,p.v9)(q1),d=(0,p.v9)(aR),u=(0,p.v9)(Fr),x=(0,p.v9)(J),f=(0,p.v9)(Ce),y=(0,p.v9)(Hr),_=(0,p.v9)(Gr),b=(0,p.v9)(V1),j=(0,p.v9)(Wt("web_update_select_search_suggestions_event")),S=(0,p.v9)(Wt("web_update_filter_items_event")),Z=(0,p.v9)(Wt("web_search_suggestions_autofill_when_moving_arrows")),I=(0,ys.pN)(n.search_text),[C,k]=(0,m.useState)(I),[w,P]=(0,m.useState)(t),[T,F]=(0,m.useState)(!1),[N,L]=(0,m.useState)(!1),[E,O]=(0,m.useState)(null),R=(0,m.useRef)(null),D=(0,m.useRef)(null),A=(0,m.useRef)(!1);(0,m.useEffect)((()=>{i&&a(dD())}),[a,i]);const M=e=>{D.current=e},B=e=>{if(w===Si.Item&&!(0,v.isEmpty)(e)&&!J1(e)){const t=s("search_suggestions.suggestion_fallback",{query:e});a(kF.fetchSuggestionsRequest({query:e},{title:t}))}},q=()=>{var e;return null===(e=R.current)||void 0===e?void 0:e.blur()},V=()=>L((e=>!e)),H=e=>{const{item:t}=K1;if(!i){if(e.type===ji.Scoped){const i=(0,ys.Kf)((e=>{const{filters:t}=e,i={search_text:t.query,brand_id:[],color_id:[],size_id:[],status:[],catalog:t.catalogIds,disposal:[],price_from:null,price_to:null};return(0,_i.Gj)(i)})(e));return"".concat(t,"?").concat(i)}return"".concat(t,"?search_text=").concat(encodeURIComponent(e.query))}},G=()=>{const e=i&&u.length;if(w===Si.Item&&e){const e=u.map((e=>e.title)).join(", ");return s("searchbar.placeholder.".concat(w,"_with_catalog_selected"),{catalog:e})}return s("searchbar.placeholder.".concat(w))},W=e=>{const t=e.currentTarget.value;(0,v.isEmpty)((0,v.trim)(t))||B(t),k(t)},Y=()=>k(""),K=()=>{F(!1),V(),r(Ri({target:qm.SearchBarType}))},Q=e=>{var t;V(),null===(t=R.current)||void 0===t||t.focus(),w!==e&&P(e)},$=()=>{A.current||o&&(a($R({userId:o})),A.current=!0),J1(C)||T||B(C),L(!1),F(!0)},ee=()=>r(Ri({target:qm.SearchBar})),te=e=>{o&&a(cD({userId:o,searchId:e.id}))},ie=(e,t,n)=>{const s={suggestions:c.map((e=>e.query)),suggestion:e.query,query:C,scopedSuggestionCount:n,index:t,countryCode:x||f,searchSessionId:y,globalSearchSessionId:_,suggestionsSessionId:D.current,isFrontendGeneratedSuggestion:e.type===ji.Fallback};e.type===ji.Scoped&&(s.subtitle=e.subtitle),"params"in e&&(s.params=e.params),j?(s.suggestionPosition=t+1,s.suggestionsListId=b):(s.type=e.type,"typeId"in e&&(s.typeId=e.typeId)),r((e=>{const{suggestions:t,index:i,suggestion:n,subtitle:s,scopedSuggestionCount:r,query:a,countryCode:o,searchSessionId:l,type:c,typeId:d,globalSearchSessionId:u,suggestionsSessionId:m,params:p,isFrontendGeneratedSuggestion:g,suggestionsListId:h,suggestionPosition:x}=e,f={suggestion_index:i,suggestions_list:t,selected_suggestion_text:n,filter_suggestions_count:r,query:a,global_search_session_id:u,frontend_generated_text_selected:g};s&&(f.selected_suggestion_subtitle=s),o&&(f.country_code=o),l&&(f.search_session_id=l),null!=p&&p.length&&(f.params=p);const y=[ji.Catalog,ji.Brand,ji.Fallback];return c&&y.includes(c)&&(f.type=c),d&&(f.type_id=d),m&&(f.suggestions_session_id=m),h&&(f.suggestions_list_id=h),x&&(f.suggestion_position=x),{event:"user.select_search_suggestion",extra:f}})(s)),D.current&&RO({searchStartId:D.current,searchStartType:LO.SearchSuggestions}),i&&(e.type===ji.Scoped&&a(hF.setFilters({filters:Ys(e)})),a(hF.setQuery({query:e.query})),a(hF.submitSearchQuery({query:e.query}))),k(e.query),F(!1)},ne=e=>{const t=e.subscribed?NO.SubscribedSearch:NO.RecentSearch;r((e=>{const{type:t,searchTitle:i,searchSessionId:n,globalSearchSessionId:s,newItemsCount:r,unrestrictedNewItemsCount:a}=e,o={type:t,search_title:i,global_search_session_id:s};return n&&(o.search_session_id=n),r&&(o.new_items_count=r),a&&(o.unrestricted_new_items_count=a),{event:"user.select_saved_search",extra:o}})({searchSessionId:y,type:t,searchTitle:e.title,globalSearchSessionId:_,newItemsCount:e.new_items_count,unrestrictedNewItemsCount:e.unrestricted_new_items_count}))},se=e=>{if(w!==Si.Item||!T)return null;const t=J1(C)?(e=>o&&d.length?(0,z.jsx)(D1,{searches:d,highlightedIndex:e,onSubscribeClick:te,searchUrl:K1[Si.Item],searchSessionId:y,globalSearchSessionId:_,onSearchClick:ne}):null)(e):(e=>(0,z.jsx)(O1,{query:C,items:c,highlightedIndex:e,onSuggestionClick:ie,suggestionUrl:H,searchSessionId:y,globalSearchSessionId:_,setSuggestionsSessionId:M,suggestionsListId:b}))(e);return(0,v.isEmpty)(t)?null:(0,z.jsx)("div",{className:"u-ui-margin-top-regular u-position-absolute u-fill-width",children:(0,z.jsx)(g.Z,{styling:g.Z.Styling.Lifted,children:(0,z.jsx)("div",{className:"u-overflow-hidden",children:t})})})};let re=d.length,ae=e=>{const t=d[e],i={...R1(t),search_id:t.id},n="".concat(K1[Si.Item],"?").concat((0,ys.Kf)(i));ne(t),(0,ls.mZ)(n),q()};return J1(C)||(re=c.length,ae=e=>{const t=c[e],i=H(t),n=c.filter((e=>e.type===ji.Scoped));ie(t,e,n.length),i&&(0,ls.mZ)(i),q()}),(0,z.jsx)(zp,{onOutsideClick:()=>{l||!N&&!T||(L(!1),F(!1))},children:(0,z.jsxs)("form",{onSubmit:e=>{if(w===Si.Faq){const e=new Date;e.setTime(e.getTime()+jt.Nf*jt.L7),es(RQ,ZF().v4(),e)}w===Si.Item&&(i&&e.preventDefault(),S&&D.current&&RO({searchStartId:D.current,searchStartType:LO.SearchManual}),q(),F(!1),a(hF.setQuery({query:C})),a(hF.submitSearchQuery({query:C})))},method:"get",action:K1[w],children:["faq"!==w?null:(0,z.jsx)("input",{type:"hidden",name:"access_channel",value:"hc_search"}),(0,z.jsx)(Lp,{itemCount:re,onSelect:ae,onHighlightedResultChange:Z?e=>{null===e?O(null):J1(C)?O(d[e].search_text):O(c[e].query)}:void 0,children:e=>{let{highlightedResultIndex:t,handleKeyNavigation:i}=e;return(0,z.jsxs)("div",{className:"u-position-relative",children:[(0,z.jsx)(Tm.N,{inputAria:{"aria-labelledby":"search-".concat(w)},clearButtonAria:{"aria-label":s("searchbar.button.clear")},name:"search_text",placeholder:G(),value:Z&&E||C,deprecatedIcon:(0,z.jsx)("div",{className:"u-flexbox u-align-items-center",children:(0,z.jsx)(ht.Z,{name:"search-filled",size:ht.Z.Size.Small,color:ht.Z.Color.GreyscaleLevel4})}),prefix:(0,z.jsxs)("div",{className:"u-flexbox u-fill-height",children:[(0,z.jsx)(Y1,{selectedType:w,isOpen:N,onClick:K,onSelect:Q}),(0,z.jsx)(h.Z,{orientation:h.Z.Orientation.Vertical})]}),onChange:W,onFocus:$,onKeyDown:i,onValueClear:Y,onInputClick:ee,ref:R,testId:"search-text"}),se(t)]})}}),(0,z.jsx)(U1,{isOpen:l,onClose:()=>{a(bF.closeSubscribeModal())}})]})})};let $1,e9,t9;!function(e){e.Seller="seller",e.Buyer="buyer"}($1||($1={})),function(e){e.All="all",e.Sold="sold",e.Purchased="purchased"}(e9||(e9={})),function(e){e.All="all",e.InProgress="in_progress",e.Completed="completed",e.Canceled="canceled"}(t9||(t9={}));const i9=e=>{let{title:t,url:i,suffix:n,onClick:s,testId:r}=e;return(0,z.jsx)(gt.Z,{testId:r,type:gt.Z.Type.Navigating,body:(0,z.jsx)(xt.Z,{text:t}),url:i,onClick:s,suffix:n})},n9=e=>{let{userId:t}=e;const i=U(),{track:n}=vi(),s=(0,p.v9)(Wt("payments")),r=(0,p.v9)(Wt("my_orders_nav_and_filters")),a=(0,p.v9)(Wt("next_page_my_orders")),o=(0,p.v9)(Fl),l=(0,p.v9)(Nl),c=BJ();return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{styling:yt.Z.Styling.Wide,text:i("header.user_menu.account.title")}),(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[(0,z.jsx)(i9,{title:i("header.user_menu.account.items.profile.title"),url:(0,Me.G0B)(t)}),(0,z.jsx)(i9,{title:i("header.user_menu.account.items.settings.title"),url:Me.Svv,suffix:c?(0,z.jsx)(oC.Z,{theme:"primary",content:i("common.new_badge")}):null,testId:"settings-account-link"}),(0,z.jsx)(i9,{title:i("header.user_menu.account.items.personalization.title"),url:Me.pLL}),s&&(0,z.jsx)(i9,{title:i("header.user_menu.account.items.wallet.title"),url:Me.cz_}),a&&(0,z.jsx)(i9,{title:i("header.user_menu.account.items.my_orders.title"),url:(0,Me.JGG)({type:r?e9.Sold:e9.All}),suffix:(0,z.jsx)(oC.Z,{theme:"primary",content:i("common.new_badge")}),testId:"my-orders-account-link"}),o&&(0,z.jsx)(i9,{title:i("header.user_menu.account.items.donations.title"),url:Me.V55,onClick:()=>{n(dn({target:qm.EnterDonationsFromWebMenu}))}}),!s&&(0,z.jsx)(i9,{title:i("header.user_menu.account.items.invoices.title"),url:Me.A_o}),l&&(0,z.jsx)(i9,{title:i("header.user_menu.account.items.referrals.title"),url:Me.Aof}),(0,z.jsx)(i9,{title:i("header.user_menu.account.items.logout.title"),onClick:async()=>{await lK()&&(0,ls.ru)(Me.mYc)}})]})]})},s9=e=>{let{categories:t}=e;const i=U("header.side_bar"),{track:n}=vi(),s=e=>{let{id:t}=e;return()=>{const e=sn({catalogIds:[t],attributeId:Za.Navigation});n(e)}};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{styling:yt.Z.Styling.Wide,text:i("categories")}),(0,z.jsx)(L,{separator:(0,z.jsx)(h.Z,{}),children:t.map((e=>{var t;return(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,prefix:(0,z.jsx)(Kl.U,{src:null===(t=e.photo)||void 0===t?void 0:t.url,scaling:Kl.U.Scaling.Cover,size:Kl.U.Size.Regular}),body:(0,z.jsx)(xt.Z,{truncate:!0,children:e.title}),url:e.url,urlProps:{title:e.title},onClick:s(e),testId:"sidebar-category-item-".concat(e.id),aria:{"aria-label":e.title}},e.id)}))})]})},r9=e=>{let{user:t}=e;const i=U("header.side_bar"),n=(0,p.I0)(),{track:s}=vi();return(0,z.jsx)(nc.Z,{children:(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{}),children:[(0,z.jsx)(ic.I,{text:i("sell_now"),styling:ic.I.Styling.Filled,url:Me.UNR,onClick:()=>{const e=Ri({target:qm.UploadItem});s(e)},testId:"side-bar-sell-btn"}),!t&&(0,z.jsx)(ic.I,{text:i("sign_in"),onClick:()=>{n(NL.openAuthModal());const e=Ri({target:qm.Login});s(e)},testId:"side-bar-signin-btn"}),(0,z.jsx)(ic.I,{text:i("guide"),styling:ic.I.Styling.Flat,testId:"side-bar-guide-btn",url:(0,ys.Iq)(Me.$MB,{access_channel:Be.Si.VintedGuide})})]})})},a9=e=>{let{title:t,url:i,onClick:n}=e;return(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,body:(0,z.jsx)(xt.Z,{text:t,truncate:!0}),url:i,urlProps:{title:t},onClick:n})},o9=e=>{let{isBusinessAccountLinksVisible:t}=e;const i=U("header.main_navigation.about.discover"),n=(0,p.v9)(Wt("web_item_verification_page_link"));return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{styling:yt.Z.Styling.Wide,text:i("title")}),(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[(0,z.jsx)(a9,{url:Me.OkD,title:i("items.how_it_works")}),n&&(0,z.jsx)(a9,{url:Me.J55,title:i("items.item_verification")}),(0,z.jsx)(a9,{url:Me.QwI,title:i("items.app")}),(0,z.jsx)(a9,{url:Me.lw5,title:i("items.help")}),(0,z.jsx)(a9,{url:Me.Ga_,title:i("items.infoboard")}),t&&(0,z.jsx)(a9,{url:Me.Jo,title:i("items.pro")}),t&&(0,z.jsx)(a9,{url:Me._qi,title:i("items.pro_guide")})]})]})},l9=()=>{const e=U("header.main_navigation.about.company"),t=(0,p.v9)(Nc),{track:i}=vi(),n=(0,p.v9)(Wt("sustainability_page_press_center_link")),s=(0,p.v9)(Wt("press_menu")),r=(0,p.v9)(Wt("jobs_page")),a=(0,p.v9)(Wt("web_press_center_link")),o=(0,p.v9)(Wt("new_jobs_career_portal")),l=t.substring(0,2),c=a?m1(l):Me.v6v,d=o?Me.VHG:Me.Ch7;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{styling:yt.Z.Styling.Wide,text:e("title")}),(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[(0,z.jsx)(a9,{title:e("items.about"),url:Me.ouD}),r&&(0,z.jsx)(a9,{title:e("items.jobs"),url:d}),n&&(0,z.jsx)(a9,{title:e("items.sustainability"),url:p1(l),onClick:()=>{i(Ri({target:qm.SustainabilityPageLink,targetDetails:"navigation_web"}))}}),s&&(0,z.jsx)(a9,{title:e("items.press"),url:c}),(0,z.jsx)(a9,{title:e("items.advertising"),url:Me.E2e})]})]})},c9=e=>{let{impressumUrl:t,isBusinessAccountLinksVisible:i}=e;const n=U("header.main_navigation.about.policies");return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{styling:yt.Z.Styling.Wide,text:n("title")}),(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[(0,z.jsx)(a9,{title:n("items.safety"),url:Me.c1u}),t&&(0,z.jsx)(a9,{title:n("items.impressum"),url:t}),(0,z.jsx)(a9,{title:n("items.privacy_policy"),url:Me.hOY}),(0,z.jsx)(a9,{title:n("items.terms_and_conditions"),url:Me.qyY}),(0,z.jsx)(a9,{title:n("items.cookie_policy"),url:Me.ljN}),i&&(0,z.jsx)(a9,{title:n("items.pro_terms_of_sale"),url:Me.$ru}),i&&(0,z.jsx)(a9,{title:n("items.pro_terms_of_use"),url:Me.vK_})]})]})},d9=()=>{const e=U("header.main_navigation.about.privacy");return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{styling:yt.Z.Styling.Wide,text:e("title")}),(0,z.jsx)(a9,{url:"#",title:e("items.cookies"),onClick:e=>{e.preventDefault(),(0,ls.ap)()}})]})},u9=()=>{const e=U("header.main_navigation.about.communities"),t=(0,p.v9)(W);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{styling:yt.Z.Styling.Wide,text:e("title")}),(0,z.jsx)(a9,{title:e("items.forum"),url:Me.R1Q}),!(null==t||!t.favourite_topic_count)&&(0,z.jsx)(a9,{title:e("items.forum_favourite_topics"),url:Me.Nei}),!!t&&(0,z.jsx)(a9,{title:e("items.forum_own_topics"),url:Me.AnP})]})},m9=e=>{let{impressumUrl:t,isBusinessAccountLinksVisible:i}=e;const n=(0,p.v9)(Wt("disable_forum_web"));return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(o9,{isBusinessAccountLinksVisible:i}),(0,z.jsx)(l9,{}),(0,z.jsx)(c9,{impressumUrl:t,isBusinessAccountLinksVisible:i}),(0,z.jsx)(d9,{}),!n&&(0,z.jsx)(u9,{})]})},p9=e=>{let{catalogTree:t,impressumUrl:i,isBusinessAccountLinksVisible:n}=e;const s=(0,p.v9)(W),r=(0,m.useMemo)((()=>s?dt(s):null),[s]),a=(0,m.useMemo)((()=>qO(t)),[t]);return(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[(0,z.jsx)(r9,{user:r}),(0,z.jsx)(s9,{categories:a}),s&&(0,z.jsx)(n9,{userId:s.id}),(0,z.jsx)(e1,{}),(0,z.jsx)(m9,{impressumUrl:i,isBusinessAccountLinksVisible:n})]})},g9=()=>{const e=(0,p.v9)(Nc),t=(0,p.v9)(X),[i,n]=(0,m.useState)();if((0,m.useEffect)((()=>{(async()=>{if(!t)return;const e=await(0,Fe.pdA)(t);"errors"in e||n(OH(e.user_balance))})()}),[t]),!i)return null;const{availableAmount:s}=i;return(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:Ua(s,e)})};var h9=i(23656);const x9=e=>{let{userName:t,userPhoto:i,children:n}=e;const[s,r]=(0,m.useState)(!1),{floaterRef:a,triggerRef:o,floaterStyle:l}=(0,h9.u)({middleware:[(0,h9.o)(QJ.K.Medium),(0,h9.f)({mainAxis:!1}),(0,h9.s)()],placement:"bottom-end",shouldAutoUpdate:!0,isFloaterVisible:s});return(0,z.jsxs)(zp,{onOutsideClick:()=>r(!1),children:[(0,z.jsx)("div",{id:"user-menu-button",role:"button",tabIndex:0,ref:o,onClick:()=>r((e=>!e)),className:y()({open:s}),children:(0,z.jsx)("figure",{className:"photo-centered-parent header-avatar u-cursor-pointer",children:(0,z.jsx)(Kl.U,{src:i,alt:t,styling:Kl.U.Styling.Circle})})}),s&&(0,z.jsx)("div",{ref:a,style:l,children:(0,z.jsx)(g.Z,{styling:g.Z.Styling.Elevated,children:(0,z.jsx)(Lg,{children:(0,z.jsx)("div",{className:"user-menu-groups",children:n})})})})]})},f9=e=>{let{children:t}=e;return(0,z.jsx)("div",{className:"user-menu-group",children:t})};f9.Item=e=>{let{title:t,children:i}=e;return(0,z.jsxs)("ul",{className:"nav nav-stacked nav-dropdown nav-detailed user-menu-group__item",children:[(0,z.jsx)("li",{className:"label label--small nav__label",children:t}),m.Children.map((0,v.compact)(i),(e=>(0,z.jsx)("li",{className:"nav-item",children:e})))]},t)},f9.Action=e=>{let{href:t,onClick:i,children:n}=e;return(0,m.createElement)(t?"a":"button",{href:t,onClick:i,className:"nav-link"},n)};const y9=f9,v9=e=>{let{injectedMenus:t}=e;return t?(0,z.jsx)(z.Fragment,{children:t.filter((e=>e.length)).map(((e,t)=>(0,z.jsx)(y9,{children:e.map((e=>{let{title:t,items:i}=e;return(0,z.jsx)(y9.Item,{title:t,children:i.map((e=>{let{title:t,href:i}=e;return(0,z.jsx)(y9.Action,{href:i,children:t},i)}))},t)}))},t)))}):null},_9=e=>{let{injectedMenus:t}=e;const i=(0,p.v9)(W),n=U(),s=vi(),r=(0,p.v9)(Wt("payments")),a=(0,p.v9)(Wt("my_orders_nav_and_filters")),o=(0,p.v9)(Wt("next_page_my_orders")),l=(0,p.v9)(Fl),c=(0,p.v9)(Nl),d=BJ();if(!i)return null;const u=Je(i.photo);return(0,z.jsxs)(x9,{userName:i.login,userPhoto:u,children:[(0,z.jsx)(v9,{injectedMenus:t}),(0,z.jsx)(y9,{children:(0,z.jsxs)(y9.Item,{title:n("header.user_menu.account.title"),children:[(0,z.jsx)(y9.Action,{href:(0,Me.G0B)(i.id),children:n("header.user_menu.account.items.profile.title")}),(0,z.jsxs)(y9.Action,{href:Me.Svv,children:[n("header.user_menu.account.items.settings.title"),d&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)(oC.Z,{theme:"primary",content:n("common.new_badge")})]})]}),(0,z.jsx)(y9.Action,{href:Me.pLL,children:n("header.user_menu.account.items.personalization.title")}),r&&(0,z.jsx)(y9.Action,{href:Me.cz_,children:(0,z.jsxs)("span",{className:"u-flexbox u-justify-content-between u-align-items-center",children:[n("header.user_menu.account.items.wallet.title"),(0,z.jsx)("span",{className:"u-ui-padding-left-regular",children:(0,z.jsx)(g9,{})})]})}),o&&(0,z.jsxs)(y9.Action,{href:(0,Me.JGG)({type:a?e9.Sold:e9.All}),children:[n("header.user_menu.account.items.my_orders.title"),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)(oC.Z,{theme:"primary",content:n("common.new_badge")})]}),l&&(0,z.jsx)(y9.Action,{href:Me.V55,onClick:()=>s.track(dn({target:qm.EnterDonationsFromWebMenu})),children:n("header.user_menu.account.items.donations.title")}),!r&&(0,z.jsx)(y9.Action,{href:Me.A_o,children:n("header.user_menu.account.items.invoices.title")}),c&&(0,z.jsx)(y9.Action,{href:Me.Aof,children:n("header.user_menu.account.items.referrals.title")}),(0,z.jsx)(y9.Action,{onClick:async()=>{await lK()&&(0,ls.ru)(Me.mYc)},children:(0,z.jsx)("span",{className:"u-color-red",children:n("header.user_menu.account.items.logout.title")})})]})})]})};let b9,j9,S9;!function(e){e.GoodActor="good_actor",e.BadActor="bad_actor"}(b9||(b9={})),function(e){e.Email="email",e.Phone="phone",e.EmailCode="email_code",e.Google="google"}(j9||(j9={})),function(e){e.BalanceWithdrawal="balance_withdrawal",e.AccountDeletion="account_deletion",e.DataExport="data_export"}(S9||(S9={}));const Z9=e=>(e=>e[bO])(e).emailCodeView,I9={[jO.EnterCode]:$t.MandatoryEmailVerificationEnterCode,[jO.NotReceiveEmail]:$t.MandatoryEmailVerificationResendCode,[jO.Success]:$t.MandatoryEmailVerificationSuccess},C9={de:"DE-CLOSURE",de_babies:"DE-CLOSURE",uk:"UK-CLOSURE",us:"US-CLOSURE",cz:"CZ-CLOSURE",pl:"PL-CLOSURE"},k9=()=>{const e=U("help_center"),t=(0,m.useRef)(null);return(0,z.jsx)("form",{onSubmit:e=>{var i;e.preventDefault();const n=null===(i=t.current)||void 0===i?void 0:i.value;if(!n)return;const s=new Date;s.setTime(s.getTime()+jt.Nf*jt.L7),es(RQ,ZF().v4(),s),(0,ls.ru)((0,ys.Iq)(Me.ssV,{search_text:n,access_channel:Be.Si.HcSearch}))},className:"faq-search",children:(0,z.jsx)(fb.M,{name:"help-center-search",styling:fb.M.Styling.Wide,placeholder:e("search_field_placeholder"),inputMode:fb.M.InputMode.Search,ref:t,uncontrolled:!0,"data-testId":"help-center-search-text",suffix:(0,z.jsx)("button",{type:"submit",children:(0,z.jsx)(ht.Z,{name:"search",color:ht.Z.Color.GreyscaleLevel4,aria:{"aria-label":e("a11y.search_button")}})})})})};var w9=i(30792);const P9=e=>{let{condition:t,wrapper:i,children:n}=e;return t?i(n):n},z9=e=>{let{title:t,children:i}=e;return(0,z.jsxs)("li",{className:"main-footer__links-section-item",children:[(0,z.jsx)("div",{className:"main-footer__links-section-label",children:t}),(0,z.jsx)("ul",{className:"main-footer__links-section-group",children:i})]})},T9=e=>{let{text:t,url:i,onClick:n}=e;return(0,z.jsx)("li",{className:"main-footer__links-section-row",children:(0,z.jsx)("a",{className:"main-footer__links-section-link",href:i,onClick:n,children:t})})},F9=e=>{let{isBusinessInfoLinksEnabled:t}=e;const i=(0,p.v9)(Wt("jobs_page")),n=(0,p.v9)(Wt("disable_forum_web")),s=(0,p.v9)(Wt("sustainability_page_press_center_link")),r=(0,p.v9)(Wt("web_item_verification_page_link")),a=(0,p.v9)(Wt("press_menu")),o=(0,p.v9)(W),l=(0,p.v9)(ls.Kd),c=(0,p.v9)(Wt("web_press_center_link")),d=(0,p.v9)(Wt("new_jobs_career_portal")),u=l.substring(0,2),m=c?m1(u):Me.v6v,g=d?Me.VHG:Me.Ch7,h=U("footer"),{track:f}=vi();return(0,z.jsxs)("ul",{className:"main-footer__links-section",children:[(0,z.jsxs)(z9,{title:h("company.title"),children:[(0,z.jsx)(T9,{text:h("company.items.about"),url:Me.ouD}),i&&(0,z.jsx)(T9,{text:h("company.items.jobs"),url:g}),s&&(0,z.jsx)(T9,{text:h("company.items.sustainability"),url:p1(u),onClick:function(){f(Ri({target:qm.SustainabilityPageLink,targetDetails:"navigation_web"}))}}),a&&(0,z.jsx)(T9,{text:h("company.items.press"),url:m}),(0,z.jsx)(T9,{text:h("company.items.advertising"),url:Me.E2e})]}),(0,z.jsxs)(z9,{title:h("discover.title"),children:[(0,z.jsx)(T9,{text:h("discover.items.how_it_works"),url:Me.OkD}),r&&(0,z.jsx)(T9,{text:h("discover.items.item_verification"),url:Me.J55}),(0,z.jsx)(T9,{text:h("discover.items.app"),url:Me.QwI}),(0,z.jsx)(T9,{text:h("discover.items.help"),url:Me.lw5}),(0,z.jsx)(T9,{text:h("discover.items.infoboard"),url:Me.Ga_}),t&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(T9,{text:h("discover.items.pro"),url:Me.Jo}),(0,z.jsx)(T9,{text:h("discover.items.pro_guide"),url:Me._qi})]})]}),(0,z.jsxs)(z9,{title:h("help.title"),children:[(0,z.jsx)(T9,{text:h("help.items.centre"),url:Me.lw5}),(0,z.jsx)(T9,{text:h("help.items.selling"),url:Me.vXD}),(0,z.jsx)(T9,{text:h("help.items.buying"),url:Me.dML}),(0,z.jsx)(T9,{text:h("help.items.safety"),url:Me.c1u})]}),n?(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}):(0,z.jsxs)(z9,{title:h("community.title"),children:[(0,z.jsx)(T9,{text:h("community.items.forum"),url:Me.R1Q}),!(null==o||!o.favourite_topic_count)&&(0,z.jsx)(T9,{text:h("community.items.forum_favourite_topics"),url:Me.Nei}),!!o&&(0,z.jsx)(T9,{text:h("community.items.forum_own_topics"),url:Me.AnP})]})]})},N9=e=>{let{text:t,url:i,testId:n}=e;return(0,z.jsx)("li",{className:"main-footer__privacy-section-item",children:(0,z.jsx)("a",{className:"main-footer__privacy-section-link",href:i,"data-testid":n,children:t})})},L9=e=>{let{isDigitalLawEnabled:t,isBusinessInfoLinksEnabled:i,onlineComplaintUrl:n}=e;const s=U("footer.policy.items"),r=(0,p.v9)(Bl),a=(0,p.v9)(Ul),{host:o}=xc(),l=a===Kn.California?s("cookie_settings_us"):s("cookie_settings");return(0,z.jsxs)("ul",{className:"main-footer__privacy-section",children:[(0,z.jsx)(N9,{text:s("privacy_policy"),url:(0,ys.E_)(o)+Me.hOY}),(0,z.jsx)(N9,{text:s("cookie_policy"),url:Me.ljN}),r&&(0,z.jsx)("li",{className:"main-footer__privacy-section-item",children:(0,z.jsx)("button",{className:"main-footer__privacy-section-link",type:"button",onClick:()=>{(0,ls.ap)()},children:l})}),(0,z.jsx)(N9,{text:s("terms_and_conditions"),url:Me.qyY}),t&&(0,z.jsx)(N9,{text:s("our_platform"),url:Me.Nc0}),i&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(N9,{text:s("pro_terms_of_sale"),url:Me.$ru,testId:"privacy-footer-pro-sale-term-link"}),(0,z.jsx)(N9,{text:s("pro_terms_of_use"),url:Me.vK_,testId:"privacy-footer-pro-use-term-link"})]}),n&&(0,z.jsx)(N9,{text:s("online_complaints"),url:n})]})},E9="".concat(Be.Fv,"/assets/icons/social-media/facebook.svg"),O9="".concat(Be.Fv,"/assets/icons/social-media/linkedin.svg"),R9="".concat(Be.Fv,"/assets/icons/social-media/instagram.svg"),D9=()=>{const e=(e,t)=>(0,z.jsx)("li",{className:"main-footer__social-media-item",children:(0,z.jsx)("a",{className:"main-footer__social-media-link",href:e,target:"_blank",rel:"noopener noreferrer",children:(0,z.jsx)(Kl.U,{src:t})})});return(0,z.jsxs)("div",{className:"main-footer__social-section",children:[(0,z.jsxs)("ul",{className:"main-footer__social-section-media",children:[e(Me.tk0,E9),e(Me.q0m,O9),e(Me.fds,R9)]}),(0,z.jsxs)("ul",{className:"main-footer__social-section-app-store",children:[(0,z.jsx)("li",{className:"main-footer__social-app-store-item",children:(0,z.jsx)(TY,{platform:TY.Platform.Ios})}),(0,z.jsx)("li",{className:"main-footer__social-app-store-item",children:(0,z.jsx)(TY,{platform:TY.Platform.Android})})]})]})},A9=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200;const[n,s]=(0,m.useState)(0);return(0,m.useEffect)((()=>{const r=setTimeout((()=>{1===n&&e(),s(0)}),i);return 2===n&&t(),()=>clearTimeout(r)}),[n]),()=>s((e=>e+1))},M9=e=>{let{isActive:t,mapsReference:i,isMouseOverListElement:n,onClick:s,onDoubleClick:r}=e;const a=(0,m.useMemo)((()=>y()("vlockers__map-pin",{"vlockers__map-pin--active":t,"vlockers__map-pin--hovered":n})),[t,n]);return(0,z.jsxs)("div",{ref:e=>e&&(null==i?void 0:i.OverlayView.preventMapHitsFrom(e)),className:a,onClick:A9(s,r),children:[(0,z.jsx)("div",{className:"vlockers__map-pin__background",children:(0,z.jsx)(ht.Z,{name:"pickup-point-background",size:ht.Z.Size.Medium,color:(o=n,t?ht.Z.Color.Primary:o?ht.Z.Color.GreyscaleLevel2:ht.Z.Color.GreyscaleLevel3),aria:{"aria-hidden":"true"}})}),(0,z.jsx)("div",{className:"vlockers__map-pin__center",children:(0,z.jsx)(ht.Z,{name:"location-pin-slow",size:ht.Z.Size.Small,color:ht.Z.Color.GreyscaleLevel7,aria:{"aria-hidden":"true"}})})]});var o},U9=e=>{let{onZoomIn:t=v.noop,onZoomOut:i=v.noop}=e;const n=U("checkout.shipping.pickup_point_modal.map");return(0,z.jsx)("div",{className:"vlockers__map-controls",children:(0,z.jsxs)(g.Z,{styling:g.Z.Styling.Lifted,children:[(0,z.jsx)(ic.I,{size:ic.I.Size.Small,deprecatedIcon:(0,z.jsx)(ht.Z,{name:"plus",size:ht.Z.Size.Small,color:ht.Z.Color.GreyscaleLevel3,aria:{"aria-label":n("a11y.zoom_in")}}),onClick:t,styling:ic.I.Styling.Flat,testId:"map-controls-zoom-in"}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(ic.I,{size:ic.I.Size.Small,deprecatedIcon:(0,z.jsx)(ht.Z,{name:"minus",size:ht.Z.Size.Small,color:ht.Z.Color.GreyscaleLevel3,aria:{"aria-label":n("a11y.zoom_out")}}),onClick:i,styling:ic.I.Styling.Flat,testId:"map-controls-zoom-out"})]})})},B9=e=>{let{pointId:t,isDevelopmentEnv:i}=e;const n=U("vlockers.available_sizes"),[s,r]=(0,m.useState)(!1),[a,o]=(0,m.useState)(null);return(0,m.useEffect)((()=>{(async()=>{r(!0);const e=i?"vcarrier-sandbox.svc.vinted.com":"vcarrier.svc.vinted.com";try{const i=await fetch("https://".concat(e,"/public/v1/points/").concat(t)),n=await i.json();o(n.available_sizes||null),r(!1)}catch(e){r(!1)}})()}),[t,i]),s?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{}),(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center",children:(0,z.jsx)(Dp.Z,{})})]}):a?(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,theme:"transparent",prefix:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),(0,z.jsx)(ht.Z,{name:"ruler",color:ht.Z.Color.GreyscaleLevel4,size:ht.Z.Size.Small})]}),title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:n("title")}),body:(()=>{if(!a)return null;const e=Object.keys(a).map((e=>({size:e,quantity:a[e]})))||[];return e.map(((e,t)=>(0,z.jsxs)("div",{children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:"".concat(e.size," ").concat(n("sizes.".concat(e.size.toLowerCase())),": ")}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,theme:parseInt(e.quantity,10)<=0?"warning":"amplified",text:parseInt(e.quantity,10)<=0?0:e.quantity}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small})]},t)))})()}):null},q9=()=>{const e=U("vlockers.available_sizes");return(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,theme:"transparent",prefix:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),(0,z.jsx)(ht.Z,{name:"ruler",color:ht.Z.Color.GreyscaleLevel4,size:ht.Z.Size.Small})]}),title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:e("title")}),body:[{size:"XS",quantity:"5+"},{size:"S",quantity:"5+"},{size:"M",quantity:"5+"}].map(((t,i)=>(0,z.jsxs)("div",{children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:"".concat(t.size," ").concat(e("sizes.".concat(t.size.toLowerCase())),": ")}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,theme:"amplified",text:t.quantity}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small})]},i)))})};var V9;!function(e){e.Map="map",e.List="list"}(V9||(V9={}));const H9=e=>{let{isOpen:t,onSubmit:i,validationError:n,onClose:s,title:r,bodyText:a,confirmText:o}=e;const l=U("resolve_issue.modal");return(0,z.jsx)(cp.Z,{show:t,title:r,body:(0,z.jsxs)(z.Fragment,{children:[a,n]}),actions:[{text:o,style:cp.Z.ActionStyling.Filled,callback:i},{text:l("actions.cancel"),callback:s}]})},G9=e=>{let{complaintId:t,url:i}=e;const{track:n}=vi(),s=(0,p.v9)(Nf),[r,a]=(0,m.useState)(!1),[o,l]=(0,m.useState)([]),c=null==s?void 0:s.resolutions.find((e=>e.action===Pf.Refund));return c?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(ic.I,{text:c.button,size:ic.I.Size.Medium,onClick:function(){a(!0)}}),(0,z.jsx)(H9,{isOpen:r,title:c.confirmTitle,bodyText:c.confirmation,confirmText:c.confirmButton,onClose:function(){a(!1)},onSubmit:async function(){!function(){if(!s)return;const{transactionId:e}=s,i={transaction_id:e,complaint_id:t};n(Ri({screen:$t.ComplaintProof,target:qm.ConfirmSubmit,targetDetails:JSON.stringify(i)}))}();const e=await(0,Fe.v4K)(t.toString());"errors"in e?l(e.errors):(0,ls.ru)(i)},validationError:o})]}):null},W9=()=>{const e=U("item.status"),t=Xn({abTestName:"ivs_badge"});if("off"===(null==t?void 0:t.variant)||"a"===(null==t?void 0:t.variant))return null;const i=Bg()?"authenticity-diamond-multichrome-dark":"authenticity-diamond-multichrome";return(0,z.jsx)("div",{className:y()("offline-verification-status",{"offline-verification-status--dark":Bg()}),children:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Narrow,theme:"transparent",testId:"item-offline-verification-block-status",children:(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center",children:[(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(ht.Z,{name:i,size:ht.Z.Size.Small}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(xt.Z,{text:e("physical_authenticity"),type:xt.Z.Type.Caption,theme:"amplified"})]})})})},X9=e=>{let{bundleDiscount:t,itemId:i,itemUserId:n,canBuyItem:s,closetCountdownEndDate:r}=e;const a=U("bundles.item"),o=(0,p.v9)(X);if(!o||r)return null;if(n===o)return null;const l=(0,Me.RR)(n);return(0,z.jsx)(g.Z,{children:(0,z.jsx)(gt.Z,{title:a("shop_title"),body:(()=>{if(null==t||!t.enabled)return a("discounts.not_available");const{discounts:e}=t,i=e.map((e=>Number(e.fraction))),n=Math.max(...i);return a("discounts.available",{discount:(100*n).toFixed(0)})})(),suffix:(0,z.jsx)(tp,{url:l,itemId:s?i:null,screen:$t.Item,children:e=>{let{onClick:t}=e;return(0,z.jsx)(ic.I,{text:a("shop_action"),size:ic.I.Size.Medium,styling:ic.I.Styling.Filled,onClick:t,testId:"item-buy-bundle-banner-shop-button"})}})})})},Y9=e=>{var t;let{item:i,channel:n,showAsPrimaryButton:s}=e;const r=U("item"),{track:a}=vi(),o=(0,p.I0)(),l=XY(),{searchParams:c}=xc(),[d,u]=(0,m.useState)(Ne.Idle),g=(0,p.v9)(_e),h=(0,p.v9)(Hd),x=null===(t=c.referrer)||void 0===t?void 0:t.toString(),f=AO(),y=(0,m.useRef)(x===$t.Catalog?f.searchSessionId:null);return(0,m.useEffect)((()=>{h&&d===Ne.Pending&&(a(gn({itemId:i.id,transactionId:Number(h),button:"message",globalSearchSessionId:f.globalSearchSessionId,searchSessionId:y.current,homepageSessionId:Bm()})),(0,ls.ru)(Rc(h)))}),[h,i.id,f.globalSearchSessionId,a,d]),(0,z.jsx)(ic.I,{text:r("actions.ask_seller"),size:ic.I.Size.Medium,onClick:()=>{u(Ne.Pending),a(Ri({target:qm.AskSellerButton,targetDetails:JSON.stringify(i.id)})),h||o(Dm.createItemConversationThreadRequest({itemId:i.id.toString(),sellerId:i.user.id.toString(),initiator:Vc.AskSeller}))},styling:s?ic.I.Styling.Filled:ic.I.Styling.Outlined,testId:"ask-seller-button",url:(()=>{let e=(0,ys.Kf)({button_name:"message",ch:n,receiver_id:i.user.id,ref_url:l,source:"wantit"});const{globalSearchSessionId:t}=f;t&&(e+="&global_search_session_id=".concat(t));const s="".concat(Me.iGV,"?").concat(e);if(!g)return s})()})};var K9=i(36028),J9=i(34185);const Q9=e=>{let{imageSources:t,initialImageIndex:i,onClose:n=v.noop,itemId:s}=e;const{track:r}=vi(),[a,o]=(0,m.useState)(i),[l,c]=(0,m.useState)([]),d=(0,m.useRef)(!1),u=(0,m.useCallback)((()=>{o((e=>e>0?e-1:(d.current=!0,t.length-1)))}),[t.length]),p=(0,m.useCallback)((()=>{o((e=>(e+1===t.length&&(d.current=!0),(e+1)%t.length)))}),[t.length]),g=(0,m.useCallback)((e=>{let{imagePosition:t,imageCount:i}=e;s&&(r((e=>{const{imagePosition:t,imageCount:i,itemId:n,isLoop:s,contentType:r,galleryContainsAd:a}=e;return{event:"user.view_item_gallery",extra:{image_view:"fullscreen",image_position:t,number_item_images:i,item_id:n,is_loop:s,content_type:r,gallery_contains_ad:a}}})({itemId:s,imagePosition:t,isLoop:d.current,imageCount:i,contentType:"gallery_image",galleryContainsAd:!1})),d.current=!1)}),[s,r]),h=(0,m.useCallback)((e=>{switch(e.code){case Lm.ArrowLeft:case Lm.Backspace:u();break;case Lm.ArrowRight:case Lm.Enter:p();break;case Lm.Escape:n();break;case Lm.Tab:e.preventDefault()}}),[n,u,p]);function x(e){return(0,z.jsx)("div",{className:"image-carousel__icon-wrapper",children:(0,z.jsx)(ht.Z,{name:e,size:ht.Z.Size.Small,color:ht.Z.Color.GreyscaleLevel7})})}if((0,m.useEffect)((()=>{g({imagePosition:a+1,imageCount:t.length})}),[a,t,g]),(0,m.useEffect)((()=>(document.addEventListener("keydown",h),()=>{document.removeEventListener("keydown",h)})),[h]),(0,m.useEffect)((()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"})),[]),!t.length)return null;const f=t.length>1;return(0,z.jsx)("div",{className:"image-carousel","data-testid":"image-carousel",children:(0,z.jsx)(zp,{onOutsideClick:n,children:(0,z.jsxs)("div",{className:"image-carousel__image-wrapper",children:[f&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"image-carousel__button","data-testid":"image-carousel-button-left",onClick:u,children:x("chevron-left")}),(0,z.jsx)("div",{className:"image-carousel__button image-carousel__button--right","data-testid":"image-carousel-button-right",onClick:p,children:x("chevron-right")})]}),(0,z.jsx)("div",{className:"image-carousel__button image-carousel__button--close","data-testid":"image-carousel-button-close",onClick:n,children:x("x")}),t.map(((e,t)=>{const i=l.includes(t),n=t===a,s=n&&!i;return(0,z.jsxs)(m.Fragment,{children:[s&&(0,z.jsx)(Dp.Z,{}),(0,z.jsx)("img",{src:e,alt:"post","data-testid":"image-carousel-image".concat(n?"-shown":""),className:y()("image-carousel__image",n?"image-carousel__image--shown":null),onLoad:(r=t,()=>{c((e=>[...e,r]))})})]},t);var r}))]})})})},$9=e=>(0,uJ.createPortal)((0,z.jsx)(Q9,{...e}),document.body),e2=e=>{let{id:t,title:i,photos:n,offlineVerification:s}=e;const[r,a]=(0,m.useState)(null),o=E(),l=Xn({abTestName:"ivs_badge"}),c=n.length,d=n.slice(0,5),u=c-5,p="a"===(null==l?void 0:l.variant)&&s;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("section",{className:"item-photos__container",children:(0,z.jsxs)("div",{className:"item-photos",children:[p&&(0,z.jsx)("div",{className:"u-flexbox","data-testid":"item-verification-icon",children:(0,z.jsx)("div",{className:"u-flexbox item-verification-icon",children:o.phones?(0,z.jsx)(Wy.Z,{name:K9.Z}):(0,z.jsx)(Wy.Z,{name:J9.Z})})}),d.map(((e,t)=>(0,z.jsx)("figure",{className:"item-description u-flexbox item-photo item-photo--".concat(t+1),children:(0,z.jsx)("div",{className:"item-thumbnail","data-photoid":e.id,onClick:()=>(e=>{a(e)})(t),children:(0,z.jsx)(Kl.U,{src:e.url,scaling:Kl.U.Scaling.Cover,label:u&&4===t?"+ ".concat(u):void 0,alt:1===c?"".concat(i):"".concat(i," ").concat(t+1),color:e.dominant_color_opaque,testId:"item-photo-".concat(t+1),styling:o.desktops?Kl.U.Styling.Rounded:void 0})})},e.id)))]})}),null!==r&&(0,z.jsx)($9,{imageSources:n.map((e=>e.url)),initialImageIndex:r,onClose:()=>a(null),itemId:t})]})},t2=e=>{let{ownerId:t,alert:i,itemId:n,isUserAdmin:s}=e;const[r,a]=(0,m.useState)(!1),o=(0,p.v9)(X),l=U("item.alerts"),{fetch:c,transformedData:d}=ih(Fe.GIK,Yh);if(!s&&o!==t||!i.detailed_description)return null;const u=()=>{i.photo_tip_id&&(a(!0),d||c(i.photo_tip_id))};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(g.Z,{children:(0,z.jsx)(gt.Z,{suffix:(()=>{const e=(()=>{if(i.photo_tip_id)return{text:l("actions.learn_more"),onClick:u};switch(i.item_alert_type){case Fa.PackageSize:return{text:l("actions.package_size"),url:(0,Me.II0)(n,"packages-selector")};case Fa.MissingSubcategory:return{text:l("actions.missing_subcategory"),url:(0,Me.II0)(n,"categories")};default:return null}})();return e?(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center",children:[(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(ic.I,{...e,styling:ic.I.Styling.Filled,size:ic.I.Size.Medium,testId:"item-alert-cta-button"})]}):null})(),testId:"item-alert-box",children:(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center",children:[(0,z.jsx)(ht.Z,{name:"attention",color:ht.Z.Color.Warning,size:ht.Z.Size.Medium}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:i.detailed_description,type:xt.Z.Type.Subtitle,theme:"amplified"})]})})}),(0,z.jsx)(x.Z,{}),i.photo_tip_id&&d&&(0,z.jsx)(dQ,{isOpen:r,photoTips:[d],handleClose:()=>a(!1)})]})},i2=e=>{var t,i,n;let{item:s}=e;const r=U("item.details"),a=(null===(t=Xn({abTestName:"measurements_redesigned"}))||void 0===t?void 0:t.variant)===$k.On,o=(null===(i=Xn({abTestName:"item_page_improvements_web_1",shouldTrackExpose:!0}))||void 0===i?void 0:i.variant)===$k.On,{brand_dto:l,measurement_width:c,measurement_length:d,color1:u,color2:m,accepted_pay_in_methods:g,user:f,description_attributes:y}=s,{isFavourite:v,toggleFavourite:_}=XQ({type:XQ.Type.Brand,entityId:l.id,isFavourite:l.is_favourite}),b=(0,p.v9)(X),j=f.id===b,S=!a&&(c||d),Z=y.map($a),I=[{code:"video_game_rating",title:r("video_game_rating"),value:s.video_game_rating,faqEntryId:"1115"},{code:"size",title:r("size"),value:s.size,faqEntryId:null===(n=s.size_guide_faq_entry_id)||void 0===n?void 0:n.toString()},{code:"measurements",title:r("measurements.title"),value:S&&(()=>{const{measurement_unit:e}=s,t=(null==e?void 0:e.toUpperCase())||r("measurements.unit"),i=[];return c&&i.push(r("measurements.width_shorthand",{width:c,unit:t})),d&&i.push(r("measurements.length_shorthand",{length:d,unit:t})),i.join(" / ")})(),faqEntryId:"1108"},{code:"condition",title:r("condition"),value:s.status,faqEntryId:"50"},...Z,{code:"color",title:r("color"),value:(u||m)&&(u?m?"".concat(u,", ").concat(m):u:null)},{code:"material",title:r("material"),value:s.material},{code:"author",title:r("author"),value:s.author},{code:"book_title",title:r("book_title"),value:s.book_title},{code:"isbn",title:r("isbn"),value:s.isbn}],C=g.map((e=>e.translated_name)).join(", "),k=[{code:"location",title:r("location"),value:(()=>{const{expose_location:e,city:t,country_title_local:i}=f;return e&&t?"".concat(t,", ").concat(i):i})()},{code:"payment_methods",title:r("payment_methods"),value:g.length>0&&C},{code:"view_count",title:r("views"),value:s.view_count||"0"},{code:"favourite_count",title:r("favourites"),value:j&&s.favourite_count},{code:"interested_count",title:r("interested"),value:s.active_bid_count>0&&(()=>{const{active_bid_count:e}=s,t=1===e?"interested_member":"interested_member_with_count";return j?(0,z.jsx)("a",{href:(i=s.id,"/inbox/?item_id=".concat(i)),className:"inverse u-disable-underline-without-hover",itemProp:"url","data-testid":"item-attributes-interested-count-link",children:r(t,{count:s.active_bid_count})}):r(t,{count:s.active_bid_count});var i})()},{code:"uploaded_date",title:r("uploaded"),value:(0,z.jsx)(Tt,{date:new Date(s.created_at_ts),relativeDate:!0})}];return(0,z.jsxs)("div",{className:"details-list details-list--details",children:[!o&&(0,z.jsx)(h.Z,{testId:"item-details-divider"}),(0,z.jsx)(x.Z,{}),l.title&&(()=>{const e=v?"unfollow":"follow";return(0,z.jsxs)("div",{className:"details-list__item u-position-relative",children:[(0,z.jsx)("div",{className:"details-list__item-title",children:r("brand")}),(0,z.jsxs)("div",{className:"details-list__item-value u-flexbox u-justify-content-space-between ",itemProp:"brand",itemScope:!0,itemType:"http://schema.org/Brand",children:[(0,z.jsx)("a",{href:l.path,className:"inverse u-disable-underline-without-hover",itemProp:"url",children:(0,z.jsx)("span",{itemProp:"name",children:l.title})}),(0,z.jsxs)("menu",{className:"overflow-menu overflow-menu--top-right",children:[(0,z.jsx)("div",{role:"button",tabIndex:0,id:"brand-menu-button","data-toggle":"dropdown",className:"u-cursor-pointer","data-testid":"item-attributes-brand-menu-button",children:(0,z.jsx)(ht.Z,{name:"vertical-dots",size:ht.Z.Size.XSmall,color:ht.Z.Color.GreyscaleLevel3,aria:{"aria-label":r("a11y.brand_menu")},title:r("a11y.brand_menu")})}),(0,z.jsx)("div",{className:"overflow-menu__actions dropdown dropdown-brand-menu dropdown-right",children:(0,z.jsx)("ul",{className:"nav nav-stacked nav-dropdown",children:(0,z.jsx)("li",{className:"nav-item inverse is-single",children:(0,z.jsx)(ic.I,{text:r("actions.brand.".concat(e)),styling:ic.I.Styling.Flat,onClick:()=>_(),testId:"item-attributes-brand-toggle-follow-button"})})})})]})]})]})})(),I.map((e=>{let{code:t,title:i,value:n,faqEntryId:s}=e;return n?(0,z.jsxs)("div",{className:"details-list__item u-position-relative","data-testid":"item-attributes-".concat(t),children:[(0,z.jsx)("div",{className:"details-list__item-title",children:i}),(0,z.jsxs)("div",{className:"details-list__item-value",itemProp:t,children:[n,s&&(0,z.jsx)(HQ,{faqEntryId:Number(s),accessChannel:"product_link",label:r("a11y.".concat(t)),testId:"item-attributes-".concat(t,"-faq-link")})]})]},t):null})),k.map((e=>{let{code:t,title:i,value:n}=e;return n?(0,z.jsxs)("div",{className:"details-list__item","data-testid":"item-details-".concat(t),children:[(0,z.jsx)("div",{className:"details-list__item-title",children:i}),(0,z.jsx)("div",{className:"details-list__item-value",children:n})]},t):null}))]})},n2=e=>{let{itemId:t,itemUserId:i,canDelete:n,isClosed:s}=e;const r=(0,p.v9)(X),{track:a}=vi(),o=U("item"),[l,c]=(0,m.useState)(!1),[d,u]=(0,m.useState)(!1),g=()=>{c(!1)},x=async()=>{r&&(u(!0),c(!1),await(0,Fe.wzY)(t),(0,ls.ru)((0,Me.G0B)(r)))};if(!n||!r)return null;const f={"terms-link":e=>(0,z.jsx)("a",{href:Me.qyY,target:"_blank",rel:"noreferrer",children:e})};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(ic.I,{text:o("actions.delete"),size:ic.I.Size.Medium,onClick:()=>{a(Ri({target:qm.DeleteItem,screen:$t.Item,targetDetails:JSON.stringify({item_id:t,user_id:i})})),c(!0)},theme:"warning",isLoading:d,disabled:d,testId:"item-delete-button"}),s?void(l&&window.confirm(o("deletion_modal.confirm"))&&x()):(0,z.jsxs)(cp.Z,{show:l,defaultCallback:g,testId:"item-delete-modal",contentDimensions:{maxWidth:"360px"},children:[(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent,text:o("deletion_modal.title")})}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,bold:!0,text:o("deletion_modal.body",f),html:!0})}),(0,z.jsx)(h.Z,{}),(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsx)(ic.I,{onClick:g,styling:ic.I.Styling.Flat,theme:"muted",text:o("deletion_modal.actions.cancel"),testId:"item-delete-cancelation-button"}),(0,z.jsx)(h.Z,{orientation:h.Z.Orientation.Vertical}),(0,z.jsx)(ic.I,{onClick:x,styling:ic.I.Styling.Flat,theme:"warning",text:o("deletion_modal.actions.delete"),testId:"item-delete-confirmation-button"})]})]})]})},s2=e=>{let{itemId:t,itemUserId:i,canEdit:n}=e;const s=U("item"),{track:r}=vi();return n?(0,z.jsx)(ic.I,{text:s("actions.edit"),onClick:()=>{r(Ri({target:qm.EditItem,screen:$t.Item,targetDetails:JSON.stringify({item_id:t,user_id:i})})),(0,ls.ru)((0,Me.dZJ)(t))},size:ic.I.Size.Medium,testId:"item-edit-button"}):null},r2=e=>{let{item:t}=e;const i=U("item.actions"),n=(0,p.v9)(W),[s,r]=(0,m.useState)(!1);return!n||n.is_on_holiday?null:t.transaction_permitted&&t.can_edit?(0,z.jsx)(ic.I,{isLoading:s,disabled:s,text:i(t.is_hidden?"unhide":"hide"),onClick:async()=>{r(!0),await(0,Fe.E7i)(t.id,!t.is_hidden),(0,ls.sl)()},size:ic.I.Size.Medium,testId:"item-hide-button"}):null},a2=e=>{let{itemId:t,isItemReserved:i}=e;const n=U("item"),s=XY();if(i)return(0,z.jsx)(ic.I,{text:n("actions.mark_as_unreserved"),styling:ic.I.Styling.Outlined,testId:"mark-as-unreserved-button",size:ic.I.Size.Medium,onClick:async()=>{await(0,Fe.UtU)({itemId:t}),(0,ls.sl)()}});const r=(0,ys.Iq)((0,Me.Nu9)(t),{ref_url:s});return(0,z.jsx)(ic.I,{text:n("actions.mark_as_reserved"),styling:ic.I.Styling.Outlined,url:r,testId:"mark-as-reserved-button",size:ic.I.Size.Medium})},o2=e=>{let{itemId:t}=e;const i=U(),n=XY(),s=(0,ys.Iq)((0,Me.iik)(t),{ref_url:n});return(0,z.jsx)(ic.I,{text:i("item.actions.mark_as_sold"),url:s,size:ic.I.Size.Medium,testId:"mark-as-sold-button"})},l2=e=>{let{makeOfferActionPluginDto:t}=e;if(!t)return null;const{id:i,price:n,sellerId:s,currency:r}=t,a=i.toString(),o=s.toString();return(0,z.jsx)(W0,{itemId:a,itemPrice:n,currency:r,sellerId:o})},c2=e=>{let{editActionPluginDto:t}=e;if(!t)return null;const{id:i,user_id:n,can_edit:s}=t;return(0,z.jsx)(s2,{itemId:i,itemUserId:n,canEdit:s})},d2=e=>{let{deleteActionPluginDto:t}=e;if(!t)return null;const{id:i,can_delete:n,is_closed:s,user_id:r}=t;return(0,z.jsx)(n2,{itemId:i,itemUserId:r,canDelete:n,isClosed:s})},u2=e=>({id:e.id,user_id:e.user_id,can_edit:e.can_edit||!1}),m2=e=>({id:e.id,user_id:e.user.id,can_delete:e.can_delete,is_closed:e.is_closed}),p2=e=>({id:e.id,title:e.title,photos:e.photos,offlineVerification:e.offline_verification}),g2=e=>({itemId:e.id,canBuyItem:e.can_buy,canBundle:e.can_bundle,closetCountdownEndDate:e.user.closet_countdown_end_date||"",itemUserId:e.user.id,bundleDiscount:e.user.bundle_discount,isUserHated:e.user.is_hated,isUserHatesYou:e.user.hates_you}),h2=e=>({id:e.id,isSellerBusiness:e.user.business}),x2=e=>({id:e.id,price:e.price.amount,currency:e.currency,sellerId:e.user.id}),f2=e=>(0,m.useMemo)((()=>e?(e=>({editAction:u2(e),deleteAction:m2(e),gallery:p2(e),makeOfferAction:x2(e),buyerProtectionInfo:h2(e),closet:g2(e)}))(e):null),[e]),y2=e=>{var t,i,n;let{item:s}=e;const r=(0,p.v9)(X),{portalMergeItemViewBanner:a}=(0,p.v9)(Cl),o=(0,p.v9)(Wt("portal_merge_source")),{fetch:l,transformedData:c,isLoading:d}=ih(Fe.VTe,Kh),u=(null===(t=Xn({abTestName:"item_page_make_offer_action_plugin",shouldTrackExpose:!0}))||void 0===t?void 0:t.variant)===$k.On,g=(null===(i=Xn({abTestName:"item_page_edit_item_action_plugin_web",shouldTrackExpose:!0}))||void 0===i?void 0:i.variant)===$k.On,h=(null===(n=Xn({abTestName:"item_page_delete_item_action_plugin_web",shouldTrackExpose:!0}))||void 0===n?void 0:n.variant)===$k.On,f=f2(s),y=s.user.id===r;(0,m.useEffect)((()=>{s.id&&(a||l(s.id))}),[s.id,l,a]);const v=s.user.is_hated||s.user.hates_you,_=s.user.closet_countdown_end_date;return d?(0,z.jsx)(Mp,{testId:"item-actions-loader"}):y?(()=>{const e=s.transaction_permitted&&!s.is_closed,t=s.can_reserve&&s.transaction_permitted;return(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Horizontal}),children:[_&&(0,z.jsx)(H0,{userId:s.user.id,endDate:_,ownerLogin:s.user.login,isFollowed:s.user.is_favourite,isHatePresent:v}),!o&&(0,z.jsx)(q$,{item:s}),e&&(0,z.jsx)(o2,{itemId:s.id}),t&&(0,z.jsx)(a2,{itemId:s.id,isItemReserved:s.is_reserved}),(0,z.jsx)(r2,{item:s}),g?(0,z.jsx)(c2,{editActionPluginDto:null==f?void 0:f.editAction}):(0,z.jsx)(s2,{itemId:s.id,canEdit:s.can_edit||!1,itemUserId:s.user.id}),h?(0,z.jsx)(d2,{deleteActionPluginDto:null==f?void 0:f.deleteAction}):(0,z.jsx)(n2,{itemId:s.id,itemUserId:s.user.id,canDelete:s.can_delete,isClosed:s.is_closed})]})})():(()=>{var e;const t=s.id.toString(),i=s.user.id.toString(),n=(null===(e=s.reservation)||void 0===e?void 0:e.to_whom_id)===r,o=s.can_buy&&s.instant_buy&&(!s.is_reserved||n)&&!s.is_hidden&&!!c;if(a)return(0,z.jsx)(m$,{title:a.ctaTitle,url:a.ctaUrl,subtitle:a.bottomText,bottomLinkTitle:a.bottomTextLinkTitle,bottomLinkUrl:a.bottomTextLinkUrl});const l=!s.is_closed&&!y&&(n||!s.is_reserved);return(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Horizontal}),children:[_?(0,z.jsx)(H0,{userId:s.user.id,endDate:_,ownerLogin:s.user.login,isFollowed:s.user.is_favourite,isHatePresent:v,itemId:t,sellerId:i}):o&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(B0,{itemId:t,sellerId:i}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Horizontal}),u?(0,z.jsx)(l2,{makeOfferActionPluginDto:null==f?void 0:f.makeOfferAction}):(0,z.jsx)(W0,{itemId:t,itemPrice:s.price.amount,currency:s.currency,sellerId:i})]}),l&&(0,z.jsx)(Y9,{item:s,showAsPrimaryButton:!o,channel:"item"}),!y&&(0,z.jsx)(V$,{itemId:s.id,isFavourite:s.is_favourite,viewingSelf:y})]})})()};let v2;!function(e){e.BankAccount="bank_account",e.Checkout="checkout",e.Login="login",e.Phone="phone",e.EntityHash="EntityHash"}(v2||(v2={}));const _2=e=>{let{verificationType:t,controlCode:i,showResend:n,nextResendAvailableIn:s,maskedInfo:r,maskedNumber:a,twoFAId:o,onCodeSent:l,refUrl:c,redirectUrl:d}=e;const u=U("user.two_factor_verification"),{track:g}=vi(),f=(0,p.v9)(X),{register:y,handleSubmit:v,getValues:_,setError:b,formState:{errors:j}}=(0,th.cI)(),[S,Z]=(0,m.useState)(s),[I,C]=(0,m.useState)(n),[k,w]=(0,m.useState)(!1),[P,T]=(0,m.useState)(!0),F=(0,m.useRef)(),N=fh(j),L=t===v2.Phone?$t.PhoneVerificationCheck:$t.TwoFactorAuthentication;(0,m.useEffect)((()=>{g(Wi({screen:L}))}),[g,L]);const E=(0,m.useCallback)((()=>{F.current=setInterval((()=>{Z((e=>e-1))}),1e3)}),[]);(0,m.useEffect)((()=>{F.current&&S<=0&&clearInterval(F.current)}),[S]),(0,m.useEffect)((()=>(E(),()=>{F.current&&clearInterval(F.current)})),[E]);const O=async()=>{try{let e;const n=_("code");if(t===v2.Login){if(!i)return;e=await(0,Fe.gr2)({controlCode:i,code:n,fingerprint:await $M()})}else{if(!f)return;e=await(0,Fe.WRJ)({userId:f,id:o,code:n,fingerprint:await $M()})}if("errors"in e)throw Error(e.errors.toString()||"Error while resending");Z(e.next_resend_available_in),C(e.show_resend_option),E()}catch(e){C(!1),w(!0)}},R=e=>{b("code",{type:"manual",message:e})},D=e=>(0,z.jsx)(ah.Z,{styling:ah.Z.Styling.Narrow,alignment:ah.Z.Alignment.Center,text:e});return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{body:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:u("title"),type:xt.Z.Type.Heading,alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)("span",{className:"u-text-wrap",children:u("body",{phone_number:(0,z.jsx)(xt.Z,{text:r||a,bold:!0,theme:"amplified"})})})]})}),(0,z.jsxs)("form",{onSubmit:v((async e=>{let{code:n}=e;try{switch(t){case v2.Login:{if(!i)return;const e={grantType:KY.Password,controlCode:i,verificationCode:n,passwordType:"two_factor_challenge_code",isTrustedDevice:P,fingerprint:await $M()},t=await cK(e);if("errors"in t)return void R(t.message||"");(0,ls.ru)(c||Me.mYc);break}case v2.BankAccount:case v2.Checkout:case v2.EntityHash:{if(!f)return;const e=await(0,Fe.kPm)({userId:f,id:o,code:n,fingerprint:await $M()});if("errors"in e){const t=e.errors[0];return void R(t.value)}(()=>{switch(t){case v2.BankAccount:c&&d&&(0,ls.ru)("".concat(c,"?").concat((0,ys.Kf)({ref_url:d})));break;case v2.Checkout:case v2.EntityHash:null==l||l()}})();break}case v2.Phone:{if(!f||!a)return;const e=await(0,Fe.V0r)({userId:f,code:n,phoneNumber:a,fingerprint:await $M()});if("errors"in e){const t=e.errors[0];return void R(t.value)}c&&(0,ls.ru)(c);break}}}catch(e){var s;R((null===(s=e.response)||void 0===s?void 0:s.data.errors)&&e.response.data.errors.length&&e.response.data.errors[0])}})),children:[(0,z.jsx)(fb.M,{...y("code"),type:fb.M.Type.Number,validation:hh(N("code")),placeholder:u("placeholder")}),t!==v2.Login?null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{title:u("trusted_device.title"),body:u("trusted_device.body"),suffix:(0,z.jsx)(BZ.F,{testId:"is-trusted-device",name:"isTrustedDevice",checked:P,onChange:()=>{T((e=>!e))}})}),(0,z.jsx)(h.Z,{})]}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,text:u("continue"),type:ic.I.Type.Submit})})]}),(()=>{if(!I)return null;const e=S.toString().padStart(2,"0");return(0,z.jsx)(z.Fragment,{children:D(S>0?u("resend_counter",{seconds_left:e}):(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,size:ic.I.Size.Small,inline:!0,onClick:O,text:u("resend_link")}))})})(),D(u("note",{contact_us:(0,z.jsx)(_p,{type:bp.SmsVerfication,accessChannel:Be.Si.ProductLink,render:e=>(0,z.jsx)("a",{href:e,target:"_blank",rel:"noreferrer",children:u("contact_us")})})})),k?(0,z.jsx)(bJ,{body:u("resend_error")}):null]})},b2=e=>{let{entityId:t,onCodeSent:i,onError:n}=e;const s=(0,p.v9)(X),{fetch:r,transformedData:a,isLoading:o,error:l}=ih((async e=>(0,Fe.m3m)({userId:e.userId,entityId:e.entityId,entityType:v2.EntityHash,fingerprint:await $M()})),jS);return(0,m.useEffect)((()=>{s&&t&&r({userId:s,entityId:t})}),[r,s,t]),(0,m.useEffect)((()=>{l&&n()}),[l,n]),o||!a?(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center",children:(0,z.jsx)(Dp.Z,{size:Dp.Z.Size.XLarge,testId:"global-two-FA-loader"})}):(0,z.jsx)("div",{className:"narrow-container",children:(0,z.jsx)(_2,{verificationType:v2.EntityHash,maskedInfo:a.userMaskedInfo,nextResendAvailableIn:a.nextResendAvailableIn,showResend:a.showResendOption,twoFAId:a.id,onCodeSent:i})})},j2="flashMessage";let S2;!function(e){e.Success="success"}(S2||(S2={}));const Z2=function(){const[e,t]=(0,m.useState)(!1);return(0,m.useEffect)((()=>{t(!St.X)}),[]),e},I2={success:"check-circle-filled"},C2={success:ht.Z.Color.GreyscaleLevel7};var k2=i(36450);const w2=e=>{let{intersectionObserverEnabled:t=!1,waypointProps:i,children:n,onEnter:s}=e;const{ref:r,inView:a}=(0,k2.YD)();return(0,m.useEffect)((()=>{t&&a&&(null==s||s())}),[a,s,t]),t?(0,z.jsx)("div",{ref:r,className:"intersection-observer-wrapper",children:n}):(0,z.jsx)(Jp.h,{...i,children:n})};let P2;!function(e){e.Active="active",e.Reserved="reserved",e.Draft="draft",e.Sold="sold",e.Hidden="hidden"}(P2||(P2={}));const z2=e=>{let{ownerItemCount:t}=e;const i=U("item");return(0,z.jsx)(yt.Z,{text:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,children:t?i("owner_items_title",{count:t}):i("similar_items_title")})})},T2=e=>{let{ownerItemCount:t,ownerId:i}=e;const n=U("item");return t<24?null:(0,z.jsx)("div",{className:"u-ui-margin-vertical-x-large u-text-center",children:(0,z.jsx)("a",{href:(0,Me.G0B)(i),"data-testid":"view-all-user-items-link",children:n("view_all_owner_items",{count:t})})})},F2=e=>{let{closetPluginDto:t,referrerScreen:i}=e;const{fetch:n,data:s}=ih(Fe.RDp);if((0,m.useEffect)((()=>{t&&n({userId:t.itemUserId,currentPage:0,perPage:20,filter:P2.Active})}),[t,n]),!t)return null;const{itemId:r,canBuyItem:a,canBundle:o,closetCountdownEndDate:l,itemUserId:c,bundleDiscount:d,isUserHated:u,isUserHatesYou:p}=t,g=null==s?void 0:s.items.filter((e=>e.id!==r));if(!g)return(0,z.jsx)("div",{className:"u-ui-margin-top-medium",children:(0,z.jsx)(Mp,{testId:"item-feed-loader"})});if(!g.length)return null;const h=u&&p,f=g&&g.length>=2&&o&&!h;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(z2,{ownerItemCount:null==s?void 0:s.pagination.total_entries}),f&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(X9,{itemId:r,canBuyItem:a,closetCountdownEndDate:l,itemUserId:c,bundleDiscount:d}),(0,z.jsx)(x.Z,{})]}),(0,z.jsx)(F0,{items:g,contentSource:Es.OtherUserItems,itemTestId:"owner-item",refererScreen:i}),!(null==s||!s.pagination.total_entries)&&(0,z.jsx)(T2,{ownerItemCount:s.pagination.total_entries,ownerId:c.toString()})]})},N2=e=>{let{itemId:t,canBuyItem:i,canBundle:n,closetCountdownEndDate:s,itemUserId:r,bundleDiscount:a,referrerScreen:o,isUserHated:l,isUserHatesYou:c,closetData:d}=e;const u=(0,p.v9)(Vn("item_page_closet_plugin_web")),g=(0,p.v9)(we),{track:h}=vi(),{fetch:f,data:y}=ih(Fe.RDp),{fetch:v,data:_}=ih(Fe.vhg);(0,m.useEffect)((()=>{f({userId:r,currentPage:0,perPage:20,filter:P2.Active})}),[f,r]),(0,m.useEffect)((()=>{v({itemId:t})}),[v,t]);const b=null==y?void 0:y.items.filter((e=>e.id!==t)),j=null==_?void 0:_.items,S=l&&c,Z=b&&b.length>=2&&n&&!S,I=(null==u?void 0:u.variant)===$k.On;return b&&j?(0,z.jsxs)("div",{className:"u-ui-margin-top-medium",children:[I?(0,z.jsx)(w2,{intersectionObserverEnabled:!0,onEnter:()=>h(bn({...g,...u})),children:(0,z.jsx)("div",{"data-testid":"item-page-closet-plugin",children:(0,z.jsx)(F2,{closetPluginDto:d,referrerScreen:o})})}):null!=b&&b.length?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(z2,{ownerItemCount:null==y?void 0:y.pagination.total_entries}),Z&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(X9,{itemId:t,canBuyItem:i,closetCountdownEndDate:s,itemUserId:r,bundleDiscount:a}),(0,z.jsx)(x.Z,{})]}),(0,z.jsx)(F0,{items:b,contentSource:Es.OtherUserItems,itemTestId:"owner-item",refererScreen:o}),!(null==y||!y.pagination.total_entries)&&(0,z.jsx)(T2,{ownerItemCount:y.pagination.total_entries,ownerId:r.toString()})]}):null,!(null==j||!j.length)&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(z2,{}),(0,z.jsx)(F0,{items:j,contentSource:Es.SimilarItems,itemTestId:"similar-item",refererScreen:o})]})]}):(0,z.jsx)("div",{className:"u-ui-margin-top-medium",children:(0,z.jsx)(Mp,{testId:"item-feed-loader"})})},L2=e=>{let{itemId:t,viewingSelf:i}=e;const n=U(),{relativeUrl:s}=xc();if((0,p.v9)(W)&&i)return null;const r=(0,ys.Iq)(Me.iDM,{ref_id:t,ref_type:_P.Item,ref_url:s});return(0,z.jsx)(ic.I,{deprecatedIconName:"flag",deprecatedIconColor:uI.S.GreyscaleLevel4,aria:{"aria-hidden":!0},title:n("item.actions.report"),styling:ic.I.Styling.Flat,url:r,inline:!0,rel:"nofollow",testId:"item-report-button"})},E2=e=>{let{itemId:t,catalogId:i,brandId:n,viewingSelf:s}=e;const{fetch:r,data:a}=ih(Fe.KpK);if((0,m.useEffect)((()=>{r({catalogId:i,brandId:n})}),[r,i,n]),null==a||!a.breadcrumbs)return null;const{breadcrumbs:o}=a;return(0,z.jsx)(gt.Z,{body:(0,z.jsx)("nav",{className:"u-ellipsis u-ui-margin-top-medium",children:(0,z.jsx)(L,{separator:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Medium}),(0,z.jsx)(xt.Z,{text:"/",type:xt.Z.Type.Caption,bold:!0}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Medium})]}),children:o.map((e=>{let{title:t,url:i}=e;return(0,z.jsx)("a",{href:i===Me.mYc?i:(0,ys.Iq)(i,{referrer:"item-crumbs"}),children:(0,z.jsx)(xt.Z,{text:t,type:xt.Z.Type.Caption,underline:!0,bold:!0})},t)}))})}),suffix:(0,z.jsx)(L2,{itemId:t,viewingSelf:s}),theme:"transparent",styling:gt.Z.Styling.Tight})},O2=()=>{const e=U("item_performance.empty_state");return(0,z.jsx)(g.Z,{children:(0,z.jsx)("div",{className:"u-ui-padding-vertical-x-large","data-testid":"bump-statistic-empty-state",children:(0,z.jsx)(tc.Z,{title:e("title"),body:e("body"),deprecatedIcon:(0,z.jsx)(ht.Z,{color:ht.Z.Color.GreyscaleLevel2,name:"performance-chart"})})})})},R2=e=>{let{buyerProtectionInfoPluginDto:t}=e;if(!t)return null;const{id:i,isSellerBusiness:n}=t;return(0,z.jsx)(H$,{itemId:i,isSellerBusiness:n})},D2=e=>{var t,i,n,s,r,a;let{item:o,data:l}=e;const c=(0,p.v9)(W),d=U("item.details"),u=(null===(t=Xn({abTestName:"item_page_improvements_web_1"}))||void 0===t?void 0:t.variant)===$k.On,g=(null===(i=Xn({abTestName:"measurements_redesigned"}))||void 0===i?void 0:i.variant)===$k.On,h=(null===(n=Xn({abTestName:"item_page_buyer_protection_info_plugin",shouldTrackExpose:!0}))||void 0===n?void 0:n.variant)===$k.On,{fetch:f,transformedData:y}=ih(Fe.VTe,Kh);(0,m.useEffect)((()=>{f(o.id)}),[f,o.id]);const v=(null==c?void 0:c.id)===o.user.id,_=e=>{const t=e.find((e=>!!e));if(null!=t)return"string"==typeof t?t:"object"==typeof t?t.amount:void 0},b=()=>(0,z.jsxs)("div",{className:"details-list__item details-list--actions",children:[(0,z.jsx)(y2,{item:o}),(0,z.jsx)(x.Z,{})]}),j=g&&(o.measurement_width||o.measurement_length);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"details-list details-list--main-info",children:[(0,z.jsxs)("div",{className:"details-list details-list--pricing",children:[(0,z.jsx)("div",{className:"details-list__item details-list--price",itemProp:"offers",itemScope:!0,itemType:"http://schema.org/Offer","data-testid":"item-sidebar-price-container",children:(()=>{const e={itemId:o.id,itemPrice:_([o.offer_price,o.discount,o.price]),isItemOwner:v,totalItemPrice:_([o.total_item_price]),serviceFee:_([o.service_fee]),isSellerBusiness:o.user.business,shouldTrimTitle:v,currency:o.currency},t={badge:o.badge,price:_([o.price]),discountedPrice:o.discount,offerPrice:_([o.offer_price]),currency:o.currency,isItemOwner:v};return null!=y&&y.price?(0,z.jsxs)("div",{children:[(0,z.jsx)(U0,{...t}),(0,z.jsx)(Wg,{...e})]}):(0,z.jsx)(U0,{...t})})()}),(0,z.jsxs)("div",{className:"details-list__item details-list--badges","data-testid":"item-sidebar-pricing-details-container",children:[o.conversion&&(0,z.jsx)(Q$,{}),(0,z.jsx)(Dg,{spacerAt:"bottom"}),u&&b()]})]}),(0,z.jsx)(i2,{item:o})]}),(0,z.jsxs)("div",{className:"details-list details-list--info",children:[(0,z.jsx)(LQ,{itemId:o.id,translation:o.localization,content:{title:o.title,description:o.description},userLocale:o.user.locale}),j&&(0,z.jsx)(OQ,{width:null===(s=o.measurement_width)||void 0===s?void 0:s.toString(),length:null===(r=o.measurement_length)||void 0===r?void 0:r.toString(),units:(null===(a=o.measurement_unit)||void 0===a?void 0:a.toString())||d("measurements.unit")}),(0,z.jsx)(a$,{itemId:o.id}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),!u&&b(),y&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),v?(0,z.jsx)(J$,{isOfflineVerificationAvailable:o.offline_verification,verificationFee:o.offline_verification_fee,isViewingOwnItem:v}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(J$,{isOfflineVerificationAvailable:o.offline_verification,verificationFee:o.offline_verification_fee,isViewingOwnItem:v}),h?(0,z.jsx)(R2,{buyerProtectionInfoPluginDto:null==l?void 0:l.buyerProtectionInfo}):(0,z.jsx)(H$,{itemId:o.id,isSellerBusiness:o.user.business})]})]})]})]})},A2=e=>{var t,i,n;let{item:s}=e;const r=U(),a=(0,p.v9)(W),o=(null==a?void 0:a.id)===s.user.id,l=Ka(s,o),c=Ja(l);if(s.is_processing&&o)return(0,z.jsx)(A0,{});if((null===(t=s.item_alert)||void 0===t?void 0:t.item_alert_type)===Fa.DelayedPublication)return(0,z.jsx)(R0,{});if((null===(i=s.item_alert)||void 0===i?void 0:i.item_alert_type)===Fa.ReplicaProof)return null;if(!c)return null;const{theme:d,content:u}=c,m=()=>{var e;const t=String(u);return null!==(e=s.reservation)&&void 0!==e&&e.info?(0,z.jsxs)(z.Fragment,{children:[r(t),(0,z.jsx)("span",{className:"u-float-right",children:s.reservation.info})]}):r(t)},g=s.user.id===(null==a?void 0:a.id)||(null===(n=s.reservation)||void 0===n?void 0:n.to_whom_id)===(null==a?void 0:a.id),h=()=>{var e;if(null!=a&&a.id&&!s.is_closed&&s.is_reserved&&null!==(e=s.reservation)&&void 0!==e&&e.user_msg_thread_id&&g)return Rc(s.reservation.user_msg_thread_id)},x=(()=>{var e;const t=(null===(e=s.item_alert)||void 0===e?void 0:e.item_alert_type)===Fa.UnderReview,i=(null==a?void 0:a.moderator)||(null==a?void 0:a.is_catalog_moderator);return!(!t||!o&&!i)})()?"amplified":d;return"reserved"===l?(0,z.jsx)(gt.Z,{chevron:g,type:gt.Z.Type.Navigating,url:h(),theme:x,testId:"item-status",children:m()}):(0,z.jsx)(gt.Z,{url:h(),theme:x,testId:"item-status",children:m()})},M2=e=>{let{item:t}=e;const i=(0,p.v9)(Ht),n=(0,p.v9)(X),s=(0,p.v9)(Cl),r=(0,p.v9)(Wt("lg_transparency_law_scale_web")),a=(0,p.I0)(),{googleTagManagerTrack:o}=hK(),l=f2(t),c=n===t.user.id;(0,m.useEffect)((()=>{c||a(fV())}),[a,c]),(0,m.useEffect)((()=>{o(Ob.ItemView,{item_name:t.title,item_id:t.id,value:parseFloat(t.price.amount),currency:t.currency,user_email:t.user.email,item_category_id:t.catalog_id,item_brand:t.brand,item_brand_id:t.brand_id,item_condition:t.disposal_conditions})}),[o,t]);const d=!!Ka(t,c),u=y()("box box--item-details",{"u-margin-top-none u-border-radius-inherit":d||t.offline_verification});return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("section",{children:(0,z.jsx)(Kp,{screen:i})}),c&&t.stats_visible&&t.performance?Object.keys(t.performance).length?(0,z.jsx)(gQ,{performance:t.performance,itemPromoted:t.promoted}):(0,z.jsx)(O2,{}):null,d&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(A2,{item:t}),(0,z.jsx)(h.Z,{})]}),t.offline_verification?(0,z.jsx)(W9,{}):null,(0,z.jsx)("div",{className:u,"data-testid":"item-sidebar-details-section-container",children:(0,z.jsx)(D2,{item:t,data:l})}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(QQ,{user:t.user,showActions:!s.portalMergeItemViewBanner}),t.user.business?(0,z.jsx)(e$,{user:t.user}):r?(0,z.jsx)(a0,{subject:Be.dr.BuyerRights}):null,(0,z.jsx)(uc,{shape:di.Rectangle,isSidebarAd:!0}),(0,z.jsx)(uc,{shape:di.Skyscraper,isSidebarAd:!0})]})},U2=e=>{let{galleryPluginDto:t}=e;if(!t)return null;const{id:i,title:n,photos:s,offlineVerification:r}=t;return(0,z.jsx)(e2,{id:i,title:n,photos:s,offlineVerification:r})},B2=e=>{var t;let{ownerId:i,itemId:n,catalogId:s,brandId:r,alert:a,isUserAdmin:o,title:l,photos:c,offlineVerification:d,data:u}=e;const m=(0,p.v9)(X),g=(null===(t=Xn({abTestName:"item_page_gallery_plugin",shouldTrackExpose:!0}))||void 0===t?void 0:t.variant)===$k.On,h=i===m,x=()=>g?(0,z.jsx)(U2,{galleryPluginDto:u}):(0,z.jsx)(e2,{id:n,title:l,photos:c,offlineVerification:d});return(0,z.jsxs)(z.Fragment,{children:[!(null==a||!a.detailed_description)&&(0,z.jsx)(t2,{ownerId:i,itemId:n,alert:a,isUserAdmin:o}),(0,z.jsx)(x,{}),(0,z.jsx)(E2,{itemId:n,catalogId:s,brandId:r,viewingSelf:h})]})},q2=e=>{let{children:t,item:i,width:n,onVisible:s,innerRef:r}=e;const a=i||t,o=y()("feed-grid__item",{["feed-grid__item--".concat(String(n))]:n});return(0,z.jsx)(Jp.h,{onEnter:e=>s(e),debug:!1,scrollableAncestor:window,children:(0,z.jsx)("div",{"data-testid":"grid-item",className:o,ref:r,children:(0,z.jsx)("div",{className:"feed-grid__item-content",children:(0,z.jsx)("div",{className:"u-flex-grow u-fill-width",children:a})})})})},V2=e=>{let{items:t,renderItem:i,widthResolver:n=(()=>null),onItemVisible:s=v.noop,handleErrorLogging:r,preventLog:a}=e;const o=i;return(0,z.jsx)("div",{className:"feed-grid",children:t.map(((e,t)=>(0,z.jsx)(q2,{width:n(e),onVisible:i=>s({item:e,waypoint:i,index:t}),children:(0,z.jsx)(cc,{FallbackComponent:cc.ComponentError,preventLog:a,onError:r,children:(0,z.jsx)(o,{item:e,index:t})})},e.id)))})};function H2(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class G2 extends m.Component{constructor(){super(...arguments),H2(this,"isLimitReached",(()=>{const{selectedItems:e,selectionLimit:t}=this.props;return!!e.length&&e.length===t})),H2(this,"selectItem",((e,t)=>()=>{const{selectedItems:i,updateSelectedItems:n,onItemClick:s}=this.props,r=!!(0,v.find)(i,{id:e.id});!r&&this.isLimitReached()||(n(r?(0,v.filter)(i,(t=>t.id!==e.id)):[...i,e]),s&&s(e,t,!r))})),H2(this,"renderItemFooter",((e,t,i)=>{const{selectedItems:n}=this.props,s=!!(0,v.find)(n,{id:e.id}),r=s?"remove":"add",a=this.isLimitReached()&&!s||!!i;return(0,z.jsx)(ic.I,{text:(0,z.jsx)(vt.Z,{id:"items_multiselect.actions.".concat(r)}),theme:s?"warning":"primary",size:ic.I.Size.Small,onClick:this.selectItem(e,t),disabled:a,testId:"".concat(r,"-button")})})),H2(this,"renderItem",(e=>{const{item:{data:t},index:i}=e,{resolveItemCollectionTitle:n,viewingSelf:s,showFavourite:r,showItemFeeBreakdown:a}=this.props,o=null==n?void 0:n(t.id);return(0,z.jsx)(k0,{showOwner:!1,item:t,renderFooter:this.renderItemFooter(t,i,o),showStatus:!0,viewingSelf:s,showFavourite:r,showItemFeeBreakdown:a,onClick:o?void 0:this.selectItem(t,i),isUrlDisabled:!0,collectionTitle:o})})),H2(this,"renderItemsContainer",(()=>{const{items:e,itemWidthResolver:t,onItemVisible:i}=this.props,n=e.map((e=>({id:e.id,data:e})));return(0,z.jsx)(V2,{items:n,renderItem:this.renderItem,widthResolver:t,onItemVisible:i})}))}render(){const{items:e,loadItems:t,isLoading:i,endReached:n,emptyState:s}=this.props;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Qp,{renderItems:this.renderItemsContainer,onPageEnd:t,scrollAncestor:null,cursor:String(e.length)}),i&&(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center",children:(0,z.jsx)(Dp.Z,{size:Dp.Z.Size.Large,testId:"items-multiselect--loader"})}),!i&&n&&!e.length&&(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center u-flex-grow",children:s})]})}}H2(G2,"defaultProps",{viewingSelf:!1,showFavourite:!1});const W2=G2,X2=e=>{let{userId:t}=e;const{safeBack:i}=xc();return(0,z.jsx)(Pm.Z,{left:(0,z.jsx)(ic.I,{deprecatedIconName:"x",styling:ic.I.Styling.Flat,inline:!0,onClick:()=>i((0,Me.G0B)(t))})})},Y2=3,K2=e=>{let{items:t,visibleThumbnailsLimit:i=Y2}=e;return(0,z.jsxs)(z.Fragment,{children:[t.slice(0,i).map((e=>(0,z.jsxs)(m.Fragment,{children:[(0,z.jsx)(Kl.U,{src:Xa(e.photos),styling:Kl.U.Styling.Rounded,size:Kl.U.Size.Medium,scaling:Kl.U.Scaling.Cover},e.id),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical})]},e.id))),t.length>i&&(0,z.jsx)(Kl.U,{label:"+".concat(t.length-i),styling:Kl.U.Styling.Rounded,size:Kl.U.Size.Medium,scaling:Kl.U.Scaling.Cover,color:ng(Le.GreyscaleLevel4)})]})},J2=e=>{let{selectedItems:t,onCheckout:i=v.noop}=e;const n=U("bump_items");return(0,z.jsx)(Pm.Z,{left:(0,z.jsx)(K2,{items:t}),right:(0,z.jsx)(ic.I,{inline:!0,text:n("actions.bump"),disabled:!t.length,size:ic.I.Size.Medium,styling:ic.I.Styling.Filled,onClick:()=>{i()},testId:"push-ups-bump-button"})})};function Q2(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class $2 extends m.Component{constructor(){super(...arguments),Q2(this,"renderDisclaimer",(()=>(0,z.jsx)(xt.Z,{inline:!0,text:(0,z.jsx)(vt.Z,{id:"our_platform.disclaimer"}),type:xt.Z.Type.Caption}))),Q2(this,"renderDisclaimerLink",(()=>(0,z.jsx)(xt.Z,{text:(0,z.jsx)("a",{href:Me.Nc0,target:"_blank",rel:"noopener noreferrer",children:(0,z.jsx)(vt.Z,{id:"our_platform.disclaimer_link"})}),theme:"primary",type:xt.Z.Type.Caption})))}render(){return(0,z.jsxs)("div",{children:[(0,z.jsx)(x.Z,{}),this.renderDisclaimer()," ",this.renderDisclaimerLink()]})}}const e3=$2,t3="bundle_id",i3=e=>{let{discountHint:t,pathBack:i}=e;const{track:n}=vi(),{safeBack:s}=xc();return(0,z.jsx)(Pm.Z,{left:(0,z.jsx)(ic.I,{deprecatedIconName:"x",styling:ic.I.Styling.Flat,inline:!0,onClick:()=>{n(Ri({target:qm.CancelBundle})),s(i)}}),body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,format:!0,text:t,theme:"success",width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,testId:"bundle-header-title"})})};let n3;!function(e){e.Integrated="integrated",e.CustomOrNoShipping="custom_or_no_shipping",e.ShippingUnavailable="shipping_unavailable"}(n3||(n3={}));const s3=e=>{let{show:t,price:i,onClose:n,conversion:s,shippingPrice:r,buyerProtectionFee:a,isIntegratedShipping:o}=e;const{formatNumber:l}=(0,O.Z)(),c=(0,p.v9)(Nc),d=U("currency_conversion"),u="currency-conversion-modal";return(0,z.jsxs)(cp.Z,{show:t,testId:u,children:[(0,z.jsx)(Pm.Z,{testId:"".concat(u,"--navigation"),body:d("title"),right:(0,z.jsx)(ic.I,{inline:!0,deprecatedIconName:"x",styling:ic.I.Styling.Flat,onClick:n,testId:"".concat(u,"--close-x-icon")})}),(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[function(){const{sellerPrice:e,buyerCurrency:t}=s,n=Ua(e,c),r=Ma(i,{currency:t,locale:c});return(0,z.jsx)(gt.Z,{title:d("price"),body:(0,z.jsx)(xt.Z,{html:!0,text:d("price_description",{cost:n})}),suffix:r,testId:"".concat(u,"--item-price-conversion-info")})}(),function(){const{sellerShippingPrice:e,buyerCurrency:t}=s;if(null==e||null==r)return null;const i=Ua(e,c),n=Ma(r,{currency:t,locale:c});return 0===parseFloat(r)?(0,z.jsx)(gt.Z,{title:d("shipping"),body:(0,z.jsx)(xt.Z,{text:d(o?"shipping_description.covered_by_vinted":"shipping_description.covered_by_seller")}),suffix:n,testId:"".concat(u,"--shipping-price-coverage-info")}):(0,z.jsx)(gt.Z,{title:d("shipping"),body:(0,z.jsx)(xt.Z,{html:!0,text:d("shipping_description.converted",{cost:i}),testId:"".concat(u,"--shipping-price-conversion-info")}),suffix:n})}(),function(){const{buyerCurrency:e}=s,t=Ma(a,{currency:e,locale:c});return(0,z.jsx)(gt.Z,{title:d("buyer_protection_fee"),suffix:t,testId:"".concat(u,"--buyer-protection-fee-info")})}()]}),function(){const{sellerPrice:e,buyerCurrency:t,fxRoundedRate:i,fxBaseAmount:n}=s,r=Ma(n,{currency:e.currencyCode,locale:c}),a=Ma(i,{currency:t,locale:c});return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{text:"".concat(d("fx_rate.title")," ").concat(d("fx_rate.rate",{rate:a,base:r})),testId:"".concat(u,"--exchange-rate")})})]})}(),function(){const{fxMarkupRate:e}=s,t=l(parseFloat(e),{style:"percent",maximumFractionDigits:2});return(0,z.jsx)(gt.Z,{body:(0,z.jsx)(xt.Z,{html:!0,text:d("fx_markup_rate",{fee:t}),testId:"".concat(u,"--payment-service-provider-fee-info")})})}(),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(ic.I,{text:d("actions.ok"),styling:ic.I.Styling.Filled,onClick:n,testId:"".concat(u,"--close-button")})})]})},r3=e=>{let{show:t,onClose:i,onConfirm:n,bundleSummary:s,selectedItems:r}=e;const a=U("bundle_items.summary_modal");Xn({abTestName:"instant_bundles",shouldTrackExpose:t});const o=(0,p.v9)(Nc),[l,c]=(0,m.useState)(!1),[d,u]=(0,m.useState)(!1),{currency:g,price:f,buyerProtectionFee:y,priceWithBuyerProtectionFee:v,conversion:_}=s;if(null==r||!r.length)return null;const b=()=>u((e=>!e));return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(cp.Z,{show:t,testId:"bundle-summary-modal",children:[(0,z.jsx)(Pm.Z,{right:(0,z.jsx)(ic.I,{deprecatedIcon:(0,z.jsx)(ht.Z,{name:"x"}),onClick:i,testId:"bundle-summary-modal-navigation-close-button",styling:ic.I.Styling.Flat,inline:!0}),body:a("title")}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{title:a("items_count",{count:r.length},{count:r.length}),suffix:(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center",children:[(0,z.jsx)("div",{className:"u-phones-only",children:(0,z.jsx)(K2,{visibleThumbnailsLimit:2,items:r})}),(0,z.jsx)("div",{className:"u-tablets-up-only",children:(0,z.jsx)(K2,{visibleThumbnailsLimit:3,items:r})})]})}),(0,z.jsx)(h.Z,{}),(0,z.jsxs)(gt.Z,{children:[(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,body:(0,z.jsx)(xt.Z,{text:a("order"),theme:"muted"}),suffix:(0,z.jsx)(xt.Z,{text:Ma(f,{currency:g,locale:o}),theme:"muted"}),testId:"bundle-summary-modal-order-cell"}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,body:(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsx)(xt.Z,{text:a("service_fee"),theme:"muted"}),(0,z.jsx)(x.Z,{size:x.Z.Size.Small,orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(Hg,{itemId:r[0].id})]}),suffix:(0,z.jsx)(xt.Z,{text:Ua(y,o),theme:"muted"}),testId:"bundle-summary-modal-service-fee-cell"}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,body:(0,z.jsx)(xt.Z,{text:a("shipping"),theme:"muted"}),suffix:(0,z.jsx)(xt.Z,{text:a("chosen_by_seller"),theme:"muted"}),testId:"bundle-summary-modal-shipping-cell"})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),children:[_?(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,title:(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center",children:[(0,z.jsx)(xt.Z,{text:a("total_converted"),bold:!0,theme:"amplified"}),(0,z.jsx)(ic.I,{testId:"bundle-summary-modal-conversion-info-circle",deprecatedIcon:(0,z.jsx)(ht.Z,{color:ht.Z.Color.GreyscaleLevel3,name:"info-circle",size:ht.Z.Size.Small,aria:{"aria-label":a("a11y.currency_conversion_info")}}),styling:ic.I.Styling.Flat,inline:!0,size:ic.I.Size.Small,onClick:b})]}),suffix:(0,z.jsx)(xt.Z,{text:Ua(v,o),theme:"amplified",bold:!0}),testId:"bundle-summary-modal-total-with-currency-cell"}):(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,title:(0,z.jsx)(xt.Z,{text:a("total"),bold:!0,theme:"amplified"}),suffix:(0,z.jsx)(xt.Z,{text:Ua(v,o),theme:"amplified",bold:!0}),testId:"bundle-summary-modal-total-cell"}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,body:(0,z.jsx)(xt.Z,{text:a("shipping_note"),html:!0,type:xt.Z.Type.Caption})}),(0,z.jsx)(ic.I,{isLoading:l,disabled:l,text:a("actions.request"),styling:ic.I.Styling.Filled,onClick:()=>{c(!0),n({})},testId:"bundle-summary-modal-confirm-button"})]})]})]}),(()=>{if(!_)return null;const e=s.price,t=s.buyerProtectionFee,i=(e=>{let{sellerPrice:t,sellerCurrency:i,sellerShippingPrice:n,buyerCurrency:s,fxRoundedRate:r,fxBaseAmount:a,fxMarkupRate:o}=e;return{sellerPrice:{amount:t,currencyCode:i},sellerShippingPrice:n?{amount:n,currencyCode:i}:null,buyerCurrency:s,fxRoundedRate:r,fxBaseAmount:a,fxMarkupRate:o}})(_);return(0,z.jsx)(s3,{conversion:i,price:e,buyerProtectionFee:t.amount,show:d,isIntegratedShipping:!1,onClose:b})})()]})};var a3=i(29026);const o3=e=>{let{show:t,onClose:i,instantBundleSummary:n,selectedItems:s,onConfirm:r}=e;const a=U("bundle_items.summary_modal"),{track:o}=vi();Xn({abTestName:"instant_bundles",shouldTrackExpose:t});const l=(0,p.v9)(Nc),c=(0,p.v9)(Qm),[d,u]=(0,m.useState)(!1),[g,f]=(0,m.useState)(!1),[y,v]=(0,m.useState)(!1),[_,b]=(0,m.useState)(!1),[j,S]=(0,m.useState)(!1),[Z,I]=(0,m.useState)(!1),{totalPrice:C,buyerProtectionFee:k,priceWithBuyerProtectionFee:w,conversion:P,shippingPrice:T,bundleShippingType:F}=n;if(null==s||!s.length)return null;const N=()=>{v(!0),S(!0),o(Ri({screen:$t.BundleSummary,target:qm.AskSeller,targetDetails:JSON.stringify({bundle_id:c})})),r({bundleShippingType:F})},E=()=>I((e=>!e));return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(cp.Z,{show:t,testId:"instant-bundles-summary-modal",children:[(0,z.jsx)(Pm.Z,{right:(0,z.jsx)(ic.I,{icon:(0,z.jsx)(Wy.Z,{name:$y.Z}),onClick:i,testId:"instant-bundles-summary-modal-navigation-close-button",styling:ic.I.Styling.Flat,inline:!0}),body:a("title")}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{title:a("items_count",{count:s.length},{count:s.length}),suffix:(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center",children:[(0,z.jsx)("div",{className:"u-phones-only",children:(0,z.jsx)(K2,{visibleThumbnailsLimit:2,items:s})}),(0,z.jsx)("div",{className:"u-tablets-up-only",children:(0,z.jsx)(K2,{visibleThumbnailsLimit:3,items:s})})]})}),(0,z.jsx)(h.Z,{}),(0,z.jsxs)(gt.Z,{children:[(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,body:(0,z.jsx)(xt.Z,{text:a("order")}),suffix:(0,z.jsx)(xt.Z,{text:Ua(C,l)}),testId:"instant-bundles-summary-modal-order-cell"}),F===n3.CustomOrNoShipping?(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,body:(0,z.jsx)(xt.Z,{text:a("shipping")}),suffix:(0,z.jsx)(xt.Z,{text:a("chosen_by_seller")}),testId:"instant-bundles-summary-modal-shipping-cell"}):T?(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,body:(0,z.jsx)(xt.Z,{text:a("shipping")}),suffix:(0,z.jsx)(xt.Z,{text:Ua(T,l)}),testId:"instant-bundles-summary-modal-shipping-cell"}):(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,body:(0,z.jsx)(xt.Z,{text:a("shipping")}),suffix:(0,z.jsx)(xt.Z,{text:a("no_shipping_options")}),testId:"instant-bundles-summary-modal-shipping-cell"}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,body:(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsx)(xt.Z,{text:a("service_fee")}),(0,z.jsx)(x.Z,{size:x.Z.Size.Small,orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(Hg,{bundleId:c,itemId:s[0].id})]}),suffix:(0,z.jsx)(xt.Z,{text:Ua(k,l)}),testId:"instant-bundles-summary-modal-service-fee-cell"})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),children:[P?(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,title:(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center",children:[(0,z.jsx)(xt.Z,{text:a("total_converted"),bold:!0,theme:"amplified"}),(0,z.jsx)(ic.I,{testId:"instant-bundles-summary-modal-conversion-info-circle",icon:(0,z.jsx)(Wy.Z,{color:Wy.Z.Color.GreyscaleLevel3,name:a3.Z,aria:{"aria-label":a("a11y.currency_conversion_info")}}),styling:ic.I.Styling.Flat,inline:!0,size:ic.I.Size.Small,onClick:E})]}),suffix:(0,z.jsx)(xt.Z,{text:Ua(w,l),theme:"amplified",bold:!0}),testId:"instant-bundles-summary-modal-total-with-currency-cell"}):(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,title:(0,z.jsx)(xt.Z,{text:a("total"),bold:!0,theme:"amplified"}),suffix:(0,z.jsx)(xt.Z,{text:Ua(w,l),theme:"amplified",bold:!0}),testId:"instant-bundles-summary-modal-total-cell"}),(0,z.jsx)(h.Z,{}),n.bundleShippingType===n3.CustomOrNoShipping?(0,z.jsx)(ic.I,{isLoading:d,disabled:j,text:a("actions.request"),styling:ic.I.Styling.Filled,onClick:()=>{u(!0),S(!0),r({bundleShippingType:F})},testId:"instant-bundles-summary-modal-confirm-button"}):n.bundleShippingType===n3.ShippingUnavailable?(0,z.jsx)(ic.I,{isLoading:y,disabled:j,text:a("actions.ask_seller"),onClick:N,testId:"instant-bundles-summary-modal-ask-seller-button"}):n.bundleShippingType===n3.Integrated?(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),children:[(0,z.jsx)(ic.I,{isLoading:g,disabled:j,text:a("actions.buy"),styling:ic.I.Styling.Filled,onClick:()=>{f(!0),S(!0),r({bundleShippingType:F,redirectToCheckout:!0})},testId:"instant-bundles-summary-modal-buy-button"}),(0,z.jsxs)("div",{className:"u-flexbox u-gap-medium",children:[(0,z.jsx)(ic.I,{isLoading:y,disabled:j,text:a("actions.ask_seller"),onClick:N,testId:"instant-bundles-summary-modal-ask-seller-button"}),(0,z.jsx)(ic.I,{isLoading:_,disabled:j,text:a("actions.offer_request"),onClick:()=>{b(!0),S(!0),o(Ri({screen:$t.BundleSummary,target:qm.MakeBuyerSideOffer,targetDetails:JSON.stringify({bundle_id:c})})),r({bundleShippingType:F,redirectToCheckout:!1,openOfferRequestModal:!0})},testId:"instant-bundles-summary-modal-offer-request-button"})]})]}):null]})]})]}),(()=>{if(!P)return null;const e=n.totalPrice,t=n.buyerProtectionFee;return(0,z.jsx)(s3,{conversion:P,price:e.amount,buyerProtectionFee:t.amount,show:Z,isIntegratedShipping:!1,onClose:E})})()]})},l3=e=>{var t;let{bundleSummary:i,instantBundleSummary:n,bundleTrackingId:s,isSellerBusiness:r,selectedItemIds:a,selectedItems:o,transactionId:l,isInstantBundlesFeatureEnabled:c,homepageSessionId:d}=e;const{track:u}=vi(),g=U("bundle_items"),h=E(),f=(0,p.v9)(Nc),y=Xn({abTestName:"bpf_bundles_transparency",shouldTrackExpose:!0}),_=Xn({abTestName:"bundles_flow_confirmation_screen",shouldTrackExpose:!0}),b=(null===(t=Xn({abTestName:"instant_bundles"}))||void 0===t?void 0:t.variant)===$k.On,[j,S]=(0,m.useState)(!1),Z=()=>{const{phones:e}=h;return e?2:3},I=async e=>{let{bundleShippingType:t,redirectToCheckout:i=!1,openOfferRequestModal:n=!1}=e;u(Ri({screen:$t.Bundling,target:qm.CreateBundle,targetDetails:JSON.stringify((0,v.omitBy)({bundle_id:s,transaction_id:l},v.isNil))})),a.forEach((e=>u(gn({transactionId:l,itemId:e,button:"create_bundle",globalSearchSessionId:null,searchSessionId:null,homepageSessionId:d}))));const r=await Fe.vOV({selectedItemIds:a,bundleTrackingId:s,bundleShippingType:t});if("errors"in r)return;const{transaction:{id:o,user_msg_thread_id:c}}=r;if(i)return u(Pn({transactionId:l||o,screen:$t.BundleSummary,homepageSessionId:Bm()})),void(0,ls.mZ)((0,Me.sEI)(o));n?(0,ls.mZ)(Dc(c)):(0,ls.mZ)(Rc(c))},C=async e=>{let{bundleShippingType:t,redirectToCheckout:i=!1,openOfferRequestModal:n=!1}=e;if(!l)return;const r=await Fe.SkH({transactionId:l,selectedItemIds:a,bundleTrackingId:s,bundleShippingType:t});if("errors"in r)return;const{transaction:{id:o,user_msg_thread_id:c}}=r;if(i)return u(Pn({transactionId:l||o,screen:$t.BundleSummary,homepageSessionId:Bm()})),void(0,ls.mZ)((0,Me.sEI)(o));n?(0,ls.mZ)(Dc(c)):(0,ls.mZ)(Rc(c))},k=()=>S((e=>!e)),w=()=>{if(!i)return null;const{price:e,discountApplied:t,fullPrice:n,currency:s}=i;return(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column u-justify-content-center",children:[(0,z.jsx)(xt.Z,{text:Ma(n,{currency:s,locale:f}),type:xt.Z.Type.Subtitle,theme:t?"muted":"amplified",strikethrough:t,bold:!t,testId:"bundle-footer-full-price"}),t&&(0,z.jsx)(xt.Z,{text:Ma(e,{currency:s,locale:f}),type:xt.Z.Type.Subtitle,theme:"amplified",bold:t,testId:"bundle-footer-discounted-price"})]})},P=()=>{if(!i)return null;const{price:e,discountApplied:t,fullPrice:n,currency:s,buyerProtectionFee:o,priceWithBuyerProtectionFee:l}=i;return(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column u-flex-none",children:[(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-row",children:[t&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:Ma(e,{currency:s,locale:f}),type:xt.Z.Type.Subtitle,theme:"amplified",bold:t,testId:"bundle-footer-discounted-price"}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small})]}),(0,z.jsx)(xt.Z,{text:Ma(n,{currency:s,locale:f}),type:xt.Z.Type.Subtitle,theme:t?"muted":"amplified",strikethrough:t,bold:!t,testId:"bundle-footer-full-price"})]}),(0,z.jsx)(Wg,{itemId:a[0],currency:s,isSellerBusiness:r,shouldTrimTitle:!0,shouldMinimiseTitle:!0,itemPrice:e,serviceFee:o.amount,totalItemPrice:l.amount})]})};return(0,z.jsx)(Pm.Z,{left:(()=>{if(!i&&!n)return null;const e=vo(o),t=(null==_?void 0:_.variant)===$k.On||(null==y?void 0:y.variant)===$k.On;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"u-flexbox",children:[t?P():w(),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)("div",{className:"u-flexbox u-align-items-center",children:(0,z.jsx)(K2,{visibleThumbnailsLimit:Z(),items:e})})]}),!c&&i&&(0,z.jsx)(r3,{show:j,onClose:k,bundleSummary:i,selectedItems:e,onConfirm:l?C:I}),c&&n&&(0,z.jsx)(o3,{show:j,onClose:k,instantBundleSummary:n,selectedItems:e,onConfirm:l?C:I})]})})(),right:(0,z.jsx)(ic.I,{text:g((null==_?void 0:_.variant)===$k.On||b?"actions.review":l?"actions.edit":"actions.create"),disabled:!o.length,size:ic.I.Size.Medium,styling:ic.I.Styling.Filled,inline:!0,onClick:()=>(null==_?void 0:_.variant)===$k.On||b?k():l?C({}):I({}),testId:"bundle-footer-action-button"})})},c3=()=>{const e=U("shipping_fees_applied_info_banner"),{track:t}=vi(),i=(0,p.v9)(Vn("info_banner_shipping_fees_apply_feed")),n=(0,p.v9)(we);return(0,m.useEffect)((()=>{i&&t(bn({...n,...i}))}),[i,n,t]),(0,z.jsx)(g.Z,{testId:"shipping-fees-applied-banner",children:(0,z.jsx)(gt.Z,{title:(0,z.jsx)(xt.Z,{text:e("title"),type:xt.Z.Type.Subtitle}),theme:"transparent"})})},d3=e=>{let{item:t,onClick:i,onFavouriteToggle:n}=e;const s=(0,p.v9)(ZX),r=(0,p.v9)(W),a="a"===s.variant,o=y()("vas-gallery__item__round",{shadow:a});return(0,z.jsx)("div",{className:o,children:(0,z.jsx)(k0,{item:t,showOwner:!1,onClick:i,onFavouriteToggle:n,testId:"vas-gallery-".concat(t.id),hideBusinessBadge:!0,showPhotoCollage:!0,imagesExperimentalOverlayDisabled:!0,imageRatio:Kl.U.Ratio.Square,viewingSelf:(null==r?void 0:r.id)===t.user.id})})},u3=e=>{let{show:t,onConfirm:i}=e;const n=U("vas_gallery"),s=Ql(),{track:r}=vi(),a=s?"-dark":"";return(0,m.useEffect)((()=>{t&&r(Wi({screen:$t.VasGalleryHelp}))}),[t,r]),(0,z.jsx)(cp.Z,{show:t,testId:"vas-gallery-help-modal",children:(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(Kl.U,{src:"".concat(Be.Fv,"/assets/vas-gallery/value-proposition").concat(a,".png"),srcset:"".concat(Be.Fv,"/assets/vas-gallery/value-proposition").concat(a,".png 1x, ").concat(Be.Fv,"/assets/vas-gallery/value-proposition").concat(a,"@2x.png 2x"),scaling:Kl.U.Scaling.Cover,ratio:Kl.U.Ratio.Landscape}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(xt.Z,{text:n("omnibus_modal.title"),type:xt.Z.Type.Heading,width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(xt.Z,{text:n("omnibus_modal.subtitle"),type:xt.Z.Type.Title,alignment:xt.Z.Alignment.Left}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(xt.Z,{html:!0,text:n("omnibus_modal.body"),type:xt.Z.Type.Body}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(ic.I,{text:n("value_proposition_modal.actions.confirm"),styling:ic.I.Styling.Filled,onClick:i,testId:"vas-gallery-confirm-button"})]})})},m3=()=>{const{track:e}=vi(),t=(0,p.I0)(),i=U("vas_gallery.carousel"),n=(0,m.useRef)([]),s="b"===(0,p.v9)(ZX).variant,[r,a]=(0,m.useState)(!1),o=(0,p.v9)(SX);(0,m.useEffect)((()=>{t(vO.fetchVasGalleryRequest())}),[t]);const l=(t,i)=>()=>{if((0,v.includes)(n.current,t.id))return;const s=Bi({id:t.id,position:i+1,contentType:z0.Item,contentSource:Es.GalleriedItems,itemOwnerId:t.user.id});e(s),n.current=[...n.current,t.id]},c=(t,i)=>()=>{const n=qi({id:t.id,position:i+1,contentType:z0.Item,contentSource:Es.GalleriedItems});e(n)};function d(t){let{itemId:i,isFollowEvent:n}=t;e(Ai({itemId:i,isFollowEvent:n})),e(Ri({target:qm.Favourite}))}return o.length<4?null:(0,z.jsx)(P9,{condition:s,wrapper:e=>(0,z.jsx)("div",{className:"vas-gallery__carousel tear tear--top u-zindex-bump u-margin-top-x-large",children:(0,z.jsx)("div",{className:"vas-gallery__tear--bottom u-zindex-bump u-margin-bottom-x-large",children:e})}),children:(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Narrow,fullWidthTitle:!0,title:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Narrow,suffix:(0,z.jsx)(ic.I,{inline:!0,deprecatedIconColor:ht.Z.Color.GreyscaleLevel3,deprecatedIconName:"question-circle",iconPosition:ic.I.IconPosition.Right,onClick:function(){e(Ri({target:qm.VasGalleryHelp})),a(!0)},styling:ic.I.Styling.Flat,theme:"muted"}),body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:i("heading")}),...s&&{theme:"transparent"}}),...s&&{theme:"transparent"},children:[(0,z.jsx)(u3,{show:r,onConfirm:()=>{a(!1)}}),(0,z.jsx)(v$,{children:o.map(((e,t)=>(0,z.jsx)(Jp.h,{onEnter:l(e,t),horizontal:!0,children:(0,z.jsx)(v$.Item,{className:"vas-gallery__item",children:(0,z.jsx)(d3,{item:e,onClick:c(e,t),onFavouriteToggle:d})})},"vas-gallery-item-".concat(e.id))))})]})})},p3=()=>{const e=(0,p.v9)(X),t=(0,p.v9)(Tr),{track:i}=vi(),n=t[0],{isFavourite:s,toggleFavourite:r}=XQ({type:XQ.Type.Brand,entityId:(null==n?void 0:n.id)||0,isFavourite:Boolean(null==n?void 0:n.isFavourite)});if(!e)return null;if(1!==t.length)return null;const a=s?"unfollow":"follow";return(0,z.jsx)(xt.Z,{theme:"primary",type:xt.Z.Type.Caption,underline:!1,clickable:!0,children:(0,z.jsx)("span",{className:"brand-button",onClick:function(){n&&(i(Ui({brandId:n.id,isFollowEvent:!s})),r())},children:(0,z.jsx)(vt.Z,{id:"catalog.brand.actions.".concat(a)})})})},g3=e=>{let{children:t,testId:i,truncate:n=!1}=e;if(!t)return null;const s=y()("breadcrumbs",{"breadcrumbs--truncated":n});return(0,z.jsx)("ul",{"data-testid":i,className:s,children:t})};g3.Item=e=>{let{title:t,url:i,onClick:n=v.noop,testId:s}=e;return(0,z.jsx)("li",{className:"breadcrumbs__item",itemScope:!0,itemType:"http://data-vocabulary.org/Breadcrumb",children:(0,z.jsx)("a",{href:i,itemProp:"url",onClick:n,"data-testid":s,children:(0,z.jsx)("span",{itemProp:"title",children:t})})})};const h3=g3;function x3(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const f3=(0,p.$j)((e=>({catalogs:Br(e),brands:Tr(e)})));class y3 extends m.Component{constructor(){super(...arguments),x3(this,"trackCatalogBreadcrumbClick",(e=>()=>{this.props.track(sn({catalogIds:[e],attributeId:Za.Breadcrumb}))}))}renderCatalogBreadcrumbs(){const{catalogs:e}=this.props;return e.map((e=>(0,z.jsx)(h3.Item,{title:e.title,url:e.url,onClick:this.trackCatalogBreadcrumbClick(e.id)},"catalog-".concat(e.id))))}renderBrandBreadcrumbs(){const{brands:e}=this.props,t=e[0];return t?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h3.Item,{title:this.props.intl.formatMessage({id:"breadcrumbs.brands"}),url:Me.JFJ},"brands"),(0,z.jsx)(h3.Item,{title:t.title,url:t.path},"brand-".concat(t.id))]}):null}renderBreadcrumbs(){const{catalogs:e,brands:t}=this.props;return e.length||1!==t.length?this.renderCatalogBreadcrumbs():this.renderBrandBreadcrumbs()}render(){const{catalogs:e,brands:t,truncate:i,showRootBreadcrumb:n}=this.props;return e.length||t.length&&!(t.length>1)?(0,z.jsxs)(h3,{truncate:i,children:[n&&(0,z.jsx)(h3.Item,{title:this.props.intl.formatMessage({id:"breadcrumbs.home"}),url:Me.mYc},"home"),this.renderBreadcrumbs()]}):null}}x3(y3,"defaultProps",{truncate:!1,showRootBreadcrumb:!1});const v3=f3(zx((0,iw.ZP)(y3))),_3=e=>{let{truncate:t=!1}=e;const i=U(),n=(0,p.v9)(Fr),s=(0,p.v9)(Tr),r=(0,p.v9)(Zr),a=(0,p.v9)(pr),o=(0,p.v9)(Wt("web_catalog_title_from_response"));function l(){const e=[];return 1===n.length&&e.push(n[0].title),1===s.length&&e.push(s[0].title),e.length?e.join(" "):i("catalog.items")}return(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:o&&r?a||l():r?function(){const e=i("homepage.popular_items.catalog_title");return 1!==s.length?e:[e,s[0].title].join(" ")}():l(),truncate:t})},b3=(e,t,i,n)=>{const s=t===Ws.Default?e.map((e=>({id:e.id,title:e.title,value:e.id,data:e}))):[];return i&&null!=n&&n.length?[...s.filter((e=>n.includes(e.id))),...s.filter((e=>!n.includes(e.id)))]:s},j3=(e,t,i,n)=>{const s=t===Ws.Navigational?e.map((e=>{let{id:t,type:i,title:n,options:s}=e;return{code:"".concat(i,"_").concat(t),title:n,matchingGroups:s.map((e=>{let{id:t,title:i,options:n}=e;return{id:t,description:i,items:n.map((e=>({id:e.id,title:e.title,data:e})))}}))}})):[];return i&&null!=n&&n.length?t===Ws.Navigational?e.map((e=>{let{id:t,type:i,title:s,options:r}=e;return{code:"".concat(i,"_").concat(t),title:s,matchingGroups:or(r.map((e=>{let{id:t,title:i,options:n}=e;return{id:t,description:i,items:n.map((e=>({id:e.id,title:e.title,data:e})))}})),n)}})):[]:s},S3=(e,t,i,n)=>{const s=t===Ws.Group?e.map((e=>{let{id:t,title:i,options:n}=e;return{id:t,description:i,items:n.map((e=>({id:e.id,title:e.title,data:e})))}})):[];return i&&null!=n&&n.length?or(s,n):s};var Z3=i(89036),I3=i(77042),C3=i(78843);const k3=240,w3=e=>{let{children:t,closeOnClick:i,title:n="",placement:s="bottom-start",minWidth:r=k3,areAnyOfItemsSelected:a=!1,useChipAsTrigger:o=!1,useForceClose:l=!1,testId:c="filter-dropdown",renderTrigger:d,onOpen:u=v.noop,onClose:p=v.noop,onFilterClick:h=v.noop}=e;const[x,f]=(0,m.useState)(!1),y=(0,m.useRef)(!0),{floaterRef:_,triggerRef:b,floaterStyle:j}=(0,h9.u)({middleware:[(0,h9.o)(QJ.K.Medium),(0,h9.f)({mainAxis:!1}),(0,h9.s)()],isFloaterVisible:x,shouldUpdateOnAncestorScroll:!1,shouldAutoUpdate:!0,placement:s}),S=(0,m.useCallback)((()=>{x&&setTimeout((()=>{f(!1)}),0)}),[x]);(0,m.useEffect)((()=>{y.current?y.current=!1:(x?u:p)()}),[x,u,p]),(0,m.useEffect)((()=>{l&&S()}),[l,S]);const Z=()=>{f((e=>!e)),h&&h()};return(0,z.jsx)(zp,{onOutsideClick:S,children:(0,z.jsxs)("div",{className:"u-position-relative",children:[(()=>{const e={text:n,onClick:Z,ref:b,testId:"".concat(c,"--trigger")},t={...e,styling:ic.I.Styling.Flat,size:ic.I.Size.Medium,theme:"muted",icon:(0,z.jsx)(Wy.Z,{name:Z3.Z,color:Wy.Z.Color.GreyscaleLevel3}),iconPosition:ic.I.IconPosition.Right};return d&&(0,v.isFunction)(d)?d({toggle:Z,buttonProps:t,title:n,isOpen:x}):o?(0,z.jsx)(Jw.j,{...e,textType:xt.Z.Type.Subtitle,clicked:x,activated:a,suffix:(0,z.jsx)(Wy.Z,{name:x?I3.Z:C3.Z}),aria:{"aria-expanded":x}}):(0,z.jsx)(ic.I,{...t})})(),(()=>{if(!x)return null;const e=i?S:void 0;return(0,z.jsx)("div",{className:"u-fill-width u-zindex-large",style:{minWidth:r,...j},onClick:e,"data-testid":"dropdown-content",ref:_,children:(0,z.jsx)(g.Z,{styling:g.Z.Styling.Elevated,children:t})})})()]})})};function P3(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class z3 extends m.Component{constructor(){super(...arguments),P3(this,"onItemClick",(e=>t=>{const{disableButtonClicks:i,onItemClick:n}=this.props;t.target instanceof HTMLAnchorElement||i||t.preventDefault(),(0,v.isFunction)(n)&&n(e,t)}))}renderButton(e){const{name:t,selected:i,isMultiSelect:n,disableButtonClicks:s,itemButtonTestId:r}=this.props,{value:a}=e,o={name:n?"".concat(t,"[]"):t,value:a,checked:i.includes(a),aria:{"aria-labelledby":"".concat(t,"-list-item-").concat(e.id)},testId:r&&"".concat(r,"-").concat(e.id)};let l=(0,z.jsx)(qx.J,{...o,propagateEvent:s});return n&&(l=(0,z.jsx)(BZ.F,{...o})),s?(0,z.jsx)("div",{className:"u-no-pointer-events",children:l}):l}renderItem(e){const{name:t,selected:i,renderItem:n}=this.props,s=this.onItemClick.call(this,e),r=this.renderButton.call(this,e),a={id:"".concat(t,"-list-item-").concat(e.id),key:e.id,type:gt.Z.Type.Navigating,body:(0,z.jsx)(xt.Z,{text:e.title,type:xt.Z.Type.Title}),onClick:s,suffix:r};return(0,v.isFunction)(n)?n({itemElementProps:a,isSelected:i.includes(e.value),item:e,button:r}):(0,z.jsx)(gt.Z,{...a})}render(){const{items:e}=this.props;return(0,z.jsx)(kp,{children:e.map(this.renderItem.bind(this))})}}P3(z3,"defaultProps",{items:[],selected:[],isMultiSelect:!1,disableButtonClicks:!1});const T3=z3,F3=e=>{let{groups:t,selectedIds:i,name:n,isMultiSelect:s,onItemClick:r,renderItem:a}=e;const o=e=>{r(Number(e.id))};return(0,z.jsx)(z.Fragment,{children:t.map(((e,t)=>((e,t)=>{const r=0===t?yt.Z.Type.Leading:yt.Z.Type.Stacked,l=e.items.map((e=>{let{id:t,title:i,data:n}=e;return{id:t,title:i,value:t,data:n}}));return(0,z.jsxs)("div",{children:[(0,z.jsx)(yt.Z,{text:(0,z.jsx)(xt.Z,{text:e.description,type:xt.Z.Type.Subtitle}),type:r}),(0,z.jsx)(T3,{name:"".concat(n,"_").concat(String(e.id)),isMultiSelect:s,items:l,selected:i,renderItem:a,onItemClick:o,itemButtonTestId:"filter-group-list",disableButtonClicks:!0})]},e.id)})(e,t)))})},N3=e=>{let{catalogs:t,onItemClick:i,renderSuffix:n}=e;const s=e=>()=>{i(e)};return(0,z.jsx)(kp,{children:t.map((e=>{const t=(e=>n&&"matchingGroups"in e?n(e.matchingGroups):null)(e);return(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,body:(0,z.jsx)(xt.Z,{text:e.title,type:xt.Z.Type.Title}),suffix:t,chevron:!t,onClick:s(e)},e.code)}))})},L3=e=>{let{code:t}=e;return(0,z.jsx)("div",{className:"color-select__value color-select__value--".concat(t.toLowerCase())})},E3=e=>{let{type:t,title:i,selectionType:n,isSelectionHighlighted:s,rootOptionType:r,options:a,selectedIds:o,fromScreen:l,onListOptionSelect:c}=e;const{track:d}=vi(),u=U(),g=(0,p.v9)(Gr),f=(0,p.v9)(Hr),y=(0,m.useRef)([]),[v,_]=(0,m.useState)(null),[b,j]=(0,m.useState)(o),S=(0,m.useMemo)((()=>ZF().v4()),[]),Z=(0,p.v9)(we),I=(0,p.v9)(Vn("dynamic_size_filter")),C=(0,m.useMemo)((()=>ar(a)),[a]),k=(0,m.useMemo)((()=>b3(a,r,s,b)),[a,r,s,b]),w=(0,m.useMemo)((()=>j3(a,r,s,b)),[a,r,s,b]),P=e=>C.findIndex((t=>t.id===e))+1,T=(e,i,n)=>{c(e),d(On({id:e,type:t,code:t,position:i,isSelected:!o.includes(e),itemsCount:n,filteringSessionId:S,globalSearchSessionId:g,searchSessionId:f,fromScreen:l}))},F=e=>()=>{var i;const n=Number(e.id);if(y.current.includes(n))return;const s=P(n);d(En({id:n,type:t,code:t,position:s,itemsCount:null===(i=e.data)||void 0===i?void 0:i.itemsCount,filteringSessionId:S,globalSearchSessionId:g,searchSessionId:f,fromScreen:l})),y.current=[...y.current,n]},N=()=>{j(o),_(null)},L=e=>{var i,n,s,r,a,o,l,c;let{item:d,itemElementProps:u}=e;const m=Number(null===(i=d.data)||void 0===i?void 0:i.itemsCount),p=Number(null===(n=d.data)||void 0===n?void 0:n.itemsCountMax);return(0,z.jsx)(Jp.h,{onEnter:F(d),children:(0,z.jsx)("div",{children:(0,z.jsx)(gt.Z,{...u,title:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:d.title,type:xt.Z.Type.Title}),m>0&&p&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(xt.Z,{text:m>=p?"(".concat(p,"+)"):"(".concat(m,")"),type:xt.Z.Type.Subtitle})]})]}),body:null!==(s=d.data)&&void 0!==s&&s.description?null===(r=d.data)||void 0===r?void 0:r.description:null,prefix:null!==(a=d.data)&&void 0!==a&&null!==(o=a.prefix)&&void 0!==o&&o.code?(0,z.jsx)(L3,{code:null===(l=d.data)||void 0===l||null===(c=l.prefix)||void 0===c?void 0:c.code}):null,testId:"selectable-item-".concat(t,"-").concat(d.id)})})},d.id)};return(0,z.jsx)(w3,{title:i,areAnyOfItemsSelected:!!o.length,testId:"catalog--".concat(t,"-filter"),minWidth:300,onOpen:()=>{y.current=[],v||r!==Ws.Group||_(Ws.Root),v===Ws.Root&&r===Ws.Navigational&&_(null)},onClose:()=>{j(o)},onFilterClick:()=>{I&&"size"===t&&d(bn({...Z,...I}))},useChipAsTrigger:!0,children:(0,z.jsxs)("div",{className:"u-ui-padding-vertical-x-small",children:[(()=>{const e=w.find((e=>e.code===v));return e&&1!==w.length?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Pm.Z,{left:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,theme:"amplified",icon:(0,z.jsx)(Wy.Z,{name:Qy.Z}),onClick:N,testId:"".concat(t,"-dropdown-go-back"),aria:{"aria-label":u("catalog.filters.a11y.actions.back")}}),body:e.title}),(0,z.jsx)(h.Z,{})]}):null})(),(0,z.jsx)(Lg,{maxHeight:320,children:r===Ws.Group||r===Ws.Navigational?v?(0,z.jsx)(F3,{name:"".concat(t,"_ids"),isMultiSelect:n===Gs.Multi,renderItem:L,groups:(e=>{const t=w.find((t=>{let{code:i}=t;return i===e}));return t?t.matchingGroups:S3(a,r,s,b)})(v),selectedIds:o,onItemClick:e=>{const t=P(e);T(e,t)}}):(0,z.jsx)(N3,{catalogs:w,onItemClick:e=>{_(e.code)}}):(0,z.jsx)(T3,{name:"".concat(t,"_ids"),isMultiSelect:n===Gs.Multi,items:k,selected:o,renderItem:L,onItemClick:e=>{var t;const i=Number(e.id),n=P(i),s=null===(t=e.data)||void 0===t?void 0:t.itemsCount;T(i,n,s)},disableButtonClicks:!0})})]})})},O3=e=>{let{type:t,title:i,selectionType:n,isSelectionHighlighted:s,rootOptionType:r,options:a,selectedIds:o,fromScreen:l,translations:c,onListOptionSelect:d}=e;const{track:u}=vi(),g=(0,p.I0)(),f=(0,p.v9)(Gr),y=(0,p.v9)(Hr),v=(0,m.useRef)([]),[_,b]=(0,m.useState)(null),[j,S]=(0,m.useState)(o),Z=(0,m.useMemo)((()=>ZF().v4()),[]),I=(0,p.v9)(we),C=(0,p.v9)(Vn("dynamic_brand_filter")),k=(0,m.useMemo)((()=>ar(a)),[a]),w=(0,m.useMemo)((()=>b3(a,r,s,j)),[a,r,s,j]),P=e=>k.findIndex((t=>t.id===e))+1,T=e=>()=>{var i;const n=Number(e.id);if(v.current.includes(n))return;const s=P(n);u(En({id:n,type:t,code:t,position:s,itemsCount:null===(i=e.data)||void 0===i?void 0:i.itemsCount,searchText:_||"",filteringSessionId:Z,globalSearchSessionId:f,searchSessionId:y,fromScreen:l})),v.current=[...v.current,n]};(0,m.useEffect)((()=>{""===_&&(g(fR(t,"")),g(hF.setFilterSearchQuery({text:null,code:null})))}),[_,t,g]);return(0,z.jsx)(w3,{title:i,areAnyOfItemsSelected:!!o.length,testId:"catalog--".concat(t,"-filter"),minWidth:300,onOpen:()=>{v.current=[]},onClose:()=>{S(o),_&&b("")},onFilterClick:()=>{C&&"brand"===t&&u(bn({...I,...C}))},useChipAsTrigger:!0,children:(0,z.jsx)("div",{className:"u-ui-padding-vertical-x-small",children:(0,z.jsxs)("div",{className:"u-ui-padding-vertical-x-small",children:[(0,z.jsx)(fb.M,{value:_,name:"".concat(t,"_filter_search"),placeholder:null==c?void 0:c.placeholder,onChange:e=>{const i=e.currentTarget.value;b(i),i&&(g(hF.setFilterSearchQuery({text:i,code:t})),g(fR(t,i))),S(o)}}),(0,z.jsx)(Lg,{maxHeight:320,children:w.length?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(T3,{name:"".concat(t,"_ids"),isMultiSelect:n===Gs.Multi,items:w,selected:o,renderItem:e=>{var i,n,s,r;let{item:a,itemElementProps:o}=e;const l=Number(null===(i=a.data)||void 0===i?void 0:i.itemsCount),c=Number(null===(n=a.data)||void 0===n?void 0:n.itemsCountMax);return(0,z.jsx)(Jp.h,{onEnter:T(a),children:(0,z.jsx)("div",{children:(0,z.jsx)(gt.Z,{...o,title:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:a.title,type:xt.Z.Type.Title}),l>0&&c&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(xt.Z,{text:l>=c?"(".concat(c,"+)"):"(".concat(l,")"),type:xt.Z.Type.Subtitle})]})]}),body:null!==(s=a.data)&&void 0!==s&&s.description?null===(r=a.data)||void 0===r?void 0:r.description:null,testId:"selectable-item-".concat(t,"-").concat(a.id)})})},a.id)},onItemClick:e=>{var i;const n=Number(e.id),s=P(n),r=null===(i=e.data)||void 0===i?void 0:i.itemsCount;d(n),u(On({id:n,type:t,code:t,position:s,isSelected:!o.includes(n),itemsCount:r,searchText:_||"",filteringSessionId:Z,globalSearchSessionId:f,searchSessionId:y,fromScreen:l}))},disableButtonClicks:!0}),(0,z.jsx)(h.Z,{})]}):(0,z.jsx)(tc.Z,{title:null==c||null===(F=c.noResults)||void 0===F?void 0:F.title,body:null==c||null===(N=c.noResults)||void 0===N?void 0:N.body})})]})})});var F,N};var R3=i(89705);const D3=(e,t,i)=>{const[n,s]=(0,m.useState)({}),r=(0,m.useCallback)((e=>{const n=i[e],s=n?{...n,title:t,code:_a,depth:n.depth+1}:null;return(0,v.compact)([s,...Object.values(i).filter((t=>t.parentId===e)).sort(UT)]).map(BT)}),[t,i]);return(0,m.useEffect)((()=>{const t={};e.forEach((e=>{t[e]=r(e)})),s(t)}),[e,r]),{allShownCatalogs:n}},A3=()=>{const e=(0,p.I0)(),t=U("catalog.filters"),{track:i}=vi(),n=(0,p.v9)(Pr),s=(0,p.v9)(yr),[r,a]=(0,m.useState)(va),[o,l]=(0,m.useState)([va]),[c,d]=(0,m.useState)(!1),{allShownCatalogs:u}=D3(o,t("catalog.all"),n),g=e=>()=>{var t;a(Number(e.parentId)),t=e.id,l((e=>e.filter((e=>e!==t))))},x=t=>{if(!t.data)return;const{catalogIds:n,code:r}=t.data,o=Number(t.id);if(n.length>0&&r!==_a)return a(o),void(e=>{l((t=>[...t,e]))})(o);let c=[];c=s.includes(o)?s.filter((e=>e!==o)):[o],(e=>{i(sn({catalogIds:e,attributeId:Za.Filter}))})(c),e(hF.catalogFilterSet({ids:c})),d(!0)},f=()=>{const e=n[r];return e?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Pm.Z,{left:(0,z.jsx)(ic.I,{aria:{"aria-label":t("a11y.actions.back")},styling:ic.I.Styling.Flat,theme:"amplified",icon:(0,z.jsx)(Wy.Z,{name:Qy.Z}),onClick:g(e),testId:"catalog-filter-go-back"}),body:e.title}),(0,z.jsx)(h.Z,{})]}):null},y=e=>{let{item:t,itemElementProps:i}=e;if(!t.data)return null;const{catalogIds:n,code:s,depth:r,photo:a}=t.data,o=((e,t,i)=>i>1?null:t===_a?(0,z.jsx)(Wy.Z,{name:R3.Z,color:Wy.Z.Color.Primary}):e?(0,z.jsx)(Kl.U,{...za(e),size:Kl.U.Size.Regular}):null)(a,s,r);return n.length&&s!==_a?(0,z.jsx)(gt.Z,{...i,prefix:o,suffix:null,chevron:!0}):(0,z.jsx)(gt.Z,{...i,prefix:o})};return(0,z.jsx)(w3,{title:t("catalog.name"),minWidth:300,areAnyOfItemsSelected:!!s.length,testId:"catalog--catalog-filter",useChipAsTrigger:!0,useForceClose:c,onClose:()=>{c&&d(!1)},children:(()=>{const e=u[r];return(0,z.jsxs)("div",{className:"u-ui-padding-vertical-x-small",children:[f(),(0,z.jsx)(Lg,{maxHeight:320,children:(0,z.jsx)(T3,{name:"catalog_ids",isMultiSelect:!1,items:e,selected:s,onItemClick:x,renderItem:y,disableButtonClicks:!0})})]})})()})},M3=e=>{let{selectedCatalogs:t,allSizeGroups:i}=e;const n=(0,p.v9)(Yr),s=(0,m.useMemo)((()=>{const e=((e,t)=>{if((0,v.isEmpty)(t))return e;const i=t.flatMap((e=>null===e.sizeGroupId?e.sizeGroupIds:[...e.sizeGroupIds,e.sizeGroupId]));return e.filter((e=>!(0,v.isEmpty)((0,v.intersection)(i,e.size_groups))))})(n,t),s=e.map((e=>((e,t)=>{let{title:i,code:n}=e;return{title:i,code:n,matchingGroups:t}})(e,(e=>{let{selectedCatalogCode:t,sizeCategories:i,sizeGroups:n,selectedCatalogs:s}=e;if(!t)return[];const r=i.find((e=>e.code===t));if(!r)return[];const a=s.flatMap((e=>null===e.sizeGroupId?e.sizeGroupIds:[...e.sizeGroupIds,e.sizeGroupId])),o=(0,v.isEmpty)(s)?r.size_groups:(0,v.intersection)(r.size_groups,a);return(e=>e.map(MT))((0,v.compact)(o.map((e=>n.find((t=>t.id===e))))))})({selectedCatalogCode:e.code,sizeGroups:i,sizeCategories:n,selectedCatalogs:t}))));return s}),[n,t,i]);return{catalogs:s}},U3=e=>{let{filterCatalogs:t,title:i,onItemClick:n,name:s,getFilterGroups:r,selectedItemIds:a,testId:o}=e;const l=U(),{track:c}=vi(),[d,u]=(0,m.useState)(null),g=(0,p.v9)(we),x=(0,p.v9)(Vn("dynamic_size_filter")),f=()=>{u(null)};return(0,z.jsx)(w3,{minWidth:300,title:i,areAnyOfItemsSelected:!!a.length,onOpen:()=>{u((e=>(e=>1===t.length?t[0].code:e&&t.map((e=>e.code)).includes(e)?e:null)(e)))},onFilterClick:()=>{x&&"size_group_sizes"===s&&c(bn({...g,...x}))},testId:o,useChipAsTrigger:!0,children:(0,z.jsxs)("div",{className:"u-ui-padding-vertical-x-small",children:[(()=>{const e=t.find((e=>e.code===d));return e&&1!==t.length?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Pm.Z,{left:(0,z.jsx)(ic.I,{aria:{"aria-label":l("catalog.filters.a11y.actions.back")},styling:ic.I.Styling.Flat,theme:"amplified",icon:(0,z.jsx)(Wy.Z,{name:Qy.Z}),onClick:f,testId:"multi-catalog-filter-dropdown-go-back"}),body:e.title}),(0,z.jsx)(h.Z,{})]}):null})(),(0,z.jsx)(Lg,{maxHeight:320,children:d?(0,z.jsx)(F3,{isMultiSelect:!0,groups:r(d),name:s,selectedIds:a,onItemClick:n}):(0,z.jsx)(N3,{catalogs:t,onItemClick:e=>{u(e.code)}})})]})})},B3=()=>{const e=(0,p.I0)(),t=U("catalog.filters"),i=(0,p.v9)(kr),n=(0,p.v9)(Fr),s=(0,p.v9)(vr),{catalogs:r}=M3({selectedCatalogs:n,allSizeGroups:i});return(0,z.jsx)(U3,{name:"size_group_sizes",title:t("size.name"),filterCatalogs:r,getFilterGroups:e=>{const t=r.find((t=>{let{code:i}=t;return i===e}));return(null==t?void 0:t.matchingGroups)||[]},onItemClick:t=>{e(hF.toggleSizeFilterOption({id:t}))},selectedItemIds:s,testId:"catalog--size-filter"})};function q3(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const V3={onItemClick:hF.toggleBrandFilterOption,fetchBrands:mR},H3=(0,p.$j)((e=>({brands:zr(e),selectedIds:fr(e),globalSearchSessionId:Gr(e),exposee:we(e),dynamicBrandFilterAbTest:Vn("dynamic_brand_filter")(e)})),V3);class G3 extends m.Component{constructor(){super(...arguments),q3(this,"state",{query:""}),q3(this,"suggestionsSessionId",ZF().v4()),q3(this,"handleItemClick",(e=>{const{onItemClick:t,brands:i,selectedIds:n,globalSearchSessionId:s,track:r}=this.props,{query:a}=this.state,o=i.map((e=>{let{id:t}=e;return t})),l=i.findIndex((t=>e.id===t.id));r(In({query:a,suggestedBrands:o,globalSearchSessionId:s,suggestionsSessionId:this.suggestionsSessionId,position:l+1,brandId:e.id,selectedBrands:n})),t&&(0,v.isFunction)(t)&&t({id:Number(e.id)})})),q3(this,"handleBrandSearchInput",(e=>{const t=e.currentTarget.value;this.setState({query:t}),this.props.fetchBrands(t)})),q3(this,"handleDropdownClose",(()=>{this.setState({query:""}),this.props.fetchBrands(),this.suggestionsSessionId=ZF().v4()})),q3(this,"handleFilterClick",(()=>{const{dynamicBrandFilterAbTest:e,exposee:t,track:i}=this.props;e&&i(bn({...t,...e}))}))}componentWillUnmount(){this.props.fetchBrands()}renderDropdown(){const{brands:e,selectedIds:t}=this.props,{query:i}=this.state,n=e.map((e=>{let{id:t,title:i}=e;return{id:t,title:i,value:t,data:t}}));return(0,z.jsxs)("div",{className:"u-ui-padding-vertical-x-small",children:[(0,z.jsx)(gh,{value:i,type:"text",name:"brand_keyword",placeholder:this.props.intl.formatMessage({id:"catalog.filters.brand.search.placeholder"}),onChange:this.handleBrandSearchInput,aria:{"aria-label":this.props.intl.formatMessage({id:"catalog.filters.brand.name"})}}),(0,z.jsx)(Lg,{maxHeight:320,children:(0,z.jsx)(T3,{name:"brand_ids",isMultiSelect:!0,items:n,selected:t,onItemClick:this.handleItemClick,disableButtonClicks:!0})})]})}render(){const{selectedIds:e}=this.props;return(0,z.jsx)(w3,{title:(0,z.jsx)(vt.Z,{id:"catalog.filters.brand.name"}),areAnyOfItemsSelected:!!e.length,onClose:this.handleDropdownClose,onFilterClick:this.handleFilterClick,testId:"catalog--brand-filter",useChipAsTrigger:!0,children:this.renderDropdown()})}}q3(G3,"defaultProps",{brands:[],selectedIds:[]});const W3=H3((0,iw.ZP)(zx(G3))),X3=e=>{let{value:t,locale:i,currency:n,children:s,maxLength:r,onChange:a=v.noop,forceUpdateValue:o=!1}=e;const l=(0,m.useRef)(!1),c=(0,m.useCallback)((e=>e?i&&n?l.current?Ba(e,r?{maxLength:r}:void 0):Ma(e,{locale:i,currency:n}):e:null),[i,n,l,r]),[d,u]=(0,m.useState)(c(t));(0,m.useEffect)((()=>{o&&u(c(t))}),[c,t,o]);const p=()=>{u(c(d))};return s({value:d||"",handleValue:e=>{var t;const i=c(null===(t=e.target)||void 0===t?void 0:t.value);u(i),a(i)},handleFocus:()=>{l.current=!0,p()},handleBlur:()=>{l.current=!1,p()}})};var Y3;!function(e){e.PriceFrom="priceFrom",e.PriceTo="priceTo"}(Y3||(Y3={}));const K3=e=>{let{priceRange:t,priceFromTitle:i,priceToTitle:n,shouldFocusInput:s=!1,shouldUpdateInputValues:r=!1,onPriceRangeChange:a}=e;const o=(0,p.v9)(Nc),l=(0,p.v9)((e=>jr(e)||Ns(e))),c=(0,m.useRef)(null),d=(0,m.useRef)(null),u=(0,m.useRef)(t);(0,m.useEffect)((()=>{u.current=t}),[t]);const g=(0,m.useCallback)((e=>{const{current:t}=e===Y3.PriceFrom?c:d;t&&t.focus()}),[]);(0,m.useEffect)((()=>{s&&g(Y3.PriceFrom)}),[s,g]);const h=(e,t)=>{const i=u.current[e],n=Ba(t,{maxLength:6}),s="string"==typeof i?parseFloat(i):null,r="string"==typeof n?parseFloat(n):null;null===s&&null===r||s!==r&&(u.current[e]=n,a(u.current,l))},x=(e,t,i)=>()=>{t(),h(e,i)},f=(e,t)=>i=>{if(i.key!==Lm.Enter)return;const n=e===Y3.PriceFrom?Y3.PriceTo:Y3.PriceFrom;g(n),h(e,t)};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(X3,{value:t.priceFrom,maxLength:6,locale:o,currency:l,forceUpdateValue:r,children:e=>{let{handleValue:t,value:n,handleFocus:s,handleBlur:r}=e;return(0,z.jsx)(gh,{title:i,name:"price_from",type:"text",placeholder:l,value:n,onChange:t,onFocus:s,onBlur:x(Y3.PriceFrom,r,n),onKeyDown:f(Y3.PriceFrom,n),ref:c})}}),(0,z.jsx)(X3,{value:t.priceTo,maxLength:6,locale:o,currency:l,forceUpdateValue:r,children:e=>{let{handleValue:t,value:i,handleFocus:s,handleBlur:r}=e;return(0,z.jsx)(gh,{title:n,name:"price_to",type:"text",placeholder:l,value:i,onChange:t,onFocus:s,onBlur:x(Y3.PriceTo,r,i),onKeyDown:f(Y3.PriceTo,i),ref:d})}})]})};function J3(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Q3={setPriceRange:hF.priceRangeFilterSet},$3=(0,p.$j)((e=>({priceFrom:_r(e),priceTo:br(e)})),Q3);class e4 extends m.Component{constructor(){super(...arguments),J3(this,"state",{shouldUpdatePrice:!1,isPriceRangeUpToDate:!0}),J3(this,"range",{priceFrom:this.props.priceFrom,priceTo:this.props.priceTo}),J3(this,"handlePriceRangeChange",((e,t)=>{const{setPriceRange:i}=this.props;this.range=e,i({priceRange:e,currency:t})})),J3(this,"handleDropdownOpen",(()=>{const{priceFrom:e,priceTo:t}=this.props;this.range={priceFrom:e,priceTo:t},this.setState({shouldUpdatePrice:!0},(()=>{this.setState({isPriceRangeUpToDate:!0})}))})),J3(this,"handleDropdownClose",(()=>{this.setState({shouldUpdatePrice:!1,isPriceRangeUpToDate:!1})}))}renderDropdown(){const{shouldUpdatePrice:e,isPriceRangeUpToDate:t}=this.state;return(0,z.jsx)("div",{className:"u-ui-padding-vertical-x-small",children:(0,z.jsx)("div",{className:"u-flexbox",children:(0,z.jsx)(K3,{priceRange:this.range,priceFromTitle:(0,z.jsx)(vt.Z,{id:"catalog.filters.price.price_from"}),priceToTitle:(0,z.jsx)(vt.Z,{id:"catalog.filters.price.price_to"}),onPriceRangeChange:this.handlePriceRangeChange,shouldUpdateInputValues:e,shouldFocusInput:t})})})}render(){const{priceTo:e,priceFrom:t}=this.props;return(0,z.jsx)(w3,{title:(0,z.jsx)(vt.Z,{id:"catalog.filters.price.name"}),areAnyOfItemsSelected:!(!e&&!t),onOpen:this.handleDropdownOpen,onClose:this.handleDropdownClose,testId:"catalog--price-filter",useChipAsTrigger:!0,children:this.renderDropdown()})}}const t4=$3(e4);function i4(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const n4={onItemClick:hF.toggleSortFilterOption},s4=(0,p.$j)((e=>({selected:Sr(e),errors:gl(e)})),n4);class r4 extends m.Component{constructor(){super(...arguments),i4(this,"translate",((e,t)=>(0,z.jsx)(vt.Z,{id:"catalog.filters.sort.".concat(e),values:t}))),i4(this,"handleItemClick",(e=>{const{onItemClick:t}=this.props;t({sortBy:e.value})}))}renderDropdown(){const e=Object.values(uR).map((e=>({id:e,title:this.translate("options.".concat(e)),value:e}))),{selected:t}=this.props;return(0,z.jsxs)("div",{className:"u-ui-padding-vertical-x-small","data-testid":"sort-by-dropdown",children:[(0,z.jsx)(T3,{name:"sort_by",isMultiSelect:!1,items:e,selected:[t||uR.Relevance],onItemClick:this.handleItemClick,itemButtonTestId:"sort-by-list",disableButtonClicks:!0}),this.renderLearnMoreMessage()]})}renderLearnMoreMessage(){const{learnMoreUrl:e}=this.props;if(!e)return null;const t=(0,z.jsx)("a",{href:e,children:this.translate("learn_more.action")});return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:this.translate("learn_more.message",{action:t})})})]})}render(){const{errors:e,selected:t,useDropdownBottomEndPlacement:i}=this.props;return e?null:(0,z.jsx)(w3,{title:this.translate("name"),placement:i?"bottom-end":void 0,areAnyOfItemsSelected:!!t&&t!==uR.Relevance,testId:"catalog--sort-filter",closeOnClick:!0,useChipAsTrigger:!0,children:this.renderDropdown()})}}i4(r4,"defaultProps",{selected:uR.Relevance,useDropdownBottomEndPlacement:!1});const a4=s4(r4),o4={setSelectedDynamicFilter:hF.setSelectedDynamicFilter,setSelectedDynamicFilters:hF.setSelectedDynamicFilters,removeSelectedDynamicFilterId:hF.removeSelectedDynamicFilterId},l4=(0,p.$j)((e=>{var t,i;return{catalogIds:yr(e),isSizeFilterVisible:Lr(e),isBrandFilterVisible:Er(e),dynamicFilters:ea(e),selectedDynamicFilters:sa(e),isDynamicSizeFilterFsEnabled:Wt("dynamic_size_filter_web")(e),isDynamicBrandFilterFsEnabled:Wt("dynamic_brand_filter_web")(e),isDynamicSizeFilterAbTestEnabled:"on"===(null===(t=Vn("dynamic_size_filter")(e))||void 0===t?void 0:t.variant),isDynamicBrandFilterAbTestEnabled:"on"===(null===(i=Vn("dynamic_brand_filter")(e))||void 0===i?void 0:i.variant)}}),o4),c4=e=>{let{children:t}=e;return(0,z.jsx)("div",{className:"u-ui-margin-right-regular u-ui-margin-bottom-regular",children:t})};class d4 extends m.Component{handleDynamicFilterToggle(e,t,i,n){const{setSelectedDynamicFilter:s,removeSelectedDynamicFilterId:r}=this.props;n.includes(e)?i===Gs.Multi&&r({type:t,id:e}):s({selectedDynamicFilter:{type:t,ids:i===Gs.Single?[e]:[...n,e]}})}getRootOptionType(e){var t;return(null===(t=e.options.find((e=>!!e.type)))||void 0===t?void 0:t.type)||Ws.Default}getDynamicFilter(e){return this.props.dynamicFilters.find((t=>t.type===e))}getSelectedFilter(e){return this.props.selectedDynamicFilters.find((t=>t.type===e))}componentDidMount(){window.addEventListener("popstate",ls.sl)}componentWillUnmount(){window.removeEventListener("popstate",ls.sl)}render(){const{isBrandFilterVisible:e,isSizeFilterVisible:t,learnMoreUrl:i,isDynamicSizeFilterFsEnabled:n,isDynamicSizeFilterAbTestEnabled:s,isDynamicBrandFilterFsEnabled:r,isDynamicBrandFilterAbTestEnabled:a}=this.props,o=n&&s,l=r&&a,c=this.getDynamicFilter("status"),d=this.getSelectedFilter("status"),u=this.getDynamicFilter("material"),m=this.getSelectedFilter("material"),p=this.getDynamicFilter("video_game_rating"),g=this.getSelectedFilter("video_game_rating"),h=this.getDynamicFilter("color"),x=this.getSelectedFilter("color"),f=this.getDynamicFilter("size"),y=this.getSelectedFilter("size"),v=this.getDynamicFilter("brand"),_=this.getSelectedFilter("brand");return(0,z.jsxs)("div",{className:"u-flexbox u-flex-wrap",children:[(0,z.jsx)(c4,{children:(0,z.jsx)(A3,{})}),o?f&&(0,z.jsx)(c4,{children:(0,z.jsx)(E3,{type:f.type,title:f.title,selectionType:f.selectionType,isSelectionHighlighted:f.isSelectionHighlighted,rootOptionType:this.getRootOptionType(f),options:f.options,fromScreen:$t.Catalog,selectedIds:(null==y?void 0:y.ids)||[],onListOptionSelect:e=>this.handleDynamicFilterToggle(e,f.type,f.selectionType,(null==y?void 0:y.ids)||[])})}):t&&(0,z.jsx)(c4,{children:(0,z.jsx)(B3,{})}),u&&(0,z.jsx)(c4,{children:(0,z.jsx)(E3,{type:u.type,title:u.title,selectionType:u.selectionType,isSelectionHighlighted:u.isSelectionHighlighted,rootOptionType:this.getRootOptionType(u),options:u.options,fromScreen:$t.Catalog,selectedIds:(null==m?void 0:m.ids)||[],onListOptionSelect:e=>this.handleDynamicFilterToggle(e,u.type,u.selectionType,(null==m?void 0:m.ids)||[])})}),h&&(0,z.jsx)(c4,{children:(0,z.jsx)(E3,{type:h.type,title:h.title,selectionType:h.selectionType,isSelectionHighlighted:h.isSelectionHighlighted,rootOptionType:this.getRootOptionType(h),options:h.options,fromScreen:$t.Catalog,selectedIds:(null==x?void 0:x.ids)||[],onListOptionSelect:e=>this.handleDynamicFilterToggle(e,h.type,h.selectionType,(null==x?void 0:x.ids)||[])})}),l?v&&(0,z.jsx)(c4,{children:(0,z.jsx)(O3,{type:v.type,title:v.title,selectionType:v.selectionType,isSelectionHighlighted:v.isSelectionHighlighted,rootOptionType:this.getRootOptionType(v),options:v.options,fromScreen:$t.Catalog,translations:v.searchTranslations,selectedIds:(null==_?void 0:_.ids)||[],onListOptionSelect:e=>this.handleDynamicFilterToggle(e,v.type,v.selectionType,(null==_?void 0:_.ids)||[])})}):e&&(0,z.jsx)(c4,{children:(0,z.jsx)(W3,{})}),p&&(0,z.jsx)(c4,{children:(0,z.jsx)(E3,{type:p.type,title:p.title,selectionType:p.selectionType,isSelectionHighlighted:p.isSelectionHighlighted,rootOptionType:this.getRootOptionType(p),options:p.options,fromScreen:$t.Catalog,selectedIds:(null==g?void 0:g.ids)||[],onListOptionSelect:e=>this.handleDynamicFilterToggle(e,p.type,p.selectionType,(null==g?void 0:g.ids)||[])})}),(0,z.jsx)(c4,{children:(0,z.jsx)(t4,{})}),c&&(0,z.jsx)(c4,{children:(0,z.jsx)(E3,{type:c.type,title:c.title,selectionType:c.selectionType,isSelectionHighlighted:c.isSelectionHighlighted,rootOptionType:this.getRootOptionType(c),options:c.options,fromScreen:$t.Catalog,selectedIds:(null==d?void 0:d.ids)||[],onListOptionSelect:e=>this.handleDynamicFilterToggle(e,c.type,c.selectionType,(null==d?void 0:d.ids)||[])})}),(0,z.jsx)(c4,{children:(0,z.jsx)(a4,{learnMoreUrl:i})})]})}}const u4=l4(d4),m4=()=>{const{urlQuery:e}=xc();return(0,z.jsx)(ic.I,{size:ic.I.Size.Small,inline:!0,url:"".concat(Me.rJr).concat(e),children:"Open for moderation"})},p4=()=>{const{searchParams:e}=xc(),t=(0,ys.Kf)({...e,marketing_use_allowed:1,view:"grid"}),i="".concat(Me.rJr,"/?").concat(t);return(0,z.jsx)(ic.I,{size:ic.I.Size.Small,inline:!0,url:i,children:"Show marketing use allowed items"})};let g4;!function(e){e.ItemIllegal="ITEM-ILLEGAL-CATALOG-SYSTEM",e.ItemSexual="ITEM-SEXUAL-CATALOG-SYSTEM",e.ItemHygiene="ITEM-HYGIENE-CATALOG-SYSTEM",e.ItemRestricted="ITEM-RESTRICTED-CATALOG-SYSTEM",e.ItemHealthRisk="ITEM-HEALTH-RISK-CATALOG-SYSTEM",e.ItemScam="ITEM-SCAM-CATALOG-SYSTEM",e.ItemObviousCounterfeits="ITEM-OBVIOUS-COUNTERFEITS-CATALOG-SYSTEM",e.ItemCounterfeits="ITEM-COUNTERFEITS-CATALOG-SYSTEM"}(g4||(g4={}));const h4=Object.values(g4),x4=e=>{let{isSubmitAttempted:t,selectedValue:i,onSelect:n}=e;const s=e=>()=>{n(e)};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{text:"Select alert reason",type:yt.Z.Type.Stacked}),t?i?null:(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large,orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(zm.Z,{text:"Please select reason",theme:"warning"})]}):null,(0,z.jsx)("div",{className:"send-to-alerts__report-reasons-list",children:h4.map((e=>(0,z.jsx)(gt.Z,{title:e,suffix:(0,z.jsx)(qx.J,{name:"".concat(e,"-radio"),checked:e===i}),onClick:s(e),type:gt.Z.Type.Navigating,divider:!0},e)))})]})},f4=500,y4=e=>{let{title:t}=e;return(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:t,width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center})},v4=e=>{let{name:t}=e;return(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center",children:(0,z.jsx)(Kl.U,{src:"".concat(Be.Fv,"/assets/").concat(t).concat(Bg()?"-dark":"",".svg"),size:Kl.U.Size.Large})})},_4=e=>{let{text:t,onClose:i}=e;return(0,z.jsx)(ic.I,{text:t,onClick:i,styling:ic.I.Styling.Flat})},b4=e=>{let{children:t}=e;return Array.isArray(t)?(0,z.jsx)(gt.Z,{children:(0,z.jsx)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),children:t})}):(0,z.jsx)(gt.Z,{children:t})},j4=()=>{const[e,t]=(0,m.useState)(!1),[i,n]=(0,m.useState)(Ne.Idle),[s,r]=(0,m.useState)(Ne.Idle),[a,o]=(0,m.useState)(),[l,c]=(0,m.useState)(!1),d=(0,p.v9)(ml)||0,{searchParams:u}=xc(),g=d>f4,h=()=>{t(!1),r(Ne.Idle),o(void 0),c(!1)};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(ic.I,{text:"Send all to alerts",onClick:async()=>{g||await(async()=>{n(Ne.Pending);const e=await(0,Fe.t9M)();"errors"in e||e.is_busy?n(Ne.Failure):n(Ne.Success)})(),t(!0)},size:ic.I.Size.Small,styling:ic.I.Styling.Filled,isLoading:i===Ne.Pending,inline:!0}),(0,z.jsx)(cp.Z,{show:e,children:g?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(b4,{children:[(0,z.jsx)(y4,{title:"".concat(f4," alerts limit")}),(0,z.jsx)(xt.Z,{text:"You cant send more than ".concat(f4," alerts at once. Adjust your filters to refine search results.")})]}),(0,z.jsx)(b4,{children:(0,z.jsx)(_4,{onClose:h,text:"Close"})})]}):i===Ne.Failure?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(b4,{children:[(0,z.jsx)(v4,{name:"clock"}),(0,z.jsx)(y4,{title:"System is already generating alerts"}),(0,z.jsx)(xt.Z,{text:"Please wait till all alerts are generated and try again"})]}),(0,z.jsx)(b4,{children:(0,z.jsx)(_4,{onClose:h,text:"Close"})})]}):s===Ne.Success?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(b4,{children:[(0,z.jsx)(v4,{name:"check-circle"}),(0,z.jsx)(y4,{title:"Listings were sent"}),(0,z.jsx)(xt.Z,{text:"The system has started to work on generating alerts. It will take some time to create all alerts"})]}),(0,z.jsx)(b4,{children:(0,z.jsx)(_4,{onClose:h,text:"Close"})})]}):s===Ne.Failure?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(b4,{children:[(0,z.jsx)(y4,{title:"Listings werent sent to alerts"}),(0,z.jsx)(xt.Z,{text:"An unknown error occurred while trying to send listings to alerts. Please try again"})]}),(0,z.jsx)(b4,{children:(0,z.jsx)(_4,{onClose:h,text:"Close"})})]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(b4,{children:[(0,z.jsx)(y4,{title:"Create and send alerts?"}),(0,z.jsx)(xt.Z,{text:"You can send ".concat(f4," alerts at once. If you want to send more, wait a couple of minutes and repeat actions.")}),(0,z.jsx)(xt.Z,{text:"Creating and sending alerts can take some time. You won't be able to send new ones immediately"})]}),(0,z.jsx)(x4,{selectedValue:a,onSelect:e=>{o(e)},isSubmitAttempted:l}),(0,z.jsxs)(b4,{children:[(0,z.jsx)(ic.I,{text:"Send",onClick:async()=>{c(!0),a&&(r(Ne.Pending),"errors"in await(0,Fe.te0)({searchParams:u,reportReason:a})?r(Ne.Failure):(r(Ne.Success),o(void 0)))},styling:ic.I.Styling.Filled,isLoading:s===Ne.Pending}),(0,z.jsx)(_4,{onClose:h,text:"Close"})]})]})})]})},S4={first:{wide:10,desktops:8,tablets:6,phones:6},inbetweenAdFirst:{wide:20,desktops:16,tablets:15,phones:14},promoBoxFirst:cg.u9,promoBoxDistance:cg.jk,distance:{wide:25,desktops:20,tablets:18,phones:18}},Z4={closetPromo:{wide:{first:8,distance:24},desktops:{first:6,distance:24},tablets:{first:6,distance:24},phones:{first:6,distance:24}},activationBanner:{wide:{first:8,distance:20},desktops:{first:6,distance:18},tablets:{first:6,distance:18},phones:{first:6,distance:18}},ads:{wide:{first:20,distance:24},phones:{first:18,distance:24}}};function I4(e){switch(e){case Es.Search:return Es.SearchPromotedClosets;case Es.Catalog:return Es.CatalogPromotedClosets;default:return Es.PromotedClosets}}const C4=(e,t,i,n,s)=>{const r=i[t%i.length],a=n[r];return null!=a&&a.length?a.shift():null==s?void 0:s({index:e,itemIndex:t,type:r})},k4=(e,t)=>{const i=[...e],n=t.reduce(((t,i,n)=>{let{items:s,sequence:r=Object.keys(s),positions:a,generateItem:o,forceTruePosition:l}=i;const c=((e,t,i,n,s,r,a)=>{const o=[];for(let l=e.first,c=0;l<i;l+=e.distance,c+=1){const e=C4(l,c,n,s,a);e&&o.push({item:e,position:l,order:r,forceTruePosition:t})}return o})(a,l,e.length,r,s,n,o);return[...t,...c]}),[]).sort(((e,t)=>e.position-t.position||e.order-t.order));return n.forEach(((e,t)=>{let{position:s,item:r}=e;const a=s+t-n.slice(0,t).filter((e=>{let{forceTruePosition:t}=e;return t})).length;i.splice(a,0,r)})),i},w4=e=>({type:e.entity_type,id:"".concat(e.entity_type,"-").concat(e.entity.id),data:e}),P4=e=>({type:"closet_promotion",id:"closet-".concat(e.user.id),data:e}),z4=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:"ad",id:"ad-".concat(e),data:t}},T4=e=>({type:"item",id:"item-".concat(e.id),data:e}),F4=(e,t)=>({type:"lister_activation_banner",id:"lister-activation-banner-".concat(e),data:t});let N4,L4;!function(e){e.Impressions="impressions",e.ProfileVisits="profile_visits",e.ItemVisits="item_visits"}(N4||(N4={})),function(e){e.AllItems="all_items",e.UserProfile="user_profile",e.UserFollow="user_follow",e.ItemFavourite="item_favourite",e.Item="item",e.ViewProfile="view_wardrobe"}(L4||(L4={}));const E4=e=>{let{user:t,position:i,isBusinessUser:n,onClick:s=v.noop,onViewProfileClick:r}=e;const a=E(),o=U("user"),l=U("business"),{track:c}=vi(),{id:d,url:u,name:m,image:p,rating:g,ratingCount:h}=t,f=a.phones?Kl.U.Size.Medium:Kl.U.Size.Large,y=a.phones?Ox.Z.Size.Small:Ox.Z.Size.Regular,_=a.phones?gt.Z.Styling.Narrow:void 0;function b(){c(qi({id:t.id,position:i,contentType:z0.PromotedCloset,contentSource:Es.PromotedClosets})),s()}return(0,z.jsx)(gt.Z,{prefix:(0,z.jsx)("a",{href:u,onClick:b,children:(0,z.jsx)(Tp,{src:p,size:f,styling:Kl.U.Styling.Circle})}),suffix:(0,z.jsx)(ic.I,{size:ic.I.Size.Small,text:o("action.view_profile"),url:(0,Me.G0B)(d),onClick:r}),title:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("a",{href:u,onClick:b,children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,children:m})}),n&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Small,orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(oC.Z,{content:l("badge")})]})]}),body:(0,z.jsx)(Ox.Z,{aria:{"aria-label":g&&o("a11y.rating",{rating:g,max_rating:5})||""},value:g,text:h,emptyStateText:o("feedback.no_reviews"),size:y}),styling:_})},O4=e=>{let{item:t,onClick:i,onItemFavouriteToggle:n,showPhotoCollage:s}=e;return(0,z.jsx)(k0,{item:yo(t),showOwner:!1,onClick:i,onFavouriteToggle:n,testId:"item-".concat(t.id),hideBusinessBadge:!0,showPhotoCollage:s})},R4=e=>{let{itemCount:t,userId:i,onClick:n}=e;return(0,z.jsx)("div",{className:"closet__cta-container",children:(0,z.jsx)("div",{className:"closet__cta",children:(0,z.jsx)(gt.Z,{url:(0,Me.G0B)(i),type:gt.Z.Type.Navigating,chevron:!1,onClick:n,theme:"transparent",testId:"show-all-items",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,theme:"muted",alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent,children:(0,z.jsx)(wx,{pluralize:!0,count:t,id:"closet_promotion.listing.actions.view_all_items",values:{count:t}})})})})})},D4=e=>{let{user:t,items:i=[],wide:n=!1,position:s,contentSource:r,homepageSessionId:a}=e;const{track:o}=vi(),l=(0,m.useRef)([]),c=!!i[0].photos&&i[0].photos.length>=3;function d(e){return Vi({ownerId:t.id,contentSource:I4(r),target:e})}const u=(e,t)=>()=>{if((0,v.includes)(l.current,e.id))return;const i=Bi({id:e.id,position:t+1,contentType:z0.Item,contentSource:Es.PromotedClosets,itemOwnerId:e.user_id,homepageSessionId:a});o(i),l.current=[...l.current,e.id]},p=(e,t)=>()=>{const i=qi({id:e.id,position:t+1,contentType:z0.Item,contentSource:Es.PromotedClosets,homepageSessionId:a});o(i),o(d(L4.Item))};function g(e){let{itemId:t,isFollowEvent:i,itemContentSource:n}=e;o(Ai({itemId:t,isFollowEvent:i,homepageSessionId:a,contentSource:n})),o(Ri({target:qm.Favourite})),i&&o(d(L4.ItemFavourite))}const h=y()("closet","closet--with-horizontal-scroll",{"closet--wide":n}),x=y()("closet__item",{"closet__item--collage":c});return(0,z.jsx)("div",{className:"closet-container",children:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,children:(0,z.jsx)("div",{className:"closet-container__item-horizontal-scroll",children:(0,z.jsxs)("div",{className:h,children:[(0,z.jsx)(E4,{user:t,position:s,onClick:function(){o(d(L4.UserProfile))},onViewProfileClick:function(){o(d(L4.ViewProfile))},isBusinessUser:!!i[0].business_user}),(0,z.jsxs)(v$,{children:[i.map(((e,t)=>(0,z.jsx)(Jp.h,{onEnter:u(e,t),horizontal:!0,children:(0,z.jsx)(v$.Item,{className:x,children:(0,z.jsx)(O4,{item:e,onClick:p(e,t),onItemFavouriteToggle:g,showPhotoCollage:c&&0===t})})},"closet-item-".concat(e.id)))),(0,z.jsx)(Jp.h,{onEnter:function(){const e={position:i.length+1,userIdentifier:t.id},n=Gi({target:cb.SeeWholeClosetCta,targetDetails:JSON.stringify(e)});o(n)},horizontal:!0,children:(0,z.jsx)(v$.Item,{className:x,children:(0,z.jsx)(R4,{itemCount:t.itemCount,userId:t.id,onClick:function(){const e=Ri({target:qm.SeeWholeClosetCta,targetDetails:"".concat(t.id)});o(e),o(d(L4.AllItems))}})})})]})]})})})})},A4=e=>{let{wide:t=!1,isWhiteLayout:i=!0,banner:n,closet:s,position:r,contentSource:a,homepageSessionId:o}=e;const l=(0,p.I0)(),{track:c}=vi(),d=E(),u=U("closet_promotion.listing"),[g,f]=(0,m.useState)(!1);function y(){l(IE.startPreCheckout())}function v(){f(!1)}return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(D4,{...s,wide:t,position:r,contentSource:a,homepageSessionId:o}),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center u-ui-padding-left-medium",children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,children:u("title")}),(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,deprecatedIconName:"question-circle",deprecatedIconColor:ht.Z.Color.GreyscaleLevel3,size:ic.I.Size.Medium,inline:!0,onClick:function(){f(!0),c(Vi({ownerId:s.user.id,contentSource:I4(a),target:qm.ClosetPromotionHelp}))},testId:"closet-promotion--help-button"})]}),d.phones?(0,z.jsx)(Bp.Z,{isVisible:g,onClose:v,title:u("help.title"),closeButtonEnabled:!0,closeOnOverlayClick:!0,children:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,body:u("help.body")})}):(0,z.jsxs)(cp.Z,{show:g,defaultCallback:v,closeOnOverlay:!0,children:[(0,z.jsx)(Pm.Z,{body:(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{text:u("help.title"),type:xt.Z.Type.Title})}),right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,onClick:v,deprecatedIconName:"x",theme:"amplified",inline:!0,testId:"closet-promotion--help-close-button"})}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,body:u("help.body")})]})]}),n?(0,z.jsxs)(z.Fragment,{children:[i&&(0,z.jsx)(x.Z,{}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{title:n.title,body:n.subtitle,suffix:function(e){let{buttonTitle:t}=e;return(0,z.jsx)(ic.I,{text:t,styling:ic.I.Styling.Filled,onClick:y,testId:"closet-promotion-checkout-button"})}(n),prefix:(0,z.jsx)(ht.Z,{name:"vas-closet-promo",size:ht.Z.Size.Large})})]}):null]})},M4=e=>{let{order:t,onShowSalesTaxModal:i}=e;const n=U("closet_promotion.order_confirmation_modal.order_summary"),s=(0,p.v9)(Nc),{salesTax:r,total:a,isTaxCovered:o,payable:l,effectiveDays:c,discount:d,discountPercentage:u}=t;return(0,z.jsxs)(gt.Z,{children:[(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),children:[function(){const e=n("price_day_count",{count:c},{count:c});return(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,suffix:Ua(a,s),children:(0,z.jsx)(xt.Z,{text:"".concat(n("price")," ").concat(e)})})}(),parseFloat(t.discount.amount)<=0?null:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,suffix:Ua(d,s,{formatAsNegative:!0}),children:(0,z.jsx)(xt.Z,{theme:"success",text:n("discount",{percentage:u})})})]}),null!=r&&r.amount?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,suffix:"".concat(Ua(r,s)),testId:"closet-promotion-order-summary-sales-tax",children:(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center",children:[(0,z.jsx)(xt.Z,{text:n("sales_tax"),testId:"closet-promotion-order-summary-sales-tax--title"}),(0,z.jsx)(ic.I,{deprecatedIcon:(0,z.jsx)(ht.Z,{name:"info-circle",size:ht.Z.Size.Small,color:ht.Z.Color.GreyscaleLevel3,aria:{"aria-label":n("a11y.sales_tax_info")}}),inline:!0,size:ic.I.Size.Small,styling:ic.I.Styling.Flat,onClick:i,testId:"closet-promotion-order-summary-sales-tax--info-circle"})]})}),o&&(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,body:(0,z.jsx)(xt.Z,{text:n("sales_tax_covered_by_vinted"),highlightTheme:"amplified",type:xt.Z.Type.Subtitle,testId:"closet-promotion-order-summary-sales-tax--covered-by-vinted"})})]}):null,(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,title:n("total"),suffix:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:Ua(l,s)})})]})]})},U4=e=>{let{show:t,onBack:i,onConfirmOrder:n,onShowSalesTaxModal:s,onPaymentMethodSelect:r}=e;const a=U("closet_promotion.order_confirmation_modal"),o=U("payment_method_selection.errors"),{track:l}=vi(),[c,d]=(0,m.useState)(),u=(0,p.v9)(jH),g=(0,p.v9)(ZC),f=(0,p.v9)(FC),y=(0,p.v9)(CC),v=(0,p.v9)(fH),_=(0,p.v9)(SH),b=(0,p.v9)((e=>NC(e,null==v?void 0:v.payable.amount))),j=(0,p.v9)((e=>PC(e,null==v?void 0:v.payable.amount))),S=!!b||u;return(0,m.useEffect)((()=>{t&&l(Wi({screen:$t.ClosetPromotionOrderReview}))}),[t,l]),(0,m.useEffect)((()=>{S&&c&&d(void 0)}),[S,c]),(0,z.jsx)(cp.Z,{show:t,hasScrollableContent:!0,children:(0,z.jsxs)("div",{className:"u-fill-width",children:[(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{children:(0,z.jsx)(Pm.Z,{body:a("title"),testId:"closet-promotion-confirmation-modal-title"})}),(0,z.jsx)("div",{className:"u-padding-horizontal-medium",children:(0,z.jsx)(Kp,{screen:Hp.VASCheckout})}),(0,z.jsx)(h.Z,{})]}),(0,z.jsxs)(Lg,{children:[v?(0,z.jsxs)(z.Fragment,{children:[v?(0,z.jsx)(M4,{order:v,onShowSalesTaxModal:function(){s(),l(Ri({target:qm.SalesTaxInfo,screen:$t.ClosetPromotionOrderConfirmation,targetDetails:JSON.stringify({vas_order_id:null==v?void 0:v.id})}))}}):null,(0,z.jsx)(h.Z,{}),!u&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Hk,{error:c,walletBalance:g,selectedCreditCard:f,activePayInMethod:b,onPaymentMethodSelect:r}),(0,z.jsx)(h.Z,{})]}),(0,z.jsx)(z$,{}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),function(){const e=(null==b?void 0:b.code)===iv.Wallet;return j||e?null:(0,z.jsx)(ah.Z,{alignment:ah.Z.Alignment.Center,text:a("wallet_funds_availability_note")})}()]}):null,(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(ic.I,{disabled:_,isLoading:y===Oi.Processing,text:a("actions.place_order"),styling:ic.I.Styling.Filled,onClick:function(){S?v&&(l(Ri({screen:$t.ClosetPromotionOrderConfirmation,target:qm.ConfirmClosetPromotionOrder,targetDetails:"".concat(v.id)})),n()):d(o("not_selected_payment_method"))},testId:"closet-promotion-order-confirmation--confirm-button"}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,text:a("actions.back"),testId:"closet-promotion-checkout-back-button",onClick:i})]})]})]})})};function B4(e,t){return"".concat(Be.Fv,"/assets/closet-promotion").concat(t?"/dark":"","/").concat(e)}let q4;!function(e){e[e.PaymentSelection=0]="PaymentSelection",e[e.OrderConfirmation=1]="OrderConfirmation"}(q4||(q4={}));const V4=e=>{let{pricing:t,show:i,onNextAction:n,onPreview:s,onBack:r,onDynamicPricingInfo:a}=e;const o=U("closet_promotion.pre_checkout_modal"),l=Ql(),c=(0,p.v9)(Nc),d=(0,p.v9)(yH),u=(0,p.v9)(bH),m=(0,p.v9)(Wt("web_closet_promotion_dynamic_pricing")),g=Xn({abTestName:"closet_promotion_dynamic_pricing",shouldTrackExpose:i&&m}),f=m&&((null==g?void 0:g.variant)===$k.A||(null==g?void 0:g.variant)===$k.B);function y(){const e=Ma(t.totalPrice.amount,{locale:c,currency:t.totalPrice.currencyCode}),i=Ma(t.discountedPrice.amount,{locale:c,currency:t.discountedPrice.currencyCode}),n=t.discountedPrice.amount<t.totalPrice.amount,s=f?(0,z.jsx)("div",{className:"u-flexbox",children:(0,z.jsx)(ht.Z,{name:"info-circle",color:ht.Z.Color.GreyscaleLevel4,size:ht.Z.Size.Small})}):null;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Tight,suffix:s,onClick:f?a:void 0,clickable:f,testId:"closet-promotion-dynamic-pricing-info",children:[n&&(0,z.jsx)(xt.Z,{text:e,strikethrough:!0}),(0,z.jsx)(x.Z,{size:x.Z.Size.Small,orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(xt.Z,{text:i,type:xt.Z.Type.Title})]}),t.isSalesTaxApplicable&&(0,z.jsx)("div",{children:(0,z.jsx)(xt.Z,{theme:"muted",text:o("sales_tax_note"),testId:"closet-promotion-pre-checkout-modal--sales-tax-note"})})]})}return(0,z.jsx)(cp.Z,{show:i,hasScrollableContent:!0,testId:"closet-promotion-pre-checkout-modal",children:(0,z.jsx)("div",{className:"u-fill-width",children:(0,z.jsxs)(Lg,{children:[(0,z.jsx)(Pm.Z,{right:(0,z.jsx)(ic.I,{deprecatedIconName:"x",theme:"amplified",styling:ic.I.Styling.Flat,testId:"closet-promotion-pre-checkout-back-button",onClick:r}),body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,text:o("title")})}),u===Ne.Pending?(0,z.jsx)(Mp,{testId:"pre-checkout-loader",styling:Mp.Styling.Wide}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Kl.U,{src:B4("closet-promotion-onboarding.png",l)}),function(){const e={"learn-more":e=>(0,z.jsx)("span",{onClick:s,children:(0,z.jsx)(xt.Z,{as:"a",clickable:!0,text:e})})};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{text:o("intro.title"),type:xt.Z.Type.Heading})}),(0,z.jsx)(gt.Z,{title:o("intro.visibility.title"),body:o("intro.visibility.body"),prefix:(0,z.jsx)(Kl.U,{src:B4("avatars-group.svg",l),size:Kl.U.Size.Large})}),(0,z.jsx)(gt.Z,{title:o("intro.relevancy.title"),body:o("intro.relevancy.body",e),prefix:(0,z.jsx)(Kl.U,{src:B4("hand-ok.svg",l),size:Kl.U.Size.Large})}),(0,z.jsx)(gt.Z,{title:o("intro.insights.title"),body:o("intro.insights.body"),prefix:(0,z.jsx)(Kl.U,{src:B4("chart.svg",l),size:Kl.U.Size.Large})})]})}(),(0,z.jsx)(h.Z,{}),function(){const e=Ma(t.pricePerDay.amount,{locale:c,currency:t.pricePerDay.currencyCode});return(0,z.jsx)(gt.Z,{title:o("duration_day_count",{count:t.effectiveDays},{count:t.effectiveDays}),body:o("price_per_day",{price:e}),suffix:y()})}(),(0,z.jsx)("div",{className:"u-ui-margin-horizontal-large u-ui-margin-bottom-large",children:(0,z.jsx)(ic.I,{text:o("actions.proceed"),styling:ic.I.Styling.Filled,onClick:n,isLoading:d===Ne.Pending,testId:"closet-promotion-pre-checkout--proceed-button"})})]})]})})})},H4=e=>{let{show:t,onBack:i}=e;const n=U("closet_promotion.pre_checkout_help_modal");function s(e){return(0,z.jsx)(gt.Z,{title:(0,z.jsx)(xt.Z,{text:n("".concat(e,".title")),type:xt.Z.Type.Title}),body:(0,z.jsx)(xt.Z,{text:n("".concat(e,".body")),html:!0})})}return(0,z.jsx)(cp.Z,{show:t,hasScrollableContent:!0,children:(0,z.jsx)("div",{className:"u-fill-width",children:(0,z.jsxs)(Lg,{children:[(0,z.jsx)(Pm.Z,{left:(0,z.jsx)(ic.I,{theme:"amplified",deprecatedIconName:"arrow-left",styling:ic.I.Styling.Flat,testId:"closet-promotion-pre-checkout-help-back-button",onClick:i}),body:(0,z.jsx)(xt.Z,{text:n("title"),type:xt.Z.Type.Title})}),s("item_selection"),s("featured"),function(){const e={"help-center":e=>(0,z.jsx)(_p,{type:bp.ClosetPromotion,accessChannel:Be.Si.ProductLink,render:t=>(0,z.jsx)("a",{href:t,target:"_blank",rel:"noreferrer",children:e})})};return(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{html:!0,text:n("read_more",e),type:xt.Z.Type.Subtitle})})}()]})})})},G4=e=>{let{show:t,onBack:i}=e;const n=U("closet_promotion.dynamic_pricing_info_modal");function s(e){return(0,z.jsx)(gt.Z,{title:(0,z.jsx)(xt.Z,{text:n("".concat(e,".title")),type:xt.Z.Type.Title}),body:(0,z.jsx)(xt.Z,{text:n("".concat(e,".body")),html:!0})})}return(0,z.jsx)(cp.Z,{show:t,hasScrollableContent:!0,children:(0,z.jsx)("div",{className:"u-fill-width",children:(0,z.jsxs)(Lg,{children:[(0,z.jsx)(Pm.Z,{left:(0,z.jsx)(ic.I,{theme:"amplified",deprecatedIconName:"arrow-left",styling:ic.I.Styling.Flat,testId:"closet-promotion-dynamic-pricing-info-back-button",onClick:i}),body:(0,z.jsx)(xt.Z,{text:n("title"),type:xt.Z.Type.Title})}),s("what"),s("how")]})})})},W4=e=>{let{onCheckoutSuccess:t}=e;const i=(0,p.I0)(),{track:n}=vi(),[s,r]=(0,m.useState)(!1),a=(0,p.v9)(fH),o=(0,p.v9)(vH),l=(0,p.v9)(_H),c=(0,p.v9)(yH),d=(0,m.useCallback)((e=>{i(IE.setCheckoutModal({modal:e}))}),[i]);function u(){d(Ei.PreCheckout)}function g(){d(Ei.None)}return(0,m.useEffect)((function(){a&&s&&c===Ne.Success&&(n(Ri({screen:$t.ClosetPromotionOrderReview,target:qm.ReviewClosetPromotionOrder,targetDetails:"".concat(a.id)})),d(Ei.Checkout),r(!1))}),[a,n,d,s,c]),(0,z.jsxs)(z.Fragment,{children:[l&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(V4,{pricing:l,show:o===Ei.PreCheckout,onNextAction:function(){i(gH()),r(!0)},onPreview:function(){n(Ri({screen:$t.ClosetPromotionOrderReview,target:qm.ClosetPromotionPreCheckoutHelp})),d(Ei.PreCheckoutHelp)},onDynamicPricingInfo:function(){d(Ei.DynamicPricingInfo),n(Ri({screen:$t.ClosetPromotionOrderReview,target:qm.ClosetPromotionDynamicPricingInfo}))},onBack:g}),(0,z.jsx)(H4,{show:o===Ei.PreCheckoutHelp,onBack:u}),(0,z.jsx)(G4,{show:o===Ei.DynamicPricingInfo,onBack:u})]}),(0,z.jsx)(Bk,{show:o===Ei.Checkout,orderType:Ti.ClosetPromotion,orderId:null==a?void 0:a.id,orderPayable:null==a?void 0:a.payable,addCardSourceParams:{type:Ti.ClosetPromotion},onBack:u,onCheckoutFinish:function(e){g(),e&&t()},onInitStartAfterCardAuth:function(e){i(IE.getPricingRequest()),i(IE.getClosetPromotionOrderRequest({closetPromotionOrderId:e})),d(Ei.Checkout)},orderConfirmationModal:U4})]})},X4=e=>{let{breakpointItemCount:t,banner:i,onClose:n}=e;const{active:s}=E(),[r,a]=(0,m.useState)(!1),{track:o}=vi();return r?null:(0,z.jsxs)("div",{className:"lister-activation-banner",children:[(0,z.jsx)("div",{className:"lister-activation-banner__close",children:(0,z.jsx)(ic.I,{inline:!0,styling:ic.I.Styling.Flat,deprecatedIconName:"x",size:ic.I.Size.Small,onClick:function(){o(Ri({target:qm.CloseListerActivationBanner,targetDetails:i.catalogId.toString()})),a(!0),n(i)},testId:"lister-activation-banner-close-button"})}),(l=function(e){let i=t.default;const n=s.find((e=>t[e]));return n&&(i=t[n]||t.default),e.slice(0,i)}(i.imageUrls),(0,z.jsx)("div",{className:"lister-activation-banner__photos",children:l.map((e=>(0,z.jsx)("div",{className:"lister-activation-banner__photo-item",children:(0,z.jsx)(Kl.U,{styling:Kl.U.Styling.Rounded,ratio:Kl.U.Ratio.SmallPortrait,src:e})},e)))})),(0,z.jsxs)("div",{className:"lister-activation-banner__bottom-info",children:[(0,z.jsxs)("div",{className:"lister-activation-banner__bottom-info-text",children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:i.subtitle}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:i.title})]}),(0,z.jsx)("div",{className:"lister-activation-banner__bottom-info-action",children:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,text:i.buttonLinkText,onClick:function(){o(Ri({target:qm.UploadAfterListerActivationBanner,targetDetails:i.catalogId.toString()}))},url:i.buttonLinkUrl})})]})]});var l},Y4=["wide","desktops","tablets","phones"],K4=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y4).filter((t=>e.includes(t)))[0]||null};let J4;!function(e){e.MobileFilters="mobile_filters",e.Filters="filters",e.Items="items"}(J4||(J4={}));const Q4=e=>(t,i)=>{if(!(t instanceof Error))return;const n=i?"".concat(e,"_").concat(i):e;(0,ls.H)(t,{feature:n})},$4=Q4("Catalog");function e5(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const t5={phones:1,wide:4,default:3},i5={getClosetPromotions:IE.getClosetPromotionsRequest,markClosetSeen:IE.markClosetSeen,retryCatalogItemsRequest:zT,fetchBannersRequest:fV},n5=(0,p.$j)((e=>({currentUser:W(e),adPlacement:At(di.Inbetween)(e),abTestAdPlacement:At(di.Inbetween,"b")(e),items:_l(e),errors:gl(e),closets:wH(e),seenClosetIds:CH(e),uiState:rl(e),catalogUiState:gr(e),itemOffset:ul(e),endReached:ll(e),searchParams:pl(e),searchCorrelationId:Vr(e),searchSessionId:Hr(e),globalSearchSessionId:Gr(e),contentSource:Xr(e),banners:Cl(e),availableListerBannersBySelectedCatalogs:Tl(e),exposee:we(e),isCatalogClientSideFetchingEnabled:Wt("web_catalog_client_side_fetching")(e),isContentSourceFromResponseEnabled:Wt("web_use_catalog_items_content_source_from_response")(e)})),i5),s5=P0(k0);class r5 extends m.Component{constructor(){super(...arguments),e5(this,"state",{showlisterActivationBanners:!0}),e5(this,"currentUserId",this.props.currentUser?this.props.currentUser.id:null),e5(this,"seenItemIds",[]),e5(this,"seenAds",[]),e5(this,"seenBanners",[]),e5(this,"gridBanners",[]),e5(this,"getItemContentSource",((e,t)=>{const{contentSource:i,isContentSourceFromResponseEnabled:n}=this.props;return n?e:t?function(e){switch(e){case Es.Search:return Es.PromotedSearch;case Es.PopularItems:return Es.PromotedPopularItems;default:return Es.PromotedCatalog}}(i):i})),e5(this,"getAdContentSource",(()=>{const{contentSource:e}=this.props;return e===Es.Search?Es.AdSearch:Es.AdCatalog})),e5(this,"handleAdVisbility",((e,t)=>{const{track:i,searchSessionId:n,searchCorrelationId:s,globalSearchSessionId:r}=this.props;this.seenAds.includes(e)||(i(Bi({id:e,position:t,contentType:z0.Ad,contentSource:this.getAdContentSource(),searchSessionId:n,searchCorrelationId:s,globalSearchSessionId:r})),this.seenAds=[...this.seenAds,e])})),e5(this,"handleFavouriteToggle",(e=>t=>{let{itemId:i,isFollowEvent:n}=t;const{track:s,globalSearchSessionId:r,searchSessionId:a,searchCorrelationId:o}=this.props;s(Ri({target:qm.Favourite})),s(Ai({itemId:i,isFollowEvent:n,contentSource:e,globalSearchSessionId:r,searchSessionId:a,searchCorrelationId:o}))})),e5(this,"handleGridItemVisibility",(e=>{const{item:{data:t,type:i,id:n},index:s}=e,r=this.props.itemOffset+s+1;switch(i){case"item":this.handleItemVisibility(t,r);break;case"closet_promotion":this.handleClosetPromoVisibility(t,r);break;case"lister_activation_banner":this.handleBannerVisibility(n,t,r);break;case"ad":this.handleAdVisbility(n,r)}})),e5(this,"handleBannerDismiss",(()=>{this.setState({showlisterActivationBanners:!1}),(0,Fe.N$Y)()})),e5(this,"generateListerActivationBannerItem",(e=>{let{itemIndex:t}=e;const{availableListerBannersBySelectedCatalogs:i}=this.props;if(this.gridBanners[t])return this.gridBanners[t];const n=xs(i),s=F4(t,n);return this.gridBanners[t]=s,s})),e5(this,"renderGridItem",(e=>{const{item:t,index:i}=e,n=this.props.itemOffset+i+1;switch(t.type){case"item":return this.renderItem(t.data,n);case"closet_promotion":return this.renderClosetPromotion(t.data,n);case"ad":return(0,z.jsx)(uc,{shape:di.Inbetween,...t.data});case"lister_activation_banner":return this.renderListerActivationBanner(t.data);default:return null}})),e5(this,"shouldRenderClosetPromotionCheckout",(e=>e.filter((e=>"closet_promotion"===e.type)).map((e=>e.data)).some((e=>!!e.showBanner)))),e5(this,"resolveItemWidth",(e=>"closet_promotion"===e.type||"ad"===e.type||"lister_activation_banner"===e.type?"full-row":null)),e5(this,"handleItemsErrorLogging",(e=>{$4(e,J4.Items)}))}componentDidMount(){const{getClosetPromotions:e,fetchBannersRequest:t}=this.props;e({screenName:$t.Catalog}),t()}componentDidUpdate(e){this.props.items!==e.items&&(this.gridBanners=[])}handleClosetPromoVisibility(e,t){const{seenClosetIds:i,track:n,markClosetSeen:s,searchSessionId:r,searchCorrelationId:a,globalSearchSessionId:o,uiState:l,catalogUiState:c,isCatalogClientSideFetchingEnabled:d}=this.props,{user:{id:u}}=e;l===Ne.Pending||c===Ne.Pending&&d||i.includes(u)||(n(Bi({id:u,position:t,contentType:z0.PromotedCloset,contentSource:Es.PromotedClosets,searchSessionId:r,searchCorrelationId:a,globalSearchSessionId:o})),s({userId:u}))}handleItemVisibility(e,t){var i,n,s;const{track:r,searchCorrelationId:a,searchSessionId:o,globalSearchSessionId:l}=this.props,{id:c,promoted:d,user:u,content_source:m}=e,{id:p}=u;this.seenItemIds.includes(c)||(r(Bi({id:c,position:t,contentType:z0.Item,contentSource:this.getItemContentSource(m,d),itemOwnerId:p,searchCorrelationId:a,searchSessionId:o,globalSearchSessionId:l,searchScore:null===(i=e.search_tracking_params)||void 0===i?void 0:i.score,searchSignals:null===(n=e.search_tracking_params)||void 0===n?void 0:n.matched_queries,itemDistance:null===(s=e.search_tracking_params)||void 0===s?void 0:s.buyer_item_distance_km})),this.seenItemIds=[...this.seenItemIds,c])}handleBannerVisibility(e,t,i){const{contentSource:n,track:s}=this.props;this.seenBanners.includes(e)||(s(Bi({id:t.catalogId,position:i,contentType:z0.ListerActivationBanner,contentSource:n})),this.seenBanners=[...this.seenBanners,e])}handleExtraServiceCheckoutSuccess(){(0,ls.sl)()}getItemInserts(){const{showlisterActivationBanners:e}=this.state,{closets:t,breakpoints:i,availableListerBannersBySelectedCatalogs:n,adPlacement:s}=this.props,r=[],a=K4(i.active)||"phones",o="phones"===a,l=Z4.closetPromo[a],c=Z4.activationBanner[a],d=Z4.ads[a];e&&n.length&&r.push({items:{banners:[]},positions:c,generateItem:this.generateListerActivationBannerItem});const u=t.map(P4);if(u.length&&r.push({items:{closet_promotions:u},positions:l}),d&&s&&o){const e=Array.from({length:4},((e,t)=>z4(t)));r.push({items:{ads:e},positions:d})}return r}getGridItems(){const{items:e}=this.props,t=e.map(T4),i=this.getItemInserts();return k4(t,i)}renderItem(e,t){const{searchCorrelationId:i,searchSessionId:n,globalSearchSessionId:s}=this.props,r=this.getItemContentSource(e.content_source,e.promoted),a={viewingSelf:this.currentUserId===e.user.id,tracking:{id:e.id,contentType:z0.Item,contentSource:r,position:t,searchCorrelationId:i,searchSessionId:n,globalSearchSessionId:s},onFavouriteToggle:this.handleFavouriteToggle(r)},o=(0,ys.Iq)(e.url,{referrer:$t.Catalog});return(0,z.jsx)(s5,{item:uo(e),...a,url:o})}renderClosetPromotion(e,t){const{banners:i,contentSource:n}=this.props,s=e.showBanner?hs(i.closetPromotion,"catalog"):void 0;return(0,z.jsx)(A4,{closet:e,wide:!1,banner:s,isWhiteLayout:!1,position:t,contentSource:n})}renderListerActivationBanner(e){return(0,z.jsx)(X4,{breakpointItemCount:t5,banner:e,onClose:this.handleBannerDismiss})}renderError(e){return(0,z.jsx)(tc.Z,{title:(0,z.jsx)(vt.Z,{id:"catalog.generic_error.title"}),body:(0,z.jsx)(vt.Z,{id:"catalog.generic_error.body"}),action:(0,z.jsx)(ic.I,{isLoading:e,text:(0,z.jsx)(vt.Z,{id:"catalog.generic_error.cta"}),styling:ic.I.Styling.Filled,onClick:this.props.retryCatalogItemsRequest})})}renderEmpty(){const{items:e,uiState:t,catalogUiState:i,isCatalogClientSideFetchingEnabled:n}=this.props;return e.length||n&&(t!==Ne.Success||i!==Ne.Success)?null:(0,z.jsx)(tc.Z,{animation:(0,z.jsx)(u.Z,{animationUrl:"".concat(Be.Fv,"/assets/animations/search-empty-state.json")}),title:(0,z.jsx)(vt.Z,{id:"catalog.empty_state.title"}),body:(0,z.jsx)(vt.Z,{id:"catalog.empty_state.body"}),testId:"search-empty-state"})}renderInfoBanner(){const e=Kp,t=qm.MergeCatalogBanner;return(0,z.jsx)(e,{screen:$t.Catalog,linkTracking:{target:t}})}render(){const{uiState:e,errors:t,catalogUiState:i,isCatalogClientSideFetchingEnabled:n,items:s}=this.props,r=t||i===Ne.Failure&&n,a=e===Ne.Pending||i===Ne.Pending&&n,o=i===Ne.Success&&e===Ne.Pending&&0===s.length;if(r)return this.renderError(a);if(o)return(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center",children:(0,z.jsx)(Dp.Z,{testId:"catalog-page-items-loader"})});const l=y()({ajax:a}),c=this.getGridItems(),d=this.shouldRenderClosetPromotionCheckout(c);return(0,z.jsxs)("div",{className:l,children:[this.renderInfoBanner(),this.renderEmpty(),(0,z.jsx)(V2,{items:c,renderItem:this.renderGridItem,onItemVisible:this.handleGridItemVisibility,widthResolver:this.resolveItemWidth,handleErrorLogging:this.handleItemsErrorLogging,preventLog:!0}),d&&(0,z.jsx)(W4,{onCheckoutSuccess:this.handleExtraServiceCheckoutSuccess})]})}}const a5=n5(zx(F(r5)));var o5=i(87867);const l5=()=>{const e=E(),t=(0,p.I0)(),{searchParams:i}=xc(),n=(0,p.v9)(al),s=(0,p.v9)(ol),r=(0,p.v9)(cl),a=(0,p.v9)(dl),o=(e,i)=>{i.preventDefault(),n!==e&&t(CN.setCatalogItemsPage({page:e}))};if((0,p.v9)(gl)||!s||!r||s<=1)return null;let l;return e.phones&&(l=o5.Z.Styling.Narrow),(0,z.jsx)(g.Z,{children:(0,z.jsx)(o5.Z,{styling:l,currentPage:n,pageCount:s,onPageClick:o,onNextClick:o,onPrevClick:o,urlBuilder:(e,t)=>{const n={...i,...Qs({page:e,perPage:t||r,time:a})};return"".concat(Me.JXU,"?").concat((0,ys.Kf)((0,_i.Gj)(n)))},testId:"catalog-pagination"})})};var c5=i(64433);const d5={removeFilters:hF.removeFilters,removeDynamicFilters:hF.removeSelectedDynamicFilters},u5=(0,p.$j)((e=>({filters:Or(e),selectedDynamicFilters:sa(e)})),d5);class m5 extends m.Component{constructor(){super(...arguments),function(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(this,"handleClick",(()=>{const{removeFilters:e,removeDynamicFilters:t,filters:i}=this.props;e({filters:i}),t()}))}render(){const{filters:e,selectedDynamicFilters:t}=this.props;return e.length||t.some((e=>!!e.ids.length))?(0,z.jsx)(ic.I,{onClick:this.handleClick,text:(0,z.jsx)(vt.Z,{id:"catalog.reset_filters"}),styling:ic.I.Styling.Flat,size:ic.I.Size.Small,testId:"catalog-reset-filters-button"}):null}}const p5=u5(m5);function g5(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const h5={onFilterClick:hF.removeFilter,onDynamicFilterClick:hF.removeSelectedDynamicFilterId},x5=(0,p.$j)((e=>({filters:Nr(e),dynamicFilters:ea(e),selectedDynamicFilters:sa(e),currency:Ns(e)})),h5);class f5 extends m.Component{constructor(){super(...arguments),g5(this,"translate",((e,t)=>{const{intl:i}=this.props;return i.formatMessage({id:"catalog.selected_filters.".concat(e)},t)})),g5(this,"formatLabel",(e=>{const{name:t,label:i,value:n}=e;if(!(0,v.isEmpty)(i))return i;switch(t){case"priceFrom":return this.translate("price_from",{value:this.formatCurrencyValue(n)});case"priceTo":return this.translate("price_to",{value:this.formatCurrencyValue(n)});default:return t}})),g5(this,"formatCurrencyValue",(e=>{const{currency:t}=this.props,i=parseFloat(String(e));return this.props.intl.formatNumber(i,{style:"currency",currency:t})})),g5(this,"handleClick",(e=>()=>{const{onFilterClick:t,onDynamicFilterClick:i}=this.props;return e.isDynamic?i({type:e.name,id:Number(e.value)}):t({filter:e})})),g5(this,"renderFilter",(e=>{const t=e.isDynamic?"".concat(e.name,"Ids-").concat(e.value):"".concat(e.name,"-").concat(e.value),i=this.formatLabel(e);return(0,z.jsx)("div",{className:"u-ui-margin-right-regular u-ui-margin-bottom-regular",children:(0,z.jsx)(Jw.j,{text:i,textType:xt.Z.Type.Subtitle,suffix:(0,z.jsx)(Wy.Z,{name:c5.Z}),styling:Jw.j.Styling.Filled,radius:Jw.j.Radius.Round,onClick:this.handleClick(e),testId:"catalog--selected-filter-".concat(t)})},t)})),g5(this,"getSelectedFilters",(()=>{const{filters:e,selectedDynamicFilters:t,dynamicFilters:i}=this.props,n=[],s=[],r=e;return i.forEach((e=>{s.push({...e,options:ar(e.options)})})),t.forEach((e=>{e.ids.forEach((t=>{const i=s.find((t=>t.type===e.type)),r=null==i?void 0:i.options.find((e=>e.id===t));r&&n.push({name:e.type,label:r.title,value:r.id,isDynamic:!0})}))})),[...r,...n]}))}render(){const e=this.getSelectedFilters();return(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center u-flex-wrap",children:[e.map(this.renderFilter),(0,z.jsx)("div",{className:"u-margin-left-auto",children:(0,z.jsx)(p5,{})})]})}}g5(f5,"defaultProps",{filters:[],currency:"EUR"});const y5=x5((0,iw.ZP)(f5)),v5=()=>{const e=(0,p.I0)(),{searchParams:t}=xc(),{track:i}=vi(),n=(0,p.v9)(qr),s=(e=>{const{filters:t,extraParams:i}=e,n={...i,...$s(t)},s=(0,v.omit)(n,["catalog","size_id","material_ids","id","page"]);return(0,_i.Gj)(s)})({extraParams:t,filters:(0,p.v9)(hr)}),r=t=>n=>{n.preventDefault();const s=[t.id];i(sn({catalogIds:s,attributeId:Za.Subcatalog})),e(hF.catalogFilterSet({ids:s}))};return(0,z.jsx)("ul",{className:"nav nav-detailed nav-page-categories","data-testid":"sub-catalog-navigation-links",children:n.map((e=>(0,z.jsx)("li",{className:"nav-item",children:(0,z.jsx)("a",{className:"nav-link u-ellipsis u-block",href:(0,ys.Iq)(e.url,s),onClick:r(e),children:e.title})},e.id)))})};let _5;!function(e){e.Sort="sort",e.Category="category",e.Size="size",e.Brand="brand",e.Status="condition",e.Color="colour",e.Price="price",e.Country="country",e.Location="location",e.Material="material",e.VideoGameRating="video_game_rating",e.Dynamic="dynamic"}(_5||(_5={}));var b5=i(59968);const j5=e=>{let{suffixText:t,renderSuffix:i,textTheme:n}=e;return(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center",children:[!!t&&(0,z.jsx)("span",{className:"filter-cell__suffix-text","data-test-id":"selected-filters",children:(0,z.jsx)(xt.Z,{text:t,theme:n,truncate:!0})}),i()]})},S5=e=>{let{title:t,visible:i=!0,suffixText:n,suffixTextTheme:s,otherCellProps:r,onClick:a,onView:o,renderCustomSuffix:l}=e;const c=()=>(0,z.jsx)(ht.Z,{name:"chevron-right",color:ht.Z.Color.GreyscaleLevel3,testId:"default-suffix-icon"}),d=()=>(0,z.jsx)(j5,{suffixText:n,renderSuffix:l||c,textTheme:s}),u=()=>(0,z.jsx)(gt.Z,{...r,title:t,suffix:d?d():c(),type:gt.Z.Type.Navigating,onClick:a,clickable:!0});return i?(0,z.jsx)(Jp.h,{onEnter:o,children:(0,z.jsx)("div",{children:u()})}):u()},Z5=e=>{let{isOpen:t,children:i,hideSubmitButton:n=!1,testId:s,renderNavigation:r,onSubmit:a}=e;const o=U("catalog.filters.mobile");return(0,z.jsxs)(cp.Z,{show:t,className:"u-fill-width u-fill-height u-flexbox u-flex-direction-column",isFramed:!1,testId:s,children:[(0,z.jsxs)("div",{className:"u-flex-shrink-none",children:[r(),(0,z.jsx)(h.Z,{})]}),(0,z.jsx)("div",{className:"u-overflow-auto u-fill-height",children:i}),!n&&(0,z.jsx)("div",{className:"u-ui-padding-large u-margin-top-auto",children:(0,z.jsx)(ic.I,{text:o("filters_screen.actions.show_results"),onClick:a,theme:"primary",styling:ic.I.Styling.Filled})})]})},I5=e=>{let{title:t,icon:i,prefixAriaLabel:n,suffixText:s,testId:r,onPrefixClick:a,onSuffixClick:o}=e;return(0,z.jsx)(Pm.Z,{left:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,onClick:a,deprecatedIcon:i,size:ic.I.Size.Medium,testId:r?"".concat(r,"-prefix"):void 0,aria:{"aria-label":n}}),body:(0,z.jsx)(xt.Z,{text:t,type:xt.Z.Type.Title}),right:!!s&&(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,onClick:o,text:(0,z.jsx)(xt.Z,{text:s,type:xt.Z.Type.Title})}),testId:r})},C5=e=>{let{type:t,title:i,selectionType:n,isSelectionHighlighted:s,isNewFilter:r,options:a,selectedIds:o,fromScreen:l,isFilterCellVisible:c,rootOptionType:d,onListOptionSelect:u,clearSelectedOptions:g,onSubmit:f,onFilterCellClick:y,onFilterCellView:_,onModalOpen:b,onModalClose:j}=e;const S=U(),{track:Z}=vi(),I=(0,p.v9)(Gr),C=(0,p.v9)(Hr),k=(0,m.useRef)([]),[w,P]=(0,m.useState)(!1),[T,F]=(0,m.useState)([]),[N,L]=(0,m.useState)(o),[E,O]=(0,m.useState)(""),R=(0,p.v9)(we),D=(0,p.v9)(Vn("dynamic_size_filter")),A="".concat($t.DynamicFilter,"_").concat(t),M=(0,m.useMemo)((()=>ar(a)),[a]),B=(0,m.useMemo)((()=>(0,v.compact)(o.map((e=>{var t;return null===(t=M.find((t=>t.id===e)))||void 0===t?void 0:t.title}))).join(", ")),[o,M]),q=(0,m.useMemo)((()=>b3(a,d,s,N)),[a,d,s,N]),V=(0,m.useMemo)((()=>j3(a,d,s,N)),[a,d,s,N]),H=()=>{O(""),k.current=[],P(!1),j()},G=e=>M.findIndex((t=>t.id===e))+1,W=e=>()=>{e===Ws.Root&&H(),k.current=[],F((t=>t.filter((t=>t!==e)))),L(o)},X=(e,i,n)=>{u(e),Z(On({id:e,type:t,code:t,position:i,itemsCount:n,isSelected:!o.includes(e),filteringSessionId:E,globalSearchSessionId:I,searchSessionId:C,fromScreen:l}))},Y=e=>{const t=G(e);X(e,t)},K=e=>{F((t=>[...t,e.code]))},J=()=>{H(),f(),Z(Ri({screen:A,target:qm.ApplyFilters}))},Q=e=>()=>{g(t,e),Z(Ri({target:qm.ClearFilters,screen:A}))},$=e=>()=>{var i;const n=Number(e.id);if(k.current.includes(n))return;const s=G(n);Z(En({id:n,type:t,code:t,position:s,itemsCount:null===(i=e.data)||void 0===i?void 0:i.itemsCount,filteringSessionId:E,globalSearchSessionId:I,searchSessionId:C,fromScreen:l})),k.current=[...k.current,n]};(0,m.useEffect)((()=>{w&&O(ZF().v4())}),[w]);const ee=(e,i,n)=>()=>(0,z.jsx)(I5,{title:e,icon:(0,z.jsx)(Wy.Z,{name:Qy.Z,testId:"".concat(t,"-navigation-prefix-icon")}),prefixAriaLabel:S("catalog.filters.a11y.actions.back"),suffixText:S("catalog.filters.dynamic.clear"),onPrefixClick:W(i),onSuffixClick:Q(n)}),te=()=>(0,z.jsx)(Wy.Z,{name:b5.Z,color:Wy.Z.Color.GreyscaleLevel3}),ie=e=>{const t=e.flatMap((e=>e.items));return(0,v.compact)(o.map((e=>{var i;return null===(i=t.find((t=>{let{id:i}=t;return e===i})))||void 0===i?void 0:i.title}))).join(", ")},ne=e=>(0,z.jsx)(j5,{suffixText:ie(e),textTheme:"primary",renderSuffix:te}),se=e=>{var t,i,n,s,r,a,o,l;let{item:c,itemElementProps:d}=e;const u=Number(null===(t=c.data)||void 0===t?void 0:t.itemsCount),m=Number(null===(i=c.data)||void 0===i?void 0:i.itemsCountMax);return(0,z.jsx)(Jp.h,{onEnter:$(c),children:(0,z.jsx)("div",{children:(0,z.jsx)(gt.Z,{...d,title:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:c.title,type:xt.Z.Type.Title}),u>0&&m&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(xt.Z,{text:u>=m?"(".concat(m,"+)"):"(".concat(u,")"),type:xt.Z.Type.Subtitle})]})]}),body:null!==(n=c.data)&&void 0!==n&&n.description?null===(s=c.data)||void 0===s?void 0:s.description:null,prefix:null!==(r=c.data)&&void 0!==r&&null!==(a=r.prefix)&&void 0!==a&&a.code?(0,z.jsx)(L3,{code:null===(o=c.data)||void 0===o||null===(l=o.prefix)||void 0===l?void 0:l.code}):null})})},c.id)};return a.length?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(S5,{title:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:i,type:xt.Z.Type.Title}),r&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(oC.Z,{theme:"primary",content:S("common.new_badge")})]})]}),suffixText:B||S("catalog.filters.dynamic.all"),suffixTextTheme:B?"primary":void 0,onClick:()=>{F((e=>[...e,Ws.Root])),P(!0),L(o),b(),y(),D&&"size"===t&&Z(bn({...R,...D}))},onView:_,visible:c}),d===Ws.Group||d===Ws.Navigational?T.map((e=>(e=>{const r=V.find((t=>{let{code:i}=t;return i===e})),l=(null==r?void 0:r.title)||i,c=(e=>{const t=V.find((t=>{let{code:i}=t;return i===e}));return t?t.matchingGroups:S3(a,d,s,N)})(e),u=(null==c?void 0:c.flatMap((e=>{let{items:t}=e;return t.map((e=>{let{id:t}=e;return t}))})))||[];return(0,z.jsxs)(Z5,{renderNavigation:ee(l,e,u),isOpen:w,onSubmit:J,testId:"".concat(t,"-filter-modal"),children:[c.length?(0,z.jsx)(F3,{name:"".concat(t,"_ids"),groups:c,isMultiSelect:n===Gs.Multi,selectedIds:o,onItemClick:Y,renderItem:se}):(0,z.jsx)(N3,{catalogs:V,onItemClick:K,renderSuffix:ne}),(0,z.jsx)(h.Z,{})]},e)})(e))):(0,z.jsxs)(Z5,{renderNavigation:ee(i,Ws.Root),isOpen:w,onSubmit:J,testId:"".concat(t,"-filter-modal"),children:[(0,z.jsx)(T3,{name:"".concat(t,"_ids"),items:q,selected:o,onItemClick:e=>{var t;const i=Number(e.id),n=G(i),s=null===(t=e.data)||void 0===t?void 0:t.itemsCount;X(i,n,s)},renderItem:se,isMultiSelect:n===Gs.Multi,disableButtonClicks:!0}),(0,z.jsx)(h.Z,{})]})]}):null};var k5=i(49620);const w5=e=>{let{type:t,title:i,selectionType:n,isSelectionHighlighted:s,options:r,selectedIds:a,fromScreen:o,isFilterCellVisible:l,rootOptionType:c,translations:d,onListOptionSelect:u,clearSelectedOptions:g,onSubmit:f,onFilterCellClick:y,onFilterCellView:_,onModalOpen:b,onModalClose:j}=e;const S=U(),Z=(0,p.I0)(),{track:I}=vi(),C=(0,p.v9)(Gr),k=(0,p.v9)(Hr),w=(0,m.useRef)([]),[P,T]=(0,m.useState)(null),[F,N]=(0,m.useState)(!1),[L,E]=(0,m.useState)(a),[O,R]=(0,m.useState)(""),D=(0,p.v9)(we),A=(0,p.v9)(Vn("dynamic_brand_filter")),M="".concat($t.DynamicFilter,"_").concat(t),B=(0,m.useMemo)((()=>ar(r)),[r]),q=(0,m.useMemo)((()=>(0,v.compact)(a.map((e=>{var t;return null===(t=B.find((t=>t.id===e)))||void 0===t?void 0:t.title}))).join(", ")),[a,B]),V=(0,m.useMemo)((()=>b3(r,c,s,L)),[r,c,s,L]),H=()=>{R(""),w.current=[],N(!1),j()},G=e=>B.findIndex((t=>t.id===e))+1,W=e=>()=>{e===Ws.Root&&H(),w.current=[],E(a),P&&T("")},X=e=>()=>{g(t,e),P&&T(""),I(Ri({target:qm.ClearFilters,screen:M}))},Y=e=>()=>{var i;const n=Number(e.id);if(w.current.includes(n))return;const s=G(n);I(En({id:n,type:t,code:t,position:s,itemsCount:null===(i=e.data)||void 0===i?void 0:i.itemsCount,searchText:P||"",filteringSessionId:O,globalSearchSessionId:C,searchSessionId:k,fromScreen:o})),w.current=[...w.current,n]},K=e=>{const i=e.currentTarget.value;T(i),i&&(Z(hF.setFilterSearchQuery({text:i,code:t})),Z(fR(t,i))),E(a)},J=()=>{P&&T("")};(0,m.useEffect)((()=>{F&&R(ZF().v4())}),[F]),(0,m.useEffect)((()=>{""===P&&(Z(fR(t,"")),Z(hF.setFilterSearchQuery({text:null,code:null})))}),[P,t,Z]);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(S5,{title:i,suffixText:q||S("catalog.filters.dynamic.all"),suffixTextTheme:q?"primary":void 0,onClick:()=>{N(!0),E(a),b(),y(),A&&"brand"===t&&I(bn({...D,...A}))},onView:_,visible:l}),(0,z.jsx)(Z5,{renderNavigation:(ee=i,te=Ws.Root,()=>(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(I5,{title:ee,icon:(0,z.jsx)(Wy.Z,{name:Qy.Z,testId:"".concat(t,"-navigation-prefix-icon")}),prefixAriaLabel:S("catalog.filters.a11y.actions.back"),suffixText:S("catalog.filters.dynamic.clear"),onPrefixClick:W(te),onSuffixClick:X(undefined)}),(0,z.jsx)("div",{className:"brand-filter__navigation-input",children:(0,z.jsx)(Tm.N,{name:"".concat(t,"_filter_search"),placeholder:(null==d?void 0:d.placeholder)||"",value:P,icon:(0,z.jsx)("div",{className:"u-flexbox u-align-items-center",children:(0,z.jsx)(Wy.Z,{name:k5.Z,color:Wy.Z.Color.GreyscaleLevel4})}),onChange:K,onValueClear:J,inputAria:{"aria-label":i},clearButtonAria:{"aria-label":S("catalog.filters.dynamic.clear")}})})]})),isOpen:F,onSubmit:()=>{H(),f(),I(Ri({screen:M,target:qm.ApplyFilters})),P&&T("")},testId:"".concat(t,"-filter-modal"),children:V.length?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(T3,{name:"".concat(t,"_ids"),items:V,selected:a,onItemClick:e=>{var i;const n=Number(e.id);((e,i,n)=>{u(e),I(On({id:e,type:t,code:t,position:i,itemsCount:n,isSelected:!a.includes(e),searchText:P||"",filteringSessionId:O,globalSearchSessionId:C,searchSessionId:k,fromScreen:o}))})(n,G(n),null===(i=e.data)||void 0===i?void 0:i.itemsCount)},renderItem:e=>{var t,i,n,s;let{item:r,itemElementProps:a}=e;const o=Number(null===(t=r.data)||void 0===t?void 0:t.itemsCount),l=Number(null===(i=r.data)||void 0===i?void 0:i.itemsCountMax);return(0,z.jsx)(Jp.h,{onEnter:Y(r),children:(0,z.jsx)("div",{children:(0,z.jsx)(gt.Z,{...a,title:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:r.title,type:xt.Z.Type.Title}),o>0&&l&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(xt.Z,{text:o>=l?"(".concat(l,"+)"):"(".concat(o,")"),type:xt.Z.Type.Subtitle})]})]}),body:null!==(n=r.data)&&void 0!==n&&n.description?null===(s=r.data)||void 0===s?void 0:s.description:null})})},r.id)},isMultiSelect:n===Gs.Multi,disableButtonClicks:!0}),(0,z.jsx)(h.Z,{})]}):(0,z.jsx)(tc.Z,{title:null==d||null===(Q=d.noResults)||void 0===Q?void 0:Q.title,body:null==d||null===($=d.noResults)||void 0===$?void 0:$.body})})]});var Q,$,ee,te},P5=e=>{let{learnMoreUrl:t,selectedOption:i,isFilterCellVisible:n,onOptionClick:s,onSubmit:r,onFilterCellClick:a,onFilterCellView:o,onModalOpen:l,onModalClose:c}=e;const d=U("catalog.filters"),[u,p]=(0,m.useState)(!1),g=i||uR.Relevance,x=()=>{p(!1),c()},f=e=>{x(),s(e.value)},y=()=>{x(),r()},v=()=>(0,z.jsx)(I5,{title:d("sort.name"),icon:(0,z.jsx)(Wy.Z,{name:Qy.Z,testId:"navigation-prefix-icon"}),prefixAriaLabel:d("a11y.actions.back"),onPrefixClick:x}),_=()=>{if(!t)return null;const e=(0,z.jsx)("a",{href:t,children:d("sort.learn_more.action")});return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{testId:"learn-more-message",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:d("sort.learn_more.message",{action:e})})})]})};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(S5,{title:d("sort.name"),suffixText:d("sort.options.".concat(g)),suffixTextTheme:"primary",onClick:()=>{p(!0),l(),a()},onView:o,visible:n}),(()=>{const e=Object.values(uR).map((e=>({id:e,title:d("sort.options.".concat(e)),value:e})));return(0,z.jsxs)(Z5,{renderNavigation:v,isOpen:u,onSubmit:y,testId:"sort-modal",children:[(0,z.jsx)(T3,{name:"sort_by",isMultiSelect:!1,items:e,selected:[g],onItemClick:f,disableButtonClicks:!0}),_()]})})()]})},z5=e=>{let{allCatalogs:t,selectedCatalogsIds:i,isFilterCellVisible:n,onCatalogSelect:s,onSubmit:r,onFilterCellClick:a,onFilterCellView:o,onModalOpen:l,onModalClose:c}=e;const d=U("catalog.filters"),{track:u}=vi(),[p,g]=(0,m.useState)([]),{allShownCatalogs:x}=D3(p,d("catalog.all"),t),f=(0,m.useCallback)((function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=t[e.parentId];return n?f(n,[...i,n.id]):i}),[t]),y=e=>{g((t=>[...t,e]))},_=()=>{g([]),c()},b=e=>()=>{e===va&&c(),(e=>{g((t=>t.filter((t=>t!==e))))})(e)},j=()=>{_(),r()},S=e=>()=>{let n=[];e!==va&&(n=i.filter((i=>![i,...f(t[i])].includes(e)))),s(n)},Z=e=>{if(!e.data)return;const{id:t,catalogIds:n,code:r}=e.data;if(n.length>0&&r!==_a)return void y(t);let a=[];a=i.includes(t)?i.filter((e=>e!==t)):[t],u(sn({catalogIds:a,attributeId:Za.Filter,screen:$t.MobileCatalogFilter})),s(a),_()},I=(e,t,i)=>i>1?null:t===_a?(0,z.jsx)(Wy.Z,{name:R3.Z,color:Wy.Z.Color.Primary}):e?(0,z.jsx)(Kl.U,{...za(e),size:Kl.U.Size.Regular}):null,C=(e,t)=>()=>e?(0,z.jsx)(Wy.Z,{name:b5.Z,color:Wy.Z.Color.GreyscaleLevel3}):t,k=e=>{let n=i;return e!==va&&(n=i.filter((i=>[i,...f(t[i])].includes(e)))),(0,v.compact)(n.map((e=>{var i;return null===(i=t[e])||void 0===i?void 0:i.title}))).join(", ")},w=e=>{let{item:t,itemElementProps:i}=e;if(!t.data)return null;const{id:n,catalogIds:s,code:r,depth:a,photo:o}=t.data,l=s.length>0&&r!==_a;return(0,z.jsx)(gt.Z,{...i,prefix:I(o,r,a),suffix:(0,z.jsx)(j5,{suffixText:l&&k(n),textTheme:"primary",renderSuffix:C(l,i.suffix)})})},P=(e,t)=>()=>(0,z.jsx)(I5,{title:t,icon:(0,z.jsx)(Wy.Z,{name:Qy.Z,testId:"".concat(t,"-navigation-prefix-icon")}),prefixAriaLabel:d("a11y.actions.back"),onPrefixClick:b(e),onSuffixClick:S(e)}),T=k(va);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(S5,{title:d("catalog.name"),suffixText:T||d("catalog.all"),suffixTextTheme:T?"primary":void 0,onClick:()=>{y(va),a(),l()},onView:o,visible:n}),p.map((e=>{const n=x[e];if(null==n||!n.length)return null;const s=e===va?d("catalog.name"):t[e].title;return(0,z.jsxs)(Z5,{renderNavigation:P(e,s),onSubmit:j,isOpen:!0,hideSubmitButton:!0,testId:"".concat(s,"-catalog-modal"),children:[(0,z.jsx)(T3,{name:"".concat(s,"_catalog_ids"),items:n,selected:i,renderItem:w,onItemClick:Z,isMultiSelect:!1,disableButtonClicks:!0}),(0,z.jsx)(h.Z,{})]},e)}))]})},T5=e=>{let{selectedPriceRange:t,isFilterCellVisible:i,onPriceRangeChange:n,onSubmit:s,onFilterCellClick:r,onFilterCellView:a,onModalOpen:o,onModalClose:l}=e;const c=U("catalog"),{formatNumber:d}=(0,O.Z)(),u=(0,p.v9)((e=>jr(e)||Ns(e))),[g,h]=(0,m.useState)(!1),[x,f]=(0,m.useState)(!1),y=()=>{h(!1),l()},v=()=>{n({priceFrom:null,priceTo:null}),f(!0)},_=e=>{const t=parseFloat(e);return d(t,{style:"currency",currency:u})},b=(()=>{const{priceFrom:e,priceTo:i}=t;return e&&i?c("selected_filters.both_price",{priceFrom:_(e),priceTo:_(i)}):e?c("selected_filters.price_from",{value:_(e)}):i?c("selected_filters.price_to",{value:_(i)}):null})();return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(S5,{title:c("filters.price.name"),suffixText:b||c("filters.price.all"),suffixTextTheme:b?"primary":void 0,onClick:()=>{h(!0),f(!1),o(),r()},onView:a,visible:i}),(0,z.jsx)(Z5,{renderNavigation:()=>(0,z.jsx)(I5,{title:c("filters.price.name"),suffixText:c("filters.price.clear_price"),prefixAriaLabel:c("filters.a11y.actions.back"),icon:(0,z.jsx)(Wy.Z,{name:Qy.Z,testId:"price-navigation-prefix-icon"}),onPrefixClick:y,onSuffixClick:v}),isOpen:g,onSubmit:()=>{y(),s()},testId:"price-modal",children:(0,z.jsx)("div",{className:"u-flexbox",children:(0,z.jsx)(K3,{priceRange:t,priceFromTitle:c("filters.price.price_from"),priceToTitle:c("filters.price.price_to"),onPriceRangeChange:e=>{let{priceFrom:t,priceTo:i}=e;const s=i?t||"0":t;f(!1),n(qT(s,i))},shouldUpdateInputValues:x,shouldFocusInput:!0})})})]})},F5=e=>{let{selectedBrandsIds:t,isFilterCellVisible:i,onBrandSelect:n,onSubmit:s,onFilterCellClick:r,onFilterCellView:a,onModalOpen:o,onModalClose:l}=e;const c=U("catalog.filters"),d=(0,p.I0)(),{track:u}=vi(),g=(0,p.v9)((e=>zr(e,t))),x=(0,p.v9)(Gr),f=(0,p.v9)(we),y=(0,p.v9)(Vn("dynamic_brand_filter")),[_,b]=(0,m.useState)(!1),[j,S]=(0,m.useState)(""),Z=(0,m.useRef)("");(0,m.useEffect)((()=>{Z.current=ZF().v4()}),[]),(0,m.useEffect)((()=>()=>{d(mR())}),[d]);const I=()=>{d(mR()),S("")},C=()=>{b(!1),I(),l(),Z.current=ZF().v4()},k=e=>{const i=Number(e.id);let s=[];s=t.includes(i)?t.filter((e=>e!==i)):[i,...t],n(s),((e,t)=>{const i=g.map((e=>{let{id:t}=e;return t})),n=i.findIndex((t=>t===e)),s=In({query:j,suggestedBrands:i,globalSearchSessionId:x,suggestionsSessionId:Z.current,position:n+1,brandId:e,selectedBrands:t,screen:$t.MobileCatalogFilters});u(s)})(i,t)},w=()=>{C(),s()},P=()=>{I(),n([])},T=e=>{const t=e.currentTarget.value;S(t),d(mR(t))},F=()=>(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(I5,{title:c("brand.name"),icon:(0,z.jsx)(Wy.Z,{name:Qy.Z,testId:"brand-navigation-prefix-icon"}),prefixAriaLabel:c("a11y.actions.back"),suffixText:c("brand.clear_brands"),onPrefixClick:C,onSuffixClick:P}),(0,z.jsx)("div",{className:"brand-filter__navigation-input",children:(0,z.jsx)(Tm.N,{name:"brand_keyword",placeholder:c("brand.search.placeholder"),value:j,deprecatedIcon:(0,z.jsx)("div",{className:"u-flexbox u-align-items-center",children:(0,z.jsx)(ht.Z,{name:"search-filled",size:ht.Z.Size.Small,color:ht.Z.Color.GreyscaleLevel4})}),onChange:T,onValueClear:I,inputAria:{"aria-label":c("brand.name")},clearButtonAria:{"aria-label":c("brand.search.a11y.actions.clear")}})})]}),N=(0,v.compact)(t.map((e=>{var t;return null===(t=g.find((t=>{let{id:i}=t;return i===e})))||void 0===t?void 0:t.title}))).join(", ");return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(S5,{title:c("brand.name"),suffixText:N||c("brand.all"),suffixTextTheme:N?"primary":void 0,onClick:()=>{b(!0),o(),r(),y&&u(bn({...f,...y}))},onView:a,visible:i}),(()=>{const e=g.map((e=>{let{id:t,title:i}=e;return{id:t,title:i,value:t}}));return(0,z.jsx)(Z5,{renderNavigation:F,isOpen:_,onSubmit:w,testId:"brand-filter-modal",children:e.length?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(T3,{name:"brand_ids",items:e,selected:t,onItemClick:k,isMultiSelect:!0,disableButtonClicks:!0}),(0,z.jsx)(h.Z,{})]}):(0,z.jsx)(tc.Z,{title:c("brand.empty_state.title"),body:c("brand.empty_state.body")})})})()]})},N5=e=>{let{name:t,selectedSizesIds:i,selectedCatalogs:n,isFilterCellVisible:s,onSizeSelect:r,onShownSizesChange:a,onSubmit:o,onFilterCellClick:l,onFilterCellView:c,onModalOpen:d,onModalClose:u}=e;const g=U("catalog.filters"),{track:x}=vi(),f=(0,p.v9)(kr),[y,_]=(0,m.useState)([]),b=(0,p.v9)(we),j=(0,p.v9)(Vn("dynamic_size_filter")),{catalogs:S}=M3({selectedCatalogs:n,allSizeGroups:f});(0,m.useEffect)((()=>{const e=[];S.forEach((t=>{let{matchingGroups:i}=t;i.forEach((t=>{let{items:i}=t;i.forEach((t=>{let{id:i}=t;e.includes(i)||e.push(i)}))}))})),a(e)}),[S,a]);const Z=e=>()=>{e!==_a&&1!==S.length||u(),_((t=>t.filter((t=>t!==e))))},I=e=>{_((t=>[...t,e]))},C=e=>{i.includes(e)?r(i.filter((t=>t!==e))):r([e,...i])},k=()=>{_([]),u(),o()},w=(e,t)=>()=>{let n=[];e!==_a&&(n=i.filter((e=>!t.includes(e)))),r(n)},P=e=>{I(e.code)},T=(e,t,i)=>()=>(0,z.jsx)(I5,{title:t,icon:(0,z.jsx)(Wy.Z,{name:Qy.Z,testId:"".concat(e,"-size-navigation-prefix-icon")}),prefixAriaLabel:g("a11y.actions.back"),suffixText:g("size.clear_sizes"),onPrefixClick:Z(e),onSuffixClick:w(e,i)}),F=()=>(0,z.jsx)(Wy.Z,{name:b5.Z,color:Wy.Z.Color.GreyscaleLevel3}),N=e=>{const t=e.flatMap((e=>e.items));return(0,v.compact)(i.map((e=>{var i;return null===(i=t.find((t=>{let{id:i}=t;return e===i})))||void 0===i?void 0:i.title}))).join(", ")},L=e=>(0,z.jsx)(j5,{suffixText:N(e),textTheme:"primary",renderSuffix:F});if(!f.length)return null;const E=N(S.flatMap((e=>{let{matchingGroups:t}=e;return t})));return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(S5,{title:g("size.name"),suffixText:E||g("size.all"),suffixTextTheme:E?"primary":void 0,onClick:(O=1===S.length?S[0].code:_a,()=>{I(O),d(),l(),j&&"size_group_sizes"===t&&x(bn({...b,...j}))}),onView:c,visible:s}),y.map((e=>(e=>{const t=S.find((t=>{let{code:i}=t;return i===e})),n=(null==t?void 0:t.title)||g("size.name"),s=null==t?void 0:t.matchingGroups,r=(null==s?void 0:s.flatMap((e=>{let{items:t}=e;return t.map((e=>{let{id:t}=e;return t}))})))||[];return(0,z.jsxs)(Z5,{renderNavigation:T(e,n,r),onSubmit:k,testId:"".concat(e,"-size-filter-modal"),isOpen:!0,children:[s?(0,z.jsx)(F3,{name:"size_group_sizes",groups:s,isMultiSelect:!0,selectedIds:i,onItemClick:C}):(0,z.jsx)(N3,{catalogs:S,onItemClick:P,renderSuffix:L}),(0,z.jsx)(h.Z,{})]},e)})(e)))]});var O},L5=e=>{var t,i;let{learnMoreUrl:n}=e;const s=U("catalog.filters"),r=(0,p.I0)(),{track:a}=vi(),o=(0,p.v9)(Pr),l=(0,p.v9)(yr),c=(0,p.v9)(Sr),d=(0,p.v9)(_r),u=(0,p.v9)(br),g=(0,p.v9)(fr),x=(0,p.v9)(vr),f=(0,p.v9)(Hr),y=(0,p.v9)(Gr),_=(0,p.v9)(ea),b=(0,p.v9)(sa),j=(0,p.v9)(ua),S=(0,p.v9)(Wt("dynamic_size_filter_web")),Z="on"===(null===(t=(0,p.v9)(Vn("dynamic_size_filter")))||void 0===t?void 0:t.variant),I=(0,p.v9)(Wt("dynamic_brand_filter_web")),C="on"===(null===(i=(0,p.v9)(Vn("dynamic_brand_filter")))||void 0===i?void 0:i.variant),k=S&&Z,w=I&&C,[P,T]=(0,m.useState)(!1),[F,N]=(0,m.useState)(!1),[E,O]=(0,m.useState)(c),[R,D]=(0,m.useState)(l),[A,M]=(0,m.useState)({priceFrom:d,priceTo:u}),[B,q]=(0,m.useState)(g),[V,H]=(0,m.useState)(x),G=(0,m.useRef)([]),W=(0,m.useRef)([]),X=(0,v.compact)(R.map((e=>o[e]))),Y=nr(X),K=sr(X),J=e=>_.find((t=>t.type===e)),Q=e=>b.find((t=>t.type===e)),$=e=>j.find((t=>t.type===e)),ee=J("status"),te=Q("status"),ie=$("status"),ne=J("material"),se=Q("material"),re=$("material"),ae=J("size"),oe=Q("size"),le=$("size"),ce=J("video_game_rating"),de=Q("video_game_rating"),ue=$("video_game_rating"),me=J("color"),pe=Q("color"),ge=$("color"),he=J("brand"),xe=Q("brand"),fe=$("brand");(0,m.useEffect)((()=>(window.addEventListener("popstate",ls.sl),()=>{window.removeEventListener("popstate",ls.sl)})),[]);const ye=e=>{G.current=e},ve=(e,t,i,n,s,r)=>{const a=[],o=e||{type:"status",ids:[]},l=t||{type:"material",ids:[]},c=i||{type:"video_game_rating",ids:[]},d=n||{type:"color",ids:[]},u=s||{type:"size",ids:[]},m=r||{type:"brand",ids:[]};return a.push(l),a.push(o),a.push(c),a.push(d),k&&a.push(u),w&&a.push(m),a},_e=()=>{T(!1),W.current=[]},be=()=>{_e(),r(hF.changeFilters({filters:{...A,sortBy:E,catalogIds:R,brandIds:Y?B:[],sizeIds:K?V.filter((e=>G.current.includes(e))):[]}})),r(hF.setSelectedDynamicFilters({selectedDynamicFilters:ve(ie,re,ue,ge,le,fe)}))},je=()=>{be(),a(Ri({target:qm.ApplyFilters,screen:$t.MobileCatalogFilters}))},Se=(e,t)=>()=>{a((e=>{const{filter:t,screen:i,searchSessionId:n,globalSearchSessionId:s,type:r,code:a}=e,o={filter:t,screen:i};return n&&(o.search_session_id=n),s&&(o.global_search_session_id=s),r&&(o.type=r),a&&(o.code=a),{event:"user.click_filter",extra:o}})({filter:e,screen:$t.MobileCatalogFilters,searchSessionId:f,globalSearchSessionId:y,type:t,code:t}))},Ze=(e,t)=>()=>{const i=t||e;W.current.includes(i)||(W.current.push(i),((e,t)=>{a((e=>{const{filter:t,screen:i,searchSessionId:n,globalSearchSessionId:s,type:r,code:a}=e,o={filter:t,screen:i};return n&&(o.search_session_id=n),s&&(o.global_search_session_id=s),r&&(o.type=r),a&&(o.code=a),{event:"user.view_filter",extra:o}})({filter:e,screen:$t.MobileCatalogFilters,searchSessionId:f,globalSearchSessionId:y,type:t,code:t}))})(e,t))},Ie=()=>{_e(),O(c),D(l),M({priceFrom:d,priceTo:u}),q(g),H(x),r(hF.removeTemporarySelectedDynamicFilters()),r(hF.updateTemporaryCatalogIds({temporaryCatalogIds:l})),a(Ri({target:qm.CancelFilters,screen:$t.MobileCatalogFilters}))},Ce=()=>{O(null),D([]),M({priceFrom:null,priceTo:null}),q([]),H([]),r(hF.removeTemporarySelectedDynamicFilters()),r(hF.removeTemporaryCatalogIds()),r(hF.removeTemporarySizeIds()),r(hF.removeTemporaryBrandIds()),r(hF.removeTemporaryPriceRange()),a(Ri({target:qm.ClearFilters,screen:$t.MobileCatalogFilters}))},ke=e=>{D(e),r(hF.setTemporaryCatalogIds({temporaryCatalogIds:e}))},we=e=>{q(e),r(hF.setTemporaryBrandIds({temporaryBrandIds:e}))},Pe=e=>{H(e),r(hF.setTemporarySizeIds({temporarySizeIds:e}))},ze=e=>{M(e),r(hF.setTemporaryPriceRange({priceRange:e}))},Te=(e,t,i,n)=>{n.includes(e)?i===Gs.Multi&&r(hF.removeTemporarySelectedDynamicFilterId({type:t,id:e})):r(hF.setTemporarySelectedDynamicFilter({temporarySelectedDynamicFilter:{type:t,ids:i===Gs.Single?[e]:[...n,e]}}))},Fe=(e,t)=>{null!=t&&t.length?r(hF.removeTemporarySelectedDynamicFilterIds({type:e,ids:t})):r(hF.removeTemporarySelectedDynamicFilter({type:e}))},Ne=e=>{var t;return(null===(t=e.options.find((e=>!!e.type)))||void 0===t?void 0:t.type)||Ws.Default},Le=()=>{N(!0)},Ee=()=>{W.current=[],N(!1)},Oe=(()=>{let e=0;return l.length&&(e+=1),c&&c!==uR.Relevance&&(e+=1),(d||u)&&(e+=1),!w&&g.length&&(e+=1),!k&&x.length&&(e+=1),null!=te&&te.ids.length&&(e+=1),null!=se&&se.ids.length&&(e+=1),null!=de&&de.ids.length&&(e+=1),null!=pe&&pe.ids.length&&(e+=1),k&&null!=oe&&oe.ids.length&&(e+=1),w&&null!=xe&&xe.ids.length&&(e+=1),e})();return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Jw.j,{prefix:(0,z.jsx)(ht.Z,{name:"filters",size:ht.Z.Size.Small}),text:s("mobile.filters_chip_text",{count:Oe?"(".concat(Oe,")"):null}),textType:xt.Z.Type.Subtitle,activated:!!Oe,onClick:()=>{T(!0),r(hF.setTemporarySelectedDynamicFilters({temporarySelectedDynamicFilters:ve(te,se,de,pe,oe,xe)})),r(hF.updateTemporaryCatalogIds({temporaryCatalogIds:l})),a(Ri({target:qm.SelectFilters}))},testId:"trigger"}),(0,z.jsxs)(Z5,{isOpen:P,testId:"modal",renderNavigation:()=>(0,z.jsx)(I5,{title:s("mobile.filters_screen.title"),icon:(0,z.jsx)(Wy.Z,{name:$y.Z}),prefixAriaLabel:s("a11y.actions.close"),suffixText:s("mobile.filters_screen.actions.clear_filters"),testId:"modal-navigation",onPrefixClick:Ie,onSuffixClick:Ce}),onSubmit:je,children:[(()=>{const e={isFilterCellVisible:!F,onModalOpen:Le,onModalClose:Ee};return(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[(0,z.jsx)(P5,{learnMoreUrl:n,selectedOption:E,onOptionClick:O,onSubmit:je,onFilterCellClick:Se(_5.Sort),onFilterCellView:Ze(_5.Sort),...e}),(0,z.jsx)(z5,{allCatalogs:o,selectedCatalogsIds:R,onCatalogSelect:ke,onSubmit:je,onFilterCellClick:Se(_5.Category),onFilterCellView:Ze(_5.Category),...e}),k?ae&&(0,z.jsx)(C5,{type:ae.type,title:ae.title,selectionType:ae.selectionType,isSelectionHighlighted:ae.isSelectionHighlighted,isNewFilter:ae.isNewFilter,options:ae.options,fromScreen:$t.MobileCatalogFilters,rootOptionType:Ne(ae),onSubmit:be,onFilterCellClick:Se(_5.Dynamic,ae.type),onFilterCellView:Ze(_5.Dynamic,ae.type),selectedIds:(null==le?void 0:le.ids)||[],clearSelectedOptions:Fe,onListOptionSelect:e=>{Te(e,ae.type,ae.selectionType,(null==le?void 0:le.ids)||[])},...e}):K&&(0,z.jsx)(N5,{name:"size_group_sizes",selectedSizesIds:V,selectedCatalogs:X,onSizeSelect:Pe,onShownSizesChange:ye,onSubmit:je,onFilterCellClick:Se(_5.Size),onFilterCellView:Ze(_5.Size),...e}),w?he&&(0,z.jsx)(w5,{type:he.type,title:he.title,selectionType:he.selectionType,isSelectionHighlighted:he.isSelectionHighlighted,options:he.options,fromScreen:$t.MobileCatalogFilters,translations:he.searchTranslations,rootOptionType:Ne(he),onSubmit:be,onFilterCellClick:Se(_5.Dynamic,he.type),onFilterCellView:Ze(_5.Dynamic,he.type),selectedIds:(null==fe?void 0:fe.ids)||[],clearSelectedOptions:Fe,onListOptionSelect:e=>{Te(e,he.type,he.selectionType,(null==fe?void 0:fe.ids)||[])},...e}):Y&&(0,z.jsx)(F5,{selectedBrandsIds:B,onBrandSelect:we,onSubmit:je,onFilterCellClick:Se(_5.Brand),onFilterCellView:Ze(_5.Brand),...e}),ce&&(0,z.jsx)(C5,{type:ce.type,title:ce.title,selectionType:ce.selectionType,isSelectionHighlighted:ce.isSelectionHighlighted,isNewFilter:ce.isNewFilter,options:ce.options,fromScreen:$t.MobileCatalogFilters,rootOptionType:Ne(ce),onSubmit:be,onFilterCellClick:Se(_5.Dynamic,ce.type),onFilterCellView:Ze(_5.Dynamic,ce.type),selectedIds:(null==ue?void 0:ue.ids)||[],clearSelectedOptions:Fe,onListOptionSelect:e=>{Te(e,ce.type,ce.selectionType,(null==ue?void 0:ue.ids)||[])},...e}),ee&&(0,z.jsx)(C5,{type:ee.type,title:ee.title,selectionType:ee.selectionType,isSelectionHighlighted:ee.isSelectionHighlighted,isNewFilter:ee.isNewFilter,options:ee.options,fromScreen:$t.MobileCatalogFilters,rootOptionType:Ne(ee),onSubmit:be,onFilterCellClick:Se(_5.Dynamic,ee.type),onFilterCellView:Ze(_5.Dynamic,ee.type),selectedIds:(null==ie?void 0:ie.ids)||[],clearSelectedOptions:Fe,onListOptionSelect:e=>{Te(e,ee.type,ee.selectionType,(null==ie?void 0:ie.ids)||[])},...e}),me&&(0,z.jsx)(C5,{type:me.type,title:me.title,selectionType:me.selectionType,isSelectionHighlighted:me.isSelectionHighlighted,isNewFilter:me.isNewFilter,options:me.options,fromScreen:$t.MobileCatalogFilters,rootOptionType:Ne(me),onSubmit:be,onFilterCellClick:Se(_5.Dynamic,me.type),onFilterCellView:Ze(_5.Dynamic,me.type),selectedIds:(null==ge?void 0:ge.ids)||[],clearSelectedOptions:Fe,onListOptionSelect:e=>{Te(e,me.type,me.selectionType,(null==ge?void 0:ge.ids)||[])},...e}),(0,z.jsx)(T5,{selectedPriceRange:A,onPriceRangeChange:ze,onSubmit:je,onFilterCellClick:Se(_5.Price),onFilterCellView:Ze(_5.Price),...e}),ne&&(0,z.jsx)(C5,{type:ne.type,title:ne.title,selectionType:ne.selectionType,isSelectionHighlighted:ne.isSelectionHighlighted,isNewFilter:ne.isNewFilter,options:ne.options,fromScreen:$t.MobileCatalogFilters,rootOptionType:Ne(ne),onSubmit:be,onFilterCellClick:Se(_5.Dynamic,ne.type),onFilterCellView:Ze(_5.Dynamic,ne.type),selectedIds:(null==re?void 0:re.ids)||[],clearSelectedOptions:Fe,onListOptionSelect:e=>{Te(e,ne.type,ne.selectionType,(null==re?void 0:re.ids)||[])},...e})]})})(),(0,z.jsx)(h.Z,{})]})]})};var E5=i(62193);const O5=e=>{let{show:t,onConfirmOrClose:i}=e;const n=U("catalog.search_results.ranking_modal"),{track:s}=vi(),r=()=>{s(Ri({target:qm.PushUpLearnMore}))};return(0,z.jsx)(cp.Z,{enableCloseButton:!0,hasScrollableContent:!0,className:"search-results-ranking-modal",body:(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Tight,children:[(0,z.jsx)(xt.Z,{text:n("subtitle"),type:xt.Z.Type.Title}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(xt.Z,{html:!0,text:n("body.one"),type:xt.Z.Type.Body}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(xt.Z,{html:!0,text:n("body.two"),type:xt.Z.Type.Body}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)("a",{href:Me.Nc0,onClick:()=>{s(Ri({target:qm.HelpCenterSearchResult}))},target:"_blank",rel:"noreferrer",children:n("link")}),(0,z.jsx)(x.Z,{size:x.Z.Size.X3Large}),(0,z.jsx)(xt.Z,{text:n("bumps.subtitle"),type:xt.Z.Type.Title}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(xt.Z,{html:!0,text:n("bumps.body"),type:xt.Z.Type.Body}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(_p,{type:bp.PushUp,accessChannel:Be.Si.ProductLink,render:e=>(0,z.jsx)("a",{"data-testid":"bumps-faq-link",href:e,onClick:r,target:"_blank",rel:"noreferrer",children:n("bumps.link")})}),(0,z.jsx)(x.Z,{size:x.Z.Size.X3Large}),(0,z.jsx)(ic.I,{text:n("actions.confirm"),styling:ic.I.Styling.Filled,size:ic.I.Size.Medium,onClick:i}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium})]}),defaultCallback:i,show:t,testId:"search-results-ranking-modal",title:n("title")})},R5=()=>{const e=(0,p.v9)(ml),t=(0,p.v9)(gl);if(!e)return null;if(t)return null;const i=e>500?"".concat(500,"+"):e;return(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:(0,z.jsx)(wx,{id:"catalog.item_count",pluralize:!0,count:e,values:{count:i}})})},D5=e=>{let{learnMoreUrl:t}=e;const{track:i}=vi(),n=U("catalog.search_results"),s=(0,p.v9)(ml),[r,a]=(0,m.useState)(!1);return s?(0,z.jsxs)("div",{className:"u-ui-padding-vertical-medium u-flexbox u-justify-content-between u-align-items-center",children:[(0,z.jsx)(R5,{}),t&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(ic.I,{inline:!0,icon:(0,z.jsx)(Wy.Z,{name:E5.Z}),iconColor:Wy.Z.Color.GreyscaleLevel3,iconPosition:ic.I.IconPosition.Right,onClick:()=>{i(Ri({target:qm.CatalogSearchResultsRanking})),a(!0)},styling:ic.I.Styling.Flat,testId:"search_results_ranking_link",theme:"muted",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:n("learn_more_link")})}),(0,z.jsx)(O5,{show:r,onConfirmOrClose:()=>{a(!1)}})]})]}):null},A5=e=>{let{learnMoreUrl:t}=e;const i=E(),{relativeUrl:n,searchParams:s}=xc(),r=(0,p.I0)(),a=(0,p.v9)(X),o=(0,p.v9)(ye),l=(0,p.v9)(gr),c=(0,p.v9)(ve),d=(0,p.v9)(Wt("web_catalog_client_side_fetching")),u=(0,p.v9)(Wn),g=(0,p.v9)(ZX),f=c||o;Xn({abTestName:"vas_gallery_iteration1_v2",shouldTrackExpose:!0}),(0,m.useEffect)((()=>{d&&r(hF.fetchDataRequest({relativeUrl:n,searchParams:s}))}),[d,r,n,s]);const y=e=>t=>{$4(t,e)};return l===Ne.Pending&&d?(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center",children:(0,z.jsx)(Dp.Z,{testId:"catalog-page-loader"})}):l===Ne.Failure&&d?(0,z.jsx)(tc.Z,{title:(0,z.jsx)(wx,{id:"catalog.generic_error.title"}),body:(0,z.jsx)(wx,{id:"catalog.generic_error.body"}),action:(0,z.jsx)(ic.I,{text:(0,z.jsx)(wx,{id:"catalog.generic_error.cta"}),styling:ic.I.Styling.Filled,onClick:()=>{r(hF.fetchDataRequest({relativeUrl:n,searchParams:s}))}})}):(0,z.jsxs)(z.Fragment,{children:[(()=>{const e=(0,z.jsx)("nav",{children:(0,z.jsx)(v3,{truncate:!0})});return i.phones?(0,z.jsxs)(z.Fragment,{children:[e,(0,z.jsx)(_3,{truncate:!0}),(0,z.jsx)(x.Z,{}),(0,z.jsxs)(cc,{FallbackComponent:cc.ComponentError,preventLog:!0,onError:y(J4.MobileFilters),children:[(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column u-margin-right-auto",children:[(0,z.jsx)(p3,{}),(0,z.jsx)(x.Z,{})]}),(0,z.jsx)("div",{className:"u-flexbox u-align-items-flex-start",children:(0,z.jsx)(L5,{learnMoreUrl:t})})]}),(0,z.jsx)(D5,{learnMoreUrl:t})]})]}):(0,z.jsxs)(z.Fragment,{children:[e,(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsxs)("div",{className:"u-margin-right-auto",children:[(0,z.jsx)("div",{children:(0,z.jsx)("div",{className:"u-inline-block u-ui-margin-right-regular",children:(0,z.jsx)(_3,{})})}),(0,z.jsx)("div",{className:"u-ui-margin-top-small",children:(0,z.jsx)(p3,{})})]}),(0,z.jsx)("div",{className:"u-tablets-up-only u-flexbox u-align-items-flex-end",children:(0,z.jsx)(l1,{})})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsxs)(cc,{FallbackComponent:cc.ComponentError,preventLog:!0,onError:y(J4.Filters),children:[(0,z.jsx)(u4,{learnMoreUrl:t}),(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),(0,z.jsx)(y5,{}),(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(x.Z,{size:x.Z.Size.XSmall}),(0,z.jsx)(v5,{}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(D5,{learnMoreUrl:t})]})]})})(),(0,z.jsxs)("div",{className:"u-flexbox u-justify-content-between",children:[(0,z.jsx)("div",{className:"u-flexbox",children:(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),children:[c&&(0,z.jsx)(p4,{}),a&&o&&(0,z.jsx)(m4,{})]})}),f&&(0,z.jsx)(j4,{})]}),u&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(c3,{})]}),g.visible&&(0,z.jsx)(m3,{}),(0,z.jsx)(x.Z,{size:i.phones?x.Z.Size.Small:x.Z.Size.Medium}),(0,z.jsxs)(cc,{FallbackComponent:cc.ComponentError,preventLog:!0,onError:y(J4.Items),children:[(0,z.jsx)(a5,{}),(0,z.jsx)(l5,{})]})]})},M5=e=>{let{isOpen:t,title:i,text:n,onClose:s}=e;const r=U("settings.security.error.too_many_mismatches");return(0,z.jsx)(cp.Z,{show:t,children:(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(xt.Z,{alignment:xt.Z.Alignment.Center,type:xt.Z.Type.Heading,width:xt.Z.Width.Parent,text:i}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(xt.Z,{text:n}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(ic.I,{text:r("button"),styling:ic.I.Styling.Filled,onClick:s})]})})};var U5;!function(e){e.CurrentPhone="current_phone",e.NewPhone="number"}(U5||(U5={}));const B5=e=>{let{transactionId:t,show:i,onCancel:n}=e;const s=U("kyc_form.confirm_identity_modal"),{track:r}=vi();return(0,m.useEffect)((()=>{i&&r(Xi({screen:$t.KycConfirmIdentityModal,details:t}))}),[i,r,t]),(0,z.jsx)(cp.Z,{show:i,title:s("title"),body:(0,z.jsx)(xt.Z,{html:!0,text:s("body")}),actions:[{text:s("buttons.confirm"),callback:()=>{r(Di({target:qm.KycConfirmIdentity,details:t})),(0,ls.ru)(Me.c8F)},style:cp.Z.ActionStyling.Filled},{text:s("buttons.not_now"),callback:()=>n(),style:cp.Z.ActionStyling.Flat}]})};class q5 extends m.Component{render(){const{breakpoints:e,breakpoint:t}=this.props;return e[t]?null:this.props.children}}const V5=F(q5),H5=e=>{let{withEventListeners:t,transactionId:i,screen:n,isModalOpened:s}=e;const r=(0,m.useRef)(null),a=(0,m.useRef)(null),{track:o}=vi();(0,m.useEffect)((()=>{s&&(r.current=new Date,a.current=new Date)}),[s]);const l=(0,m.useCallback)((()=>{if("undefined"!=typeof document&&"undefined"!=typeof window){if(document.hidden&&i&&r.current&&(!0===s||void 0===s)){const e=new Date;if(e.getTime()-r.current.getTime()<=1e3)return;o(An({screen:n,duration:e.getTime()-r.current.getTime(),timestamp:{utcTimeFrom:r.current.toISOString(),utcTimeTo:e.toISOString()},transactionId:i}))}document.hidden||(r.current=new Date,a.current=new Date)}}),[s,n,o,i]),c=(0,m.useCallback)((e=>{if(!i||!a.current)return;const t=new Date;t.getTime()-a.current.getTime()<=1e3||(o(An({screen:e||n,duration:t.getTime()-a.current.getTime(),timestamp:{utcTimeFrom:a.current.toISOString(),utcTimeTo:t.toISOString()},transactionId:i})),a.current=new Date,r.current=new Date)}),[n,o,i]);return(0,m.useEffect)((()=>{if(t)return document.addEventListener("visibilitychange",l),window.addEventListener("beforeunload",l),r.current=new Date,()=>{document.removeEventListener("visibilitychange",l),window.removeEventListener("beforeunload",l)}}),[l,t]),c},G5=()=>{const e=U("checkout.order"),{phones:t}=E(),i=(0,p.v9)(Nc),n=(0,p.v9)(qv),s=(0,p.v9)(d_),r=(0,p.v9)(e_),a=null==n?void 0:n.base.price;if(!a||0===s.length)return null;const o=()=>(0,z.jsx)(xt.Z,{text:Ua(a,i),bold:!0,theme:"amplified"});return(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Tight,disabled:r,children:[(0,z.jsx)(yt.Z,{type:yt.Z.Type.Leading,styling:t?yt.Z.Styling.Default:yt.Z.Styling.Wide,text:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:e("title")})}),s.length>1?(()=>{const t=s.length;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,as:"h4",text:e("bundle")}),body:(0,z.jsx)(wx,{id:"checkout.order.items",pluralize:!0,count:t,values:{count:t}}),suffix:o()}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,body:s.map((e=>(0,z.jsxs)(m.Fragment,{children:[(0,z.jsx)(Kl.U,{src:e.thumbnailUrl,size:Kl.U.Size.Large,styling:Kl.U.Styling.Rounded,alt:e.title}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Medium})]},e.id)))})]})})():(()=>{const e=(0,v.first)(s);return e?(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,prefix:(0,z.jsx)(Kl.U,{src:e.thumbnailUrl,size:Kl.U.Size.Large,styling:Kl.U.Styling.Rounded,alt:e.title}),title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,as:"h4",text:e.title}),body:(0,v.compact)([e.size,e.status,e.brand]).join("  "),suffix:o()}):null})()]})},W5=(e,t,i)=>{const n=e.filter((e=>e.carrierCode===(null==t?void 0:t.carrierCode)));return i&&n.length>1?n.find((e=>e.serviceType===i)):n[0]},X5=(e,t)=>e.price.amount<t.price.amount?e.price:t.price,Y5=(e,t)=>{const i=null==t?void 0:t.find((t=>t.carrierCode===(null==e?void 0:e.carrierCode)&&t.serviceType===nv.Economy)),n=null==t?void 0:t.find((t=>t.carrierCode===(null==e?void 0:e.carrierCode)&&t.serviceType===nv.Standard));return i&&n?{economyShippingOption:i,standardShippingOption:n,cheapestPrice:X5(i,n)}:null},K5=()=>{const e=(0,p.I0)(),t=U("checkout.address"),{phones:i}=E(),{track:n}=vi(),s=(0,p.v9)(gZ.getAddress),r=(0,p.v9)(gZ.getTransactionId),a=(0,p.v9)(gZ.getCheckoutDataUiState),o=(0,p.v9)(gZ.getIsPaymentProcessing),l=(0,p.v9)(gZ.getIsAddressCompleted),c=(0,p.v9)((e=>gZ.getFieldError(e,_y.Address))),d=(0,p.v9)(gZ.getPickupPoint),u=(0,p.v9)(gZ.getRateUuid),g=(e=>Yg.map((t=>({field:t.field,required:t.required,trackingEvent:$i({screen:$t.BillingAddressUpdate,target:t.field,transactionId:e,valid:!0})}))))(r),h=EZ(a),x=EZ(s),[f,y]=(0,m.useState)(!1),[_,b]=(0,m.useState)(null==d?void 0:d.code),j=H5({withEventListeners:!0,transactionId:r,screen:$t.BillingAddressUpdate,isModalOpened:f}),S=()=>y(!1);(0,m.useEffect)((()=>{h===Ne.Pending&&a===Ne.Success&&S()}),[h,a]),(0,m.useEffect)((()=>{r&&(f||j())}),[f,j,r]),(0,m.useEffect)((()=>{(0,v.isEqual)(x,s)||b(null)}),[x,s,_]);const Z=()=>{c&&e(mZ.removeFieldError({fieldName:_y.Address}))},I=()=>{r&&n(nn({transactionId:r,screen:$t.BillingAddressUpdate})),Z(),y(!0)};return(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Tight,disabled:o,id:_y.Address,children:[(0,z.jsx)(yt.Z,{type:yt.Z.Type.Leading,styling:i?yt.Z.Styling.Default:yt.Z.Styling.Wide,text:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:t("title")})}),l?(0,z.jsx)(A_,{styling:gt.Z.Styling.Wide,type:gt.Z.Type.Navigating,address:s,suffix:(0,z.jsx)(ht.Z,{name:"pencil",color:ht.Z.Color.GreyscaleLevel3,aria:{"aria-hidden":"true"}}),onClick:I,validation:c}):(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,title:t("empty.title"),suffix:(0,z.jsx)(ht.Z,{name:"plus",aria:{"aria-hidden":"true"}}),type:gt.Z.Type.Navigating,onClick:I,validation:c,testId:"address-details"}),(0,z.jsx)($I,{isOpen:f,address:s,translationPrefix:"checkout.address.modal",transactionId:r,addressFormType:Xg.tv.CheckoutAddress,fieldConfiguration:g,isPending:a===Ne.Pending,screenTrackingType:bI.Escrow,onSubmit:t=>{let{id:i}=t;Z(),r&&e(mZ.updateCheckoutDataRequest({transactionId:r,updatedCheckoutData:{toAddressId:i,pickupPointCode:_,rateUuid:u}}))},onClose:S})]})},J5=e=>{let{transactionId:t,uiState:i,deliveryTypes:n,selectedDeliveryType:s}=e;const r=U("checkout.shipping.delivery_options"),a=(0,p.I0)(),o=E(),{track:l}=vi(),c=(0,p.v9)(Nc),d=(0,p.v9)(gZ.getDeliveryTypesSize),u=(0,p.v9)(gZ.getCheckoutDataUiState)===Ne.Pending,m=(0,p.v9)(gZ.getRateUuid),g=!(1!==d||!(null!=n&&n.home||null!=n&&n.pickup)),h=()=>u?null:i===Ne.Pending?(0,z.jsx)("div",{className:"u-ui-padding-large u-flexbox u-justify-content-center",children:(0,z.jsx)(Dp.Z,{size:Dp.Z.Size.XLarge})}):(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(xt.Z,{text:r("empty_state.title"),type:xt.Z.Type.Title,width:xt.Z.Width.Parent}),(0,z.jsx)(xt.Z,{text:r("empty_state.body"),theme:"warning",type:xt.Z.Type.Caption,width:xt.Z.Width.Parent})]}),f=(e,t,i)=>t?(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center",children:[(0,z.jsx)("div",{className:"u-nowrap",children:(0,z.jsx)(xt.Z,{text:i})}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(qx.J,{name:"delivery_option_type",checked:s===e})]}):i,y=(e,i)=>()=>{e!==s&&i&&(e!==yy.PickupPoint&&a(mZ.removeFieldError({fieldName:_y.PickupPoint})),t&&(a(mZ.updateCheckoutDataRequest({transactionId:t,updatedCheckoutData:{deliveryType:e,rateUuid:m}})),(e=>{const i=$i({screen:$t.Checkout,target:"delivery_type",transactionId:null!=t?t:void 0,valid:null,targetDetails:e===yy.Home?vy.Home:"pick_up"});l(i)})(e)))},_=e=>{let{price:t,isExact:i}=e;const n=Ua(t,c);return i?n:r("price_from",{price:n})},b=e=>{const{priceLabel:t,deliveryOption:i,deliveryType:n}=e,s=1!==d,a=(e=>{switch(e){case vy.Pickup:return"location-pin";case vy.Home:return"home";default:return null}})(i);return(0,z.jsx)(gt.Z,{type:s?gt.Z.Type.Navigating:void 0,prefix:a&&(0,z.jsx)(ht.Z,{name:a,color:ht.Z.Color.GreyscaleLevel3,aria:{"aria-hidden":"true"}}),body:(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column",children:[(0,z.jsx)(xt.Z,{text:r(i),type:xt.Z.Type.Title}),(0,z.jsx)(xt.Z,{text:t,theme:"muted"})]}),suffix:f(n,s),onClick:y(n,s),testId:"delivery-option-".concat(i)},i)};return g?null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{type:yt.Z.Type.Leading,styling:o.phones?yt.Z.Styling.Default:yt.Z.Styling.Wide,text:r("label")}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,children:(0,z.jsx)(Lt.Z,{styling:Lt.Z.Styling.Tight,children:(()=>{if(!n)return h();const e=Object.keys(n).map((e=>{const{home:t,pickup:i,custom:s}=n;switch(e){case vy.Home:return(e=>{if(!e)return null;const{price:t,deliveryType:i,shippingOptions:n}=e,s=_({price:t,isExact:(0,v.size)(n)<=1});return b({deliveryOption:vy.Home,deliveryType:i,priceLabel:s})})(t);case vy.Pickup:return(e=>{if(!e)return null;const{price:t,deliveryType:i,containsDifferentPrices:n}=e,s=_({price:t,isExact:!n});return b({deliveryOption:vy.Pickup,deliveryType:i,priceLabel:s})})(i);case vy.Custom:return(e=>{if(!e)return null;const t=Ua(e.price,c);return(0,z.jsx)(gt.Z,{body:(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column",children:[(0,z.jsx)(xt.Z,{text:r("custom"),type:xt.Z.Type.Title}),(0,z.jsx)(xt.Z,{text:t,theme:"muted"})]})},"custom")})(s);case vy.Meetup:return(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{text:r("meetup"),type:xt.Z.Type.Title})},"meetup");default:return h()}}));return 1===d?e:(0,z.jsx)(kp,{children:e})})()})})]})};let Q5;!function(e){e.Map="map",e.List="list"}(Q5||(Q5={}));const $5="/assets/shipping/pickup-placeholder.svg",e7=e=>{let{show:t,shippingPoint:i,onClick:n,id:s}=e;return t?(0,z.jsx)("div",{className:"pickup-point-map__info-window",children:(0,z.jsx)(g.Z,{styling:g.Z.Styling.Lifted,testId:"carrier-info-window-".concat(s),children:(0,z.jsx)("div",{className:"u-overflow-hidden",children:(0,z.jsxs)(gt.Z,{type:gt.Z.Type.Navigating,onClick:n,prefix:(0,z.jsx)(Kl.U,{src:i.photoUrl||$5,fallbackSrc:$5,size:Kl.U.Size.XLarge,styling:Kl.U.Styling.Rounded,alt:""}),children:[(0,z.jsx)(xt.Z,{text:i.name,type:xt.Z.Type.Title,width:xt.Z.Width.Parent,truncate:!0}),(0,z.jsx)(xt.Z,{text:(0,v.compact)([i.addressLine1,i.addressLine2]).join(", "),width:xt.Z.Width.Parent,truncate:!0}),(0,z.jsx)(xt.Z,{text:(0,v.compact)([i.postalCode,i.city]).join(", "),width:xt.Z.Width.Parent,truncate:!0})]})})})}):null},t7="/assets/shipping/carrier-placeholder.svg",i7=e=>{let{lat:t,lng:i,shippingPoint:n,isActive:s,isMouseOverListElement:r,shippingOption:a,onClick:o,id:l}=e;const c=E(),d=e=>{e.stopPropagation(),o(n)},u=e=>s?ht.Z.Color.GreyscaleLevel1:e?ht.Z.Color.GreyscaleLevel6:ht.Z.Color.GreyscaleLevel7,m=()=>{const e=null==a?void 0:a.carrierIconUrl;return(0,z.jsx)("div",{className:"pickup-point-map__location-pin__carrier-icon",children:(0,z.jsx)(Kl.U,{src:e||t7,fallbackSrc:t7,size:Kl.U.Size.Small,alt:""})})},p=e=>{const t=e||r,i=y()("pickup-point-map__location-pin--medium",{"pickup-point-map__location-pin--medium--active":s,"pickup-point-map__location-pin--hovered":t});return(0,z.jsxs)("div",{className:i,onClick:d,children:[(0,z.jsx)("div",{className:"pickup-point-map__location-pin-background",children:(0,z.jsx)(ht.Z,{name:"pickup-point-background",size:ht.Z.Size.Medium,color:u(t),aria:{"aria-hidden":"true"},testId:"carrier-icon-".concat(l)})}),m()]})};return(0,z.jsx)(SZ,{children:e=>{let{isMouseOverElement:t}=e;const{desktops:i}=c,s=!!i&&t;return(0,z.jsxs)("div",{className:"u-position-relative",children:[(0,z.jsx)(e7,{shippingPoint:n,show:s,onClick:d,id:l}),p(s)]})}})},n7=e=>{let{googleApiKey:t,hoveredShippingPoint:i,currentLocation:n,addressCoordinates:s,onMapClick:r,onMarkerClick:a}=e;const{track:o}=vi(),l=(0,p.I0)(),c=(0,m.useRef)(),d=(0,p.v9)(gZ.getTransactionId),u=(0,p.v9)(gZ.getNearbyPoints),g=(0,p.v9)(gZ.getPickupModalUiState),h=(0,p.v9)((e=>gZ.getIsPickupModalElementLoaded(e,by.Modal))),x=(0,p.v9)(gZ.getShippingOptions),f=(0,p.v9)(gZ.getCountryBounds),y=(0,p.v9)(gZ.getSelectedShippingPoint),[_,b]=(0,m.useState)(void 0),[j,S]=(0,m.useState)(n),[Z,I]=(0,m.useState)(!1),C=EZ(u),k=EZ(g),w=(0,m.useCallback)((()=>{if(!u.length)return null;const e=new google.maps.LatLngBounds;return u.forEach((t=>{let{point:i}=t;const n=Number(i.latitude),s=Number(i.longitude);e.extend(_Z({latitude:n,longitude:s}))})),e}),[u]),P=(0,m.useCallback)((()=>{const e=w();e&&(null==_||_.fitBounds(e))}),[w,_]),T=(0,m.useCallback)((()=>{_&&google.maps.event.addDomListenerOnce(_,"idle",(()=>{google.maps.event.addDomListener(window,"resize",(()=>{P()})),google.maps.event.addListener(_,"dragend",(()=>{I(!0)})),google.maps.event.addListener(_,"zoom_changed",(()=>{I(!0)})),google.maps.event.addListener(_,"click",(()=>{c.current=setTimeout(r,200)})),google.maps.event.addListener(_,"dblclick",(()=>{c.current&&clearTimeout(c.current)}))}))}),[P,_]);(0,m.useEffect)((()=>{!function(){let e=w();if(!e){if(!f)return;e=new window.google.maps.LatLngBounds(_Z(f.bottomLeft),_Z(f.topRight))}null==_||_.fitBounds(e)}(),T()}),[u,_,T,w,f]),(0,m.useEffect)((()=>{(0,v.isEmpty)(u)&&!j&&h&&I(!0)}),[j,h,u]),(0,m.useEffect)((()=>{d&&o(nn({transactionId:d,screen:$t.PickupPointMap}))}),[o,d]),(0,m.useEffect)((()=>{y&&(null==_||_.setCenter(_Z({latitude:Number(y.latitude),longitude:Number(y.longitude)})))}),[_,y]);const F=(0,m.useCallback)((()=>{if(!_)return;const e=new google.maps.Circle({center:_.getCenter(),radius:15e3}).getBounds();e&&(_.fitBounds(e),I(!1))}),[_]);(0,m.useEffect)((()=>{Object.keys(g).forEach((e=>{const t=g[e];k&&t===Ne.Failure&&t!==k[e]&&(e===by.UserLocation&&j&&(null==_||_.setCenter(_Z(j))),F())}))}),[F,g,k,j,_]),(0,m.useEffect)((()=>{(0,v.isEqual)(C,u)||(P(),I(!1))}),[u,C,P]);const N=e=>{a(e),(e=>{(e=>{const t=W5(x,e),i=$i({screen:$t.PickupPointMap,transactionId:d||void 0,target:"shipping_option",valid:null,targetDetails:(null==t?void 0:t.carrierCode)||void 0});o(i)})(e),(e=>{const t=$i({screen:$t.PickupPointMap,transactionId:d||void 0,target:"drop_off_point",valid:null,targetDetails:e.name});o(t)})(e)})(e)};return f?(0,z.jsxs)("div",{className:"u-position-relative u-fill-height u-fill-width",children:[(0,z.jsx)("div",{className:"pickup-point-map",children:(0,z.jsxs)(tj,{googleApiKey:t,defaultCenter:{lat:f.center.latitude||0,lng:f.center.longitude||0},defaultZoom:4,mapOptions:{disableDefaultUI:!0,clickableIcons:!1,minZoom:3,gestureHandling:"greedy",scaleControl:!0},onMapLoaded:e=>{b(e),P()},useGoogleInternalApi:!0,children:[s?(0,z.jsx)(ij,{lat:s.latitude,lng:s.longitude}):null,j?(0,z.jsx)(nj,{lat:j.latitude,lng:j.longitude}):null,(()=>{const e=[...u].reverse();return null==e?void 0:e.map(((e,t)=>{let{point:n}=e;const s=W5(x,n);return(0,z.jsx)(i7,{lat:Number(n.latitude),lng:Number(n.longitude),shippingPoint:n,isActive:(null==y?void 0:y.code)===n.code,isMouseOverListElement:(null==i?void 0:i.code)===n.code,shippingOption:s,onClick:N,id:t},"".concat(n.code,"_").concat(t))}))})()]})}),(0,z.jsx)(yZ,{onZoomIn:()=>{if(!_)return;const e=_.getZoom();e&&_.setZoom(e+1)},onZoomOut:()=>{if(!_)return;const e=_.getZoom();e&&_.setZoom(e-1)},onLocationResponse:e=>{S(e),I(!1),(e=>{l(hZ.fetchNearbyPointsByElementRequest({coordinates:e,element:by.UserLocation,shouldLabelNearestPoints:!0}))})(e)}}),(0,z.jsx)(vZ,{show:Z,uiState:g[by.SearchArea],onClick:()=>{(()=>{const e=Ri({screen:$t.PickupPointMap,target:qm.SearchThisArea,targetDetails:JSON.stringify({transactionId:d})});o(e)})();const e=null==_?void 0:_.getCenter();e&&(I(!1),l(hZ.fetchNearbyPointsByElementRequest({coordinates:{latitude:e.lat(),longitude:e.lng()},element:by.SearchArea,shouldLabelNearestPoints:!1})))}}),g[by.Modal]===Ne.Pending&&(0,z.jsx)("div",{className:"pickup-point-map__loader",children:(0,z.jsx)(Dp.Z,{size:Dp.Z.Size.Large,styling:Dp.Z.Styling.Lifted})})]}):null};let s7,r7;!function(e){e.Warning="warning",e.Severe="severe"}(s7||(s7={})),function(e){e.Nearby="nearby_carriers",e.Distant="distant_carriers",e.Unknown="unknown_distance_carriers"}(r7||(r7={}));const a7="/assets/shipping/carrier-placeholder.svg",o7=e=>{let{carrierIconUrl:t,title:i,restriction:n,valueProposition:s,price:r,discount:a,lowestPriceIn30Days:o,priceBeforeDiscount:l,shippingPoint:c,suffix:d,highlighted:u,navigating:g,chevron:h,testId:f,itemOfflineVerificationEnabled:y,onClick:_=v.noop,trackableScreen:b,isMultiplePrices:j}=e;const{track:S}=vi(),Z=U("checkout.shipping.delivery_details.offline_authenticity"),I=U("checkout.shipping.pickup_point_modal.pickup_point_details"),C=(0,p.v9)(Nc),k=(0,p.v9)(gZ.getTransactionId),[w,P]=(0,m.useState)(!1),T=(e,t,i,n)=>(0,z.jsxs)("div",{className:"u-flexbox u-gap-medium",children:[(0,z.jsx)(ht.Z,{name:e,size:ht.Z.Size.Small,color:null!=n?n:ht.Z.Color.GreyscaleLevel4,testId:i&&"".concat(i,"-icon")}),(0,z.jsx)(xt.Z,{text:t,type:xt.Z.Type.Subtitle,testId:i&&"".concat(i,"-text")})]}),F=e=>{S(Ri({screen:b,target:qm.ShippingDiscountDetails,targetDetails:JSON.stringify({transaction_id:k})})),e.stopPropagation(),P(!0)},N=()=>{S((e=>{const{screen:t,transactionId:i}=e;return{event:"buyer.view_carrier_discounted_shipping_price",extra:{screen:t,transaction_id:i}}})({screen:b,transactionId:k}))};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{title:null!=a&&a.percent?(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,theme:"transparent",prefix:(0,z.jsx)(Kl.U,{src:t,fallbackSrc:a7,size:Kl.U.Size.Regular,alt:""}),body:(0,z.jsx)(xt.Z,{text:(0,z.jsxs)(z.Fragment,{children:[i,(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)(xt.Z,{text:"(-".concat(a.percent,"%)"),theme:"warning",testId:"discount-percent"})]}),type:xt.Z.Type.Title,testId:"pick-up-point--carrier-title"})}):(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,theme:"transparent",prefix:(0,z.jsx)(Kl.U,{src:t,fallbackSrc:a7,size:Kl.U.Size.Regular,alt:""}),body:(0,z.jsx)("div",{className:"u-flexbox u-align-items-center u-gap-medium",children:(0,z.jsx)(xt.Z,{text:i,type:xt.Z.Type.Title,testId:"pick-up-point--carrier-title"})})}),body:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,body:(()=>{if(!r)return null;if(!l&&j){const e=Ua(r,C),t=I("price_from",{value:e});return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(xt.Z,{text:t,type:xt.Z.Type.Body})]})}return l?(0,z.jsx)(Jp.h,{onEnter:N,children:(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center",children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(xt.Z,{text:"".concat(Ua(r,C)),type:xt.Z.Type.Body,bold:!0,testId:"price-after-discount"}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)(xt.Z,{text:Ma(l.amount,{currency:l.currencyCode,locale:C}),type:xt.Z.Type.Subtitle,strikethrough:!0,testId:"price-before-discount"}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)("div",{className:"u-flexbox u-align-items-center u-cursor-pointer",onClick:F,children:(0,z.jsx)(ht.Z,{name:"info-circle",size:ht.Z.Size.Small,color:ht.Z.Color.GreyscaleLevel3,testId:"discount-info-icon"})})]})}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(xt.Z,{text:Ua(r,C),type:xt.Z.Type.Body})]})})(),theme:"transparent"}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(()=>{if(!n)return null;const e=n.status===s7.Warning?ht.Z.Color.Expose:ht.Z.Color.Warning;return(0,z.jsxs)(z.Fragment,{children:[T("attention",n.message,"restriction",e),(0,z.jsx)(x.Z,{size:x.Z.Size.Small})]})})(),(()=>{if(!c)return null;const{addressLine1:e,addressLine2:t,postalCode:i,city:n,name:s}=c;return(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),children:[T("mailbox",s),T("location-pin",(0,v.compact)([e,t,i,n]).join(", "))]})})(),s?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),T("clock",s)]}):null,y?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),T("authenticity-diamond",Z("label"),"authenticity-info")]}):null]}),chevron:h,suffix:d,highlighted:u,type:g?gt.Z.Type.Navigating:void 0,onClick:_,testId:f}),(0,z.jsx)(GZ,{isOpen:w,onClose:()=>{P(!1)},discount:a,lowestPriceIn30Days:o})]})},l7=e=>{let{selectedShippingPoint:t,nearbyPoints:i,shippingOptions:n,onClick:s,onMouseEnter:r=(()=>v.noop),onMouseLeave:a=v.noop}=e;const{track:o}=vi(),{tabletsUp:l}=E(),c=(0,p.v9)(gZ.getTransactionId);return(0,m.useEffect)((()=>{c&&o(nn({transactionId:c,screen:$t.PickupPointList}))}),[o,c]),(0,z.jsx)(kp,{children:i.map(((e,i)=>{let{point:o}=e;const c=W5(n,o),d=Y5(o,n);return(0,z.jsx)("div",{onMouseEnter:r(o),onMouseLeave:a,children:(0,z.jsx)(o7,{carrierIconUrl:null==c?void 0:c.carrierIconUrl,title:null==c?void 0:c.title,restriction:null==c?void 0:c.restriction,price:(null==d?void 0:d.cheapestPrice)||(null==c?void 0:c.price),discount:null==c?void 0:c.discount,priceBeforeDiscount:null==c?void 0:c.priceBeforeDiscount,lowestPriceIn30Days:null==c?void 0:c.lowestPriceIn30Days,valueProposition:d||null==c?void 0:c.valueProposition,itemOfflineVerificationEnabled:null==c?void 0:c.itemOfflineVerificationEnabled,shippingPoint:o,onClick:s(o),highlighted:l&&(null==t?void 0:t.code)===o.code,navigating:!0,testId:"shipping-info-card",trackableScreen:$t.PickupPointList,isMultiplePrices:!!d})},"".concat(o.code,"_").concat(i))}))})},c7=e=>{let{shippingPoint:t,economyShippingOption:i,standardShippingOption:n,isCheckoutScreen:s,trackableScreen:r}=e;const a=U("checkout.shipping.delivery_details.pickup.service"),o=(0,p.I0)(),{track:l}=vi(),c=(0,p.v9)(Nc),d=(0,p.v9)(gZ.getTransactionId),u=(0,p.v9)(Cv),h=(0,p.v9)(Iv),f=(0,p.v9)(kv),[y,v]=(0,m.useState)(i);(0,m.useEffect)((()=>{f||u===i.rateUuid||h===i.rateUuid&&i.serviceType&&(v(i),o(GS.setSelectedServiceType({serviceType:i.serviceType})))}),[o,u,f,i,h]),(0,m.useEffect)((()=>{f||u===n.rateUuid||h===n.rateUuid&&(v(n),o(GS.setSelectedServiceType({serviceType:n.serviceType})))}),[o,u,f,n,h]),(0,m.useEffect)((()=>{u===i.rateUuid&&u!==y.rateUuid&&(v(i),o(GS.setSelectedServiceType({serviceType:nv.Economy}))),u===n.rateUuid&&u!==y.rateUuid&&(v(n),o(GS.setSelectedServiceType({serviceType:nv.Standard})))}),[o,i,u,y.rateUuid,n]);const _=e=>i=>{i.stopPropagation(),i.preventDefault(),e.serviceType&&(l(Ri({screen:r,target:qm.ShippingServiceType,targetDetails:JSON.stringify({service_type:e.serviceType,transaction_id:d})})),o(GS.setSelectedServiceType({serviceType:e.serviceType})),s&&d&&e.rateUuid!==y.rateUuid&&(v(e),o(mZ.updateCheckoutDataRequest({transactionId:d,updatedCheckoutData:{packageTypeId:e.packageTypeId,pickupPointCode:t.code,rateUuid:e.rateUuid,rootRateUuid:e.rootRateUuid,pointUuid:t.uuid}}))))};return(0,z.jsx)("div",{className:"container-top-padding-none",children:(0,z.jsx)(nc.Z,{testId:"service-select-container",children:(0,z.jsxs)(g.Z,{children:[(e=>{var t,i;const n=s?y.serviceType===nv.Economy:f===nv.Economy;return(0,z.jsx)(gt.Z,{testId:"economy-service-cell",type:gt.Z.Type.Navigating,title:a("economy"),body:(0,z.jsx)(xt.Z,{text:a("delivery_in_days",{delivery_from:null===(t=e.deliveryInDays)||void 0===t?void 0:t.from,delivery_to:null===(i=e.deliveryInDays)||void 0===i?void 0:i.to}),html:!0}),highlighted:n,onClick:_(e),suffix:(0,z.jsxs)("div",{className:"u-inline-flex",children:[(0,z.jsx)(xt.Z,{text:Ua(e.price,c)}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(qx.J,{testId:"economy-service-radio-button",checked:n,name:a("economy")})]})})})(i),(e=>{var t,i;const n=s?y.serviceType===nv.Standard:f===nv.Standard;return(0,z.jsx)(gt.Z,{testId:"standard-service-cell",type:gt.Z.Type.Navigating,title:a("standard"),body:(0,z.jsx)(xt.Z,{text:a("delivery_in_days",{delivery_from:null===(t=e.deliveryInDays)||void 0===t?void 0:t.from,delivery_to:null===(i=e.deliveryInDays)||void 0===i?void 0:i.to}),html:!0}),highlighted:n,onClick:_(e),suffix:(0,z.jsxs)("div",{className:"u-inline-flex",children:[(0,z.jsx)(xt.Z,{text:Ua(e.price,c)}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(qx.J,{testId:"standard-service-radio-button",checked:n,name:a("standard")})]})})})(n)]})})})},d7=e=>{let{nearbyPoints:t,selectedShippingPoint:i,isAdvancedDetailsOpen:n,shippingOptions:s,toggleSelectedPointDetailsState:r,onPickupPointSelect:a}=e;const o=U("checkout.shipping.pickup_point_modal.pickup_point_details"),{track:l}=vi(),c=(0,p.v9)(gZ.getTransactionId),d=(0,p.v9)(gZ.getPickupModalUiState),u=W5(s,i),m=Y5(i,s),h=e=>Object.keys(d).find((t=>d[t]===e)),f=(e,t)=>{const i=e.hours.map((e=>{let{opensAt:t,closesAt:i}=e;return(0,v.compact)([t,i]).join("-")}));return(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsx)("div",{className:"u-flexbox u-flex-equal-size",children:(0,z.jsx)(xt.Z,{text:e.label})}),(0,z.jsx)("div",{className:"u-flexbox u-flex-equal-size u-justify-content-flex-end u-text-right",children:(0,z.jsx)(xt.Z,{children:e.hours.length?(0,v.compact)(i).join(" ; "):o("selected_point_details.opening_hours_closed")})})]},"".concat(e.weekday,"_").concat(t))},y=()=>{if(!i)return null;const{description:e,businessHours:t}=i;return(0,z.jsxs)(z.Fragment,{children:[e&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{theme:"muted",text:o("selected_point_details.description")}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:e}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]}),!!t.length&&(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column",children:[(0,z.jsx)(xt.Z,{theme:"muted",type:xt.Z.Type.Subtitle,text:o("selected_point_details.opening_hours")}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),t.map(f)]})]})};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Nm,{breakpoint:"tabletsUp",children:h(Ne.Pending)?null:i&&t.length?(0,z.jsx)("div",{children:(0,z.jsxs)(g.Z,{styling:g.Z.Styling.Lifted,children:[(0,z.jsx)(o7,{carrierIconUrl:null==u?void 0:u.carrierIconUrl,title:null==u?void 0:u.title,restriction:null==u?void 0:u.restriction,price:m||null==u?void 0:u.price,discount:null==u?void 0:u.discount,priceBeforeDiscount:null==u?void 0:u.priceBeforeDiscount,lowestPriceIn30Days:null==u?void 0:u.lowestPriceIn30Days,valueProposition:m||null==u?void 0:u.valueProposition,shippingPoint:i,itemOfflineVerificationEnabled:null==u?void 0:u.itemOfflineVerificationEnabled,testId:"shipping-info-card",suffix:(0,z.jsx)(ic.I,{text:o("button"),styling:ic.I.Styling.Filled,onClick:a,inline:!0}),trackableScreen:$t.PickupPointMap}),(0,z.jsx)("div",{className:"container-border-bottom",children:m&&(0,z.jsx)(c7,{economyShippingOption:m.economyShippingOption,standardShippingOption:m.standardShippingOption,shippingPoint:i,trackableScreen:$t.PickupPointMap})}),null!=i&&i.description||null!=i&&i.businessHours.length?(0,z.jsx)(PZ.Z,{title:o("additional_details.title"),onToggle:e=>{e&&c&&l(nn({transactionId:c,screen:$t.DropOffPointInformation}))},content:(0,z.jsx)(Lg,{maxHeight:200,children:y()}),headerId:"pickup_points_additional_details_accordion_header",bodyId:"pickup_points_additional_details_accordion_body"}):null]})}):null}),(0,z.jsx)(Nm,{breakpoint:"phones",children:h(Ne.Pending)?null:h(Ne.Failure)?(0,z.jsx)(g.Z,{styling:g.Z.Styling.Lifted,children:(0,z.jsx)(nc.Z,{children:(0,z.jsx)(xt.Z,{text:o("empty_state"),alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent})})}):i&&t.length?n?(_=i,i?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(o7,{carrierIconUrl:null==u?void 0:u.carrierIconUrl,title:null==u?void 0:u.title,restriction:null==u?void 0:u.restriction,price:m||null==u?void 0:u.price,discount:null==u?void 0:u.discount,priceBeforeDiscount:null==u?void 0:u.priceBeforeDiscount,lowestPriceIn30Days:null==u?void 0:u.lowestPriceIn30Days,valueProposition:m||null==u?void 0:u.valueProposition,shippingPoint:_,itemOfflineVerificationEnabled:null==u?void 0:u.itemOfflineVerificationEnabled,testId:"shipping-info-card",trackableScreen:$t.DropOffPointInformation}),m&&(0,z.jsx)(c7,{economyShippingOption:m.economyShippingOption,standardShippingOption:m.standardShippingOption,shippingPoint:i,trackableScreen:$t.DropOffPointInformation}),(0,z.jsx)("div",{className:"u-background-gray",children:(0,z.jsx)(x.Z,{size:x.Z.Size.Large})}),n&&(0,z.jsx)(Lg,{className:"u-flexbox u-flex-grow u-flex-direction-column",children:(0,z.jsx)(nc.Z,{children:y()})}),(0,z.jsx)(nc.Z,{children:(0,z.jsx)(ic.I,{text:o("button"),styling:ic.I.Styling.Filled,theme:"primary",onClick:a})})]}):null):(0,z.jsx)("div",{children:(0,z.jsxs)(g.Z,{styling:g.Z.Styling.Lifted,children:[(0,z.jsx)(o7,{carrierIconUrl:null==u?void 0:u.carrierIconUrl,title:null==u?void 0:u.title,restriction:null==u?void 0:u.restriction,price:m||null==u?void 0:u.price,discount:null==u?void 0:u.discount,priceBeforeDiscount:null==u?void 0:u.priceBeforeDiscount,lowestPriceIn30Days:null==u?void 0:u.lowestPriceIn30Days,valueProposition:m||null==u?void 0:u.valueProposition,shippingPoint:i,itemOfflineVerificationEnabled:null==u?void 0:u.itemOfflineVerificationEnabled,navigating:!0,chevron:!0,testId:"shipping-info-card",onClick:r,trackableScreen:$t.PickupPointMap}),m&&(0,z.jsx)(c7,{economyShippingOption:m.economyShippingOption,standardShippingOption:m.standardShippingOption,shippingPoint:i,trackableScreen:$t.PickupPointMap}),(0,z.jsx)("div",{className:"u-ui-padding-horizontal-large u-ui-padding-bottom-large",children:(0,z.jsx)(ic.I,{text:o("button"),styling:ic.I.Styling.Filled,onClick:a})})]})}):null})]});var _},u7=e=>{let{isOpen:t,googleApiKey:i,activeTab:n,onClose:s,onTabChange:r,isAdvancedDetailsOpen:a,toggleSelectedPointDetailsState:o}=e;const l=(0,p.I0)(),c=U("checkout.shipping.pickup_point_modal"),{track:d}=vi(),u=E(),g=(0,p.v9)(ee),f=(0,p.v9)(gZ.getTransactionId),y=(0,p.v9)(gZ.getCountryBounds),v=(0,p.v9)(gZ.getNearbyPoints),_=(0,p.v9)(gZ.getPickupPoint),b=(0,p.v9)((e=>gZ.getPickupModalUiStateByElement(e,by.Search))),j=(0,p.v9)(gZ.getSuggestedShippingPointCode),S=(0,p.v9)(gZ.getAddress),Z=(0,p.v9)(gZ.getSelectedShippingPoint),I=(0,p.v9)(gZ.getPickupPointsUiState),C=(0,p.v9)(gZ.getShippingOptions),k=(0,p.v9)(gZ.getSelectedServiceType),w=(0,p.v9)(gZ.getFormattedAddress),[P,T]=(0,m.useState)(!0),[F,N]=(0,m.useState)(!1),[L,O]=(0,m.useState)(!1),[R,D]=(0,m.useState)(null),[A,M]=(0,m.useState)(null),[B,q]=(0,m.useState)(""),[V,H]=(0,m.useState)(null),G=Yb(),W=(0,m.useCallback)((async()=>{if(!w)return;const e=await qb(w);if(null==e||!e.formatted_address||null==e||!e.geometry)return;const t={latitude:e.geometry.location.lat(),longitude:e.geometry.location.lng()};q(e.formatted_address),D(t)}),[w]);(0,m.useEffect)((()=>{l(hZ.fetchCountryBoundsRequest())}),[l]),(0,m.useEffect)((()=>{G&&((S||_)&&l(hZ.fetchNearbyPointsByElementRequest({element:by.Modal,shouldLabelNearestPoints:!_})),W(),O(!0))}),[l,G,_,S,W]),(0,m.useEffect)((()=>{W()}),[W]),(0,m.useEffect)((()=>{a&&f&&d(nn({transactionId:f,screen:$t.DropOffPointInformation}))}),[a,f,d]);const X=(0,m.useCallback)((e=>{e&&l(mZ.setSelectedShippingPoint({selectedShippingPoint:e}))}),[l]),Y=(0,m.useCallback)((e=>v.find((t=>t.point.code===e))),[v]);(0,m.useEffect)((()=>{var e;if(I!==Ne.Success||!j)return;const t=P&&_?null==_?void 0:_.code:j,i=null===(e=Y(t))||void 0===e?void 0:e.point;X(i),T(!1),l(mZ.resetPickupPointsUiState())}),[P,j,I,_,X,Y,l]),(0,m.useEffect)((()=>{(()=>{if(!P&&!j)return;const e=Y((null==Z?void 0:Z.code)||j);if(!e)return;const t=W5(C,e.point);if(!t)return;const i=pn({transactionId:f,screen:$t.PickupPointMap,carrier:t.carrierCode||"",shippingPoint:e.point.name,distance:e.distance,isNewEntry:!_});d(i)})()}),[Y,Z,C,j,d,f,_,P]);const K=(e,t)=>{t&&q(t)},J=e=>{let{geometry:t}=e;if(null==t||!t.location)return;const i={latitude:t.location.lat(),longitude:t.location.lng()};l(hZ.fetchNearbyPointsByElementRequest({coordinates:i,element:by.Search,shouldLabelNearestPoints:!0})),D(R)},Q=()=>{Z&&l(mZ.setSelectedShippingPoint({selectedShippingPoint:null}))},$=e=>{var t;let{success:i}=e;const n=Z&&(null===(t=W5(C,Z))||void 0===t?void 0:t.carrierCode)||null,s=(e=>{const{transactionId:t,carrier:i,isNewEntry:n,success:s,deliveryType:r}=e,a={success:s,carrier:i,delivery_type:r,is_new_entry:n};return t&&(a.transaction_id=t),{event:"buyer.pick_delivery_type",extra:a}})({transactionId:f,carrier:n,success:i,deliveryType:"drop_off",isNewEntry:(null==_?void 0:_.code)!==(null==Z?void 0:Z.code)});d(s)},te=()=>{const e=W5(C,Z,k);$({success:!!Z}),f&&(l(mZ.updateCheckoutDataRequest({transactionId:f,updatedCheckoutData:{packageTypeId:null==e?void 0:e.packageTypeId,pickupPointCode:null==Z?void 0:Z.code,rateUuid:null==e?void 0:e.rateUuid,rootRateUuid:null==e?void 0:e.rootRateUuid,pointUuid:null==Z?void 0:Z.uuid}})),Q(),s())},ie=async()=>{N(!0);const e=await sj();e&&M(e)},ne=e=>()=>{X(e),o()},se=e=>()=>{X(e)},re=e=>()=>{H(e)},ae=()=>{H(null)},oe=(e,t,i)=>L?(0,z.jsx)(Jb,{type:Kb.InputBar,name:e,placeholder:t,initialValue:B,country:(null==S?void 0:S.countryIsoCode)||g,isLoading:b===Ne.Pending,onValueChange:K,onPlaceDetailsChange:J,suggestionsListMaxHeight:i,screen:$t.PickupPointMap}):null,le=()=>y&&L?(0,z.jsx)(n7,{googleApiKey:i,hoveredShippingPoint:V,onMapClick:Q,onMarkerClick:X,currentLocation:A,addressCoordinates:R}):(0,z.jsx)("div",{className:"u-position-relative pickup-point-map__loader","data-testid":"tabletsup-loader",children:(0,z.jsx)(Dp.Z,{size:Dp.Z.Size.Large,styling:Dp.Z.Styling.Lifted})}),ce=e=>{let{onClick:t,onMouseEnter:i,onMouseLeave:n}=e;return(0,z.jsx)(l7,{selectedShippingPoint:Z,nearbyPoints:v,shippingOptions:C,onClick:t,onMouseEnter:i,onMouseLeave:n})},de=()=>y&&L?(0,z.jsx)(d7,{selectedShippingPoint:Z,isAdvancedDetailsOpen:a,nearbyPoints:v,toggleSelectedPointDetailsState:o,onPickupPointSelect:te,shippingOptions:C}):null,ue=u.wide?{width:"1240px",height:"calc(100% - 80px)"}:{width:"100%",height:"100%"};return(0,z.jsx)(cp.Z,{isFramed:!1,show:t,contentDimensions:ue,children:(0,z.jsxs)("div",{className:"pickup-point-modal","data-testid":"pickup-point-modal",children:[(0,z.jsx)(Pm.Z,{left:a&&(0,z.jsx)(Nm,{breakpoint:"phones",children:(0,z.jsx)(ic.I,{deprecatedIconName:"arrow-left",styling:ic.I.Styling.Flat,onClick:o,inline:!0})}),body:(0,z.jsx)(xt.Z,{text:c("navigation.body"),type:xt.Z.Type.Title}),right:(0,z.jsx)(ic.I,{deprecatedIconName:"x",styling:ic.I.Styling.Flat,onClick:()=>{l(mZ.setSelectedServiceType({serviceType:void 0})),$({success:!1}),s()},inline:!0,testId:"pickup-point-modal-close-button"})}),(0,z.jsxs)(Nm,{breakpoint:"tabletsUp",children:[(0,z.jsx)(h.Z,{}),(0,z.jsxs)("div",{className:"pickup-point-modal__content",children:[P?(0,z.jsx)(tc.Z,{title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,alignment:xt.Z.Alignment.Center,text:c("tablets_up.empty_state.title"),as:"span"})}):null!=v&&v.length?(0,z.jsxs)("div",{className:"pickup-point-modal__scrollable-list",children:[(0,z.jsx)(yt.Z,{text:(0,z.jsx)(xt.Z,{text:c("pickup_point_list.label"),type:xt.Z.Type.Subtitle,format:!0}),type:yt.Z.Type.Stacked}),(0,z.jsx)("div",{className:"pickup-point-modal__content",children:(0,z.jsx)("div",{className:"pickup-point-modal__scrollable-list__content",children:ce({onClick:se,onMouseEnter:re,onMouseLeave:ae})})})]}):(0,z.jsx)(tc.Z,{title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,alignment:xt.Z.Alignment.Center,text:c("tablets_up.empty_state.no_points"),as:"span"})}),(0,z.jsx)(h.Z,{orientation:h.Z.Orientation.Vertical}),(0,z.jsxs)("div",{className:"pickup-point-modal__map-container",children:[L&&(0,z.jsx)("div",{className:"u-ui-padding-regular",children:oe("pudo-places-autocomplete-tablets-up",c("autocomplete.placeholder"))}),le(),de()]})]})]}),(0,z.jsx)(Nm,{breakpoint:"phones",children:(()=>{const e=[{id:Q5.Map,title:c("tabs.map")},{id:Q5.List,title:c("tabs.list")}];return v.length||A||R?a?de():(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"u-ui-padding-regular",children:oe("pudo-places-autocomplete-phones",c("autocomplete.placeholder"))}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(c1.Z,{items:e,width:c1.Z.Width.Parent,activeItemId:n,onClick:r}),(0,z.jsx)(h.Z,{}),n===Q5.Map?(0,z.jsx)("div",{className:"pickup-point-modal__content",children:(0,z.jsxs)("div",{className:"pickup-point-modal__map-container",children:[le(),de()]})}):v.length?(0,z.jsx)(Lg,{children:ce({onClick:ne,chevron:!0})}):(0,z.jsx)(tc.Z,{title:c("pickup_point_list.empty_state.title"),body:c("pickup_point_list.empty_state.body")})]}):(0,z.jsxs)("div",{className:"pickup-point-modal--phones__container u-padding-horizontal-large",children:[(0,z.jsx)(xt.Z,{text:c("phones.empty_state.heading"),type:xt.Z.Type.Heading,alignment:xt.Z.Alignment.Center}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)("div",{className:"u-text-left",children:oe("pudo-places-autocomplete-phones",c("autocomplete.placeholder"),200)}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(xt.Z,{text:c("phones.empty_state.subtitle"),type:xt.Z.Type.Subtitle,alignment:xt.Z.Alignment.Center}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,deprecatedIcon:(0,z.jsx)(ht.Z,{name:"location-arrow",color:ht.Z.Color.Primary,aria:{"aria-hidden":"true"}}),text:(0,z.jsx)(xt.Z,{text:c("phones.empty_state.button"),as:"span",theme:"primary"}),onClick:ie,isLoading:F})]})})()})]})})},m7=e=>{let{googleApiKey:t}=e;const i=(0,p.I0)(),n=U("checkout.shipping.delivery_details.pickup"),s=(0,p.v9)(gZ.getPickupPoint),r=(0,p.v9)(gZ.getDeliveryTypes),a=(0,p.v9)(gZ.getTransactionId),o=(0,p.v9)(gZ.getIsItemOfflineVerificationEnabled),[l,c]=(0,m.useState)(!1),[d,u]=(0,m.useState)(!1),g=EZ(d),[h,x]=(0,m.useState)(Q5.Map),f=EZ(h),y=(0,m.useCallback)((()=>d?$t.DropOffPointInformation:h===Q5.List?$t.PickupPointList:(Q5.Map,$t.PickupPointMap)),[h,d]),v=H5({withEventListeners:!0,transactionId:a,screen:y(),isModalOpened:l||d});(0,m.useEffect)((()=>{a&&f!==h&&(f===Q5.Map?v($t.PickupPointMap):v($t.PickupPointList))}),[h,f,v,a]),(0,m.useEffect)((()=>{d&&(h===Q5.Map?v($t.PickupPointMap):v($t.PickupPointList))}),[h,d,v]),(0,m.useEffect)((()=>{a&&(d||g!==d&&v($t.DropOffPointInformation))}),[d,g,v,a]);const _=()=>{i(mZ.removeFieldError({fieldName:_y.PickupPoint})),c(!0)};return(0,z.jsxs)(z.Fragment,{children:[s?(0,z.jsx)(Lt.Z,{styling:Lt.Z.Styling.Tight,children:(()=>{var e;if(!s||null==r||null===(e=r.pickup)||void 0===e||!e.shippingOption)return null;const{shippingOption:t,shippingOptions:i}=r.pickup,n=Y5(s,i);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(o7,{carrierIconUrl:t.carrierIconUrl,title:t.title,restriction:t.restriction,price:n?void 0:t.price,discount:t.discount,priceBeforeDiscount:t.priceBeforeDiscount,lowestPriceIn30Days:t.lowestPriceIn30Days,valueProposition:n?void 0:t.valueProposition,shippingPoint:s,suffix:(0,z.jsx)(gt.Z,{theme:"transparent",styling:gt.Z.Styling.Tight,suffix:(0,z.jsx)(ht.Z,{name:"pencil",color:ht.Z.Color.GreyscaleLevel3,aria:{"aria-hidden":"true"}})}),navigating:!0,onClick:_,testId:"pickup_point_edit",itemOfflineVerificationEnabled:o,trackableScreen:$t.Checkout}),n&&(0,z.jsx)(c7,{economyShippingOption:n.economyShippingOption,standardShippingOption:n.standardShippingOption,shippingPoint:s,isCheckoutScreen:!0,trackableScreen:$t.Checkout})]})})()}):(0,z.jsx)(Lt.Z,{styling:Lt.Z.Styling.Tight,children:(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,onClick:_,prefix:(0,z.jsx)(ht.Z,{name:"location-pin-map",color:ht.Z.Color.GreyscaleLevel3,aria:{"aria-hidden":"true"}}),suffix:(0,z.jsx)("div",{className:"u-flexbox",children:(0,z.jsx)(ht.Z,{name:"plus",aria:{"aria-hidden":"true"}})}),testId:"pickup_point_empty_state",children:(0,z.jsx)(xt.Z,{text:n("empty_state"),type:xt.Z.Type.Title})})}),l&&(0,z.jsx)(u7,{googleApiKey:t,isOpen:l,onClose:()=>{c(!1),v()},activeTab:h,onTabChange:e=>{x(e.id)},isAdvancedDetailsOpen:d,toggleSelectedPointDetailsState:()=>{u((e=>!e))}})]})},p7=e=>{let{shippingOptions:t}=e;const i=(0,p.I0)(),{track:n}=vi(),s=U("checkout.shipping.delivery_details.home"),r=(0,p.v9)(gZ.getTransactionId),a=(0,p.v9)(gZ.getShipment),[o,l]=(0,m.useState)(!1),c=e=>()=>{(null==a?void 0:a.packageType.id)!==e.id&&r&&((e=>{if(!r)return;const t=$i({target:"shipping_option",screen:$t.HomeDeliverySelection,transactionId:r,targetDetails:e.carrierCode||void 0,valid:null});n(t)})(e),i(mZ.updateCheckoutDataRequest({transactionId:r,updatedCheckoutData:{packageTypeId:e.id,rateUuid:e.rateUuid,rootRateUuid:e.rootRateUuid}})))},d=()=>{l((e=>!e)),(()=>{if(!r)return;const e=nn({screen:$t.HomeDeliverySelection,transactionId:r});n(e)})()},u=(e,t)=>{const i=(0,z.jsx)(qx.J,{name:"package_type_id",checked:e.id===(null==a?void 0:a.packageType.id)}),n=(0,z.jsx)(ht.Z,{name:"pencil",color:ht.Z.Color.GreyscaleLevel3,aria:{"aria-hidden":"true"}});return(0,z.jsx)(gt.Z,{theme:"transparent",styling:gt.Z.Styling.Tight,suffix:t?i:n})},g=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{id:i,valueProposition:n,price:s,restriction:r,title:a,carrierIconUrl:o,itemOfflineVerificationEnabled:l,discount:m,priceBeforeDiscount:p}=e;return(0,z.jsx)(o7,{carrierIconUrl:o,title:a,restriction:r,price:s,discount:m,priceBeforeDiscount:p,lowestPriceIn30Days:e.lowestPriceIn30Days,valueProposition:n,itemOfflineVerificationEnabled:l,suffix:u(e,t),navigating:!0,onClick:t?c(e):d,testId:"shipping-option-".concat(i),trackableScreen:$t.Checkout},i)};return(()=>{var e,i,n;if(!t||!a)return null;const r=null===(e=t.shippingOptions)||void 0===e?void 0:e.find((e=>{let{id:t}=e;return t===a.packageType.id}));return r?1===(null===(i=t.shippingOptions)||void 0===i?void 0:i.length)?(e=>{const{id:t,valueProposition:i,price:n,restriction:s,title:r,carrierIconUrl:a,itemOfflineVerificationEnabled:o,discount:l,priceBeforeDiscount:c}=e;return(0,z.jsx)(o7,{carrierIconUrl:a,title:r,restriction:s,price:n,discount:l,priceBeforeDiscount:c,lowestPriceIn30Days:e.lowestPriceIn30Days,valueProposition:i,testId:"shipping-option-".concat(t),itemOfflineVerificationEnabled:o,trackableScreen:$t.Checkout},t)})(r):o?(0,z.jsx)(kp,{children:null===(n=t.shippingOptions)||void 0===n?void 0:n.map((e=>g(e,!0)))}):g(r):(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,onClick:d,prefix:(0,z.jsx)(ht.Z,{name:"truck",color:ht.Z.Color.GreyscaleLevel3,aria:{"aria-hidden":"true"}}),suffix:(0,z.jsx)("div",{className:"u-flexbox",children:(0,z.jsx)(ht.Z,{name:"plus",aria:{"aria-hidden":"true"}})}),children:(0,z.jsx)(xt.Z,{text:s("empty_state"),type:xt.Z.Type.Title})})})()},g7=e=>{var t;let{googleApiKey:i,deliveryTypes:n,selectedDeliveryType:s}=e;const r=U("checkout.shipping.delivery_details"),a=E(),{track:o}=vi(),l=(0,p.v9)((e=>gZ.getFieldError(e,_y.PickupPoint))),c=(0,p.v9)(gZ.getTransactionId),d=(0,p.v9)(gZ.getDeliveryPickupPointDetails),u=(0,p.v9)(gZ.getPickupPoint),g=n&&Object.keys(n),h=null===(t=d.carrier)||void 0===t?void 0:t.code;return(0,m.useEffect)((()=>{(()=>{if(s===yy.PickupPoint&&!u)return;const e=pn({transactionId:c,screen:$t.Checkout,carrier:h||"",shippingPoint:(null==u?void 0:u.name)||null});o(e)})()}),[null==u?void 0:u.name]),null!=g&&g.includes(vy.Pickup)||null!=g&&g.includes(vy.Home)?(0,z.jsx)(Jp.h,{onEnter:()=>{c&&o((e=>{const{transactionId:t,screen:i}=e;return{event:"buyer.view_delivery_details",extra:{transaction_id:t,screen:i}}})({transactionId:c,screen:$t.Checkout}))},children:(0,z.jsxs)("div",{children:[(0,z.jsx)(yt.Z,{type:yt.Z.Type.Stacked,styling:a.phones?yt.Z.Styling.Default:yt.Z.Styling.Wide,text:r("label")}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,children:(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{}),children:[s===yy.PickupPoint?(0,z.jsx)(m7,{googleApiKey:i}):(0,z.jsx)(Lt.Z,{styling:Lt.Z.Styling.Tight,children:(0,z.jsx)(p7,{shippingOptions:null==n?void 0:n.home})}),l?(0,z.jsx)(zm.Z,{text:l,theme:"warning"}):null]})})]})}):null},h7=()=>{var e;const{track:t}=vi(),i=(0,p.v9)(Nc),n=(0,p.v9)(Nb),s=(0,p.v9)(gZ.getTransactionId),r=(0,p.v9)(gZ.getSelectedDeliveryType),a=(0,p.v9)(gZ.getCheckoutDataUiState)===Ne.Pending,o=(0,p.v9)(gZ.getIsPaymentProcessing),l=(0,p.v9)(gZ.getDeliveryTypesUiState),c=(0,p.v9)(gZ.getDeliveryTypes),d=(0,p.v9)(gZ.getAddress),u=EZ(c),g=(null===(e=Xn({abTestName:"require_address_before_delivery_method_selection",shouldTrackExpose:null===d}))||void 0===e?void 0:e.variant)===$k.On,h=(0,m.useCallback)((()=>{if(!c)return;const e=Object.keys(c).filter((e=>!!c[e].price)).map((e=>Ua(c[e].price,i))),n=Ji({screen:$t.Checkout,transactionId:s||void 0,prices:e});t(n)}),[i,t,s,c]);return(0,m.useEffect)((()=>{c&&!u&&[Ne.Success,Ne.Failure].includes(l)&&h()}),[c,u,l,h]),g&&!d?null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Tight,disabled:o,children:[(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Tight,disabled:a,id:_y.PickupPoint,children:[(0,z.jsx)(J5,{transactionId:s,uiState:l,selectedDeliveryType:r,deliveryTypes:c}),c&&(0,z.jsx)(g7,{selectedDeliveryType:r,googleApiKey:n,deliveryTypes:c})]}),a?(0,z.jsx)("div",{className:"checkout__shipping__loader",children:(0,z.jsx)(Dp.Z,{testId:"shipping-loader",size:Dp.Z.Size.XLarge})}):null]})]})},x7="IS_CARD_RECOMMENDATION_OR_INCENTIVE_MODAL_SEEN_KEY",f7=e=>{let{show:t,onCancel:i,recommendedCreditCard:n,onUseRecommendedCreditCard:s}=e;const r=U("payments.card"),a=U("checkout.use_existing_card_recommendation_modal");return(0,z.jsxs)(cp.Z,{show:t,children:[(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(gt.Z,{children:(0,z.jsx)("div",{className:"u-text-center",children:(0,z.jsx)(xt.Z,{text:a("title"),type:xt.Z.Type.Heading,alignment:xt.Z.Alignment.Center,testId:"use-existing-card-recommendation-modal-title"})})}),(0,z.jsx)(xt.Z,{text:a("message"),testId:"use-existing-card-recommendation-modal-message"}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(()=>{const{brand:e,lastFour:t}=n;return(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),children:[(0,z.jsx)(xt.Z,{text:cC(e),bold:!0,theme:"amplified"}),(0,z.jsx)(xt.Z,{text:r("ends_with")}),(0,z.jsx)(xt.Z,{text:t,bold:!0,theme:"amplified"})]})})()]}),(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(ic.I,{text:a("buttons.use_recommended_card"),styling:ic.I.Styling.Filled,theme:"primary",onClick:s,testId:"use-existing-card-recommendation-modal-use-card-action"}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(ic.I,{text:a("buttons.cancel"),styling:ic.I.Styling.Flat,onClick:i,testId:"use-existing-card-recommendation-modal-cancel-action"})]})]})},y7=e=>{let{show:t,onCancel:i,onAddCreditCard:n}=e;const s=U("checkout.add_card_recommendation_modal");return(0,z.jsxs)(cp.Z,{show:t,children:[(0,z.jsxs)(gt.Z,{children:[(0,z.jsxs)("div",{className:"u-text-center",children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(Kl.U,{src:"/assets/credit-card-form/credit-card.svg",size:Kl.U.Size.XLarge,alt:"",testId:"add-card-recommendation-modal-icon"}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(xt.Z,{text:s("title"),type:xt.Z.Type.Heading,alignment:xt.Z.Alignment.Center,testId:"add-card-recommendation-modal-title"})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:s("message"),testId:"add-card-recommendation-modal-message"})]}),(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(ic.I,{text:s("buttons.add_new_card"),styling:ic.I.Styling.Filled,theme:"primary",onClick:n,testId:"add-card-recommendation-modal-add-card-action"}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(ic.I,{text:s("buttons.cancel"),styling:ic.I.Styling.Flat,onClick:i,testId:"add-card-recommendation-modal-cancel-action"})]})]})},v7=e=>{let{show:t,payInMethodPromotion:i,payInMethodIncentive:n,selectedCreditCardId:s,selectedPayInMethodId:r,transactionId:a,onClose:o,onAddCreditCard:l,recommendedPayInMethodCode:c}=e;const d=(0,p.I0)(),u=U("checkout.payment.select"),{track:g}=vi(),h=(0,p.v9)(dS);function x(){o()}function f(e){l(e)}return(0,m.useEffect)((()=>{t&&g(nn({transactionId:a,screen:$t.PaymentOptions}))}),[g,a,t]),(0,z.jsx)(cp.Z,{show:t,hasScrollableContent:!0,testId:"checkout-pay-in-method-selection-modal",children:(0,z.jsxs)("div",{className:"u-fill-width",children:[(0,z.jsx)(Pm.Z,{body:u("title"),right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,onClick:x,deprecatedIconName:"x",testId:"close-selection-modal",inline:!0})}),null!=h&&h.length?(0,z.jsx)(fC,{payInMethods:h,payInMethodPromotion:i,payInMethodIncentive:n,selectedCreditCardId:s,selectedPayInMethodId:r,recommendedPayInMethodCode:c,onSubmit:function(e,t){e.code!==iv.CreditCard||t?(d(Cy.updateCheckoutDataRequest({transactionId:a,updatedCheckoutData:{payInMethodId:e.id,creditCardId:t||null}})),function(e){const t=tn({transactionId:a,eventTrackingCode:e.eventTrackingCode,screen:$t.PaymentOptions});g(t)}(e),x()):f(e)},onSelect:function(e){const t=$i({screen:$t.PaymentOptions,target:"payment_method",targetDetails:e.eventTrackingCode,valid:!0,transactionId:a});g(t)},onAddNewCard:f,trackTargetDetails:{type:"escrow",transaction_id:a},wrapInScrollableArea:!0}):(0,z.jsx)(Mp,{testId:"pay-in-methods-list-loader",styling:Mp.Styling.Wide})]})})},_7=e=>{let{onAddCreditCard:t}=e;const i=(0,p.I0)(),n=U("checkout.card_expired_modal"),{track:s}=vi(),r=(0,p.v9)(mS),a=(0,p.v9)(gZ.getTransactionId),o=EZ(r);(0,m.useEffect)((()=>{a&&r&&r!==o&&s(nn({transactionId:a,screen:$t.ExpiredCardModal}))}),[a,r,o,s]);const l=()=>{i(mZ.setIsCardExpired({isExpired:!1}))};return(0,z.jsxs)(cp.Z,{show:r,children:[(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)("div",{className:"u-text-center",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,alignment:xt.Z.Alignment.Center,text:n("title")})}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:n("message")})]}),(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,text:n("buttons.add_new_card"),theme:"primary",onClick:()=>{if(!a)return;t();const e={transaction_id:a};s(Ri({target:qm.AddNewCardButton,screen:$t.ExpiredCardModal,targetDetails:JSON.stringify(e)})),l()}}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,text:n("buttons.not_now"),onClick:l})]})]})},b7=e=>{let{onChange:t,isChecked:i}=e;const n=U("credit_card_add.single_use");return(0,z.jsx)(g.Z,{children:(0,z.jsx)(gt.Z,{theme:"inverseExperimental",children:(0,z.jsx)(BZ.F,{checked:i,experimentalApplyBackground:!0,name:"checkout-save-card-consent-checkbox",testId:"checkout-save-card-consent-checkbox",text:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{theme:"amplified",text:n("trust_and_safety_ab_test_consent.title")}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(xt.Z,{text:n("trust_and_safety_ab_test_consent.description")})]}),onChange:e=>t(e.target.checked)})})})},j7=e=>{let{show:t,onCancel:i,incentive:n,onAddCreditCard:s}=e;const r=(0,O.Z)(),a=(0,p.v9)(Nc),o=U("checkout.add_card_incentive_modal"),l=n.isDelayed?"delayed":"instant",c=Ua(n.amount,a,{keepFractionDigits:!1});return(0,z.jsxs)(cp.Z,{show:t,children:[(0,z.jsx)(gt.Z,{children:(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),children:[(0,z.jsxs)("div",{className:"u-text-center",children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(Kl.U,{src:"/assets/coin-heart.svg",size:Kl.U.Size.XLarge,alt:"",testId:"add-card-incentive-modal-icon"}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(xt.Z,{text:o("".concat(l,".title"),{amount:c}),type:xt.Z.Type.Heading,alignment:xt.Z.Alignment.Center,testId:"add-card-incentive-modal-title"})]}),(0,z.jsx)(xt.Z,{text:o("".concat(l,".message"),{amount:c}),testId:"add-card-incentive-modal-message"}),(0,z.jsx)(xt.Z,{text:o("".concat(l,".expiry_date"),{expiryDate:r.formatDate(new Date(n.expiryDate),{day:"numeric",month:"long",year:"numeric"})}),type:xt.Z.Type.Caption,testId:"add-card-incentive-modal-expiry-date"})]})}),(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(ic.I,{text:o("buttons.add_new_card"),styling:ic.I.Styling.Filled,theme:"primary",onClick:s,testId:"add-card-incentive-modal-add-card-action"}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(ic.I,{text:o("buttons.cancel"),styling:ic.I.Styling.Flat,onClick:i,testId:"add-card-incentive-modal-cancel-action"})]})]})},S7=e=>{let{onClick:t,payInMethodPromotion:i,payInMethodIncentive:n,isAddCardRecommendationEnabled:s,validation:r}=e;const a=(0,p.v9)(Nc),o=U("checkout.payment");return(0,z.jsx)(gt.Z,{id:_y.PaymentMethod,type:gt.Z.Type.Navigating,styling:gt.Z.Styling.Wide,title:o("empty.title"),suffix:(0,z.jsx)(ht.Z,{name:"plus",aria:{"aria-hidden":"true"}}),body:(()=>{if(s)return(0,z.jsxs)("div",{className:"u-flexbox u-padding-top-medium u-align-items-center",children:[(0,z.jsx)(ht.Z,{name:"light-bulb",size:ht.Z.Size.Small,color:ht.Z.Color.Success}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(xt.Z,{text:o("empty.card_recommendation"),type:xt.Z.Type.Subtitle})]});if(n){const e=n.isDelayed?"delayed":"instant",t=Ua(n.amount,a,{keepFractionDigits:!1});return(0,z.jsxs)("div",{className:"u-flexbox u-padding-top-medium u-align-items-center",children:[(0,z.jsx)(ht.Z,{name:"gift",size:ht.Z.Size.Small,color:ht.Z.Color.Success}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(xt.Z,{text:o("empty.card_incentive.".concat(e),{amount:t}),type:xt.Z.Type.Subtitle})]})}if(i&&"recommendation"!==i.type){const e=i.amount?Ua(i.amount,a,{keepFractionDigits:!1}):null;return(0,z.jsxs)("div",{className:"u-flexbox u-padding-top-medium u-align-items-center",children:[(0,z.jsx)(ht.Z,{name:"gift",size:ht.Z.Size.Small,color:ht.Z.Color.Success}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(xt.Z,{text:o("empty.pay_in_method_promotion.".concat(i.type),{amount:e}),type:xt.Z.Type.Subtitle})]})}return null})(),onClick:t,validation:r,testId:"payment-details"})},Z7=e=>{let{title:t,body:i,validation:n,tooltipText:s,paymentMethod:r,onClick:a,onMouseEnterTooltip:o}=e;const{brand:l,name:c,methodChangePossible:d}=r;return(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,type:d?gt.Z.Type.Navigating:void 0,prefix:(0,z.jsx)(lC,{payInMethodBrand:l}),title:t||c,body:i,suffix:d?(0,z.jsx)(ht.Z,{name:"pencil",color:ht.Z.Color.GreyscaleLevel3,aria:{"aria-hidden":"true"}}):s?(0,z.jsx)("div",{style:{textAlign:"left"},children:(0,z.jsx)(Wf.Z,{content:s,testId:"payment-details-tooltip",shiftOptions:{mainAxis:!0},shouldAutoUpdate:!0,children:(0,z.jsx)("div",{className:"u-flexbox u-align-items-center u-cursor-pointer","data-testid":"payment-details-info-circle",onMouseEnter:o,children:(0,z.jsx)(ht.Z,{name:"info-circle",color:ht.Z.Color.GreyscaleLevel3,size:ht.Z.Size.Small})})})}):null,validation:n,onClick:d?a:void 0,testId:"payment-details"})};var I7;!function(e){e[e.PayInMethod=0]="PayInMethod",e[e.CreditCardForm=1]="CreditCardForm",e[e.AddCardIncentive=2]="AddCardIncentive",e[e.AddCardRecommendation=3]="AddCardRecommendation",e[e.UseExistingCardRecommendation=4]="UseExistingCardRecommendation",e[e.None=5]="None"}(I7||(I7={}));const C7=()=>{const e=(0,p.I0)(),{track:t}=vi(),{phones:i}=E(),n=U("checkout.payment"),s=U("credit_card_add.threeds2.errors"),r=(0,p.v9)(gZ.getCardAddAuth),a=(0,p.v9)(gZ.getTransactionId),o=(0,p.v9)(gZ.getPaymentMethod),l=(0,p.v9)(gZ.getIsPaymentProcessing),c=(0,p.v9)(pS),d=(0,p.v9)(gZ.getPayInMethodPromotion),u=(0,p.v9)(gZ.getPayInMethodIncentive),g=(0,p.v9)(gZ.getRecommendedPayInMethod),h=(0,p.v9)(uS),x=(0,p.v9)(gZ.getIsAddCardRecommendationEnabled),f=(0,p.v9)(gZ.getIsUseExistingCardRecommendationEnabled),y=(0,p.v9)((e=>gZ.getFieldError(e,_y.PaymentMethod)));Xn({abTestName:"pp_removal_with_education_and_delayed_incentive",shouldTrackExpose:!!d});const[_,b]=(0,m.useState)(I7.None),[j,S]=(0,m.useState)(),Z=EZ(_),I=H5({withEventListeners:!0,transactionId:a,screen:_===I7.PayInMethod?$t.PaymentOptions:$t.CreditCardAdd,isModalOpened:_===I7.PayInMethod||_===I7.CreditCardForm}),C=(0,m.useCallback)((()=>{y&&e(mZ.removeFieldError({fieldName:_y.PaymentMethod}))}),[e,y]),k=(0,m.useCallback)((()=>{a&&t(nn({screen:$t.CreditCardAdd,transactionId:a}))}),[t,a]),w=(0,m.useCallback)((e=>{b(I7.CreditCardForm),S(e),k()}),[k]),P=(0,m.useCallback)((()=>"true"===(0,Bn.le)(x7)),[]),T=(0,m.useCallback)((()=>{(0,Bn.D$)(x7,"true")}),[]);(0,m.useEffect)((()=>{o&&C()}),[o,C]),(0,m.useEffect)((()=>{if((null==r?void 0:r.cardAddResult)!==uj.Fail){if(!P())return u?(b(I7.AddCardIncentive),void T()):x?(b(I7.AddCardRecommendation),void T()):void(f&&(b(I7.UseExistingCardRecommendation),T()))}else w(s("redirect_return_error"))}),[r,u,w,s,x,f,T,P]),(0,m.useEffect)((()=>{a&&e(IS.fetchPayInMethodsRequest({transactionId:a}))}),[e,a]),(0,m.useEffect)((()=>{a&&(Z===I7.PayInMethod&&I($t.PaymentOptions),Z===I7.CreditCardForm&&I($t.CreditCardAdd))}),[Z,I,a,_]);const F=()=>{b(I7.None)},N=()=>{t(Ri({screen:$t.Checkout,target:qm.WalletBalanceInfo,targetDetails:JSON.stringify({transaction_id:a})}))},L=()=>{b(I7.PayInMethod)},O=()=>{w()},R=()=>{L()},D=t=>{e(IS.setIsCardSingleUseOverriden({overrideSingleUse:t}))},A=()=>{F(),a&&null!=g&&g.externalCard&&e(mZ.updateCheckoutDataRequest({transactionId:a,updatedCheckoutData:{creditCardId:g.externalCard.id,payInMethodId:g.payInMethod.id}}))};return(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Tight,disabled:l,children:[(0,z.jsx)(yt.Z,{type:yt.Z.Type.Leading,styling:i?yt.Z.Styling.Default:yt.Z.Styling.Wide,text:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:n("title")})}),o?(e=>{const{code:t,isCard:i,note:s}=e;return t===iv.Wallet?(e=>(0,z.jsx)(Z7,{paymentMethod:e,tooltipText:n("wallet.tooltip_text"),onMouseEnterTooltip:N,onClick:R}))(e):i?(e=>{const{isExpired:t,isSingleUse:i,lastFour:s,brand:r}=e,a=(0,v.compact)([cC(r),s]).join(" ".concat(n("card.body")," ")),o=t?n("card.expired"):void 0;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Z7,{paymentMethod:e,title:n("card.title"),body:a,validation:o,onClick:R}),i&&(0,z.jsx)("div",{className:"u-padding-horizontal-large u-padding-bottom-large",children:(0,z.jsx)(b7,{isChecked:h,onChange:D})})]})})(e):t===iv.Trustly?(0,z.jsx)(Z7,{body:s,paymentMethod:e,onClick:R}):(0,z.jsx)(Z7,{paymentMethod:e,onClick:R})})(o):(0,z.jsx)(S7,{payInMethodPromotion:d,payInMethodIncentive:u,isAddCardRecommendationEnabled:x,onClick:R,validation:y}),a?(0,z.jsx)(v7,{show:_===I7.PayInMethod,transactionId:a,selectedPayInMethodId:null==o?void 0:o.id,selectedCreditCardId:null==o?void 0:o.cardId,payInMethodPromotion:d,payInMethodIncentive:(()=>{if(!u)return null;const{amount:e,isDelayed:t}=u;return{amount:e,isDelayed:t,code:iv.CreditCard}})(),recommendedPayInMethodCode:null==g?void 0:g.payInMethod.code,onAddCreditCard:O,onClose:F}):null,u?(0,z.jsx)(j7,{show:_===I7.AddCardIncentive,incentive:u,onAddCreditCard:O,onCancel:F}):null,a?(0,z.jsx)(kk,{allowSingleUse:!0,errorMessage:j,show:_===I7.CreditCardForm,onCreditCardAddSuccess:t=>{var i,n;i=t.id,n=null==c?void 0:c.id,a&&e(mZ.updateCheckoutDataRequest({transactionId:a,updatedCheckoutData:{creditCardId:i,payInMethodId:n}})),F()},onBack:L,onClose:F,onTrackableFieldChange:e=>{let{name:i,isValid:n}=e;t($i({screen:$t.CreditCardAdd,target:i,valid:n,transactionId:a||void 0}))},trackingTargetDetails:{type:"escrow",transaction_id:a},source:Zj({type:"escrow",transactionId:a})}):null,(()=>{if(!g)return null;const{externalCard:e}=g;return x?(0,z.jsx)(y7,{show:_===I7.AddCardRecommendation,onAddCreditCard:O,onCancel:F}):f&&e?(0,z.jsx)(f7,{show:_===I7.UseExistingCardRecommendation,recommendedCreditCard:e,onUseRecommendedCreditCard:A,onCancel:L}):null})(),(0,z.jsx)(_7,{onAddCreditCard:O})]})},k7=e=>{let{transactionId:t}=e;const i=U("checkout"),n=U("shipping_contact"),{track:s}=vi(),r=(0,p.I0)(),a=(0,p.v9)(gZ.getShipment),o=(0,p.v9)(gZ.getPaymentMethod),l=(0,p.v9)(gZ.getIsPaymentAvailable),c=(0,p.v9)(gZ.getIsAddressCompleted),d=(0,p.v9)(gZ.getIsShippingContactCompleted),u=(0,p.v9)(gZ.getIsFormCompleted),g=(0,p.v9)(gZ.getIsPaymentProcessing),h=(0,p.v9)(gZ.getIsBlikAuthRequired),f=(0,p.v9)(gZ.getIsSellerBusinessUser),y=(0,p.v9)(gZ.getIsCardSingleUseOverriden),[v,_]=(0,m.useState)(!1),b=H5({withEventListeners:!1,transactionId:t,screen:$t.Checkout,isModalOpened:!0}),j=()=>{if(!o)return{};const{isCard:e,isSingleUse:t}=o;return e&&t?{card_details_stored:y}:{}},S=async()=>{const e=!!c||(r(mZ.setFieldError({fieldError:{field:_y.Address,value:i("errors.address")}})),!1),t=await(async()=>{const e=await(e=>{var t;const i=[];return null!=e&&e.pickupPoint||(null==e||null===(t=e.carrier)||void 0===t?void 0:t.deliveryType)!==yy.PickupPoint||i.push(_y.PickupPoint),i})(a);return!e.includes(_y.PickupPoint)||(r(mZ.setFieldError({fieldError:{field:_y.PickupPoint,value:i("errors.pick_up_point")}})),!1)})(),s=!!d||(r(Ay.setShippingContactError({error:{field:_d.ShippingContact,value:n("buyer.validation.required")}})),!1),l=!!o||(r(mZ.setFieldError({fieldError:{field:_y.PaymentMethod,value:i("errors.payment_method")}})),!1);return e?t?s?l?null:(0,ls.H5)(_y.PaymentMethod):(0,ls.H5)(_d.ShippingContact):(0,ls.H5)(_y.PickupPoint):(0,ls.H5)(_y.Address)};return(0,z.jsxs)(z.Fragment,{children:[f?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{html:!0,type:xt.Z.Type.Caption,text:i("order_summary.terms_and_conditions_business"),testId:"order-summary-terms-conditions"}),(0,z.jsx)(x.Z,{})]}):null,(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,theme:"success",text:i("purchase.complete_purchase"),onClick:()=>{(()=>{const e={type:"escrow",valid:u,transaction_id:t,payment_method:(null==o?void 0:o.code.toLowerCase())||null,...j()};s(Ri({target:qm.CheckoutPayButton,screen:$t.Checkout,targetDetails:JSON.stringify(e)}))})(),u?h?_(!0):(b(),r(hZ.initiateEscrowPaymentRequest())):S()},isLoading:g,testId:"purchase",disabled:!l,"aria-disabled":!u}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsxs)("div",{className:"u-flexbox u-justify-content-center ",children:[(0,z.jsx)(ht.Z,{color:ht.Z.Color.GreyscaleLevel3,name:"checkmark-shield",size:ht.Z.Size.Small,aria:{"aria-hidden":"true"}}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(xt.Z,{text:i("purchase.description"),type:xt.Z.Type.Subtitle,testId:"purchase--description"})]}),(0,z.jsx)(Ok,{show:v,trackingDetails:{transactionId:t},onInputConfirmed:e=>{_(!1),r(mZ.confirmBlikAuth({blikCode:e}))},onCancel:()=>{_(!1)}})]})},w7=e=>{let{transactionId:t,isPurchaseVisible:i=!1}=e;const n=U("checkout.order_summary"),{phones:s}=E(),{track:r}=vi(),a=(0,p.v9)(W),o=(0,p.v9)(Nc),l=(0,p.v9)(gZ.getPricing),c=(0,p.v9)(gZ.getIsBundleOrder),d=(0,p.v9)(gZ.getCurrencyConversion),u=(0,p.v9)(gZ.getIsPaymentProcessing),g=(0,p.v9)(gZ.getIsSellerBusinessUser),h=(0,p.v9)(gZ.getIsIntergratedShipping),f="checkout-order-summary",y=null==a?void 0:a.service_fee_ui_discount,[v,_]=(0,m.useState)(!1),[b,j]=(0,m.useState)(!1),[S,Z]=(0,m.useState)(!1),I=H5({withEventListeners:!0,transactionId:t,screen:$t.EscrowFeeEducationModal,isModalOpened:v||b||S}),C=()=>{_(!0),r(Ri({screen:$t.Checkout,target:qm.SalesTaxInfo,targetDetails:JSON.stringify({transaction_id:t})}))},k=()=>{r(Ri({screen:c?$t.BundleSummary:$t.Checkout,target:qm.ServiceFeeInfo,targetDetails:JSON.stringify({transaction_id:t})})),j(!0)},w=()=>{Z(!1),I()},P=e=>{const t=Number(e.amount);return Number.isNaN(t)||0===t?null:Ua(e,o,{formatAsNegative:!0})},T=e=>{let{price:t,isWraped:i=!0,isAmplified:n=!1}=e;const s={bold:n,theme:n?"amplified":void 0};return r=t?(0,z.jsx)(xt.Z,{text:Ua(t,o),...s}):(0,z.jsx)(xt.Z,{text:"",...s}),i?(0,z.jsx)("div",{className:"u-nowrap",children:r}):r;var r},F=()=>{if(!y)return null;const e=null==l?void 0:l.buyerProtectionFee.price;return e?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{strikethrough:!0,text:"".concat(Ua(e,o))}),""]}):null},N=e=>e?(0,z.jsx)(gt.Z,{testId:"".concat(f,"-wallet-deduction"),styling:gt.Z.Styling.Tight,title:(0,z.jsx)(xt.Z,{text:n("vinted_wallet_deduction")}),suffix:(0,z.jsx)("div",{className:"u-nowrap",children:(0,z.jsx)(xt.Z,{text:e})})}):null;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Kp,{screen:$t.Checkout,disabled:u,params:{transaction_id:t}}),(0,z.jsxs)(gt.Z,{testId:f,styling:gt.Z.Styling.Tight,children:[(0,z.jsx)(yt.Z,{type:yt.Z.Type.Leading,styling:s?yt.Z.Styling.Default:yt.Z.Styling.Wide,text:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:n("title")}),testId:"".concat(f,"-title")}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,children:(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),children:[(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Tight,disabled:u,children:[(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),children:[(0,z.jsx)(gt.Z,{testId:"".concat(f,"-order-price"),styling:gt.Z.Styling.Tight,title:(0,z.jsx)(xt.Z,{text:n("order"),format:!0}),suffix:T({price:null==l?void 0:l.base.price})}),(()=>{const e=n(g?"buyer_protection_fee_pro":"buyer_protection_fee");return(0,z.jsx)(gt.Z,{testId:"".concat(f,"-buyer-protection-fee"),styling:gt.Z.Styling.Tight,body:(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center",children:[(0,z.jsx)(xt.Z,{text:"".concat(e).concat(y?" (-".concat(y,")"):""),format:!0}),(0,z.jsx)(ic.I,{deprecatedIcon:(0,z.jsx)(ht.Z,{color:ht.Z.Color.GreyscaleLevel3,name:"info-circle",size:ht.Z.Size.Small,aria:{"aria-label":n("a11y.buyer_protection_fee_info")}}),styling:ic.I.Styling.Flat,inline:!0,size:ic.I.Size.Small,onClick:k,testId:"bpf-info-circle"})]}),suffix:(0,z.jsxs)("div",{className:"u-nowrap",children:[F(),T({price:null==l?void 0:l.buyerProtectionFee.finalPrice,isWraped:!1})]})})})(),null!=l&&l.offlineVerificationFee?(0,z.jsx)(gt.Z,{testId:"".concat(f,"-offline-verification-price"),styling:gt.Z.Styling.Tight,title:(0,z.jsx)(xt.Z,{text:n("authenticity_check")}),suffix:T({price:l.offlineVerificationFee.finalPrice})}):null,(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{testId:"".concat(f,"-shipping-price"),styling:gt.Z.Styling.Tight,title:(0,z.jsx)(xt.Z,{text:n("shipping")}),suffix:T({price:null==l?void 0:l.shipping.finalPrice})}),(null==l?void 0:l.shippingNote)&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),(0,z.jsx)(xt.Z,{text:l.shippingNote,type:xt.Z.Type.Caption})]})]}),(()=>{if(null==l||!l.salesTax)return null;const e=l.salesTax.amount?Ua(l.salesTax,o):n("sales_tax_undefined"),{isSalesTaxCovered:t}=l;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{testId:"".concat(f,"-sales-tax"),styling:gt.Z.Styling.Tight,body:(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center",children:[(0,z.jsx)(xt.Z,{text:n("sales_tax")}),(0,z.jsx)(ic.I,{deprecatedIcon:(0,z.jsx)(ht.Z,{name:"info-circle",size:ht.Z.Size.Small,color:ht.Z.Color.GreyscaleLevel3,aria:{"aria-label":n("a11y.sales_tax")}}),styling:ic.I.Styling.Flat,inline:!0,size:ic.I.Size.Small,onClick:C,testId:"sales-tax-info-circle"})]}),suffix:(0,z.jsx)("div",{className:"u-nowrap",children:(0,z.jsx)(xt.Z,{text:e})})}),t&&(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,body:(0,z.jsx)(xt.Z,{text:n("sales_tax_covered_by_vinted"),highlightTheme:"amplified",type:xt.Z.Type.Subtitle})})]})})()]}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(()=>{if(!l)return null;const e=P(l.base.discount),t=P(l.payment.wallet);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),children:[(i=e,i?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{testId:"".concat(f,"-discount"),styling:gt.Z.Styling.Tight,title:(0,z.jsx)(xt.Z,{text:n("discount"),theme:"success"}),suffix:(0,z.jsx)("div",{className:"u-nowrap",children:(0,z.jsx)(xt.Z,{text:i,theme:"success"})})}),(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),(0,z.jsx)(xt.Z,{text:(null==l?void 0:l.discountNote)||(l?n("shopping_discount_extra_notice"):null),type:xt.Z.Type.Caption,testId:"".concat(f,"-discount-note")})]}):null),N(t)]}),(e||t)&&(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]});var i})(),d?(0,z.jsx)(gt.Z,{testId:"".concat(f,"-total-price"),styling:gt.Z.Styling.Tight,disabled:u,title:(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center",children:[(0,z.jsx)(xt.Z,{text:n("total_converted"),format:!0,theme:"amplified",bold:!0}),(0,z.jsx)(ic.I,{testId:"conversion-info-circle",deprecatedIcon:(0,z.jsx)(ht.Z,{color:ht.Z.Color.GreyscaleLevel3,name:"info-circle",size:ht.Z.Size.Small,aria:{"aria-label":n("a11y.currency_conversion_info")}}),styling:ic.I.Styling.Flat,inline:!0,size:ic.I.Size.Small,onClick:()=>{r(Ri({screen:c?$t.BundleSummary:$t.Checkout,target:qm.PricingDetails,targetDetails:JSON.stringify({transaction_id:t})})),Z(!0)}})]}),suffix:T({price:null==l?void 0:l.payment.payIn,isAmplified:!0})}):(0,z.jsx)(gt.Z,{testId:"".concat(f,"-total-price"),styling:gt.Z.Styling.Tight,disabled:u,title:n("total"),suffix:T({price:null==l?void 0:l.payment.payIn,isAmplified:!0})})]}),i?(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,body:(0,z.jsx)(k7,{transactionId:t})}):null]})})]}),(0,z.jsx)(qg,{isVisible:b,sellerIsBusinessUser:g,onClose:()=>{j(!1),I()}}),(()=>{if(!l)return null;if(!d)return null;const e=l.base.finalPrice.amount,t=l.shipping.finalPrice.amount,i=l.buyerProtectionFee.finalPrice.amount;return e&&i?(0,z.jsx)(s3,{conversion:d,price:e,shippingPrice:t,buyerProtectionFee:i,show:S,isIntegratedShipping:h,onClose:w}):null})(),null!=l&&l.salesTax?(0,z.jsx)(aC,{show:v,messageType:"item",onClose:()=>{_(!1),I()}}):null]})},P7=e=>{let{message:t,onClose:i}=e;return t?(0,z.jsx)("div",{className:"checkout__notification",children:(0,z.jsx)(mJ.Z,{deprecatedIcon:(0,z.jsx)(ht.Z,{name:"cancel-circle",color:ht.Z.Color.Warning,aria:{"aria-hidden":"true"}}),body:t,onClose:i})}):null},z7=e=>{let{transactionId:t,offlineVerification:i}=e;const n=(0,p.I0)(),s=U("checkout.authenticity_check"),{phones:r}=E(),{track:a}=vi(),o=(0,p.v9)(Nc),l=(0,p.v9)(gZ.getCheckoutDataUiState),[c,d]=(0,m.useState)(!1),u=H5({withEventListeners:!0,transactionId:t,screen:$t.Checkout,isModalOpened:c}),g=Ua(i.fee,o);return(0,z.jsxs)(gt.Z,{testId:"authenticity-check",styling:gt.Z.Styling.Tight,children:[(0,z.jsx)(yt.Z,{type:yt.Z.Type.Leading,styling:r?yt.Z.Styling.Default:yt.Z.Styling.Wide,text:s("label")}),(0,z.jsx)(gt.Z,{disabled:l===Ne.Pending,styling:gt.Z.Styling.Wide,title:s("title"),body:(0,z.jsx)(gt.Z,{clickable:!0,styling:gt.Z.Styling.Tight,onClick:()=>{d(!0),(()=>{const e=Ri({screen:$t.Checkout,target:qm.OfflineVerificationLearnMoreLink,targetDetails:JSON.stringify({transaction_id:t})});a(e)})()},children:(0,z.jsx)(xt.Z,{clickable:!0,text:s("learn_more"),testId:"authenticity-check--learn-more-link"})}),suffix:(0,z.jsx)(gt.Z,{theme:"transparent",styling:gt.Z.Styling.Tight,suffix:l===Ne.Pending?(0,z.jsx)(Dp.Z,{}):(0,z.jsx)(BZ.F,{name:"authenticity_checkbox",checked:i.enabled}),onClick:()=>{const e=!i.enabled;n(mZ.updateCheckoutDataRequest({transactionId:t,updatedCheckoutData:{isOfflineVerificationEnabled:e}})),n(mZ.resetShippingOptions()),(e=>{const i=Ri({screen:$t.Checkout,target:qm.OfflineVerificationCheckbox,targetDetails:JSON.stringify({transaction_id:t,check_authenticity:e})});a(i)})(e)},testId:"authenticity-check--checkbox-cell",body:(0,z.jsx)(xt.Z,{text:g})})}),(0,z.jsx)(pP,{show:c,verificationFee:g,onClose:()=>{d(!1),u()}})]})},T7=()=>{var e;const t=(0,p.I0)(),i=(0,p.v9)(wd),n=(0,p.v9)(gZ.getTransactionId),s=(0,p.v9)(gZ.getBuyerPhoneRequirement),r=(0,p.v9)(gZ.getIsShippingContactDisabled),a=(0,p.v9)(gZ.getIsShippingContactCompleted),o=(0,p.v9)(gZ.getAddress),l=(null===(e=Xn({abTestName:"require_address_before_delivery_method_selection"}))||void 0===e?void 0:e.variant)===$k.On,[c,d]=(0,m.useState)(!1),u=H5({withEventListeners:!0,transactionId:n,screen:$t.ContactDetails,isModalOpened:c});return l&&!o?null:n&&!r&&s?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(D_,{isCheckout:!0,isDisabled:!1,type:yd.Buyer,translationPrefix:"shipping_contact.buyer",transactionId:n,phoneNumber:i,isCompleted:a,phoneRequirement:s,onClick:function(){d(!0)}}),(0,z.jsx)(VZ,{isOpen:c,transactionId:n,type:yd.Buyer,onClose:function(){d(!1),u(),t(Ay.removeShippingContactErrors())}})]}):null},F7=()=>{const e=(0,p.I0)(),t=(0,p.v9)(gZ.getPaymentAuthAction),i=(0,p.v9)(gZ.getThreeDS2Config);return t&&i?(0,z.jsxs)(cp.Z,{show:!0,className:"threeds2__challenge-modal",children:[(0,z.jsx)(Pm.Z,{right:(0,z.jsx)(ic.I,{inline:!0,deprecatedIconName:"x",styling:ic.I.Styling.Flat,testId:"checkout-payment-three-ds-modal--close",onClick:function(){e(mZ.cancelPaymentAuth())}})}),(0,z.jsx)(bk,{authAction:t,threeDS2Config:i,onContinue:function(t){e(hZ.updateEscrowPaymentDataRequest({paymentDetails:t.data.details,paymentData:t.data.paymentData})),e(mZ.clearPaymentAuthAction())},onError:function(t){e(mZ.setPaymentAuthActionError({message:t}))}})]}):null},N7=e=>{let{show:t,onClose:i}=e;const n=U("checkout.checksum_mismatch");return(0,z.jsx)(cp.Z,{show:t,title:n("title"),body:n("message"),actions:[{text:n("action"),style:cp.Z.ActionStyling.Filled,callback:i}]})},L7=e=>{let{show:t,onClose:i}=e;const n=U("checkout.shipping_discount_error");return(0,z.jsx)(cp.Z,{show:t,title:n("title"),body:n("message"),actions:[{text:n("action"),style:cp.Z.ActionStyling.Filled,callback:i,testId:"shipping-discount-error-modal-action-button"}],testId:"shipping-discount-error-modal"})},E7=e=>{let{show:t,onClose:i}=e;const n=(0,p.v9)(gZ.getTwoFactorVerification);return n?(0,z.jsx)(cp.Z,{show:t,children:(0,z.jsx)(_2,{verificationType:v2.Checkout,twoFAId:n.id,showResend:n.showResendOption,maskedNumber:n.userMaskedPhoneNumber,nextResendAvailableIn:n.nextResendAvailableIn,onCodeSent:i})}):null},O7=e=>{let{show:t,onClose:i}=e;const n=U("checkout.redirect_result");return(0,z.jsx)(cp.Z,{show:t,children:(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(xt.Z,{text:n("failure.explanation"),alignment:xt.Z.Alignment.Center,type:xt.Z.Type.Body}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(ic.I,{text:n("failure.action"),size:ic.I.Size.Medium,styling:ic.I.Styling.Filled,onClick:i,testId:"checkout-error-after-redirect-action-button"})]})})},R7=e=>{let{show:t,transactionId:i}=e;const n=U("checkout.redirect_result");return(0,z.jsx)(cp.Z,{show:t,children:(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(xt.Z,{text:n("pending.explanation"),alignment:xt.Z.Alignment.Center,type:xt.Z.Type.Body}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(ic.I,{text:n("pending.action"),size:ic.I.Size.Medium,styling:ic.I.Styling.Filled,url:(0,Me.hzM)(i),testId:"checkout-payment-processing-takes-too-long-action-button"})]})})},D7=e=>{let{payment:t,orderItems:i,orderPrice:n}=e;const s=(0,p.v9)(W),{googleTagManagerTrack:r}=hK();(0,m.useEffect)((()=>{s&&n&&(null==t?void 0:t.status)===rS.Success&&(async(e,t,i,n)=>{const{id:s,email:r}=e,a=await(async e=>{if("1"===(0,Bn.le)("hasBought-".concat(e)))return!1;const t=await(0,Fe.cG9)();return"errors"in t?void 0:1===t.value})(s);i.forEach((e=>{const t={item_id:e.id,value:parseFloat(e.price.amount),currency:e.price.currencyCode,user_email:r};n(Ob.ItemBuy,t)})),a&&n(Ob.FirstBuy,{value:parseFloat(t.amount),currency:t.currencyCode,user_email:r}),(0,Bn.D$)("hasBought-".concat(s),"1")})(s,n,i,r)}),[s,t,n,i,r])},A7=e=>e[dL],M7=e=>A7(e).fundraiser,U7=(0,B.P1)(M7,(e=>(null==e?void 0:e.percentage)||0)),B7=(0,B.P1)(M7,(e=>null==e?void 0:e.currency)),q7=(0,B.P1)(M7,(e=>(null==e?void 0:e.amountDonated)||0)),V7=(0,B.P1)(M7,(e=>null==e?void 0:e.active)),H7=(0,B.P1)(M7,(e=>{var t;return null==e||null===(t=e.charity)||void 0===t?void 0:t.heading})),G7=e=>A7(e).currentModalScreen,W7=e=>A7(e).charities,X7=e=>A7(e).selectedCharity,Y7=e=>A7(e).uiState,K7=e=>{let{onSuccess:t}=e;const i=U("fundraiser.charity_select"),n=Ql(),s=(0,p.v9)(W7),r=e=>()=>t(e),a=e=>{let{darkUrl:t,lightUrl:i}=e;const s=n?t:i;return(0,z.jsx)(Kl.U,{src:s,size:Kl.U.Size.Large,scaling:Kl.U.Scaling.Contain,alt:""})};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{text:i("title"),type:xt.Z.Type.Subtitle})}),(0,z.jsx)(L,{separator:(0,z.jsx)(h.Z,{}),children:s.map(((e,t)=>(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,prefix:a(e.logo),title:e.heading,body:e.description,onClick:r(e),chevron:!0},t)))})]})},J7=e=>{let{show:t,onConfirm:i,onCancel:n}=e;const s=U("fundraiser.stop_modal");return(0,z.jsx)(cp.Z,{show:t,title:s("title"),body:s("description"),actions:[{text:s("actions.confirm"),style:cp.Z.ActionStyling.Filled,theme:"primary",callback:i},{text:s("actions.cancel"),style:cp.Z.ActionStyling.Flat,callback:n}]})},Q7=[...new Array(20)].map(((e,t)=>5*(t+1))),$7=e=>{let{onUpdateFundraiser:t,onStopFundraiser:i,onSelectCharityClick:n}=e;const{track:s}=vi(),r=U("fundraiser.manage"),a=Ql(),o=(0,p.v9)(V7),l=(0,p.v9)(U7),c=(0,p.v9)(X7),[d,u]=(0,m.useState)(l||10),[g,h]=(0,m.useState)(!1),f=()=>t(d);return(0,z.jsxs)(gt.Z,{children:[(()=>{if(!c)return null;const e=a?c.logo.darkUrl:c.logo.lightUrl;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:r("description.title"),type:xt.Z.Type.Subtitle}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,prefix:(0,z.jsx)(Kl.U,{src:e,size:Kl.U.Size.Large,scaling:Kl.U.Scaling.Contain,alt:""}),title:c.heading,body:c.description}),o?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(ic.I,{onClick:n,size:ic.I.Size.Medium,testId:"manage-fundraiser-modal-select-button",children:r("actions.select_charity")})]}):null,(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large})]})})(),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:r("rate.title"),type:xt.Z.Type.Subtitle}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(yb.R,{name:"percentage",styling:yb.R.Styling.Tight,value:d.toString(),options:Q7.map((e=>({value:e.toString(),label:"".concat(e,"%")}))),onChange:e=>{u(Number(e.target.value))}}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(xt.Z,{text:r("rate.description"),type:xt.Z.Type.Caption}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large})]}),(0,z.jsx)(J7,{show:g,onConfirm:()=>{h(!1),i()},onCancel:()=>h(!1)}),o?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,onClick:()=>{var e;e=qm.FundraiserStop,s(un({screen:$t.FundraiserSetup,target:e})),h(!0)},testId:"manage-fundraiser-modal-stop-button",children:r("actions.stop")}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,onClick:f,testId:"manage-fundraiser-modal-update-button",children:r("actions.update")})]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,onClick:f,testId:"manage-fundraiser-modal-start-button",children:r("actions.start")})]})]})},e8=e=>{let{isOpen:t,onSuccess:i,onClose:n}=e;const s=(0,p.I0)(),{track:r}=vi(),a=U("fundraiser.manage"),o=(0,p.v9)(V7),l=(0,p.v9)(G7),c=(0,p.v9)(X7),d=e=>{var t;c&&(t=o?qm.FundraiserUpdate:qm.FundraiserStart,r(un({screen:$t.FundraiserSetup,target:t})),s(hL.manageFundraiserConfiguration({charityCode:c.code,percentage:e})),i())},u=()=>{s(hL.stopActiveFundraiser()),i()},m=()=>{s(hL.setCurrentModalScreen({screenName:o?cL.Overview:cL.CharitySelect})),n()},g=()=>{s(hL.setCurrentModalScreen({screenName:l===cL.CharitySelect?cL.Overview:cL.CharitySelect}))},x=()=>s(hL.setCurrentModalScreen({screenName:cL.CharitySelect})),f=e=>s(hL.setSelectedCharity({charity:e}));return(0,z.jsx)(cp.Z,{show:t,hasScrollableContent:!0,defaultCallback:n,testId:o?"fundraiser-overview-modal":"fundraiser-charity-select-modal",children:(0,z.jsxs)("div",{className:"u-fill-width",children:[(()=>{const e=o?"title.active":"title.inactive";return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Pm.Z,{left:o&&l===cL.Overview?null:o||l!==cL.CharitySelect?(0,z.jsx)(ic.I,{aria:{"aria-label":a("a11y.actions.back")},styling:ic.I.Styling.Flat,theme:"amplified",deprecatedIconName:"arrow-left",inline:!0,onClick:g,testId:"manage-fundraiser-modal-back-button"}):null,right:(0,z.jsx)(ic.I,{aria:{"aria-label":a("a11y.actions.close")},styling:ic.I.Styling.Flat,theme:"amplified",deprecatedIconName:"x",inline:!0,onClick:m,testId:"manage-fundraiser-modal-close-button"}),body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,text:a(e)})}),(0,z.jsx)(h.Z,{})]})})(),(0,z.jsx)(Lg,{children:(()=>{switch(l){case cL.CharitySelect:return(0,z.jsx)(K7,{onSuccess:f});case cL.Overview:return(0,z.jsx)($7,{onUpdateFundraiser:d,onStopFundraiser:u,onSelectCharityClick:x});default:return null}})()})]})})};var t8;!function(e){e.Name="realName"}(t8||(t8={}));const i8="merge.missing_full_name";var n8;!function(e){e.Name="name",e.PostalCode="postal_code"}(n8||(n8={}));const s8="merge.missing_user_information";let r8;!function(e){e.De="de",e.DeBabies="de_babies",e.Fr="fr",e.Lt="lt",e.LtBabies="lt_babies",e.Es="es",e.Nl="nl",e.Pl="pl",e.Cz="cz",e.Uk="uk",e.Us="us",e.Sb="sb"}(r8||(r8={}));const a8=e=>e[NE],o8=e=>a8(e).balance,l8=e=>a8(e).invoices,c8=(0,B.P1)(o8,(e=>{let{availableAmount:t}=e;return t})),d8=(0,B.P1)(o8,(e=>{let{pendingAmount:t}=e;return t})),u8=(0,B.P1)(o8,(e=>{let{uiState:t}=e;return t})),m8=(0,B.P1)(l8,(e=>{let{invoiceLines:t}=e;return t})),p8=(0,B.P1)(l8,(e=>{let{startBalance:t}=e;return t})),g8=(0,B.P1)(l8,(e=>{let{startBalance:t}=e;return t.currencyCode})),h8=(0,B.P1)(l8,(e=>{let{startingDate:t}=e;return t})),x8=(0,B.P1)(l8,(e=>{let{uiState:t}=e;return t})),f8=(0,B.P1)(l8,(e=>{let{endBalance:t}=e;return t})),y8=(0,B.P1)(l8,(e=>{let{history:t}=e;return t}));let v8;!function(e){e.Web="web",e.Android="android",e.iOS="ios"}(v8||(v8={}));const _8={us:"US-MERGE-SHIPPING-DISCOUNT",cz:"CZ-MERGE-SHIPPING-DISCOUNT"},b8={us:"US-MERGE-PRECOMMS-SECTION",cz:"CZ-MERGE-PRECOMMS-SECTION",pl:"PL-MERGE-PRECOMMS-SECTION"},j8=e=>{let{portal:t,userAgent:i}=e;const n=(0,p.I0)(),s=U(),r=Ql(),{balance:a,formattedCurrency:o,isLoading:l}=(()=>{const e=(0,p.I0)(),t=(0,p.v9)(W),i=(0,p.v9)(c8),n=(0,p.v9)(d8),s=(0,p.v9)(Nc),r=(0,p.v9)(u8),a=i||n,o=a?Ua(a,s):null,l=(0,m.useCallback)((()=>{null!=t&&t.id&&e(OE.getBalanceRequest({userId:null==t?void 0:t.id}))}),[e,null==t?void 0:t.id]);return(0,m.useEffect)((()=>{l()}),[l]),{balance:a,formattedCurrency:o,isLoading:Ne.Pending===r}})(),{host:c}=xc(),d=C9[t],u=_8[t]||b8[t]||bp.HelpCenterRoot,g=(0,p.v9)(W),f=(0,p.v9)((e=>vp(e,d))),y=(0,p.v9)((e=>vp(e,u))),v=[r8.De,r8.DeBabies,r8.Uk,r8.Us,r8.Pl].includes(t),_=(parseFloat(a.amount)>0&&v?"with_balance":g&&"without_balance")||"signed_out",b=r?"_dark":"",j=[f,y].includes(Ne.Pending),S=((e,t)=>as(e)?Me.jBf:os(e)?Me.Kcm:(0,ys.E_)(t))(i,c),Z=e=>{e.preventDefault(),n(NL.openAuthModal())};return l||j?(0,z.jsx)(Mp,{testId:"merge-closure-loader"}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"merge__closure-container",children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(()=>{const e=t===r8.Pl?"".concat(Be.UX,"/portal_merge/pl/closure_landing").concat(b,".png"):"".concat(Be.UX,"/portal_merge/closure/landing_desktop.png"),i=![r8.Cz,r8.Pl].includes(t);return(0,z.jsxs)("div",{className:"merge__closure-image",children:[(0,z.jsxs)("div",{className:"u-tablets-up-only",children:[(0,z.jsx)(Kl.U,{src:e}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]}),i&&(0,z.jsx)("div",{className:"u-phones-only",children:(0,z.jsx)(Kl.U,{src:"".concat(Be.UX,"/portal_merge/closure/landing_mobile.png")})})]})})(),(()=>{const e=t===r8.Cz&&"".concat(Be.UX,"/portal_merge/cz/closure_mobile.png")||t===r8.Pl&&"".concat(Be.UX,"/portal_merge/pl/closure_mobile").concat(b,".png")||null;return e?(0,z.jsx)("div",{className:"merge-small-container__image u-phones-only",children:(0,z.jsx)(Kl.U,{src:e})}):null})(),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)("div",{className:"merge__closure-header",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:s("merge.closure.".concat(_,".heading"),{balance:o}),html:!0})}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(()=>{const e={"help-link":e=>(0,z.jsx)(_p,{type:u,render:t=>(0,z.jsx)("a",{href:(0,ys.d5)(t,S),target:"_blank",rel:"noreferrer noopener",children:e})})};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"u-tablets-up-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.Large})}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Body,text:s("merge.closure.".concat(_,".body"),e),html:!0})]})})(),(()=>{if(!v)return null;if("with_balance"===_)return null;const e={"login-link":e=>(0,z.jsx)("a",{href:Me.iGV,onClick:Z,children:e})};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(xt.Z,{text:s("merge.closure.".concat(_,".status.title")),type:xt.Z.Type.Title}),(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),(0,z.jsx)(xt.Z,{text:s("merge.closure.".concat(_,".status.body"),e),type:xt.Z.Type.Body,html:!0})]})})(),(()=>{if(!v)return null;const e={"help-link":e=>(0,z.jsx)(_p,{type:d,accessChannel:Be.Si.VintedGuide,render:t=>(0,z.jsx)("a",{href:t,target:"_blank",rel:"noreferrer noopener",children:e})})};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Body,text:s("merge.closure.footer",e),html:!0})]})})(),(0,z.jsx)("div",{className:"u-phones-only u-flex-grow"}),(()=>{if(!g)return null;if(!v)return null;const e=parseFloat(a.amount)>0&&v?"/wallet/balance":S;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(ic.I,{testId:"merge-closure-action-button",url:e,styling:ic.I.Styling.Filled,text:s("merge.closure.".concat(_,".action"))})]})})(),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})]}),[r8.De,r8.DeBabies].includes(t)?(0,z.jsxs)("div",{className:"container u-text-right u-ui-padding-small",children:[(0,z.jsx)(ic.I,{url:Me.v24,styling:ic.I.Styling.Flat,text:s("merge.closure.actions.impressum"),inline:!0}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(ic.I,{url:"".concat(S).concat(Me.hOY),styling:ic.I.Styling.Flat,text:s("merge.closure.actions.privacy_policy"),inline:!0})]}):null]})};function S8(){(0,ls.ru)((0,ys.Iq)(Me.iGV,{ref_url:Me.$WJ}))}var Z8=i(54415);const I8=e=>{let{targetDetails:t}=e;const i=U("items_list.empty_state"),{track:n}=vi();return(0,z.jsx)(tc.Z,{title:i("title"),body:i("description"),action:(0,z.jsx)(ic.I,{text:i("actions.browse"),styling:ic.I.Styling.Filled,url:Me.JXU,onClick:function(){n(Ri({target:qm.BrowseCatalog,targetDetails:t}))}}),animation:(0,z.jsx)(u.Z,{animationUrl:"/assets/animations/items-list-empty-state.json"})})},C8=e=>{let{isEmpty:t,children:i,infoBannerScreen:n,clickableElementTarget:s,targetDetails:r,showInfoBanner:a=!0}=e;function o(){return a&&n&&s?(0,z.jsx)(Kp,{screen:n,linkTracking:{target:s}}):null}return t?(0,z.jsxs)("div",{className:"u-ui-margin-horizontal-regular@portables",children:[o(),(0,z.jsx)(I8,{targetDetails:r})]}):(0,z.jsxs)("div",{children:[o(),i]})};class k8 extends m.Component{constructor(){super(...arguments),function(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(this,"renderActions",(()=>{const{actions:e}=this.props;return null!=e&&e.length?(0,z.jsx)("div",{className:"banner-actions__container",children:e.map((e=>(0,z.jsx)(m.Fragment,{children:e},ZF().v4())))}):null}))}renderBanner(){const{title:e,body:t,prefix:i,children:n,breakpoints:s,highlighted:r}=this.props,a=this.renderActions(),o=n||t;return(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Tight,highlighted:r,children:[(0,z.jsxs)(gt.Z,{prefix:i,suffix:s.phones?null:a,highlighted:r,children:[e&&(0,z.jsx)("div",{children:e}),o&&(0,z.jsx)("div",{children:o})]}),!!a&&(0,z.jsx)("div",{className:"u-phones-only u-ui-margin-horizontal-large u-ui-margin-bottom-large",children:a})]})}render(){const{breakpoints:e}=this.props;return e.phones?this.renderBanner():(0,z.jsx)("div",{className:"u-fill-width",children:(0,z.jsx)(g.Z,{children:(0,z.jsx)("div",{className:"u-overflow-hidden",children:this.renderBanner()})})})}}const w8=F(k8),P8=e=>{let{show:t,onDismiss:i}=e;const n=U();return t?(0,z.jsxs)("div",{className:"u-position-relative","data-testid":"items-list--sold-notification",children:[(0,z.jsx)(w8,{body:(0,z.jsx)(xt.Z,{text:n("items_list.sold_notification.body")}),actions:[(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,text:n("items_list.sold_notification.actions.dismiss"),onClick:i})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]}):null},z8=P0(k0),T8=e=>{let{items:t,hasMore:i,onLoadMore:n=v.noop,isSoldNotificationShown:s=!1,onNotificationDismissClick:r=v.noop,targetDetails:a,clickableElementTarget:o,infoBannerScreen:l,contentSource:c,handleErrorLogging:d,preventLog:u,homepageSessionId:m,showInfoBanner:g}=e;const{track:h}=vi(),x=(0,p.v9)(X),f=0===(null==t?void 0:t.length)&&!i;function y(e){let{itemId:t,isFollowEvent:i,itemContentSource:n}=e;h(Ri({target:qm.Favourite})),h(Ai({itemId:t,isFollowEvent:i,homepageSessionId:m,contentSource:n||c}))}function _(e){let{item:t,index:i}=e;const n=Bi({id:t.id,position:i+1,contentType:z0.Item,contentSource:t.data.contentSource||c,itemOwnerId:t.data.user.id||x,homepageSessionId:m});h(n)}function b(e){let{item:{data:t},index:i}=e;return(0,z.jsx)(z8,{item:t,showOwner:!0,showStatus:!0,onFavouriteToggle:y,tracking:{id:t.id,contentType:z0.Item,contentSource:t.contentSource||c,position:i+1,homepageSessionId:m}})}return(0,z.jsxs)(C8,{isEmpty:f,clickableElementTarget:o,infoBannerScreen:l,targetDetails:a,showInfoBanner:g,children:[(0,z.jsx)(P8,{show:s,onDismiss:r}),(0,z.jsx)(Qp,{renderItems:function(){if(!t)return null;const e=t.map((e=>({id:e.id,data:e})));return(0,z.jsx)(V2,{items:e,renderItem:b,onItemVisible:_,handleErrorLogging:d,preventLog:u})},onPageEnd:n,cursor:"".concat(a,"-").concat((null==t?void 0:t.length)||0),includeTopOffset:!0}),i&&(0,z.jsx)(Mp,{size:Mp.Size.Large,styling:Mp.Styling.Tight,testId:"items-list--loader"})]})},F8=e=>(e=>e[fL])(e).isSoldNotificationShown;let N8;!function(e){e.Favourites="favourites",e.RecommendedItems="recommended_items",e.MoreHomepageItems="more_homepage_items"}(N8||(N8={}));function L8(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v.noop;(0,m.useEffect)((()=>{function i(i){("function"!=typeof e||e())&&(t(),(0,ls.rf)(i))}if(e)return window.addEventListener("beforeunload",i),()=>window.removeEventListener("beforeunload",i)}),[e,t])}const E8=()=>{const e=Xn({abTestName:"multiple_collections"});return!(null==e||!e.variant)&&(null==e?void 0:e.variant)!==$k.Off},O8="select",R8="review";function D8(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class A8 extends m.Component{constructor(){super(...arguments),D8(this,"translate",((e,t)=>(0,z.jsx)(vt.Z,{id:"user.items.filters.sort.".concat(e),values:t}))),D8(this,"handleItemClick",(e=>{const{onItemClick:t}=this.props;t(e.value)}))}renderDropdown(){const e=Object.values(uR).map((e=>({id:e,title:this.translate("options.".concat(e)),value:e}))),{selected:t}=this.props;return(0,z.jsx)("div",{className:"u-ui-padding-vertical-x-small",children:(0,z.jsx)(T3,{name:"sort_by",items:e,selected:[t],onItemClick:this.handleItemClick})})}render(){return(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center",children:[(0,z.jsx)(xt.Z,{theme:"amplified",type:xt.Z.Type.Subtitle,text:this.translate("name")}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(w3,{title:this.translate("options.".concat(this.props.selected)),placement:"bottom-end",closeOnClick:!0,children:this.renderDropdown()})]})}}D8(A8,"defaultProps",{selected:uR.Relevance});const M8=A8;function U8(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const B8="_ALL_ROOT",q8=e=>{const{id:t,title:i,catalogIds:n,parentId:s,code:r,depth:a,itemCount:o,photo:l}=e;return{id:t,title:i,value:t,data:{id:t,catalogIds:n,parentId:s,code:r,depth:a,itemCount:o,photo:l}}};class V8 extends m.Component{constructor(){super(...arguments),U8(this,"state",{navigatedCatalogId:va}),U8(this,"translate",(e=>{const{intl:t}=this.props;return t.formatMessage({id:"user.items.filters.catalog.".concat(e)})})),U8(this,"getCatalogListItems",(e=>{const t=this.getCatalogList(e),i=t.map(q8);return e===va&&i.unshift({id:va,title:this.translate("all"),value:va,data:{id:va,catalogIds:[],parentId:va,code:B8,depth:0,itemCount:t.reduce(((e,t)=>{let{itemCount:i}=t;return e+i}),0),photo:null}}),i})),U8(this,"handleCatalogClick",(e=>{const{toggleCatalogFilterOption:t}=this.props,i=e.data;i.catalogIds.length>0&&i.code!==_a?this.setState({navigatedCatalogId:Number(e.id)}):i.code!==B8?e.id&&t(Number(e.id)):t(null)})),U8(this,"handleBackClick",(e=>()=>{this.setState({navigatedCatalogId:Number(e.parentId)})})),U8(this,"renderCatalog",(e=>{let{item:t,itemElementProps:i}=e;const n=t.data,{catalogIds:s,code:r,depth:a,photo:o}=n,l=this.renderIcon(o,r,a);return s.length&&r!==_a?(0,z.jsx)(gt.Z,{...i,prefix:l,suffix:n.itemCount,chevron:!0}):(0,z.jsx)(gt.Z,{...i,prefix:l,suffix:(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center",children:[n.itemCount,(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),i.suffix]})})})),U8(this,"renderIcon",((e,t,i)=>i>1?null:t===_a||t===B8?(0,z.jsx)(Wy.Z,{name:R3.Z,color:Wy.Z.Color.Primary}):e?(0,z.jsx)(Kl.U,{...za(e),size:Kl.U.Size.Regular}):null))}getCatalogList(e){const{catalogs:t}=this.props,i=(0,jK.Uy)(t.find((t=>t.id===e)),(e=>{e&&(e.title=this.translate("all"),e.code=_a,e.depth+=1)}));return(0,v.compact)([i,...t.filter((t=>t.parentId===e)).sort(UT)])}getSelectedName(){const{selectedId:e,catalogs:t}=this.props;if(!e)return this.translate("all");const i=t.find((t=>{let{id:i}=t;return i===e}));return i?i.title:""}renderNavigation(){const{navigatedCatalogId:e}=this.state,{catalogs:t}=this.props,i=t.find((t=>{let{id:i}=t;return i===e}));return i?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Pm.Z,{left:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,theme:"amplified",icon:(0,z.jsx)(Wy.Z,{name:Qy.Z}),onClick:this.handleBackClick(i),testId:"catalog-filter-go-back"}),body:i.title}),(0,z.jsx)(h.Z,{})]}):null}renderDropdown(){const{selectedId:e}=this.props,{navigatedCatalogId:t}=this.state,i=this.getCatalogListItems(t),n=null===e?[-1]:[e];return(0,z.jsxs)("div",{className:"u-ui-padding-vertical-x-small",children:[this.renderNavigation(),(0,z.jsx)(Lg,{maxHeight:320,children:(0,z.jsx)(T3,{name:"catalog_ids",isMultiSelect:!1,items:i,selected:n,onItemClick:this.handleCatalogClick,renderItem:this.renderCatalog})})]})}render(){return(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center",children:[(0,z.jsx)(xt.Z,{theme:"amplified",type:xt.Z.Type.Subtitle,text:this.translate("name")}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(w3,{title:this.getSelectedName(),minWidth:300,placement:"bottom-end",children:this.renderDropdown()})]})}}const H8=(0,iw.ZP)(V8),G8=e=>{let{sortBy:t,catalogId:i,updateFilters:n}=e;const{track:s}=vi(),r=(0,p.v9)(X),[a,o]=(0,m.useState)(),{fetch:l,data:c}=ih(Fe.jkM),{fetch:d,data:u}=ih(Fe.Nuq);return(0,m.useEffect)((()=>{r&&(l(),d({userId:r}))}),[l,d,r]),(0,m.useEffect)((()=>{c&&u&&o(XO(c.catalogs,u.catalogs))}),[c,u]),(0,z.jsxs)("div",{className:"u-text-left u-flexbox u-flex-wrap",children:[!(null==a||!a.length)&&(0,z.jsx)(H8,{catalogs:a,selectedId:i,toggleCatalogFilterOption:function(e){n(t,e),s(Ln({screen:$t.FeaturedCollectionItemSelection,sortBy:t,catalogId:null==e?void 0:e.toString()}))}}),(0,z.jsx)(M8,{selected:t,onItemClick:function(e){n(e,i),s(Ln({screen:$t.FeaturedCollectionItemSelection,sortBy:e,catalogId:null==i?void 0:i.toString()}))}})]})},W8=uR.Relevance,X8=()=>{const e=(0,p.v9)(X),[t,i]=(0,m.useState)(0),[n,s]=(0,m.useState)(!1),[r,a]=(0,m.useState)(W8),[o,l]=(0,m.useState)(null),[c,d]=(0,m.useState)([]),{fetch:u,isLoading:g}=ih(Fe.RDp,hx);return{items:c,isLoading:g,fetchNextPage:(0,m.useCallback)((async()=>{if(!e||n)return;const{data:a,transformedData:l}=await u({userId:e,filter:Ta.Collectable,order:r,catalogIds:o?[o]:void 0,perPage:20,currentPage:t});if(!l||!a)return;const{current_page:c,total_pages:m}=a.pagination;d((e=>(0,v.uniqBy)([...e,...l],"id"))),i(c),s(c===m)}),[o,t,e,n,u,r]),updateFilters:function(e,t){e===r&&t===o||(a(e||W8),l(t),d([]),i(0),s(!1))},filters:{sortBy:r,catalogId:o},endReached:n}},Y8=uR.Relevance,K8=()=>{const[e,t]=(0,m.useState)(0),[i,n]=(0,m.useState)(!1),[s,r]=(0,m.useState)(Y8),[a,o]=(0,m.useState)(null),[l,c]=(0,m.useState)([]),{fetch:d,isLoading:u}=ih(Fe.WLg,vx);return{items:l,isLoading:u,fetchNextPage:(0,m.useCallback)((async()=>{if(i)return;const{transformedData:r}=await d({order:s,catalogIds:a?[a]:void 0,perPage:20,currentPage:e});if(!r)return;const{items:o,pagination:l}=r,{currentPage:u,totalPages:m}=l;c((e=>(0,v.uniqBy)([...e,...o],"id"))),t(u),n(u===m)}),[a,e,i,d,s]),updateFilters:function(e,i){e===s&&i===a||(r(e||Y8),o(i),c([]),t(0),n(!1))},filters:{sortBy:s,catalogId:a},endReached:i}},J8=e=>{let{featuredCollectionId:t,selectedItems:i,maxItemsCount:n,updateSelectedItems:s,switchEditStage:r,updateSelectionVisitedStatus:a,navigate:o}=e;const l=U("featured_collection"),{track:c}=vi(),d=E8()?K8:X8,{items:u,isLoading:m,fetchNextPage:p,updateFilters:g,filters:h,endReached:f}=d();return(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column u-fill-dynamic-viewport",children:[(0,z.jsx)("div",{className:"action-header",children:(0,z.jsx)("div",{className:"container u-ui-margin-vertical-medium",children:(0,z.jsx)(Pm.Z,{left:(0,z.jsx)(ic.I,{deprecatedIconName:"x",styling:ic.I.Styling.Flat,inline:!0,onClick:function(){o()},testId:"featured-collection-close"}),body:function(){const e={limit:n,count:i.length},t=i.length>0?"selected":"empty";return(0,z.jsx)(xt.Z,{text:l("hint.".concat(t),e),type:xt.Z.Type.Subtitle})}()})})}),(0,z.jsx)("div",{className:"u-flex-grow",children:(0,z.jsxs)("div",{className:"container",children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{text:l("item_selection_title"),type:xt.Z.Type.Heading})}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(G8,{sortBy:h.sortBy,catalogId:h.catalogId,updateFilters:g})}),(0,z.jsx)(W2,{items:u,isLoading:m,loadItems:p,selectedItems:i,endReached:f,viewingSelf:!0,updateSelectedItems:s,showFavourite:!0,selectionLimit:n,emptyState:(0,z.jsx)(tc.Z,{body:l("empty_state.multiselect.body")}),itemWidthResolver:function(){return"one-fifth"},resolveItemCollectionTitle:function(e){var i;const n=u.find((t=>t.id===e));if(null==n||null===(i=n.collections)||void 0===i||!i.length)return;const s=n.collections.find((e=>e.id!==t));return null==s?void 0:s.title}}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})]})}),(0,z.jsx)("div",{className:"action-footer",children:(0,z.jsx)("div",{className:"container u-ui-margin-vertical-medium",children:(0,z.jsx)(Pm.Z,{left:(0,z.jsx)("span",{"data-testid":"item-thumbnails",children:(0,z.jsx)(K2,{items:i})}),right:(0,z.jsx)(ic.I,{text:l("actions.next"),styling:ic.I.Styling.Filled,onClick:function(){c(Ri({screen:$t.FeaturedCollectionItemSelection,target:qm.AddItems})),a(),r()},disabled:!i.length,inline:!0,testId:"featured-collection--action-next"})})})})]})};var Q8=i(64430);const $8=e=>{let{isOpen:t,onSubmit:i,onClose:n}=e;const s=U("featured_collection.modals.delete");return(0,z.jsx)(cp.Z,{show:t,title:s("title"),body:s("text"),actions:[{text:s("action"),style:cp.Z.ActionStyling.Filled,theme:"warning",callback:i,testId:"featured-collection-delete-modal--action-confirm"},{text:s("secondary_action"),theme:"warning",callback:n}]})};var e6=i(39609);const t6=new Error("Implement this before using it"),i6=(0,m.createContext)({indexes:{},items:[],addItem(){throw t6},removeItem(){throw t6}}),n6=e=>{let{testId:t,className:i,children:n,onDragStart:s,onDragOver:r,onSortUpdate:a}=e;const{items:o,indexes:l}=(0,m.useContext)(i6),c=(0,e6.Dy)((0,e6.VT)(e6.MA),(0,e6.VT)(e6.LO));return(0,z.jsx)(e6.LB,{accessibility:{screenReaderInstructions:{draggable:""}},sensors:c,collisionDetection:e6.pE,onDragEnd:function(e){let{active:t,over:i}=e;i&&a(l[t.id],l[i.id])},onDragStart:function(e){let{active:t}=e;null==s||s(l[t.id])},onDragOver:function(e){let{active:t,over:i}=e;null==r||r(l[t.id],i?l[i.id]:void 0)},autoScroll:!1,children:(0,z.jsx)(WF.Fo,{items:o,children:(0,z.jsx)("div",{className:i,"data-testid":t,children:n})})})},s6=e=>{let{children:t}=e;const[i,n]=(0,m.useState)({}),s=(0,m.useCallback)(((e,t)=>n((i=>({...i,[e]:t})))),[]),r=(0,m.useCallback)((e=>n((t=>{let{[e]:i,...n}=t;return n}))),[]),a=(0,m.useMemo)((()=>{return{indexes:i,items:(e=i,Object.entries(e).sort(((e,t)=>{let[,i]=e,[,n]=t;return i-n})).map((e=>{let[t]=e;return t}))),addItem:s,removeItem:r};var e}),[s,i,r]);return(0,z.jsx)(i6.Provider,{value:a,children:t})},r6=e=>(0,z.jsx)(s6,{children:(0,z.jsx)(n6,{...e})});r6.Item=e=>{let{id:t,index:i,className:n,children:s}=e;const r=String(t),{addItem:a,removeItem:o}=(0,m.useContext)(i6),{active:l,attributes:c,listeners:d,setNodeRef:u,transform:p,transition:g}=(0,WF.nB)({id:r});(0,m.useEffect)((()=>a(r,i)),[a,r,i]),(0,m.useEffect)((()=>()=>o(r)),[r,o]);const h=(null==l?void 0:l.id)===r,x={};if(l&&(x.transition=g,p)){const e=Math.round(p.x),t=Math.round(p.y);x.transform="translate(".concat(e,"px, ").concat(t,"px) scaleX(").concat(p.scaleX,") scaleY(").concat(p.scaleY,")")}return(0,z.jsx)("div",{...c,...d,ref:u,style:x,className:y()(n,{"u-auto-pointer-events u-cursor-grabbing u-disabled u-position-relative u-zindex-bump":h,"u-cursor-grab":!h}),children:s})},r6.arrayMove=WF.Rp;const a6=r6,o6=e=>{let{items:t,onAddMoreClick:i,updateItemsSorting:n,onRemoveItemClick:s}=e;const r=U("featured_collection"),a=E(),[o,l]=(0,m.useState)(!1);return(0,z.jsxs)(z.Fragment,{children:[a.tabletsUp&&(0,z.jsx)("div",{children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:r("input.items.title")})}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:r("reorder_note")}),(0,z.jsxs)(a6,{className:"u-flexbox u-flex-wrap",onSortUpdate:function(e,i){if(l(!1),e===i)return;const s=a6.arrayMove(t.map((e=>e.id)),e,i);n(s)},onDragStart:function(){l(!0)},children:[t.map((function(e,i){const n=t.length>1&&!o;return(0,z.jsxs)("div",{className:"featured-collection__review-image-container",children:[(0,z.jsx)(a6.Item,{id:e.id,index:i,children:(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column u-ui-margin-regular","data-testid":"item-preview-".concat(e.id),children:[(0,z.jsx)("div",{className:"featured-collection__review-image",children:(0,z.jsx)(Kl.U,{src:e.photoUrl,styling:Kl.U.Styling.Rounded,scaling:Kl.U.Scaling.Cover})}),(0,z.jsx)(x.Z,{}),(0,z.jsxs)("div",{className:"u-flexbox u-justify-content-center",children:[(0,z.jsx)(xt.Z,{text:e.price,type:xt.Z.Type.Subtitle,theme:"amplified",bold:!0,testId:"feature-collection--item-price"}),e.oldPrice&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)(xt.Z,{text:e.oldPrice,type:xt.Z.Type.Subtitle,theme:"muted",strikethrough:!0,testId:"feature-collection--old-item-price"})]}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical})]})]})},e.id),n&&(0,z.jsx)("div",{className:"featured-collection__review-image-remove-button",children:(0,z.jsx)(ic.I,{deprecatedIcon:(0,z.jsx)(ht.Z,{name:"x",color:ht.Z.Color.GreyscaleLevel1,size:ht.Z.Size.Small}),size:ic.I.Size.Small,inverse:!0,styling:ic.I.Styling.Filled,inline:!0,onClick:(r=e.id,()=>{s(r)}),testId:"item-preview-".concat(e.id,"--remove")})})]},e.id);var r})),(0,z.jsx)("div",{className:"featured-collection__review-image u-ui-margin-regular",children:(0,z.jsx)(ic.I,{deprecatedIcon:(0,z.jsx)(ht.Z,{name:"plus",color:ht.Z.Color.Primary}),inline:!0,onClick:i,testId:"featured-collection--add-more"})})]})]})},l6=e=>{let{order:t,isMultipleCollectionsEnabled:i}=e;const n=U(i?"featured_collection.multiple.order_confirmation_modal.order_summary":"featured_collection.order_confirmation_modal.order_summary"),s=(0,p.v9)(Nc),{payableAmount:r,effectiveDays:a}=t;return(0,z.jsxs)(gt.Z,{children:[function(){const e=n("price_day_count",{count:a},{count:a});return(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,suffix:Ua(r,s),children:(0,z.jsx)(xt.Z,{text:"".concat(n("price",{count:t.maxActiveCollectionsCount})," ").concat(e)})})}(),(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,title:n("total"),suffix:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:Ua(r,s)})})]})]})},c6=e=>{let{order:t,show:i,isMultipleCollectionsEnabled:n,onBack:s,onConfirmOrder:r,onPaymentMethodSelect:a}=e;const{track:o}=vi(),l=U(n?"featured_collection.multiple.order_confirmation_modal":"featured_collection.order_confirmation_modal"),c=U("payment_method_selection.errors"),[d,u]=(0,m.useState)(),g=(0,p.v9)(ZC),f=(0,p.v9)(FC),y=(0,p.v9)(CC),v=(0,p.v9)((e=>NC(e,null==t?void 0:t.payableAmount.amount))),_=(0,p.v9)((e=>PC(e,null==t?void 0:t.payableAmount.amount))),b=!!t&&parseFloat(t.payableAmount.amount)<=0,j=!!v||b,S=!t||!1===t.isTaxCoverageAvailable;return(0,m.useEffect)((()=>{j&&d&&u(void 0)}),[j,d]),(0,z.jsx)(cp.Z,{show:i,hasScrollableContent:!0,children:(0,z.jsxs)("div",{className:"u-fill-width",children:[(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{children:(0,z.jsx)(Pm.Z,{body:l("title"),testId:"featured-collection-confirmation-modal-title"})}),(0,z.jsx)("div",{className:"u-padding-horizontal-medium",children:(0,z.jsx)(Kp,{screen:Hp.VASCheckout})}),(0,z.jsx)(h.Z,{})]}),(0,z.jsxs)(Lg,{children:[t?(0,z.jsxs)(z.Fragment,{children:[t?(0,z.jsx)(l6,{order:t,isMultipleCollectionsEnabled:n}):null,(0,z.jsx)(h.Z,{}),!b&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Hk,{error:d,walletBalance:g,selectedCreditCard:f,activePayInMethod:v,onPaymentMethodSelect:a}),(0,z.jsx)(h.Z,{})]}),(0,z.jsx)(z$,{}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),function(){const e=(null==v?void 0:v.code)===iv.Wallet;return _||e?null:(0,z.jsx)(ah.Z,{alignment:ah.Z.Alignment.Center,text:l("wallet_funds_availability_note")})}()]}):null,(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(ic.I,{disabled:S,isLoading:y===Oi.Processing,text:l("actions.place_order"),styling:ic.I.Styling.Filled,onClick:function(){j?(o(Ri({screen:$t.FeaturedCollectionOrderConfirm,target:qm.PayFeaturedCollection})),r()):u(c("not_selected_payment_method"))},testId:"featured-collection-order-confirmation--confirm-button"}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,text:l("actions.back"),testId:"featured-collection-checkout-back-button",onClick:s})]})]})]})})},d6=e=>{let{isShown:t,plansPricing:i,selectedPlanId:n,isErrorHappened:s,isLoading:r,onNextAction:a,onClose:o,onPlanSelect:l,onPageReloadClick:c}=e;const{track:d}=vi(),u=U("featured_collection.multiple.pre_checkout_modal"),m=(0,p.v9)(Nc);function f(e){return(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center",children:[Ua(e.totalPrice,m),(0,z.jsx)(x.Z,{}),(0,z.jsx)(qx.J,{checked:n===e.id,name:"collections_plan_option",value:e.id,testId:"collections-plan-option-radio-".concat(e.id)})]})}return(0,z.jsx)(cp.Z,{show:t,hasScrollableContent:!0,testId:"plan-selection-modal",children:(0,z.jsxs)("div",{className:"u-fill-width",children:[(0,z.jsx)(Pm.Z,{right:(0,z.jsx)(ic.I,{deprecatedIconName:"x",theme:"amplified",styling:ic.I.Styling.Flat,testId:"collections-plan-selection-close-button",onClick:o}),body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,text:u("title")})}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(Lg,{children:!s||i||r?r||!i?(0,z.jsx)(Mp,{styling:Mp.Styling.Wide,size:Mp.Size.Large,testId:"plans-selection-modal-loader"}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{text:u("body")})}),(0,z.jsx)("div",{className:"u-ui-margin-horizontal-large u-ui-margin-bottom-large",children:(0,z.jsx)(g.Z,{children:(0,z.jsx)("div",{className:"u-overflow-hidden",children:(0,z.jsx)(L,{separator:(0,z.jsx)(h.Z,{}),children:i.map((e=>{return(0,z.jsx)(gt.Z,{title:u("plan_option.title",{count:e.maxActiveCount},{count:e.maxActiveCount}),body:u("duration_day_count",{count:e.effectiveDays},{count:e.effectiveDays}),suffix:f(e),clickable:!0,onClick:(t=e.id,()=>{l(t)}),testId:"collections-plan-option-".concat(e.id)},e.id);var t}))})})})})]}):(0,z.jsx)(sw,{onCtaClick:c})}),!!i&&(0,z.jsx)(gt.Z,{children:(0,z.jsx)(ic.I,{text:u("actions.proceed"),styling:ic.I.Styling.Filled,onClick:function(){d(Ri({target:qm.ProceedToCheckout})),a()},testId:"collections-plan-selection-proceed-to-checkout-button"})})]})})},u6=e=>{let{show:t,onSuccess:i,onClose:n,featuredCollectionId:s}=e;const r=(0,p.I0)(),a=E8(),[o,l]=(0,m.useState)(Ei.None),[c,d]=(0,m.useState)(),[u,g]=(0,m.useState)(),{fetch:h,isLoading:x}=ih(Fe.VJb,nx),{fetch:f,isLoading:y}=ih(Fe.LY9,nx),{fetch:v,isLoading:_,transformedData:b,error:j}=ih(Fe.v1X,yx),S=!!c&&!x&&!y,Z=a&&!(null==c||!c.planPricingId)&&u!==(null==c?void 0:c.planPricingId);function I(){l(Ei.None),r(Mk.cancelOrderPaymentAuth()),n()}return(0,m.useEffect)((()=>{t&&a&&(null!=b&&b.length||_||j||v())}),[t,a,b,_,v,j]),(0,m.useEffect)((()=>{if(!t)return;if(!a)return;if(u)return;if(null==b||!b.length)return;const e=b.find((e=>e.default))||b[0];g(e.id)}),[a,b,u,t]),(0,m.useEffect)((()=>{t&&l(a?Ei.PreCheckout:Ei.Checkout)}),[a,t]),(0,m.useEffect)((()=>{t&&(S&&!Z||o===Ei.Checkout&&async function(){const{transformedData:e}=await h({planId:u});d(e)}())}),[h,S,t,o,Z,u]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(d6,{plansPricing:b,selectedPlanId:u,isErrorHappened:!!j,isShown:o===Ei.PreCheckout,isLoading:_,onNextAction:function(){l(Ei.Checkout)},onClose:I,onPlanSelect:function(e){g(e)},onPageReloadClick:function(){v()}}),(0,z.jsx)(Bk,{show:o===Ei.Checkout,orderType:Ti.FeaturedCollection,orderId:null==c?void 0:c.id,orderPayable:null==c?void 0:c.payableAmount,addCardSourceParams:{featuredCollectionId:s,type:Ti.FeaturedCollection},onBack:function(){a?l(Ei.PreCheckout):I()},onCheckoutFinish:function(e){I(),e&&i()},onInitStartAfterCardAuth:async function(e){const{transformedData:t}=await f(e);d(t),g(null==t?void 0:t.planPricingId),l(Ei.Checkout)},orderConfirmationModal:e=>(0,z.jsx)(c6,{show:e.show,order:c,onBack:e.onBack,onConfirmOrder:e.onConfirmOrder,onPaymentMethodSelect:e.onPaymentMethodSelect,isMultipleCollectionsEnabled:a})})]})},m6=e=>{let{initialCollectionId:t,featuredCollectionId:i,availableDiscounts:n,selectedItems:s,selectedDiscount:r,title:a,discounts:o,isActive:l,initialIsActive:c,isCheckoutStarted:d,onCheckoutClose:u,onCheckoutOpen:f,isSelectionPageVisited:v,isPlanActivated:_,canActivateCollection:b,maxActiveCollectionsCount:j,updateCollectionId:S,switchSelectStage:Z,updateTitle:I,updateDiscount:C,updateSelectedItems:k,updateIsActive:w,navigate:P}=e;const T=U("featured_collection"),{track:F}=vi(),N=E(),O=E8(),R=(0,p.v9)(Nc),[D,A]=(0,m.useState)(null),[M,B]=(0,m.useState)(!1),[q,V]=(0,m.useState)(!1),H=(0,m.useRef)(null);async function G(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(O&&(!a||a.length>30))return void A(T("validation.required_title",{count:30}));B(!0);const t={title:a,itemIds:s.map((e=>e.id)),discount:r?r.id:null,isActive:O&&l},n=i?await(0,Fe.$tm)({id:i,...t}):await(0,Fe.zVu)(t);return B(!1),"errors"in n?n.code===pm.Q.ValidationError&&void A(n.message):(e&&P(!0),i||S(null==n||null===(o=n.featured_collection)||void 0===o?void 0:o.id),!0);var o}function W(){G(),F(Ri({screen:$t.FeaturedCollectionEdit,target:qm.SaveCollection}))}function X(){G(),F(Ri({screen:$t.FeaturedCollectionEdit,target:qm.UpdateCollection}))}function Y(){V(!0)}function K(){V(!1)}async function J(){t&&(F(Ri({screen:$t.FeaturedCollectionEdit,target:qm.DeleteCollection})),await(0,Fe.kN5)({id:t}),P(!0))}function Q(){G(),F(Ri({screen:$t.FeaturedCollectionEdit,target:qm.ApplyChanges}))}async function $(){const e=await G(!1);F(Ri({screen:$t.FeaturedCollectionEdit,target:qm.ProceedToCheckout})),e&&f()}function ee(){P()}function te(){Z()}function ie(e){I(e.target.value),A(null)}function ne(e){w(e.target.checked)}function se(e){e&&C(e)}function re(e){const t=e.map((e=>s.find((t=>t.id===e)))).filter((e=>!!e));k(t),F(Ri({screen:$t.FeaturedCollectionEdit,target:qm.Drag}))}function ae(e){k(s.filter((t=>t.id!==e)))}function oe(){if(O){if(t)return(0,z.jsxs)("div",{className:y()("u-flexbox",{"u-flex-direction-column-reverse":N.phones}),children:[(0,z.jsx)(ic.I,{text:T("actions.delete"),theme:"warning",onClick:Y,disabled:M,inline:!0,testId:"featured-collection-action-delete"}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(ic.I,{text:T("actions.update"),styling:ic.I.Styling.Filled,onClick:X,disabled:!s.length||M,inline:!0,testId:"featured-collection-action-update"}),(0,z.jsx)($8,{isOpen:q,onSubmit:J,onClose:K})]});const e=y()("u-flexbox",{"u-flex-direction-column":N.phones,"u-justify-content-center":N.phones,"u-align-items-center":!N.phones,"u-justify-content-flex-end":!N.phones});return(0,z.jsxs)("div",{className:e,children:[!_&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center",children:(0,z.jsx)(xt.Z,{text:T("no_charge_note"),type:xt.Z.Type.Caption})}),(0,z.jsx)(x.Z,{size:N.phones?x.Z.Size.Regular:x.Z.Size.Large})]}),(0,z.jsx)(ic.I,{text:T("actions.save"),styling:ic.I.Styling.Filled,onClick:W,disabled:!s.length||M,inline:!0,testId:"featured-collection-action-save"})]})}return i&&l?(0,z.jsx)(ic.I,{text:T("actions.apply_changes"),styling:ic.I.Styling.Filled,onClick:Q,disabled:!s.length||M,inline:!N.phones}):(0,z.jsxs)("div",{className:y()("u-flexbox",{"u-flex-direction-column-reverse":N.phones}),children:[(0,z.jsx)(ic.I,{text:T("actions.activate_later"),onClick:W,disabled:!s.length||M,inline:!0,testId:"featured-collection-action-activate-later"}),(0,z.jsx)(x.Z,{size:x.Z.Size.Regular}),(0,z.jsx)(ic.I,{text:T("actions.proceed"),styling:ic.I.Styling.Filled,onClick:$,disabled:!s.length||M,inline:!0,testId:"featured-collection-action-proceed"}),i?(0,z.jsx)(u6,{show:d,featuredCollectionId:i,onSuccess:ee,onClose:u}):null]})}function le(){const e=_?b||c?void 0:T("input.active.info.max_active_reached",{count:j},{count:j}):T("input.active.info.no_active_plan");return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:T("input.active.title")}),suffix:(0,z.jsx)(lJ.Z,{name:"collection-active-toggle",checked:l,onChange:ne,disabled:!!e,testId:"collection-active-toggle"})}),!!e&&(0,z.jsx)("div",{className:"u-ui-margin-bottom-x-large u-ui-margin-horizontal-x-large",children:(t=e,(0,z.jsx)(g.Z,{children:(0,z.jsx)("div",{className:"u-overflow-hidden",children:(0,z.jsx)(gt.Z,{theme:"inverseExperimental",prefix:(0,z.jsx)(Wy.Z,{name:Q8.Z,color:uI.S.Primary}),body:t})})}))})]});var t}return(0,m.useEffect)((()=>{!D&&a||!H.current||H.current.focus()}),[D,a]),(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column u-fill-dynamic-viewport",children:[(0,z.jsx)("div",{className:"action-header",children:(0,z.jsx)("div",{className:"container u-ui-margin-vertical-medium",children:(0,z.jsx)(Pm.Z,{left:v?(0,z.jsx)(ic.I,{deprecatedIconName:"arrow-left",styling:ic.I.Styling.Flat,onClick:function(){Z()},inline:!0,testId:"featured-collection-back"}):(0,z.jsx)(ic.I,{deprecatedIconName:"x",styling:ic.I.Styling.Flat,inline:!0,onClick:function(){P()},testId:"featured-collection-close"})})})}),(0,z.jsx)("div",{className:"u-flex-grow",children:(0,z.jsxs)("div",{className:"container",children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{text:T("title"),type:xt.Z.Type.Heading})}),function(){const e=((e,t,i)=>t.map((t=>{const n=null==i?void 0:i.find((e=>e.item_id===t.id));return((e,t,i)=>{let n=i?Va(i.discount_price):null;n||(n=t.priceWithDiscount||t.price);const s=t.price.amount===n.amount?null:t.price;return{id:t.id,photoUrl:Xa(t.photos),price:Ua(n,e),oldPrice:s?Ua(s,e):null}})(e,t,n)})))(R,s,o);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(g.Z,{children:(0,z.jsx)("div",{className:"u-overflow-hidden",children:(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[(0,z.jsx)(fb.M,{ref:H,name:"collection_title",title:T("input.title.title"),styling:fb.M.Styling.Wide,type:fb.M.Type.Text,required:!0,placeholder:T("input.title.placeholder"),value:a,validation:hh(D),onChange:ie,testId:"featured-collection--title"}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,children:(0,z.jsx)(o6,{items:e,onAddMoreClick:te,updateItemsSorting:re,onRemoveItemClick:ae})}),(0,z.jsx)(YJ,{name:"discount",inputTitle:T("input.discount.title"),onSave:se,data:n,selectedValue:r,isDirectionUp:!0}),O&&le()]})})})]})}(),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})]})}),(0,z.jsx)("div",{className:"action-footer",children:N.phones?(0,z.jsx)("div",{className:"container u-ui-margin-vertical-large",children:oe()}):(0,z.jsx)("div",{className:"container u-ui-margin-vertical-medium",children:(0,z.jsx)(Pm.Z,{right:oe()})})})]})},p6=e=>{let{realName:t,isForce:i}=e;const n=U("full_name_confirmation"),[s,r]=(0,m.useState)(t||""),[a,o]=(0,m.useState)(""),[l,c]=(0,m.useState)(!1),d=()=>{let e=!0;return(0,v.isEmpty)(s)?(o(n("validation.empty_full_name")),e=!1):UC.test(s)||(o(n("validation.wrong_full_name_format")),e=!1),e};return(0,z.jsxs)(z.Fragment,{children:[(()=>{const e=i?"title.getting_started":t?"title.update_name":"title.enter_name",s=i?"full_description":"description",r=i?"header":"hand";return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{children:(0,z.jsx)("div",{className:"u-ui-padding-top-large u-ui-padding-horizontal-large",children:(0,z.jsx)(Kl.U,{src:"/assets/full-name-confirmation/".concat(r,".png"),scaling:Kl.U.Scaling.Cover})})}),(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)("div",{className:"u-text-center",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,alignment:xt.Z.Alignment.Center,text:n(e)})}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:n(s,{"learn-more-link":e=>(0,z.jsx)("a",{href:(0,ys.Iq)(DQ,{access_channel:Be.Si.ProductLink}),children:e})}),html:!0})]})]})})(),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(fb.M,{styling:fb.M.Styling.Tight,name:"full_name",type:fb.M.Type.Text,maxLength:50,value:s,placeholder:n("full_name.placeholder"),onChange:e=>{r(e.target.value),o("")},onBlur:()=>d(),validation:(()=>{const e=""===a?void 0:"warning",t=""===a?n("full_name.description"):a;return(0,z.jsx)(zm.Z,{theme:e,text:t})})(),testId:"full-name-confirmation-full-name-input"})}),(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(ic.I,{disabled:l,styling:ic.I.Styling.Filled,text:n(t?"confirm":"submit"),theme:"primary",onClick:async()=>{o(""),d()&&(c(!0),await(0,Fe.M8C)({realName:s,target:"web_view_modal"})?(0,ls.ru)(Me.mYc):c(!1))},testId:"full-name-confirmation-submit-button"}),i?null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(ic.I,{disabled:l,styling:ic.I.Styling.Flat,text:n("skip"),onClick:()=>(0,ls.ru)(Me.mYc),testId:"full-name-confirmation-skip-button"})]})]})]})};let g6,h6,x6;!function(e){e.Header="header",e.Item="item"}(g6||(g6={})),function(e){e.ItemBoxBlock="item_box_block",e.SuggestedBrandsBlock="suggested_brands_block",e.SuggestedSearchesBlock="suggested_searches_block",e.ThumbnailsBlock="thumbnails_block",e.WideBannersBlock="wide_banners_block",e.ExposureBlock="exposure_block",e.ItemsCardsBlock="items_cards_block"}(h6||(h6={})),function(e){e.SmallImage="small_image",e.BigImage="big_image",e.TwoHorizontalRows="two_horizontal_rows",e.SmallRoundImage="small_round_image"}(x6||(x6={}));const f6="offline_verification_awareness_modal_shown";let y6;!function(e){e.ClosetPromotion="closet_promotion",e.FeedPersonalizationBanner="feed_personalization_banner",e.Nps="nps",e.EmailConfirmation="email_confirmation",e.FullNameConfirmation="full_name_confirmation",e.PushUpBanner="push_up_banner",e.RecommendedSearchesViewCount="recommended_searches_view_count",e.TermsAndConditions="terms_and_conditions",e.PortalMergeFeed="portal_merge_feed",e.PortalMergeSourceAnnouncement="portal_merge_source_announcement",e.PortalMergeTargetAnnouncement="portal_merge_target_announcement",e.PortalMergeWelcomeScreen="portal_merge_welcome_screen",e.PortalMergeDataMigration="portal_merge_data_migration",e.PortalMergeGoToOldPortal="portal_merge_go_to_old_portal",e.PortalMergeWaitForMigration="portal_merge_wait_for_migration",e.PortalMergeInitiateFromTarget="portal_merge_initiate_from_target",e.ListerActivation="lister_activation",e.OnboardingModal="onboarding_modal",e.BusinessAccount="business_account",e.CategoryIntentBanner="category_intent_banner",e.CatalogRules="catalog_rules"}(y6||(y6={}));const v6=e=>{let{id:t,title:i,path:n,cluster_id:s}=e;return{id:t,title:i,path:n,clusterId:s}},_6=e=>({searchTerm:e.search_term,weeklyItemViews:e.weekly_item_views}),b6=e=>{return{id:e.id,title:e.title,name:e.name,searches:(t=e.searches,t?t.map(_6):[])};var t},j6=e=>e?e.map((e=>({id:e.id,title:e.title,photo:lt(e.photo),contentSource:e.content_source,cta:{uri:e.cta.uri,url:e.cta.url,accessibilityLabel:e.cta.accessibility_label,title:e.cta.title}}))):[],S6=e=>({id:e.id,title:e.title,name:e.name,style:e.style,subtitle:e.subtitle,elements:j6(e.elements)}),Z6=e=>({id:e.id,name:e.name,elements:j6(e.elements)}),I6=e=>{return{id:e.id,title:e.title,name:e.name,cards:(t=e.cards,t?t.map((e=>({id:e.id,header:{photo:lt(e.header.photo),title:e.header.title,subtitle:e.header.subtitle},items:_o(e.items),action:e.action?{type:e.action.type,title:e.action.title,url:e.action.url,uri:e.action.uri}:null,contentSource:e.content_source}))):[])};var t},C6=e=>e?{url:e.url,title:e.title,accessibilityLabel:e.accessibility_label}:null,k6=e=>({id:e.id,name:e.name,title:e.title,subtitle:e.subtitle,items:_o(e.items),contentSource:e.content_source,headerCta:C6(e.header_cta),itemCta:C6(e.item_cta)}),w6=e=>{const{type:t}=e;switch(t){case h6.SuggestedBrandsBlock:return{type:t,entity:(i=e.entity,{id:i.id,title:i.title,name:i.name,brands:(n=i.brands,n?n.map(v6):[])})};case h6.SuggestedSearchesBlock:return{type:t,entity:b6(e.entity)};case h6.ItemBoxBlock:return{type:t,entity:k6(e.entity)};case h6.ThumbnailsBlock:return{type:t,entity:S6(e.entity)};case h6.WideBannersBlock:return{type:t,entity:Z6(e.entity)};case h6.ExposureBlock:return{type:t,entity:e.entity};case h6.ItemsCardsBlock:return{type:t,entity:I6(e.entity)};default:return}var i,n},P6=["item","box"],z6=e=>P6.includes(e.entity_type),T6=e=>e.filter(z6);function F6(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class N6 extends m.Component{constructor(){super(...arguments),F6(this,"handleClick",(()=>{const e=Ri({target:qm.PersonalizationButtonAfterFeed,targetDetails:"feed_personalization_banner"});this.props.track(e)})),F6(this,"renderTitle",(()=>{const{title:e,disableTitleTranslation:t}=this.props;return t?(0,z.jsx)("span",{className:"notranslate",children:(0,z.jsx)(xt.Z,{text:e,type:xt.Z.Type.Heading})}):(0,z.jsx)(xt.Z,{text:e,type:xt.Z.Type.Heading})}))}render(){const{subtitle:e,actionText:t}=this.props,i=[(0,z.jsx)(ic.I,{text:t,url:Me.pLL,onClick:this.handleClick,styling:ic.I.Styling.Filled})];return(0,z.jsx)(w8,{title:this.renderTitle(),body:(0,z.jsx)(xt.Z,{text:e}),actions:i})}}F6(N6,"defaultProps",{disableTitleTranslation:!1});const L6=zx(N6),E6=e=>{let{ratio:t=1,children:i}=e;const n=(0,v.isNumber)(t)?t:(e=>{const[t,i]=e.split(":").map((e=>parseInt(e,10)));return t/i})(t),s=0===n?100:100/n;return(0,z.jsx)("div",{className:"aspect-ratio",children:(0,z.jsx)("div",{className:"aspect-ratio__ratio",style:{paddingTop:"".concat(s,"%")},children:(0,z.jsx)("div",{className:"aspect-ratio__content",children:i})})})},O6=e=>{let{image:t,color:i,url:n,impressionUrl:s,testId:r,onClick:a,onEnter:o}=e;return(0,z.jsx)(Jp.h,{onEnter:o,scrollableAncestor:window,children:(0,z.jsxs)("a",{href:n||void 0,className:"u-block u-fill-width u-fill-height","data-testid":m0(r,"promo-box"),onClick:a,children:[(0,z.jsx)(E6,{ratio:"1:2",children:(0,z.jsx)(Kl.U,{src:t,color:i,scaling:Kl.U.Scaling.Cover})}),s&&(0,z.jsx)("img",{height:"1",width:"1",alt:"",style:{display:"none",border:0},src:s})]})})},R6=e=>{let{promoBox:t,children:i,index:n}=e;const{logCardImpression:s}=(0,m.useContext)(Im),r={[Be.HM.Braze]:null==t?void 0:t.position,[Be.HM.BrazeSticky]:0};if((null==t?void 0:t.isControl)&&n===r[t.type]){const e=()=>{s(t.id)};return(0,z.jsx)(Jp.h,{onEnter:e,scrollableAncestor:window,children:i})}return i},D6=function(e){const{promoBoxCardStore:t}=(0,m.useContext)(Im),i=(0,m.useSyncExternalStore)(t.subscribe,(()=>t.state),(()=>null));return(0,m.useMemo)((()=>{var t;return null!==(t=null==i?void 0:i.map(gg).filter((t=>t.type===e)))&&void 0!==t?t:[]}),[i,e])};function A6(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const M6=P0(k0),U6=P0(O6),B6={phones:1,tablets:3,default:4},q6=(0,p.$j)((e=>({portal:Fs(e),locale:Nc(e)})));class V6 extends m.Component{constructor(){super(...arguments),A6(this,"context",void 0),A6(this,"state",{events:T6(this.props.events),closets:[],maxScore:this.props.initialMaxScore,endReached:!1,isLoading:!1,generateNewListerActivationBanners:!0,showLoadMoreButton:!1}),A6(this,"seenAds",[]),A6(this,"seenItems",[]),A6(this,"seenClosets",[]),A6(this,"seenListerActivationBanners",[]),A6(this,"gridBanners",[]),A6(this,"pagesFetched",1),A6(this,"resolveItemWidth",(e=>{switch(e.type){case"ad":case"closet_promotion":case"lister_activation_banner":return"full-row";case"item":case"box":case"generic_promo_box":return"one-fifth";default:return null}})),A6(this,"onPageEnd",(()=>{this.state.endReached||this.fetchFeedEvents()})),A6(this,"onFeedEnd",(()=>{this.props.track(Hi({itemCount:this.state.events.length}))})),A6(this,"handleItemVisibility",(e=>{const{homepageSessionId:t,track:i}=this.props,{item:n,index:s}=e,{data:r,id:a}=n,o=[];switch(n.type){case"generic_promo_box":break;case"ad":if((0,v.includes)(this.seenAds,a))return;i(Bi({id:a,position:s+1,contentType:z0.Ad,contentSource:Es.AdFeed})),this.seenAds=[...this.seenAds,a];break;case"closet_promotion":{const e=r;if((0,v.includes)(this.seenClosets,e.user.id))return;o.push(Bi({id:e.user.id,position:s+1,contentType:z0.PromotedCloset,contentSource:Es.PromotedClosets,homepageSessionId:t})),this.seenClosets=[...this.seenClosets,e.user.id];break}case"lister_activation_banner":{const e=r;if((0,v.includes)(this.seenListerActivationBanners,a))return;o.push(Bi({id:e.catalogId,position:s+1,contentType:z0.ListerActivationBanner,contentSource:Es.ListerActivationBanner})),this.seenListerActivationBanners=[...this.seenListerActivationBanners,a];break}default:{const e=r;if((0,v.includes)(this.seenItems,e.entity.id))return;o.push(Bi({id:e.entity.id,position:s+1,contentType:e.tracking_content_type,contentSource:e.content_source,itemOwnerId:"item"===n.type?e.entity.user.id:null,homepageSessionId:"item"===n.type?t:void 0})),this.seenItems=[...this.seenItems,e.entity.id];break}}o.forEach((e=>this.props.track(e)))})),A6(this,"handleBrazePromoBoxClick",(e=>()=>{e.url&&this.context.logCardClick(e.id)})),A6(this,"handleBrazePromoBoxVisibility",(e=>()=>{this.context.logCardImpression(e.id)})),A6(this,"handleFavouriteToggle",(e=>{let{itemId:t,isFollowEvent:i,itemContentSource:n}=e;const{track:s,homepageSessionId:r}=this.props;s(Ri({target:qm.Favourite})),s(Ai({itemId:t,isFollowEvent:i,homepageSessionId:r,contentSource:n}))})),A6(this,"shouldRenderClosetPromotionCheckout",(e=>e.filter((e=>"closet_promotion"===e.type)).map((e=>e.data)).some((e=>!!e.showBanner)))),A6(this,"renderItem",(e=>{const{item:t,index:i,item:{data:n}}=e,{floatingPromoBoxes:s,breakpoints:r,banners:a,homepageSessionId:o}=this.props;let l=null;switch(t.type){case"item":{const e=n;l=(0,z.jsx)(M6,{tracking:{id:e.entity.id,contentType:z0.Item,contentSource:e.content_source,position:i+1,homepageSessionId:o},testId:"feed-item",item:mo(e.entity),showStatus:!0,showStatusAsBadge:!0,onFavouriteToggle:this.handleFavouriteToggle});break}case"box":{const e=n;l=(0,z.jsx)(U6,{image:e.entity.photo.url,color:e.entity.photo.dominant_color,url:e.entity.web_link,impressionUrl:e.entity.impression_url,tracking:{id:e.entity.id,contentType:e.tracking_content_type,contentSource:e.content_source,position:i+1},testId:"feed-legacy"});break}case"generic_promo_box":{const e=n;l=(0,z.jsx)(O6,{image:e.imageUrl,color:e.backgroundColor,url:e.url,impressionUrl:e.impressionUrl,onClick:this.handleBrazePromoBoxClick(e),onEnter:this.handleBrazePromoBoxVisibility(e),testId:"feed-braze"});break}case"closet_promotion":{const e=n;let t;e.showBanner&&(t=hs(a.closetPromotion,"feed")),l=(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:r.phones?x.Z.Size.Regular:x.Z.Size.Large}),(0,z.jsx)(A4,{closet:e,wide:!0,banner:t,position:i+1,homepageSessionId:o}),(0,z.jsx)(x.Z,{size:r.phones?x.Z.Size.Large:x.Z.Size.X2Large})]});break}case"ad":l=(0,z.jsx)(uc,{shape:di.Inbetween});break;case"lister_activation_banner":{const e=n;l=(0,z.jsx)(X4,{breakpointItemCount:B6,banner:e,onClose:this.handleBannerDismiss});break}default:l=null}const c=s.find((e=>e.isControl));return c?(0,z.jsx)(R6,{promoBox:c,index:i,children:(0,z.jsx)("div",{className:"u-fill-height",children:l})}):l})),A6(this,"generateListerActivationBannerItem",(e=>{let{itemIndex:t}=e;const{banners:i}=this.props,{generateNewListerActivationBanners:n}=this.state;if(this.gridBanners[t])return this.gridBanners[t];if(!n)return;const s=xs(i.listerActivation),r=F4(t,s);return this.gridBanners[t]=r,r})),A6(this,"generateGenericPromoBoxItem",(e=>{let{index:t}=e;const{floatingPromoBoxes:i}=this.props,n=(0,v.uniqBy)(i,(e=>{let{position:t}=e;return t})).find((e=>e.position===t&&!e.isControl));var s;if(n)return{type:"generic_promo_box",id:"generic-promo-box-".concat((s=n).id),data:s}})),A6(this,"handleBannerDismiss",(e=>{const t=this.gridBanners.findIndex((t=>{let{data:i}=t;return i===e}));this.gridBanners=this.gridBanners.slice(0,t),this.setState({generateNewListerActivationBanners:!1}),(0,Fe.N$Y)()})),A6(this,"handleLoadMoreButtonClick",(()=>{const{track:e}=this.props;e(Ri({target:qm.FeedLoadMoreButton})),this.onPageEnd(),this.fetchClosetPromo()}))}async fetchFeedEvents(){const{events:e,isLoading:t}=this.state;if(t)return;this.setState({isLoading:!0});const i=await(0,Fe.vOD)(e.length,this.pagesFetched,this.state.maxScore);if("errors"in i)return void this.setState({endReached:!0,isLoading:!1});const{feed_events:n,show_load_more_button:s,max_score:r}=i;if((0,v.isEmpty)(n))return this.setState({endReached:!0,isLoading:!1}),void this.onFeedEnd();this.updateMaxScore(n,r),this.setState((e=>({events:T6([...e.events,...n]),isLoading:!1,showLoadMoreButton:s}))),this.pagesFetched+=1}updateMaxScore(e,t){(0,v.isEmpty)(e)||this.setState({maxScore:t||e[e.length-1].score})}shouldFetchClosetPromo(){const{breakpoints:e}=this.props,t=K4(e.active,["wide","desktops"])||"tablets";return this.state.events.length>=S4.first[t]}async fetchClosetPromo(){if(!this.shouldFetchClosetPromo())return;const{track:e,breakpoints:t}=this.props,i=this.state.closets.map((e=>e.user.id)),n=ZF().v4(),s={wide:3,desktops:4,tablets:5,phones:5}[K4(t.active)||"phones"];e(Yi({uuid:n,type:"frontend_sent",closetCount:s,itemCount:Be.R9}));const r=await(0,Fe.sk7)({perPage:s,itemCount:Be.R9,excludedUserIds:i,feedItemsOnly:!0,screenName:$t.Homepage});if("errors"in r)return;const a=pH(r.promoted_closets);e(Yi({uuid:n,type:"frontend_received_success",closetCount:a.length,itemCount:(0,v.sum)(a.map((e=>e.items.length)))})),(0,v.isEmpty)(a)||(!this.state.closets.length&&a.length>0&&(a[0].showBanner=!0),this.setState((e=>({closets:[...e.closets,...a]}))))}componentDidMount(){const{events:e,maxScore:t}=this.state;t||this.updateMaxScore(e),this.fetchClosetPromo()}handleExtraServiceCheckoutSuccess(){(0,ls.sl)()}renderPersonalizationBanner(){const{portal:e,banners:t}=this.props,{endReached:i}=this.state;if(!i||!t.feedPersonalizationBanner)return null;const{bottomTitle:n,bottomSubtitle:s,bottomActionTitle:r}=t.feedPersonalizationBanner;return(0,z.jsx)(L6,{title:n,subtitle:s,actionText:r,disableTitleTranslation:e===r8.De})}renderLoader(e){return this.state.isLoading?(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center",children:(0,z.jsx)(Dp.Z,{size:e})}):null}getBaseGridItems(){const{events:e}=this.state;return e.map(w4)}getItemInserts(){const{breakpoints:e,banners:t}=this.props,{closets:i}=this.state,n=K4(e.active)||"phones",s=i.map(P4),r={first:S4.first[n],distance:S4.distance[n]},a={first:S4.first[n],distance:S4.distance[n]},o={first:S4.inbetweenAdFirst[n],distance:S4.distance[n]},l=[];if(t.listerActivation.length){const e={items:{banners:[]},positions:r,generateItem:this.generateListerActivationBannerItem};l.push(e)}const c={items:{closet_promotions:s},positions:a};l.push(c);const d={items:{ads:[]},positions:o,generateItem:e=>{let{itemIndex:t}=e;return z4(t)}};l.push(d);const u={items:{promo_box:[]},positions:{first:S4.promoBoxFirst,distance:S4.promoBoxDistance},generateItem:this.generateGenericPromoBoxItem,forceTruePosition:!0};return l.push(u),l}renderGrid(){const e=k4(this.getBaseGridItems(),this.getItemInserts()),t=this.shouldRenderClosetPromotionCheckout(e);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(V2,{items:e,renderItem:this.renderItem,onItemVisible:this.handleItemVisibility,widthResolver:this.resolveItemWidth}),t&&(0,z.jsx)(W4,{onCheckoutSuccess:this.handleExtraServiceCheckoutSuccess})]})}renderLoadMoreButton(){return(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center",children:(0,z.jsx)(ic.I,{theme:"primary",styling:ic.I.Styling.Filled,text:(0,z.jsx)(vt.Z,{id:"feed.actions.load_more"}),onClick:this.handleLoadMoreButtonClick,inline:!0,testId:"feed-load-more-button"})})}renderInfiniteScroll(){return(0,z.jsx)(Jp.h,{bottomOffset:-600,scrollableAncestor:window,onEnter:this.onPageEnd})}renderItemsLoader(){const{isLoading:e,showLoadMoreButton:t,endReached:i}=this.state;return e||i?null:t?this.renderLoadMoreButton():this.renderInfiniteScroll()}render(){return(0,z.jsxs)("div",{children:[this.renderGrid(),this.renderItemsLoader(),this.renderLoader(),this.renderPersonalizationBanner()]})}}A6(V6,"defaultProps",{locale:""}),A6(V6,"contextType",Im);const H6=F((G6=zx(q6(V6)),e=>{const t=D6(Be.HM.Braze);return(0,z.jsx)(G6,{...e,floatingPromoBoxes:t})}));var G6;function W6(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class X6 extends m.Component{constructor(){var e;super(...arguments),e=this,W6(this,"state",{selectedRating:null,showSurvey:!0,showCommentBox:!1,comment:null}),W6(this,"handleRatingSelect",(e=>()=>{this.setState({selectedRating:e,showCommentBox:!0})})),W6(this,"handleCommentInputChange",(e=>{this.setState({comment:e.target.value})})),W6(this,"sendUserResponse",(async e=>{const{comment:t,selectedRating:i}=this.state,{userId:n}=this.props;null!==i&&await(0,Fe.G8H)({userId:n,score:i,comment:t,incomplete:e})})),W6(this,"submitResponse",(function(t){let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return()=>{e.props.track(Ri({target:t})),e.sendUserResponse(i),e.setState({showSurvey:!1})}})),W6(this,"translate",(e=>this.props.intl.formatMessage({id:e})))}componentDidMount(){this.props.track(Gi({target:cb.NpsSurvey}))}renderCommentBox(){return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(Gw,{name:"netPromoterScore",placeholder:this.translate("net_promoter_score.open_question"),onChange:this.handleCommentInputChange}),(0,z.jsx)(gt.Z,{body:(0,z.jsx)(ic.I,{onClick:this.submitResponse(qm.NpsSurveySend,!1),styling:ic.I.Styling.Filled,text:(0,z.jsx)(vt.Z,{id:"net_promoter_score.submit"})})})]})}renderRatings(){const e=Array.from(Array(11).keys()),{selectedRating:t}=this.state,{breakpoints:i}=this.props;return(0,z.jsxs)(nc.Z,{styling:nc.Z.Styling.Narrow,children:[(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center",children:e.map((n=>(0,z.jsxs)(m.Fragment,{children:[(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column u-align-items-center",children:[(0,z.jsx)(qx.J,{name:n.toString(),checked:n===t,onClick:this.handleRatingSelect(n)}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(xt.Z,{text:n,theme:"amplified",alignment:xt.Z.Alignment.Center})]}),n!==e[e.length-1]&&(0,z.jsx)(x.Z,{size:i.phones?x.Z.Size.XSmall:x.Z.Size.Regular})]},n)))}),(0,z.jsx)(x.Z,{}),(0,z.jsxs)("div",{className:"u-flexbox u-justify-content-between",children:[(0,z.jsx)(xt.Z,{text:(0,z.jsx)(vt.Z,{id:"net_promoter_score.score_explanation.unlikely_to_recommend"}),type:xt.Z.Type.Caption}),(0,z.jsx)(xt.Z,{text:(0,z.jsx)(vt.Z,{id:"net_promoter_score.score_explanation.likely_to_recommend"}),type:xt.Z.Type.Caption})]})]})}render(){const{showSurvey:e,showCommentBox:t}=this.state,{breakpoints:i}=this.props,n=(0,z.jsx)(ic.I,{deprecatedIconName:"x",inline:!0,size:ic.I.Size.Medium,inverse:!0,onClick:this.submitResponse(qm.NpsSurveyDismiss)});return e&&(0,z.jsxs)(w8,{children:[(0,z.jsx)("div",{className:"u-phones-only",children:n}),(0,z.jsx)(gt.Z,{prefix:i.tabletsUp?n:null,body:(0,z.jsx)(xt.Z,{text:(0,z.jsx)(vt.Z,{id:"net_promoter_score.question"}),type:xt.Z.Type.Title,alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent})}),(0,z.jsxs)("div",{className:"nps_survey u-text-center",children:[this.renderRatings(),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),t&&this.renderCommentBox()]})]})}}const Y6=F(zx((0,iw.ZP)(X6)));function K6(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let J6;!function(e){e.Idle="idle",e.Pending="pending",e.Subscribed="subscribed",e.Finished="finished"}(J6||(J6={}));class Q6 extends m.Component{constructor(){super(...arguments),K6(this,"state",{email:this.props.email||"",isValid:!!this.props.email,status:J6.Idle}),K6(this,"handleClick",(async()=>{const{userId:e}=this.props,{email:t}=this.state;if(this.setState({status:J6.Pending}),"errors"in await(0,Fe.AH9)({userId:e,email:t}))return;this.setState({status:J6.Subscribed});const i=Ri({target:qm.ChangeEmail});this.props.track(i)})),K6(this,"handleInputChange",(e=>{this.setState({email:e.target.value,isValid:DK(e.target.value)})})),K6(this,"closeNotification",(()=>this.setState({status:J6.Finished}))),K6(this,"renderSuccessNotification",(()=>{const{email:e}=this.state;return(0,z.jsx)(gt.Z,{theme:"success",suffix:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,deprecatedIcon:(0,z.jsx)(ht.Z,{name:"x",size:ht.Z.Size.Small,color:ht.Z.Color.GreyscaleLevel7}),onClick:this.closeNotification}),children:(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center",children:[(0,z.jsx)(ht.Z,{name:"check-circle-filled",size:ht.Z.Size.Medium,color:ht.Z.Color.GreyscaleLevel7}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(xt.Z,{text:(0,z.jsx)(wx,{id:"email_confirmation.banner.success",values:{email:e}}),type:xt.Z.Type.Title,theme:"inverse"})]})})})),K6(this,"renderBanner",(()=>{const{email:e,isValid:t,status:i}=this.state,n=i===J6.Pending||!t,s=(0,z.jsx)(xt.Z,{text:(0,z.jsx)(wx,{id:"email_confirmation.banner.invalid"}),theme:"warning"});return(0,z.jsx)(w8,{title:(0,z.jsx)(xt.Z,{text:(0,z.jsx)(wx,{id:"email_confirmation.banner.title"}),type:xt.Z.Type.Title}),body:(0,z.jsx)(gh,{name:"email",type:"text",styling:"narrow",value:e,placeholder:e,onChange:this.handleInputChange,validation:t?null:s}),actions:[(0,z.jsx)(ic.I,{text:(0,z.jsx)(wx,{id:"email_confirmation.banner.button"}),styling:ic.I.Styling.Filled,onClick:this.handleClick,disabled:n})]})}))}render(){const{status:e}=this.state;if(e===J6.Finished)return null;const t=e===J6.Idle||e===J6.Pending;return(0,z.jsxs)(z.Fragment,{children:[t&&this.renderBanner(),e===J6.Subscribed&&this.renderSuccessNotification()]})}}const $6=zx(Q6),eee=e=>{let{data:t}=e;const i=U("full_name_banner"),[n,s]=(0,m.useState)(t.realName),[r,a]=(0,m.useState)(""),[o,l]=(0,m.useState)(Ne.Idle),c=()=>(0,v.isEmpty)(n)?(a(i("validation.empty_full_name")),!1):!!UC.test(n)||(a(i("validation.wrong_full_name_format")),!1),d=async()=>{c()&&(l(Ne.Pending),"errors"in await(0,Fe.M8C)({realName:n,target:"feed_banner"})||l(Ne.Success))},u=e=>{s(e.target.value),a("")};return o===Ne.Success?null:(()=>{if(o!==Ne.Idle&&o!==Ne.Pending)return null;const{title:e,subtitle:s,placeholder:a,buttonTitle:l}=t,m=(0,z.jsx)(zm.Z,{text:i("tip")}),p=(0,z.jsx)(zm.Z,{text:r,theme:"warning"});return(0,z.jsx)(w8,{title:(0,z.jsx)(xt.Z,{text:e,type:xt.Z.Type.Heading}),body:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XSmall}),(0,z.jsx)(xt.Z,{text:s}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(gh,{onBlur:c,styling:"tight",name:"real_name",type:"text",maxLength:50,value:n,placeholder:a,onChange:u,validation:(0,v.isEmpty)(r)?m:p})]}),actions:[(0,z.jsx)(ic.I,{text:l,styling:ic.I.Styling.Filled,onClick:d})]})})()},tee=e=>{let{banner:t,screen:i,show:n,onClose:s}=e;const{track:r}=vi(),{animationUrl:a,imageUrl:o,heading:l,text:c,textLinkTitle:d,textLinkUrl:p,primaryActionTitle:g,primaryActionUrl:h,closeActionTitle:x,closeActionUrl:f}=t;function y(e){r(Ri({screen:i,target:e}))}(0,m.useEffect)((()=>{r(Wi({screen:i}))}),[i,r]);let v="";return p&&d&&(v='<a href="'.concat(p,'">').concat(d,"</a>")),(0,z.jsx)(cp.Z,{show:n,hasScrollableContent:!0,children:(0,z.jsxs)("div",{children:[(0,z.jsx)("div",{className:"c-modal__image portal-merge-modal__shrinking-container",children:(0,z.jsx)(u.Z,{animationUrl:a,fallbackImageSrc:o,fallbackImageScale:u.Z.ImageScaling.Contain})}),(0,z.jsxs)("div",{className:"c-modal__inline-content",children:[(0,z.jsx)("div",{className:"c-modal__title",children:(0,z.jsx)(xt.Z,{alignment:xt.Z.Alignment.Center,text:l,type:xt.Z.Type.Heading})}),(0,z.jsx)("div",{className:"c-modal__body",onClick:function(e){e.target instanceof HTMLAnchorElement&&y(qm.MergeAnnouncementLink)},children:(0,z.jsx)(xt.Z,{alignment:xt.Z.Alignment.Center,text:"".concat(c," ").concat(v),html:!0})})]}),(0,z.jsxs)("div",{className:"c-modal__actions",children:[(0,z.jsx)("div",{className:"c-modal__action",children:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,url:h,text:g,onClick:function(){y(qm.MergeAnnouncementAction),h||s()}})}),(0,z.jsx)("div",{className:"c-modal__action",children:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,url:f,text:x,onClick:function(){y(qm.CloseScreen),f||s()}})})]})]})})},iee="hidePortalMergeAnnouncementModal",nee=e=>{let{banner:t,seenBannerType:i}=e;const[n,s]=(0,m.useState)(!(0,vc.St)(iee));return(0,m.useEffect)((()=>{(0,vc.D9)(iee,"1"),i&&(0,Fe.FZE)({type:i})}),[n,i]),(0,z.jsx)(tee,{banner:t,screen:$t.MergeAnnouncement,show:n,onClose:function(){s(!1)}})};function see(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class ree extends m.Component{constructor(){super(...arguments),see(this,"state",{isVisible:!0}),see(this,"handleCtaClick",(()=>{(0,Fe.FZE)({type:"portal_merge_data_migration",name:"portal_merge_user"}),this.setState({isVisible:!1})}))}render(){const{heading:e,text:t,ctaTitle:i}=this.props.banner;return this.state.isVisible?(0,z.jsx)(w8,{title:(0,z.jsx)(xt.Z,{text:e,type:xt.Z.Type.Heading}),body:(0,z.jsx)(xt.Z,{text:t,html:!0}),actions:[(0,z.jsx)(ic.I,{text:i,styling:ic.I.Styling.Filled,onClick:this.handleCtaClick})]}):null}}const aee=ree,oee=e=>{let{banner:t,screen:i,seenBannerType:n}=e;const[s,r]=(0,m.useState)(!0);return(0,m.useEffect)((()=>{(0,Fe.FZE)({type:n})}),[n]),(0,z.jsx)(tee,{show:s,banner:t,screen:i,onClose:function(){r(!1)}})},lee=e=>{let{banner:t,screen:i}=e;const{track:n}=vi(),{heading:s,text:r,buttonTitle:a,buttonUrl:o}=t;return(0,z.jsx)(w8,{title:(0,z.jsx)(xt.Z,{text:s,type:xt.Z.Type.Heading}),body:(0,z.jsx)(xt.Z,{text:r,html:!0}),actions:[(0,z.jsx)(ic.I,{text:a,url:o,styling:ic.I.Styling.Filled,onClick:function(){n(Ri({target:qm.MergeAnnouncementAction,screen:i}))}})]})},cee=e=>{let{banner:t}=e;const i=qp("hideMergeWelcomeScreenModal"),[n,s]=(0,m.useState)(1===i);return(0,z.jsx)(tee,{banner:t,screen:$t.Welcome,show:n,onClose:function(){s(!1)}})},dee=e=>{let{banner:t,onSlideChange:i,onClose:n}=e;const s=E(),{track:r}=vi(),[a,o]=(0,m.useState)(!0),[l,c]=(0,m.useState)(0),[d,u]=(0,m.useState)(!0),[p,g]=(0,m.useState)(!1),h=!!t.steps[l].video,x=(0,m.useMemo)((()=>Array(t.steps.length).fill(0).map((()=>(0,m.createRef)()))),[t.steps.length]),f=(0,m.useCallback)((e=>{var t;return null===(t=x[e])||void 0===t?void 0:t.current}),[x]),v=(0,m.useCallback)((async e=>{try{await e.play(),g(!1)}catch{g(!0)}}),[]);function _(e){const t=f(e);t&&(t.currentTime=0),e!==l&&(c(e),i(e))}function b(e){const t=f(l);t&&e.currentTarget===t&&(u(!1),v(t))}function j(e){const t=f(l);t&&e.currentTarget===t&&(u(!0),t.pause())}function S(e){v(e.currentTarget)}function Z(){_(Math.min(l+1,t.steps.length-1))}function I(e,t){const i=p&&t===l;return(0,z.jsx)("video",{"data-testid":"onboarding-video-".concat(t),ref:x[t],muted:a,playsInline:!0,className:i?"u-cursor-pointer":void 0,poster:e.vertical.imageUrl,onCanPlayThrough:b,onWaiting:j,onClick:i?S:void 0,onEnded:Z,children:e.vertical.formats.map((e=>(0,z.jsx)("source",{src:e.url,type:"video/".concat(e.format)},e.format)))})}return(0,m.useEffect)((()=>{const e=f(l);if(e)return e.readyState===e.HAVE_ENOUGH_DATA?v(e):(e.load(),u(!0)),()=>e.pause()}),[f,v,l]),(0,z.jsxs)("div",{className:"u-position-relative",children:[(0,z.jsxs)("div",{className:"u-position-absolute u-fill-width u-fill-height u-flexbox u-flex-direction-column u-zindex-bump u-no-pointer-events",children:[(0,z.jsx)("div",{className:"u-auto-pointer-events",children:(0,z.jsx)(Pm.Z,{theme:"transparent",left:h&&(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,inline:!0,onClick:function(){o((e=>{var i,n;return i=!e,r(Ri({screen:t.name,target:i?qm.MuteVideo:qm.UnmuteVideo,targetDetails:null===(n=t.steps[l])||void 0===n?void 0:n.name})),!e}))},testId:"onboarding-video-mute-action",deprecatedIconName:a?"speaker-muted":"speaker",deprecatedIconColor:ht.Z.Color.GreyscaleLevel7}),right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,inline:!0,onClick:n,testId:"onboarding-close-button",deprecatedIconName:"x",deprecatedIconColor:ht.Z.Color.GreyscaleLevel7})})}),(0,z.jsxs)("div",{className:"u-flex-grow u-justify-content-center u-align-items-center u-flexbox",children:[d&&(0,z.jsx)("div",{"data-testid":"onboarding-modal-loader",children:(0,z.jsx)(Dp.Z,{size:Dp.Z.Size.X2Large})}),!d&&p&&(0,z.jsx)("div",{"data-testid":"onboarding-modal-play-button",children:(0,z.jsx)(Kl.U,{src:"/assets/onboarding-modal/play-button.svg",size:Kl.U.Size.X2Large})})]}),d?null:(0,z.jsx)("div",{className:"u-auto-pointer-events",children:(0,z.jsx)(Pm.Z,{theme:"transparent",body:(0,z.jsx)(gt.Z,{theme:"transparent",children:(0,z.jsx)(Iz.Z.Navigation,{activeSlide:l,slidesCount:t.steps.length,onBulletSelect:_})})})}),(0,z.jsx)("div",{className:"onboarding-modal__tear"})]}),(0,z.jsx)(Iz.Z,{index:l,slides:t.steps.map((function(e,t){const i=e.video,n=y()("onboarding-modal__slide-content",{"onboarding-modal__slide-video-content":i});return(0,z.jsx)("div",{className:n,children:i?I(i,t):(0,z.jsx)(Kl.U,{src:e.imageUrl,draggable:!1})})})),arrows:s.phones?Iz.Z.Arrows.Inside:Iz.Z.Arrows.Outside,onSlideInteract:_,hideNavigation:!0})]})},uee=e=>{let{onClick:t}=e;const i=U("onboarding");return(0,z.jsx)(gt.Z,{children:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,text:i("actions.sell"),url:Me.UNR,onClick:t})})},mee=e=>{var t;let{banner:i}=e;const{track:n}=vi(),[s,r]=(0,m.useState)(!0),[a,o]=(0,m.useState)(0),l=E(),c=(0,p.v9)(Cl),d=(0,p.I0)(),u=(0,p.v9)(Wt("onboarding_modal_dimensions")),g=l.phones&&u,h=null===(t=i.steps[a])||void 0===t?void 0:t.name,x={maxWidth:g?"400px":void 0,width:g?"calc(100% - 70px)":void 0};Xn({abTestName:"onboarding_verification",shouldTrackExpose:!0}),Xn({abTestName:"onboarding_video_buyers",shouldTrackExpose:!0}),Xn({abTestName:"category_intent",shouldTrackExpose:!0});const f=(()=>{const e=(0,p.v9)(Y),t=(0,m.useRef)(!1);return(0,m.useCallback)((i=>{t.current||(DI({event:cg.xy.FirstAppViewAfterOnboarding,userExternalId:e},{defer:null==i?void 0:i.defer,oncePerUser:!0}),t.current=!0)}),[e])})();function y(){r(!1),n(Ri({screen:i.name,target:qm.CloseScreen,targetDetails:h})),f(),d(KN.setBanners({banners:{...c,onboardingModal:{...i,isClosed:!0}}}))}return Hz("beforeunload",(()=>f({defer:!0}))),(0,m.useEffect)((()=>{(0,Fe.FZE)({type:"onboarding_modal",name:i.name})}),[i.name]),(0,m.useEffect)((()=>{n(Wi({screen:i.name}))}),[i.name,n]),(0,m.useEffect)((()=>{h&&n(Gi({screen:i.name,target:cb.OnboardingModalCard,targetDetails:h}))}),[i.name,h,n]),(0,z.jsxs)(cp.Z,{show:s,defaultCallback:y,closeOnOverlay:!0,className:"u-overflow-visible u-position-relative",contentDimensions:x,children:[(0,z.jsx)(dee,{banner:i,onSlideChange:o,onClose:y}),(0,z.jsx)(uee,{onClick:function(){n(Ri({screen:i.name,target:qm.UploadItem,targetDetails:h})),f({defer:!0})}})]})},pee=e=>{let{banner:t,onConfirm:i,isLoading:n}=e;const{track:s}=vi(),[r,a]=(0,m.useState)(!1),[o,l]=(0,m.useState)();return(0,m.useEffect)((()=>{(0,Fe.FZE)({type:y6.CategoryIntentBanner,name:t.name})}),[t.name]),(0,m.useEffect)((()=>{s(Wi({screen:$t.CategoryIntentSelection}))}),[s]),(0,z.jsxs)("div",{className:"u-ui-padding-horizontal-large u-ui-padding-bottom-x-large",children:[(0,z.jsx)(xt.Z,{text:t.title,type:xt.Z.Type.Heading,width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),t.preferences.map((function(e,i){const{value:n,icon:s,name:r}=e,a=t.preferences.length-1===i;return(0,z.jsxs)(m.Fragment,{children:[(0,z.jsx)(gt.Z,{onClick:()=>function(e){l(e)}(n),prefix:(0,z.jsx)(Kl.U,{size:Kl.U.Size.Regular,src:s,styling:Kl.U.Styling.Rounded}),suffix:(0,z.jsx)(qx.J,{checked:o===n,name:"radio_checked"}),title:r,clickable:!0}),!a&&(0,z.jsx)(h.Z,{})]},n)})),(0,z.jsx)(x.Z,{size:x.Z.Size.X3Large}),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:t.subtitle,type:xt.Z.Type.Caption,width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(ic.I,{onClick:async function(){var e;o&&(e=qm.Confirm,s(Ri({screen:$t.CategoryIntentSelection,target:e})),a(!0),await(0,Fe.rnN)(o),i())},styling:ic.I.Styling.Filled,text:t.actions.primary,isLoading:r||n,disabled:!o})]})]})},gee=e=>{let{banner:t,onConfirm:i}=e;const{track:n}=vi(),s=U(),[r,a]=(0,m.useState)(!1);function o(){n(Ri({screen:$t.CategoryIntentSelection,target:qm.CloseScreen})),a(!0),(0,ls.sl)()}return(0,z.jsx)(cp.Z,{show:!0,defaultCallback:o,hasScrollableContent:!0,closeOnOverlay:!r,testId:"category-intent-modal",children:(0,z.jsx)("div",{className:"u-fill-width",children:(0,z.jsxs)(Lg,{children:[(0,z.jsx)(Pm.Z,{right:(0,z.jsx)(ic.I,{testId:"close-modal-button",styling:ic.I.Styling.Flat,onClick:o,disabled:r,deprecatedIconName:"x",inline:!0,aria:{"aria-label":s("category_intent_modal.a11y.actions.close_modal")}})}),(0,z.jsx)(pee,{banner:t,onConfirm:i,isLoading:r})]})})})},hee=e=>{let{banner:t}=e;const{title:i,subtitle:n,actionTitle:s,actionUrl:r,name:a}=t;return(0,z.jsx)(w8,{title:(0,z.jsx)(xt.Z,{text:i,type:xt.Z.Type.Heading,theme:"warning"}),body:(0,z.jsx)(xt.Z,{text:n,html:!0}),actions:[(0,z.jsx)(ic.I,{text:s,url:r,styling:ic.I.Styling.Filled,onClick:()=>{(0,Fe.FZE)({type:y6.CatalogRules,name:a})}})]})};let xee,fee;!function(e){e.Info="info",e.Success="success",e.Warning="warning",e.Error="error"}(xee||(xee={})),function(e){e.FirstReminder="first_reminder",e.SecondReminder="second_reminder",e.NoFillReminder="no_fill_reminder"}(fee||(fee={}));const yee=e=>{let{banner:t,isBannerInFeed:i,screen:n}=e;const{track:s}=vi(),[r,a]=(0,m.useState)(!0),o=(0,p.v9)(Ht);(0,m.useEffect)((()=>{t.id&&(i&&t.newsFeed.dismissed||s(Gi({target:cb.TaxpayersDac7Banner,targetDetails:t.id,screen:n||o})))}),[t.id,n,i,t.newsFeed.dismissed,o,s]);const l={[xee.Warning]:oh.Z.Type.Warning,[xee.Error]:oh.Z.Type.Error,[xee.Success]:oh.Z.Type.Success,[xee.Info]:oh.Z.Type.Info},c=e=>({text:e.title,callback:()=>{s(Ri({screen:o,target:qm.TaxpayersDac7Banner,targetDetails:JSON.stringify({button:"primary"===e.type?"finalise":"learn",id:t.id})})),(0,ls.ru)(e.link)}});return i&&t.newsFeed.dismissed?null:r?(0,z.jsx)(oh.Z,{title:t.title,body:t.body,closable:t.newsFeed.isDismissible&&i,styling:oh.Z.Styling.Tight,type:l[t.type],actions:(()=>{if(!t.actions)return[];const e=t.actions.find((e=>"primary"===e.type)),i=t.actions.find((e=>"secondary"===e.type));return 2===t.actions.length&&e&&i?[c(e),c(i)]:1===t.actions.length&&e?[c(e)]:1===t.actions.length&&i?[c(i)]:[]})(),onClose:()=>{t.newsFeed.isDismissible&&i&&(a(!1),(0,Fe.bBU)(),s(Ri({screen:o,target:qm.TaxpayersDac7Banner,targetDetails:JSON.stringify({button:"close",id:t.id})})))},testId:"taxpayer-banner"}):null};function vee(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const _ee=(0,p.$j)((e=>({portal:Fs(e),user:W(e),isTaxpayerBannerFsEnabled:Wt("web_taxpayers_banners")(e)})));class bee extends m.Component{constructor(){super(...arguments),vee(this,"renderFullNameConfirmationBanner",(()=>{const{banners:e}=this.props;return(0,v.isNil)(e.fullNameConfirmation)?null:(0,z.jsx)(eee,{data:e.fullNameConfirmation})})),vee(this,"renderPortalMergeBanner",(()=>{const{banners:e}=this.props;return e.portalMergeFeed?(0,z.jsx)(lee,{banner:e.portalMergeFeed}):null})),vee(this,"renderTaxpayerBanner",(()=>{const{banners:e,isTaxpayerBannerFsEnabled:t}=this.props;return e.taxpayerBanner&&t?(0,z.jsx)(yee,{banner:e.taxpayerBanner,isBannerInFeed:!0}):null})),vee(this,"renderPortalMergeDataMigrationBanner",(()=>{const{banners:e}=this.props;return e.portalMergeDataMigration?(0,z.jsx)(aee,{banner:e.portalMergeDataMigration}):null}))}renderPersonalizationBanner(){const{banners:e,portal:t}=this.props;if(!e.feedPersonalizationBanner)return null;const{bottomTitle:i,bottomSubtitle:n,bottomActionTitle:s}=e.feedPersonalizationBanner;return(0,z.jsx)(L6,{title:i,subtitle:n,actionText:s,disableTitleTranslation:t===r8.De})}renderNPSBanner(){const{banners:e,user:t}=this.props;return!t||(0,v.isNil)(e.nps)?null:(0,z.jsx)(Y6,{userId:t.id})}renderEmailConfirmationBanner(){const{banners:e,user:t}=this.props;return!t||(0,v.isNil)(e.emailConfirmation)?null:(0,z.jsx)($6,{userId:t.id,email:t.email})}renderTermsBanner(){const{banners:e}=this.props;if((0,v.isNil)(e.termsAndConditions))return null;const{buttonTitle:t,subtitle:i,title:n}=e.termsAndConditions;return(0,z.jsx)(w8,{title:(0,z.jsx)(xt.Z,{text:n,type:xt.Z.Type.Heading,theme:"warning"}),body:(0,z.jsx)(xt.Z,{text:i,html:!0}),actions:[(0,z.jsx)(ic.I,{text:t,url:Me.qyY,styling:ic.I.Styling.Filled})]})}renderCatalogRulesBanner(){const{banners:e}=this.props;return e.catalogRules?(0,z.jsx)(hee,{banner:e.catalogRules}):null}renderPortalMergeAnnouncementModal(){const{banners:e}=this.props,t=e.portalMergeTargetAnnouncement||e.portalMergeSourceAnnouncement;return t?(0,z.jsx)(nee,{banner:t,seenBannerType:e.portalMergeTargetAnnouncement&&"portal_merge_target_announcement"}):null}renderWelcomeScreenModal(){const{banners:e}=this.props,t=e.portalMergeWelcomeScreen;return t?(0,z.jsx)(cee,{banner:t}):null}renderGoToOldPortalModal(){const{banners:e}=this.props,t=e.portalMergeGoToOldPortalBannerModal;return t?(0,z.jsx)(oee,{banner:t,screen:$t.MergeAnnouncement,seenBannerType:"portal_merge_go_to_old_portal"}):null}renderOnBoardingModal(){const{banners:e}=this.props,t=e.onboardingModal,{categoryIntentBanner:i}=e;return!t||i?null:(0,z.jsx)(mee,{banner:t})}renderCategoryIntentModal(){const{banners:e}=this.props,t=e.categoryIntentBanner;return t?(0,z.jsx)(gee,{banner:t,onConfirm:ls.sl}):null}render(){const{afterBanners:e}=this.props,t=(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),children:[this.renderTaxpayerBanner(),this.renderPortalMergeDataMigrationBanner(),this.renderPersonalizationBanner(),this.renderNPSBanner(),this.renderEmailConfirmationBanner(),this.renderTermsBanner(),this.renderFullNameConfirmationBanner(),this.renderPortalMergeBanner(),this.renderCatalogRulesBanner()]}),i=!!(0,v.compact)(t.props.children).filter((e=>!j(e))).length;return(0,z.jsxs)(z.Fragment,{children:[this.renderPortalMergeAnnouncementModal(),this.renderWelcomeScreenModal(),this.renderGoToOldPortalModal(),this.renderOnBoardingModal(),this.renderCategoryIntentModal(),t,i&&(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),i&&e]})}}const jee=_ee(bee),See=P0(k0),Zee=e=>{let{items:t,cta:i,promoBox:n,homepageSessionId:s,header:r,contentSource:a,itemTestId:o,handleErrorLogging:l,preventLog:c,testId:d}=e;const{track:u}=vi(),{logCardImpression:g,logCardClick:h}=(0,m.useContext)(Im),x=(0,p.v9)(Wt("web_intersection_observer_waypoint")),f=(0,m.useRef)([]),y=(0,m.useRef)(!1),v=n&&!n.isControl;if(!t.length)return null;function _(e){let{itemId:t,isFollowEvent:i}=e;u(Ri({target:qm.Favourite})),u(Ai({itemId:t,isFollowEvent:i,contentSource:a,homepageSessionId:s}))}const b=(e,t)=>()=>{const{id:i,user:n}=e;f.current.includes(i)||(f.current.push(i),u(Bi({id:i,position:t,contentType:z0.Item,contentSource:a,itemOwnerId:n.id,homepageSessionId:s})))};return(0,z.jsxs)(z.Fragment,{children:[r,(0,z.jsxs)(v$,{controlsScrollType:f$.Partial,children:[v&&(0,z.jsx)(v$.Item,{className:"horizontally-scrollable-items__item",children:v?(0,z.jsx)("div",{className:"horizontally-scrollable-items__item-content",children:(0,z.jsx)(O6,{image:n.imageUrl,color:n.backgroundColor,url:n.url,impressionUrl:n.impressionUrl,onEnter:function(){if(n){switch(n.type){case Be.HM.Vinted:if(y.current)break;u(Bi({id:n.id,position:1,contentType:z0.Promo,contentSource:a}));break;case Be.HM.BrazeSticky:g(n.id)}y.current=!0}},onClick:function(){if(n)switch(n.type){case Be.HM.Vinted:u(qi({id:n.id,contentType:z0.Promo,contentSource:a,position:1}));break;case Be.HM.BrazeSticky:h(n.id)}},testId:o})}):null}),t.map((function(e,t){const i=t+1+(v?1:0);return(0,z.jsx)(v$.Item,{className:"horizontally-scrollable-items__item",testId:d,children:(0,z.jsx)(w2,{intersectionObserverEnabled:x,onEnter:b(e,i),waypointProps:{onEnter:b(e,i),horizontal:!0},children:(0,z.jsx)("div",{"data-testid":"horizontally-scrollable-item-".concat(e.id),className:"horizontally-scrollable-items__item-content",children:(0,z.jsx)(R6,{promoBox:n,index:t,children:(0,z.jsx)("div",{className:"u-flex-grow u-fill-width",children:(0,z.jsx)(cc,{FallbackComponent:cc.ComponentError,preventLog:c,onError:l,children:(0,z.jsx)(See,{item:e,showOwner:!1,tracking:{id:e.id,contentType:z0.Item,contentSource:a,position:i,homepageSessionId:s},onFavouriteToggle:_,showStatus:!0,testId:o&&"".concat(o,"-").concat(e.id)})})})})})})},e.id)})),i]})]})};Zee.CtaItem=e=>{let{url:t,onClick:i,onEnter:n,content:s,testId:r}=e;const a=(0,p.v9)(Wt("web_intersection_observer_waypoint")),o=()=>(0,z.jsx)("div",{className:"horizontally-scrollable-items__cta-content",children:(0,z.jsx)(gt.Z,{url:t,onClick:i,type:gt.Z.Type.Navigating,theme:"transparent",testId:r,children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,theme:"muted",alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent,text:s})})});return(0,z.jsx)(v$.Item,{className:"horizontally-scrollable-items__item",children:n?(0,z.jsx)(w2,{intersectionObserverEnabled:a,onEnter:n,waypointProps:{onEnter:n,horizontal:!0},children:o()}):o()})};const Iee=Zee,Cee=Q4("Home"),kee=e=>{let{title:t,subtitle:i,name:n,items:s,promoBox:r,homepageSessionId:a,contentSource:o,position:l,headerCta:c,itemCta:d,id:u}=e;const{track:g}=vi(),h=E(),f=(0,m.useRef)(!1),y=(0,m.useRef)([]),v=(0,p.v9)(Wt("web_intersection_observer_waypoint")),_=e=>()=>{g((e=>{const{type:t,blockName:i,blockPosition:n,homepageSessionId:s,id:r}=e,a={type:t,block_name:i,block_position:n};return s&&(a.homepage_session_id=s),r&&(a.id=r),{event:"user.click_homepage_block_cta",extra:a}})({type:e,blockName:n,blockPosition:l,homepageSessionId:a,id:u}))},b=e=>()=>{y.current.includes(e)||(y.current.push(e),g((e=>{const{type:t,blockName:i,blockPosition:n,homepageSessionId:s,id:r}=e,a={type:t,block_name:i,block_position:n};return s&&(a.homepage_session_id=s),r&&(a.id=r),{event:"user.view_homepage_block_cta",extra:a}})({type:e,blockName:n,blockPosition:l,homepageSessionId:a,id:u})))},j=()=>{f.current||(f.current=!0,g(Rn({blockName:n,blockPosition:l,homepageSessionId:a,id:u})))};return(0,z.jsx)(w2,{intersectionObserverEnabled:v,onEnter:j,waypointProps:{onEnter:j,scrollableAncestor:window},children:(0,z.jsx)("div",{children:(0,z.jsx)(Iee,{items:s,cta:d?(0,z.jsx)(Iee.CtaItem,{url:d.url,onClick:_(g6.Item),content:d.title,testId:"".concat(n,"-item-cta"),onEnter:b(g6.Item)}):null,promoBox:r,header:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,width:xt.Z.Width.Parent,text:t,as:"h2"}),body:i?(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,width:xt.Z.Width.Parent,text:i}):null,testId:"".concat(n,"-header"),suffix:c&&(0,z.jsx)(w2,{intersectionObserverEnabled:v,onEnter:b(g6.Header),waypointProps:{onEnter:b(g6.Header)},children:(0,z.jsx)("div",{children:(0,z.jsx)(ic.I,{url:c.url,onClick:_(g6.Header),styling:ic.I.Styling.Flat,text:(0,z.jsx)(xt.Z,{theme:"primary",text:c.title}),aria:{"aria-label":c.accessibilityLabel||""},testId:"".concat(n,"-header-cta")})})})}),h.phones?(0,z.jsx)(x.Z,{size:x.Z.Size.Regular}):(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]}),contentSource:o,homepageSessionId:a,itemTestId:n,preventLog:!0,testId:"".concat(n,"-block")})})})},wee=e=>(0,z.jsx)(cc,{FallbackComponent:cc.ComponentError,preventLog:!0,onError:t=>Cee(t,e.name),children:(0,z.jsx)(kee,{...e})});function Pee(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class zee extends m.Component{constructor(){super(...arguments),Pee(this,"isBrandClusterSeen",!1),Pee(this,"handleBrandClick",((e,t,i)=>()=>{const{track:n}=this.props;n((e=>{const{brandId:t,brandClusterId:i,position:n}=e;return{event:"user.select_brand",extra:{brand_id:t,brand_cluster_id:i,position:n}}})({brandId:e,brandClusterId:i,position:t}))})),Pee(this,"handleBrandSectionVisibility",(()=>{if(this.isBrandClusterSeen)return;const{track:e}=this.props;this.isBrandClusterSeen=!0,e(Gi({target:cb.BrandClusterSection}))}))}renderBrands(e,t){return e.map((e=>{let{id:i,title:n,clusterId:s,path:r}=e;return t.includes(i)?null:(t.push(i),(0,z.jsx)("div",{className:"brand-clusters__brand",children:(0,z.jsx)(Lt.Z,{styling:Lt.Z.Styling.Tight,children:(0,z.jsx)(gt.Z,{url:r,type:gt.Z.Type.Navigating,styling:gt.Z.Styling.Narrow,onClick:this.handleBrandClick(i,t.length,s),children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:n})})})},i))}))}render(){const{brandClusters:e}=this.props;return(0,z.jsx)(Jp.h,{onEnter:this.handleBrandSectionVisibility,scrollableAncestor:window,children:(0,z.jsx)("div",{className:"u-flexbox u-flex-wrap",children:this.renderBrands(e,[])})})}}const Tee=zx(zee);function Fee(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Nee(e){const t=$s({query:e});return(0,ys.Iq)(Me.JXU,t)}const Lee=(0,p.$j)((e=>({intersectionObserverEnabled:Wt("web_intersection_observer_waypoint")(e)})));class Eee extends m.Component{constructor(){super(...arguments),Fee(this,"seenSearches",[]),Fee(this,"handleClick",((e,t)=>()=>{this.props.track((e=>{const{index:t,query:i}=e;return{event:"user.select_popular_search",extra:{index:t,search_query:i}}})({index:t,query:e.searchTerm}))})),Fee(this,"handleSearchVisibility",((e,t)=>()=>{this.seenSearches.includes(e.searchTerm)||(this.seenSearches.push(e.searchTerm),this.props.track((e=>{const{index:t,query:i}=e;return{event:"user.view_popular_search",extra:{index:t,search_query:i}}})({index:t,query:e.searchTerm})))}))}render(){const{searches:e,intersectionObserverEnabled:t}=this.props;return(0,z.jsx)(v$,{children:e.map(((e,i)=>(0,z.jsx)(v$.Item,{children:(0,z.jsx)(w2,{intersectionObserverEnabled:t,waypointProps:{onEnter:this.handleSearchVisibility(e,i),horizontal:!0},onEnter:this.handleSearchVisibility(e,i),children:(0,z.jsx)("div",{className:"popular-searches-banner__item-content",children:(0,z.jsx)(Lt.Z,{styling:Lt.Z.Styling.Tight,children:(0,z.jsx)(gt.Z,{url:Nee(e.searchTerm),type:gt.Z.Type.Navigating,chevron:!1,title:e.searchTerm,onClick:this.handleClick(e,i),children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:e.weeklyItemViews,width:xt.Z.Width.Parent})})})})})},(0,v.kebabCase)(e.searchTerm))))})}}const Oee=Lee(zx(Eee)),Ree=e=>{let{name:t,position:i,id:n,homepageSessionId:s,headerProps:r,body:a,primary:o=!1}=e;const{track:l}=vi(),c=E(),d=(0,m.useRef)(!1);return(0,z.jsxs)(w2,{intersectionObserverEnabled:!0,onEnter:()=>{d.current||(d.current=!0,l(Rn({blockName:t,blockPosition:i,homepageSessionId:s,id:n})))},children:[(()=>{if(!r)return null;const{title:e,subtitle:i}=r;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{theme:o?"primary":void 0,styling:gt.Z.Styling.Tight,title:(0,z.jsx)("div",{className:"homepage-layouts-text-truncation",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,width:xt.Z.Width.Parent,text:e,as:"h2",theme:o?"inverse":void 0,tabIndex:0})}),body:i?(0,z.jsx)("div",{className:"homepage-layouts-text-truncation",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,width:xt.Z.Width.Parent,text:i})}):null,testId:"".concat(t,"-header")}),c.phones?(0,z.jsx)(x.Z,{size:x.Z.Size.Regular}):(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]})})(),a]})},Dee=e=>{let{name:t,children:i,desktopClassName:n,mobileClassName:s,desktopView:r}=e;return r?(0,z.jsx)("div",{className:n,children:i}):(0,z.jsx)(v$,{children:(0,z.jsx)("div",{className:s,"data-testid":"".concat(t,"-mobile-view"),children:i})})},Aee=e=>{let{name:t,homepageSessionId:i}=e;const{track:n}=vi(),s=(0,m.useRef)([]);return{handleItemClick:(e,s)=>()=>{n(Mn({blockName:t,position:s+1,contentSource:e.contentSource,contentSourceLabel:e.title,contentSourceId:e.id,homepageSessionId:i,screen:$t.NewsFeed}))},handleItemView:(e,r)=>()=>{const a=e.id||e.title;s.current.includes(a)||(s.current.push(a),n(Un({blockName:t,position:r+1,contentSource:e.contentSource,contentSourceLabel:e.title,contentSourceId:e.id,homepageSessionId:i,screen:$t.NewsFeed})))}}},Mee=e=>{let{name:t,element:i,homepageSessionId:n,position:s,accessibilityLabel:r}=e;const a=E(),{handleItemClick:o,handleItemView:l}=Aee({name:t,homepageSessionId:n});return(0,z.jsx)("div",{className:y()("single-row-element","row-element-".concat(s+1),{"row-element-mobile":!a.desktops}),children:(0,z.jsx)(w2,{intersectionObserverEnabled:!0,onEnter:l(i,s),children:(0,z.jsx)(g.Z,{children:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,clickable:!0,url:i.cta.url,type:gt.Z.Type.Navigating,prefix:(0,z.jsx)(Kl.U,{scaling:Kl.U.Scaling.Cover,ratio:Kl.U.Ratio.Square,src:i.photo.url,size:a.desktops?Kl.U.Size.XLarge:Kl.U.Size.Large}),body:(0,z.jsx)("div",{className:"homepage-layouts-text-truncation",children:(0,z.jsx)(xt.Z,{width:xt.Z.Width.Parent,type:xt.Z.Type.Subtitle,text:i.title,alignment:xt.Z.Alignment.Left,theme:"amplified",bold:!0})}),onClick:o(i,s),testId:"homepage-layouts-horizontal-rows",aria:{"aria-label":r||""}})})})})},Uee=e=>{let{elements:t,name:i,position:n,homepageSessionId:s,id:r,title:a,subtitle:o}=e;const l=E();return(0,z.jsx)(Ree,{name:i,position:n,homepageSessionId:s,id:r,headerProps:{title:a,subtitle:o},body:(0,z.jsx)(Dee,{desktopView:l.desktops,name:i,desktopClassName:"horizontal-rows-block-container horizontal-rows-desktop",mobileClassName:"horizontal-rows-block-container",children:t.map(((e,t)=>(0,z.jsx)(Mee,{element:e,name:i,homepageSessionId:s,position:t,accessibilityLabel:e.cta.accessibilityLabel},"horizontal-rows-element-".concat(n,"-").concat(e.title))))})})},Bee=e=>{let{imageSrc:t,title:i,ctaUrl:n,handleItemClick:s,style:r,accessibilityLabel:a}=e;const o=E(),l=r===x6.BigImage,c=r===x6.SmallRoundImage,d=l?o.tabletsUp:o.wide,u=c?Kl.U.Size.X2Large:void 0;return(0,z.jsx)("div",{className:"single-thumbnail-container",children:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,clickable:!0,url:n,onClick:s,testId:"homepage-layouts-thumbnail",aria:{"aria-label":a||""},body:(0,z.jsxs)("div",{className:"single-thumbnail-container-body",children:[(0,z.jsx)("div",{className:y()({"small-round-thumbnail-image":c}),children:(0,z.jsx)(Kl.U,{scaling:Kl.U.Scaling.Cover,ratio:Kl.U.Ratio.Square,src:t,size:d?u:l?Kl.U.Size.X4Large:c?Kl.U.Size.X2Large:Kl.U.Size.X3Large,styling:c?Kl.U.Styling.Circle:Kl.U.Styling.Rounded})}),(0,z.jsx)(gt.Z,{styling:c?gt.Z.Styling.Narrow:gt.Z.Styling.Tight,children:(0,z.jsx)("div",{className:y()("thumbnail-title-wrapper","homepage-layouts-text-truncation",{"big-thumbnail-title":l,"small-round-thumbnail-title":c,"u-ui-padding-top-small":!c}),children:(0,z.jsx)(xt.Z,{width:xt.Z.Width.Parent,type:xt.Z.Type.Title,text:i,alignment:c?xt.Z.Alignment.Center:xt.Z.Alignment.Left})})})]})})})},qee=e=>{let{thumbnails:t,title:i,name:n,subtitle:s,position:r,homepageSessionId:a,id:o,style:l}=e;const{handleItemClick:c,handleItemView:d}=Aee({name:n,homepageSessionId:a}),u=E(),m=l===x6.BigImage,p=m?"thumbnails-layout-container thumbnails-big-image":"thumbnails-layout-container thumbnails-small-image",g=m?u.tabletsUp:u.wide;return(0,z.jsx)(Ree,{name:n,position:r,homepageSessionId:a,id:o,headerProps:{title:i,subtitle:s},body:(0,z.jsx)(Dee,{desktopView:g,name:n,desktopClassName:p,mobileClassName:"thumbnails-layout-mobile-container",children:t.map(((e,t)=>(0,z.jsx)(w2,{intersectionObserverEnabled:!0,onEnter:d(e,t),children:(0,z.jsx)(Bee,{title:e.title,imageSrc:e.photo.url,ctaUrl:e.cta.url,handleItemClick:c(e,t),style:l,accessibilityLabel:e.cta.accessibilityLabel})},"thumbnail-".concat(t,"-").concat(e.title))))})})},Vee=e=>{let{imageSrc:t,title:i,ctaUrl:n,ctaTitle:s,handleItemClick:r,accessibilityLabel:a}=e;const o=E();return(0,z.jsxs)("div",{className:y()("single-banner-container",{"single-banner-container-mobile":!o.wide}),children:[(0,z.jsx)(Kl.U,{scaling:Kl.U.Scaling.Cover,ratio:Kl.U.Ratio.Landscape,src:t,styling:Kl.U.Styling.Rounded}),(0,z.jsx)("div",{className:"layout-banner-info-container",children:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,theme:"transparent",onClick:r,url:n,aria:{"aria-label":a||""},children:(0,z.jsxs)("div",{className:"layout-banner-info",children:[(0,z.jsx)("div",{className:"layout-banner-title-container",children:(0,z.jsx)("div",{className:"homepage-layouts-text-truncation layout-banner-title",children:(0,z.jsx)(xt.Z,{width:xt.Z.Width.Parent,type:xt.Z.Type.Heading,text:i,alignment:xt.Z.Alignment.Center})})}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,inverse:!0,theme:"amplified",text:s,inline:!0,size:ic.I.Size.Small,testId:"homepage-layouts-wide-banner-cta"})]})})})]})},Hee=e=>{let{banners:t,name:i,position:n,homepageSessionId:s,id:r}=e;const{handleItemClick:a,handleItemView:o}=Aee({name:i,homepageSessionId:s}),l=E(),c=l.phones?(0,z.jsx)(x.Z,{size:x.Z.Size.Large}):(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge});return(0,z.jsxs)(z.Fragment,{children:[c,(0,z.jsx)(Ree,{name:i,position:n,homepageSessionId:s,id:r,body:(0,z.jsx)(Dee,{desktopView:l.wide,name:i,desktopClassName:"wide-banners-layout-container",mobileClassName:"wide-banners-layout-mobile-container",children:t.map(((e,t)=>(0,z.jsx)(w2,{intersectionObserverEnabled:!0,onEnter:o(e,t),children:(0,z.jsx)(Vee,{title:e.title,imageSrc:e.photo.url,ctaUrl:e.cta.url,ctaTitle:e.cta.title,handleItemClick:a(e,t),accessibilityLabel:e.cta.accessibilityLabel})},"wide-banner-".concat(t,"-").concat(e.title))))})}),c]})},Gee=e=>{let{items:t,contentSource:i,homepageSessionId:n}=e;const{track:s}=vi(),r=(0,m.useRef)([]);function a(e){let{itemId:t,isFollowEvent:r}=e;s(Ri({target:qm.Favourite})),s(Ai({itemId:t,isFollowEvent:r,contentSource:i,homepageSessionId:n}))}const o=(e,t)=>()=>{const{id:a,user:o}=e;r.current.includes(a)||(r.current.push(a),s(Bi({id:a,position:t+1,contentType:z0.Item,contentSource:i,itemOwnerId:o.id,homepageSessionId:n})))},l=(e,t)=>()=>{s(qi({id:e.id,contentType:z0.Item,contentSource:i,position:t+1,homepageSessionId:n}))};return(0,z.jsx)("div",{className:"card-items-container",children:t.map(((e,t)=>(0,z.jsx)(w2,{intersectionObserverEnabled:!0,onEnter:o(e,t),children:(0,z.jsx)("div",{className:"suggested-product",children:(0,z.jsx)(k0,{item:e,showOwner:!1,onFavouriteToggle:a,showStatus:!0,imageRatio:Kl.U.Ratio.Square,informationCellCssClasses:"item-box-information-cell",onClick:l(e,t),showLatestPriceOnly:!0})})},"item-".concat(e.id))))})},Wee=e=>{let{header:t}=e;return(0,z.jsx)(gt.Z,{body:(0,z.jsxs)("div",{className:"items-card-header","aria-hidden":"true",children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,theme:"amplified",text:t.title,truncate:!0}),(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,theme:"amplified",text:t.subtitle,truncate:!0})]}),prefix:(0,z.jsx)(Kl.U,{ratio:Kl.U.Ratio.Square,size:Kl.U.Size.Large,styling:Kl.U.Styling.Rounded,src:t.photo.url,aria:{"aria-hidden":!0}}),styling:gt.Z.Styling.Tight,tabIndex:0,aria:{"aria-label":"".concat(t.title," ").concat(t.subtitle)}})},Xee=e=>{var t;let{card:i,homepageSessionId:n,blockName:s,index:r}=e;const a="".concat(Be.Fv,"/assets/icons/shuffle.svg"),{track:o}=vi(),[l,c]=(0,m.useState)(!1),[d,u]=(0,m.useState)(i.items),p=(0,m.useCallback)((()=>{var e;o(Mn({blockName:s,position:r+1,contentSource:i.contentSource,contentSourceLabel:(null===(e=i.action)||void 0===e?void 0:e.type)||"",contentSourceId:i.id,homepageSessionId:n,screen:$t.NewsFeed}))}),[o,s,r,i.contentSource,i.id,n,null===(t=i.action)||void 0===t?void 0:t.type]),h=(0,m.useCallback)((async()=>{c(!0),p();const e=await(0,Fe.O7O)({cardId:i.id,blockName:s});if("errors"in e||!i.items.length)return c(!1),void u(i.items);const t=_o(e.items);c(!1),u(t)}),[c,u,i,s,p]);return(0,z.jsx)(g.Z,{children:(0,z.jsx)(gt.Z,{id:"items-card-cell",body:(0,z.jsxs)("div",{children:[(0,z.jsx)(Wee,{header:i.header}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(Gee,{items:d,contentSource:i.contentSource,homepageSessionId:n}),i.action&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),"cta"===i.action.type&&(0,z.jsx)(ic.I,{theme:"primary",text:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:i.action.title,theme:"primary"}),testId:"items-cards-cta-button",url:i.action.url||void 0,onClick:p,truncated:!0}),"shuffle"===i.action.type&&(0,z.jsx)(ic.I,{onClick:h,theme:"primary",icon:(0,z.jsx)(Kl.U,{src:a,size:Kl.U.Size.Regular}),text:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:i.action.title,theme:"primary"}),testId:"items-cards-shuffle-button",disabled:l,isLoading:l,truncated:!0})]})]})})})},Yee=e=>{let{id:t,name:i,title:n,position:s,homepageSessionId:r,cards:a}=e;const o=E(),l=(0,m.useRef)([]),{track:c}=vi(),d=(e,t)=>()=>{const n=e.id;l.current.includes(n)||(l.current.push(n),c(Un({blockName:i,position:t+1,contentSource:e.contentSource,contentSourceLabel:"",contentSourceId:e.id,homepageSessionId:r,screen:$t.NewsFeed})))};return(0,z.jsxs)("div",{className:"cards-layout-block",children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(Ree,{name:i,position:s,homepageSessionId:r,id:t,headerProps:{title:n,subtitle:null},body:(0,z.jsx)(v$,{children:(0,z.jsx)("div",{className:"cards-layout-container","data-testid":"".concat(i,"-mobile-view"),children:a.map(((e,t)=>(0,z.jsx)(w2,{intersectionObserverEnabled:!0,onEnter:d(e,t),children:(0,z.jsx)("div",{className:"items-card-container",children:(0,z.jsx)(Xee,{card:e,homepageSessionId:r,blockName:i,index:t})})},"items-card-".concat(e.id))))})}),primary:!0}),(0,z.jsx)(x.Z,{size:o.phones?x.Z.Size.Large:x.Z.Size.X2Large})]})},Kee=e=>{let{test_anon_id:t,test_id:i,test_name:n,test_user_id:s,country_code:r,variant:a}=e;const{track:o}=vi(),l=(0,m.useRef)(!1);return(0,z.jsx)(w2,{intersectionObserverEnabled:!0,onEnter:()=>{l.current||(l.current=!0,o(bn({anonId:t,id:i,name:n,userId:s?parseInt(s,10):void 0,countryCode:r,variant:a})))},children:(0,z.jsx)("div",{"data-testid":"exposure-block-".concat(i)})})},Jee=e=>{let{children:t,title:i,afterBlockSpacer:n=!0}=e;const s=E(),r=(0,z.jsx)(x.Z,{size:s.phones?x.Z.Size.XLarge:x.Z.Size.X3Large});return i?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:i,as:"h2"}),s.phones?(0,z.jsx)(x.Z,{size:x.Z.Size.Regular}):(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),t,n&&r]}):(0,z.jsxs)(z.Fragment,{children:[t,n&&r]})},Qee=()=>{var e;const t=U("homepage.offline_verification_awareness_modal"),i=null===(e=Xn({abTestName:"ivs_badge"}))||void 0===e?void 0:e.variant,[n,s]=(0,m.useState)(!1),[r,a]=(0,m.useState)(void 0),[o,l]=(0,m.useState)(void 0),c=(0,m.useCallback)((()=>"true"===(0,Bn.le)(f6)),[]),d=(0,m.useCallback)((()=>{(0,Bn.D$)(f6,"true")}),[]);return(0,m.useEffect)((()=>{c()||async function(){const e=await(0,Fe.jN_)();"errors"in e||("a"===i&&a(e.image_a_url),"b"===i&&a(e.image_b_url),l(e.catalog_url),s(!0),d())}()}),[c,d,i]),(0,z.jsxs)(cp.Z,{isFramed:!1,show:n,testId:"offline-verification-awareness-modal",closeOnOverlay:!0,children:[(0,z.jsx)(Pm.Z,{body:t("navigation_title"),right:(0,z.jsx)(ic.I,{inline:!0,iconName:$y.Z,styling:ic.I.Styling.Flat,onClick:function(){s(!1)},testId:"offline-verification-awareness-modal-navigation-close-button"})}),(0,z.jsx)(Kl.U,{src:r,scaling:Kl.U.Scaling.Cover,ratio:Kl.U.Ratio.Landscape,testId:"awareness-modal-image"}),(0,z.jsx)(gt.Z,{prefix:(0,z.jsx)(Wy.Z,{name:v0.Z}),title:t("title"),body:(0,z.jsx)(xt.Z,{text:t("description")})}),(0,z.jsx)(gt.Z,{body:(0,z.jsx)(ic.I,{text:t("actions.cta"),styling:ic.I.Styling.Filled,onClick:function(){o&&(0,ls.ru)(o)},testId:"offline-verification-awareness-modal-button"})})]})},$ee=()=>{const e=U(),{track:t}=vi(),i=(0,p.I0)(),[n]=D6(Be.HM.BrazeSticky),{data:s,isLoading:r}=(()=>{const{fetch:e,isLoading:t,transformedData:i,error:n}=ih(Fe.VOc,ax);return(0,m.useEffect)((()=>{e(2)}),[e]),{data:i,isLoading:t,error:n}})(),{data:a,isLoading:o}=(()=>{const{fetch:e,isLoading:t,transformedData:i,error:n}=ih(Fe.vOD,ox);return(0,m.useEffect)((()=>{e()}),[e]),{data:i,isLoading:t,error:n}})(),l=(0,p.v9)(Cl),c=Xn({abTestName:"feed_removal"}),d=(0,p.v9)(Wn),u=Xn({abTestName:"ivs_badge"}),g=(0,p.v9)(Wt("feed_removal_web")),h=(0,p.v9)(we);Xn({abTestName:"buyer_protection_fee_pricing_test_uk_category_children_new",shouldTrackExpose:!0}),(0,m.useEffect)((()=>{i(fV())}),[i]),(0,m.useEffect)((()=>{(0,Fe.FZE)({type:y6.Nps})}),[]);const f=(e,t,i)=>{switch(e.type){case h6.ItemBoxBlock:return((e,t,i)=>{return s?(0,z.jsx)(Jee,{children:(0,m.createElement)(wee,{...e,promoBox:i&&s?s.promoBox?{id:(r=s.promoBox).id.toString(),url:r.web_link||"",backgroundColor:r.photo.dominant_color,imageUrl:r.photo.url,impressionUrl:r.impression_url,isControl:!1,type:Be.HM.Vinted,position:void 0}:n:null,homepageSessionId:s.homepageSessionId,position:t+1,key:e.name})}):null;var r})(e.entity,t,i);case h6.SuggestedBrandsBlock:return(e=>{const{brands:t,title:i}=e;return t.length?(0,z.jsx)(Jee,{title:i,children:(0,z.jsx)(Tee,{brandClusters:t})}):null})(e.entity);case h6.SuggestedSearchesBlock:return(e=>{const{searches:t,title:i}=e;return t.length?(0,z.jsx)(Jee,{title:i,children:(0,z.jsx)(Oee,{searches:t})}):null})(e.entity);case h6.ThumbnailsBlock:return((e,t)=>{let{elements:i,title:n,subtitle:r,name:a,id:o,style:l}=e;return s&&i.length?l===x6.TwoHorizontalRows?(0,z.jsx)(Jee,{children:(0,z.jsx)(Uee,{name:a,elements:i,position:t+1,homepageSessionId:s.homepageSessionId,id:o,title:n,subtitle:r})}):(0,z.jsx)(Jee,{children:(0,z.jsx)(qee,{thumbnails:i,title:n,subtitle:r,name:a,id:o,homepageSessionId:s.homepageSessionId,position:t+1,style:l})}):null})(e.entity,t);case h6.WideBannersBlock:return((e,t)=>{let{elements:i,name:n,id:r}=e;return s&&i.length?(0,z.jsx)(Jee,{children:(0,z.jsx)(Hee,{banners:i,name:n,position:t+1,homepageSessionId:s.homepageSessionId,id:r})}):null})(e.entity,t);case h6.ExposureBlock:return(0,z.jsx)(Kee,{...e.entity});case h6.ItemsCardsBlock:return((e,t)=>{let{cards:i,title:n,id:r,name:a}=e;return s&&i.length?(0,z.jsx)(Jee,{children:(0,z.jsx)(Yee,{cards:i,title:n,position:t+1,id:r,name:a,homepageSessionId:s.homepageSessionId})}):null})(e.entity,t);default:return null}},y=!("on"===(null==c?void 0:c.variant)&&g),_="a"===(null==u?void 0:u.variant)||"b"===(null==u?void 0:u.variant);return(0,z.jsxs)(z.Fragment,{children:[_&&(0,z.jsx)(Qee,{}),(0,z.jsx)(jee,{banners:l,afterBanners:(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large})}),(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),children:[(0,z.jsx)(Kp,{screen:$t.NewsFeed}),d&&(0,z.jsx)(c3,{})]}),d&&(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),s&&(()=>{if(null==s||!s.blocks.length)return null;const e=(e=>(0,v.compact)(e.map(w6)))(s.blocks),t=[];let i=!1;return e.reduce(((e,n)=>{const s=n.type===h6.ExposureBlock,r=!i&&n.type===h6.ItemBoxBlock,a=s?n.entity.test_id:e;return t.push((0,z.jsx)("div",{children:f(n,e,r)},"dynamic-block-".concat(a))),r&&(i=!0),s?e:e+1}),0),t})(),!r&&(0,z.jsx)(Jp.h,{onEnter:()=>{c&&t(bn({...h,...c}))},children:(0,z.jsx)("div",{children:y&&a&&(a?(0,z.jsx)(Jee,{title:e("homepage.feed.title"),afterBlockSpacer:!1,children:(0,z.jsx)(H6,{events:a.events,initialMaxScore:a.initialMaxScore,banners:l,homepageSessionId:null==s?void 0:s.homepageSessionId})}):null)})}),(r||o)&&(0,z.jsx)(Mp,{size:Mp.Size.Large,styling:Mp.Styling.Tight,testId:"homepage-loader"})]})};function ete(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class tte extends m.Component{constructor(){super(...arguments),ete(this,"node",(0,m.createRef)()),ete(this,"state",{isDragging:!1}),ete(this,"throttledMouseOut",(0,v.throttle)((e=>{this.onMouseOut(e)}),100)),ete(this,"validateDraggedItem",(e=>{var t;return(null===(t=e.dataTransfer)||void 0===t?void 0:t.types)&&e.dataTransfer.types.length>0&&(0,v.includes)(e.dataTransfer.types,"Files")})),ete(this,"onDrop",(e=>{e.preventDefault(),e.stopPropagation();const t=e.currentTarget,i=this.node.current;if(!i||t&&!i.contains(t)||!this.validateDraggedItem(e))return;if(!e.dataTransfer)return;const{onDrop:n}=this.props;this.setState({isDragging:!1}),n&&n(Array.from(e.dataTransfer.files)),e.dataTransfer.clearData()})),ete(this,"onDragStart",(e=>{this.state.isDragging||this.validateDraggedItem(e)&&this.setState({isDragging:!0})})),ete(this,"onMouseOut",(e=>{this.state.isDragging&&!e.relatedTarget&&this.setState({isDragging:!1})})),ete(this,"onDragOver",(e=>{e.preventDefault()}))}componentDidMount(){window.document.addEventListener("dragenter",this.onDragStart),window.document.addEventListener("mouseout",this.throttledMouseOut)}componentWillUnmount(){window.document.removeEventListener("dragenter",this.onDragStart),window.document.removeEventListener("mouseout",this.throttledMouseOut)}render(){return(0,z.jsxs)("div",{className:"dropzone","data-testid":"dropzone",children:[(0,z.jsx)("div",{"data-testid":"dropzone-overlay",className:"dropzone__overlay",style:{display:this.state.isDragging?"flex":"none"},onDragOver:this.onDragOver,onDrop:this.onDrop,ref:this.node,children:(0,z.jsx)("div",{className:"dropzone__overlay-description",children:(0,z.jsx)(xt.Z,{text:(0,z.jsx)(vt.Z,{id:"dropzone.description"}),type:xt.Z.Type.Heading,theme:"muted"})})}),this.props.children]})}}const ite=tte;function nte(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const ste={setPhotoOrientation:tN.setPhotoOrientation,setCurrentImageId:tN.setCurrentImageId},rte=(0,p.$j)(((e,t)=>({photo:mA(e,t.photoId),photoEditorAbTest:Vn("photo_editing_tool")(e),exposee:we(e),itemScreen:VB(e)})),ste);class ate extends m.Component{constructor(){super(...arguments),nte(this,"state",{rotation:0,isLoading:!0}),nte(this,"translate",((e,t)=>this.props.intl.formatMessage({id:"item_upload.media_select.".concat(e)},t))),nte(this,"openEditor",(()=>{const{itemScreen:e,track:t}=this.props;t(Ri(e?{target:qm.EditPhoto,screen:e}:{target:qm.EditPhoto})),this.props.setCurrentImageId(this.props.photoId)})),nte(this,"rotateCallback",((e,t)=>()=>this.props.setPhotoOrientation({id:e,orientation:t}))),nte(this,"rotateClockwise",(e=>()=>{let t,{orientation:i}=this.props.photo;(0,v.isNumber)(i)&&(t=270===this.state.rotation?0:this.state.rotation+90,i===Ge.Degree270?i=Ge.Degree0:i+=Ge.Degree90,this.setState({rotation:t},this.rotateCallback(e,i)))})),nte(this,"delete",(e=>()=>{this.props.onDelete(e)})),nte(this,"onImageLoad",(()=>{this.setState({isLoading:!1})})),nte(this,"renderPhoto",((e,t)=>{const{index:i,imageAlt:n}=this.props;return(0,z.jsx)("div",{className:"photo-box__image-container",role:"button",tabIndex:0,children:(0,z.jsx)("div",{"data-testid":"image-wrapper-".concat(i),style:{transform:"rotate(".concat(e,"deg)")},children:(0,z.jsx)(Kl.U,{src:t,scaling:Kl.U.Scaling.Cover,ratio:Kl.U.Ratio.Square,styling:Kl.U.Styling.Rounded,onLoad:this.onImageLoad,alt:n})})})})),nte(this,"renderControls",(()=>{const{photo:e,isControlsHidden:t,enableRotation:i,enableEditor:n,index:s}=this.props;return t?null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"photo-box__delete-button",children:(0,z.jsx)(ic.I,{testId:"media-select-grid-delete-button-".concat(s),deprecatedIcon:(0,z.jsx)(ht.Z,{name:"x",color:ht.Z.Color.GreyscaleLevel1,size:ht.Z.Size.Small}),size:ic.I.Size.Small,inverse:!0,styling:ic.I.Styling.Filled,inline:!0,onClick:this.delete(e.id),aria:{"aria-label":this.translate("a11y.delete_photo")}})}),i&&!n&&(0,z.jsx)("div",{className:"photo-box__action-button",children:(0,z.jsx)(ic.I,{testId:"media-select-grid-rotate-button-".concat(s),deprecatedIcon:(0,z.jsx)(ht.Z,{name:"rotate-right",color:ht.Z.Color.GreyscaleLevel1,size:ht.Z.Size.Small}),size:ic.I.Size.Small,inverse:!0,styling:ic.I.Styling.Filled,inline:!0,onClick:this.rotateClockwise(e.id),aria:{"aria-label":this.translate("a11y.rotate_photo")}})}),n&&(0,z.jsx)("div",{className:"photo-box__action-button",children:(0,z.jsx)(ic.I,{testId:"media-select-grid-edit-button-".concat(s),deprecatedIcon:(0,z.jsx)(ht.Z,{name:"pencil",color:ht.Z.Color.GreyscaleLevel1,size:ht.Z.Size.Small}),size:ic.I.Size.Small,inverse:!0,styling:ic.I.Styling.Filled,inline:!0,onClick:this.openEditor,aria:{"aria-label":this.translate("a11y.edit_photo")}})})]})}))}componentDidMount(){const{track:e,exposee:t,enableRotation:i,enableEditor:n,photoEditorAbTest:s}=this.props;s&&(n||i)&&e(bn({...t,...s}))}render(){const{index:e,photo:t}=this.props;return(0,z.jsxs)("div",{className:"photo-box",children:[(0,z.jsx)(a6.Item,{id:t.id,index:e,children:this.renderPhoto(this.state.rotation,Pa(t,Xe.XLarge)||t.fullSizeUrl)}),!this.state.isLoading&&this.renderControls(),this.state.isLoading&&(0,z.jsx)("div",{"data-testid":"media-select-grid-item-".concat(e,"-loader"),className:"photo-box__loader",children:(0,z.jsx)(Dp.Z,{size:Dp.Z.Size.XLarge})})]})}}const ote=rte(zx((0,iw.ZP)(ate))),lte=e=>{let{isOpen:t,onClose:i,onOkClick:n}=e;const s=U("item_upload.photo_ownership.modal"),r=e=>s("".concat(e,"_strict"));return(0,z.jsx)(cp.Z,{show:t,testId:"photo-ownership-modal",children:(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(Pm.Z,{right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,onClick:i,deprecatedIconName:"x",inline:!0,testId:"photo-ownership-modal-close"})}),(0,z.jsx)(xt.Z,{text:r("title"),type:xt.Z.Type.Heading,testId:"photo-ownership-modal-title"}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{html:!0,text:r("text"),testId:"photo-ownership-modal-body"}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsxs)("div",{className:"u-line-height-default",children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:"".concat(r("note")," "),inline:!0}),(0,z.jsx)(_p,{type:bp.MakingGoodPhoto,render:e=>(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,children:(0,z.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",children:s("more_link")})})})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(ic.I,{text:s("actions.close"),onClick:n,styling:ic.I.Styling.Filled,testId:"photo-ownership-modal-action-close"})]})})},cte=e=>{let{onModalClose:t}=e;const i=(0,p.v9)(VB),n=U("item_upload.photo_ownership"),[s,r]=(0,m.useState)(!1),{track:a}=vi(),o=()=>{r(!0),a(Ri({target:qm.WebPhotosLearnMore,screen:i}))};return(0,z.jsxs)(g.Z,{children:[(0,z.jsx)(gt.Z,{prefix:(0,z.jsx)(ht.Z,{name:"info-circle-filled",color:ht.Z.Color.Primary}),title:n("warning.title_strict"),body:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:n("warning.text_strict"),width:xt.Z.Width.Parent}),(0,z.jsx)("span",{onClick:o,onKeyDown:e=>{Vg(e,o)},children:(0,z.jsx)(xt.Z,{text:n("warning.more_link"),clickable:!0})})]}),testId:"photo-ownership-notification"}),(0,z.jsx)(lte,{isOpen:s,onClose:()=>{r(!1)},onOkClick:()=>{a(Ri({target:qm.WebPhotosCloseModal,screen:i})),t(),r(!1)}})]})};var dte=i(82885);const ute=e=>{let{image:t,theme:i,layout:n,onClose:s,onExport:r}=e;const a=(0,m.useRef)(null),o=U("item_upload.media_select.photo_editor");return(0,m.useEffect)((()=>{(async()=>{if(!a.current)return;const e=await dte.M.init({container:a.current,image:t,license:'{"api_token":"IYOh-4-RGK9KEaxBOBr0mg","app_identifiers":["www.core.localhost","*.vinted.net","www.vinted.com","www.vinted.fr","www.vinted.cz","www.vinted.be","www.vinted.at","www.vinted.de","www.vinted.es","www.vinted.hu","www.vinted.lt","www.vinted.lu","www.vinted.nl","www.vinted.pl","www.vinted.se","www.vinted.sk","www.vinted.pt","www.vinted.co.uk","www.vinted.ro","www.vinted.it"],"available_actions":[],"domains":["https://api.photoeditorsdk.com"],"enterprise_license":false,"expires_at":null,"features":["camera","library","export","customassets","whitelabel","adjustment","brush","filter","focus","frame","overlay","sticker","text","textdesign","transform"],"issued_at":1684401974,"minimum_sdk_version":"1.0","owner":"Vinted","platform":"HTML5","products":["pesdk"],"version":"2.4","signature":"nJQCVqQD5J95XiYw1BSBmUshRgoe9INeyegnXPT9tKS+StANviwQkkOhRlZPpOicQNoMLYZFBolWShBN3EEotdZuLK6Qw55BgnfuxjUkYsNAR6Nqg4gZqXCuPWzA3REW9JJOdQIzyfHtfG4Qtef89P0HIs3BbHuoF19lsGviFUdFmM/hrNrD+YiMxpAb64Rjf8Da+58cKgLCLdWB+6k6QvIZkuInYrh2DrqpSxLxrBwuFW4Ax3Ey0z+Axh0818mVYDtSinDvJx9Nu07e9nQE6dmf8YrbzcUl6NbEssb5OUQGseWKbM7/dD50QUzWylkPZCeDPEejNfMYbb+I9j/PZSq+F+/v90aUTWrqHY/mEBhsdy4fFS2XQaU47kSRrv8JivftEA2BK0iUIoSWX8xCZfcCxxadnPIUsy/RIWOEolH/BMR78PN9M3HPU6qHIGH4GMiRaFifF+SZt1egd63Di2Fj6llR2FoflYwg74r8JJJkaHrcmGziiaeJ3HxAl9sup0F6Ivm+OlraSJjWAJbu/MPNeDq3zIc1Y96qA2j4xFcsvC7jkjf6wBcnPO6KBnyBZe2fhP8tynp5HJkQmqzRhJqAZ2S7EEf7El/nQAO90BG4UCklhXT1n2esWuupSrsv3BFONOhbaQLCSYYQdFUZHxbzlRhMjgZY/i89X5erVfg="}',assetBaseUrl:"".concat(Be.Fv,"/assets/imgly/"),tools:[dte.UA.TRANSFORM,dte.UA.ADJUSTMENT],defaultTool:dte.UA.TRANSFORM,adjustment:{categories:[{identifier:"basics",items:[{identifier:dte.Bn.CONTRAST},{identifier:dte.Bn.BRIGHTNESS},{identifier:dte.Bn.SATURATION},{identifier:dte.Bn.SHARPNESS}]}],flattenCategories:!0},transform:{advancedUIToolControlBarOrder:[dte.Z9.ResetTransformButton,dte.Z9.Items],basicUIToolControlBarTabsOrder:[dte.IT.FlipRotate],categories:[{identifier:"custom_transforms_vinted",items:[{identifier:"imgly_transform_common_custom",name:o("transform.items.common.custom"),thumbnailURI:"custom.svg"},{identifier:"custom_transform_one_by_one",name:o("transform.items.common.square"),thumbnailURI:"1_1.svg",ratio:1},{identifier:"custom_transform_two_by_three",name:"2:3",thumbnailURI:"2_3.svg",ratio:2/3},{identifier:"custom_transform_three_by_four",name:"3:4",thumbnailURI:"3_4.svg",ratio:3/4}]}],flattenCategories:!0},language:"custom",custom:{languages:{custom:{common:{warning:o("common.warning")},mainCanvasActions:{buttonExport:o("main_canvas_actions.export"),buttonUndo:o("main_canvas_actions.undo"),buttonRedo:o("main_canvas_actions.redo"),buttonClose:o("main_canvas_actions.close")},warningModals:{unsavedChanges:{body:o("warning_modals.unsaved_changes.body"),buttonYes:o("warning_modals.unsaved_changes.confirm"),buttonNo:o("warning_modals.unsaved_changes.cancel"),headingDelimiter:void 0}},infoModals:{loading:{heading:o("info_modals.loading.heading"),body:o("info_modals.loading.body")},exporting:{heading:o("info_modals.exporting.heading"),body:o("info_modals.exporting.body")}},adjustment:{title:o("adjustment.title"),controls:{buttonReset:o("adjustment.controls.reset")},items:{contrast:o("adjustment.items.contrast"),brightness:o("adjustment.items.brightness"),saturation:o("adjustment.items.saturation"),sharpness:o("adjustment.items.sharpness")}},transform:{title:o("transform.title"),controls:{buttonReset:o("transform.controls.reset"),checkboxKeepResolution:o("transform.controls.keep_resolution"),inputCropSize:o("transform.controls.crop_size"),inputHeight:o("transform.controls.height"),inputWidth:o("transform.controls.width"),tabFlipAndRotate:o("transform.controls.flip_and_rotate"),tabResolution:o("transform.controls.resolution"),tabCropSize:o("transform.controls.crop_size")},items:{imgly_transform_common_custom:o("transform.items.common.custom")}}}},themes:{dark:{button:{containedPrimaryBackground:"#007782"},typography:{fontURI:"",provider:"file",fontFamily:"Maison Neue",format:"woff",skipLoading:!0}},light:{button:{containedPrimaryBackground:"#007782"}}}},export:{image:{exportType:dte.T2.BLOB,format:dte.D3.PNG,quality:1,enableDownload:!1}},theme:i,layout:n});let l=!1;e.on(dte.mX.CLOSE,(()=>{s(l)})),e.on(dte.mX.EXPORT,(t=>{l=!0,r(t),e.close()}))})()}),[t,n,s,r,i,o]),(0,z.jsx)("div",{className:"imgly-editor-container",ref:a})},mte={width:"100vw",height:"100vh"},pte={width:"95vw",height:"95vh"},gte=e=>{let{tempUuid:t}=e;const{track:i}=vi(),n=(0,p.v9)(xA),s=(0,p.I0)(),r=E(),a=Ql();return(0,z.jsx)(cp.Z,{show:!(null==n||!n.fullSizeUrl),className:"u-background-cg1_v2 u-overflow-visible u-position-relative",contentDimensions:r.phones?mte:pte,isFramed:!r.phones,children:n&&(0,z.jsx)(ute,{image:n.fullSizeUrl,onClose:e=>{e||i(Ri({target:qm.DiscardChanges,screen:$t.PhotoEditing})),s(tN.setCurrentImageId(null))},onExport:e=>n&&s(tN.submitEditedPhoto({image:e,tempUuid:t,id:n.id,type:YF.Item})),layout:r.phones?"basic":"advanced",theme:a?"dark":"light"})})};function hte(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let xte;!function(e){e[e.Full=0]="Full",e[e.Minimal=1]="Minimal"}(xte||(xte={}));const fte={mediaUploadFiles:tN.uploadPhotoFiles,fetchPhotosRequest:tN.fetchPhotosRequest,removeAssignedPhoto:tN.removePhoto,changeAssignedPhotoOrder:tN.changePhotoOrder,fetchPhotoTips:EU},yte=(0,p.$j)((e=>({photosCount:hA(e),assignedPhotos:pA(e),isUploading:gA(e)===Ne.Pending,errorMessage:RB(e,KL.Photos),alertStatus:Cq(e),containsWebPhoto:hB(e),photoTips:HB(e)})),fte);class vte extends m.Component{constructor(){var e;super(...arguments),e=this,hte(this,"fileInput",this.props.inputRef&&"current"in this.props.inputRef?this.props.inputRef:(0,m.createRef)()),hte(this,"state",{isControlsHidden:!1,isFileSizeExceeded:!1,isPhotoTipsOpen:!1,isNativeUploadOpen:!1,wasPhotoOwnershipModalClosed:!1,activeImageRef:null,ariaText:null}),hte(this,"translate",((e,t)=>this.props.intl.formatMessage({id:"item_upload.media_select.".concat(e)},t))),hte(this,"showFileSelectionPrompt",(()=>{const{onFocus:e}=this.props,{current:t}=this.fileInput;t&&(this.setState({isNativeUploadOpen:!0},(()=>e())),t.click())})),hte(this,"onFileInputChange",(e=>{if(!e.target.files)return;const t=Array.from(e.target.files);this.uploadFiles(t)})),hte(this,"uploadFiles",(e=>{const{numberOfImagesPerItem:t,tempUuid:i,photosCount:n,isUploading:s,type:r}=this.props;if(s||(0,v.isEmpty)(e))return;if(t<=n)return;if(e.some((e=>e.size>sp)))return void this.setState({isFileSizeExceeded:!0});this.state.isFileSizeExceeded&&this.setState({isFileSizeExceeded:!1});const a=(0,v.take)(e,t-n);this.props.mediaUploadFiles({files:a,type:r,tempUuid:i}),this.fileInput.current&&(this.fileInput.current.value="")})),hte(this,"renderFileSizeError",(()=>this.state.isFileSizeExceeded?(0,z.jsx)(zm.Z,{text:(0,z.jsx)(wx,{id:"item_upload.media_select.size_limit"}),theme:"warning"}):null)),hte(this,"renderCustomError",(()=>{const{customValidationMessage:e}=this.props;return e?(0,z.jsx)(zm.Z,{text:e,theme:"warning"}):null})),hte(this,"renderItemError",(()=>{const{errorMessage:e,type:t}=this.props;return e&&t===YF.Item?(0,z.jsx)(zm.Z,{text:e,theme:"warning"}):null})),hte(this,"renderWithSpacer",(e=>e?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),e]}):null)),hte(this,"renderNote",(()=>{const{alertStatus:e,photosCount:t}=this.props;return e===Fa.ReplicaProof?(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:(0,z.jsx)(wx,{id:"item_upload.media_select.replica_proof_label"})}):t<2?null:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:(0,z.jsx)(wx,{id:"item_upload.media_select.reordering_label"})})})),hte(this,"renderPhotoTips",(()=>this.props.submitPhotoTips?(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:this.props.submitPhotoTips}):null)),hte(this,"renderUploadButtonBox",(()=>{const{numberOfImagesPerItem:e,photosCount:t,isUploading:i}=this.props;return t===e?null:i?(0,z.jsx)("div",{"data-testid":"upload-button-loader",className:"media-select__input-box",children:(0,z.jsx)("div",{className:"media-select__input-box-content",children:(0,z.jsx)(Dp.Z,{size:Dp.Z.Size.XLarge})})}):t<1?null:(0,z.jsx)("div",{"data-testid":"add-photos-icon-button",className:"media-select__input-box",children:(0,z.jsx)("div",{className:"media-select__input-box-content",children:(0,z.jsx)(ic.I,{onClick:this.showFileSelectionPrompt,deprecatedIcon:(0,z.jsx)(ht.Z,{name:"plus",color:ht.Z.Color.Primary}),inline:!0,aria:{"aria-label":this.translate("a11y.add_photo")}})})})})),hte(this,"onPhotoDelete",(e=>{this.fileInput.current&&(this.props.removeAssignedPhoto({id:e}),this.fileInput.current.value="")})),hte(this,"renderUploadButtonArea",(()=>{const{photosCount:e,isUploading:t}=this.props;return e>0||t?null:(0,z.jsx)("div",{className:"media-select__input",children:(0,z.jsx)("div",{className:"media-select__input-content",children:(0,z.jsx)(ic.I,{text:(0,z.jsx)(wx,{id:"item_upload.media_select.upload_button"}),onClick:this.showFileSelectionPrompt,deprecatedIcon:(0,z.jsx)(ht.Z,{name:"plus",color:ht.Z.Color.Primary}),inline:!0})})})})),hte(this,"getUploadedImageText",((e,t)=>this.translate("a11y.uploaded_image",{count:e+1,total:t}))),hte(this,"getGrabbedImageText",(e=>this.translate("a11y.uploaded_image_grabbed",{count:e+1}))),hte(this,"getMovedImageText",(e=>this.translate("a11y.uploaded_image_moved",{count:e+1}))),hte(this,"getSavedImageText",(e=>this.translate("a11y.uploaded_image_saved",{count:e+1}))),hte(this,"getCancelledImageText",(e=>this.translate("a11y.uploaded_image_cancelled",{count:e+1}))),hte(this,"getCurrentImagePositionText",((e,t)=>this.translate("a11y.current_order_position",{position:e+1,total:t}))),hte(this,"getInactiveReorderText",(()=>this.translate("a11y.inactive_reorder"))),hte(this,"getActiveReorderText",(()=>this.translate("a11y.active_reorder"))),hte(this,"handleSortStart",(e=>{const{photosCount:t}=this.props;this.updateAriaText(this.getGrabbedImageText(e),this.getCurrentImagePositionText(e,t),this.getActiveReorderText()),this.setState({isControlsHidden:!0,activeImageRef:document.activeElement})})),hte(this,"handleSortEnd",((e,t)=>{var i;const{photosCount:n}=this.props;e===t?this.updateAriaText(this.getCancelledImageText(e),this.getCurrentImagePositionText(t,n),this.getInactiveReorderText()):this.updateAriaText(this.getSavedImageText(e),this.getCurrentImagePositionText(t,n),this.getInactiveReorderText()),null===(i=this.state.activeImageRef)||void 0===i||i.focus(),this.setState({isControlsHidden:!1,activeImageRef:null}),e!==t&&this.props.changeAssignedPhotoOrder({oldIndex:e,newIndex:t})})),hte(this,"handleSortOver",((e,t)=>{const{photosCount:i}=this.props;this.updateAriaText(this.getMovedImageText(e),this.getCurrentImagePositionText(t,i),this.getActiveReorderText())})),hte(this,"updateAriaText",(function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return e.setState({ariaText:i.join(" ")})})),hte(this,"renderPhotoBox",((e,t)=>{const{photosCount:i,enableRotation:n,isPhotoEditorEnabled:s,isUploading:r}=this.props,{ariaText:a}=this.state;return(0,z.jsxs)(m.Fragment,{children:[(0,z.jsx)(ote,{index:t,photoId:e,onDelete:this.onPhotoDelete,isControlsHidden:this.state.isControlsHidden||r,enableRotation:n,enableEditor:s,imageAlt:"".concat(this.getUploadedImageText(t,i)," ").concat(this.getInactiveReorderText())}),(0,z.jsx)("span",{"aria-live":"assertive",className:"u-visually-hidden",children:a})]},e)})),hte(this,"handleTipsOpen",(()=>{this.setState({isPhotoTipsOpen:!0})})),hte(this,"handleTipsClose",(()=>{this.setState({isPhotoTipsOpen:!1})})),hte(this,"handleKeyDown",(e=>{Vg(e,this.handleTipsOpen)})),hte(this,"handleNotificationModalClose",(()=>{this.setState({wasPhotoOwnershipModalClosed:!0})})),hte(this,"renderPhotoTipsAction",(()=>(0,z.jsxs)(z.Fragment,{children:["",(0,z.jsx)("span",{onClick:this.handleTipsOpen,onKeyDown:this.handleKeyDown,children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:(0,z.jsx)(wx,{id:"item_upload.photo_tips.see_tips"}),clickable:!0})})]}))),hte(this,"renderDescription",(()=>{const{numberOfImagesPerItem:e,enablePhotoTips:t,enableDescription:i}=this.props;return t||i?(0,z.jsxs)("span",{children:[i&&(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:(0,z.jsx)(wx,{id:"item_upload.media_select.description",values:{max_number_of_files:e}})}),t&&this.renderPhotoTipsAction()]}):null})),hte(this,"renderImageGrid",(()=>{const{assignedPhotos:e}=this.props;return(0,z.jsxs)(ite,{onDrop:this.uploadFiles,children:[(0,z.jsxs)(a6,{testId:"media-select-grid",className:y()("media-select__grid"),onDragStart:this.handleSortStart,onDragOver:this.handleSortOver,onSortUpdate:this.handleSortEnd,children:[e.map(this.renderPhotoBox),this.renderUploadButtonBox()]}),this.renderUploadButtonArea()]})})),hte(this,"handleWindowFocus",(()=>{const{onBlur:e}=this.props;this.state.isNativeUploadOpen&&this.setState({isNativeUploadOpen:!1},(()=>e()))})),hte(this,"renderImageInput",(()=>(0,z.jsx)("input",{"data-testid":"add-photos-input",name:KL.Photos,ref:this.fileInput,onChange:this.onFileInputChange,className:"u-hidden",type:"file",accept:np.Images,multiple:!0})))}componentDidUpdate(e){const{photosCount:t}=this.props;t!==e.photosCount&&this.setState({isFileSizeExceeded:!1})}componentDidMount(){window.addEventListener("focus",this.handleWindowFocus);const{photoEntryId:e,tempUuid:t,type:i}=this.props;e&&t&&this.props.fetchPhotosRequest({type:i,photoEntryId:e,tempUuid:null}),this.props.enablePhotoTips&&this.props.fetchPhotoTips()}componentWillUnmount(){window.removeEventListener("focus",this.handleWindowFocus)}render(){const{wasPhotoOwnershipModalClosed:e}=this.state,{containsWebPhoto:t,displayType:i,hideWhenEmpty:n,assignedPhotos:s,type:r,isPhotoEditorEnabled:a,tempUuid:o,title:l}=this.props;return n&&(0,v.isEmpty)(s)?this.renderImageInput():i===xte.Minimal?(0,z.jsxs)(z.Fragment,{children:[this.renderDescription(),(0,z.jsx)(x.Z,{}),this.renderImageInput(),this.renderImageGrid(),(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),this.renderCustomError()]}):(0,z.jsxs)("div",{"data-testid":"media-select",id:KL.Photos,children:[this.renderImageInput(),(0,z.jsx)(yt.Z,{type:yt.Z.Type.Leading,styling:yt.Z.Styling.Wide,text:this.renderDescription()}),(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Wide,children:[l||null,this.renderImageGrid(),this.renderWithSpacer(this.renderFileSizeError()||this.renderCustomError()||this.renderItemError()||this.renderNote()||this.renderPhotoTips()||null),(0,z.jsx)(dQ,{isOpen:this.state.isPhotoTipsOpen,photoTips:this.props.photoTips,handleClose:this.handleTipsClose}),t&&r===YF.Item&&!e&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(cte,{onModalClose:this.handleNotificationModalClose})]})]}),a&&(0,z.jsx)(gte,{tempUuid:o})]})}}hte(vte,"defaultProps",{enableRotation:!0,enablePhotoTips:!0,enableDescription:!0,hideWhenEmpty:!1,isPhotoEditorEnabled:!1,displayType:xte.Full,onBlur:v.noop,onFocus:v.noop});const _te=F(vte),bte=yte((0,iw.ZP)(_te)),jte=()=>{const{title:e}=(0,p.v9)(oB),t=(0,p.v9)(DB(KL.Title)),i=(0,p.v9)(VB),n=(0,p.v9)(fB),s=(0,p.I0)(),{track:r}=vi(),a=U("item_upload.title_field"),o=(e,t)=>{r(en({screen:i,value:e,state:t,tempUuid:n,target:JL.Title}))};return(0,z.jsx)(fb.M,{testId:"title",styling:fb.M.Styling.Wide,name:KL.Title,title:a("title"),placeholder:a("placeholder"),value:e,onChange:e=>s(mE.setTitle({title:e.target.value})),onFocus:e=>o(e.target.value,"focus"),onBlur:e=>o(e.target.value,"unfocus"),validation:t&&(0,z.jsx)(zm.Z,{text:t,theme:"warning"})})},Ste=()=>{const{description:e}=(0,p.v9)(oB),t=(0,p.v9)(DB(KL.Description)),i=(0,p.v9)(VB),n=(0,p.v9)(fB),s=(0,p.I0)(),{track:r}=vi(),a=U("item_upload.description_field"),o=(e,t)=>{r(en({screen:i,value:e,state:t,tempUuid:n,target:JL.Description}))};return(0,z.jsx)(PQ.R,{testId:"description",name:KL.Description,title:a("title"),styling:PQ.R.Styling.Wide,rows:5,placeholder:a("placeholder"),value:e,onChange:e=>s(mE.setDescription({description:e.target.value})),onFocus:e=>o(e.target.value,"focus"),onBlur:e=>o(e.target.value,"unfocus"),validation:t&&(0,z.jsx)(zm.Z,{text:t,theme:"warning"})})},Zte=()=>{const e=U("item_upload.fundraiser"),t=E(),i=(0,p.v9)(dB),n=(0,p.v9)(Nc),{price:s}=(0,p.v9)(oB),r=(0,p.v9)(xe),a=(0,p.v9)(fe),o=()=>{const{donatableAmount:t,receivableAmount:r}=(()=>{const e=s||0;if(!a)return{donatableAmount:0,receivableAmount:e};const t=(0,v.round)(a*e/100,2);return{donatableAmount:t,receivableAmount:e-t}})();return e("amount",{donatable:Ma(t,{locale:n,currency:i}),receivable:Ma(r,{locale:n,currency:i})})},l=()=>(0,z.jsx)(ht.Z,{name:"info-circle-filled",color:ht.Z.Color.Primary,aria:{"aria-hidden":"true"}}),c=()=>(0,z.jsx)(xt.Z,{text:o(),theme:"amplified",inline:!0});return r?t.phones?(0,z.jsx)("div",{"data-testid":"fundraiser-information",children:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,prefix:l(),body:c()})}):(0,z.jsxs)("div",{className:"item-upload__field u-ui-margin-right-large","data-testid":"fundraiser-information",children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,prefix:l(),body:c()}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]}):null};var Ite=i(43287);const Cte={toggleIsSimilarItemsModalOpen:mE.toggleIsSimilarItemsModalOpen},kte=(0,p.$j)((e=>({open:sq(e),uiState:tl(e),items:vl(e)})),Cte);class wte extends m.Component{renderNavigation(){const{toggleIsSimilarItemsModalOpen:e}=this.props;return(0,z.jsx)(Pm.Z,{theme:"transparent",body:(0,z.jsx)(xt.Z,{text:(0,z.jsx)(wx,{id:"item_upload.price.similar_items_title"}),type:xt.Z.Type.Title}),right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,deprecatedIconName:"x",onClick:e})})}renderContent(){const{uiState:e,items:t}=this.props;return e===Ne.Pending?(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center",children:(0,z.jsx)(Dp.Z,{size:Dp.Z.Size.Large})}):(0,z.jsx)("div",{className:"item-upload__similar-items-grid",children:t.map((e=>(0,z.jsx)("div",{className:"item-upload__similar-items-grid-item",children:(0,z.jsx)(k0,{item:co(e),showOwner:!1,showFavourite:!1,isUrlDisabled:!0,hideBusinessBadge:!0},e.id)})))})}render(){const{open:e,toggleIsSimilarItemsModalOpen:t}=this.props;return(0,z.jsx)(cp.Z,{show:e,defaultCallback:t,closeOnOverlay:!0,testId:"similar-items-modal",children:(0,z.jsxs)("div",{className:"u-position-relative",children:[(0,z.jsx)("div",{className:"u-fill-width",children:this.renderNavigation()}),(0,z.jsx)("div",{className:"u-ui-padding-top-regular c-modal__inline-content",children:(0,z.jsx)("div",{className:"c-modal__body",children:(0,z.jsx)("div",{className:"modal-contained-content",children:this.renderContent()})})})]})})}}const Pte=kte(wte);function zte(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Tte={toggleIsSimilarItemsModalOpen:mE.toggleIsSimilarItemsModalOpen},Fte=(0,p.$j)((e=>({locale:Nc(e),abTest:$B(e),currency:iq(e),min:eq(e),max:tq(e),showSimilarItems:nq(e),displayType:rq(e),showPriceSuggestions:aq(e),price:oB(e).price,exposee:we(e)})),Tte);class Nte extends m.Component{constructor(){var e;super(...arguments),e=this,zte(this,"wasExposed",!1),zte(this,"trackExposeEvent",(()=>{const{abTest:e,track:t}=this.props;!this.wasExposed&&e&&e.variant&&(t(bn({id:e.testId,name:e.testName,variant:e.variant,anonId:e.testAnonId,userId:e.testUserId&&Number(e.testUserId)||null,countryCode:e.countryCode})),this.wasExposed=!0)})),zte(this,"handleKeyDown",(e=>{const{toggleIsSimilarItemsModalOpen:t}=this.props;Vg(e,t)})),zte(this,"formatPrice",(function(t,i){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const{locale:s}=e.props;return Ma(t,{locale:s,currency:i},{keepFractionDigits:n})})),zte(this,"getPriceRangePosition",((e,t,i)=>e>i?Ite.Z.Position.High:e<t?Ite.Z.Position.Low:Ite.Z.Position.Typical))}componentDidUpdate(e){const{showPriceSuggestions:t,onPriceSuggestionShow:i,displayType:n}=this.props,s=t!==e.showPriceSuggestions||n!==e.displayType;n!==La.Off&&(t||n)&&s&&i()}renderPriceSuggestion(){const{min:e,max:t,currency:i,showPriceSuggestions:n,displayType:s}=this.props,r=n||s===La.Always||s===La.Range;return e&&t&&r&&i?(this.trackExposeEvent(),(0,z.jsx)(wx,{id:"item_upload.price.price_suggestions",values:{min:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,bold:!0,theme:"primary",children:this.formatPrice(e,i)}),max:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,bold:!0,theme:"primary",children:this.formatPrice(t,i)})}})):null}renderPriceRangeGraph(){const{min:e,max:t,currency:i,showPriceSuggestions:n,displayType:s,price:r}=this.props,a=n||s===La.Range;if(!(e&&t&&a&&i&&s))return null;const o=r?this.getPriceRangePosition(r,e,t):Ite.Z.Position.Typical,l=!!r&&(0,z.jsx)(wx,{id:"item_upload.price_suggestion.".concat(o),values:{price:this.formatPrice(r,i)}});return this.trackExposeEvent(),(0,z.jsx)(Ite.Z,{lower:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,bold:!0,children:this.formatPrice(e,i,!1)}),upper:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,bold:!0,children:this.formatPrice(t,i,!1)}),showLabel:!!r,label:l,position:o})}renderSimilarItems(){const{showSimilarItems:e,toggleIsSimilarItemsModalOpen:t}=this.props;return e?(this.trackExposeEvent(),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("span",{onClick:t,onKeyDown:this.handleKeyDown,children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,clickable:!0,children:(0,z.jsx)(wx,{id:"item_upload.price.similar_items_cta"})})}),(0,z.jsx)(Pte,{})]})):null}renderBannerPriceSuggestion(){const{min:e,max:t,currency:i,showSimilarItems:n,toggleIsSimilarItemsModalOpen:s}=this.props,r=Boolean(e&&t&&i)&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(wx,{id:"item_upload.price.price_suggestions",values:{min:this.formatPrice(e,i),max:this.formatPrice(t,i)}}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small})]}),a=n&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("span",{onClick:s,onKeyDown:this.handleKeyDown,children:(0,z.jsx)(xt.Z,{theme:"inherit",clickable:!0,testId:"price-suggestions--similar-items-link",children:(0,z.jsx)("span",{className:"u-underlined",children:(0,z.jsx)(wx,{id:"item_upload.price.similar_items_cta"})})})}),(0,z.jsx)(Pte,{})]});return(0,z.jsx)(Yp,{theme:"calypsoLightExperimental",banner:{level:Vp.Info,body:(0,z.jsxs)(xt.Z,{theme:"amplified",children:[r,a]}),screenName:$t.ItemUpload,extraNotice:!1}})}render(){return this.props.displayType===La.Off?null:this.props.displayType===La.Banner?this.renderBannerPriceSuggestion():(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(xt.Z,{type:xt.Z.Type.Caption,testId:"price-suggestion",children:[this.renderPriceSuggestion()," ",this.renderSimilarItems()]}),this.renderPriceRangeGraph()]})}}const Lte=Fte(zx(Nte));function Ete(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Ote={setPrice:mE.setPrice,fetchPackageSizesRequest:VU},Rte=(0,p.$j)((e=>({locale:Nc(e),currency:dB(e),brandId:oB(e).brandId,catalogId:oB(e).catalogId,price:oB(e).price,errorMessage:RB(e,KL.Price),min:eq(e),max:tq(e),screen:VB(e),isPromoted:Iq(e),tempUuid:fB(e)})),Ote);class Dte extends m.Component{constructor(){super(...arguments),Ete(this,"state",{isSuggestedPriceShown:!1}),Ete(this,"translate",(e=>this.props.intl.formatMessage({id:e}))),Ete(this,"fetchUpdatedPackageSizes",(()=>{const{brandId:e,catalogId:t}=this.props;e&&t&&this.handleDelayedPackageSizesUpdate()})),Ete(this,"handleDelayedPackageSizesUpdate",(0,v.debounce)((()=>{this.props.fetchPackageSizesRequest()}),GL)),Ete(this,"handlePriceSuggestionShown",(()=>{const{isSuggestedPriceShown:e}=this.state;e||this.setState({isSuggestedPriceShown:!0})})),Ete(this,"trackInput",((e,t)=>{const{screen:i,tempUuid:n}=this.props;this.props.track(en({state:t,screen:i,tempUuid:n,target:JL.Price,value:(null==e?void 0:e.toString())||null}))})),Ete(this,"handleBlur",(e=>()=>{e();const{tempUuid:t,min:i,max:n,track:s,price:r}=this.props,{isSuggestedPriceShown:a}=this.state,o=[],l=[];i&&o.push(i.toString()),n&&o.push(n.toString()),r&&l.push(r.toString()),s(fn({tempUuid:t,fieldName:JL.Price,suggestionSeen:a,suggestions:o,userSelection:l})),this.trackInput(r,"unfocus")})),Ete(this,"handleFocus",(e=>()=>{e(),this.trackInput(this.props.price,"focus")})),Ete(this,"handlePriceChange",(e=>{this.props.setPrice({price:Number(e)})})),Ete(this,"formatPlaceholder",(()=>{const{locale:e,currency:t}=this.props;return Ma(0,{locale:e,currency:t})}))}componentDidUpdate(e){const{price:t}=this.props;e.price!==t&&this.fetchUpdatedPackageSizes()}renderValidation(){const{errorMessage:e}=this.props;if(!e)return null;const t=e.split(/,\s|,/);return(0,z.jsx)(z.Fragment,{children:t.map((e=>(0,z.jsxs)(m.Fragment,{children:[(0,z.jsx)(zm.Z,{testId:"price-validation-error",text:e,theme:"warning"}),(0,z.jsx)(x.Z,{})]},e)))})}renderBumpedItemHint(){const{isPromoted:e}=this.props;return e?(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,testId:"bumped-item-hint",children:this.translate("item_upload.price.bump_price_policy")}):null}renderFooter(){return(0,z.jsxs)(z.Fragment,{children:[this.renderValidation(),(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column u-gap-medium",children:[this.renderBumpedItemHint(),(0,z.jsx)(Lte,{onPriceSuggestionShow:this.handlePriceSuggestionShown})]})]})}render(){const{price:e,currency:t,locale:i}=this.props;return(0,z.jsx)(X3,{onChange:this.handlePriceChange,value:null==e?void 0:e.toString(),locale:i,currency:t,maxLength:7,children:e=>{let{handleValue:t,value:i,handleFocus:n,handleBlur:s}=e;return(0,z.jsx)(fb.M,{styling:fb.M.Styling.Wide,name:KL.Price,title:(0,z.jsx)(wx,{id:"item_upload.price.title"}),placeholder:this.formatPlaceholder(),value:i,onChange:t,onFocus:this.handleFocus(n),onBlur:this.handleBlur(s),validation:this.renderFooter()})}})}}const Ate=Rte(zx((0,iw.ZP)(Dte))),Mte=()=>(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Tight,children:[(0,z.jsx)(Ate,{}),(0,z.jsx)(Zte,{})]});function Ute(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Bte={deleteDraft:RU,submitItem:OU},qte=(0,p.$j)((e=>({isFormDisabled:JB(e),isUiButtonLoading:sf(e).uiState===Ne.Pending,isPushUpChecked:Tq(e),tempUuid:fB(e),screenName:VB(e)})),Bte);class Vte extends m.Component{constructor(){var e;super(...arguments),e=this,Ute(this,"handleFormSubmit",(e=>()=>{const{submitItem:t,isPushUpChecked:i}=this.props;t(e,i)})),Ute(this,"renderSaveDraftButton",(function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const{isFormDisabled:i,isUiButtonLoading:n,screenName:s}=e.props;return s===$t.ItemEdit?null:(0,z.jsxs)(z.Fragment,{children:[!t&&(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(ic.I,{disabled:i||n,text:(0,z.jsx)(wx,{id:"item_upload.form_actions.save_draft"}),inline:t,onClick:e.handleFormSubmit(!0),testId:"upload-form-save-draft-button",isLoading:n}),t&&(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Large})]})})),Ute(this,"renderSaveButton",(function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const{isFormDisabled:i,isUiButtonLoading:n,screenName:s}=e.props;return(0,z.jsx)(ic.I,{disabled:i||n,styling:ic.I.Styling.Filled,text:s===$t.ItemEdit?(0,z.jsx)(wx,{id:"item_upload.form_actions.save"}):(0,z.jsx)(wx,{id:"item_upload.form_actions.submit"}),inline:t,onClick:e.handleFormSubmit(!1),testId:"upload-form-save-button",isLoading:n})})),Ute(this,"renderDeleteButton",(function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const{deleteDraft:i,isFormDisabled:n,screenName:s}=e.props;return s!==$t.ItemDraft?null:(0,z.jsxs)(z.Fragment,{children:[!t&&(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(ic.I,{disabled:n,theme:"warning",text:(0,z.jsx)(wx,{id:"item_upload.form_actions.delete_draft"}),inline:t,onClick:i,testId:"upload-form-delete-draft-button"})]})}))}render(){const{breakpoints:e}=this.props;return e.phones?(0,z.jsxs)(z.Fragment,{children:[this.renderSaveButton(!1),this.renderSaveDraftButton(!1),this.renderDeleteButton(!1)]}):(0,z.jsxs)("div",{className:"form-actions u-clearfix u-ui-margin-bottom-x2-large",children:[this.renderDeleteButton(),(0,z.jsxs)("div",{className:"u-float-right",children:[this.renderSaveDraftButton(),this.renderSaveButton()]})]})}}const Hte=qte(F(Vte)),Gte=()=>{const e=E(),t=(0,p.I0)(),i=(0,p.v9)(JB),n=(0,p.v9)(sf),s=(0,p.v9)(Tq),r=(0,p.v9)(VB),a=n.uiState===Ne.Pending,o=(0,m.useRef)(!1),l=e=>()=>{o.current=e,t(OU(e,s))},c=()=>{t(RU())};Um((()=>{l(o.current)()}));const d=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return r===$t.ItemEdit?null:(0,z.jsxs)(z.Fragment,{children:[!e&&(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(ic.I,{disabled:i||a,text:(0,z.jsx)(wx,{id:"item_upload.form_actions.save_draft"}),inline:e,onClick:l(!0),testId:"upload-form-save-draft-button",isLoading:a}),e&&(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Large})]})},u=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return(0,z.jsx)(ic.I,{disabled:i||a,styling:ic.I.Styling.Filled,text:r===$t.ItemEdit?(0,z.jsx)(wx,{id:"item_upload.form_actions.save"}):(0,z.jsx)(wx,{id:"item_upload.form_actions.submit"}),inline:e,onClick:l(!1),testId:"upload-form-save-button",isLoading:a})},g=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return r!==$t.ItemDraft?null:(0,z.jsxs)(z.Fragment,{children:[!e&&(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(ic.I,{disabled:i,theme:"warning",text:(0,z.jsx)(wx,{id:"item_upload.form_actions.delete_draft"}),inline:e,onClick:c,testId:"upload-form-delete-draft-button"})]})};return e.phones?(0,z.jsxs)(z.Fragment,{children:[u(!1),d(!1),g(!1)]}):(0,z.jsxs)("div",{className:"form-actions u-clearfix u-ui-margin-bottom-x2-large",children:[g(),(0,z.jsxs)("div",{className:"u-float-right",children:[d(),u()]})]})},Wte=e=>{let{item:t,description:i,body:n,tempUuid:s}=e;const r=(0,p.I0)(),{track:a}=vi(),o=U("item_upload.package"),l=If(),c=Ql(),d=(0,p.v9)(oB).packageSize.id,u=(0,p.v9)(VB),g=(0,p.v9)(uf),h=(0,p.v9)(Zq),f=(0,p.v9)(df),[v,_]=(0,m.useState)(!1),b=Xn({abTestName:"parcel_size_suggestion_web",shouldTrackExpose:v}),j="on"===(null==b?void 0:b.variant);(0,m.useEffect)((()=>{j&&(h||g===t.code&&u!==$t.ItemEdit&&r(mE.setPackageSizeId({id:t.id})))}),[r,h,j,t.code,t.id,u,g]),(0,m.useEffect)((()=>{j&&h&&(f.some((e=>{let{id:t}=e;return t===d}))||r(mE.setIsPackageSizeManuallySelected({isPackageSizeManuallySelected:!1})))}),[f,r,h,j,d]);return(0,z.jsx)("div",{className:"item-upload__package-size",children:(0,z.jsx)(gt.Z,{id:"package-size-".concat(t.id),styling:gt.Z.Styling.Wide,type:t.id===d?void 0:gt.Z.Type.Navigating,title:j&&g&&t.code===g?(0,z.jsx)(Jp.h,{onEnter:()=>{_(!0)},children:(0,z.jsxs)("div",{children:[(0,z.jsx)(oC.Z,{content:o("suggestion_badge"),theme:"success"}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(xt.Z,{text:t.title,type:xt.Z.Type.Title,width:xt.Z.Width.Parent})]})},t.id):(0,z.jsx)(xt.Z,{text:t.title,type:xt.Z.Type.Title,width:xt.Z.Width.Parent}),body:(()=>{const e=y()({"u-hidden":t.id!==d});return(0,z.jsxs)(z.Fragment,{children:[i,(0,z.jsx)("div",{className:e,children:n})]})})(),suffix:(0,z.jsx)(qx.J,{name:"package_type_selector_".concat(t.id),testId:"package_type_selector_".concat(t.id),checked:t.id===d,aria:{"aria-labelledby":"package-size-".concat(t.id)}}),prefix:(()=>{if(!t.image)return null;const e=c?t.image.dark:t.image.light;return(0,z.jsx)(Kl.U,{src:e,fallbackSrc:l("items/upload/parcel-size-placeholder.svg"),size:Kl.U.Size.XLarge,testId:"package-size-".concat(t.code.toLowerCase(),"-image")})})(),onClick:()=>{const e=Ri({target:qm.UploadPackageSelect});((e,t)=>{a(en({state:"focus",screen:u,tempUuid:s,target:JL.PackageSize,value:(null==e?void 0:e.toString())||null}))})(t.id),a(e),j&&r(mE.setIsPackageSizeManuallySelected({isPackageSizeManuallySelected:!0})),r(mE.setPackageSizeId({id:t.id}))},testId:"".concat(t.code.toLowerCase(),"-package-size--cell")})})},Xte=()=>{const e=(0,p.I0)(),{track:t}=vi(),i=U("item_upload.package.package_size_education"),n=(0,p.v9)(AB),s=(0,p.v9)(qB),r=(0,p.v9)(BB);return(0,z.jsx)(cp.Z,{show:n,children:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Pm.Z,{body:i("title"),right:(0,z.jsx)(ic.I,{deprecatedIconName:"x",styling:ic.I.Styling.Flat,onClick:()=>e(mE.toggleIsShippingOptionsModalOpen()),testId:"close-button"})}),(0,z.jsxs)("div",{className:"modal-contained-content",children:[(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{text:i("options_explanation"),width:xt.Z.Width.Parent})}),r===Ne.Pending?(0,z.jsx)("div",{className:"u-flexbox u-ui-margin-bottom-large u-justify-content-center",children:(0,z.jsx)(Dp.Z,{size:Dp.Z.Size.Large})}):s.map((e=>{let{id:t,description:i,title:n,subtitle:s,carrierIconUrl:r}=e;return i?(0,z.jsxs)(m.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{prefix:r&&(0,z.jsx)(Kl.U,{src:r,size:Kl.U.Size.Medium}),title:n,body:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:s}),(0,z.jsx)(x.Z,{}),i.split("\n").map((e=>(0,z.jsx)(nc.Z,{styling:nc.Z.Styling.Tight,children:(0,z.jsx)(xt.Z,{text:e,type:xt.Z.Type.Caption})},e)))]})}),(0,z.jsx)(h.Z,{})]},t):null})),(0,z.jsx)(gt.Z,{children:(0,z.jsx)("span",{onClick:e=>{e.target instanceof HTMLAnchorElement&&t(Ri({screen:$t.PackageSizeEducation,target:qm.SeeCompensationInformation}))},children:(0,z.jsx)(xt.Z,{text:i("note"),type:xt.Z.Type.Caption,html:!0})})})]})]})})},Yte=e=>{let{item:t,tempUuid:i}=e;const n=(0,p.I0)();return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Wte,{item:t,description:(0,z.jsx)(wx,{id:"item_upload.package.size_description.".concat(t.code.toLowerCase())}),body:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{}),(0,z.jsx)("span",{onClick:e=>{e.stopPropagation(),n(mE.toggleIsShippingOptionsModalOpen())},children:(0,z.jsx)(xt.Z,{text:(0,z.jsx)(wx,{id:"item_upload.package.package_size_education.learn_more"}),theme:"primary",type:xt.Z.Type.Subtitle,clickable:!0})})]}),tempUuid:i}),(0,z.jsx)(Xte,{})]})},Kte=e=>{let{item:t,tempUuid:i}=e;return(0,z.jsx)(Wte,{item:t,description:t.weightDescription,tempUuid:i})},Jte=e=>{let{name:t,title:i,value:n,isRequired:s,onChange:r,currency:a,locale:o,maxPrice:l,errorMessage:c,note:d}=e;const u=U(),[p,g]=(0,m.useState)(null);return(0,z.jsx)(X3,{onChange:e=>{(e=>{l&&(!e&&s?g(u("item_upload.package.errors.no_price")):Number(e)>l?g(u("item_upload.package.errors.max_price",{maxPrice:Ma(l,{currency:a,locale:o})})):g(null))})(e),r(e)},value:n,locale:o,currency:a,children:e=>{let{handleValue:n,handleFocus:s,handleBlur:r,value:l}=e;return(0,z.jsx)(fb.M,{styling:fb.M.Styling.Tight,title:i,name:t,value:l,onChange:n,onFocus:s,onBlur:r,placeholder:Ma(0,{currency:a,locale:o}),validation:p||c||d?p||c?(0,z.jsx)(zm.Z,{text:p||c,theme:"warning"}):(0,z.jsx)(zm.Z,{text:d,theme:"muted"}):null})}})},Qte=e=>{let{item:t,tempUuid:i}=e;const n=(0,p.I0)(),{phones:s,tabletsUp:r}=E(),a=(0,p.v9)(oB).packageSize.custom.domestic,o=(0,p.v9)((e=>RB(e,KL.DomesticShipmentPrice))),l=(0,p.v9)(oB).packageSize.custom.international,c=(0,p.v9)((e=>RB(e,KL.InternationalShipmentPrice))),d=(0,p.v9)(cB),u=(0,p.v9)(Nc),m=(0,p.v9)(dB),g=(0,p.v9)(Wt("international_custom_shipping")),h=e=>{n(mE.setDomesticShippingPrice({price:e}))},f=e=>{n(mE.setInternationalShippingPrice({price:e}))};return(0,z.jsx)(Wte,{item:t,description:t.weightDescription,body:(()=>{const e=y()({"u-flexbox":!s}),t=y()({"u-fill-width":g||s,"u-half-width":!g&&r});return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsxs)("div",{className:e,children:[(0,z.jsx)("div",{className:t,children:(0,z.jsx)(Jte,{name:KL.DomesticShipmentPrice,title:(0,z.jsx)(wx,{id:"item_upload.package.domestic_input_title"}),value:a,isRequired:!0,onChange:h,maxPrice:d,errorMessage:o,locale:u,currency:m})}),g&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.X3Large}),(0,z.jsx)("div",{className:t,children:(0,z.jsx)(Jte,{name:KL.InternationalShipmentPrice,title:(0,z.jsx)(wx,{id:"item_upload.package.international_input_title"}),value:l,onChange:f,maxPrice:d,errorMessage:c,locale:u,currency:m})})]})]})]})})(),tempUuid:i})},$te=()=>{const{track:e}=vi(),t=U("item_upload.package.offline_authenticity_info_block"),i=Ql(),n="".concat(Be.Fv,i?"/assets/offline-authenticity/authenticity-box-48-dark.svg":"/assets/offline-authenticity/authenticity-box-48.svg");return(0,z.jsx)(gt.Z,{children:(0,z.jsx)(Lt.Z,{children:(0,z.jsx)(gt.Z,{prefix:(0,z.jsx)(Kl.U,{src:n,styling:Kl.U.Styling.Rounded,size:Kl.U.Size.Medium}),title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:t("title")}),testId:"offline-authenticity-info-block--cell",children:(0,z.jsx)("span",{onClick:()=>{const t=Ri({screen:$t.ItemUpload,target:qm.OfflineVerificationTrackedShippingLearnMoreLink});e(t)},children:(0,z.jsx)(xt.Z,{html:!0,type:xt.Z.Type.Body,text:t("body")})})})})})},eie=()=>{const e=(0,p.v9)(fB),t=(0,p.v9)(KB),i=(0,p.v9)(Ze),n=(0,p.v9)(pf),s=(0,p.v9)(mf),r=(0,p.v9)(gf),a=(0,p.v9)(hf),o=(0,p.v9)((e=>RB(e,KL.PackageSize)));return t?(0,z.jsxs)("div",{id:KL.PackageSize,children:[(0,z.jsx)(yt.Z,{styling:yt.Z.Styling.Wide,text:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:(0,z.jsx)(wx,{id:"item_upload.package.package_selector_title"})})}),o?(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,children:o&&(0,z.jsx)(zm.Z,{text:o,theme:"warning"})}):null,(0,z.jsxs)(z.Fragment,{children:[n.map((t=>(0,z.jsx)(Yte,{item:t,tempUuid:e},t.id))),(0,z.jsxs)(z.Fragment,{children:[!i&&s.map((t=>(0,z.jsx)(Qte,{item:t,tempUuid:e},t.id))),r.map((t=>(0,z.jsx)(Kte,{item:t,tempUuid:e},t.id)))]})]}),a?(0,z.jsx)($te,{}):null]}):null};function tie(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const iie={setIsAuthenticityProofModalOpen:mE.setIsAuthenticityProofModalOpen},nie=(0,p.$j)((e=>({isOpen:vB(e)})),iie);class sie extends m.Component{constructor(){super(...arguments),tie(this,"context",void 0),tie(this,"handleClose",(()=>{this.props.setIsAuthenticityProofModalOpen({isOpen:!1})}))}render(){const{isOpen:e}=this.props;return(0,z.jsx)(cp.Z,{show:e,children:(0,z.jsxs)(nc.Z,{children:[(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center",children:(0,z.jsx)(ht.Z,{name:this.context.mode===Jl.UX.Dark?"check-circle-empty-state-dark":"check-circle-empty-state",color:ht.Z.Color.SuccessLight,size:ht.Z.Size.X2Large})}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(xt.Z,{text:(0,z.jsx)(wx,{id:"item_upload.authenticity_proof.body"})}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,text:(0,z.jsx)(wx,{id:"item_upload.authenticity_proof.close_action"}),onClick:this.handleClose})]})})}}tie(sie,"contextType",Jl.ZP);const rie=nie(sie),aie=e=>{let{onAddPhotosClick:t,onDiscardClick:i}=e;const n=U("item_upload.luxury_item_photos.modal"),s=(0,p.v9)(MB),r=(0,p.v9)(VB),a=(0,p.I0)(),o=r===$t.ItemEdit,l=()=>{a(mE.setIsLuxuryItemModalOpen({isOpen:!1}))};return(0,z.jsxs)(cp.Z,{show:s,shouldReturnFocusAfterClose:!1,children:[(0,z.jsx)(Pm.Z,{right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,onClick:l,deprecatedIconName:"x",inline:!0})}),(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(xt.Z,{text:n("title"),type:xt.Z.Type.Heading}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{html:!0,text:n(r===$t.ItemUpload?"text_new_item":r===$t.ItemDraft?"text_edit_draft":"text_edit_item")}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(ic.I,{text:n("actions.add_photos"),onClick:()=>{l(),t()},styling:ic.I.Styling.Filled}),o&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(ic.I,{text:n("actions.discard"),styling:ic.I.Styling.Flat,theme:"warning",onClick:()=>{i()}})]})]})]})},oie={[XL.Found]:(0,z.jsx)(vt.Z,{id:"item_upload.isbn.book_details.found"}),[XL.NotFound]:(0,z.jsx)(vt.Z,{id:"item_upload.isbn.book_details.not_found"})},lie=()=>{const e=(0,p.v9)(_q),t=(0,p.v9)((e=>RB(e,KL.Isbn)));return!e||t?null:(0,z.jsx)(ah.Z,{styling:ah.Z.Styling.Narrow,text:oie[e]})};var cie;!function(e){e.PostalCode="postal_code"}(cie||(cie={}));const die="item_upload.missing_postal_code",uie=()=>{const{register:e,setError:t,handleSubmit:i,formState:{errors:n,isSubmitting:s}}=(0,th.cI)({mode:"onBlur"}),r=fh(n,"".concat(die,".fields")),a=U(die),{track:o}=vi(),l=(0,p.v9)(UB),c=E(),d=(0,p.I0)(),u=l&&!!Object.values(n).length;function g(e,t){o(Ri({target:e,screen:$t.FillZipCodeAfterListing,targetDetails:t}))}function h(){d(mE.hideMissingPostalCode()),g(qm.CloseScreen,"x_icon")}function f(){d(mE.hideMissingPostalCode()),g(qm.CloseScreen,"overlay")}function y(){g(qm.Submit)}async function v(e){const i=await(0,Fe.phm)(e);"errors"in i?i.errors.forEach((e=>{let{field:i,value:n}=e;(0,_i.IF)(i,cie)&&t(i,{type:"manual",message:n})})):d(mE.hideMissingPostalCode({resubmitItem:!0}))}function _(){return(0,z.jsxs)("div",{className:"u-position-relative u-overflow-auto",children:[(0,z.jsx)("div",{className:"u-position-absolute u-fill-width",children:(0,z.jsx)(Pm.Z,{theme:"transparent",right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,inline:!0,onClick:h,deprecatedIconName:"x",testId:"missing-postal-code-close-icon"})})}),(0,z.jsxs)(gt.Z,{children:[(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"u-text-center",children:(0,z.jsx)(Kl.U,{size:Kl.U.Size.X4Large,src:"/assets/items/upload/missing-post-code.png",scaling:Kl.U.Scaling.Contain,srcset:"/assets/items/upload/missing-post-code.png 1x, /assets/items/upload/missing-post-code-2x.png 2x",alt:""})}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:a("heading")}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Body,text:a("body")})]}),(0,z.jsx)(x.Z,{}),(0,z.jsxs)("form",{onSubmit:i(v),children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(fb.M,{...e(cie.PostalCode,{required:!0}),maxLength:5,uncontrolled:!0,title:a("fields.postal_code.title"),placeholder:a("fields.postal_code.placeholder"),styling:fb.M.Styling.Tight,validation:hh(r(cie.PostalCode))}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(ic.I,{type:ic.I.Type.Submit,styling:ic.I.Styling.Filled,text:a("actions.submit"),disabled:s,isLoading:s,onClick:y})]})]})]})}return(0,m.useEffect)((()=>{u&&o({event:"user.upload_item.fill_zip_code_fail"})}),[u,o]),(0,m.useEffect)((()=>{l&&o(Wi({screen:$t.FillZipCodeAfterListing}))}),[l,o]),c.tabletsUp?(0,z.jsx)(cp.Z,{show:l,defaultCallback:f,closeOnOverlay:!0,hasScrollableContent:!0,children:_()}):(0,z.jsx)(Bp.Z,{isVisible:l,onClose:f,children:_()})},mie=e=>{let{itemPrice:t}=e;const i=(0,p.v9)(fB),n=(0,p.v9)(Tq),s=(0,p.v9)(VB),r=(0,p.v9)(bM),a=(0,p.v9)(xM),o=(0,p.I0)(),{track:l}=vi(),{locale:c}=(0,O.Z)(),d=U("item_upload.".concat(r?"free_bump":"bump"));function u(){l(en({screen:s,value:Number(!n).toString(),state:"focus",tempUuid:i,target:JL.Bump})),o(mE.toggleIsPushUpChecked())}function g(){l(Ri({screen:s,target:qm.PushUpLearnMode}))}return(0,m.useEffect)((()=>{o(IV({itemPrice:t}))}),[o,t]),(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Wide,title:d("header"),suffix:(()=>{if(!a)return(0,z.jsx)(Mp,{styling:Mp.Styling.Wide,size:Mp.Size.Large});if(!a)return null;const e=Ua({...a.payable,amount:r?"0":a.payable.amount},c),t=(0,z.jsx)(xt.Z,{theme:"amplified",children:r?(0,z.jsxs)(z.Fragment,{children:[e,(0,z.jsx)(x.Z,{size:x.Z.Size.Small,orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(xt.Z,{strikethrough:!0,theme:"muted",text:Ua(a.total,c)})]}):d("price",{price:e})});return(0,z.jsx)(gt.Z,{prefix:t,children:(0,z.jsx)(BZ.F,{name:KL.Bump,checked:n||!1,onClick:u,testId:"push-ups-checkbox"})})})(),children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:d("body")}),(0,z.jsx)(_p,{type:bp.PushUp,accessChannel:Be.Si.ProductLink,render:e=>(0,z.jsx)(gt.Z,{clickable:!0,styling:gt.Z.Styling.Tight,url:e,testId:"push-ups-faq-entry-link",onClick:g,urlProps:{target:"_blank",rel:"noopener noreferrer"},children:(0,z.jsx)(xt.Z,{clickable:!0,theme:"inverse",type:xt.Z.Type.Subtitle,width:xt.Z.Width.Parent,text:d("learn_more")})})})]})},pie=()=>{const[e,t]=(0,m.useState)(!1),[i,n]=(0,m.useState)(!1),{id:s}=(0,p.v9)(oB),r=U("item_upload.feedback"),{track:a}=vi(),o=(0,p.I0)(),{fetch:l,isLoading:c,transformedData:d}=ih(Fe.CA7,Gh);(0,m.useEffect)((()=>{l()}),[l]);const u=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t(!1),e||a(Ri({screen:$t.ItemUploadFeedbackForm,target:qm.CloseScreen}))};return(0,z.jsxs)("div",{className:"u-ui-padding-top-x-large",children:[(0,z.jsx)(g.Z,{children:i?(0,z.jsx)(gt.Z,{title:r("finalized.title"),body:r("finalized.body")}):(0,z.jsx)(gt.Z,{body:r("body"),suffix:(0,z.jsx)(ic.I,{testId:"item-upload--action-open-feedback",text:r("actions.primary"),onClick:()=>{a(Ri({target:qm.GiveFeedback,screen:$t.ItemUpload})),t(!0),a(Wi({screen:$t.ItemUploadFeedbackForm}))},isLoading:c})})}),(0,z.jsx)($w,{isOpen:e,ratings:d,isInputWithoutRatingOptions:!0,isCloseActionVisible:!1,onClose:u,onSubmit:async e=>{let{finalized:t,rating:i,message:r,feedbackStatementIds:a}=e;if(!t)return;const l=await(0,Fe.wmM)({itemId:s,rating:i,finalized:t,comment:r||"",feedbackStatementIds:a});u(!0),n(!0),"errors"in l||o(mE.setFeedbackId({id:l.upload_feedback.id}))}})]})},gie=()=>{const e=U("item_upload.offline_verification.status_info_block"),t=Ql(),{track:i}=vi(),n=(0,p.v9)(VB),s=t?"authenticity-diamond-filled-dark":"authenticity-diamond-filled";function r(){i(Ri({screen:n,target:qm.OfflineVerificationHowItWorks}))}return(0,m.useEffect)((()=>{i(Gi({screen:n,target:cb.OfflineVerificationStatus}))}),[i,n]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(g.Z,{children:(0,z.jsxs)(gt.Z,{prefix:(0,z.jsx)(ht.Z,{name:s,size:ht.Z.Size.Medium}),title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:e("title")}),testId:"offline-verification-status-info",children:[(0,z.jsx)(xt.Z,{id:"offline-verification-description",inline:!0,text:e("body"),type:xt.Z.Type.Subtitle})," ",(0,z.jsx)(_p,{type:bp.OfflineVerification,accessChannel:Be.Si.ProductLink,render:t=>(0,z.jsx)("a",{tabIndex:-1,href:t,target:"_blank",rel:"noreferrer",onClick:r,"data-testid":"offline-verification-status-info-learn-more-action",children:(0,z.jsx)(xt.Z,{aria:{"aria-describedby":"offline-verification-description"},inline:!0,clickable:!0,theme:"inverse",width:xt.Z.Width.Parent,type:xt.Z.Type.Subtitle,text:e("actions.learn_more")})})})]})})]})};let hie,xie,fie;!function(e){e.List="list"}(hie||(hie={})),function(e){e.Multi="multi",e.Single="single"}(xie||(xie={})),function(e){e.Default="default",e.Group="group"}(fie||(fie={}));var yie=i(44203);const vie=e=>{let{name:t,title:i,placeholder:n,errorMessage:s,uiState:r,options:a,maxSelections:o,onSave:l,onFocus:c,onFocusOut:d,onOpenModal:u,selectedOptions:p=[],prefix:g}=e;const h=E(),[x,f]=(0,m.useState)(p),{current:y}=(0,m.useRef)(p);(0,m.useEffect)((()=>{f(y)}),[y]);const _=e=>x.some((t=>t.id===e)),b=(e,t)=>i=>{i.preventDefault();let n=[];x&&(n=(0,v.clone)(x)),_(e.id)?n=n.filter((t=>t.id!==e.id)):(n.length===o&&n.shift(),n.push(e)),f(n),t.setIsSaveEnabled(!0)},j=()=>{const e=x.map((e=>e.id));d(e),(0,v.isEqual)(x,p)||l(e)};return(0,z.jsx)(gI,{name:t,title:i,placeholder:n,render:e=>(0,z.jsx)(yie.Z,{children:a.map((i=>((e,i)=>i?(0,z.jsx)(gt.Z,{id:"".concat(t,"-").concat(i.id),title:i.title,prefix:null==g?void 0:g(i),suffix:(0,z.jsx)(BZ.F,{tabIndex:-1,name:"".concat(t,"-checkbox-").concat(i.id),checked:_(i.id),aria:{"aria-labelledby":"".concat(t,"-").concat(i.id)},testId:"".concat(t,"-checkbox-").concat(i.id)}),onClick:b(i,e),clickable:!0},"".concat(t,"-").concat(i.id)):null)(e,i)))}),readOnly:!0,onCancel:()=>{f(p);const e=p.map((e=>e.id));d(e)},onSave:j,onClose:j,value:(()=>{if(x)return x.map((e=>e.title)).join(", ")})(),validation:s&&(0,z.jsx)(zm.Z,{text:s,theme:"warning"}),isLoading:r===Ne.Pending,onOpen:()=>{h.phones&&u();const e=p.map((e=>e.id));c(e)}})},_ie=e=>{let{name:t,title:i,placeholder:n,errorMessage:s,options:r,onSave:a,onFocus:o,onFocusOut:l,onOpenModal:c,selectedOption:d,suggestedOptions:u}=e;const p=E(),g=U(),[x,f]=(0,m.useState)(d),y=(e,t)=>()=>{if(f(e),t.setIsSaveEnabled(!0),!p.phones){const i=(0,v.flatMap)([(null==e?void 0:e.id)||[]]);l(i),a(i),t.closeDropdown()}},_=(e,i,n)=>{return i?(0,z.jsx)(gt.Z,{id:"".concat(n,"-").concat(i.id),title:i.title,suffix:(0,z.jsx)(qx.J,{tabIndex:-1,name:"".concat(n,"-radio-").concat(i.id),checked:(s=i.id,!!x&&x.id===s),aria:{"aria-labelledby":"".concat(n,"-").concat(i.id)},testId:"".concat(t,"-radio-").concat(i.id)}),onClick:y(i,e),clickable:!0},"".concat(n,"-").concat(i.id)):null;var s},b=e=>(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{text:g("item_upload.suggestions_title"),type:yt.Z.Type.Leading}),(0,z.jsx)(yie.Z,{children:null==u?void 0:u.map((i=>_(e,i,"suggested-".concat(t))))}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(yt.Z,{text:g("item_upload.".concat(t,".list_title")),type:yt.Z.Type.Leading})]});return(0,z.jsx)(gI,{readOnly:!0,name:t,title:i,placeholder:n,onOpen:()=>{p.phones&&c(),o((0,v.flatMap)([(null==d?void 0:d.id)||[]]))},onCancel:()=>{f(d),l((0,v.flatMap)([(null==d?void 0:d.id)||[]]))},onSave:()=>{const e=(0,v.flatMap)([(null==x?void 0:x.id)||[]]);l(e),(0,v.isEqual)(null==x?void 0:x.id,null==d?void 0:d.id)||a(e)},onClose:()=>{l((0,v.flatMap)([(null==d?void 0:d.id)||[]]))},validation:s&&(0,z.jsx)(zm.Z,{text:s,theme:"warning"}),value:null==x?void 0:x.title,render:e=>(0,z.jsxs)(z.Fragment,{children:[!(null==u||!u.length)&&b(e),(0,z.jsx)(yie.Z,{children:r.map((i=>_(e,i,t)))})]})})};function bie(e){return e?(0,v.uniqBy)(e.flatMap((e=>e.type===fie.Default?e:bie(e.options))),"id"):[]}function jie(e,t){return e.map((e=>t.filter((t=>t.id===e))[0]))}const Sie=e=>{let{code:t}=e;const i=function(e){switch(e){case $L.Material:return KL.Material;case $L.Gender:return KL.Gender;default:return"dynamic_attribute"}}(t),n=(0,p.v9)(fB),s=(0,p.v9)((e=>t=>aB(t).dynamicAttributes.byName[e]||void 0)(t)),r=(0,p.v9)((e=>((e,t)=>oB(e).catalog.attributes.byName[t]||[])(e,t))),a=(0,p.v9)((e=>{if("dynamic_attribute"!==i)return RB(e,i)})),o=(0,p.v9)(VB),l=(0,p.I0)(),{track:c}=vi(),d=(e,i)=>{c(en({screen:o,state:i,tempUuid:n,target:t,value:e,isDynamic:!0}))},u=e=>{d(e.join(",")||null,"focus")},m=e=>{d(e.join(",")||null,"unfocus")},g=()=>{c(Gi({screen:"upload_item",target:cb.ValueSelectModal,targetDetails:"".concat(t,"_picker")}))};function x(e){(0,v.isEqual)(e,r)||l(mE.setSelectedDynamicAttributeValue({field:t,value:e}))}if(!s)return null;const f=bie(s.options);if(s.displayType===hie.List){if(s.selectionType===xie.Multi&&s.selectionLimit)return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(vie,{name:s.code,maxSelections:s.selectionLimit,placeholder:s.placeholder,title:s.title,errorMessage:a,onSave:x,uiState:Ne.Idle,options:f,selectedOptions:jie(r,f),onFocus:u,onFocusOut:m,onOpenModal:g})]});if(s.selectionType===xie.Single)return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(_ie,{name:i,placeholder:s.placeholder,title:s.title,errorMessage:a,onSave:x,options:f,selectedOption:jie(r,f)[0],onFocus:u,onFocusOut:m,onOpenModal:g})]})}return null};function Zie(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Iie=(0,p.$j)(((e,t)=>{let{pageId:i}=t;return{selectedCatalog:wB(e,i),data:PB(e,i),suggestedData:kB(e)}}));class Cie extends m.Component{constructor(){super(...arguments),Zie(this,"translate",(e=>this.props.intl.formatMessage({id:"item_upload.".concat(e)}))),Zie(this,"onCatalogSelect",(e=>()=>{var t;null!==(t=e.catalogIds)&&void 0!==t&&t.length?this.props.onCatalogNavigate(e.id):this.props.onCatalogSelect(e.id)})),Zie(this,"onBackClick",(()=>{const{onCatalogNavigate:e,selectedCatalog:t}=this.props;t&&e(t.parentId)})),Zie(this,"renderNavigation",(()=>this.props.selectedCatalog?(0,z.jsxs)("div",{children:[(0,z.jsx)(Pm.Z,{left:(0,z.jsx)(ic.I,{inline:!0,styling:ic.I.Styling.Flat,deprecatedIcon:(0,z.jsx)(ht.Z,{name:"arrow-left"}),onClick:this.onBackClick,aria:{"aria-label":this.translate("catalog.a11y.back")}}),body:this.props.selectedCatalog.title}),(0,z.jsx)(h.Z,{})]}):null)),Zie(this,"renderRadio",((e,t,i)=>{const n=this.props.selectedId;return(0,z.jsx)(qx.J,{tabIndex:-1,name:"".concat(e.id,"-").concat(t),checked:e.id===n,aria:{"aria-labelledby":i}})})),Zie(this,"renderIcon",(e=>e?(0,z.jsx)(Kl.U,{...za(e),size:Kl.U.Size.Regular,alt:""}):null)),Zie(this,"renderSuggestions",(()=>this.props.suggestedData.map((e=>(0,z.jsx)(gt.Z,{id:"catalog-suggestion-".concat(e.catalog.id),title:e.catalog.title,body:e.path,suffix:this.renderRadio(e.catalog,"catalog-suggestion-radio","catalog-suggestion-".concat(e.catalog.id)),onClick:this.onCatalogSelect(e.catalog)},"catalog-suggestion-".concat(e.catalog.id))))))}render(){const{data:e,suggestedData:t,pageId:i}=this.props,n=null===i,s=(n||0===i)&&t.length;return(0,z.jsxs)(z.Fragment,{children:[!n&&this.renderNavigation(),(0,z.jsx)(Lg,{children:(0,z.jsxs)(kp,{children:[s&&(0,z.jsx)(yt.Z,{type:yt.Z.Type.Leading,text:this.translate("suggestions_title")}),s&&this.renderSuggestions(),s&&(0,z.jsx)(yt.Z,{type:yt.Z.Type.Leading,text:this.translate("catalog.list_title")}),e.map((e=>{const t=(0,v.isEmpty)(e.catalogIds);return(0,z.jsx)(gt.Z,{id:"catalog-".concat(e.id),type:t?void 0:gt.Z.Type.Navigating,chevron:!t,suffix:t&&this.renderRadio(e,"catalog-radio","catalog-".concat(e.id))||null,prefix:!t&&this.renderIcon(e.photo)||null,onClick:this.onCatalogSelect(e),title:e.title,clickable:!0},e.id)}))]})})]})}}const kie=Iie(F((0,iw.ZP)(Cie)));function wie(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Pie={selectCatalog:DU,requestItemAuthenticityModal:wU,fetchPackageSizesRequest:VU},zie=(0,p.$j)((e=>({catalogId:oB(e).catalogId,currentCatalog:zB(e),errorMessage:RB(e,KL.Catalog),alertType:Cq(e),suggestedData:kB(e),screen:VB(e)})),Pie);class Tie extends m.Component{constructor(){super(...arguments),wie(this,"state",{selectedId:null,pageId:null}),wie(this,"handleCatalogSelect",(e=>t=>{const{breakpoints:i}=this.props;this.setState({selectedId:t},(()=>{e.setIsSaveEnabled(!0),i.phones||e.closeDropdown()}))})),wie(this,"handleCatalogNavigate",(e=>{this.setState({pageId:e})})),wie(this,"renderCatalogList",(e=>(0,z.jsx)(kie,{selectedId:this.state.selectedId,pageId:this.state.pageId,onCatalogSelect:this.handleCatalogSelect(e),onCatalogNavigate:this.handleCatalogNavigate}))),wie(this,"resetState",(()=>{this.setState({selectedId:this.props.catalogId,pageId:null})})),wie(this,"trackFieldSet",(()=>{const{selectedId:e}=this.state,{tempUuid:t,suggestedData:i,track:n}=this.props,s=i.map((e=>{let{catalog:t}=e;return t.id.toString()})),r=e?[e.toString()]:[];n(fn({tempUuid:t,suggestions:s,userSelection:r,fieldName:JL.Catalog}))})),wie(this,"handleSave",(()=>{const{catalogId:e,selectCatalog:t}=this.props,{selectedId:i}=this.state;this.trackInput(this.state.selectedId,"unfocus"),i&&i!==e?(this.trackFieldSet(),t({catalogId:i})):this.resetState()})),wie(this,"handleCancel",(()=>{this.trackInput(this.state.selectedId,"unfocus"),this.resetState()})),wie(this,"handleClose",(()=>this.handleSave())),wie(this,"handleOpen",(()=>{const{selectedId:e}=this.state,{catalogId:t}=this.props;this.trackInput(e,"focus"),e||this.setState({selectedId:t})})),wie(this,"trackInput",((e,t)=>{const{screen:i,tempUuid:n,track:s}=this.props;s(en({state:t,screen:i,tempUuid:n,target:JL.Category,value:null===e?null:e.toString()}))})),wie(this,"translate",(e=>this.props.intl.formatMessage({id:"item_upload.catalog.".concat(e)})))}componentDidMount(){this.props.fetchPackageSizesRequest(),this.props.alertType===Fa.ReplicaProof&&this.props.requestItemAuthenticityModal(!0)}componentDidUpdate(e){const{catalogId:t}=this.props;t!==e.catalogId&&this.setState({selectedId:t,pageId:null})}render(){const{currentCatalog:e,errorMessage:t}=this.props;return(0,z.jsx)(gI,{name:KL.Catalog,readOnly:!0,isScrollable:!1,title:this.translate("title"),placeholder:this.translate("placeholder"),render:this.renderCatalogList,onCancel:this.handleCancel,onOpen:this.handleOpen,onClose:this.handleClose,onSave:this.handleSave,value:(null==e?void 0:e.title)||void 0,validation:t&&(0,z.jsx)(zm.Z,{text:t,theme:"warning"})})}}const Fie=zie(F(zx((0,iw.ZP)(Tie)))),Nie=e=>{let{photoTips:t}=e;return(0,z.jsx)("div",{className:"authenticity-modal__photo-tips",children:t.map(((e,t)=>(0,z.jsxs)("div",{children:[(0,z.jsx)(Lt.Z,{children:(0,z.jsx)(Kl.U,{src:e.imageUrl})}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,alignment:xt.Z.Alignment.Center,text:e.text,width:xt.Z.Width.Parent}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})]},t)))})},Lie={setIsAuthenticityModalOpen:mE.setIsAuthenticityModalOpen},Eie=(0,p.$j)((e=>({isOpen:bB(e),content:_B(e)})),Lie);class Oie extends m.Component{constructor(){super(...arguments),function(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(this,"closeModal",(()=>{this.props.setIsAuthenticityModalOpen({isOpen:!1})}))}render(){const{isOpen:e,content:t}=this.props;if(!t)return null;const{photoTips:i,title:n,subtitle:s,note:r,cta:a,ctaUrl:o}=t;return(0,z.jsxs)(cp.Z,{show:e,testId:"authenticity-modal",children:[(0,z.jsx)(Pm.Z,{body:(0,z.jsx)(wx,{id:"item_upload.authenticity.title"}),right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,onClick:this.closeModal,deprecatedIconName:"x",inline:!0})}),(0,z.jsx)(h.Z,{}),(0,z.jsx)("div",{className:"modal-contained-content",children:(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(xt.Z,{text:n,type:xt.Z.Type.Heading,width:xt.Z.Width.Parent}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:s,width:xt.Z.Width.Parent,html:!0}),!(null==i||!i.length)&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{}),(0,z.jsx)(Nie,{photoTips:i})]}),r&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{}),(0,z.jsx)(xt.Z,{inline:!0,text:r,width:xt.Z.Width.Parent,type:xt.Z.Type.Caption})]}),a&&o&&(0,z.jsx)("a",{href:o,target:"_blank",rel:"noopener noreferrer",children:(0,z.jsx)(xt.Z,{inline:!0,text:a,theme:"primary",type:xt.Z.Type.Caption,clickable:!0})})]})}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(ic.I,{text:(0,z.jsx)(wx,{id:"item_upload.authenticity.close_action"}),styling:ic.I.Styling.Filled,onClick:this.closeModal,testId:"authenticity-modal--close-button"})})]})}}const Rie=Eie(Oie);function Die(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Aie={setBrand:mE.setBrand,fetchBrands:PU,requestItemAuthenticityModal:wU,fetchPackageSizesRequest:VU},Mie=(0,p.$j)((e=>({data:IB(e),suggestedData:jB(e),brandId:oB(e).brandId,catalogId:oB(e).catalogId,price:oB(e).price,brandTitle:oB(e).brandTitle,isVisible:cq(e),errorMessage:RB(e,KL.Brand),isItemAuthenticityRequired:yB(e),screen:VB(e),tempUuid:fB(e)})),Aie);class Uie extends m.Component{constructor(){var e;super(...arguments),e=this,Die(this,"state",{selectedId:this.props.brandId,selectedTitle:this.props.brandTitle,isLuxury:!1,isPopularBrands:!0}),Die(this,"selectedPosition",void 0),Die(this,"fetchUpdatedPackageSizes",(()=>{const{brandId:e,catalogId:t,price:i,fetchPackageSizesRequest:n}=this.props;e&&t&&i&&n()})),Die(this,"translate",(function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.props.intl.formatMessage({id:"item_upload.brand.".concat(t)},i)})),Die(this,"updateBrandSelection",((e,t,i,n,s)=>{n.setIsSaveEnabled(!0),this.selectedPosition=s,this.props.breakpoints.phones?this.setState({selectedTitle:t,selectedId:e,isLuxury:i}):(n.closeDropdown(),this.trackFieldSet(e,n.inputValue),this.props.setBrand({id:e,title:t,isLuxury:i}),i&&this.props.requestItemAuthenticityModal())})),Die(this,"onBrandClick",((e,t,i)=>()=>{this.updateBrandSelection(e.id,e.title,e.isLuxury,t,i)})),Die(this,"onCustomBrandClick",((e,t)=>()=>{this.updateBrandSelection(null,e.inputValue,!1,e,t)})),Die(this,"onEmptyBrandClick",((e,t)=>()=>{this.updateBrandSelection(WL,this.translate("empty"),!1,e,t)})),Die(this,"emptyBrandContainsValue",(e=>this.translate("empty").toLowerCase().includes(e))),Die(this,"renderEmptyBrandSelect",((e,t)=>{var i;const n=null===(i=e.inputValue)||void 0===i?void 0:i.toLowerCase();return n&&!this.emptyBrandContainsValue(n)||this.props.brandId===WL?null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{type:yt.Z.Type.Leading,text:this.translate("empty_label")}),(0,z.jsx)(gt.Z,{id:"empty-brand",title:this.translate("empty"),onClick:this.onEmptyBrandClick(e,t),suffix:(0,z.jsx)(qx.J,{tabIndex:-1,name:"".concat(WL,"-radio"),checked:this.state.selectedId===WL,aria:{"aria-labelledby":"empty-brand"}}),clickable:!0})]})})),Die(this,"renderCustomBrandSelect",((e,t)=>{var i;const{selectedTitle:n}=this.state,{inputValue:s}=e,r=this.translate("empty").toLowerCase();if(!s)return null;const a=s.toLowerCase(),o=null===(i=this.props.data[0])||void 0===i?void 0:i.title.toLowerCase();return n&&n.toLowerCase()===a||a===r||a===o||a&&this.emptyBrandContainsValue(a)?null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{type:yt.Z.Type.Leading,text:this.translate("custom_label")}),(0,z.jsx)(gt.Z,{id:"custom-select-brand",title:this.translate("custom",{brandName:s}),onClick:this.onCustomBrandClick(e,t),suffix:(0,z.jsx)(qx.J,{tabIndex:-1,name:"custom-select-brand-radio",checked:!1,aria:{"aria-labelledby":"custom-select-brand"}}),clickable:!0})]})})),Die(this,"renderSelectedBrand",(e=>(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{title:e,suffix:(0,z.jsx)(qx.J,{tabIndex:-1,name:"selected-custom-brand-radio",checked:!0}),clickable:!0}),(0,z.jsx)(h.Z,{})]}))),Die(this,"renderBrand",((e,t,i,n)=>{if(!t)return null;const{selectedId:s}=this.state;return(0,z.jsx)(gt.Z,{id:"".concat(i,"-").concat(t.id),title:t.title,suffix:(0,z.jsx)(qx.J,{tabIndex:-1,name:"".concat(i,"-radio-").concat(t.id),checked:t.id===s,aria:{"aria-labelledby":"".concat(i,"-").concat(t.id)}}),onClick:this.onBrandClick(t,e,n),clickable:!0},"".concat(i,"-").concat(t.id))})),Die(this,"renderSuggestionsList",(e=>{const{suggestedData:t,intl:i,data:n}=this.props,{isPopularBrands:s}=this.state;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{text:i.formatMessage({id:"item_upload.suggestions_title"}),type:yt.Z.Type.Leading}),(0,z.jsx)(kp,{children:t.map(((t,i)=>this.renderBrand(e,t,"suggested-brand",i+1)))}),(0,z.jsx)(h.Z,{}),!s&&!!n.length&&(0,z.jsx)(yt.Z,{text:this.translate("list_title"),type:yt.Z.Type.Leading})]})})),Die(this,"renderPopularBrandLabel",(()=>(0,z.jsx)(yt.Z,{type:yt.Z.Type.Leading,text:this.translate("popular_brands_label")}))),Die(this,"renderSelectableList",(e=>{const{data:t,suggestedData:i,brandId:n}=this.props,{selectedId:s,selectedTitle:r,isPopularBrands:a}=this.state,o=t.length+i.length+1,l=i.length+1;return(0,z.jsxs)(z.Fragment,{children:[r&&null===s&&this.renderSelectedBrand(r),n===WL&&this.renderSelectedBrand(this.translate("empty")),!!i.length&&this.renderSuggestionsList(e),a&&this.renderPopularBrandLabel(),(0,z.jsxs)(kp,{children:[t.map(((t,i)=>this.renderBrand(e,t,"brand",l+i))),this.renderCustomBrandSelect(e,o),this.renderEmptyBrandSelect(e,o+1)]})]})})),Die(this,"handleOpen",(()=>this.trackInput(this.state.selectedId,"focus"))),Die(this,"handleCancel",(()=>{const{brandId:e,brandTitle:t}=this.props;this.trackInput(this.state.selectedId,"unfocus"),this.setState({selectedId:e,selectedTitle:t,isPopularBrands:!0},this.requestBrandFetch())})),Die(this,"resetBrandData",(()=>{this.setState({isPopularBrands:!0},this.requestBrandFetch())})),Die(this,"handleClose",(()=>{this.trackInput(this.state.selectedId,"unfocus"),this.resetBrandData()})),Die(this,"requestBrandFetch",(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return()=>{e.props.fetchBrands({keyword:t,includeAllBrands:!0})}})),Die(this,"trackFieldSet",((e,t)=>{const{tempUuid:i,suggestedData:n,data:s,track:r}=this.props,a=n.map((e=>e.id.toString())),o=s.map((e=>e.id.toString())),l=e?[e.toString()]:[];r(fn({tempUuid:i,suggestions:a,userSelection:l,querySuggestions:o,query:t,position:this.selectedPosition,fieldName:JL.Brand}))})),Die(this,"trackInput",((e,t)=>{const{screen:i,tempUuid:n}=this.props;void 0!==e&&this.props.track(en({state:t,screen:i,tempUuid:n,target:JL.Brand,value:null===e?null:e.toString()}))})),Die(this,"handleSave",(e=>{const{selectedId:t,selectedTitle:i,isLuxury:n}=this.state;null!==i&&(this.trackInput(t,"unfocus"),this.trackFieldSet(t,e),this.resetBrandData(),this.props.setBrand({id:t,title:i,isLuxury:n}))})),Die(this,"handleInputChange",(e=>{const{value:t}=e.currentTarget;this.setState({isPopularBrands:!t},this.requestBrandFetch(t))})),Die(this,"handleAuthenticityNoteClick",(()=>{this.props.requestItemAuthenticityModal(!0)})),Die(this,"handleKeyDown",(e=>{Vg(e,this.handleAuthenticityNoteClick)})),Die(this,"renderValidation",(()=>{const{errorMessage:e,isItemAuthenticityRequired:t}=this.props;return e?(0,z.jsx)(zm.Z,{text:e,theme:"warning"}):t?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:"".concat(this.translate("note")," "),inline:!0,type:xt.Z.Type.Caption,testId:"brand-select--authenticity-note"}),(0,z.jsx)("span",{role:"presentation",onClick:this.handleAuthenticityNoteClick,onKeyDown:this.handleKeyDown,children:(0,z.jsx)(xt.Z,{text:this.translate("note_link"),inline:!0,theme:"primary",type:xt.Z.Type.Caption,clickable:!0,testId:"brand-select--authenticity-note-link"})})]}):null}))}componentDidMount(){this.props.fetchBrands({includeAllBrands:!0})}componentDidUpdate(e){const{brandId:t,brandTitle:i}=this.props;t===e.brandId&&i===e.brandTitle||(this.setState({selectedTitle:i,selectedId:t}),this.fetchUpdatedPackageSizes())}render(){const{brandTitle:e,brandId:t,isVisible:i}=this.props,n=t===WL&&!e;return i?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(gI,{name:KL.Brand,title:this.translate("title"),placeholder:this.translate("placeholder"),render:this.renderSelectableList,onOpen:this.handleOpen,onCancel:this.handleCancel,onClose:this.handleClose,onSave:this.handleSave,onChange:this.handleInputChange,onClear:this.resetBrandData,value:n?this.translate("empty"):e,validation:this.renderValidation()}),(0,z.jsx)(Rie,{})]}):null}}Die(Uie,"defaultProps",{data:[]});const Bie=Mie(zx(F((0,iw.ZP)(Uie))));class qie extends m.Component{constructor(){super(...arguments),function(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(this,"renderLoader",(()=>(0,z.jsx)(rh,{onClick:this.props.onCloseRequest,children:(0,z.jsx)(Dp.Z,{size:Dp.Z.Size.XLarge,styling:Dp.Z.Styling.Lifted})})))}renderContent(){const{faqEntry:e}=this.props;return e?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Pm.Z,{body:e.title,right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,theme:"muted",size:ic.I.Size.Medium,inline:!0,deprecatedIcon:(0,z.jsx)(ht.Z,{name:"x"}),onClick:this.props.onCloseRequest})}),(0,z.jsx)("div",{className:"faq-modal faq-modal--contained",children:(0,z.jsx)("div",{className:"faq-modal__content",children:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,children:(0,z.jsx)("div",{className:"faq-content",children:(0,z.jsx)(xt.Z,{text:e.body,html:!0,width:xt.Z.Width.Parent})})})})})]}):null}render(){const{isOpen:e,isLoading:t}=this.props;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(cp.Z,{show:!t&&e,closeOnOverlay:!0,defaultCallback:this.props.onCloseRequest,children:this.renderContent()}),t&&e&&this.renderLoader()]})}}const Vie=qie,Hie=e=>{let{show:t,onCloseClick:i}=e;const n=U(),s=Ql();return(0,z.jsx)(cp.Z,{testId:"size-modal",show:t,title:n("item_upload.size.modal.title"),body:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:n("item_upload.size.modal.text"),html:!0}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center",children:(0,z.jsx)(Kl.U,{alt:n("item_upload.size.modal.a11y.image_alt"),src:s?"/assets/items/upload/size-tag-dark.png":"/assets/items/upload/size-tag.png"})})]}),actions:[{text:n("item_upload.size.modal.close_button"),style:ic.I.Styling.Filled,callback:i}]})};function Gie(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Wie={setSizeId:mE.setSizeId,fetchSizeGroups:BU,fetchFaqEntryByIdRequest:up},Xie=(0,p.$j)((e=>{const t=GB(e);return{data:WB(e),suggestedData:ZB(e),isVisible:dq(e),size:OB(e),sizeId:oB(e).sizeId,sizeGroup:GB(e),errorMessage:RB(e,KL.Size),faqEntry:xp(e,null==t?void 0:t.faqEntryId),isLoading:yp(e,null==t?void 0:t.faqEntryId)===Ne.Pending,screen:VB(e),shouldShowSizeModal:zq(e),isItemSizeLabelOneAbTestEnabled:Gn(e),itemSizeLabelOneAbTest:Vn("more_item_size_label_1")(e),exposee:we(e),isNewTranslationsEnabled:Wt("more_size_select_new_translations")(e),tempUuid:fB(e)}}),Wie);class Yie extends m.Component{constructor(){super(...arguments),Gie(this,"state",{isModalOpen:!1,isSizeModalOpen:!1,wasSizeModalShown:!1,selectedId:this.props.sizeId}),Gie(this,"shouldShowChooseCorrectSizeModalAfterUpdate",!1),Gie(this,"handleSave",(()=>{const{sizeId:e,setSizeId:t}=this.props,{selectedId:i}=this.state;this.trackInput(i,"unfocus"),i!==e&&(this.trackFieldSet(),t({id:i}))})),Gie(this,"handleOpen",(()=>{const{shouldShowSizeModal:e}=this.props,{wasSizeModalShown:t}=this.state;this.trackInput(this.state.selectedId,"focus"),t||(e?this.openChooseCorrectSizeModal():this.shouldShowChooseCorrectSizeModalAfterUpdate=!0)})),Gie(this,"openChooseCorrectSizeModal",(()=>{const{track:e}=this.props;this.shouldShowChooseCorrectSizeModalAfterUpdate=!1,this.setState({isSizeModalOpen:!0,wasSizeModalShown:!0}),(0,Fe.Xfv)(),e(Wi({screen:$t.SizesModal}))})),Gie(this,"handleCancel",(()=>this.setState({selectedId:this.props.sizeId}))),Gie(this,"handleClose",(()=>{this.handleSave()})),Gie(this,"trackInput",((e,t)=>{const{screen:i,tempUuid:n}=this.props;this.props.track(en({state:t,screen:i,tempUuid:n,target:JL.Size,value:(null==e?void 0:e.toString())||null}))})),Gie(this,"translate",(e=>this.props.intl.formatMessage({id:"item_upload.size.".concat(e)}))),Gie(this,"onSubtitleClick",(()=>{const{sizeGroup:e}=this.props;null!=e&&e.faqEntryId&&(this.props.fetchFaqEntryByIdRequest({id:e.faqEntryId}),this.setState({isModalOpen:!0}))})),Gie(this,"handleKeyDown",(e=>{Vg(e,this.onSubtitleClick)})),Gie(this,"renderValidation",(()=>{const{sizeGroup:e,errorMessage:t,isNewTranslationsEnabled:i}=this.props;return t?(0,z.jsx)(zm.Z,{text:t,theme:"warning"}):null!=e&&e.faqEntryId?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{inline:!0,text:"".concat(this.translate(i?"subtitle_description":"subtitle")," "),type:xt.Z.Type.Caption}),(0,z.jsx)("span",{role:"presentation",onClick:this.onSubtitleClick,onKeyDown:this.handleKeyDown,children:(0,z.jsx)(xt.Z,{inline:!0,text:this.translate("subtitle_link"),theme:"primary",type:xt.Z.Type.Caption,clickable:!0})})]}):null})),Gie(this,"onModalClose",(()=>{this.setState({isModalOpen:!1})})),Gie(this,"trackFieldSet",(()=>{const{tempUuid:e,suggestedData:t,track:i}=this.props,{selectedId:n}=this.state,s=t.map((e=>e.id.toString())),r=n?[n.toString()]:[];i(fn({tempUuid:e,suggestions:s,userSelection:r,fieldName:JL.Size}))})),Gie(this,"isSelectedValue",(e=>{const{selectedId:t}=this.state;return!!t&&t===e})),Gie(this,"handleSizeSelect",((e,t)=>()=>{this.setState({selectedId:e},(()=>{t.setIsSaveEnabled(!0),this.props.breakpoints.phones||t.closeDropdown()}))})),Gie(this,"renderSize",((e,t,i)=>t?(0,z.jsx)(gt.Z,{id:"".concat(i,"-").concat(t.id),title:t.title,suffix:(0,z.jsx)(qx.J,{tabIndex:-1,name:"".concat(i,"-radio-").concat(t.id),checked:this.isSelectedValue(t.id),aria:{"aria-labelledby":"".concat(i,"-").concat(t.id)}}),onClick:this.handleSizeSelect(t.id,e),clickable:!0},"".concat(i,"-").concat(t.id)):null)),Gie(this,"renderSuggestionsList",(e=>{const{suggestedData:t,intl:i}=this.props;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{text:i.formatMessage({id:"item_upload.suggestions_title"}),type:yt.Z.Type.Leading}),(0,z.jsx)(kp,{children:t.map((t=>this.renderSize(e,t,"suggested-size")))}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(yt.Z,{text:this.translate("list_title"),type:yt.Z.Type.Leading})]})})),Gie(this,"renderSelectableList",(e=>{const{data:t,suggestedData:i,isNewTranslationsEnabled:n}=this.props;return(0,z.jsxs)(z.Fragment,{children:[n&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{text:this.translate("subtitle_dropdown"),type:xt.Z.Type.Caption,html:!0})}),(0,z.jsx)(h.Z,{})]}),!!i.length&&this.renderSuggestionsList(e),(0,z.jsx)(kp,{children:t.map((t=>this.renderSize(e,t,"size")))})]})})),Gie(this,"handleSizeModalCloseClick",(()=>{this.setState({isSizeModalOpen:!1})}))}componentDidMount(){const{shouldShowSizeModal:e,isItemSizeLabelOneAbTestEnabled:t,fetchSizeGroups:i,track:n,itemSizeLabelOneAbTest:s,exposee:r}=this.props;i(),e&&t&&s&&n(bn({...r,...s}))}componentDidUpdate(e){const{sizeId:t,shouldShowSizeModal:i,isItemSizeLabelOneAbTestEnabled:n,track:s,itemSizeLabelOneAbTest:r,exposee:a}=this.props,o=!e.shouldShowSizeModal&&i&&n;t!==e.sizeId&&this.setState({selectedId:t}),o&&r&&s(bn({...a,...r})),o&&this.shouldShowChooseCorrectSizeModalAfterUpdate&&this.openChooseCorrectSizeModal()}render(){var e;if(!this.props.isVisible)return null;const t=this.props.breakpoints.phones&&!this.state.isSizeModalOpen||!this.props.breakpoints.phones;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(gI,{isPopupVisible:t,closeOnGlobalClick:!this.state.isSizeModalOpen,readOnly:!0,name:KL.Size,title:this.translate("title"),placeholder:this.translate("placeholder"),onOpen:this.handleOpen,onCancel:this.handleCancel,onSave:this.handleSave,onClose:this.handleClose,validation:this.renderValidation(),value:null===(e=this.props.size)||void 0===e?void 0:e.title,render:this.renderSelectableList}),(0,z.jsx)(Vie,{faqEntry:this.props.faqEntry,isOpen:this.state.isModalOpen,isLoading:this.props.isLoading,onCloseRequest:this.onModalClose}),(0,z.jsx)(Hie,{show:this.state.isSizeModalOpen,onCloseClick:this.handleSizeModalCloseClick})]})}}const Kie=Xie(F(zx((0,iw.ZP)(Yie))));function Jie(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Qie={setStatusId:mE.setStatusId,fetchStatuses:UU},$ie=(0,p.$j)((e=>{const t=function(e){const{statuses:t}=nB(e).formData,i=zB(e);return null!=i&&i.restrictedToStatusId?[t.byId[i.restrictedToStatusId]]:null==t?void 0:t.ids.map((e=>t.byId[e]))}(e);return{data:t,isDisabled:(0,v.isEmpty)(t),status:oq(e),errorMessage:RB(e,KL.Status),restrictedToStatusId:TB(e),screen:VB(e),tempUuid:fB(e)}}),Qie);class ene extends m.Component{constructor(){super(...arguments),Jie(this,"handleOpen",(()=>{var e;this.trackInput(null===(e=this.props.status)||void 0===e?void 0:e.id,"focus")})),Jie(this,"onSave",(e=>{e&&(this.trackInput(e.id,"unfocus"),this.props.setStatusId({id:e.id}))})),Jie(this,"trackInput",((e,t)=>{const{screen:i,tempUuid:n}=this.props;this.props.track(en({state:t,screen:i,tempUuid:n,target:JL.Condition,value:e||0===e?e.toString():null}))})),Jie(this,"translate",(e=>this.props.intl.formatMessage({id:"item_upload.".concat(e)}))),Jie(this,"renderValidationNote",(()=>{const{errorMessage:e,restrictedToStatusId:t}=this.props;return e?(0,z.jsx)(zm.Z,{text:e,theme:"warning"}):(0,v.isNumber)(t)?(0,z.jsx)(xt.Z,{text:"".concat(this.translate("status.note")," "),inline:!0,type:xt.Z.Type.Caption}):null}))}componentDidMount(){this.props.fetchStatuses()}render(){const{isDisabled:e,data:t,status:i}=this.props;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(YJ,{name:KL.Status,group:"status",inputTitle:this.translate("status.title"),placeholder:this.translate("status.placeholder"),onSave:this.onSave,disabled:e,data:t,onOpen:this.handleOpen,selectedValue:i,validation:this.renderValidationNote()})]})}}const tne=$ie(zx((0,iw.ZP)(ene)));function ine(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const nne={fetchColors:mE.fetchColorsRequest,setColorIds:mE.setColorIds},sne=(0,p.$j)((e=>({data:NB(e),suggestedData:SB(e),colors:LB(e),isVisible:uq(e),errorMessage:RB(e,KL.Color),uiState:EB(e),screen:VB(e),tempUuid:fB(e)})),nne);class rne extends m.Component{constructor(){super(...arguments),ine(this,"state",{selectedValues:[]}),ine(this,"translate",(e=>this.props.intl.formatMessage({id:"item_upload.".concat(e)}))),ine(this,"isSelectedValue",(e=>{const{selectedValues:t}=this.state;return!!t&&t.map((e=>e.id)).includes(e)})),ine(this,"onColorRowClick",((e,t)=>{let i=[];this.state.selectedValues&&(i=(0,v.clone)(this.state.selectedValues)),this.isSelectedValue(e.id)?i=i.filter((t=>t.id!==e.id)):(2===i.length&&i.shift(),i.push(e)),this.setState({selectedValues:i},(()=>t.setIsSaveEnabled(!0)))})),ine(this,"handleColorClick",((e,t)=>i=>{i.preventDefault(),this.onColorRowClick(e,t)})),ine(this,"renderColor",((e,t,i)=>t?(0,z.jsx)(gt.Z,{id:"".concat(i,"-").concat(t.id),title:t.title,prefix:(0,z.jsx)(L3,{code:t.code}),suffix:(0,z.jsx)(BZ.F,{tabIndex:-1,name:"".concat(i,"-checkbox-").concat(t.id),checked:this.isSelectedValue(t.id),aria:{"aria-labelledby":"".concat(i,"-").concat(t.id)}}),onClick:this.handleColorClick(t,e),clickable:!0},"".concat(i,"-").concat(t.id)):null)),ine(this,"renderSuggestionsList",(e=>{const{suggestedData:t,intl:i}=this.props;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{text:i.formatMessage({id:"item_upload.suggestions_title"}),type:yt.Z.Type.Leading}),(0,z.jsx)(kp,{children:t.map((t=>this.renderColor(e,t,"suggested-color")))}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(yt.Z,{text:this.translate("color.list_title"),type:yt.Z.Type.Leading})]})})),ine(this,"renderSelectableList",(e=>{const{data:t,suggestedData:i}=this.props;return(0,z.jsxs)(z.Fragment,{children:[!!i.length&&this.renderSuggestionsList(e),(0,z.jsx)(kp,{children:t.map((t=>this.renderColor(e,t,"color")))})]})})),ine(this,"formatInputValue",(()=>{const{selectedValues:e}=this.state;return e?e.map((e=>e.title)).join(", "):""})),ine(this,"getSelectedColorIds",(()=>this.state.selectedValues.map((e=>e.id)))),ine(this,"onOpen",(()=>{this.trackInput(this.getSelectedColorIds(),"focus")})),ine(this,"onCancel",(()=>{this.trackInput(this.getSelectedColorIds(),"unfocus"),this.setState({selectedValues:this.props.colors})})),ine(this,"trackFieldSet",(e=>{const{tempUuid:t,suggestedData:i,track:n}=this.props,s=i.map((e=>e.id.toString())),r=e.map((e=>e.toString()));n(fn({tempUuid:t,suggestions:s,userSelection:r,fieldName:JL.Color}))})),ine(this,"trackInput",((e,t)=>{const{screen:i,tempUuid:n}=this.props;this.props.track(en({state:t,screen:i,tempUuid:n,target:JL.Color,value:(null==e?void 0:e.toString())||null}))})),ine(this,"onSave",(()=>{const{selectedValues:e}=this.state,{colors:t,setColorIds:i}=this.props,n=this.getSelectedColorIds();this.trackInput(n,"unfocus"),(0,v.isEqual)(e,t)||(this.trackFieldSet(n),this.setState({selectedValues:[]},(()=>i({ids:n}))))})),ine(this,"onClose",(()=>{this.onSave()}))}componentDidMount(){this.props.fetchColors()}componentDidUpdate(e){const{colors:t}=this.props;t!==e.colors&&this.setState({selectedValues:t})}render(){const{errorMessage:e,uiState:t,isVisible:i}=this.props;return i?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(gI,{name:KL.Color,title:this.translate("color.title"),placeholder:this.translate("color.placeholder"),render:this.renderSelectableList,readOnly:!0,onOpen:this.onOpen,onCancel:this.onCancel,onSave:this.onSave,onClose:this.onClose,value:this.formatInputValue(),validation:e&&(0,z.jsx)(zm.Z,{text:e,theme:"warning"}),isLoading:t===Ne.Pending})]}):null}}ine(rne,"defaultProps",{data:[]});const ane=sne(zx((0,iw.ZP)(rne)));let one;!function(e){e.Imperial="imperial",e.Metric="metric"}(one||(one={}));const lne=e=>{let{show:t,onCloseClick:i}=e;const n=Xn({abTestName:"measurements_redesigned",shouldTrackExpose:!0}),s="on"===(null==n?void 0:n.variant),r=U(),a=If();return s?(0,z.jsxs)(cp.Z,{testId:"measurements-guide-modal",show:t,children:[(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(xt.Z,{text:r("item_upload.measurements.modal.title"),type:xt.Z.Type.Heading,width:xt.Z.Width.Parent}),(0,z.jsx)(x.Z,{size:x.Z.Size.Regular}),(0,z.jsx)(xt.Z,{text:r("item_upload.measurements.modal.shirt.body"),type:xt.Z.Type.Body,html:!0})]}),(0,z.jsx)(gt.Z,{testId:"measurements-guide-modal-measurement-1",prefix:(0,z.jsx)(Kl.U,{size:Kl.U.Size.XLarge,alt:r("item_upload.measurements.modal.a11y.image_shoulder_width_alt"),src:a("items/upload/shoulder-width.png")}),body:(0,z.jsx)(xt.Z,{text:r("item_upload.measurements.modal.shirt.shoulder_width"),html:!0})}),(0,z.jsx)(gt.Z,{testId:"measurements-guide-modal-measurement-2",prefix:(0,z.jsx)(Kl.U,{size:Kl.U.Size.XLarge,alt:r("item_upload.measurements.modal.a11y.image_length_alt"),src:a("items/upload/lenght.png")}),body:(0,z.jsx)(xt.Z,{text:r("item_upload.measurements.modal.shirt.length"),html:!0})})]}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(ic.I,{testId:"measurements-guide-modal-close-button",text:r("item_upload.measurements.modal.close_button"),styling:ic.I.Styling.Filled,onClick:i})})]}):(0,z.jsx)(cp.Z,{testId:"measurements-guide-modal",show:t,title:r("item_upload.measurements.modal.title"),body:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:r("item_upload.measurements.modal.body"),html:!0}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsxs)("div",{className:"u-flexbox u-justify-content-center",children:[(0,z.jsxs)("div",{className:"u-text-center u-fill-width",children:[(0,z.jsx)(Kl.U,{alt:r("item_upload.measurements.modal.a11y.image_shoulder_width_alt"),src:a("items/upload/measurement-width.png")}),(0,z.jsx)(xt.Z,{text:r("item_upload.measurements.modal.image_shoulder_width_caption"),type:xt.Z.Type.Caption})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large,orientation:x.Z.Orientation.Vertical}),(0,z.jsxs)("div",{className:"u-text-center u-fill-width",children:[(0,z.jsx)(Kl.U,{alt:r("item_upload.measurements.modal.a11y.image_length_alt"),src:a("items/upload/measurement-length.png")}),(0,z.jsx)(xt.Z,{text:r("item_upload.measurements.modal.image_length_caption"),type:xt.Z.Type.Caption})]})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]}),actions:[{text:r("item_upload.measurements.modal.close_button"),style:ic.I.Styling.Filled,callback:i}]})},cne=()=>{const e=(0,p.v9)(fB),t=(0,p.v9)(DB(KL.MeasurementWidth)),i=(0,p.v9)(DB(KL.MeasurementLength)),n=(0,p.v9)(xq),s=(0,p.v9)(wq),r=(0,p.v9)(Pq),a=(0,p.v9)(ws)===one.Imperial?"in":"cm",o=(0,p.v9)(VB),l=(0,p.I0)(),c=U(),{track:d}=vi(),[u,g]=(0,m.useState)(!1),f=()=>{g(!0),d(Wi({screen:$t.InfoAboutMeasurements}))},y=t=>{let{value:i,fieldTrackingName:n,state:s}=t;d(en({state:s,screen:o,tempUuid:e,target:n,value:(null==i?void 0:i.toString())||null}))},v=(e,t)=>{if(!/^([1-9][0-9]{0,2}$)|^$/.test(t))return;const i=Number(t)||null;e===KL.MeasurementWidth?l(mE.setMeasurementWidth({width:i})):l(mE.setMeasurementLength({length:i}))};return n?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsxs)("label",{htmlFor:"measurements",className:"c-input c-input--wide c-input__value--with-suffix",children:[(0,z.jsx)("div",{className:"c-input__title",children:c("item_upload.measurements.title_recommended")}),(0,z.jsxs)("div",{className:"c-input__content",children:[(0,z.jsx)("div",{className:"u-fill-width",children:(0,z.jsx)(fb.M,{ignoreState:!0,name:"shoulder_width",suffix:(0,z.jsx)(xt.Z,{text:a,theme:"muted"}),placeholder:c("item_upload.measurements.shoulder_width_placeholder"),styling:fb.M.Styling.Tight,value:s,onChange:e=>{v(KL.MeasurementWidth,e.target.value),l(mE.removeFieldError({fieldName:KL.MeasurementWidth}))},onBlur:()=>{y({value:s,fieldTrackingName:JL.MeasurementShoulderWidth,state:"unfocus"})},onFocus:()=>{y({value:s,fieldTrackingName:JL.MeasurementShoulderWidth,state:"focus"})},validation:t?(0,z.jsx)(zm.Z,{text:t,theme:"warning"}):null,testId:"measurement-width"})}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsxs)("div",{className:"u-fill-width",children:[(0,z.jsx)(fb.M,{ignoreState:!0,name:"height",suffix:(0,z.jsx)(xt.Z,{text:a,theme:"muted"}),placeholder:c("item_upload.measurements.length_placeholder"),styling:fb.M.Styling.Tight,value:r,onChange:e=>{v(KL.MeasurementLength,e.target.value),l(mE.removeFieldError({fieldName:KL.MeasurementLength}))},onBlur:()=>{y({value:r,fieldTrackingName:JL.MeasurementLength,state:"unfocus"})},onFocus:()=>{y({value:r,fieldTrackingName:JL.MeasurementLength,state:"focus"})},testId:"measurement-length"}),(0,z.jsx)(x.Z,{}),i?(0,z.jsx)(zm.Z,{text:i,theme:"warning"}):(0,z.jsxs)("div",{children:[(0,z.jsx)(xt.Z,{inline:!0,text:"".concat(c("item_upload.measurements.subtitle")," "),type:xt.Z.Type.Caption}),(0,z.jsx)("span",{role:"presentation",onClick:f,onKeyDown:e=>{Vg(e,f)},children:(0,z.jsx)(xt.Z,{testId:"measurements-guide",inline:!0,text:c("item_upload.measurements.subtitle_modal_link"),theme:"primary",type:xt.Z.Type.Caption,clickable:!0})})]})]})]})]}),(0,z.jsx)(lne,{show:u,onCloseClick:()=>{g(!1)}})]}):null};class dne extends m.PureComponent{constructor(){super(...arguments),function(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(this,"translate",(e=>this.props.intl.formatMessage({id:"item_upload.isbn.help_modal.".concat(e)})))}renderBody(){return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{type:yt.Z.Type.Stacked,text:this.translate("example")}),(0,z.jsx)("div",{className:"u-ui-padding-vertical-medium u-flexbox u-justify-content-center",children:(0,z.jsx)("div",{className:"item-upload__isbn-modal-image",children:(0,z.jsx)(Kl.U,{src:"".concat(Be.Fv,"/assets/items/upload/isbn-barcode.svg")})})}),(0,z.jsx)(ah.Z,{styling:ah.Z.Styling.Narrow,text:this.translate("explanation")})]})}render(){const{isOpen:e,onClose:t}=this.props;return(0,z.jsx)(cp.Z,{show:e,title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:this.translate("title")}),body:this.renderBody(),closeOnOverlay:!0,defaultCallback:t,actions:[{text:this.translate("close"),style:cp.Z.ActionStyling.Filled,callback:t}]})}}const une=(0,iw.ZP)(dne);function mne(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const pne=[10,13];class gne extends m.Component{constructor(e){super(e),mne(this,"formatValue",(e=>{if(!e)return{value:"",numericValue:""};const t=(e=>{const t=e.replace(/[^\d-x]+/gi,"");let i=0;return t.split("").reduce(((e,t)=>13===i?e:("-"!==t&&(i+=1),e+t)),"")})(e),i=t.replace(/[^\dx]/gi,"");return{value:t,numericValue:i}})),mne(this,"handleValue",(e=>{var t;const{value:i,validity:n}=this.state,s=this.formatValue(null===(t=e.target)||void 0===t?void 0:t.value),r=n!==YL.Unvalidated;let a={};s.value!==i&&(a={...a,value:s.value,numericValue:s.numericValue,isDirty:!0}),r?(a.validity=this.getValidity(s.numericValue),this.props.onChange(s.numericValue,a.validity)):pne.includes(s.numericValue.length)&&this.debouncedOnChangeAndValidate(),this.setState(a)})),mne(this,"handleBlur",(()=>{const{isDirty:e,numericValue:t,validity:i}=this.state,n=i!==YL.Unvalidated;this.debouncedOnChangeAndValidate.cancel(),this.props.onBlur(t,this.getValidity(t),e,n),e&&this.setValidity(!0)})),mne(this,"handleFocus",(()=>{this.props.onFocus(this.state.validity)})),mne(this,"debouncedOnChangeAndValidate",(0,v.debounce)((()=>{const{numericValue:e}=this.state,t=this.getValidity(e);this.setValidity(),this.props.onChange(e,t)}),GL));const t=this.formatValue(e.value);this.state={...t,validity:t.value?this.getValidity(t.numericValue):YL.Unvalidated,isDirty:!1}}getValidity(e){return(e=>{switch(e.length){case 10:return(e=>{const t=e.slice(-1).toLowerCase(),i="x"===t?10:parseInt(t,10);return(11-e.slice(0,-1).split("").reduce(((e,t,i)=>{const n=10-i;return e+parseInt(t,10)*n}),0)%11)%11===i})(e);case 13:return(e=>{const t=parseInt(e.slice(-1),10),i=e.slice(0,-1).split("").reduce(((e,t,i)=>{const n=i%2?3:1;return e+parseInt(t,10)*n}),0)%10;return(i?10-i:i)===t})(e);default:return!1}})(e)?YL.Valid:YL.Invalid}setValidity(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{numericValue:t}=this.state;(e||pne.includes(t.length))&&this.setState({validity:this.getValidity(t)})}render(){return this.props.children({value:this.state.value,validity:this.state.validity,handleValue:this.handleValue,handleBlur:this.handleBlur,handleFocus:this.handleFocus})}}const hne=gne;function xne(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const fne={setIsbn:mE.setIsbn},yne=(0,p.$j)((e=>({isVisible:pq(e),isbn:oB(e).isbn,errorMessage:RB(e,KL.Isbn),uiState:fq(e),bookDetailStatus:_q(e),screen:VB(e),tempUuid:fB(e)})),fne),vne={[YL.Valid]:"success",[YL.Invalid]:"error",[YL.Unvalidated]:null};class _ne extends m.Component{constructor(){super(...arguments),xne(this,"state",{isModalOpen:!1}),xne(this,"isWaitingForResponse",!1),xne(this,"pendingTrackingEvents",[]),xne(this,"handleModalOpen",(()=>{this.setState({isModalOpen:!0})})),xne(this,"handleModalClose",(()=>{this.setState({isModalOpen:!1})})),xne(this,"handleChange",((e,t)=>{this.isWaitingForResponse=this.isWaitingForResponse||t===YL.Valid,this.props.setIsbn({isbn:e,validity:t})})),xne(this,"handleBlur",((e,t,i,n)=>{if(!i)return void this.trackInput(null,"unfocus");const s=t===YL.Valid;this.isWaitingForResponse=this.isWaitingForResponse||s&&!n,this.isWaitingForResponse?this.pendingTrackingEvents.push("unfocus"):this.trackInput(vne[t],"unfocus"),n||this.props.setIsbn({isbn:e,validity:t})})),xne(this,"handleFocus",(e=>{this.isWaitingForResponse?this.pendingTrackingEvents.push("focus"):this.trackInput(vne[e],"focus")})),xne(this,"handleKeyDown",(e=>{Vg(e,this.handleModalOpen)})),xne(this,"trackInput",((e,t)=>{const{screen:i,tempUuid:n,track:s}=this.props;s(en({screen:i,state:t,value:e,tempUuid:n,target:JL.Isbn}))})),xne(this,"translate",(e=>this.props.intl.formatMessage({id:"item_upload.isbn.".concat(e)})))}componentDidUpdate(e){this.sendPendingTrackingEvents(e.uiState)}sendPendingTrackingEvents(e){const{uiState:t,bookDetailStatus:i}=this.props;if(!this.isWaitingForResponse)return;if(t===e)return;if(t!==Ne.Success&&t!==Ne.Failure)return;this.isWaitingForResponse=!1;const n=t===Ne.Success;let s;s=n?i===XL.Found?"success":"not_found":"error",this.pendingTrackingEvents.forEach((e=>this.trackInput(s,e))),this.pendingTrackingEvents=[]}renderIsbnNote(){return(0,z.jsx)("div",{onClick:this.handleModalOpen,onKeyDown:this.handleKeyDown,children:(0,z.jsx)(xt.Z,{clickable:!0,theme:"primary",type:xt.Z.Type.Caption,text:this.translate("note")})})}renderIsbnValidation(e){const{errorMessage:t}=this.props;let i=t;return e===YL.Invalid&&(i=this.translate("errors.invalid_isbn")),(0,z.jsxs)(z.Fragment,{children:[i&&(0,z.jsx)(zm.Z,{text:i,theme:"warning"}),(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),this.renderIsbnNote()]})}render(){const{isVisible:e,isbn:t,uiState:i}=this.props,n=i===Ne.Pending;return e?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(hne,{onChange:this.handleChange,onFocus:this.handleFocus,onBlur:this.handleBlur,value:t,children:e=>{let{value:t,validity:i,handleValue:s,handleBlur:r,handleFocus:a}=e;return(0,z.jsx)(fb.M,{styling:fb.M.Styling.Wide,name:KL.Isbn,title:this.translate("title"),placeholder:this.translate("placeholder"),ignoreState:!0,value:t,onChange:s,onBlur:r,onFocus:a,suffix:n?(0,z.jsx)(Dp.Z,{}):void 0,validation:this.renderIsbnValidation(i)})}}),(0,z.jsx)(une,{isOpen:this.state.isModalOpen,onClose:this.handleModalClose})]}):null}}const bne=yne(zx((0,iw.ZP)(_ne))),jne=(0,p.$j)((e=>({isVisible:gq(e),author:yq(e)})));class Sne extends m.Component{constructor(){super(...arguments),function(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(this,"translate",(e=>this.props.intl.formatMessage({id:"item_upload.author.".concat(e)})))}render(){const{isVisible:e,author:t}=this.props;return e&&t?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(fb.M,{disabled:!0,styling:fb.M.Styling.Wide,name:"author",title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,theme:"muted",text:this.translate("title")}),value:t})]}):null}}const Zne=jne((0,iw.ZP)(Sne)),Ine=(0,p.$j)((e=>({isVisible:hq(e),bookTitle:vq(e)})));class Cne extends m.Component{constructor(){super(...arguments),function(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(this,"translate",(e=>this.props.intl.formatMessage({id:"item_upload.book_title.".concat(e)})))}render(){const{isVisible:e,bookTitle:t}=this.props;return e&&t?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(fb.M,{disabled:!0,styling:fb.M.Styling.Wide,name:"book-title",title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,theme:"muted",text:this.translate("title")}),value:t})]}):null}}const kne=Ine((0,iw.ZP)(Cne)),wne=()=>{const e=(0,p.I0)(),{track:t}=vi(),i=U("item_upload.video_game_rating"),n=(0,p.v9)(fB),s=(0,p.v9)(XB),r=(0,p.v9)(YB),a=(0,p.v9)(mq),o=(0,p.v9)(VB),l=(0,p.v9)((e=>RB(e,KL.VideoGameRating))),c=(e,i)=>{t(en({screen:o,state:i,tempUuid:n,target:JL.VideoGameRating,value:(null==e?void 0:e.toString())||null}))};return(0,m.useEffect)((()=>{e(qU())}),[e]),a?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(YJ,{name:KL.VideoGameRating,inputTitle:i("title"),placeholder:i("placeholder"),onSave:t=>{t&&(c(t.id,"unfocus"),e(mE.setVideoGameRatingId({id:t.id})))},onOpen:()=>{c(s?s.id:null,"focus")},data:r,selectedValue:s,validation:l&&(0,z.jsx)(zm.Z,{text:l,theme:"warning"})})]}):null},Pne=()=>{const{track:e}=vi(),t=U(),i=(0,p.I0)(),n=(0,p.v9)(fB),s=(0,p.v9)(VB),{isUnisex:r}=(0,p.v9)(oB),a=(0,p.v9)(zB);return null!=a&&a.unisexCatalogId?(0,z.jsx)(gt.Z,{children:(0,z.jsx)("div",{className:"item-upload__field",children:(0,z.jsx)(BZ.F,{name:KL.Unisex,text:t("item_upload.catalog.is_unisex"),checked:r,onClick:()=>{e(en({state:"focus",screen:s,tempUuid:n,target:JL.CategoryUnisex,value:(!r).toString()})),i(mE.toggleIsUnisex())},aria:{"aria-label":t("item_upload.catalog.is_unisex")}})})}):null},zne=()=>{const e=(0,p.v9)(fB),t=(0,p.v9)(lB),i=(0,p.v9)(jq),n=U();return(0,z.jsxs)(g.Z,{children:[(0,z.jsx)(Fie,{tempUuid:e}),i===Ne.Success&&t.map((e=>function(e){switch(e){case eE.Unisex:return(0,z.jsx)(Pne,{},eE.Unisex);case eE.Isbn:return(0,z.jsx)(bne,{},eE.Isbn);case eE.Author:return(0,z.jsx)(Zne,{},eE.Author);case eE.BookTitle:return(0,z.jsx)(kne,{},eE.BookTitle);case eE.Brand:return(0,z.jsx)(Bie,{},eE.Brand);case eE.VideoGameRating:return(0,z.jsx)(wne,{},eE.VideoGameRating);case eE.Size:return(0,z.jsx)(Kie,{},eE.Size);case eE.Measurements:return(0,z.jsx)(cne,{},eE.Measurements);case eE.Status:return(0,z.jsx)(tne,{},eE.Status);case eE.Color:return(0,z.jsx)(ane,{},eE.Color);default:return Object.values($L).includes(e)?(0,z.jsx)("div",{children:(0,z.jsx)(Sie,{code:e})},e):null}}(e))),i===Ne.Pending&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)("div",{className:"u-ui-padding-x3-large u-flexbox u-justify-content-center",children:(0,z.jsx)(Dp.Z,{size:Dp.Z.Size.XLarge,testId:"dynamic-attributes-loader"})})]}),i===Ne.Failure&&(0,z.jsx)(bJ,{body:n("errors.generic")})]})};let Tne,Fne,Nne,Lne,Ene,One;!function(e){e.BankAccount="BankAccount",e.Transaction="Transaction",e.UserLoginTwoFactorAuth="UserLoginTwoFactorAuth",e.PhoneNumber="PhoneNumber",e.PhoneNumberChange="PhoneNumberChange"}(Tne||(Tne={})),function(e){e.Front="front",e.Back="back"}(Fne||(Fne={})),function(e){e.Unverified="unverified",e.Verifying="verifying",e.Verified="verified",e.VerificationFailed="verification_failed",e.VerificationBlocked="verification_blocked"}(Nne||(Nne={})),function(e){e.FirstName="firstName",e.LastName="lastName",e.Birthdate="birthdate",e.SsnSerial="ssnSerial",e.PersonalIdNumber="personalIdNumber",e.IdentityDocument="identityDocument",e.SupportingDocuments="supportingDocuments"}(Lne||(Lne={})),function(e){e.BankStatement="bank_statement",e.AddressProof="proof_of_residency"}(Ene||(Ene={})),function(e){e.DocumentUpload="document_upload_requirements",e.AddressProof="proof_of_address_requirements",e.BankStatement="bank_statement_requirements"}(One||(One={}));const Rne=e=>{let{show:t,buttonText:i,onUpload:n,onClose:s}=e;const r=Ql(),{track:a}=vi(),o=U("kyc_form.supporting_documents.bank_statement.education_modal"),l=U();(0,m.useEffect)((()=>{t&&a(Xi({screen:$t.KycBankStatementEducation}))}),[t,a]);const c=e=>{let{title:t,body:i}=e;return(0,z.jsx)(gt.Z,{title:t,body:i&&(0,z.jsx)(xt.Z,{html:!0,text:i,type:xt.Z.Type.Subtitle}),prefix:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XSmall}),(0,z.jsx)(ht.Z,{name:"checkmark",size:ht.Z.Size.Small})]})})};return(0,z.jsxs)(cp.Z,{show:t,children:[(0,z.jsx)(Pm.Z,{right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,onClick:s,deprecatedIconName:"x",testId:"kyc_bank_statement_education_close",inline:!0,aria:{"aria-label":l("kyc_form.a11y.supporting_documents.bank_statement.close_button")}})}),(0,z.jsxs)("div",{className:"modal-contained-content",children:[(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center",children:(0,z.jsx)(Kl.U,{src:"".concat(Be.Fv,r?"/assets/kyc/dark/bank_statement_education.svg":"/assets/kyc/bank_statement_education.svg"),size:Kl.U.Size.X4Large,alt:""})}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{text:o("title"),type:xt.Z.Type.Heading,width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center})}),c({title:o("accepted_types.title"),body:o("accepted_types.body")}),c({title:o("bank_identity_visible.title")}),c({title:o("bank_account_visible.title"),body:o("bank_account_visible.body")}),c({title:o("holder_name_visible.title"),body:o("holder_name_visible.body")}),c({title:o("issuing_date_visible.title"),body:o("issuing_date_visible.body")})]}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(ic.I,{text:i||o("buttons.upload"),styling:ic.I.Styling.Filled,onClick:n})})]})},Dne=e=>{let{show:t,buttonText:i,onUpload:n,onClose:s}=e;const r=Ql(),a=U("kyc_form.supporting_documents.address_proof"),o=U(),{track:l}=vi();(0,m.useEffect)((()=>{t&&l(Xi({screen:$t.KycAddressProofEducation}))}),[t,l]);const c=()=>(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XSmall}),(0,z.jsx)(ht.Z,{name:"checkmark",size:ht.Z.Size.Small})]}),d=e=>{let{title:t,body:i}=e;return(0,z.jsx)(gt.Z,{title:t,body:i&&(0,z.jsx)(xt.Z,{html:!0,text:i,type:xt.Z.Type.Subtitle}),prefix:c()})},u=e=>(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,html:!0,text:e})]});return(0,z.jsxs)(cp.Z,{show:t,children:[(0,z.jsx)(Pm.Z,{right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,onClick:s,deprecatedIconName:"x",testId:"kyc_address_proof_education_close",inline:!0,aria:{"aria-label":o("kyc_form.a11y.supporting_documents.bank_statement.close_button")}})}),(0,z.jsxs)("div",{className:"modal-contained-content",children:[(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center",children:(0,z.jsx)(Kl.U,{src:"".concat(Be.Fv,r?"/assets/kyc/dark/proof_adress.svg":"/assets/kyc/proof_adress.svg"),size:Kl.U.Size.X4Large,alt:""})}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{text:a("title"),type:xt.Z.Type.Heading,width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center})}),(0,z.jsx)(gt.Z,{title:a("document_description.title"),body:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:a("document_description.issued_within_three_months.title")}),u(a("document_description.issued_within_three_months.body")),(0,z.jsx)(x.Z,{}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:a("document_description.issued_within_twelve_months.title")}),u(a("document_description.issued_within_twelve_months.body"))]}),prefix:c()}),d({title:a("name_description.title"),body:a("name_description.body")}),d({title:a("date_of_issuing_description.title"),body:a("date_of_issuing_description.body")}),d({title:a("billing_address_description.title"),body:a("billing_address_description.body")})]}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(ic.I,{text:i||a("buttons.upload"),styling:ic.I.Styling.Filled,onClick:n})})]})},Ane=e=>{let{status:t,paymentsIdentityConfiguration:i,onSubmitClick:n}=e;const{track:s}=vi(),r=Ql(),a=U("kyc_form.status"),o=U("kyc_form.identity_document"),{relativeUrl:l,replaceHistoryState:c}=xc(),{photoTips:d,isAddressProofOpen:u,isBankStatementOpen:p,isDocumentUploadOpen:h,setIsBankStatementOpen:f,setIsAddressProofOpen:y,setIsDocumentUploadOpen:v,handleUrlHash:_}=(e=>{let{status:t}=e;const[i,n]=(0,m.useState)([]),[s,r]=(0,m.useState)(!1),[a,o]=(0,m.useState)(!1),[l,c]=(0,m.useState)(!1),{urlHash:d}=xc(),u=e=>{switch(e){case One.AddressProof:r(!0);break;case One.BankStatement:o(!0);break;case One.DocumentUpload:c(!0)}},p=(0,m.useCallback)((()=>{if(!d)return;const e=d.split("#").pop();e&&u(e)}),[d]),g=(0,m.useCallback)((()=>t===Nne.Unverified||t===Nne.Verified||t===Nne.Verifying),[t]);return(0,m.useEffect)((()=>{(async()=>{if(i.length>0)return;const e=await(0,Fe.Uel)(gU.U.IdentityDocument);"errors"in e||n(Ph(e.photo_tips))})()}),[i.length]),(0,m.useEffect)((()=>{const e=e=>{const t=e.newURL.split("#").pop();t&&!g()&&u(t)};return window.addEventListener("hashchange",e),()=>{window.removeEventListener("hashchange",e)}}),[g]),(0,m.useEffect)((()=>{g()||p()}),[p,g]),{photoTips:i,isAddressProofOpen:s,isBankStatementOpen:a,isDocumentUploadOpen:l,setIsBankStatementOpen:o,setIsAddressProofOpen:r,setIsDocumentUploadOpen:c,handleUrlHash:p}})({status:t});function b(){t===Nne.VerificationFailed&&s(Di({target:qm.KycTryAgain})),n()}function j(e){return()=>{s(Di({target:qm.KycContactSupport})),(0,ls.ru)(e)}}function S(e){return(0,z.jsx)(ic.I,{text:a("verification_failed.buttons.contact_support"),inline:!0,onClick:j(e)})}function Z(){return(0,z.jsx)(_p,{type:bp.KycVerificationProblems,accessChannel:Be.Si.ProductLink,render:S})}function I(e){return(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,text:e,inline:!0,theme:"primary",onClick:b})}function C(e,t,n){const s=((null==i?void 0:i.verificationFailures)||[]).length>1;return(0,z.jsxs)("div",{className:"u-flexbox",children:[s&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:"".concat(t+1,".")}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical})]}),(0,z.jsx)("span",{onClick:n?_:void 0,children:(0,z.jsx)(xt.Z,{width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Left,text:e,html:!0})})]},t)}function k(){if(null===i)return null;const{verificationFailures:e}=i,t=((null==i?void 0:i.verificationFailures)||[]).length>1?yie.Z.Size.Default:yie.Z.Size.Tight;return e?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:a("reason_title"),type:xt.Z.Type.Title}),(0,z.jsx)(yie.Z,{size:t,children:e.map(((e,t)=>C(e.reason,t,!1)))}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:a("reason_action"),type:xt.Z.Type.Title}),(0,z.jsx)(yie.Z,{size:t,children:e.map(((e,t)=>C(e.action,t,e.action.includes("<a"))))})]}):null}function w(){c("".concat(l,"#"))}(0,m.useEffect)((()=>{t!==Nne.Unverified&&s(Xi({screen:$t.KycStatus,details:t}))}),[s,t]);const P={[Nne.Verifying]:{iconName:"clock",title:a("verifying.title"),body:(0,z.jsx)(xt.Z,{text:a("verifying.body"),width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,type:xt.Z.Type.Subtitle}),actions:I(a("verifying.buttons.got_it"))},[Nne.Verified]:{iconName:"check",title:a("verified.title"),body:(0,z.jsx)(xt.Z,{text:a("verified.body"),width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,type:xt.Z.Type.Subtitle}),actions:I(a("verified.buttons.got_it"))},[Nne.VerificationFailed]:null===i?null:!i.verificationFailures||i.verificationFailures.length<=0?{iconName:"cross",title:i.statusMessage,body:(0,z.jsx)(xt.Z,{text:i.statusNote,width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,type:xt.Z.Type.Subtitle}),actions:(0,z.jsxs)(z.Fragment,{children:[I(a("verification_failed.buttons.try_again")),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),Z()]})}:{iconName:"cross",title:i.statusMessage,body:k(),actions:(0,z.jsxs)(z.Fragment,{children:[I(a("verification_failed.buttons.try_again")),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),Z()]})},[Nne.VerificationBlocked]:null===i?null:!i.verificationFailures||i.verificationFailures.length<=0?{iconName:"cross",title:i.statusMessage,body:(0,z.jsx)(xt.Z,{text:i.statusNote,width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,type:xt.Z.Type.Subtitle}),actions:Z()}:{iconName:"cross",title:i.statusMessage,body:k(),actions:Z()}}[t];if(!P)return null;const{iconName:T,title:F,body:N,actions:L}=P;return(0,z.jsxs)("div",{className:"medium-container",children:[(0,z.jsx)(g.Z,{children:(0,z.jsx)("div",{className:"payments-identity-status__container",children:(0,z.jsxs)("div",{className:"payments-identity-status__content",children:[(0,z.jsx)(Kl.U,{src:function(e){return"check"===e?r?"/assets/check-dark.svg":"/assets/check.svg":r?"/assets/kyc/dark/".concat(e,".svg"):"/assets/kyc/".concat(e,".svg")}(T),size:Kl.U.Size.X2Large,alt:""}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{text:F,width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,type:xt.Z.Type.Heading})}),(0,z.jsx)(gt.Z,{children:N}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),L]})})}),function(){function e(){f(!1),w()}return(0,z.jsx)(Rne,{show:p,buttonText:a("got_it"),onClose:e,onUpload:e})}(),function(){function e(){y(!1),w()}return(0,z.jsx)(Dne,{show:u,buttonText:a("got_it"),onClose:e,onUpload:e})}(),(0,z.jsx)(dQ,{isOpen:h,photoTips:d,nextButtonText:o("photo_tips.next_tip"),backButtonText:o("photo_tips.previous_tip"),handleClose:function(){v(!1),w()}})]})},Mne=e=>{let{show:t,onCancel:i}=e;const n=XY(Me.mYc),s=U("kyc_form.discard_changes_modal"),{track:r}=vi();return(0,m.useEffect)((()=>{t&&r(Xi({screen:$t.KycClosingModal}))}),[t,r]),(0,z.jsx)(cp.Z,{show:t,title:s("title"),body:s("body"),actions:[{text:s("buttons.discard_changes"),callback:()=>r(Di({target:qm.KycDiscardChanges})),url:n,style:cp.Z.ActionStyling.Filled},{text:s("buttons.cancel"),callback:i,style:cp.Z.ActionStyling.Flat}]})},Une=e=>{let{show:t,onSubmit:i}=e;const n=U(),[s,r]=(0,m.useState)(t);return(0,m.useEffect)((()=>{r(t)}),[t]),(0,z.jsx)(cp.Z,{show:s,title:n("errors.modal.title"),body:n("errors.modal.body"),actions:[{text:n("actions.retry"),callback:function(){i(),r(!1)},style:cp.Z.ActionStyling.Filled},{text:n("actions.close"),callback:function(){r(!1)},style:cp.Z.ActionStyling.Flat}]})};let Bne,qne,Vne,Hne,Gne,Wne,Xne,Yne,Kne,Jne,Qne,$ne;!function(e){e.BusinessDetails="business-details",e.BusinessRepresentative="business-representative",e.BusinessAddress="business-address",e.BusinessProfile="business-profile"}(Bne||(Bne={})),function(e){e.BusinessDetails="business-details",e.BusinessRepresentative="business-representative",e.BusinessProfile="business-profile"}(qne||(qne={})),function(e){e.LegalCode="businessDetails.legalCode",e.LegalName="businessDetails.legalName",e.RegistrarName="businessDetails.registrarName",e.EntityType="businessDetails.entityType",e.Vat="businessDetails.vat",e.IsVatDisabled="businessDetails.isVatDisabled"}(Vne||(Vne={})),function(e){e.Country="addresses.businessAddress.countryId",e.AddressLine1="addresses.businessAddress.line1",e.AddressLine2="addresses.businessAddress.line2",e.PostalCode="addresses.businessAddress.postalCode",e.City="addresses.businessAddress.city",e.FullPostalCode="addresses.businessAddress.fullPostalCode",e.IsBusinessEqualToPersonalAddress="addresses.isBusinessEqualToPersonalAddress"}(Hne||(Hne={})),function(e){e.FirstNames="businessRepresentative.firstNames",e.LastName="businessRepresentative.lastName",e.Birthday="businessRepresentative.birthday",e.Nationality="businessRepresentative.nationality",e.Country="businessRepresentative.country",e.Email="businessRepresentative.email",e.Ubos="businessRepresentative.ubos",e.IsSameLegalAddress="businessRepresentative.isSameLegalRepresentativeAddress",e.RepresentativeCountry="businessRepresentative.legalRepresentativeAddress.countryId",e.RepresentativeAddressLine1="businessRepresentative.legalRepresentativeAddress.line1",e.RepresentativeAddressLine2="businessRepresentative.legalRepresentativeAddress.line2",e.RepresentativePostalCode="businessRepresentative.legalRepresentativeAddress.postalCode",e.RepresentativeFullPostalCode="businessRepresentative.legalRepresentativeAddress.fullPostalCode",e.RepresentativeCity="businessRepresentative.legalRepresentativeAddress.city"}(Gne||(Gne={})),Bne.BusinessDetails,Bne.BusinessRepresentative,Bne.BusinessAddress,Bne.BusinessProfile,qne.BusinessDetails,qne.BusinessRepresentative,qne.BusinessProfile,function(e){e.Registered="registered",e.WalletConversionInProgress="conversion_in_progress",e.Completed="completed"}(Wne||(Wne={})),function(e){e.Front="front",e.Back="back"}(Xne||(Xne={})),function(e){e.Pdf="application/pdf",e.PngImage="image/png",e.JpegImage="image/jpeg"}(Yne||(Yne={})),function(e){e.Idle="idle",e.Pending="pending",e.Failed="failed",e.Completed="completed"}(Kne||(Kne={})),function(e){e.SoleTrader="sole_trader",e.LegalBusiness="legal_business",e.Organization="organization"}(Jne||(Jne={})),Jne.SoleTrader,Jne.LegalBusiness,Jne.Organization,function(e){e.IdentityDocuments="identity_documents",e.SupportingDocuments="supporting_documents"}(Qne||(Qne={})),function(e){e.IdentityDocument="identityDocument",e.IdentityDocumentExpiryDate="identityDocumentExpiryDate",e.SupportingDocuments="supportingDocuments"}($ne||($ne={}));const ese=e=>{let{isFormDisabled:t,isBusiness:i}=e;const n=U("kyc_form.general"),s=(0,p.v9)(_G),r=(0,p.v9)(W),{control:a,register:o,formState:{errors:l}}=(0,th.Gc)(),c=fh(l,"kyc_form.general");function d(e){return null==s?void 0:s.includes(e)}const u=d(wE.FirstName),m=d(wE.LastName),h=d(wE.Birthdate),f=d(wE.SsnSerial),y=d(wE.PersonalIdNumber);return u||m||h||f||y?(0,z.jsxs)(z.Fragment,{children:[function(){var e;const t=null==r||null===(e=r.business_account)||void 0===e?void 0:e.entity_type;if(!i||!t)return null;const s=(e=>{switch(e){case Jne.SoleTrader:return n("business.headers.sole_trader");case Jne.Organization:return n("business.headers.organisation");default:return n("business.headers.legal_business")}})(t);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:s}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})]})}(),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:n("title")}),disabled:t}),(0,z.jsx)("span",{"data-testid":"info-note",children:(0,z.jsx)(gt.Z,{children:(0,z.jsx)(g.Z,{children:(0,z.jsx)("div",{className:"u-overflow-hidden",children:(0,z.jsx)(gt.Z,{body:(0,z.jsx)(xt.Z,{text:n("info_banner.body"),html:!0}),prefix:(0,z.jsx)(ht.Z,{name:"info-circle-filled",color:ht.Z.Color.Primary,aria:{"aria-hidden":"true"}})})})})})}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,body:(0,z.jsxs)(z.Fragment,{children:[u?(0,z.jsx)(fb.M,{...o(Lne.FirstName,{required:!0}),styling:fb.M.Styling.Wide,maxLength:50,title:n("first_name.title"),placeholder:n("first_name.placeholder"),validation:hh(c(Lne.FirstName)),uncontrolled:!0}):null,m?(0,z.jsx)(fb.M,{...o(Lne.LastName,{required:!0}),styling:fb.M.Styling.Wide,maxLength:50,title:n("last_name.title"),placeholder:n("last_name.placeholder"),validation:hh(c(Lne.LastName)),uncontrolled:!0}):null,h?(0,z.jsx)(th.Qr,{render:e=>{let{field:t}=e;const i=(0,v.omit)(t,"ref");return(0,z.jsx)(dI,{...i,styling:"wide",title:n("birthdate.title"),validation:hh(c(Lne.Birthdate))})},name:Lne.Birthdate,control:a,rules:{required:!0}}):null,f?(0,z.jsx)(fb.M,{...o(Lne.SsnSerial,{required:!0}),styling:fb.M.Styling.Wide,maxLength:4,title:n("ssn_serial.title"),placeholder:n("ssn_serial.placeholder"),validation:hh(c(Lne.SsnSerial)),uncontrolled:!0}):null,y?(0,z.jsx)(fb.M,{...o(Lne.PersonalIdNumber,{required:!0}),styling:fb.M.Styling.Wide,maxLength:50,title:n("personal_id_number.title"),placeholder:n("personal_id_number.placeholder"),validation:hh(c(Lne.PersonalIdNumber)),uncontrolled:!0}):null]}),disabled:t})]}):null},tse=e=>{let{title:t,show:i,address:n,onAddressChange:s,onCancel:r}=e;const{track:a}=vi();return(0,z.jsxs)(cp.Z,{show:i,testId:"address-modal",children:[(0,z.jsx)(gt.Z,{children:(0,z.jsx)("div",{className:"u-text-center",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,alignment:xt.Z.Alignment.Center,text:t})})}),(0,z.jsx)(h.Z,{}),(0,z.jsx)("div",{className:"modal-contained-content",children:(0,z.jsx)(_I,{address:n,onChange:e=>s(e),onCancel:()=>r(),onSubmitClick:()=>a(Di({target:qm.KycSaveAddress}))})})]})},ise=e=>{let{title:t,modalTitle:i,isDisabled:n,address:s,error:r,onAddressChange:a}=e;const o=U("kyc_form.address"),{track:l}=vi(),[c,d]=(0,m.useState)(!1),u=()=>{d(!0),l(Xi({screen:$t.KycAddressModal}))},p=()=>r?(0,z.jsx)(zm.Z,{text:r,theme:"warning"}):null;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,body:t,disabled:n}),s?s?(0,z.jsx)(A_,{styling:gt.Z.Styling.Wide,type:gt.Z.Type.Navigating,address:s,onClick:u,suffix:!n&&(0,z.jsx)(ht.Z,{name:"pencil",color:ht.Z.Color.GreyscaleLevel3,aria:{"aria-hidden":"true"}}),isDisabled:n,validation:p()}):null:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,type:gt.Z.Type.Navigating,title:o("add"),suffix:(0,z.jsx)(ht.Z,{name:"plus",aria:{"aria-hidden":"true"}}),onClick:u,disabled:n,validation:p()}),(0,z.jsx)(tse,{title:i,address:s,show:c,onAddressChange:e=>{d(!1),a(e)},onCancel:()=>d(!1)})]})},nse=()=>{const e=U("kyc_form"),t=(0,p.I0)(),i=(0,p.v9)(yG),n=(0,p.v9)(xG),s=(0,p.v9)(vG),r=(0,p.v9)((e=>((e,t)=>lG(e).generalErrors.byName[t]||void 0)(e,wE.Address))),a=i===aG.Business;return(0,z.jsx)(ise,{title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:e(a?"business.address.title":"address.title")}),modalTitle:e(a?"business.address.modal.title":"address.modal.title"),address:n,isDisabled:s,onAddressChange:e=>t(TE.setAddress({address:e})),error:r})},sse=e=>{let{show:t,onConfirm:i,onCancel:n}=e;const s=U("kyc_form.change_document_type_confirm_modal");return(0,z.jsx)(cp.Z,{show:t,title:s("title"),body:s("body"),actions:[{text:s("actions.confirm"),style:cp.Z.ActionStyling.Filled,callback:i},{text:s("actions.cancel"),style:cp.Z.ActionStyling.Flat,callback:n}]})},rse=e=>{let{file:t,removeMetadata:i}=e;return new Promise(((e,n)=>{const s=new FileReader;s.readAsDataURL(t),s.onload=()=>{var t;let n=null===(t=s.result)||void 0===t?void 0:t.toString();var r;i&&(n=null===(r=n)||void 0===r?void 0:r.replace(/^.+(;base64),/,"")),e(n)},s.onerror=e=>n(e)}))},ase=e=>{let{supportedTypes:t,maximumFileSize:i,title:n,onChange:s,onError:r}=e;const a=U(),o=U("kyc_form.a11y.identity_document"),l=(0,m.useRef)(null);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(ic.I,{size:ic.I.Size.Medium,onClick:()=>{var e;null===(e=l.current)||void 0===e||e.click()},deprecatedIcon:(0,z.jsx)(ht.Z,{name:"plus",color:ht.Z.Color.Primary,size:ht.Z.Size.Small,aria:{"aria-hidden":"true"}}),title:n||o("upload_document"),inline:!0}),(0,z.jsx)("input",{ref:l,"data-testid":"file-uploader",disabled:!t,onChange:e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];n&&(n.size>i?r(a("errors.max_file_size",{size:i/1024/1024})):s(n))},onClick:e=>{let{target:t}=e;t.value=""},className:"u-hidden",type:"file",accept:t})]})},ose=["application/pdf"],lse=e=>{var t;let{configuration:i,onError:n}=e;const s=U("kyc_form.a11y.identity_document"),{clearErrors:r,setValue:a,watch:o,register:l}=(0,th.Gc)(),c=(0,m.useMemo)((()=>({type:i.type,files:i.files.map((e=>({identifier:e.identifier,file:null,mediaType:null,body:null})))})),[i]),d=o(Lne.IdentityDocument,c),u=e=>e.files.map((e=>e.body)).filter((e=>!!e)).length>0,p=(0,m.useCallback)((e=>e.files.map((e=>e.body)).filter((e=>!!e)).length===(null==i?void 0:i.files.length)),[i]);(0,m.useEffect)((()=>{i&&(l(Lne.IdentityDocument,{validate:{required:u,containsAllRequiredFiles:p}}),a(Lne.IdentityDocument,{type:i.type,files:i.files.map((e=>({identifier:e.identifier})))}),r(Lne.IdentityDocument))}),[l,i,p,r,a,c]);const h=e=>async t=>{if(!t)return;const n=await(async(e,t)=>{try{const i=await rse({file:e,removeMetadata:!0});return{file:e,identifier:t,mediaType:e.type,body:i||null}}catch(e){return null}})(t,e),s={type:i.type,files:d.files.map((t=>t.identifier===e&&n?n:t))};r(Lne.IdentityDocument),a(Lne.IdentityDocument,s)},f=e=>{n(e)},y=e=>{const t=(n=e.identifier,(null===(s=i.files.filter((e=>e.identifier===n))[0])||void 0===s?void 0:s.uploadNote)||null);var n,s,r;return(0,z.jsxs)("div",{className:"u-text-center u-ui-margin-large",children:[(0,z.jsx)(ase,{maximumFileSize:i.maximumFileSize,supportedTypes:(null==i||null===(r=i.mediaTypes)||void 0===r?void 0:r.filter((e=>!ose.includes(e))).join(","))||void 0,onChange:h(e.identifier),title:t,onError:f}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),t&&(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:t,alignment:xt.Z.Alignment.Center})]})},v=e=>{if(!e.body||!e.mediaType)return null;const t=(e=>{let{base64String:t,mediaType:i}=e;return"data:".concat(i,";base64,").concat(t)})({base64String:e.body,mediaType:e.mediaType});return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Kl.U,{src:t,size:Kl.U.Size.X4Large,styling:Kl.U.Styling.Rounded,alt:s("uploaded_document")}),(0,z.jsx)("div",{className:"identity-document__document-delete-button",children:(0,z.jsx)(ic.I,{testId:"identity-document-delete-button-".concat(e.identifier),deprecatedIcon:(0,z.jsx)(ht.Z,{name:"x",color:ht.Z.Color.GreyscaleLevel1,size:ht.Z.Size.Small,aria:{"aria-label":s("buttons.delete")}}),size:ic.I.Size.Small,inverse:!0,styling:ic.I.Styling.Filled,inline:!0,onClick:(n=e.identifier,()=>{const e={type:i.type,files:d.files.map((e=>e.identifier===n?{...e,body:null}:e))};a(Lne.IdentityDocument,e)})})})]});var n};return(0,z.jsx)("div",{className:"identity-document__uploader-container u-flex-wrap",children:null==d||null===(t=d.files)||void 0===t?void 0:t.map(((e,t)=>(0,z.jsx)("div",{className:"u-ui-margin-right-large u-ui-margin-bottom-large",children:(0,z.jsx)(g.Z,{children:(0,z.jsx)("div",{className:"identity-document__uploader-file-content u-overflow-hidden",children:e.body?v(e):y(e)})})},t)))})},cse=e=>{let{options:t,selectedConfiguration:i,onChange:n}=e;const s=e=>()=>{n(e)};return(0,z.jsx)(z.Fragment,{children:t.map((e=>{const t=(null==i?void 0:i.type)===e.type,n=!i;return(0,z.jsxs)(m.Fragment,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,title:e.title,onClick:s(e),disabled:n,type:gt.Z.Type.Navigating,suffix:(0,z.jsx)(qx.J,{name:"document_type",value:e.type,checked:t})}),(0,z.jsx)(h.Z,{})]},e.type)}))})},dse=e=>{let{isFormDisabled:t,identityDocumentConfiguration:i}=e;const n=U("kyc_form.identity_document"),{track:s}=vi(),{setError:r,getValues:a,formState:{errors:o}}=(0,th.Gc)(),l=fh(o,"kyc_form"),[c,d]=(0,m.useState)(!1),[u,p]=(0,m.useState)([]),[g,h]=(0,m.useState)(!1),[f,y]=(0,m.useState)((null==i?void 0:i.options[0])||null),[v,_]=(0,m.useState)(null);return i?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:n("title")}),disabled:t}),i?(0,z.jsx)(cse,{options:i.options,selectedConfiguration:f,onChange:e=>{if((a(Lne.IdentityDocument)||null).files.map((e=>e.body)).filter((e=>!!e)).length)return d(!0),void _(e);y(e)}}):null,f?(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Wide,validation:hh(l(Lne.IdentityDocument)),children:[(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,body:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:n("upload_document.title")}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)("span",{onClick:()=>{(async()=>{if(u.length>0)return;const e=await(0,Fe.Uel)(gU.U.IdentityDocument);"errors"in e||p(Ph(e.photo_tips))})(),h(!0),s(Xi({screen:$t.DocumentUploadTips}))},children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:"".concat(n("upload_document.upload_tips")),width:xt.Z.Width.Parent,format:!0,inline:!0,clickable:!0})})]}),disabled:t}),(0,z.jsx)(dQ,{isOpen:g,photoTips:u,nextButtonText:n("photo_tips.next_tip"),backButtonText:n("photo_tips.previous_tip"),handleClose:()=>{h(!1)}})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(lse,{configuration:f,onError:e=>{r(Lne.IdentityDocument,{type:"manual",message:e})}})]}):null,(0,z.jsx)(sse,{show:c,onConfirm:()=>{y(v),d(!1)},onCancel:()=>{_(null),d(!1)}})]}):null},use=e=>{let{show:t,iconPath:i,title:n,description:s,closeButtonText:r,onClose:a}=e;return(0,z.jsx)(cp.Z,{show:t,children:(0,z.jsxs)("div",{className:"u-ui-padding-vertical-large",children:[(0,z.jsx)(gt.Z,{children:(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center",children:(0,z.jsx)(Kl.U,{src:i,size:Kl.U.Size.X2Large,alt:""})})}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{text:n,type:xt.Z.Type.Heading,width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center})}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{text:s,type:xt.Z.Type.Body})}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(ic.I,{text:r,styling:ic.I.Styling.Filled,onClick:a})})]})})};let mse,pse;var gse;!function(e){e.FirstName="firstName",e.LastName="lastName",e.Nationality="nationality",e.Birthday="birthday",e.BirthplaceCity="birthplaceCity",e.BirthplaceCountry="birthplaceCountry",e.Address="address"}(mse||(mse={})),(gse=pse||(pse={})).CountryId="countryId",gse.City="city",gse.Line1="line1",gse.Line2="line2",gse.PostalCode="postalCode";const hse=e=>{let{address:t,onSubmit:i,onCancel:n}=e;const s=U("kyc_form.business.ubo.address.modal"),r=t||void 0,{register:a,getValues:o,setError:l,setValue:c,handleSubmit:d,formState:{errors:u,isSubmitting:p}}=(0,th.cI)({defaultValues:r}),g=function(){const e=U();return function(t){const i=e("kyc_form.business.ubo.address.modal.fields.".concat((0,v.snakeCase)(t),".title"));return{value:!0,message:e("errors.blank",{field:i})}}}(),h=fh(u),[f,y]=(0,m.useState)(Ne.Idle),[_,b]=(0,m.useState)([]),j=f===Ne.Success;return(0,m.useEffect)((()=>{!async function(){var e;y(Ne.Pending);const t=await(0,Fe.ox$)();if("errors"in t)return;const i=gb(t.countries);c("countryId",null===(e=i[0])||void 0===e?void 0:e.id),b(i),y(Ne.Success)}()}),[c]),f!==Ne.Success?(0,z.jsx)(Mp,{styling:Mp.Styling.Wide}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{children:(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),children:[(0,z.jsx)(yb.R,{...a(pse.CountryId,{required:g(pse.CountryId)}),options:_.map((e=>({value:e.id,label:e.title}))),styling:yb.R.Styling.Tight,title:s("fields.country_id.title"),validation:hh(h(pse.CountryId)),uncontrolled:!0}),(0,z.jsx)(fb.M,{...a(pse.City,{required:g(pse.City)}),styling:fb.M.Styling.Tight,title:s("fields.city.title"),placeholder:s("fields.city.placeholder"),validation:hh(h(pse.City)),uncontrolled:!0}),(0,z.jsx)(fb.M,{...a(pse.Line1,{required:g(pse.Line1)}),styling:fb.M.Styling.Tight,title:s("fields.line_1.title"),placeholder:s("fields.line_1.placeholder"),validation:hh(h(pse.Line1)),uncontrolled:!0}),(0,z.jsx)(fb.M,{...a(pse.Line2),styling:fb.M.Styling.Tight,title:s("fields.line_2.title"),placeholder:s("fields.line_2.placeholder"),validation:hh(h(pse.Line2)),uncontrolled:!0}),(0,z.jsx)(fb.M,{...a(pse.PostalCode,{required:g(pse.PostalCode)}),styling:fb.M.Styling.Tight,title:s("fields.postal_code.title"),placeholder:s("fields.postal_code.placeholder"),validation:hh(h(pse.PostalCode)),uncontrolled:!0})]})}),(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,disabled:!j||p,isLoading:p,text:s("buttons.continue"),theme:"primary",onClick:d((async function(){const e=o(),t={line1:e.line1,line2:e.line2,city:e.city,postal_code:e.postalCode,country_id:e.countryId},n=await(0,Fe.LyY)(t);"errors"in n?n.errors.forEach((e=>{const t=(0,v.camelCase)(e.field);l(t,{type:"manual",message:e.value})})):i(e)}))}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,disabled:p,text:s("buttons.cancel"),onClick:n})]})]})},xse=e=>{let{show:t,address:i,onSubmit:n,onCancel:s}=e;const r=U("kyc_form.business.ubo.address.modal");return(0,z.jsx)(cp.Z,{show:t,children:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{children:(0,z.jsx)("div",{className:"u-text-center",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,alignment:xt.Z.Alignment.Center,text:r("title")})})}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(hse,{address:i,onSubmit:function(e){n(e)},onCancel:function(){s()}})]})})},fse=e=>{let{index:t,isFormDisabled:i}=e;const n=U(),s=U("kyc_form.business.ubo"),[r,a]=(0,m.useState)(!1),{register:o,getValues:l,control:c,formState:{errors:d}}=(0,th.Gc)(),u=fh(d),p="ubos[".concat(t,"].").concat(mse.Address),g=n("errors.blank",{field:s("address.title")});(0,m.useEffect)((()=>{o(p,{required:g})}),[p,o,g]);const h=l(p);function x(){a(!0)}function f(){a(!1)}function y(e){return t=>{e(t),f()}}return(0,z.jsxs)(z.Fragment,{children:[h?h?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,body:s("address.title")}),(0,z.jsx)(A_,{styling:gt.Z.Styling.Wide,type:gt.Z.Type.Navigating,showChevron:!0,address:h,onClick:x,validation:hh(u(p)),isDisabled:i})]}):null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:s("address.title")})}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,type:gt.Z.Type.Navigating,title:s("address.body"),onClick:x,suffix:(0,z.jsx)(ht.Z,{name:"plus",aria:{"aria-hidden":"true"}}),validation:hh(u(p)),disabled:i})]}),(0,z.jsx)(th.Qr,{control:c,name:p,defaultValue:null,render:e=>{let{field:{onChange:t}}=e;return function(e){return(0,z.jsx)(xse,{address:h,show:r,onSubmit:y(e),onCancel:f})}(t)}})]})},yse=e=>{let{isMinimal:t,index:i}=e;const n=U("kyc_form.business.ubo"),{register:s,control:r,formState:{errors:a}}=(0,th.Gc)(),o=fh(a),l=function(){const e=U();return function(t){const i=e("kyc_form.business.ubo.".concat((0,v.snakeCase)(t),".title"));return{value:!0,message:e("errors.blank",{field:i})}}}();function c(e){return t=>{e(t)}}return(0,z.jsxs)(z.Fragment,{children:[!t&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(fb.M,{...s("ubos[".concat(i,"].").concat(mse.FirstName),{required:l(mse.FirstName)}),styling:fb.M.Styling.Wide,title:n("first_name.title"),placeholder:n("first_name.placeholder"),validation:hh(o("ubos[".concat(i,"].").concat(mse.FirstName))),uncontrolled:!0}),(0,z.jsx)(fb.M,{...s("ubos[".concat(i,"].").concat(mse.LastName),{required:l(mse.LastName)}),styling:fb.M.Styling.Wide,title:n("last_name.title"),placeholder:n("last_name.placeholder"),validation:hh(o("ubos[".concat(i,"].").concat(mse.LastName))),uncontrolled:!0}),(0,z.jsx)(th.Qr,{render:e=>{let{field:t}=e;const s=(0,v.omit)(t,"ref");return(0,z.jsx)(dI,{...s,styling:"wide",title:n("birthday.title"),validation:hh(o("ubos[".concat(i,"].").concat(mse.Birthday)))})},name:"ubos[".concat(i,"].").concat(mse.Birthday),control:r,defaultValue:null,rules:{required:l(mse.Birthday)}})]}),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(fb.M,{...s("ubos[".concat(i,"].").concat(mse.BirthplaceCity),{required:l(mse.BirthplaceCity)}),styling:fb.M.Styling.Wide,title:n("birthplace_city.title"),placeholder:n("birthplace_city.placeholder"),validation:hh(o("ubos[".concat(i,"].").concat(mse.BirthplaceCity))),uncontrolled:!0}),(0,z.jsx)(th.Qr,{control:r,name:"ubos[".concat(i,"].").concat(mse.BirthplaceCountry),render:e=>{let{field:{onChange:t}}=e;return(0,z.jsx)(hI,{name:"ubos[".concat(i,"].").concat(mse.BirthplaceCountry),styling:yb.R.Styling.Wide,showSuggestedCountries:!0,title:n("birthplace_country.title"),placeholder:n("birthplace_country.placeholder"),validation:hh(o("ubos[".concat(i,"].").concat(mse.BirthplaceCountry))),onChange:c(t)})}}),(0,z.jsx)(th.Qr,{control:r,name:"ubos[".concat(i,"].").concat(mse.Nationality),render:e=>{let{field:{onChange:t}}=e;return(0,z.jsx)(hI,{name:"ubos[".concat(i,"].").concat(mse.Nationality),styling:yb.R.Styling.Wide,showSuggestedCountries:!0,title:n("nationality.title"),placeholder:n("nationality.placeholder"),validation:hh(o("ubos[".concat(i,"].").concat(mse.Nationality))),onChange:c(t)})}})]})]})},vse=e=>{let{isFormDisabled:t}=e;const i=U("kyc_form.business.ubo"),n=(0,p.v9)(SG),[s,r]=(0,m.useState)(!1),a=(0,p.I0)(),{control:o,setValue:l,clearErrors:c}=(0,th.Gc)(),{fields:d,append:u,remove:g}=(0,th.Dq)({control:o,name:"ubos"});(0,m.useEffect)((()=>{l("ubos",[{}]),c("ubos")}),[n,l,c]);const h=e=>()=>g(e);function f(){u({})}function y(){r(!1)}function v(e){return 4===d.length||e!==d.length-1?null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,theme:"transparent",suffix:(0,z.jsx)(ic.I,{size:ic.I.Size.Medium,deprecatedIcon:(0,z.jsx)(ht.Z,{name:"plus",color:ht.Z.Color.Primary,aria:{"aria-hidden":"true"}}),text:i("add"),onClick:f}),disabled:t})]})}return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:i("declaration.header")}),suffix:(0,z.jsx)(ic.I,{deprecatedIcon:(0,z.jsx)(ht.Z,{color:ht.Z.Color.GreyscaleLevel3,name:"info-circle",size:ht.Z.Size.Small,aria:{"aria-hidden":"true"}}),styling:ic.I.Styling.Flat,inline:!0,size:ic.I.Size.Small,onClick:function(){r(!0)}}),disabled:t}),(0,z.jsx)(gt.Z,{body:(0,z.jsx)(BZ.F,{text:i("declaration.type"),name:"fill_all_ubo",onClick:function(){a(TE.setIsLegalRepresentativeUbo({isLegalRepresentativeUbo:!n}))},checked:n}),disabled:t}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})]}),n?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:i("minimal.header")}),disabled:t}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,body:(0,z.jsx)(yse,{index:0,isMinimal:!0}),disabled:t})]}):d.map(((e,n)=>{return(0,z.jsxs)(m.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,theme:"transparent",prefix:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:i("list.".concat(n+1,"_ubo"))}),suffix:(s=n,0===s?null:(0,z.jsx)(ic.I,{size:ic.I.Size.Medium,theme:"warning",text:i("delete"),onClick:h(s)})),disabled:t}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:i("general.title")}),disabled:t}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,disabled:t,children:(0,z.jsx)(yse,{index:n,isMinimal:!1})}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(fse,{index:n,isFormDisabled:t}),v(n)]},e.id);var s})),function(){const e={title:i("information_modal.title"),description:i("information_modal.description"),closeButtonText:i("information_modal.buttons.got_it")};return(0,z.jsx)(use,{...e,show:s,iconPath:"/assets/kyc/lamp.svg",onClose:y})}()]})},_se=e=>{let{isFormDisabled:t}=e;const i=U("kyc_form.business.details"),n=(0,p.v9)(fG),s=(0,p.v9)(_G),r=(0,p.v9)(W);function a(e){return null==s?void 0:s.includes(e)}const o=a(wE.RegistrationNumber),l=a(wE.BusinessAddress),c=a(wE.Ubo);return l||o||c?(0,z.jsxs)(z.Fragment,{children:[function(){var e;const t=null==r||null===(e=r.business_account)||void 0===e?void 0:e.entity_type;if(!t)return null;const n=(e=>{switch(e){case Jne.SoleTrader:return i("headers.sole_trader");case Jne.Organization:return i("headers.organisation");default:return i("headers.legal_business")}})(t);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:n}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})]})}(),l?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:i("address")})}),(0,z.jsx)(A_,{styling:gt.Z.Styling.Wide,address:null==n?void 0:n.businessAddress,isDisabled:!0}),(0,z.jsx)(x.Z,{size:x.Z.Size.Regular}),(0,z.jsx)(xt.Z,{html:!0,text:i("address_note"),type:xt.Z.Type.Caption}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})]}):null,o?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,body:(0,z.jsx)(xt.Z,{theme:"muted",type:xt.Z.Type.Body,text:i("registration_number.header")})}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,body:(0,z.jsx)(fb.M,{name:wE.RegistrationNumber,styling:fb.M.Styling.Wide,title:i("registration_number.name"),value:null==n?void 0:n.registrationNumber,disabled:!0})}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})]}):null,c?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(vse,{isFormDisabled:t}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})]}):null]}):null},bse=e=>{let{name:t,acceptedFileTypes:i,value:n,title:s,validation:r,styling:a,disabled:o,translationPrefix:l,isInfoIconVisible:c,maximumFileSize:d,fileInputRef:u,inputInformationLink:p,onChange:g=v.noop,onButtonClick:h=null}=e;const x=U(),f=U(l),y=(0,m.useRef)(null),_=u||y;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{styling:a,disabled:o,title:(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column",children:[(0,z.jsx)("span",{children:s||f("title")}),c&&!n&&(0,z.jsx)(xt.Z,{html:!0,type:xt.Z.Type.Subtitle,text:f("what_it_is",p)})]}),suffix:(0,z.jsx)(ic.I,{text:f("buttons.".concat(n?"delete":"upload")),size:ic.I.Size.Small,theme:n?"warning":"primary",onClick:function(){var e;h?h(n?"delete":"upload"):n?g(null):null===(e=_.current)||void 0===e||e.click()}}),body:n?(0,z.jsx)(xt.Z,{type:xt.Z.Type.Body,text:Zc(n.name,40)}):null,validation:r}),(0,z.jsx)("input",{name:t,ref:_,onChange:function(e){var t;if(null===(t=e.target.files)||void 0===t||!t.length)return;const i=e.target.files[0];i.size>d?g(i,x("errors.max_file_size",{size:d/1024/1024})):g(i)},onClick:function(e){e.target.value=""},hidden:!0,type:"file",accept:i})]})},jse=e=>{let{fieldName:t,identifier:i,title:n,type:s,isDisabled:r,mediaTypes:a,maximumFileSize:o,info:l}=e;const c=U("kyc_form.supporting_documents"),d=U(),{control:u,register:p,setValue:g,setError:h,clearErrors:x,formState:{errors:f}}=(0,th.Gc)(),y=fh(f),[v,_]=(0,m.useState)(!1);(0,m.useEffect)((()=>{p("".concat(t,".identifier"),{required:!0}),p("".concat(t,".body"),{required:!0}),p("".concat(t,".mediaType"),{required:!0}),g("".concat(t,".identifier"),i)}),[p,g,t,i]);const b=async(e,i)=>{if(g("".concat(t,".file"),e),e){const i=await rse({file:e,removeMetadata:!0}),n=e.type;g("".concat(t,".body"),i),g("".concat(t,".mediaType"),n)}i?h(s,{type:"manual",message:i}):x(s),x("".concat(t,".file"))},j=()=>{_(!1)};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(th.Qr,{control:u,rules:{required:d("errors.blank",{field:n})},name:"".concat(t,".file"),defaultValue:null,render:e=>{let{field:{value:i,name:c}}=e;return(0,z.jsx)(bse,{disabled:r,acceptedFileTypes:null==a?void 0:a.join(","),styling:gt.Z.Styling.Wide,value:i,title:n,name:c,maximumFileSize:o,isInfoIconVisible:!!l,onChange:b,translationPrefix:"kyc_form.supporting_documents.upload",validation:hh((d="".concat(t,".file"),y(d)||y(s)))});var d}}),(()=>{if(!l)return null;const e={title:l.title,description:l.description,closeButtonText:c("information_modal.buttons.close")};return(0,z.jsx)(use,{...e,show:v,iconPath:"/assets/kyc/document.svg",onClose:j})})()]})},Sse=e=>{let{fieldName:t,identifier:i,title:n,type:s,isDisabled:r,mediaTypes:a,maximumFileSize:o}=e;const l=U(),c=(0,p.v9)(hG),{control:d,register:u,setValue:g,setError:h,clearErrors:x,formState:{errors:f}}=(0,th.Gc)(),y=fh(f),[v,_]=(0,m.useState)(!1),b=(0,m.useRef)(null);(0,m.useEffect)((()=>{u("".concat(t,".identifier"),{required:!0}),u("".concat(t,".body"),{required:!0}),u("".concat(t,".mediaType"),{required:!0}),g("".concat(t,".identifier"),i)}),[u,g,t,i]),(0,m.useEffect)((()=>{const e=c.find((e=>e.field===Ene.BankStatement));e&&h(s,{type:"manual",message:e.value})}),[c,s,h]);const j=async(e,i)=>{if(g("".concat(t,".file"),e),e){const i=await rse({file:e,removeMetadata:!0}),n=e.type;g("".concat(t,".body"),i),g("".concat(t,".mediaType"),n)}i?h(s,{type:"manual",message:i}):x(s),x("".concat(t,".file"))},S=()=>{_(!0)},Z=e=>{"upload"!==e?g("".concat(t,".file"),null):S()},I={information_link:e=>(0,z.jsx)("span",{onClick:S,children:(0,z.jsx)(xt.Z,{as:"a",clickable:!0,text:e,type:xt.Z.Type.Subtitle})})};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(th.Qr,{control:d,rules:{required:l("errors.blank",{field:n})},name:"".concat(t,".file"),defaultValue:null,render:e=>{let{field:{value:i,name:l}}=e;return(0,z.jsx)(bse,{disabled:r,acceptedFileTypes:null==a?void 0:a.join(","),styling:gt.Z.Styling.Wide,value:i,title:n,name:l,maximumFileSize:o,fileInputRef:b,isInfoIconVisible:!0,onChange:j,onButtonClick:Z,translationPrefix:"kyc_form.supporting_documents.upload",validation:hh((c="".concat(t,".file"),y(c)||y(s))),inputInformationLink:I});var c}}),(0,z.jsx)(Rne,{show:v,onClose:()=>{_(!1)},onUpload:()=>{var e;_(!1),null===(e=b.current)||void 0===e||e.click()}})]})},Zse=e=>{let{fieldName:t,identifier:i,title:n,type:s,isDisabled:r,mediaTypes:a,maximumFileSize:o}=e;const l=U(),{control:c,register:d,setValue:u,setError:g,clearErrors:h,formState:{errors:x}}=(0,th.Gc)(),f=(0,p.v9)(hG),y=fh(x),[v,_]=(0,m.useState)(!1),b=(0,m.useRef)(null);(0,m.useEffect)((()=>{d("".concat(t,".identifier"),{required:!0}),d("".concat(t,".body"),{required:!0}),d("".concat(t,".mediaType"),{required:!0}),u("".concat(t,".identifier"),i)}),[d,u,t,i]),(0,m.useEffect)((()=>{const e=f.find((e=>e.field===Ene.AddressProof));e&&g(s,{type:"manual",message:e.value})}),[f,s,g]);const j=async(e,i)=>{if(u("".concat(t,".file"),e),e){const i=await rse({file:e,removeMetadata:!0}),n=e.type;u("".concat(t,".body"),i),u("".concat(t,".mediaType"),n)}i?g(s,{type:"manual",message:i}):h(s),h("".concat(t,".file"))},S=()=>_(!0),Z=e=>{"upload"!==e?u("".concat(t,".file"),null):S()},I={information_link:e=>(0,z.jsx)("span",{onClick:S,children:(0,z.jsx)(xt.Z,{as:"a",clickable:!0,text:e,type:xt.Z.Type.Subtitle})})};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(th.Qr,{control:c,rules:{required:l("errors.blank",{field:n})},name:"".concat(t,".file"),defaultValue:null,render:e=>{let{field:{value:i,name:l}}=e;return(0,z.jsx)(bse,{disabled:r,acceptedFileTypes:null==a?void 0:a.join(","),styling:gt.Z.Styling.Wide,value:i,title:n,name:l,maximumFileSize:o,fileInputRef:b,isInfoIconVisible:!0,onChange:j,onButtonClick:Z,translationPrefix:"kyc_form.supporting_documents.upload",validation:hh((c="".concat(t,".file"),y(c)||y(s))),inputInformationLink:I});var c}}),(0,z.jsx)(Dne,{show:v,onClose:()=>_(!1),onUpload:()=>{var e;_(!1),null===(e=b.current)||void 0===e||e.click()}})]})},Ise=e=>{let{index:t,title:i,type:n,isDisabled:s,mediaTypes:r,maximumFileSize:a,info:o}=e;const{control:l,register:c,setValue:d}=(0,th.Gc)();(0,m.useEffect)((()=>{const e="".concat(Lne.SupportingDocuments,"[").concat(t,"]");c("".concat(e,".type"),{required:!0}),d("".concat(e,".type"),n)}),[c,d,t,n]);const{fields:u}=(0,th.Dq)({control:l,name:"".concat(Lne.SupportingDocuments,"[").concat(t,"].files")});return(0,z.jsx)(z.Fragment,{children:u.map(((e,l)=>{const c="".concat(Lne.SupportingDocuments,"[").concat(t,"].files[").concat(l,"]");return n===Ene.BankStatement?(0,z.jsx)(Sse,{fieldName:c,identifier:e.identifier,title:i,type:n,isDisabled:s,mediaTypes:r,maximumFileSize:a},e.id):n===Ene.AddressProof?(0,z.jsx)(Zse,{fieldName:c,identifier:e.identifier,title:i,type:n,isDisabled:s,mediaTypes:r,maximumFileSize:a},e.id):(0,z.jsx)(jse,{fieldName:c,identifier:e.identifier,title:i,type:n,isDisabled:s,mediaTypes:r,maximumFileSize:a,info:o},e.id)}))})},Cse=e=>{let{isFormDisabled:t,supportingDocumentsConfiguration:i}=e;const n=U("kyc_form.supporting_documents"),{control:s}=(0,th.Gc)(),{fields:r}=(0,th.Dq)({control:s,name:Lne.SupportingDocuments});return i?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:n("title")}),disabled:t}),(0,z.jsx)(L,{separator:(0,z.jsx)(h.Z,{}),children:r.map(((e,n)=>{var s;const r=(a=e.type,null==i?void 0:i.find((e=>e.options[0].type===a)));var a;const o=null==r||null===(s=r.options)||void 0===s?void 0:s[0];return o?(0,z.jsx)(Ise,{index:n,title:o.title,mediaTypes:o.mediaTypes,maximumFileSize:o.maximumFileSize,type:e.type,isDisabled:t,info:null==r?void 0:r.info},e.id):null}))})]}):null};function kse(e){return{isFormDisabled:vG(e),requiredFields:_G(e),agreementHint:jG(e),accountType:yG(e),apiErrors:hG(e),firstName:mG(e),lastName:pG(e),birthdate:gG(e),identityDocumentConfiguration:kG(e),isSupportingDocumentsRequired:PG(e),supportingDocumentsConfiguration:wG(e),hasUnknownApiErrorOccured:zG(e)}}const wse=e=>{let{onSubmit:t,onCancel:i}=e;const n=U("kyc_form"),s=(0,p.I0)(),{isFormDisabled:r,requiredFields:a,agreementHint:o,accountType:l,apiErrors:c,firstName:d,lastName:u,birthdate:g,identityDocumentConfiguration:h,isSupportingDocumentsRequired:f,supportingDocumentsConfiguration:y,hasUnknownApiErrorOccured:_}=(0,p.v9)(kse);function b(e){return null==a?void 0:a.includes(e)}const j=(0,th.cI)({defaultValues:(()=>{const e=null==y?void 0:y.filter((e=>{let{options:t}=e;return b(t[0].type)})).map((e=>{let{options:t}=e;const i=t[0],n=i.files.map((e=>{let{identifier:t}=e;return{identifier:t,file:null,body:null,mediaType:null}}));return{type:i.type,files:n}}));return{firstName:d,lastName:u,birthdate:g,ubos:[],supportingDocuments:e}})()}),S=b(wE.Address),Z=b(wE.IdentityDocument),{setError:I,handleSubmit:C,formState:k}=j,{isDirty:w}=k,P=l===aG.Business,T=C((e=>{let{identityDocument:i,supportingDocuments:n,...r}=e;const a=[];i&&a.push(i),n&&a.push(...n),s(TE.setFormData({...r,documents:a})),t()}));return(0,m.useEffect)((()=>{w&&s(TE.setFormIsDirty())}),[s,w]),(0,m.useEffect)((()=>{c&&c.forEach((e=>{let{field:t,value:i}=e;const n=(0,v.camelCase)(t);((0,_i.IF)(n,Lne)||"ubos"===n)&&(n!==Lne.IdentityDocument?I(n,{type:"manual",message:i}):I(Lne.IdentityDocument,{type:"manual",message:i}))}))}),[c,I]),(0,z.jsxs)(th.RV,{...j,children:[(0,z.jsxs)("form",{onSubmit:T,noValidate:!0,className:"medium-container",children:[(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(ese,{isFormDisabled:r,isBusiness:P}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})]}),S?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(nse,{}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})]}):null,Z?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(dse,{isFormDisabled:r,identityDocumentConfiguration:h}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})]}):null,P?(0,z.jsx)(_se,{isFormDisabled:r}):null,f?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Cse,{isFormDisabled:r,supportingDocumentsConfiguration:y}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})]}):null,(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Nm,{breakpoint:"desktops",children:(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center",children:[(0,z.jsx)("div",{className:"u-flex-grow u-margin-left-large u-margin-right-large",children:(0,z.jsx)(xt.Z,{text:o,html:!0,type:xt.Z.Type.Subtitle,as:"span"})}),(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsx)(ic.I,{text:n("buttons.cancel"),inline:!0,onClick:i}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Large}),(0,z.jsx)(ic.I,{type:ic.I.Type.Submit,styling:ic.I.Styling.Filled,isLoading:r,text:n("buttons.submit"),testId:"kyc-form--submit-button",inline:!0})]})]})}),(0,z.jsxs)(Nm,{breakpoint:"portables",children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),(0,z.jsx)(xt.Z,{text:o,html:!0,type:xt.Z.Type.Subtitle}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(ic.I,{type:ic.I.Type.Submit,styling:ic.I.Styling.Filled,isLoading:r,text:n("buttons.submit"),testId:"kyc-form--submit-button"}),(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),(0,z.jsx)(ic.I,{text:n("buttons.cancel"),styling:ic.I.Styling.Flat,onClick:i})]})]})]}),(0,z.jsx)(Une,{show:_,onSubmit:T})]})},Pse=e=>({title:e.title,body:e.body,iconUrl:e.icon_url,darkIconUrl:e.dark_icon_url,icon:e.icon}),zse=e=>{let{onClick:t,isBusiness:i=!1}=e;const n=E(),s=Ql(),r=XY(Me.mYc),a=U("kyc_education"),[o,l]=(0,m.useState)(Ne.Pending),[c,d]=(0,m.useState)([]);return(0,m.useEffect)((()=>{!async function(){const e=await(0,Fe.ire)();if("errors"in e)return void l(Ne.Failure);const t=i?e.education.sections.filter((e=>"restrictions"!==e.icon)):e.education.sections;d(t.map(Pse)),l(Ne.Success)}()}),[i]),(0,z.jsx)("div",{className:"medium-container",children:o===Ne.Pending?(0,z.jsx)(Mp,{testId:"kyc-education-loader"}):o===Ne.Failure?(0,z.jsx)(sw,{}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:a("header.title"),bold:!0})}),c.map((function(e){const t=s?e.darkIconUrl:e.iconUrl;return(0,z.jsx)(gt.Z,{title:e.title,body:(0,z.jsx)(xt.Z,{text:e.body,html:!0}),prefix:(0,z.jsx)(Kl.U,{src:t,size:Kl.U.Size.Medium,alt:""}),styling:gt.Z.Styling.Wide},e.title)})),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsxs)("div",{className:"u-flexbox u-flex-wrap-reverse u-justify-content-flex-end",children:[!i&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(ic.I,{type:ic.I.Type.Button,text:a("actions.cancel"),inline:n.tabletsUp,url:r}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium,orientation:n.phones?x.Z.Orientation.Horizontal:x.Z.Orientation.Vertical})]}),t&&(0,z.jsx)(ic.I,{type:ic.I.Type.Button,text:a("actions.start"),styling:ic.I.Styling.Filled,inline:n.tabletsUp,onClick:t,testId:"kyc-education-start-button"})]})]})})};var Tse;!function(e){e[e.KycEducation=0]="KycEducation",e[e.KycFormContent=1]="KycFormContent"}(Tse||(Tse={}));const Fse=e=>{let{isOpen:t,onClose:i}=e;const n=U("business.account.cancel_registration_modal"),s=(0,p.v9)(Se);return(0,z.jsx)(cp.Z,{show:t,children:(0,z.jsxs)(nc.Z,{children:[(0,z.jsx)(xt.Z,{text:n("title"),type:xt.Z.Type.Heading,alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(xt.Z,{text:n("body")}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(ic.I,{text:n("actions.cancel"),onClick:async function(){s&&(await(0,Fe.b2s)(s),(0,ls.sl)())},styling:ic.I.Styling.Filled}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(ic.I,{text:n("actions.close"),onClick:i,styling:ic.I.Styling.Flat})]})})},Nse=e=>{let{banner:t}=e;const[i,n]=(0,m.useState)(!1),{title:s,body:r,continueButtonLabel:a,continueButtonUrl:o,cancelButtonLabel:l}=t;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(w8,{title:(0,z.jsx)(xt.Z,{text:s,type:xt.Z.Type.Heading}),body:(0,z.jsx)(xt.Z,{text:r}),actions:[(0,z.jsx)(ic.I,{text:a,url:o,styling:ic.I.Styling.Filled}),(0,z.jsx)(ic.I,{text:l,onClick:function(){n(!0)}})]}),(0,z.jsx)(Fse,{isOpen:i,onClose:function(){n(!1)}})]})},Lse=e=>{let{actions:t,buttonProps:i}=e;const[n,s]=(0,m.useState)(!1),r=(0,m.useCallback)((()=>{s(!1)}),[]);return(0,m.useEffect)((()=>(n&&document.addEventListener("click",r),()=>{document.removeEventListener("click",r)})),[n,r]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(ic.I,{...i,onClick:e=>{e.stopPropagation(),s((e=>!e))}}),n&&(0,z.jsx)("div",{className:"dropdown-menu",children:(0,z.jsx)(g.Z,{styling:g.Z.Styling.Lifted,children:t.map((e=>{const{id:t,text:i,url:n,onClick:s}=e;return(0,z.jsx)(gt.Z,{testId:"".concat(t,"-button"),body:i,styling:gt.Z.Styling.Narrow,type:gt.Z.Type.Navigating,url:n,onClick:s},t)}))})})]})},Ese=e=>{let{children:t,iconName:i,iconColor:n=ht.Z.Color.GreyscaleLevel4,testId:s}=e;return(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,testId:s,prefix:(0,z.jsx)(ht.Z,{name:i,size:ht.Z.Size.Small,color:n,aria:{"aria-hidden":"true"}}),children:t})};let Ose;var Rse;!function(e){e.Following="following",e.Followers="followers"}(Ose||(Ose={})),function(e){e.Following="Following",e.Followers="Followers"}(Rse||(Rse={}));const Dse=e=>{var t;let{followersCount:i,followingCount:n,userId:s,viewingSelf:r}=e;const a=U("user"),o=(0,p.v9)(Wt("next_page_user_follow")),l=(null===(t=Xn({abTestName:"following_page_rework"}))||void 0===t?void 0:t.variant)===$k.On,{track:c}=vi(),d=e=>{r&&c(Ri({screen:$t.CurrentUserProfile,target:qm[e]}))};return(0,z.jsxs)("div",{className:"u-flexbox u-flex-wrap",children:[(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsx)("a",{href:(u=s,o&&l?(0,Me.TCk)(u,Ose.Followers):(0,Me.v6n)(u)),onClick:()=>d(Rse.Followers),children:i}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),a("followers",void 0,{count:i}),(0,z.jsx)("span",{children:","}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small})]}),(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsx)("a",{href:(e=>o&&l?(0,Me.TCk)(e,Ose.Following):(0,Me.yDJ)(e))(s),onClick:()=>d(Rse.Following),children:n}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),a("following",void 0,{count:n})]})]});var u},Ase=e=>{let{user:t,showSupportFunctionality:i,canSendTemplates:n,viewingSelf:s,onTogglePoliciesModal:r=v.noop}=e;const a=U("user"),{email:o,last_loged_on_ts:l,created_at:c,followers_count:d,following_count:u,msg_template_count:m,expose_location:p,city:g,country_title_local:h,id:f,business:y}=t,_=new Date(c);return(0,z.jsx)("div",{className:"u-flexbox",children:(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.X4Large}),children:[function(){var e;const c=p&&g?[g,h].join(", "):h,v=y&&(null===(e=t.business_account)||void 0===e?void 0:e.email);return(0,z.jsxs)("div",{children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:a("about.title")}),(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),(0,z.jsxs)(yie.Z,{size:yie.Z.Size.Narrow,children:[c&&(0,z.jsx)(yie.Z.Item,{children:(0,z.jsx)(Ese,{iconName:"location-pin",testId:"profile-location-info",children:c})}),v&&(0,z.jsx)(yie.Z.Item,{children:(0,z.jsx)(Ese,{iconName:"envelope",testId:"profile-business-email",children:(0,z.jsx)("a",{href:"mailto:".concat(v),children:v})})}),l&&(0,z.jsx)(yie.Z.Item,{children:(0,z.jsx)(Ese,{iconName:"clock",children:(0,z.jsx)(Tt,{id:"user.last_login",date:new Date(l),relativeDate:!0})})}),(0,z.jsx)(yie.Z.Item,{children:(0,z.jsx)(Ese,{iconName:"rss",children:(0,z.jsx)(Dse,{followersCount:d,followingCount:u,userId:f,viewingSelf:s})})}),i&&(0,z.jsx)(yie.Z.Item,{children:(0,z.jsx)(Ese,{iconName:"member",children:(0,z.jsx)(Tt,{id:"user.since",date:_})})}),i&&(0,z.jsx)(yie.Z.Item,{children:(0,z.jsx)(Ese,{iconName:"envelope",children:o})}),n&&(0,z.jsx)(yie.Z.Item,{children:(0,z.jsx)(Ese,{iconName:"flag",children:(0,z.jsx)("a",{href:(0,Me.xem)(t.id),children:a("admin.template_count",{count:m},{count:m})})})}),y&&(0,z.jsx)(yie.Z.Item,{children:(0,z.jsx)(Ese,{iconName:"document",children:(0,z.jsx)("span",{onClick:r,"data-testid":"seller-policies-modal-toggle",children:(0,z.jsx)(xt.Z,{clickable:!0,text:a("seller_policies.title")})})})})]})]})}(),function(){var e;const i=Be.zR.filter((e=>{var i;return null===(i=t.verification[e])||void 0===i?void 0:i.valid}));if((0,v.isEmpty)(i)&&!y)return null;const n=y&&(null===(e=t.business_account)||void 0===e?void 0:e.legal_code);return(0,z.jsxs)("div",{children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:a("verification.title")}),(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),(0,z.jsxs)(yie.Z,{size:yie.Z.Size.Narrow,children:[i.map((e=>(0,z.jsx)(yie.Z.Item,{children:(0,z.jsx)(Ese,{iconName:"check-circle",children:a("verification.".concat(e))})},e))),y&&(0,z.jsx)(yie.Z.Item,{children:(0,z.jsx)(Ese,{iconName:"check-circle",testId:"business-verification-identity",children:a("verification.business_identity")})}),n&&(0,z.jsx)(yie.Z.Item,{children:(0,z.jsxs)(Ese,{iconName:"check-circle",testId:"business-verification-legal-code",children:[a("verification.legal_code")," ",n]})})]})]})}()]})})};function Mse(e){return e.substring(0,220).split("\n")[0].trim()}const Use=e=>{let{user:t,isContentTranslationEnabled:i}=e;const n=U("user.description"),[s,r]=(0,m.useState)(!1),[a,o]=(0,m.useState)(!1),[l,c]=(0,m.useState)(""),{fetch:d,data:u}=ih(Fe.GAF);function p(){r((e=>!e))}(0,m.useEffect)((()=>{if(!t.about)return;const e=Mse(t.about);t.about!==e&&r(!0)}),[t.about]),(0,m.useEffect)((()=>{if(!u)return;const{about:e}=u.user;e&&(c(e),o(!0))}),[u]);const g=a&&l?l:t.about;if(!g)return null;const h=s?"".concat(Mse(g),"..."):g,f=i&&t.localization!==Ue.None;return(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(xt.Z,{format:!0,children:(0,z.jsxs)("div",{className:"profile__user-description","data-testid":"profile-user-description",children:[(0,z.jsx)(XP,{text:h}),s&&(0,z.jsx)("span",{className:"u-ui-margin-left-small",onClick:p,onKeyDown:function(e){Vg(e,p)},"data-testid":"more-button",children:(0,z.jsx)(xt.Z,{clickable:!0,children:n("actions.more")})})]})}),f&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{}),(0,z.jsx)(Lx,{isTranslated:a,autotranslate:!1,onClick:function(e){return e?void o(!1):async function(){l?o(!0):await d({id:t.id,localize:!0})}()},tracking:{target:qm.TranslateDescription,targetDetails:t.id.toString()}})]})]})},Bse={[$t.UserProfile]:qm.DonationsAboutUserProfile,[$t.UserAbout]:qm.DonationsAboutUserInfo},qse=e=>{var t;let{user:i,screen:n,styling:s}=e;const r=U("user"),{track:a}=vi(),o=e=>{if(!(e.target instanceof HTMLAnchorElement))return;const t=dn({screen:n,target:Bse[n]});a(t)};return null!==(t=i.fundraiser)&&void 0!==t&&t.active?(0,z.jsx)(_p,{type:bp.Donations,render:e=>(0,z.jsx)(gt.Z,{onClick:o,styling:s,children:(0,z.jsx)(Ese,{iconName:"donate-filled",iconColor:ht.Z.Color.Success,children:(0,z.jsx)(xt.Z,{text:r("donating",{username:i.login,"faq-url":t=>(0,z.jsx)("a",{href:e,children:t})})})})})}):null},Vse=e=>{let{user:t,screen:i,isAvailableForMigration:n,showSupportFunctionality:s,isShadowBanned:r,viewingSelf:a,onUnblockClick:o}=e;const l=U("user"),{fundraiser:c,moderator:d,volunteer_moderator:u,is_identity:p,is_god:g,is_hated:h,account_ban_date:f,forum_ban_date:y,account_status:_,id:b,is_account_ban_permanent:j,is_forum_ban_permanent:S}=t;function Z(e,i){return(a||s||t.is_god)&&!i?e:"".concat(e,"_no_date")}const I=(0,v.compact)([null!=c&&c.active?(0,z.jsx)(qse,{user:t,screen:i,styling:gt.Z.Styling.Tight}):null,n&&(s||g)?(0,z.jsx)(Ese,{iconName:"check-circle-filled",iconColor:ht.Z.Color.Success,children:l("status.available_for_migration")}):null,d?(0,z.jsx)(Ese,{iconName:"shield-outlined",iconColor:ht.Z.Color.Expose,children:l("status.product_team")}):null,u?(0,z.jsx)(Ese,{iconName:"shield-outlined",iconColor:ht.Z.Color.Success,children:l("status.volunteer_moderator")}):null,p?(0,z.jsx)(Ese,{iconName:"check-circle",iconColor:ht.Z.Color.Success,children:l("status.identity_confirmed")}):null,!f||h?null:(0,z.jsx)(Ese,{iconName:"block",iconColor:ht.Z.Color.Warning,children:(0,z.jsx)(xt.Z,{theme:"warning",children:l(Z("admin.messages.banned",!!j),{date:f})})}),h?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Ese,{iconName:"block",iconColor:ht.Z.Color.Warning,children:(0,z.jsx)(xt.Z,{theme:"warning",children:l("admin.messages.blocked")})}),o&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(ic.I,{testId:"unblock-user-button",inline:!0,text:l("action.unblock"),styling:ic.I.Styling.Filled,onClick:o})]})]}):null,!y||h?null:(0,z.jsx)(Ese,{iconName:"block",iconColor:ht.Z.Color.Warning,children:(0,z.jsx)(xt.Z,{theme:"warning",children:l(Z("admin.messages.forum_banned",!!S),{date:y})})}),r?(0,z.jsx)(Ese,{iconName:"block",iconColor:ht.Z.Color.Warning,children:(0,z.jsx)(xt.Z,{theme:"warning",children:l("admin.messages.shadow_banned_no_date")})}):null,_!==Be.Tf?null:(0,z.jsx)(Ese,{iconName:"block",iconColor:ht.Z.Color.Warning,children:(0,z.jsx)(xt.Z,{theme:"warning",children:l("admin.messages.deleted",{"member-restore-url":e=>(0,z.jsx)("a",{href:(0,Me.m21)(b),children:e})})})})]);return I.length?(0,z.jsx)(gt.Z,{children:(0,z.jsx)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),children:I.map(((e,t)=>(0,z.jsx)(m.Fragment,{children:e},t)))})}):null},Hse=e=>{var t,i;let{user:n,viewingSelf:s,showActions:r,showSupportFunctionality:a,canSendTemplates:o,screen:l,isAvailableForMigration:c,isShadowBanned:d,isContentTranslationEnabled:u,onTogglePoliciesModal:g=v.noop,onRatingClick:h=v.noop}=e;const f=E(),{relativeUrl:y}=xc(),_=U("user"),b=r&&!n.account_ban_date,j=(0,p.v9)(X),S=(0,p.v9)(Wt("profile_blocking_improvements")),[Z,I]=(0,m.useState)(!1);if(f.phones)return null;const C=(null===(t=n.photo)||void 0===t?void 0:t.url)||qe,k=$e(n.feedback_reputation),w=async()=>{if(!j)return;const e=n.is_hated?Fe.zvU:Fe.rfe;await e({currentUserId:j,blockedUserId:n.id}),(0,ls.sl)()};function P(){S?I(!0):w()}function T(){return s?(0,z.jsx)(ic.I,{deprecatedIcon:(0,z.jsx)(ht.Z,{name:"pencil",color:ht.Z.Color.GreyscaleLevel3}),url:Me.Svv,text:_("action.edit_profile"),theme:"muted",size:ic.I.Size.Medium,inline:!0}):null}function F(){return!s&&b&&n.allow_direct_messaging?(0,z.jsx)(ic.I,{text:_("action.write_message"),url:(0,ys.Iq)(Oc,{receiver_id:n.id,ref_url:y}),size:ic.I.Size.Medium,testId:"info-header-message-button",inline:!0}):null}function N(){return s||!b||wt(n.closet_countdown_end_date)?null:(0,z.jsx)("div",{children:(0,z.jsx)(KQ,{userId:n.id,isActive:n.is_favourite,size:ic.I.Size.Medium,testId:"profile-info-follow-button"})})}function O(){if(s&&!a)return null;const e=[{id:"report",text:_("action.report"),url:(0,ys.Iq)(Me.iDM,{ref_id:n.id,ref_type:_P.Member,ref_url:y})}];j&&e.push({id:n.is_hated?"unblock":"block",text:_(n.is_hated?"action.unblock":"action.block"),onClick:P});const t={styling:ic.I.Styling.Flat,deprecatedIcon:(0,z.jsx)(ht.Z,{testId:"actions-menu-button",name:"horizontal-dots",color:ht.Z.Color.GreyscaleLevel4,title:_("a11y.show_more")}),size:ic.I.Size.Medium};return(0,z.jsx)("div",{children:(0,z.jsx)(Lse,{actions:e,buttonProps:t})})}return(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsx)("div",{children:(0,z.jsx)(Kl.U,{src:C,styling:Kl.U.Styling.Circle,size:Kl.U.Size.X4Large,alt:""})}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large,orientation:x.Z.Orientation.Vertical}),(0,z.jsxs)("div",{className:"u-flex-grow",children:[(0,z.jsx)(gt.Z,{title:(0,z.jsx)(kK,{businessAccountName:null===(i=n.business_account)||void 0===i?void 0:i.name,login:n.login,isBusiness:n.business}),body:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("button",{type:"button",onClick:function(){h(),(0,ls.H5)("tabs")},"data-testid":"rating-button",children:(0,z.jsx)(Ox.Z,{aria:{"aria-label":k&&_("a11y.rating",{rating:k,max_rating:5})||""},value:k,text:_("feedback.reviews",{count:n.feedback_count},{count:n.feedback_count}),emptyStateText:_("feedback.no_reviews")})}),f.tablets&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{}),(0,z.jsx)("div",{className:"u-flexbox",children:(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Large}),children:[T(),F(),N()]})})]})]}),suffix:f.desktops?(0,z.jsx)("div",{className:"u-flexbox",children:(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Large}),children:[T(),F(),N(),O()]})}):O()}),(0,z.jsx)(Vse,{onUnblockClick:S?P:void 0,user:n,screen:l,isAvailableForMigration:c,showSupportFunctionality:a,isShadowBanned:d,viewingSelf:s}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(Ase,{user:n,showSupportFunctionality:a,canSendTemplates:o,onTogglePoliciesModal:g,viewingSelf:s})}),(0,z.jsx)(Use,{user:n,isContentTranslationEnabled:u})]}),(0,z.jsx)(cz,{username:n.login,isUserBlocked:n.is_hated,userId:n.id,isVisible:Z,onCancel:function(){I(!1)},onConfirm:function(){I(!1),(0,ls.sl)()}})]})};function Gse(e,t){return"".concat(Be.Fv,"/assets/featured-collection").concat(t?"/dark":"","/").concat(e)}const Wse=e=>{let{show:t,isFeaturedCollectionCreated:i,onNextAction:n,onBack:s}=e;const r=U("featured_collection.onboarding_modal"),a=Ql(),o=(0,p.v9)(Nc),{fetch:l,isLoading:c,transformedData:d,error:u}=ih(Fe.yjF,ix),g=!!d||c||u;return(0,m.useEffect)((()=>{t&&!g&&l()}),[l,t,g]),(0,z.jsx)(cp.Z,{show:t,hasScrollableContent:!0,testId:"featured-collection-onboarding-modal",children:(0,z.jsx)("div",{className:"u-fill-width",children:(0,z.jsxs)(Lg,{children:[(0,z.jsx)(Pm.Z,{right:(0,z.jsx)(ic.I,{deprecatedIconName:"x",theme:"amplified",styling:ic.I.Styling.Flat,testId:"featured-collection-onboarding-back-button",onClick:s}),body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,text:r("title")})}),c?(0,z.jsx)(Mp,{styling:Mp.Styling.Wide}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Kl.U,{src:Gse("featured-collection-onboarding.png",a),testId:"featured-collection-onboarding-image"}),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{text:r("intro.title"),type:xt.Z.Type.Heading})}),(0,z.jsx)(gt.Z,{title:r("intro.profile.title"),body:r("intro.profile.body"),prefix:(0,z.jsx)(ht.Z,{name:"stack",color:uI.S.GreyscaleLevel3})}),(0,z.jsx)(gt.Z,{title:r("intro.homepage.title"),body:r("intro.homepage.body"),prefix:(0,z.jsx)(ht.Z,{name:"bookmark",color:uI.S.GreyscaleLevel3})}),(0,z.jsx)(gt.Z,{title:r("intro.sale.title"),body:r("intro.sale.body"),prefix:(0,z.jsx)(ht.Z,{name:"percent",color:uI.S.GreyscaleLevel3})})]}),(0,z.jsx)(h.Z,{}),function(){if(!d)return null;const e=Ua(d.pricePerDay,o),t=Ua(d.totalPrice,o);return(0,z.jsx)(gt.Z,{title:r("duration_day_count",{count:d.effectiveDays},{count:d.effectiveDays}),body:r("price_per_day",{price:e}),suffix:(0,z.jsx)(xt.Z,{text:t,type:xt.Z.Type.Title})})}(),function(){const e=i?"review":"create";return(0,z.jsx)("div",{className:"u-ui-margin-horizontal-large u-ui-margin-bottom-large",children:(0,z.jsx)(ic.I,{text:r("actions.".concat(e)),styling:ic.I.Styling.Filled,onClick:n,testId:"featured-collection-onboarding-".concat(e,"-button")})})}()]})]})})})},Xse=e=>{let{isShown:t,plansPricing:i,onBack:n}=e;const{track:s}=vi(),r=U("featured_collection.multiple.plans_modal"),a=(0,p.v9)(Nc);return(0,z.jsx)(cp.Z,{show:t,hasScrollableContent:!0,testId:"multiple-collections-plans-modal",children:(0,z.jsxs)("div",{className:"u-fill-width",children:[(0,z.jsx)(Pm.Z,{left:(0,z.jsx)(ic.I,{deprecatedIconName:"arrow-left",theme:"amplified",styling:ic.I.Styling.Flat,testId:"multiple-collections-plans-back-button",onClick:n}),body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,text:r("title")})}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(Lg,{children:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{text:r("body")})}),(0,z.jsx)("div",{className:"u-ui-margin-horizontal-large u-ui-margin-bottom-large",children:(0,z.jsx)(g.Z,{children:(0,z.jsx)("div",{className:"u-overflow-hidden",children:(0,z.jsx)(L,{separator:(0,z.jsx)(h.Z,{}),children:i.map((e=>(0,z.jsx)(gt.Z,{title:r("plan_option.title",{count:e.maxActiveCount},{count:e.maxActiveCount}),body:r("duration_day_count",{count:e.effectiveDays},{count:e.effectiveDays}),suffix:Ua(e.totalPrice,a)},e.id)))})})})})]})}),(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center u-ui-margin-bottom-regular",children:(0,z.jsx)(xt.Z,{text:r("note"),type:xt.Z.Type.Caption})}),(0,z.jsx)(ic.I,{text:r("actions.create"),styling:ic.I.Styling.Filled,onClick:function(){s(Ri({screen:$t.FeaturedCollection,target:qm.CreateCollection})),(0,ls.ru)(Me.bDw)},testId:"multiple-collections-plans-create-button"})]})]})})};var Yse=i(51537),Kse=i(9704),Jse=i(92316);const Qse=e=>{let{isShown:t,isLoading:i,cheapestPlan:n,maxActiveCollectionsCount:s,onClose:r,onPriceInfoClick:a}=e;const{track:o}=vi(),l=U("featured_collection.multiple.onboarding_modal"),c=Ql(),d=(0,p.v9)(Nc);return(0,z.jsx)(cp.Z,{show:t,hasScrollableContent:!0,testId:"multiple-collections-onboarding-modal",children:(0,z.jsxs)("div",{className:"u-fill-width",children:[(0,z.jsx)(Pm.Z,{right:(0,z.jsx)(ic.I,{deprecatedIconName:"x",theme:"amplified",styling:ic.I.Styling.Flat,testId:"multiple-collections-onboarding-close-button",onClick:r}),body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,text:l("title")})}),(0,z.jsx)(Lg,{children:i?(0,z.jsx)(Mp,{styling:Mp.Styling.Wide,testId:"multiple-collections-onboarding-loader"}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Kl.U,{src:Gse("featured-collection-onboarding.png",c),testId:"multiple-collections-onboarding-image"}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{text:l("intro.title"),type:xt.Z.Type.Heading})}),(0,z.jsx)(gt.Z,{title:l("intro.groups.title"),body:l("intro.groups.body",{count:s},{count:s}),prefix:(0,z.jsx)(Wy.Z,{name:Yse.Z,color:uI.S.GreyscaleLevel3})}),(0,z.jsx)(gt.Z,{title:l("intro.sale.title"),body:l("intro.sale.body"),prefix:(0,z.jsx)(Wy.Z,{name:Kse.Z,color:uI.S.GreyscaleLevel3})}),(0,z.jsx)(gt.Z,{title:l("intro.feature.title"),body:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{children:l("intro.feature.body")}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(_p,{type:bp.Collection,render:e=>(0,z.jsx)("a",{href:e,target:"_blank",rel:"noreferrer",children:l("actions.learn_more")})}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]}),prefix:(0,z.jsx)(Wy.Z,{name:Jse.Z,color:uI.S.GreyscaleLevel3})})]})}),(0,z.jsx)(h.Z,{}),function(){if(!n)return null;const e=Ua(n.totalPrice,d);return(0,z.jsx)("div",{className:"u-ui-margin-horizontal-large u-ui-margin-vertical-x-small",children:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,title:l("duration_day_count",{count:n.effectiveDays},{count:n.effectiveDays}),suffix:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,theme:"amplified",text:l("price_from",{price:e}),icon:(0,z.jsx)(Wy.Z,{name:a3.Z,color:Wy.Z.Color.GreyscaleLevel3}),iconPosition:ic.I.IconPosition.Right,onClick:a,testId:"multiple-collections-onboarding-price-info-button"})})})}(),(0,z.jsx)("div",{className:"u-ui-margin-horizontal-large u-ui-margin-bottom-large",children:(0,z.jsx)(ic.I,{text:l("actions.create"),styling:ic.I.Styling.Filled,onClick:function(){o(Ri({screen:$t.FeaturedCollection,target:qm.CreateCollection})),(0,ls.ru)(Me.bDw)},testId:"multiple-collections-onboarding-create-button"})})]})})};var $se;!function(e){e.Onboarding="onboarding",e.Plans="plans"}($se||($se={}));const ere=e=>{let{isOnboardingOpen:t,onClose:i}=e;const{track:n}=vi(),[s,r]=(0,m.useState)(),{fetch:a,isLoading:o,transformedData:l,error:c}=ih(Fe.v1X,yx),d=!!l||o||c,u=(0,v.minBy)(l,(e=>parseFloat(e.totalPrice.amount))),p=l?Math.max(...l.map((e=>e.maxActiveCount))):0;return(0,m.useEffect)((()=>{t&&r($se.Onboarding)}),[t]),(0,m.useEffect)((()=>{t&&!d&&a()}),[a,t,d]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Qse,{isShown:s===$se.Onboarding,isLoading:o,cheapestPlan:u,maxActiveCollectionsCount:p,onClose:function(){r(void 0),i()},onPriceInfoClick:function(){r($se.Plans),n(Ri({screen:$t.FeaturedCollection,target:qm.PriceInformation}))}}),l&&(0,z.jsx)(Xse,{isShown:s===$se.Plans,plansPricing:l,onBack:function(){r($se.Onboarding)}})]})},tre=e=>{let{endDate:t,bottomElement:i,username:n,isFollowed:s,userId:r,viewingSelf:a,showActions:o}=e;const{formattedRemainingTime:l,isActive:c}=q0(t),d=U("closet_countdown"),u=E(),m=Ql(),p=!r||void 0===s||a||!o,g=y()("closet-countdown__content",{"closet-countdown__content--hidden-action":p}),h=u.tabletsUp?"clothes-star-96.png":"clothes-star-64.png",f="/assets/closet-countdown".concat(m?"/dark":"","/").concat(h);if(!c)return null;const v=()=>{if(!l)return null;const{days:e,hours:t,minutes:i,seconds:n}=l;return(0,z.jsx)("ul",{className:"closet-countdown__timer",children:(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),children:[(0,z.jsxs)("li",{className:"closet-countdown__timer-unit",children:[(0,z.jsx)("div",{className:"closet-countdown__timer-unit-value",children:e}),(0,z.jsx)("div",{className:"closet-countdown__timer-unit-name",children:d("time.days",void 0,{count:e})})]}),(0,z.jsxs)("li",{className:"closet-countdown__timer-unit",children:[(0,z.jsx)("div",{className:"closet-countdown__timer-unit-value",children:t}),(0,z.jsx)("div",{className:"closet-countdown__timer-unit-name",children:d("time.hours",void 0,{count:t})})]}),(0,z.jsxs)("li",{className:"closet-countdown__timer-unit",children:[(0,z.jsx)("div",{className:"closet-countdown__timer-unit-value",children:i}),(0,z.jsx)("div",{className:"closet-countdown__timer-unit-name",children:d("time.minutes",void 0,{count:i})})]}),(0,z.jsxs)("li",{className:"closet-countdown__timer-unit",children:[(0,z.jsx)("div",{className:"closet-countdown__timer-unit-value",children:n}),(0,z.jsx)("div",{className:"closet-countdown__timer-unit-name",children:d("time.seconds",void 0,{count:n})})]})]})})},_=()=>r&&void 0!==s&&!a&&o?u.tabletsUp?(0,z.jsx)("h2",{className:"closet-countdown__title",children:d("title",{username:n})}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,children:d("title",{username:n})})]}):null,b=()=>r&&void 0!==s&&!a&&o?(0,z.jsx)(KQ,{userId:r,username:n,isActive:s,size:ic.I.Size.Medium}):null;return u.tabletsUp?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("section",{className:"u-flexbox u-align-items-center u-justify-content-between u-padding-horizontal-medium",children:[(0,z.jsxs)("div",{className:g,children:[(0,z.jsx)("div",{children:(0,z.jsx)(Kl.U,{src:f,size:Kl.U.Size.X2Large,alt:""})}),(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column",children:[(0,z.jsx)(xt.Z,{theme:"amplified",children:d("subtitle")}),(0,z.jsx)(x.Z,{}),v()]}),_()]}),(0,z.jsx)("div",{className:"closet-countdown__button",children:b()})]}),i]}):(0,z.jsx)("div",{className:"closet-countdown",children:(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Tight,children:[(0,z.jsx)("div",{className:"closet-countdown__image",children:(0,z.jsx)(Kl.U,{src:f,size:Kl.U.Size.XLarge,alt:""})}),(0,z.jsx)(xt.Z,{theme:"amplified",children:d("subtitle")}),(0,z.jsx)(x.Z,{}),v(),_(),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),b(),i]})})},ire=e=>{let{bottomSpacer:t}=e;const i=U("profile.banners.referrals"),n=Xn({abTestName:"referrals_visibility",shouldTrackExpose:!0});return"on"!==(null==n?void 0:n.variant)?null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(g.Z,{children:(0,z.jsx)(gt.Z,{prefix:(0,z.jsx)(Kl.U,{src:"/assets/referrals/gift-box.png",size:Kl.U.Size.XLarge}),title:i("title"),body:(0,z.jsx)(xt.Z,{text:i("body")}),url:Me.Aof,suffix:(0,z.jsx)(ht.Z,{name:"chevron-right",color:ht.Z.Color.GreyscaleLevel4,display:ht.Z.Display.Block})})}),t]})},nre=["vas-bump","vas-closet-promo","vas-closet-promo-stats","vas-featured-collection","vas-gallery-card"],sre=e=>{let{title:t,subtitle:i,icon:n,url:s,onClick:r,testId:a,badgeTitle:o,badgeSubtitle:l}=e;const c=Ql();return(0,z.jsx)("div",{className:"u-fill-width u-fill-child-component",children:(0,z.jsx)(g.Z,{experimentalTheme:"primaryLightExperimental",children:(0,z.jsx)("div",{className:"u-overflow-hidden u-fill-height u-fill-child-component",children:(()=>{const e=r?{onClick:r}:{url:s},d=(()=>{if(!n)return null;if(nre.includes(n)){const e="".concat(n).concat(c?"-dark":"");return(0,z.jsx)(Kl.U,{src:"".concat(Be.Fv,"/assets/profile-banners/").concat(e,".svg"),size:Kl.U.Size.XLarge,testId:e})}return null})(),u=(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:i,type:xt.Z.Type.Subtitle,html:!0}),o&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,theme:"transparent",prefix:(0,z.jsx)(oC.Z,{content:o,theme:"primary"}),body:l&&(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:l})})]})]});return(0,z.jsx)(gt.Z,{title:t,body:u,type:gt.Z.Type.Navigating,prefix:d,testId:a,theme:"transparent",...e})})()})})})},rre=e=>{let{bundleProps:t,showActions:i,viewingSelf:n,user:s}=e;const r=(0,p.I0)(),a=E(),o=(0,p.v9)(Cl),l=(0,p.v9)(ZX),c=(0,p.v9)(Wt("disable_vas_gallery_orders")),d=(0,p.v9)(Wt("web_taxpayers_banners")),{track:u}=vi(),g=U("vas_gallery.profile_card"),[f,v]=(0,m.useState)(!1),_=l.visible&&!c,b=E8(),{is_favourite:j,id:S,login:Z,closet_countdown_end_date:I}=s||{};function C(e,t){if(!e.title)return null;const i={};return t&&(i.onClick=()=>{u(Ri({screen:$t.CurrentUserProfile,target:t})),e.url?(0,ls.ru)(e.url):e.onClick&&e.onClick()}),(0,z.jsx)(sre,{...e,...i})}function k(){const{portalMergeFeed:e}=o;return e?(0,z.jsx)(lee,{banner:e,screen:$t.CurrentUserProfile}):null}function w(e){if(!e)return null;const t=e.isPromoted?void 0:()=>r(IE.startPreCheckout());return C({...e,onClick:t,testId:"cp-banner"})}function P(e){return e?C({...e,testId:"pushup-banner"},qm.MultiplePushUp):null}function T(){return _&&null!=s&&s.item_count?C({icon:"vas-gallery-card",subtitle:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),g("body")]}),title:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,theme:"transparent",prefix:(0,z.jsx)(oC.Z,{theme:"success",content:g("new_badge")}),title:g("title")}),url:"/items/vas_gallery/new",testId:"vas-gallery-banner"},qm.MultipleVasGallery):null}function F(){v(!0),u(Ri({screen:$t.CurrentUserProfile,target:qm.PromoteFeaturedCollection}))}function N(){u(Ri({screen:$t.FeaturedCollection,target:qm.CreateCollection})),(0,ls.ru)(Me.bDw)}function O(){v(!1)}function R(){const{featuredCollectionBanner:e}=o;return e?(0,z.jsxs)(z.Fragment,{children:[C({...e,onClick:F,testId:"featured-collection-banner"}),!b&&(0,z.jsx)(Wse,{show:f,isFeaturedCollectionCreated:!1,onNextAction:N,onBack:O}),b&&(0,z.jsx)(ere,{isOnboardingOpen:f,onClose:O})]}):null}return(0,m.useEffect)((()=>{r(fV()),r(IE.getPricingRequest())}),[r]),n?function(){const{pushUpBanner:e,portalMergeFeed:t,closetPromotion:s}=o,r=hs(s,"my_profile"),l=y()({"u-flexbox":a.tabletsUp}),c=e||r||t||_;return(0,z.jsxs)(z.Fragment,{children:[o.taxpayerBanner&&d&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yee,{banner:o.taxpayerBanner,isBannerInFeed:!1,screen:$t.CurrentUserProfile}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]}),o.portalMergeWaitForMigrationModal&&(0,z.jsx)(oee,{banner:o.portalMergeWaitForMigrationModal,screen:$t.MergeGoToOldPortal,seenBannerType:"portal_merge_wait_for_migration"}),o.portalMergeInitiateFromTargetModal&&(0,z.jsx)(oee,{banner:o.portalMergeInitiateFromTargetModal,screen:$t.MergeAnnouncementTarget,seenBannerType:"portal_merge_initiate_from_target"}),(0,z.jsx)(ire,{bottomSpacer:a.tabletsUp&&(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})}),I&&wt(I)&&(0,z.jsx)(tre,{userId:S,username:Z,isFollowed:j,showActions:i,viewingSelf:n,endDate:I,bottomElement:a.tabletsUp?(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}):(0,z.jsx)(h.Z,{})}),(0,z.jsxs)(L,{separatorAtBreakpoint:{phones:(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),tablets:(0,z.jsx)(x.Z,{size:x.Z.Size.Large})},children:[c&&(0,z.jsx)("div",{className:l,children:(0,z.jsxs)(L,{separator:a.phones?(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Horizontal,size:x.Z.Size.Medium}):(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.XLarge}),children:[P(e),w(r),a.desktops&&T(),a.desktops&&R(),k()]})}),!a.desktops&&T(),!a.desktops&&R()]})]})}():I&&wt(I)?(0,z.jsx)(tre,{endDate:I,viewingSelf:n,showActions:i,isFollowed:j,username:Z,userId:S}):t.showBundles?(0,z.jsx)(tp,{url:t.url,screen:$t.UserProfile,children:e=>{let{onClick:i}=e;return(0,z.jsx)(sre,{title:(0,z.jsx)(wx,{id:"bundles.shop_title"}),subtitle:t.subtitle,onClick:i,testId:"profile-banner-shop-bundles-button"})}}):null},are=e=>{let{item:t}=e;const i=(0,p.I0)(),{track:n}=vi(),s=U("item.actions"),r=(0,p.v9)(ZX),a=(0,p.v9)(Wt("disable_vas_gallery_orders")),o=r.visible&&!a;return(0,z.jsx)(ic.I,{disabled:!t.can_push_up&&!t.can_vas_gallery_promote,size:ic.I.Size.Small,text:s(o?"promote":"bump"),onClick:o?function(){i(vE.setPromotedItemId({id:t.id})),n(Ri({target:qm.PromoteItem,targetDetails:"".concat(t.id)}))}:function(){i(CN.setUserItems({items:[t]})),i(SV({selectedItemId:t.id})),n(Ri({target:qm.PushUpItem,targetDetails:"".concat(t.id)}))},testId:"bump-button"})},ore=P0((e=>{let{innerRef:t,item:i,onClick:n,viewingSelf:s=!1,allowBump:r=!1,isDescriptionHidden:a}=e;const{track:o}=vi(),l=(0,p.v9)(ZX),c=e=>{return(0,z.jsx)(ic.I,{text:(0,z.jsx)(ht.Z,{name:"performance-chart",size:ht.Z.Size.Small,color:"parent"}),theme:"primary",size:ic.I.Size.Small,url:(0,Me.DWf)(e),onClick:(t=qm.ShowItemPerformance,i=e,()=>{const e=Ri({target:t,targetDetails:i.toString()});o(e)}),testId:"featured-item--stats"});var t,i};return(0,z.jsx)("div",{className:"featured-collection__item",ref:t,"data-testid":"featured_collection_item",children:(0,z.jsx)(k0,{item:co(i),showOwner:!1,showStatus:!0,renderFooter:function(){if(!s||a)return null;const{id:e,promoted:t,vas_gallery_promoted:n}=i;switch(Ka(i,s)){case"promoted":return!t&&r?(0,z.jsx)(are,{item:i}):c(e);case"bumped":return l.visible&&!n?(0,z.jsx)(are,{item:i}):c(e);default:return r?(0,z.jsx)(are,{item:i}):null}}(),onClick:n,viewingSelf:s,testId:"featured-item",hideBusinessBadge:!0,isDescriptionHidden:a,onFavouriteToggle:function(e){let{itemId:t,isFollowEvent:i}=e;o(Ri({target:qm.Favourite})),o(Ai({itemId:t,isFollowEvent:i,contentSource:Es.FeaturedCollection}))}})})})),lre=e=>{let{id:t,items:i,title:n,viewingSelf:s,allowBump:r,hasItems:a,isActive:o,humanizedTimeLeft:l}=e;const c=U("featured_collection"),{track:d}=vi(),u=(0,m.useRef)([]),[p,g]=(0,m.useState)(!1);(0,m.useEffect)((()=>{d(Bi({id:t,position:0,contentSource:Es.FeaturedCollection,contentType:z0.FeaturedCollection}))}),[t,d]);const h=(e,t)=>()=>{if(s||(0,v.includes)(u.current,e.id))return;const i=Bi({id:e.id,position:t+1,contentType:z0.Item,contentSource:Es.FeaturedCollection,itemOwnerId:e.user_id});d(i),u.current=[...u.current,e.id]};function x(){const e=Ri({screen:$t.CurrentUserProfile,target:qm.EditCollection});d(e)}function f(){g(!0)}function _(){g(!1)}async function b(){d(Ri({target:qm.DeleteCollection})),await(0,Fe.kN5)({id:t}),(0,ls.sl)()}return(0,z.jsx)("div",{className:"featured-collection-container",children:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,testId:"featured-collection",children:(0,z.jsxs)("div",{className:"featured-collection",children:[(0,z.jsx)(gt.Z,{title:n,body:s?o?l:c("box_inactive_subtitle"):c("box_title"),suffix:function(){if(!s)return null;if(!o){const e=[{id:"edit",text:c("actions.edit"),url:(0,Me.xZc)(t),onClick:x},{id:"delete",text:c("actions.delete"),onClick:f}],i={styling:ic.I.Styling.Flat,deprecatedIcon:(0,z.jsx)(ht.Z,{name:"horizontal-dots",color:ht.Z.Color.GreyscaleLevel4,testId:"collection-actions-menu-button"}),size:ic.I.Size.Medium};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Lse,{actions:e,buttonProps:i}),(0,z.jsx)($8,{isOpen:p,onSubmit:b,onClose:_})]})}return(0,z.jsx)(ic.I,{text:c("actions.edit"),styling:ic.I.Styling.Flat,size:ic.I.Size.Medium,url:(0,Me.xZc)(t),onClick:x,testId:"featured-collection-box--action-edit"})}(),testId:"featured-collection-box"}),a?(0,z.jsx)("div",{className:y()("u-overflow-hidden",{"featured-collection__items--inactive":!o}),children:(0,z.jsx)(v$,{children:i.map(((e,t)=>(0,z.jsx)(Jp.h,{onEnter:h(e,t),horizontal:!0,children:(0,z.jsx)(ore,{item:e,viewingSelf:s,allowBump:r,tracking:{id:e.id,contentType:z0.Item,contentSource:Es.FeaturedCollection,position:t+1},isDescriptionHidden:!o})},"collection-item-".concat(e.id))))})}):(0,z.jsx)(tc.Z,{body:c("empty_state.box.body"),action:(0,z.jsx)(ic.I,{text:c("empty_state.box.action"),styling:ic.I.Styling.Filled,url:(0,Me.xZc)(t)})})]})})})},cre=e=>{let{collections:t,viewingSelf:i,allowBump:n}=e;const s=E(),{track:r}=vi(),a=U(),[o,l]=(0,m.useState)(!1),c=t[0];return!c||!i&&(0,v.isEmpty)(c.items)?null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(lre,{...c,viewingSelf:i,allowBump:n,hasItems:!!c.items.length}),!c.isActive&&(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,text:a("featured_collection.actions.activate"),size:s.phones?ic.I.Size.Medium:void 0,inline:!s.phones,onClick:function(){l(!0),r(Ri({screen:$t.CurrentUserProfile,target:qm.ActivateFeaturedCollection}))}}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium,orientation:s.phones?x.Z.Orientation.Horizontal:x.Z.Orientation.Vertical}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:a("featured_collection.activation_note")}),(0,z.jsx)(Wse,{show:o,isFeaturedCollectionCreated:!0,onNextAction:function(){c&&(r(Ri({screen:$t.FeaturedCollection,target:qm.ReviewCollection})),(0,ls.ru)((0,Me.xZc)(c.id)))},onBack:function(){l(!1)}})]})]})},dre=e=>{let{user:t,isSystem:i=!1}=e;return i?(0,z.jsx)(wx,{id:"user.system_name"}):t?(0,z.jsx)("a",{className:"u-disable-underline",href:t.profileUrl,children:t.login}):(0,z.jsx)(wx,{id:"user.deleted_user"})},ure=e=>{let{user:t,size:i,isSystem:n}=e;return n?(0,z.jsx)(Tp,{styling:Kl.U.Styling.Circle,size:i,isSystem:!0}):t?(0,z.jsx)("a",{href:t.profileUrl,children:(0,z.jsx)(Tp,{styling:Kl.U.Styling.Circle,size:i,src:t.photoUrl})}):(0,z.jsx)(Tp,{styling:Kl.U.Styling.Circle,size:i})};function mre(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const pre={feedbackToggleReply:HF.feedbackToggleReply,feedbackToggleDelete:HF.feedbackToggleDelete},gre=(0,p.$j)(null,pre);class hre extends m.Component{constructor(){super(...arguments),mre(this,"handleReply",(()=>{const{id:e,feedbackToggleReply:t}=this.props;return t({feedbackId:e})})),mre(this,"handleDelete",(()=>{const{id:e,feedbackToggleDelete:t}=this.props;return t({feedbackId:e})}))}render(){const{canReply:e,canChange:t,canDelete:i,editFeedbackUrl:n}=this.props;return(0,z.jsxs)(L,{children:[e&&(0,z.jsx)(ic.I,{text:(0,z.jsx)(wx,{id:"user.feedback.reply"}),deprecatedIcon:(0,z.jsx)(ht.Z,{name:"arrow-back",size:ht.Z.Size.XSmall,color:"parent"}),inline:!0,size:ic.I.Size.Small,theme:"muted",onClick:this.handleReply}),t&&(0,z.jsx)(ic.I,{text:(0,z.jsx)(wx,{id:"user.feedback.edit"}),deprecatedIcon:(0,z.jsx)(ht.Z,{name:"pencil",size:ht.Z.Size.XSmall,color:"parent"}),inline:!0,size:ic.I.Size.Small,theme:"muted",url:n}),i&&(0,z.jsx)(ic.I,{text:(0,z.jsx)(wx,{id:"user.feedback.delete"}),deprecatedIcon:(0,z.jsx)(ht.Z,{name:"x",size:ht.Z.Size.XSmall,color:"parent"}),inline:!0,size:ic.I.Size.Small,theme:"muted",onClick:this.handleDelete})]})}}const xre=gre(hre);function fre(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const yre={feedbackToggleCancel:HF.feedbackToggleCancel,feedbackCommentCreateRequest:HF.feedbackCommentCreateRequest,feedbackCommentEditRequest:HF.feedbackCommentEditRequest},vre=(0,p.$j)(((e,t)=>{let{id:i}=t;return{comment:MD(e,i),uiState:XD(e,i),error:YD(e,i)}}),yre);class _re extends m.Component{constructor(){super(...arguments),fre(this,"state",{text:this.props.comment?this.props.comment.text:"",error:null}),fre(this,"handleChange",(e=>{this.setState({text:e.currentTarget.value})})),fre(this,"handleValueClear",(()=>{this.setState({text:""})})),fre(this,"handleCancel",(()=>{const{id:e,feedbackToggleCancel:t}=this.props;return t({feedbackId:e})})),fre(this,"handleEdit",(()=>{const{text:e,error:t}=this.state,{id:i,comment:n,feedbackCommentCreateRequest:s,feedbackCommentEditRequest:r,intl:a}=this.props;e?(t&&this.setState({error:null}),(n?r:s)({feedbackId:i,comment:this.state.text})):this.setState({error:a.formatMessage({id:"user.feedback.empty_message"})})}))}renderValidation(){const{error:e}=this.state,{uiState:t,error:i}=this.props;let n;if(e)n=e;else{if(t!==Ne.Failure||null==i||!i.errors||i.code!==pm.Q.ValidationError)return null;const e=i.errors.find((e=>{let{field:t}=e;return"comment"===t}));if(!e)return null;n=e.value}return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{}),(0,z.jsx)(zm.Z,{text:n,theme:"warning"})]})}render(){const{uiState:e}=this.props;return(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(Tm.N,{placeholder:"",name:"create-comment",value:this.state.text,onChange:this.handleChange,onValueClear:this.handleValueClear,isMultiline:!0,maxRows:1,max:400}),this.renderValidation(),(0,z.jsx)(x.Z,{}),(0,z.jsx)(ic.I,{text:(0,z.jsx)(vt.Z,{id:"user.feedback.cancel"}),size:ic.I.Size.Medium,styling:ic.I.Styling.Flat,inline:!0,onClick:this.handleCancel}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(ic.I,{text:(0,z.jsx)(vt.Z,{id:"user.feedback.reply"}),size:ic.I.Size.Medium,styling:ic.I.Styling.Filled,inline:!0,onClick:this.handleEdit,isLoading:e===Ne.Pending})]})}}const bre=vre((0,iw.ZP)(_re));function jre(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Sre={feedbackToggleCommentDelete:HF.feedbackToggleCommentDelete,feedbackToggleCommentEdit:HF.feedbackToggleCommentEdit},Zre=(0,p.$j)(null,Sre);class Ire extends m.Component{constructor(){super(...arguments),jre(this,"handleDelete",(()=>{const{id:e,feedbackToggleCommentDelete:t}=this.props;return t({feedbackId:e})})),jre(this,"handleEdit",(()=>{const{id:e,feedbackToggleCommentEdit:t}=this.props;return t({feedbackId:e})})),jre(this,"renderCommentActions",(()=>{const{canDeleteComment:e,canChangeComment:t}=this.props;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{}),(0,z.jsxs)(L,{children:[t&&(0,z.jsx)(ic.I,{text:(0,z.jsx)(vt.Z,{id:"user.feedback.edit"}),deprecatedIcon:(0,z.jsx)(ht.Z,{name:"pencil",size:ht.Z.Size.XSmall,color:"parent"}),inline:!0,size:ic.I.Size.Small,theme:"muted",onClick:this.handleEdit}),e&&(0,z.jsx)(ic.I,{text:(0,z.jsx)(vt.Z,{id:"user.feedback.delete"}),deprecatedIcon:(0,z.jsx)(ht.Z,{name:"x",size:ht.Z.Size.XSmall,color:"parent"}),inline:!0,size:ic.I.Size.Small,theme:"muted",onClick:this.handleDelete})]})]})}))}render(){const{user:e,text:t,isSystem:i}=this.props.comment;return(0,z.jsxs)(gt.Z,{title:(0,z.jsx)(dre,{user:e,isSystem:i}),prefix:(0,z.jsx)(ure,{user:e,size:Kl.U.Size.Medium,isSystem:i}),children:[(0,z.jsx)(xt.Z,{children:t}),this.renderCommentActions()]})}}const Cre=Zre(Ire);function kre(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class wre extends m.Component{constructor(){super(...arguments),kre(this,"translate",(e=>this.props.intl.formatMessage({id:"user.feedback.modal.".concat(e)})))}render(){const{isOpen:e,onClose:t,onSubmit:i}=this.props;return(0,z.jsx)(cp.Z,{show:e,title:this.translate("title"),body:this.translate("body"),actions:[{text:this.translate("action_delete"),style:cp.Z.ActionStyling.Filled,theme:"warning",callback:i},{text:this.translate("action_close"),callback:t}]})}}kre(wre,"defaultProps",{isOpen:!1});const Pre=(0,iw.ZP)(wre),zre={feedbackInitiateTranslation:LD},Tre=(0,p.$j)(((e,t)=>{let{feedbackId:i}=t;return{isTranslated:KD(e,i)}}),zre);class Fre extends m.Component{constructor(){super(...arguments),function(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(this,"initiateTranslation",(e=>{const{feedbackId:t,feedbackInitiateTranslation:i}=this.props;i({feedbackId:t,localize:!e})}))}render(){const{feedbackId:e,isTranslated:t}=this.props;return(0,z.jsx)(Lx,{isTranslated:t,autotranslate:!1,onClick:this.initiateTranslation,tracking:{target:qm.TranslateFeedback,targetDetails:e.toString()}})}}const Nre=Tre(Fre);function Lre(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Ere={feedbackToggleCancel:HF.feedbackToggleCancel,feedbackDeleteRequest:HF.feedbackDeleteRequest,feedbackCommentDeleteRequest:HF.feedbackCommentDeleteRequest},Ore=(0,p.$j)(((e,t)=>{let{id:i}=t;return{feedback:QD(e,i),screen:WD(e,i)}}),Ere);class Rre extends m.Component{constructor(){super(...arguments),Lre(this,"translate",((e,t)=>this.props.intl.formatMessage({id:"user.".concat(e)},t))),Lre(this,"renderUsername",(()=>{const{user:e,isSystem:t}=this.props.feedback;return(0,z.jsx)(dre,{user:e,isSystem:t})})),Lre(this,"renderThumbnail",(()=>{const{user:e,isSystem:t}=this.props.feedback;return(0,z.jsx)(ure,{user:e,size:Kl.U.Size.Large,isSystem:t})})),Lre(this,"renderDate",(()=>{const{createdAt:e}=this.props.feedback;return(0,z.jsx)(Tt,{date:new Date(e),relativeDate:!0})})),Lre(this,"renderRating",(()=>{const{rating:e}=this.props.feedback;return(0,z.jsx)(Ox.Z,{value:e,aria:{"aria-label":e?this.translate("a11y.rating",{rating:e,max_rating:5}):""}})})),Lre(this,"renderFeedback",(()=>{const{text:e}=this.props.feedback;return(0,z.jsx)(xt.Z,{children:e})})),Lre(this,"renderActions",(()=>{const{id:e,canReply:t,canChange:i,canDelete:n}=this.props.feedback,{userId:s}=this.props;return(0,z.jsx)(xre,{id:e,editFeedbackUrl:(0,Me.NUJ)(s,e),canReply:t,canChange:i,canDelete:n})})),Lre(this,"renderComment",(()=>{const{screen:e}=this.props,{id:t,comment:i,canChangeComment:n,canDeleteComment:s}=this.props.feedback;switch(e){case zF.CreateComment:case zF.EditComment:return(0,z.jsx)(bre,{id:t});default:return i&&(0,z.jsx)(Cre,{id:t,comment:i,canChangeComment:n,canDeleteComment:s})}})),Lre(this,"handleFeedbackDelete",(()=>{const{screen:e,id:t,feedbackDeleteRequest:i,feedbackCommentDeleteRequest:n}=this.props;switch(e){case zF.DeleteFeedback:i({feedbackId:t});break;case zF.DeleteComment:n({feedbackId:t})}})),Lre(this,"handleCancel",(()=>{this.props.feedbackToggleCancel({feedbackId:this.props.id})}))}renderDeleteFeedbackModal(){const{screen:e}=this.props;return(0,z.jsx)(Pre,{isOpen:e===zF.DeleteFeedback||e===zF.DeleteComment,onSubmit:this.handleFeedbackDelete,onClose:this.handleCancel})}renderTranslationButton(){const{id:e,isContentTranslationEnabled:t}=this.props,{localization:i}=this.props.feedback;return t&&i&&i!==Ue.None?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{}),(0,z.jsx)(Nre,{feedbackId:e})]}):null}render(){return(0,z.jsxs)(gt.Z,{title:this.renderUsername(),prefix:this.renderThumbnail(),subtitle:this.renderDate(),styling:gt.Z.Styling.Tight,testId:"feedback-item",children:[this.renderRating(),(0,z.jsx)(x.Z,{}),this.renderFeedback(),(0,z.jsx)(x.Z,{}),this.renderActions(),(0,z.jsx)(x.Z,{}),this.renderComment(),this.renderTranslationButton(),this.renderDeleteFeedbackModal()]})}}const Dre=Ore((0,iw.ZP)(Rre)),Are=e=>{let{userId:t}=e;const i=E(),n=U("user.feedback.summary"),s=(0,p.v9)(Wt("web_transparent_autofeedback")),[r,a]=(0,m.useState)(null),[o,l]=(0,m.useState)(Ne.Idle);(0,m.useEffect)((()=>{s&&(async()=>{l(Ne.Pending);const e=await(0,Fe.ouQ)(t);if("errors"in e)return void l(Ne.Failure);const i=e.user_feedback_summary?(e=>({feedbackCount:e.feedback_count,feedbackRating:e.feedback_rating,userFeedbackCount:e.user_feedback_count,userFeedbackRating:e.user_feedback_rating,systemFeedbackCount:e.system_feedback_count,systemFeedbackRating:e.system_feedback_rating}))(e.user_feedback_summary):null;a(i),l(Ne.Success)})()}),[s,t]);const c=e=>{const t=()=>(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsx)(xt.Z,{text:e}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),e>0&&(0,z.jsx)("div",{className:"u-flexbox u-align-items-center",children:(0,z.jsx)(ht.Z,{name:"star-filled",color:ht.Z.Color.Expose,size:ht.Z.Size.Small,testId:"rating-icon"})})]});return(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Narrow,prefix:!i.portables&&t(),suffix:i.portables&&t()})},d=e=>{const t=y()("u-flexbox",{"u-nowrap":!i.portables});return(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Narrow,children:(0,z.jsx)("div",{className:t,children:(0,z.jsx)(xt.Z,{bold:!0,text:e})})})},u=()=>(0,z.jsx)("div",{className:"u-flexbox u-justify-content-flex-end u-nowrap",children:(0,z.jsx)(gt.Z,{styling:i.portables?gt.Z.Styling.Narrow:gt.Z.Styling.Wide,prefix:(0,z.jsx)(_p,{type:bp.LeavingFeedbackForBuyer,render:e=>(0,z.jsx)("a",{href:e,target:"_blank",rel:"noreferrer",children:n("learn_more")})})})}),g=y()("u-flexbox",{"u-flex-direction-column":i.portables,"u-flex-direction-row":!i.portables});return o===Ne.Pending?(0,z.jsx)(Mp,{}):o===Ne.Failure?(0,z.jsx)(sw,{}):s&&r?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:g,children:[i.portables&&(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(()=>{if(!r)return null;const e=i.portables?"u-flex-direction-column":"u-flex-direction-row",t=y()("u-flexbox u-flex-direction-column",{"u-align-items-center":i.portables});return(0,z.jsx)(gt.Z,{children:(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center ".concat(e),children:[(0,z.jsx)("p",{className:"rating-score-huge-text",children:r.feedbackRating}),(0,z.jsx)(x.Z,{orientation:i.portables?x.Z.Orientation.Horizontal:x.Z.Orientation.Vertical,size:x.Z.Size.Large}),(0,z.jsxs)("div",{className:t,children:[(0,z.jsx)(Ox.Z,{value:r.feedbackRating}),!i.portables&&(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:"(".concat(r.feedbackCount,")")})]}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Large}),!i.portables&&(r?(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column",children:[d(n("manual_feedback",{count:r.userFeedbackCount})),d(n("auto_feedback",{count:r.systemFeedbackCount}))]}):null)]})})})(),(()=>{if(!r)return null;const e=r.userFeedbackCount>0?c(r.userFeedbackRating):(0,z.jsx)(gt.Z,{children:(0,z.jsx)(x.Z,{})}),t=r.systemFeedbackCount>0?c(r.systemFeedbackRating):(0,z.jsx)(gt.Z,{children:(0,z.jsx)(x.Z,{})});return(0,z.jsx)(gt.Z,{children:(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column",children:[(0,z.jsxs)("div",{className:"u-flexbox",children:[i.portables&&d(n("manual_feedback",{count:r.userFeedbackCount})),e]}),(0,z.jsxs)("div",{className:"u-flexbox",children:[i.portables&&d(n("auto_feedback",{count:r.systemFeedbackCount})),t]}),i.portables&&u()]})})})(),!i.portables&&u()]}),(0,z.jsx)(h.Z,{})]}):null};let Mre;!function(e){e.All="all",e.Members="user",e.Auto="system"}(Mre||(Mre={}));const Ure=e=>{let{selectedFeedbackFilterType:t,showFilters:i,onClick:n}=e;const s=U("user.feedback.filters"),{track:r}=vi(),a=(0,p.v9)(Wt("web_transparent_autofeedback")),o=e=>{switch(e){case Mre.Auto:return qm.FeedbackAutoReviewsFilter;case Mre.Members:return qm.FeedbackMemberReviewsFilter;default:return qm.FeedbackAllReviewsFilter}},l=e=>()=>{r(Ri({target:o(e),screen:$t.UserProfile})),n(e)};return a&&i?(0,z.jsx)(gt.Z,{children:(0,z.jsx)("div",{className:"u-flexbox",children:(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),children:[(0,z.jsx)(Jw.j,{activated:t===Mre.All,text:s("all"),textType:xt.Z.Type.Subtitle,onClick:l(Mre.All)}),(0,z.jsx)(Jw.j,{activated:t===Mre.Members,text:s("members"),textType:xt.Z.Type.Subtitle,onClick:l(Mre.Members)}),(0,z.jsx)(Jw.j,{activated:t===Mre.Auto,text:s("auto"),textType:xt.Z.Type.Subtitle,onClick:l(Mre.Auto)})]})})}):null};function Bre(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const qre={feedbackGetRequest:HF.feedbackGetRequest,feedbackClearIds:HF.feedbackClearIds,feedbackResetCurrentPage:HF.feedbackResetCurrentPage},Vre=(0,p.$j)((e=>({feedbackIds:AD(e),uiState:qD(e),endReached:GD(e),isTransparentFeedbackEnabled:Wt("web_transparent_autofeedback")(e),showFilters:JD(e)})),qre);class Hre extends m.Component{constructor(){super(...arguments),Bre(this,"state",{selectedFeedbackFilterType:Mre.All}),Bre(this,"fetchFeedback",(()=>{const{feedbackGetRequest:e,userId:t,endReached:i}=this.props,{selectedFeedbackFilterType:n}=this.state;i||e({userId:t,feedbackFilterType:n})})),Bre(this,"translate",((e,t)=>(0,z.jsx)(wx,{id:"user.feedback.".concat(e),values:t}))),Bre(this,"showEmptyState",(()=>{const{uiState:e,endReached:t,feedbackIds:i}=this.props;return e!==Ne.Pending&&t&&!i.length})),Bre(this,"renderFeedbackItem",(()=>{const{feedbackIds:e,userId:t,isContentTranslationEnabled:i}=this.props;return e.map(((n,s)=>(0,z.jsxs)(m.Fragment,{children:[(0,z.jsx)(Dre,{id:n,userId:t,isContentTranslationEnabled:i}),s!==e.length-1&&(0,z.jsx)("div",{className:"u-ui-margin-vertical-medium",children:(0,z.jsx)(h.Z,{})})]},n)))})),Bre(this,"handleFilterChipClicked",(e=>{const{feedbackClearIds:t,feedbackResetCurrentPage:i}=this.props;this.setState({selectedFeedbackFilterType:e}),i(),t()}))}renderEmptyState(){return this.showEmptyState()?(0,z.jsx)(tc.Z,{animation:(0,z.jsx)(u.Z,{animationUrl:"".concat(Be.Fv,"/assets/animations/performance-empty-state.json")}),title:(0,z.jsx)(wx,{id:"user.feedback.empty_state.title"}),body:(0,z.jsx)(wx,{id:"user.feedback.empty_state.body"})}):null}renderFeedbackBanner(){const{canAddFeedback:e,leaveFeedbackUrl:t}=this.props;return e&&t?(0,z.jsx)(w8,{title:(0,z.jsx)(xt.Z,{text:this.translate("had_a_deal"),type:xt.Z.Type.Title}),body:(0,z.jsx)(xt.Z,{text:this.translate("leave_feedback_about_deal")}),actions:[(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,text:this.translate("leave_feedback"),url:t})]}):null}renderReadMoreBlock(){const{readMoreUrl:e,isTransparentFeedbackEnabled:t}=this.props;return e?(0,z.jsx)(yt.Z,{type:yt.Z.Type.Leading,text:this.translate("most_recent"),suffix:!t&&(0,z.jsx)("a",{className:"u-disable-underline",href:e,children:this.translate("read_more")})}):null}renderLoader(){const{uiState:e}=this.props;return e!==Ne.Pending?null:(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center",children:(0,z.jsx)(Dp.Z,{size:Dp.Z.Size.Large})})}renderFeedbackContent(){const{feedbackIds:e}=this.props;return(0,z.jsxs)(z.Fragment,{children:[this.renderReadMoreBlock(),(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(Qp,{renderItems:this.renderFeedbackItem,onPageEnd:this.fetchFeedback,cursor:"feedback-".concat(e.length)}),this.renderLoader()]})]})}renderInfoBanner(){const e=Kp,t=qm.MergeReviewsBanner;return(0,z.jsx)(e,{screen:Hp.Reviews,linkTracking:{target:t}})}renderHeader(){const{username:e,showTitle:t}=this.props;return(0,z.jsxs)(z.Fragment,{children:[this.renderInfoBanner(),t&&(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,children:this.translate("title",{username:e})})]})}render(){return(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),children:[this.renderHeader(),this.renderFeedbackBanner(),(0,z.jsx)(Are,{userId:this.props.userId}),(0,z.jsx)(Ure,{selectedFeedbackFilterType:this.state.selectedFeedbackFilterType,showFilters:this.props.showFilters,onClick:this.handleFilterChipClicked}),this.renderEmptyState()||this.renderFeedbackContent()]})}}const Gre=Vre(Hre),Wre=e=>({id:e.id,title:e.title,discount:e.discount,items:e.items,isActive:e.is_active,humanizedTimeLeft:e.humanized_time_left||void 0});function Xre(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Yre={setUserItems:CN.setUserItems},Kre=(0,p.$j)((e=>({isPortalMergeSourceEnabled:e.featureSwitches.portal_merge_source||!1,multipleCollectionsAbTest:Vn("multiple_collections")(e)})),Yre),Jre=e=>e.filter((e=>e.is_draft)),Qre=e=>e.filter((e=>{var t;return(null===(t=e.item_alert)||void 0===t?void 0:t.item_alert_type)===Fa.ReplicaProof}));class $re extends m.Component{constructor(){super(...arguments),Xre(this,"state",{currentPage:0,endReached:!1,isLoading:!1,items:[],itemsCount:0,totalItemsCount:0,catalogs:[],collections:[],user:null,filters:{sortBy:uR.Relevance,catalogId:null},currentFilter:void 0,userInfo:{showSupportFunctionality:!1,canSendTemplates:!1,feedbackProps:{canAddFeedback:!1,leaveFeedbackUrl:void 0}},showActions:!0}),Xre(this,"draftItems",[]),Xre(this,"replicaItems",[]),Xre(this,"fetchUser",(async()=>{const e=await(0,Fe.GAF)({id:this.props.userId});"errors"in e||(this.setState({user:e.user}),this.setShowActions())})),Xre(this,"fetchUserInfo",(async()=>{const e=await(0,Fe.WOq)(this.props.userId);"errors"in e||this.setState({userInfo:{showSupportFunctionality:e.show_support_functionality,canSendTemplates:e.can_send_templates,feedbackProps:{canAddFeedback:e.can_add_feedback,leaveFeedbackUrl:"string"==typeof e.url_for_last_unfeedbacked_transaction?e.url_for_last_unfeedbacked_transaction:void 0},isShadowBanned:null==e?void 0:e.shadow_banned}})})),Xre(this,"fetchCollections",(async()=>{const{userId:e}=this.props,t=await(0,Fe.FGC)({userId:e});if("errors"in t)return;const i=t.featured_collections.map(Wre);this.setState({collections:i})})),Xre(this,"resolveTotalItemsCount",(e=>{let{isAllItemsFilterSelected:t,isCatalogSelected:i,itemCount:n}=e;const{totalItemsCount:s}=this.state;return i||!t?s:n})),Xre(this,"fetchItems",(async e=>{const{userId:t,pageSize:i}=this.props,{currentPage:n,endReached:s,filters:r,isLoading:a,currentFilter:o}=this.state,l=o!==e,c=!e;if(!l&&(s||a))return;l&&(this.setState({items:[]}),this.replicaItems=[]),this.setState({isLoading:!0,currentFilter:e});const d=await(0,Fe.RDp)({userId:t,currentPage:l?0:n,perPage:i,order:r.sortBy,catalogIds:r.catalogId?[r.catalogId]:void 0,filter:e});if(this.state.currentFilter!==e)return;if("errors"in d&&(0,ls.ji)("Items fetching error, status code: ".concat(d.status||"null",", message: ").concat(d.message),{feature:"closet_filtering",extra:e||"all"}),"errors"in d||!d.items&&!d.drafts)return void this.setState({isLoading:!1});const{current_page:u,total_pages:m,total_entries:p}=d.pagination,g=this.resolveTotalItemsCount({isAllItemsFilterSelected:c,isCatalogSelected:!!r.catalogId,itemCount:p});0===g&&l&&c&&(0,ls.ji)("Total item count decreased to zero",{feature:"closet_filtering"});const h=Qa(d);this.draftItems=(0,v.uniqBy)([...this.draftItems,...Jre(d.items)],"id"),this.replicaItems=(0,v.uniqBy)([...this.replicaItems,...Qre(d.items)],"id"),this.setState((e=>({currentPage:u,endReached:u===m,itemsCount:p,totalItemsCount:g,isLoading:!1,items:(0,v.uniqBy)([...this.replicaItems,...e.items,...h],"id")})))})),Xre(this,"fetchUserItemFacets",(async()=>{const{userId:e}=this.props,[t,i]=await Promise.all([(0,Fe.jkM)(),(0,Fe.Nuq)({userId:e})]);if("errors"in t||"errors"in i)return void this.setState({catalogs:[]});const n=XO(t.catalogs,i.catalogs);this.setState({catalogs:n})})),Xre(this,"updateItems",(e=>{this.setState({items:(0,v.uniqBy)([...this.replicaItems,...this.draftItems,...e],"id")})})),Xre(this,"updateFilters",(async e=>{const{userId:t,pageSize:i}=this.props;this.setState({isLoading:!0,filters:e});const n=await(0,Fe.RDp)({userId:t,currentPage:0,perPage:i,order:e.sortBy,catalogIds:null===e.catalogId?null:[e.catalogId]});if("errors"in n||!n.items&&!n.drafts)return void this.setState({isLoading:!1});const{current_page:s,total_pages:r,total_entries:a}=n.pagination,o=Qa(n);this.setState({currentPage:s,endReached:s===r,itemsCount:a,isLoading:!1,items:o})})),Xre(this,"setShowActions",(()=>{if(!this.state.user)return;const e=!this.props.isPortalMergeSourceEnabled&&!(this.state.user.is_hated||this.state.user.hates_you)&&this.state.user.allow_direct_messaging;this.setState((()=>({showActions:e})))}))}componentDidMount(){const{multipleCollectionsAbTest:e}=this.props,t=!(null==e||!e.variant)&&(null==e?void 0:e.variant)!==$k.Off;this.fetchItems(),this.fetchUser(),this.fetchUserItemFacets(),this.fetchUserInfo(),t||this.fetchCollections()}componentDidUpdate(){const{items:e}=this.state;this.props.setUserItems({items:e})}render(){const{children:e}=this.props,{user:t,items:i,catalogs:n,collections:s,isLoading:r,itemsCount:a,totalItemsCount:o,filters:l,userInfo:c,showActions:d}=this.state;return(0,z.jsx)(z.Fragment,{children:e({user:t,userInfo:c,showActions:d,items:i,catalogs:n,collections:s,isLoading:r,itemsCount:a,totalItemsCount:o,filters:l,fetchMoreItems:this.fetchItems,updateItems:this.updateItems,updateFilters:this.updateFilters})})}}Xre($re,"defaultProps",{pageSize:Be.L8});const eae=Kre($re),tae=e=>{let{userId:t}=e;(0,m.useEffect)((()=>{const e=document.getElementById("profile-admin-section-iframe");e.addEventListener("load",(()=>{var t;const i=e.contentDocument||(null===(t=e.contentWindow)||void 0===t?void 0:t.document);if(!i)return;i.body.style.overflow="hidden";const n=i.createElement("base");n.target="_parent",i.head.appendChild(n);const s=i.querySelectorAll(".dropdown-wrapper"),r=i.querySelector(".body-content > .container");r&&(e.style.height="".concat(r.offsetHeight,"px"),new MutationObserver((()=>{s[0].classList.contains("open")||s[1].classList.contains("open")?e.style.height=r.offsetHeight>1400?"".concat(r.offsetHeight,"px"):"1400px":e.style.height="".concat(r.offsetHeight,"px")})).observe(i.body,{attributes:!0,attributeFilter:["class"],childList:!0,subtree:!0}))}))}),[]);const i=(0,ys.Iq)((0,Me.K6I)(t),{content_only:1});return(0,z.jsx)("iframe",{id:"profile-admin-section-iframe",title:"Admin section",style:{border:"none",width:"100%"},src:i})},iae={width:"100%",height:"100%"},nae={width:"calc(100% - 32px)",height:"calc(100% - 80px)",maxWidth:"1240px"},sae=e=>{let{isShown:t,viewingSelf:i,collectionId:n,onClose:s}=e;const{fetch:r,transformedData:a,isLoading:o,error:l}=ih(Fe._NN,jx),{track:c}=vi(),d=U("featured_collection.multiple.view_modal"),u=E(),p=u.tabletsUp?nae:iae;function g(){return"one-fifth"}(0,m.useEffect)((()=>{r({id:n})}),[r,n]);const f=(e,t)=>()=>{c(qi({id:e.id,position:t+1,contentType:z0.Item,contentSource:Es.FeaturedCollection}))};function y(e){let{itemId:t,isFollowEvent:i}=e;c(Ri({target:qm.Favourite})),c(Ai({itemId:t,isFollowEvent:i,contentSource:Es.FeaturedCollection}))}const v=e=>{const{item:{data:t},index:n}=e;return(0,z.jsx)(k0,{showOwner:!1,item:t,viewingSelf:i,testId:"collection-item-".concat(t.id),showStatus:!0,onClick:f(t,n),onFavouriteToggle:y})};return(0,z.jsx)(cp.Z,{show:t,hasScrollableContent:!0,contentDimensions:p,"data-testid":"collection-view-modal",children:(0,z.jsxs)("div",{className:"u-fill-width",children:[(0,z.jsx)(Pm.Z,{right:(0,z.jsx)(ic.I,{type:ic.I.Type.Button,iconName:$y.Z,theme:"amplified",styling:ic.I.Styling.Flat,inline:!0,testId:"collection-view-modal-close-button",onClick:s}),body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,text:d("title")})}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(Lg,{children:function(){if(l)return(0,z.jsx)(sw,{onCtaClick:ls.sl});if(o||!a)return(0,z.jsx)(Mp,{styling:Mp.Styling.Wide,size:Mp.Size.Large,testId:"view-modal-loader"});const e=a.items.map((e=>({id:e.id,data:e})));return(0,z.jsxs)("div",{className:"regular-container",children:[(0,z.jsx)(x.Z,{}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{type:u.tabletsUp?xt.Z.Type.Heading:xt.Z.Type.Title,text:a.title})}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(nc.Z,{styling:nc.Z.Styling.Narrow,children:(0,z.jsx)(V2,{items:e,renderItem:v,widthResolver:g})})]})}()})]})})},rae="".concat(Be.Fv,"/assets/no-photo/upload/2x/hanger.png"),aae=e=>{let{collection:t,viewingSelf:i}=e;const n=U("featured_collection.multiple.collections_block"),[s,r]=(0,m.useState)(!1),{id:a,title:o,itemsCount:l,itemsPhotos:c,isActive:d,humanizedDiscountAmount:u}=t,p=()=>{r(!0)},g=e=>(0,z.jsx)("div",{className:"multiple-collections-block__collage-image collage--image-".concat(e),children:(0,z.jsx)(Kl.U,{src:c[e-1],ratio:Kl.U.Ratio.Square,scaling:Kl.U.Scaling.Cover,testId:"collections-box-collage-image-".concat(e)})});return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:y()("u-flexbox u-flex-direction-column",{"multiple-collections-block__box--inactive":!d}),"data-testid":"collection-".concat(a),children:[(0,z.jsxs)("div",{className:"multiple-collections-block__square-box-container u-position-relative",children:[0===c.length?(0,z.jsx)("div",{className:"u-background-greyscale-level-6 u-fill-height",children:(0,z.jsx)(Kl.U,{src:rae,testId:"collections-box-empty-state"})}):c.length<3?g(1):(0,z.jsxs)("div",{className:"multiple-collections-block__collage",children:[g(1),g(2),g(3)]}),u?(0,z.jsx)("div",{className:"multiple-collections-block__box-content",children:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Narrow,theme:"transparent",children:(0,z.jsx)("div",{className:"u-flexbox u-flex-direction-column u-align-items-flex-start u-gap-small",children:(0,z.jsx)(oC.Z,{theme:"warning",content:u})})})}):null,(()=>{const e=0===l;return(0,z.jsx)("div",{className:"multiple-collections-block__box-content u-flexbox u-fill-height u-fill-width",children:(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,theme:"transparent",onClick:e?void 0:p,url:e?(0,Me.xZc)(a):void 0,testId:"collection-box-overlay"})})})()]}),(0,z.jsx)(x.Z,{}),(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column",children:[(0,z.jsx)("div",{className:"u-text-wrap",children:(0,z.jsx)(xt.Z,{text:o,type:xt.Z.Type.Body,theme:"amplified"})}),(0,z.jsx)(xt.Z,{text:n("collection_item_count",{count:l},{count:l}),type:xt.Z.Type.Caption,theme:"muted"})]})]}),s&&(0,z.jsx)(sae,{isShown:s,onClose:()=>{r(!1)},viewingSelf:i,collectionId:a})]})};var oae=i(46957);const lae=()=>{const e=U(),{track:t}=vi();return(0,z.jsxs)("div",{children:[(0,z.jsx)(g.Z,{children:(0,z.jsx)("div",{className:"u-flexbox u-fill-height multiple-collections-block__square-box-container",children:(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,theme:"transparent",onClick:function(){t(Ri({screen:$t.CurrentUserProfile,target:qm.AddCollection})),(0,ls.ru)(Me.bDw)},testId:"multiple-collections-add-collection-button",children:(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center",children:(0,z.jsx)(Wy.Z,{color:Wy.Z.Color.Primary,name:oae.Z,display:Wy.Z.Display.InlineBlock})})})})}),(0,z.jsx)(x.Z,{}),(0,z.jsx)("div",{children:(0,z.jsx)(xt.Z,{text:e("featured_collection.multiple.collections_block.actions.add"),type:xt.Z.Type.Title,theme:"amplified"})})]})},cae=e=>{let{viewingSelf:t,userId:i}=e;const{collectionsData:n,error:s}=(e=>{const{fetch:t,transformedData:i,isLoading:n,error:s}=ih(Fe.bGW,bx);return(0,m.useEffect)((()=>{e&&t({userId:e})}),[t,e]),{collectionsData:i,isLoading:n,error:s}})(i),r=U("featured_collection.multiple.collections_block"),a=E(),{track:o}=vi(),l=(0,m.useRef)([]),[c,d]=(0,m.useState)(!1);if(!n||s)return null;const{humanizedTimeLeft:u,maxActiveCount:p,maxTotalCount:g,collections:h}=n,f=h.filter((e=>e.isActive)).length,y=h.filter((e=>e.itemsCount>0)).length;const v=(e,t)=>()=>{l.current.includes(e.id)||(o(Bi({id:e.id,position:t+1,contentType:z0.FeaturedCollection,contentSource:Es.FeaturedCollection})),l.current.push(e.id))};return h.length||0!==p?!t&&!f||!t&&!y?null:(0,z.jsxs)("div",{className:"multiple-collections-block",children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(gt.Z,{title:t?p?"".concat(r("title")," (").concat(f,"/").concat(p,")"):r("preview_title"):r("title"),body:t?p?u:r("subtitle"):null,styling:gt.Z.Styling.Tight,theme:"transparent",suffix:t?(0,z.jsx)(ic.I,{text:r("actions.manage"),styling:ic.I.Styling.Flat,size:ic.I.Size.Medium,testId:"collections-block-manage-button",onClick:function(){o(Ri({screen:$t.CurrentUserProfile,target:qm.ManageCollections})),(0,ls.ru)(Me.CR5)}}):null}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]}),(0,z.jsxs)(v$,{controlsScrollType:f$.Partial,children:[h.map(((e,i)=>t||e.isActive&&0!==e.itemsCount?(0,z.jsx)(Jp.h,{onEnter:v(e,i),horizontal:!0,children:(0,z.jsx)(v$.Item,{className:"multiple-collections-block__scroll-item",children:(0,z.jsx)(aae,{collection:e,viewingSelf:t})})},"collection-".concat(e.id)):null)),t&&g?h.length>=g?null:(0,z.jsx)(v$.Item,{className:"multiple-collections-block__scroll-item",children:(0,z.jsx)(lae,{})}):null]}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),!t||p?null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(ic.I,{type:ic.I.Type.Button,text:r("actions.activate"),styling:ic.I.Styling.Filled,theme:"primary",onClick:function(){o(Ri({screen:$t.CurrentUserProfile,target:qm.ActivateFeaturedCollections})),d(!0)},size:a.phones?ic.I.Size.Medium:void 0,inline:!a.phones}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(u6,{show:c,onClose:function(){d(!1)},onSuccess:function(){(0,ls.ru)((0,Me.G0B)(i))}})]})]}):null};class dae extends m.Component{defaultContent(){if(!this.props.data)return null;const{iconName:e,color:t,text:i,enableHtml:n,theme:s}=this.props.data;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{children:(0,z.jsx)(ht.Z,{name:e,color:t,size:ht.Z.Size.Small})}),(0,z.jsx)("div",{children:(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical})}),(0,z.jsx)("div",{children:(0,z.jsx)(xt.Z,{text:i,html:n,theme:s})})]})}renderContent(){const{children:e,useFlexbox:t}=this.props,i=e||this.defaultContent();return t?(0,z.jsx)(gt.Z,{children:(0,z.jsx)("div",{className:"u-flexbox",children:i})}):i}render(){return this.renderContent()}}!function(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}(dae,"defaultProps",{useFlexbox:!1});const uae=dae,mae=(e,t,i)=>{const n={text:t,enableHtml:i,iconName:"block",theme:"warning",color:ht.Z.Color.Warning};return(0,z.jsx)(uae,{useFlexbox:!0,data:n},e)},pae=(e,t,i)=>{const n={text:e,iconName:t,color:i};return(0,z.jsx)(uae,{useFlexbox:!0,data:n})},gae=e=>{let{compactMode:t=!1,onUserInfoClick:i,user:n,screen:s,viewingSelf:r=!1,showActions:a=!0,isShadowBanned:o=!1,showSupportFunctionality:l,canSendTemplates:c,isContentTranslationEnabled:d,isAvailableForMigration:u,onTogglePoliciesModal:f=v.noop}=e;const{relativeUrl:y}=xc(),_=U("user"),[b,j]=(0,m.useState)(!1),[S,Z]=(0,m.useState)(null),[I,C]=(0,m.useState)(!1),k=(0,p.v9)(Wt("profile_blocking_improvements")),w=(0,p.v9)(W),{business:P}=n;function T(e){return e?void j(!1):async function(){if(S)return void j(!0);const e=await(0,Fe.GAF)({id:n.id,localize:!0});if("errors"in e)return;const{about:t}=e.user;t&&(Z({about:t}),j(!0))}()}const F=async()=>{if(!w)return;const e=n.is_hated?Fe.zvU:Fe.rfe;await e({currentUserId:w.id,blockedUserId:n.id}),(0,ls.sl)()};function N(){k?C(!0):F()}function E(){const e=n.photo?n.photo.url:Ke();return(0,z.jsx)(Kl.U,{src:e,scaling:Kl.U.Scaling.Fill})}function O(e,t){return(r||l||n.is_god)&&!t?e:"".concat(e,"_no_date")}function R(){var e,t;const{localization:i,id:s}=n,a=b&&S?S:n,o=d&&i&&i!==Ue.None,c=l||!r,u=n.is_hated?_("action.unblock"):_("action.block"),m=[{id:"report",text:_("action.report"),url:(0,ys.Iq)(Me.iDM,{ref_id:n.id,ref_type:_P.Member,ref_url:y})},{id:n.is_hated?"unblock":"block",text:u,onClick:N}],p={styling:ic.I.Styling.Flat,deprecatedIcon:(0,z.jsx)(ht.Z,{name:"horizontal-dots",color:ht.Z.Color.GreyscaleLevel4,testId:"actions-menu-button"}),size:ic.I.Size.Medium},g=null!==(e=null==a?void 0:a.about)&&void 0!==e?e:"";return(0,z.jsx)(uae,{children:(0,z.jsxs)(gt.Z,{children:[(0,z.jsxs)("div",{className:"u-flexbox u-justify-content-between",children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,truncate:!0,text:(0,z.jsx)(kK,{businessAccountName:null===(t=n.business_account)||void 0===t?void 0:t.name,login:n.login,isBusiness:n.business,isBadgeHidden:!0,isLoginForced:!0})}),c&&(0,z.jsx)("div",{children:(0,z.jsx)(Lse,{actions:m,buttonProps:p})})]}),g&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{format:!0,children:(0,z.jsx)(XP,{text:g})}),o&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{}),(0,z.jsx)(Lx,{isTranslated:b,autotranslate:!1,onClick:T,tracking:{target:qm.TranslateDescription,targetDetails:s.toString()}})]})]})]})})}function D(){const{is_hated:e,account_ban_date:t,forum_ban_date:i,account_status:s,id:r,is_forum_ban_permanent:a,is_account_ban_permanent:l}=n,c=s===Be.Tf,d=(0,v.compact)([!e&&t&&mae("banned",_(O("admin.messages.banned",!!l),{date:t})),e&&(0,z.jsx)(uae,{children:(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(Ese,{iconName:"block",iconColor:ht.Z.Color.Warning,children:(0,z.jsx)(xt.Z,{theme:"warning",children:_("admin.messages.blocked")})}),k&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(ic.I,{text:_("action.unblock"),styling:ic.I.Styling.Filled,onClick:N})]})]})},"blocked-warning"),!e&&i&&mae("forum_banned",_(O("admin.messages.forum_banned",!!a),{date:i})),o&&mae("shadow_banned_no_date",_("admin.messages.shadow_banned_no_date")),c&&mae("deleted",_("admin.messages.deleted",{"member-restore-url":e=>(0,z.jsx)("a",{href:(0,Me.m21)(r),children:e})}),!0)]);return(0,v.isEmpty)(d)?null:d}function A(){const{feedback_reputation:e,feedback_count:t}=n,s=$e(e);return(0,z.jsx)(uae,{children:(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,onClick:i,chevron:!0,children:(0,z.jsx)(Ox.Z,{aria:{"aria-label":s&&_("a11y.rating",{rating:s,max_rating:5})||""},value:s,text:_("feedback.reviews",{count:t},{count:t}),emptyStateText:_("feedback.no_reviews")})})})}function M(){var e;return null!==(e=n.fundraiser)&&void 0!==e&&e.active?(0,z.jsx)(uae,{children:(0,z.jsx)(qse,{user:n,screen:s})}):null}function B(){const{moderator:e,volunteer_moderator:t,is_identity:i,is_god:s}=n,r=(l||s)&&u,a=(0,v.compact)([e&&pae(_("status.product_team"),"shield-outlined",ht.Z.Color.Expose),t&&pae(_("status.volunteer_moderator"),"shield-outlined",ht.Z.Color.Success),i&&pae(_("status.identity_confirmed"),"check-circle",ht.Z.Color.Success),r&&pae(_("status.available_for_migration"),"check-circle-filled",ht.Z.Color.Success)]);return(0,v.isEmpty)(a)?null:a}function q(){var e;const t=P&&(null===(e=n.business_account)||void 0===e?void 0:e.email);return t?(0,z.jsx)(Ese,{iconName:"envelope",children:(0,z.jsx)("a",{href:"mailto:".concat(t),children:t})}):null}function V(){var e;if(!P)return null;const t=null===(e=n.business_account)||void 0===e?void 0:e.legal_code;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Ese,{iconName:"check-circle",children:_("verification.business_identity")}),t&&(0,z.jsxs)(Ese,{iconName:"check-circle",children:[_("verification.legal_code")," ",t]})]})}function H(){const e=Be.zR.filter((e=>{var t;return null===(t=n.verification[e])||void 0===t?void 0:t.valid}));return(0,v.isEmpty)(e)&&!P?null:t?(0,z.jsx)(Ese,{iconName:"check-circle",children:e.map((e=>_("verification.".concat(e)))).concat(P?[_("verification.business_identity")]:[]).join(", ")}):(0,z.jsx)(uae,{useFlexbox:!0,children:(0,z.jsxs)("div",{children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:(0,z.jsx)(wx,{id:"user.verification.title"})}),e.map((e=>(0,z.jsx)(Ese,{iconName:"check-circle",children:_("verification.".concat(e))},e))),V()]})})}function G(){const{expose_location:e,city:t,country_title_local:i}=n;let s="";return s=e&&t?[t,i].join(", "):i,(0,z.jsx)(Ese,{iconName:"location-pin",children:(0,z.jsx)(xt.Z,{text:s})})}function X(){const{followers_count:e,following_count:t,id:i}=n;return(0,z.jsx)(Dse,{followersCount:e,followingCount:t,userId:i,viewingSelf:r})}function Y(){const{email:e,last_loged_on_ts:t,created_at:i,msg_template_count:s}=n,r=new Date(i);return(0,z.jsx)(uae,{useFlexbox:!0,children:(0,z.jsxs)("div",{children:[G(),q(),t&&(0,z.jsx)(Ese,{iconName:"clock",children:(0,z.jsx)(xt.Z,{children:(0,z.jsx)(Tt,{id:"user.last_login",date:new Date(t),relativeDate:!0})})}),(0,z.jsx)(Ese,{iconName:"rss",children:X()}),l&&(0,z.jsx)(Ese,{iconName:"member",children:(0,z.jsx)(xt.Z,{children:(0,z.jsx)(Tt,{id:"user.since",date:r,relativeDate:!1})})}),l&&(0,z.jsx)(Ese,{iconName:"envelope",children:(0,z.jsx)(xt.Z,{text:e})}),c&&(0,z.jsx)(Ese,{iconName:"flag",children:(0,z.jsx)("a",{href:(0,Me.xem)(n.id),children:_("admin.template_count",{count:s},{count:s})})}),P?(0,z.jsx)(Ese,{iconName:"document",children:(0,z.jsx)("span",{onClick:f,children:(0,z.jsx)(xt.Z,{clickable:!0,text:_("seller_policies.title")})})}):null]})})}function K(){const e=a&&!r&&n.allow_direct_messaging,t=a&&!r&&!wt(n.closet_countdown_end_date),i=n.account_ban_date;return!e&&!t||i?null:(0,z.jsxs)(uae,{useFlexbox:!0,children:[e&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(ic.I,{text:_("action.write_message"),url:(0,ys.Iq)(Oc,{receiver_id:n.id,ref_url:y}),size:ic.I.Size.Medium,testId:"profile-info-message-button"}),(0,z.jsx)("div",{children:(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Large})})]}),t&&(0,z.jsx)(KQ,{userId:n.id,isActive:n.is_favourite,size:ic.I.Size.Medium,testId:"profile-info-follow-button"})]})}function J(){return(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[r?(0,z.jsx)(uae,{useFlexbox:!0,children:(0,z.jsx)(ic.I,{deprecatedIcon:(0,z.jsx)(ht.Z,{name:"pencil",color:ht.Z.Color.GreyscaleLevel3}),url:Me.Svv,text:_("action.edit_profile"),theme:"muted",size:ic.I.Size.Medium})}):null,R(),D(),M(),A(),B(),H(),Y(),K()]})}return t?(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[function(){var e;const{feedback_reputation:t,photo:s,feedback_count:r}=n,a=$e(t),o=s?s.url:Ke(),l={prefix:(0,z.jsx)(Kl.U,{src:o,styling:Kl.U.Styling.Circle,size:Kl.U.Size.Large}),title:(0,z.jsx)(kK,{businessAccountName:null===(e=n.business_account)||void 0===e?void 0:e.name,login:n.login,isBusiness:n.business}),body:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Ox.Z,{aria:{"aria-label":a&&_("a11y.rating",{rating:a,max_rating:5})||""},value:a,text:r,emptyStateText:_("feedback.no_reviews")}),(0,z.jsx)(x.Z,{size:x.Z.Size.Small})]}),type:gt.Z.Type.Navigating,onClick:i,chevron:!0,id:"profile-compact-info"};return(0,z.jsx)(gt.Z,{...l})}(),M(),(0,z.jsxs)(gt.Z,{children:[H(),G(),q(),(0,z.jsx)(Ese,{iconName:"rss",children:X()})]}),K()]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(V5,{breakpoint:"tablets",children:(0,z.jsx)(g.Z,{children:(0,z.jsxs)("div",{className:"u-overflow-hidden",children:[E(),J()]})})}),(0,z.jsxs)(Nm,{breakpoint:"tablets",children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Large}),(0,z.jsx)(g.Z,{children:(0,z.jsx)("div",{className:"u-overflow-hidden",children:E()})}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Large}),(0,z.jsx)("div",{className:"u-flex-grow",children:(0,z.jsx)(g.Z,{children:(0,z.jsx)("div",{className:"u-overflow-hidden",children:J()})})}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Large})]})]}),(0,z.jsx)(cz,{username:n.login,isUserBlocked:n.is_hated,userId:n.id,isVisible:I,onCancel:function(){C(!1)},onConfirm:function(){C(!1),(0,ls.sl)()}})]})},hae="".concat(Be.Fv,"/assets/list-promotion/background.jpg"),xae=()=>{const e=U(),{track:t}=vi(),i=(0,p.I0)(),n=(0,p.v9)(Nc),s=(0,p.v9)(X),r=(0,p.v9)(gT),[a,o]=(0,m.useState)(),[l,c]=(0,m.useState)(!1),[d,u]=(0,m.useState)(""),[h,x]=(0,m.useState)(""),f=(0,m.useCallback)((async e=>{const t=await(0,Fe.rVG)({id:e});"errors"in t?i(IM()):t.item?o({id:t.item.id,brand:t.item.brand_id===WL?"":t.item.brand,size:t.item.size,price:Ua(Va(t.item.price),n),image:Wa(t.item.photos,Xe.Large)}):i(IM())}),[i,n]),y=(0,m.useCallback)((async()=>{if(!s)return void i(IM());const e=await(0,Fe.rQb)(s,"upload_more");"errors"in e?i(IM()):e.tip?(u(e.tip.body),x(e.tip.title),c(!0)):i(IM())}),[i,s]);(0,m.useEffect)((()=>{r?(y(),f(r)):i(IM())}),[i,y,f,r]);const v=e=>{t(Ri({target:e}))};return(0,z.jsx)(cp.Z,{show:!!a&&l,children:(0,z.jsxs)("div",{className:"list-promotion",children:[a?(0,z.jsxs)("div",{className:"u-position-relative",children:[(0,z.jsx)(Kl.U,{src:hae}),(0,z.jsx)("div",{className:"list-promotion__item-wrapper",children:(0,z.jsx)(g.Z,{styling:g.Z.Styling.Elevated,children:(0,z.jsxs)("div",{className:"list-promotion__item-box",children:[(0,z.jsx)(C0,{id:a.id,image:a.image,price:a.price,url:"",description:{title:a.brand,subtitle:a.size},favourite:{count:0,favourited:!1}}),(0,z.jsx)("div",{className:"list-promotion__overlay"})]})})})]}):null,(0,z.jsxs)("div",{className:"c-modal__inline-content",children:[(0,z.jsx)("div",{className:"c-modal__title",children:(0,z.jsx)(xt.Z,{text:h,type:xt.Z.Type.Heading})}),(0,z.jsx)("div",{className:"c-modal__body",children:(0,z.jsx)(xt.Z,{text:d})})]}),(0,z.jsxs)("div",{className:"c-modal__actions",children:[(0,z.jsx)("div",{className:"c-modal__action",children:(0,z.jsx)(ic.I,{text:e("list_promotion.submit_cta"),onClick:()=>{v(qm.UploadMoreAccept),(0,ls.ru)(Me.UNR)},styling:ic.I.Styling.Filled,size:ic.I.Size.Medium})}),(0,z.jsx)("div",{className:"c-modal__action",children:(0,z.jsx)(ic.I,{text:e("list_promotion.cancel_cta"),onClick:()=>{v(qm.UploadMoreCancel),c(!1),i(IM())},styling:ic.I.Styling.Flat,size:ic.I.Size.Medium})})]})]})})},fae=e=>{let{onClose:t}=e;const[i,n]=(0,m.useState)(!1),s=(0,p.I0)(),r=(0,p.v9)(hT),a=(0,p.v9)(Wt("item_upload_feedback_form")),{track:o}=vi(),{fetch:l,error:c,transformedData:d}=ih(Fe.CA7,Gh);(0,m.useEffect)((()=>{l()}),[l,o,a]),(0,m.useEffect)((()=>{c?s(IM()):d&&(n(!0),o(Wi({screen:$t.ItemUploadFeedbackForm})))}),[d,c,s,o]);const u=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n(!1),s(IM()),e||o(Ri({screen:$t.ItemUploadFeedbackForm,target:qm.CloseScreen}))};return(0,z.jsx)($w,{isOpen:i,ratings:d,isInputWithoutRatingOptions:!0,isCloseActionVisible:!1,onClose:u,onSubmit:async e=>{let{finalized:i,rating:n,message:s,feedbackStatementIds:a}=e;i&&(await(0,Fe.wmM)({itemId:r,rating:n,finalized:i,comment:s||"",feedbackStatementIds:a}),u(!0),t())}})},yae=e=>{let{handleClose:t}=e;const i=U("item_upload.feedback");return(0,z.jsx)(bJ,{testId:"item-upload--feedback-notification",onClose:t,body:(0,z.jsx)("div",{className:"profile__item-upload-feedback-notification",children:(0,z.jsx)(gt.Z,{theme:"transparent",styling:gt.Z.Styling.Tight,title:i("finalized.title"),body:i("finalized.body")})}),suffix:(0,z.jsx)("div",{})})},vae=()=>{const[e,t]=(0,m.useState)(!1),i=(0,p.I0)(),n=(0,p.v9)(pT);return(0,m.useEffect)((()=>{i(ZM())}),[i]),(0,z.jsxs)(z.Fragment,{children:[n===dT.ListAnotherItem&&(0,z.jsx)(xae,{}),n===dT.ItemUploadFeedback&&(0,z.jsx)(fae,{onClose:()=>{t(!0)}}),e&&(0,z.jsx)(yae,{handleClose:()=>{t(!1)}})]})},_ae=Q4("closet_item"),bae=P0(k0),jae=e=>{let{items:t,userId:i,allowBump:n,isViewingSelf:s}=e;const{track:r}=vi(),a=(0,p.v9)(ZX),o=e=>{return(0,z.jsx)(ic.I,{text:(0,z.jsx)(ht.Z,{name:"performance-chart",size:ht.Z.Size.Small,color:"parent"}),theme:"primary",testId:"bump-performance-button",size:ic.I.Size.Small,url:(0,Me.DWf)(e),onClick:(t=qm.ShowItemPerformance,i=e,()=>{const e=Ri({target:t,targetDetails:i.toString()});r(e)})});var t,i},l=e=>{const{id:t,promoted:i,vas_gallery_promoted:r}=e;if(!s)return null;switch(Ka(e,s)){case Fa.ReplicaProof:case Fa.UnderReview:return(0,z.jsx)(ic.I,{text:(0,z.jsx)(wx,{id:"item.actions.edit"}),theme:"primary",size:ic.I.Size.Small,url:(0,Me.dZJ)(t)});case"promoted":return!i&&n?(0,z.jsx)(are,{item:e}):o(t);case"bumped":return a.visible&&!r?(0,z.jsx)(are,{item:e}):o(t);case"draft":return(0,z.jsx)(ic.I,{text:(0,z.jsx)(wx,{id:"item.drafts.finish_editing"}),theme:"primary",size:ic.I.Size.Small,url:(0,Me.dZJ)(t)});default:return n?(0,z.jsx)(are,{item:e}):null}};return(0,z.jsx)(V2,{items:t.map((e=>({id:e.id,data:e}))),renderItem:e=>{let{item:{data:t},index:i}=e;return(0,z.jsx)(bae,{showOwner:!1,item:co(t),renderFooter:l(t),showStatus:!0,viewingSelf:s,tracking:{id:t.id,contentType:z0.Item,contentSource:Es.UserItems,position:i+1},url:t.is_draft?(0,Me.dZJ)(t.id):void 0,hideBusinessBadge:!0})},onItemVisible:e=>{let{item:{data:t,id:n},index:s}=e;const a=Bi({id:n,position:s+1,contentType:z0.Item,contentSource:Es.UserItems,itemOwnerId:t.user_id||i});r(a)},widthResolver:()=>"one-fifth",preventLog:!0,handleErrorLogging:e=>_ae(e)})},Sae=e=>{let{selectedFilter:t,onFilterClick:i}=e;const n=(0,p.v9)(Vn("closet_filtering")),s=(0,p.v9)(Wt("closet_filtering_web")),r=U(),a=e=>()=>{i(e)};return"on"===(null==n?void 0:n.variant)&&s?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"u-phones-only",children:(0,z.jsx)(x.Z,{})}),(0,z.jsx)(v$,{showControls:!1,disableIosSmoothScroll:!0,children:(0,z.jsx)("div",{className:"u-flexbox",children:(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Medium}),children:[(0,z.jsx)(Jw.j,{activated:t===P2.Active,testId:"closet-items-filters-active",text:r("profile.item_filters.active"),textType:xt.Z.Type.Subtitle,onClick:a(P2.Active)}),(0,z.jsx)(Jw.j,{activated:t===P2.Reserved,testId:"closet-items-filters-reserved",text:r("profile.item_filters.reserved"),textType:xt.Z.Type.Subtitle,onClick:a(P2.Reserved)}),(0,z.jsx)(Jw.j,{activated:t===P2.Hidden,testId:"closet-items-filters-hidden",text:r("profile.item_filters.hidden"),textType:xt.Z.Type.Subtitle,onClick:a(P2.Hidden)}),(0,z.jsx)(Jw.j,{activated:t===P2.Draft,testId:"closet-items-filters-drafts",text:r("profile.item_filters.drafts"),textType:xt.Z.Type.Subtitle,onClick:a(P2.Draft)}),(0,z.jsx)(Jw.j,{activated:t===P2.Sold,testId:"closet-items-filters-sold",text:r("profile.item_filters.sold"),textType:xt.Z.Type.Subtitle,onClick:a(P2.Sold)})]})})})]}):null};function Zae(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Iae={[P2.Active]:qm.FilterActive,[P2.Hidden]:qm.FilterHidden,[P2.Sold]:qm.FilterSold,[P2.Reserved]:qm.FilterReserved,[P2.Draft]:qm.FilterDrafts},Cae=(0,p.$j)((e=>({closetFilteringAbTest:Vn("closet_filtering")(e),isClosetFilteringEnabled:Wt("closet_filtering_web")(e),exposee:we(e)})));class kae extends m.Component{constructor(){super(...arguments),Zae(this,"state",{selectedFilter:void 0,isClientSideReady:!1}),Zae(this,"isViewingSelf",(()=>this.props.currentUserId===this.props.userId)),Zae(this,"handleFilterChange",(e=>t=>{this.props.updateFilters({...this.props.filters,[e]:t})})),Zae(this,"handleUserItemsFilterClick",(e=>{const{selectedFilter:t}=this.state,{fetchMore:i,track:n}=this.props,s=t===e?void 0:e,r=Ri({target:Iae[e],screen:$t.CurrentUserProfile});t!==e&&n(r),(0,ls.ji)("Closet filter clicked: ".concat(e),{feature:"closet_filtering",extra:e||"all"}),this.setState({selectedFilter:s}),i(s)})),Zae(this,"fetchMoreItems",(()=>{const{fetchMore:e}=this.props,{selectedFilter:t}=this.state;e(t)})),Zae(this,"renderItemsContainer",(()=>{const{items:e,userId:t,allowBump:i}=this.props;return(0,z.jsx)(jae,{items:e,userId:t,allowBump:i,isViewingSelf:this.isViewingSelf()})})),Zae(this,"renderLoader",(()=>(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center",children:(0,z.jsx)(Dp.Z,{size:Dp.Z.Size.Large})}))),Zae(this,"renderFilters",(()=>{const{catalogs:e,filters:t}=this.props;return(0,z.jsxs)("div",{className:"u-text-left u-flexbox u-flex-wrap",children:[(0,z.jsx)(H8,{catalogs:e,selectedId:t.catalogId,toggleCatalogFilterOption:this.handleFilterChange("catalogId")}),(0,z.jsx)(M8,{selected:t.sortBy,onItemClick:this.handleFilterChange("sortBy")})]})})),Zae(this,"renderSellerFilters",(()=>{const{catalogs:e}=this.props;return!this.isViewingSelf()&&e.length?this.renderFilters():null})),Zae(this,"renderItems",(()=>{const{selectedFilter:e}=this.state,{items:t,totalItemsCount:i,itemsCount:n,breakpoints:s}=this.props,r=i>0,a=s.tabletsUp?e=>(0,z.jsx)("div",{...e}):m.Fragment,o=y()("u-flexbox u-flex-wrap u-align-items-center",{"u-justify-content-between":r,"u-justify-content-flex-end":!r});return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(nc.Z,{children:[(0,z.jsxs)("div",{className:o,children:[r&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(a,{children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:(0,z.jsx)(wx,{id:"user.items.title",values:{count:n}})}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical})]}),this.renderSellerFilters()]}),this.isViewingSelf()&&(0,z.jsx)("div",{className:"u-tablets-up-only",children:(0,z.jsx)(Sae,{onFilterClick:this.handleUserItemsFilterClick,selectedFilter:e})})]}),this.isViewingSelf()&&(0,z.jsx)("div",{className:"u-phones-only",children:(0,z.jsx)(Sae,{onFilterClick:this.handleUserItemsFilterClick,selectedFilter:e})})]}),t.length>0&&(0,z.jsx)("div",{className:"u-ui-margin-horizontal-regular@portables",children:(0,z.jsx)(Qp,{renderItems:this.renderItemsContainer,onPageEnd:this.fetchMoreItems,cursor:"user-items-".concat(n)})})]})}))}componentDidMount(){this.setState({isClientSideReady:!0});const{track:e,exposee:t,closetFilteringAbTest:i,isClosetFilteringEnabled:n}=this.props;i&&this.isViewingSelf()&&n&&e(bn({...t,...i}))}renderEmptyState(){const{userOnHoliday:e,closetFilteringAbTest:t,isClosetFilteringEnabled:i}=this.props,n=e?"vacation":"closet";if("on"===(null==t?void 0:t.variant)&&i&&this.isViewingSelf()){const e="/assets/animations/closet-empty-state.json";return(0,z.jsx)(tc.Z,{animation:(0,z.jsx)(u.Z,{animationUrl:e}),title:(0,z.jsx)(wx,{id:"profile.items_empty_state.self_view.title"}),body:(0,z.jsx)(wx,{id:"profile.items_empty_state.self_view.subtitle"}),action:(0,z.jsx)(ic.I,{text:(0,z.jsx)(wx,{id:"profile.items_empty_state.button"}),url:Me.UNR,styling:ic.I.Styling.Filled})})}return(0,z.jsx)(tc.Z,{title:(0,z.jsx)(wx,{id:"user.items_empty.title"}),body:e?(0,z.jsx)(wx,{id:"user.items_empty.on_holiday"}):(0,z.jsx)(wx,{id:"user.items_empty.no_items"}),animation:(0,z.jsx)(u.Z,{animationUrl:"".concat(Be.Fv,"/assets/animations/").concat(n,"-empty-state.json")})})}render(){const{items:e,isLoading:t}=this.props,i=(0,v.isEmpty)(e)&&!t,n=t;return(0,z.jsxs)(z.Fragment,{children:[this.renderItems(),i&&this.state.isClientSideReady&&this.renderEmptyState(),n&&this.renderLoader()]})}}const wae=F(zx(Cae(kae)));var Pae,zae;!function(e){e.Closet="closet",e.Feedback="feedback",e.About="about"}(Pae||(Pae={})),function(e){e[e.closet=qm.ProfileTab]="closet",e[e.feedback=qm.FeedbackTab]="feedback",e[e.about=qm.AboutTab]="about"}(zae||(zae={}));function Tae(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Fae extends m.Component{constructor(){super(...arguments),Tae(this,"state",{feedback:this.props.feedback||"",rating:this.props.rating||0}),Tae(this,"translate",((e,t)=>this.props.intl.formatMessage({id:"user.feedback.feedback_form.".concat(e)},t))),Tae(this,"handleInputChange",(e=>{this.setState({feedback:e.target.value})})),Tae(this,"handleRatingChange",(e=>{this.setState({rating:e})})),Tae(this,"handleSubmit",(()=>{this.props.onSave(this.state.feedback,this.state.rating)}))}renderUser(){const{user:e}=this.props;return(0,z.jsx)(gt.Z,{prefix:(0,z.jsx)(Tp,{src:Je(e.photo),size:Kl.U.Size.Regular,styling:Kl.U.Styling.Circle}),body:(0,z.jsx)(xt.Z,{children:e.login})})}renderItem(e){const{item_title:t,order:{items:i}}=e,n=i.length?i[0].photos:null;return(0,z.jsx)(gt.Z,{prefix:n&&(0,z.jsx)(Kl.U,{alt:t,src:Wa(n),styling:Kl.U.Styling.Rounded,size:Kl.U.Size.Regular,scaling:Kl.U.Scaling.Cover}),body:(0,z.jsx)(xt.Z,{children:t})})}renderActions(){return(0,z.jsxs)("div",{className:"u-flexbox u-justify-content-flex-end u-ui-padding-medium",children:[(0,z.jsx)(ic.I,{size:ic.I.Size.Medium,inverse:!0,styling:ic.I.Styling.Filled,text:this.translate("actions.cancel"),inline:!0,url:this.props.returnUrl}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(ic.I,{size:ic.I.Size.Medium,styling:ic.I.Styling.Filled,text:this.translate("actions.submit"),isLoading:this.props.isLoading,onClick:this.handleSubmit,inline:!0,testId:"feedback-form-submit-button"})]})}renderFieldError(e){const{formErrors:t}=this.props;return null!=t&&t[e]?(0,z.jsx)(zm.Z,{text:t[e],theme:"warning"}):null}renderRating(){const{rating:e}=this.state,t=!!e&&this.translate("rating.rate_".concat(e)),i=this.renderFieldError("rating");return(0,z.jsxs)("div",{className:"u-ui-padding-large",children:[(0,z.jsxs)("div",{className:"u-flexbox u-justify-content-between",children:[(0,z.jsx)(Ox.Z,{isInteractive:!0,value:e,onSelect:this.handleRatingChange,size:Ox.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:t})]}),i&&(0,z.jsx)("div",{className:"u-ui-padding-top-medium",children:i})]})}renderFeedbackForm(){const e="feedback",t=this.renderFieldError(e)||this.translate("character_limit",{limit:"".concat(this.state.feedback.length,"/").concat(400)});return(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Tight,children:[this.renderRating(),(0,z.jsx)(h.Z,{}),(0,z.jsx)(Gw,{name:e,maxLength:400,placeholder:this.translate("placeholder"),value:this.state.feedback,onChange:this.handleInputChange,validation:t}),this.renderActions()]})}render(){return(0,z.jsxs)(z.Fragment,{children:[this.renderUser(),this.props.transaction&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),this.renderItem(this.props.transaction)]}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),this.renderFeedbackForm()]})}}const Nae=(0,iw.ZP)(Fae),Lae="referrals-phones-bottom-sheet-was-shown",Eae=e=>{let{list:t,title:i,isBottomSheetVisible:n,setIsBottomSheetVisible:s}=e;const r=E(),{track:a}=vi(),o=n||r.tabletsUp,l=(0,m.useCallback)((()=>{s(!1)}),[s]);return(0,m.useEffect)((()=>{n&&!r.phones&&l()}),[r.phones,n,l]),(0,m.useEffect)((()=>{r.phones&&!is(Lae)&&(es(Lae,"1"),s(!0))}),[r.phones,s]),(0,m.useEffect)((()=>{o&&a(Wi({screen:$t.ReferralHowItWorks}))}),[o,a]),r.tabletsUp?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large}),(0,z.jsx)("div",{className:"referrals__title",children:i}),(0,z.jsx)(x.Z,{}),(0,z.jsx)("div",{className:"u-flexbox",children:(0,z.jsx)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge,orientation:x.Z.Orientation.Vertical}),children:t.map(((e,t)=>(0,z.jsxs)("div",{className:"u-flex-equal-size",children:[(0,z.jsx)("div",{className:"u-ui-padding-large",children:(0,z.jsx)(Kl.U,{src:e.imageUrl})}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:e.title}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Body,text:e.subtitle})]},t)))})}),(0,z.jsx)(x.Z,{})]}):(0,z.jsx)(Bp.Z,{isVisible:n,onClose:l,title:i,children:(0,z.jsx)("div",{className:"u-ui-padding-horizontal-large",children:t.map(((e,t)=>(0,z.jsxs)(m.Fragment,{children:[(0,z.jsx)("div",{className:"u-text-center",children:(0,z.jsx)(Kl.U,{src:e.imageUrl,size:Kl.U.Size.X4Large,scaling:Kl.U.Scaling.Contain,ratio:Kl.U.Ratio.Landscape})}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)("div",{className:"referrals__how-it-works-title",children:e.title}),(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Body,text:e.subtitle}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]},t)))})})},Oae=e=>{let{image:t,title:i,inverse:n,onClick:s}=e;const r=E();return(0,z.jsx)(gt.Z,{styling:r.tabletsUp?gt.Z.Styling.Wide:void 0,clickable:!0,theme:n?"inverseExperimental":void 0,title:i,onClick:s,prefix:(0,z.jsx)(Kl.U,{src:t,size:Kl.U.Size.Medium}),suffix:(0,z.jsx)("div",{className:"u-flexbox",children:(0,z.jsx)(ht.Z,{name:"chevron-right"})})})},Rae=e=>{let{inviteUrl:t,isEnabled:i}=e;const n=U("referrals.share"),{track:s}=vi(),[r,a]=(0,m.useState)(!1),[o,l]=(0,m.useState)(!1),c=!t||!i;function d(){a(!0),l(!1),s({event:"sharing.refer.copy_link"})}return(0,m.useEffect)((()=>{if(!r)return;const e=setTimeout((()=>a(!1)),2e3);return()=>clearTimeout(e)}),[r]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Wf.Z,{hover:!1,show:r,content:n("tooltip"),testId:"share-tooltip".concat(r?"-shown":""),children:(0,z.jsx)(fb.M,{name:"share",readOnly:!0,value:c?void 0:t,placeholder:c?n("input.placeholder"):void 0,onFocus:function(e){e.target.select()},onCopy:d,validation:o?hh(n("error")):void 0})}),(0,z.jsx)("div",{className:"u-ui-padding-horizontal-large",children:(0,z.jsx)(ic.I,{text:n("action"),theme:"primary",styling:ic.I.Styling.Filled,onClick:async function(){var e,i,n;if(t)try{await(e=t,"function"==typeof(null===(i=navigator)||void 0===i||null===(n=i.clipboard)||void 0===n?void 0:n.writeText)?navigator.clipboard.writeText(e):new Promise(((e,t)=>{var i,n;null!==(i=(n=document).execCommand)&&void 0!==i&&i.call(n,"copy")?e():t(new Error("Write text to clipboard is not supported"))}))),d()}catch(e){l(!0)}},disabled:c})})]})},Dae=e=>{let{onRegistrationsOpen:t,share:i,instructions:n}=e;const[s,r]=(0,m.useState)(!1);function a(){return i?(0,z.jsx)(Rae,{inviteUrl:i.inviteUrl,isEnabled:i.isEnabled}):null}return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)($$,{image:n.images.phones,image2x:n.images.phones2x,wide2xImage:n.images.wide2x,wideImage:n.images.wide,tabletsUp2xImage:n.images.tablets2x,tabletsUpImage:n.images.tablets,phonesContent:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(xt.Z,{text:n.title,type:xt.Z.Type.Heading}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:n.subtitle,type:xt.Z.Type.Body})]}),a(),(0,z.jsx)(x.Z,{}),(0,z.jsx)(Oae,{image:n.referralsIcon,title:n.referralsButtonTitle,onClick:t}),(0,z.jsx)("div",{className:"u-ui-padding-horizontal-large",children:(0,z.jsx)(h.Z,{})}),(0,z.jsx)(Oae,{image:n.howItWorksIcon,title:n.howItWorksScreenTitle,onClick:function(){r(!0)}}),(0,z.jsx)("div",{className:"u-ui-padding-horizontal-large",children:(0,z.jsx)(h.Z,{})})]}),tabletsUpContent:(0,z.jsxs)("div",{className:"u-border-radius-inherit u-overflow-hidden",children:[(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Narrow,children:[(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)("div",{className:"referrals__title",children:n.title}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:n.subtitle,type:xt.Z.Type.Body})]}),a(),(0,z.jsx)(x.Z,{})]}),(0,z.jsx)(Oae,{inverse:!0,image:n.referralsIcon,title:n.referralsButtonTitle,onClick:t})]})}),(0,z.jsx)("div",{className:"u-ui-margin-horizontal-regular",children:(0,z.jsxs)("div",{className:"container",children:[(0,z.jsx)(Eae,{list:n.howItWorks,title:n.howItWorksScreenTitle,isBottomSheetVisible:s,setIsBottomSheetVisible:r}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:n.footer,html:!0}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]})})]})},Aae=e=>{let{referrals:t}=e;const{track:i}=vi();return(0,m.useEffect)((()=>{i(Wi({screen:$t.ReferralsFriendsList}))}),[i]),t.emptyState?(0,z.jsx)("div",{className:"u-ui-margin-top-x4-large@phones",children:(0,z.jsx)(tc.Z,{animation:(0,z.jsx)(u.Z,{animationUrl:"".concat(Be.Fv,"/assets/animations/invited-friends-empty-state.json")}),title:t.emptyState.title,body:t.emptyState.body})}):(0,z.jsxs)(z.Fragment,{children:[t.infoBanner&&(0,z.jsx)(gt.Z,{children:(0,z.jsx)(Yp,{banner:t.infoBanner,onBannerClick:function(e){e.target instanceof HTMLAnchorElement&&i(Sn({tabName:"referrals"}))}})}),t.list.map((function(e){return(0,z.jsxs)(m.Fragment,{children:[(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)("a",{href:(0,Me.G0B)(e.userId),children:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,prefix:(0,z.jsx)(Kl.U,{src:e.photoUrl,styling:Kl.U.Styling.Circle,size:Kl.U.Size.Regular}),title:e.name,suffix:(0,z.jsx)(xt.Z,{text:e.note,theme:e.completed?"primary":void 0})})}),e.subtitle&&(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),e.subtitle&&(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:e.subtitle})]}),(0,z.jsx)(h.Z,{})]},e.userId)})),t.footer&&(0,z.jsx)("div",{className:"u-ui-padding-vertical-large u-ui-padding-horizontal-x3-large@phones u-ui-padding-horizontal-x5-large@tablets-up",children:(0,z.jsx)(xt.Z,{text:t.footer,type:xt.Z.Type.Caption,alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent,html:!0})})]})};let Mae;!function(e){e.Completed="completed",e.Active="active",e.Expiring="expiring"}(Mae||(Mae={}));const Uae={[Mae.Completed]:"muted"},Bae={[Mae.Completed]:"muted",[Mae.Expiring]:"warning"},qae=e=>{let{rewards:t}=e;const{track:i}=vi();return(0,m.useEffect)((()=>{i(Wi({screen:$t.ReferralsRewardsList}))}),[i]),t.emptyState?(0,z.jsx)("div",{className:"u-ui-margin-top-x4-large@phones",children:(0,z.jsx)(tc.Z,{animation:(0,z.jsx)(u.Z,{animationUrl:"".concat(Be.Fv,"/assets/animations/vouchers-empty-state.json")}),title:t.emptyState.title,body:t.emptyState.body})}):(0,z.jsxs)(z.Fragment,{children:[t.infoBanner&&(0,z.jsx)(gt.Z,{children:(0,z.jsx)(Yp,{banner:t.infoBanner,onBannerClick:function(e){e.target instanceof HTMLAnchorElement&&i(Sn({tabName:"rewards"}))}})}),t.list.map((function(e){return(0,z.jsxs)(m.Fragment,{children:[(0,z.jsx)(gt.Z,{title:(0,z.jsx)(xt.Z,{text:e.title,theme:Uae[e.status]}),body:(0,z.jsx)(xt.Z,{text:e.subtitle,theme:Bae[e.status]})}),(0,z.jsx)(h.Z,{})]},e.id)})),t.footer&&(0,z.jsx)("div",{className:"u-ui-padding-vertical-large u-ui-padding-horizontal-x3-large@phones u-ui-padding-horizontal-x5-large@tablets-up",children:(0,z.jsx)(xt.Z,{text:t.footer,type:xt.Z.Type.Caption,alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent,html:!0})})]})};var Vae;!function(e){e.Friends="friends",e.Rewards="rewards"}(Vae||(Vae={}));const Hae=e=>{let{onRegistrationsClose:t}=e;const i=E(),n=Ip(),[s,r]=(0,m.useState)(null),[a,o]=(0,m.useState)(!1),[l,c]=(0,m.useState)(Vae.Friends);function d(e){let{id:t}=e;(e=>(0,v.includes)(Vae,e))(t)&&c(t)}function u(){return a?(0,z.jsx)(sw,{}):s?(0,z.jsxs)(z.Fragment,{children:[null!=s&&s.rewards.list.length||null!=s&&s.referrals.list.length?(0,z.jsx)(c1.Z,{items:[{id:Vae.Friends,title:s.referrals.title},{id:Vae.Rewards,title:s.rewards.title}],width:c1.Z.Width.Parent,activeItemId:l,onClick:d}):null,(0,z.jsx)("div",{className:"referrals__registrations-content",children:l===Vae.Friends?(0,z.jsx)(Aae,{referrals:s.referrals}):(0,z.jsx)(qae,{rewards:s.rewards})})]}):(0,z.jsx)(Mp,{styling:Mp.Styling.Wide,size:Mp.Size.Large,testId:"registrations-loader"})}return(0,m.useEffect)((()=>{!async function(){const e=await(0,Fe.t5m)();var t,i,s;n()&&(!("errors"in e)&&"screen_title"in e?r({screenTitle:(t=e).screen_title,referrals:(s=t.referrals,{title:s.title,footer:s.footer,infoBanner:s.info_banner&&Up(s.info_banner),list:s.list.map(Mh),emptyState:s.empty_state&&{title:s.empty_state.title,body:s.empty_state.body,imageUrl:s.empty_state.image_url}}),rewards:(i=t.rewards,{title:i.title,footer:i.footer,infoBanner:i.info_banner&&Up(i.info_banner),list:i.list.map(Uh),emptyState:i.empty_state&&{title:i.empty_state.title,body:i.empty_state.body,imageUrl:i.empty_state.image_url}})}):o(!0))}()}),[n]),i.tabletsUp?(0,z.jsx)(cp.Z,{show:!0,defaultCallback:t,closeOnOverlay:!0,hasScrollableContent:!0,children:(0,z.jsxs)("div",{className:"u-fill-width",children:[(0,z.jsx)(Pm.Z,{body:null==s?void 0:s.screenTitle,right:(0,z.jsx)(ic.I,{deprecatedIconName:"x",inverse:!0,inline:!0,onClick:t,testId:"modal-close"})}),u()]})}):u()},Gae=e=>{let{isVisible:t}=e;const i=E(),n=If(),s=U(),[r,a]=(0,m.useState)(t),{track:o}=vi();function l(){a(!1)}function c(){return(0,z.jsxs)("div",{className:"u-ui-padding-large u-padding-top-none",children:[(0,z.jsx)(x.Z,{size:x.Z.Size.X3Large}),(0,z.jsx)("div",{className:"center",children:(0,z.jsx)(Kl.U,{src:n("clothes-rack-pause.svg"),size:Kl.U.Size.X4Large})}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{as:"p",type:xt.Z.Type.Heading,text:s("referrals.unavailable_modal.body"),alignment:xt.Z.Alignment.Center}),(0,z.jsx)(x.Z,{size:x.Z.Size.X3Large}),(0,z.jsx)(ic.I,{onClick:l,aria:{"aria-label":s("referrals.unavailable_modal.a11y.actions.close")},styling:ic.I.Styling.Filled,text:s("referrals.unavailable_modal.actions.close")})]})}return(0,m.useEffect)((()=>{r&&o(Wi({screen:$t.ReferralProgramOff}))}),[r,o]),i.phones?(0,z.jsxs)(Bp.Z,{closeButtonEnabled:!1,onClose:l,isVisible:r,initialHeight:1,children:[c(),(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]}):(0,z.jsx)(cp.Z,{show:r,contentDimensions:{maxWidth:"343px"},children:c()})},Wae=e=>{let{children:t,onEnter:i}=e;return i?(0,z.jsx)(Jp.h,{onEnter:i,children:(0,z.jsx)("div",{children:t})}):(0,z.jsx)(z.Fragment,{children:t})},Xae=["is_data_sent","is_email_confirmation_sent"],Yae=e=>{var t,i;let{promptDetails:n,onSkip:s}=e;const r=U(),a=E(),{track:o}=vi(),[l,c]=(0,m.useState)(Ne.Idle),{relativeUrl:d,replaceHistoryState:u,searchParams:p,urlQuery:g}=xc(),h=XY(Me.mYc),{is_data_sent:f,is_email_confirmation_sent:y}=p,[v,_]=(0,m.useState)(!1),[b,j]=(0,m.useState)(!1),S=l===Ne.Pending,Z=Ql()?null===(t=n.imageUrls)||void 0===t?void 0:t.dark:null===(i=n.imageUrls)||void 0===i?void 0:i.light,I=((e,t)=>(0,ys.Sd)(e,t,Xae))(d,g);(0,m.useEffect)((()=>{o(Wi({screen:$t.MandatoryEmailVerificationStart}))}),[o]),(0,m.useEffect)((()=>{(y||f)&&(kc(y)&&_(!0),kc(f)&&j(!0),u(I))}),[f,y,u,I]),Xn({abTestName:"non_skippable_email_verification_new_users",shouldTrackExpose:!0}),Xn({abTestName:"mandatory_email_verification_existing_users",shouldTrackExpose:!0});const C=()=>{o(Ri({screen:$t.MandatoryEmailVerificationStart,target:qm.Help}))},k=()=>{o(Ri({screen:$t.MandatoryEmailVerificationStart,target:qm.Start}));const e=(0,ys.Iq)(Me.chM,{ref_url:h});(0,ls.ru)(e)},w=()=>{o(Ri({screen:$t.MandatoryEmailVerificationStart,target:qm.Skip})),c(Ne.Pending),s()},P=()=>{const e=(v?"email_confirmation_sent":b&&"sent_notification")||null;return e?(0,z.jsx)(bJ,{deprecatedIcon:(0,z.jsx)(ht.Z,{name:"check-circle",color:ht.Z.Color.Success}),body:r("download_account_data.".concat(e)),suffix:!1}):null},T=()=>{return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"u-text-center",children:Z?(0,z.jsx)(Kl.U,{src:Z}):(0,z.jsx)(Kl.U,{src:"".concat(Be.Fv,"/assets/verifications/email-verification-code/woman-check.png"),srcset:"\n            ".concat(Be.Fv,"/assets/verifications/email-verification-code/woman-check.png 1x,\n            ").concat(Be.Fv,"/assets/verifications/email-verification-code/woman-check@2x.png 2x,\n            ").concat(Be.Fv,"/assets/verifications/email-verification-code/woman-check@3x.png 3x\n          ")})}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent,children:n.translations.header}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Body,alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent,theme:"muted",children:n.translations.body}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(ic.I,{onClick:k,styling:ic.I.Styling.Filled,disabled:S,children:r("verification_prompt.email_verification_code_button")}),n.mandatory?null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(ic.I,{onClick:w,isLoading:S,children:r("verification_prompt.skip_button")})]}),null!==(i=n.actions)&&void 0!==i&&i.includes(S9.BalanceWithdrawal)?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(ic.I,{url:Me.cz_,children:r("verification_prompt.withdrawal_money_button")})]}):null,null!==(t=n.actions)&&void 0!==t&&t.includes(S9.DataExport)?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(ic.I,{url:(0,ys.Iq)(Me.gg2,{ref_url:Me.O8U}),children:r("verification_prompt.export_data_button")})]}):null,null!==(e=n.actions)&&void 0!==e&&e.includes(S9.AccountDeletion)?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(ic.I,{url:Me.hfk,children:r("verification_prompt.delete_user_button")})]}):null,(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(_p,{type:bp.HowToVerifyEmailCode,render:e=>(0,z.jsx)("a",{href:e,onClick:C,children:(0,z.jsx)(xt.Z,{text:r("verification_prompt.have_any_questions_button"),alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent,clickable:!0})})})]}),P()]});var e,t,i};return a.phones?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),T()]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large}),T(),(0,z.jsx)(x.Z,{size:x.Z.Size.X5Large})]})},Kae=e=>{let{onSuccess:t,onError:i}=e;const{searchParams:n}=xc(),s=U("verification_prompt.google_verification"),[r,a]=(0,m.useState)(!1),o=(0,ys.pN)(n.code),l=EJ(),c=(0,p.v9)(Wt("google_oauth_state_validation")),d=c?(0,ys.pN)(n.state):"link",u=(0,p.v9)(Wt("oauth_google_login")),g=(0,ys.Iq)(Me.TcE,{state:c?void 0:"verification",take_action:c?"verification":void 0}),h=(0,m.useCallback)((async e=>{const n=await(0,Fe.k1g)(e);a(!1),"errors"in n?i(n.errors[0].value):t()}),[i,t]);return(0,m.useEffect)((()=>{o&&(a(!0),(async()=>{const e=await(0,Fe.IcB)({code:o,state:d,action:"verification"});"errors"in e?i(e.errors[0].value):h(e.id_token)})())}),[o,d,h,i]),(0,z.jsx)(ic.I,{theme:"amplified",deprecatedIconName:"signup/google",onClick:()=>{if(u)return a(!0),void(0,ls.ru)(g);(async()=>{if(l){a(!0);try{const e=await l.signIn();h(e.getAuthResponse().id_token)}catch{a(!1),i(s("error"))}}})()},isLoading:r,disabled:!l&&!u,children:s("button")})},Jae={email:null,error:void 0,uiState:Ne.Idle,canUserChangeEmail:!0},Qae=(0,m.createContext)({email:Jae.email,error:Jae.error,uiState:Jae.uiState,canUserChangeEmail:Jae.canUserChangeEmail,setEmail:v.noop,setError:v.noop,setUiState:v.noop,sendEmailCode:v.noop,resetUiState:v.noop}),$ae=e=>{let{children:t}=e;const i=(0,p.v9)(K),n=(0,p.v9)(X),[s,r]=(0,m.useState)(i),[a,o]=(0,m.useState)(Jae.error),[l,c]=(0,m.useState)(Jae.uiState),[d,u]=(0,m.useState)(Jae.canUserChangeEmail),g=(0,m.useCallback)((async e=>{if(!n)return;c(Ne.Pending),o(void 0);const t=await(0,Fe.dvI)({userId:n,email:e});if("errors"in t&&t.status===pm.o.TooManyRequests)return c(Ne.Failure),void o(t);if(!("errors"in t)){const e=(e=>{var t;return{email:e.email,canChangeEmail:null===(t=e.can_change_email)||void 0===t||t}})(t);r(e.email),u(e.canChangeEmail)}c(Ne.Success)}),[n]),h=(0,m.useCallback)((()=>{c(Ne.Idle)}),[c]);(0,m.useEffect)((()=>{g()}),[g]);const x=(0,m.useMemo)((()=>({email:s,error:a,uiState:l,setEmail:r,setError:o,setUiState:c,sendEmailCode:g,resetUiState:h,canUserChangeEmail:d})),[s,a,l,r,o,c,g,h,d]);return(0,z.jsx)(Qae.Provider,{value:x,children:t})},eoe=e=>(async(e,t)=>{const i=await(0,Fe.h3H)({user:{[e]:t}});var n,s;return!("errors"in i)||null===(n=null===(s=i.errors.find((t=>t.field===e)))||void 0===s?void 0:s.value)||void 0===n||n})("email",e),toe=e=>{let{email:t,onConfirm:i,onClose:n}=e;const s=U();return(0,z.jsx)(cp.Z,{show:!0,className:"auth__container",testId:"not-receive-email--confirmation-modal",closeOnOverlay:!0,defaultCallback:n,children:(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent,children:s("email_verification_code.not_receive_email.confirmation_modal.title")}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsxs)(xt.Z,{alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent,theme:"muted",children:[s("email_verification_code.not_receive_email.confirmation_modal.description"),(0,z.jsx)("br",{}),(0,z.jsx)(xt.Z,{bold:!0,theme:"muted",children:t})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,onClick:()=>{i()},children:s("email_verification_code.not_receive_email.confirmation_modal.actions.submit")}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,onClick:()=>{i({useOldEmail:!0})},children:s("email_verification_code.not_receive_email.confirmation_modal.actions.cancel")})]})]})})},ioe={[jO.EnterCode]:()=>{const e=(0,p.I0)(),t=U(),{track:i}=vi(),{formError:n,resetForm:s,handleSubmit:r,register:a,isLoading:o,watch:l,isCodeValidated:c}=(()=>{const e=(0,p.v9)(X),{track:t}=vi(),[i,n]=(0,m.useState)(Ne.Idle),[s,r]=(0,m.useState)(),{register:a,handleSubmit:o,watch:l,setValue:c,reset:d,formState:{isSubmitting:u}}=(0,th.cI)(),{setError:g}=(0,m.useContext)(Qae),h=(0,p.v9)(Y),x=(0,m.useCallback)((()=>r(void 0)),[r]),f=(0,m.useCallback)((()=>{x(),d()}),[x,d]);return{register:a("code",{required:!0,onChange:e=>{const{value:t}=e.target,i=pj(t).slice(0,6);c("code",i),s&&x()}}),isLoading:u,watch:l,handleSubmit:o((async i=>{let{code:s}=i;if(!e)return;n(Ne.Pending),g(void 0),x(),t(Ri({screen:$t.MandatoryEmailVerificationEnterCode,target:qm.Verify}));const a=await(0,Fe.MUn)({userId:e,code:parseFloat(s)});if("errors"in a)return n(Ne.Failure),a.status===pm.o.TooManyRequests?void g(a):void r(a);DI({event:cg.xy.ConfirmedEmail,userExternalId:h}),n(Ne.Success)})),isCodeValidated:i===Ne.Success,formError:s,resetForm:f}})(),{email:d,sendEmailCode:u,uiState:g,resetUiState:h}=(0,m.useContext)(Qae),f=g===Ne.Pending,y=g===Ne.Success,v=(null==n?void 0:n.code)===pm.Q.EmailVerificationCodeExpired;(0,m.useEffect)((()=>{i(Wi({screen:$t.MandatoryEmailVerificationEnterCode}))}),[i]),(0,m.useEffect)((()=>{c&&e(IO.setEmailCodeView(jO.Success))}),[c,e]);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("form",{onSubmit:e=>{v?(e=>{e.preventDefault(),s(),u()})(e):r(e)},children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,children:t("email_verification_code.enter_code.title")}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Body,theme:"muted",children:t("email_verification_code.enter_code.description")}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Body,theme:"amplified",children:d})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.X3Large}),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(fb.M,{...a,type:fb.M.Type.Text,inputMode:fb.M.InputMode.Numeric,placeholder:t("email_verification_code.enter_code.inputs.code.placeholder"),uncontrolled:!0,styling:fb.M.Styling.Tight,disabled:f,validation:(0,z.jsx)(zm.Z,{text:null==n?void 0:n.message,theme:"warning"})}),!(null!=n&&n.message)&&(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(()=>{const e=t(v?"email_verification_code.enter_code.actions.resend":"email_verification_code.enter_code.actions.submit");return(0,z.jsx)(ic.I,{testId:"verification-code-submit-button",type:ic.I.Type.Submit,styling:ic.I.Styling.Filled,disabled:o||6!==String(l().code).length,isLoading:o||f,children:e})})(),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(ic.I,{onClick:()=>{i(Ri({screen:$t.MandatoryEmailVerificationEnterCode,target:qm.DidntReceiveEmail})),h(),e(IO.setEmailCodeView(jO.NotReceiveEmail))},styling:ic.I.Styling.Flat,disabled:o||f,children:t("email_verification_code.enter_code.actions.help")})]}),y?(0,z.jsx)(bJ,{body:t("email_verification_code.enter_code.success.email_sent.body"),deprecatedIcon:(0,z.jsx)(ht.Z,{name:"check-circle",color:ht.Z.Color.Success}),onNotificationClose:h,suffix:!1}):null]})},[jO.NotReceiveEmail]:()=>{const e=(0,p.I0)(),t=U(),{track:i}=vi(),[n,s]=(0,m.useState)(!1),{email:r,uiState:a,canUserChangeEmail:o}=(0,m.useContext)(Qae),{handleSubmit:l,register:c,errors:d,getValues:u}=(()=>{const{email:e,sendEmailCode:t}=(0,m.useContext)(Qae),{register:i,getValues:n,formState:{errors:s}}=(0,th.cI)({mode:"onChange",defaultValues:{email:e||""}});return{register:i("email",{required:!0,validate:eoe}),getValues:n,handleSubmit:function(){let{useOldEmail:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{email:s}=n();i&&e&&(s=e),t(s)},errors:s}})(),g=a===Ne.Pending,h=a===Ne.Success,f=fh(d,"email_verification_code.not_receive_email.inputs");(0,m.useEffect)((()=>{i(Wi({screen:$t.MandatoryEmailVerificationResendCode}))}),[i]),(0,m.useEffect)((()=>{h&&e(IO.setEmailCodeView(jO.EnterCode))}),[h,e]);const y=function(){let{useOldEmail:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(!1),l({useOldEmail:e})},_=()=>{s(!1)};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,children:t("email_verification_code.not_receive_email.title")}),(0,z.jsx)(x.Z,{size:x.Z.Size.Regular}),(0,z.jsx)(xt.Z,{html:!0,theme:"muted",children:t("email_verification_code.not_receive_email.description")}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(fb.M,{...c,disabled:!o,title:t("email_verification_code.not_receive_email.inputs.email.title"),type:fb.M.Type.Email,inputMode:fb.M.InputMode.Email,styling:fb.M.Styling.Tight,validation:hh(f("email"))||t("email_verification_code.not_receive_email.inputs.email.info"),uncontrolled:!0}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),o?null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{html:!0,theme:"muted",testId:"contact_support",children:t("email_verification_code.not_receive_email.contact_support")}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.Regular}),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(ic.I,{testId:"not-receive-email--resend-button",onClick:()=>{const{email:e}=u();e!==r?s(!0):l()},styling:ic.I.Styling.Filled,disabled:!(0,v.isEmpty)(d),isLoading:g,children:t("email_verification_code.not_receive_email.actions.resend")}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(ic.I,{onClick:()=>{e(IO.setEmailCodeView(jO.EnterCode))},deprecatedIconName:"arrow-left",deprecatedIconColor:uI.S.Primary,disabled:g,children:t("email_verification_code.not_receive_email.actions.back")})]}),(()=>{const{email:e}=u();return n?(0,z.jsx)(toe,{email:e,onConfirm:y,onClose:_}):null})()]})},[jO.Success]:()=>{const e=XY(Me.mYc),t=U(),{track:i}=vi();return(0,m.useEffect)((()=>{i(Wi({screen:$t.MandatoryEmailVerificationSuccess}))}),[i]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"u-text-center",children:(0,z.jsx)(Kl.U,{src:"".concat(Be.Fv,"/assets/verifications/email-verification-code/success.png"),srcset:"\n          ".concat(Be.Fv,"/assets/verifications/email-verification-code/success.png 1x,\n          ").concat(Be.Fv,"/assets/verifications/email-verification-code/success@2x.png 2x,\n          ").concat(Be.Fv,"/assets/verifications/email-verification-code/success@3x.png 3x\n    ")})}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent,children:t("email_verification_code.success.title")}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Body,alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent,children:t("email_verification_code.success.description")}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(ic.I,{testId:"start-button",styling:ic.I.Styling.Filled,url:e,children:t("email_verification_code.success.actions.ok")})]})}},noe=()=>{const e=E(),t=U(),{error:i}=(0,m.useContext)(Qae),n=(0,p.v9)(Z9),s=(null==i?void 0:i.status)===pm.o.TooManyRequests,r=e.tablets||e.phones,a=ioe[n];return(0,z.jsxs)(z.Fragment,{children:[s?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(g.Z,{children:(0,z.jsx)(gt.Z,{prefix:(0,z.jsx)(ht.Z,{name:"warning-circle-filled",color:ht.Z.Color.Warning}),body:t("email_verification_code.errors.too_many_requests.body")})}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})]}):null,(0,z.jsx)("div",{className:"auth__container",children:r?(0,z.jsxs)(z.Fragment,{children:[!s&&(0,z.jsx)(x.Z,{size:x.Z.Size.Regular}),(0,z.jsx)(a,{})]}):(0,z.jsxs)(z.Fragment,{children:[!s&&(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large}),(0,z.jsx)(a,{}),(0,z.jsx)(x.Z,{size:x.Z.Size.X5Large})]})})]})},soe=e=>{if(!Array.isArray(e))return e};let roe,aoe;!function(e){e.Credit="credit",e.Debit="debit"}(roe||(roe={})),function(e){e.Payout="payout",e.Conversation="user_msg_thread"}(aoe||(aoe={}));const ooe=e=>{let{invoice:t,locale:i}=e;const n=()=>{const e=t.type===roe.Credit?"warning":void 0;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Right,type:xt.Z.Type.Title,theme:e,text:Ma(t.amount.amount,{locale:i,currency:t.amount.currencyCode})}),(0,z.jsx)(_t.Ji,{value:t.date,year:"numeric",month:"long",day:"numeric"})]})},s=(e,t,i)=>(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,title:e,body:t,suffix:n(),type:gt.Z.Type.Navigating,url:i,chevron:!0}),{title:r,subtitle:a,entityType:o,entityId:l}=t;return l&&o===aoe.Payout?s(r,a,(0,Me.n5s)(l)):l&&o===aoe.Conversation?s(r,a,Rc(l)):((e,t)=>(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,title:e,body:t,suffix:n()}))(r,a)},loe=e=>{let{invoiceLines:t,shouldRenderStartBalance:i}=e;const n=U("wallet.invoice_lines"),s=(0,p.v9)(p8),r=(0,p.v9)(g8),a=(0,p.v9)(h8),o=(0,p.v9)(x8),l=(0,p.v9)(Nc);return o===Ne.Pending?(0,z.jsx)(Mp,{styling:Mp.Styling.Wide}):o===Ne.Failure?null:t.length?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(g.Z,{children:[(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{text:n("balance_transactions")})}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,children:(0,z.jsx)(kp,{children:t.map((e=>(0,z.jsx)(ooe,{invoice:e,locale:l},e.id)))})})]}),i&&(()=>{const e={title:n("start_balance"),amount:s,currency:r,date:a,type:Number(s.amount)>=0?roe.Debit:roe.Credit};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(ooe,{invoice:e,locale:l})]})})()]}):null},coe=e=>{const[t,i]=e;return[t,(0,v.orderBy)(i,["month"],["desc"])]},doe=()=>{const e=E(),{relativeUrl:t}=xc(),i=U("wallet.navigation"),[n,s]=(0,m.useState)(),r=(e=>{const t=E(),i=(0,O.Z)(),{relativeUrl:n}=xc(),s=U("wallet.navigation"),r=!!t.desktops,a=(0,m.useCallback)((()=>{if(null==e||!e.length||!r)return;const t=(0,v.groupBy)(e,"year");return Object.entries(t).map(coe).reverse().map((e=>{var t;let[n,s]=e;return{url:"".concat(Me.Xly,"/").concat(n,"/").concat(null===(t=s[0])||void 0===t?void 0:t.month),title:n,children:s.map((e=>({url:"".concat(Me.Xly,"/").concat(n,"/").concat(e.month),title:i.formatDate("".concat(n,"/").concat(e.month,"/1"),{month:"long"})})))}}))}),[r,i,e]);return(0,m.useMemo)((()=>[{url:Me.cz_,title:s("page_title.balance.title"),children:[{url:Me.cz_,title:s("page_title.balance.overview")},{url:Me.FRj,title:s("page_title.balance.setup")}]},{url:Me.Xly,mobileUrl:Me.Jt2,title:s("page_title.history"),children:a()},{url:Me.A_o,title:s("page_title.invoices")},{url:Me.URX,title:s("page_title.income_reports")}].map((e=>({...e,isActive:(0,ys.G9)(n,e.url),url:r||!e.mobileUrl?e.url:e.mobileUrl})))),[s,a,n,r])})(n);(0,m.useEffect)((()=>{(async()=>{const e=await(0,Fe.twF)();if("errors"in e)return;const t=EG(e);s(t.history)})()}),[]);const a=(e,i)=>!(null==i||!i.length)&&(e.includes(Me.Xly)&&(0,ys.G9)(t,Me.Xly)?void 0!==i.find((t=>{const i=t.url.split("/");return i.pop(),i.join("/").includes(e)})):void 0!==i.find((e=>(0,ys.G9)(t,e.url)))),o=(e,i)=>{let{url:n,title:s}=e;const r=(0,ys.G9)(t,n);return(0,z.jsx)(gt.Z,{url:n,theme:"transparent",type:gt.Z.Type.Navigating,children:(0,z.jsx)(xt.Z,{testId:r?"wallet-nav-link-active":"wallet-nav-link",type:i?xt.Z.Type.Subtitle:void 0,theme:r?"amplified":"muted",bold:!0,children:s})})},l=(t,i,n)=>null!=n&&n.length&&t||i?null==n?void 0:n.map((t=>{const{url:i,title:n,children:s}=t;return(0,z.jsxs)("div",{className:e.desktops?"u-padding-left-large":"",children:[o(t,!0),l(a(i,s),!0,s)]},n)})):null,c=e=>{const{url:t,title:i,children:n}=e;return(0,z.jsxs)("span",{children:[o(e,!1),l(a(t,n),!1,n)]},i)};return(0,z.jsxs)("nav",{className:"body-content__sidebar",children:[(0,z.jsx)(gt.Z,{theme:"transparent",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:i("title")})}),r.map((t=>{let{url:i,mobileUrl:n,title:s,children:r,isActive:a}=t;return(e.tablets||e.phones)&&n?c({url:n,title:s,isActive:a,children:r}):c({url:i,title:s,isActive:a,children:r})}))]})},uoe=e=>e[sL],moe=e=>uoe(e).directDonationOrder,poe=e=>(e=>uoe(e).directDonationCheckout)(e).activeModal,goe=e=>moe(e).prepareUiState,hoe=e=>moe(e).errorMessage,xoe=e=>{let{order:t}=e;const i=U("direct_donation.order_confirmation_modal.order_summary"),n=(0,p.v9)(Nc);return(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,suffix:Ma(t.totalAmount.amount,{locale:n,currency:t.totalAmount.currencyCode}),children:(0,z.jsx)(xt.Z,{text:i("donation")})}),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,title:i("total"),suffix:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:Ma(t.payableAmount.amount,{locale:n,currency:t.payableAmount.currencyCode})})})]})]})},foe=e=>{let{onBack:t,onConfirmOrder:i,onPaymentMethodSelect:n}=e;const s=U("direct_donation.order_confirmation_modal"),{track:r}=vi(),a=(0,p.v9)(moe),o=(0,p.v9)(ZC),l=(0,p.v9)(CC),c=(0,p.v9)(FC),d=(0,p.v9)((e=>{var t;return NC(e,null===(t=a.order)||void 0===t?void 0:t.payableAmount.amount)})),u=(0,p.v9)((e=>{var t;return PC(e,null===(t=a.order)||void 0===t?void 0:t.payableAmount.amount)})),{order:g}=a;(0,m.useEffect)((()=>{r(Wi({screen:$t.DirectDonationOrderConfirmation}))}),[r]);return(0,z.jsxs)(z.Fragment,{children:[g?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xoe,{order:g}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(Hk,{walletBalance:o,activePayInMethod:d,selectedCreditCard:c,onPaymentMethodSelect:n}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{theme:"transparent",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,html:!0,text:g.termsNote})}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(()=>{if(!g||!o)return null;const e=(null==d?void 0:d.code)===iv.Wallet;return u||e?null:(0,z.jsx)(ah.Z,{alignment:ah.Z.Alignment.Center,text:s("wallet_funds_availability_note")})})()]}):null,(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(ic.I,{theme:"success",isLoading:l===Oi.Processing,text:s("actions.donate"),styling:ic.I.Styling.Filled,onClick:()=>{g&&(r(Ri({screen:$t.DirectDonationOrderConfirmation,target:qm.ConfirmDirectDonationOrder,targetDetails:"".concat(g.id)})),i())},testId:"direct-donation-donate"}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,text:s("actions.back"),onClick:()=>t()})]})]})},yoe=e=>{let{show:t,onConfirmOrder:i,onPaymentMethodSelect:n,onBack:s,onClose:r}=e;const a=U(),o=U("direct_donation.order_confirmation_modal");return(0,z.jsx)(cp.Z,{show:t,hasScrollableContent:!0,children:(0,z.jsxs)("div",{className:"u-fill-width",children:[(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Pm.Z,{theme:"transparent",body:o("title"),right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,onClick:r,deprecatedIconName:"x",inline:!0,aria:{"aria-label":a("direct_donation.a11y.close_button")}})}),(0,z.jsx)(h.Z,{})]}),(0,z.jsx)(Lg,{children:(0,z.jsx)(foe,{onConfirmOrder:i,onPaymentMethodSelect:n,onBack:s})})]})})},voe=e=>{var t,i;let{onCheckoutSuccess:n,onBack:s}=e;const r=(0,p.I0)(),a=(0,p.v9)(moe),o=(0,p.v9)(poe),l=(0,p.v9)(goe),c=(0,p.v9)(Ht),d=(0,m.useCallback)((e=>{r(oL.setCheckoutModal({modal:e}))}),[r]);return(0,m.useEffect)((()=>{l===Ne.Success&&d(Ei.Checkout)}),[l,d]),(0,z.jsx)(Bk,{show:o===Ei.Checkout,orderType:Ti.DirectDonation,orderId:null===(t=a.order)||void 0===t?void 0:t.id,orderPayable:null===(i=a.order)||void 0===i?void 0:i.payableAmount,addCardSourceParams:{type:Ti.DirectDonation},entityType:Vk(c),onBack:()=>{d(Ei.None),r(oL.clearCurrentOrder()),s()},onCheckoutFinish:e=>{d(Ei.None),r(oL.clearCurrentOrder()),e&&n()},onInitStartAfterCardAuth:e=>{r(oL.getOrderRequest({orderId:e})),d(Ei.Checkout)},orderConfirmationModal:e=>(0,z.jsx)(yoe,{show:e.show,onBack:e.onBack,onClose:e.onBack,onConfirmOrder:e.onConfirmOrder,onPaymentMethodSelect:e.onPaymentMethodSelect})})},_oe=e=>{const{heading:t,description:i,code:n}=e;return{heading:t,description:i,code:n}};var boe;!function(e){e.Amount="amount"}(boe||(boe={}));const joe=e=>{let{onSuccess:t=v.noop}=e;const i=(0,p.I0)(),n=U("direct_donation"),s=(0,p.v9)(Nc),r=(0,p.v9)(hoe),a=(0,p.v9)(goe),{register:o,handleSubmit:l,setError:c,formState:{errors:d,isSubmitting:u}}=(0,th.cI)(),g=fh(d,"direct_donation.fields"),[x,f]=(0,m.useState)(Ne.Idle),[y,_]=(0,m.useState)(null);(0,m.useEffect)((()=>{(async()=>{f(Ne.Pending);const e=await(0,Fe.Rf1)();"errors"in e?f(Ne.Failure):(e.balance&&_((e=>{let{charities:t,balance:i}=e;return{charities:t.map(_oe),balance:{amount:i.amount,currencyCode:i.currency_code}}})(e)),f(Ne.Success))})()}),[f]),(0,m.useEffect)((()=>{a===Ne.Failure&&c(boe.Amount,{type:"manual",message:r}),a===Ne.Success&&t()}),[a,r,i,c,t]);const b=()=>null==y?void 0:y.charities[0];return x===Ne.Idle||x===Ne.Pending?(0,z.jsx)(Mp,{size:Mp.Size.Large}):(0,z.jsxs)(z.Fragment,{children:[y?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{title:n("balance.title"),suffix:(0,z.jsx)(xt.Z,{text:(j=y.balance.amount,y?Ma(j,{locale:s,currency:y.balance.currencyCode}):null)})}),(0,z.jsx)(h.Z,{})]}):null,(()=>{const e=b();return e?(0,z.jsx)(gt.Z,{title:e.heading,body:(0,z.jsx)(xt.Z,{html:!0,text:e.description})}):null})(),(0,z.jsxs)("form",{noValidate:!0,onSubmit:l((e=>{let{amount:t}=e;const n=b();if(!y||!n)return;const s=t.replace(",",".");i(UV({amount:s,charityCode:n.code,currencyCode:y.balance.currencyCode}))})),children:[(0,z.jsx)(fb.M,{inputMode:ag.Decimal,...o(boe.Amount,{valueAsNumber:!1,required:{value:!0,message:n("fields.amount.errors.required")},pattern:yh}),disabled:u,title:n("fields.amount.title"),placeholder:n("fields.amount.placeholder"),validation:hh(g(boe.Amount))||n("fields.amount.note"),uncontrolled:!0,testId:"direct-donation-input"}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(ic.I,{theme:"primary",disabled:u,type:ic.I.Type.Submit,styling:ic.I.Styling.Filled,text:n("actions.choose_payment_method"),testId:"direct-donation-submit"})})]})]});var j},Soe=e=>{let{isVisible:t,onSuccess:i,onClose:n}=e;const s=U("wallet.donation_banner");return(0,z.jsxs)(cp.Z,{show:t,children:[(0,z.jsx)(Pm.Z,{theme:"transparent",body:s("modal.title"),right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,onClick:n,deprecatedIconName:"x",inline:!0,aria:{"aria-label":s("modal.a11y.close_button")}})}),(0,z.jsx)(h.Z,{}),(0,z.jsx)("div",{className:"modal-contained-content",children:(0,z.jsx)(joe,{onSuccess:i})})]})},Zoe=e=>{let{showModal:t}=e;const i=U("wallet.donation_banner"),{track:n}=vi(),s=Ql(),[r,a]=(0,m.useState)(t||!1);(0,m.useEffect)((()=>{r&&n(Wi({screen:$t.DirectDonation}))}),[r,n]);const o=()=>a(!0),l=()=>a(!1),c=s?"/assets/donation/dark/heart-ua.svg":"/assets/donation/heart-ua.svg";return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(g.Z,{children:(0,z.jsx)(gt.Z,{title:i("title"),body:i("body"),prefix:(0,z.jsx)(Kl.U,{src:c,size:Kl.U.Size.Medium,alt:""}),suffix:(0,z.jsx)(ic.I,{text:i("actions.donate"),size:ic.I.Size.Small,onClick:o,testId:"direct-donation-action"})})}),(0,z.jsx)(Soe,{isVisible:r,onSuccess:l,onClose:l}),(0,z.jsx)(voe,{onCheckoutSuccess:()=>(0,ls.ru)(Me.cz_),onBack:o})]})},Ioe=e=>{let{pendingBalance:t,locale:i}=e;const n=U("wallet.pending_balance");return(0,z.jsx)(gt.Z,{body:n("header"),styling:gt.Z.Styling.Wide,suffix:(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center",children:[(0,z.jsx)(xt.Z,{text:Ua(t,i)}),(0,z.jsx)(_p,{type:bp.PendingBalance,accessChannel:Be.Si.ProductLink,render:e=>(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Regular,orientation:x.Z.Orientation.Vertical}),(0,z.jsx)("a",{href:e,title:n("help"),className:"u-flexbox u-align-items-center",children:(0,z.jsx)(ht.Z,{name:"info-circle",color:ht.Z.Color.GreyscaleLevel3,size:ht.Z.Size.Small})})]})})]})})},Coe=()=>{const e=(0,p.I0)(),t=U("wallet.balance"),{track:i}=vi(),n=(0,p.v9)(Cl),s=(0,p.v9)(c8),r=(0,p.v9)(u8),a=(0,p.v9)(d8),o=(0,p.v9)(Nc),l=(0,p.v9)(X),c=(0,p.v9)(he),d=(0,p.v9)(Wt("web_taxpayers_banners"));(0,m.useEffect)((()=>{e(fV())}),[e]);const u=(0,m.useCallback)((()=>{l&&e(OE.getBalanceRequest({userId:l}))}),[e,l]);(0,m.useEffect)((()=>{u(),i(Wi({screen:$t.Balance}))}),[i,u]);const h=()=>c?parseFloat(s.amount)>0?(0,z.jsx)(ic.I,{text:t("button_payout"),url:Me.coZ,styling:ic.I.Styling.Filled,size:ic.I.Size.Medium}):null:(0,z.jsx)(ic.I,{text:t("button_activate_wallet"),url:Me.FRj,styling:ic.I.Styling.Filled,size:ic.I.Size.Medium});return r===Ne.Pending||r===Ne.Idle?(0,z.jsx)(Mp,{styling:Mp.Styling.Wide}):r===Ne.Failure?(0,z.jsx)(gt.Z,{children:(0,z.jsx)(sw,{onCtaClick:u})}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"u-ui-margin-top-x-large",children:(0,z.jsx)(Kp,{screen:$t.Balance,linkTracking:{target:qm.MergeBalanceBanner}})}),(0,z.jsx)(g.Z,{children:(0,z.jsxs)(kp,{children:[(0,z.jsx)(yt.Z,{text:(0,z.jsx)(_t.Ji,{value:new Date,year:"numeric",month:"long"})}),(0,z.jsx)(Ioe,{pendingBalance:a,locale:o}),n.taxpayerBanner&&d?(0,z.jsx)(gt.Z,{children:(0,z.jsx)(yee,{banner:n.taxpayerBanner,isBannerInFeed:!1})}):null,(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,suffix:(0,z.jsx)(Nm,{breakpoint:"tabletsUp",children:h()}),children:(0,z.jsxs)("div",{className:"u-text-center@phones",children:[(0,z.jsx)(xt.Z,{text:Ua(s,o),type:xt.Z.Type.Heading}),(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),(0,z.jsx)(xt.Z,{text:t("header"),type:xt.Z.Type.Body}),(0,z.jsxs)(V5,{breakpoint:"tabletsUp",children:[(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),h()]})]})})]})})]})},koe=e=>{let{years:t}=e;const i=U("wallet.income_report");return t.length?(0,z.jsxs)(g.Z,{children:[(0,z.jsx)(yt.Z,{text:i("list_title")}),(0,z.jsx)(L,{separator:(0,z.jsx)(h.Z,{}),children:t.map((e=>(0,z.jsx)(gt.Z,{title:i("title",{year:e}),suffix:(0,z.jsx)(ic.I,{testId:"download-yearly-income-button",text:i("actions.download"),urlProps:{download:!0},url:(0,Me.rNv)(e)})},e)))})]}):(0,z.jsx)(tc.Z,{testId:"empty-state",animation:(0,z.jsx)(u.Z,{animationUrl:"".concat(Be.Fv,"/assets/animations/order-empty-state.json")}),title:i("empty.yearly.title"),body:i("empty.yearly.body")})},woe=new Date(2016,0),Poe=new Date(2021,9);function zoe(e,t){return t-e}function Toe(e,t){return{year:e,id:"".concat(e).concat(t),title:"".concat(e)}}function Foe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;return(0,v.range)(e,t)}const Noe=e=>{let{years:t}=e;const i=(0,O.Z)(),n=U("wallet.income_report"),s=(0,p.v9)(ne),r=function(e){return e.sort(zoe).map(Toe)}(t),a=r[0],[o,l]=(0,m.useState)(a);function c(e,t){return i.formatDate(new Date(e,t,1),{month:"long",year:"numeric"})}function d(){return(0,z.jsx)(tc.Z,{testId:"empty-state",animation:(0,z.jsx)(u.Z,{animationUrl:"".concat(Be.Fv,"/assets/animations/order-empty-state.json")}),title:n("empty.monthly.title"),body:n("empty.monthly.body")})}if(!o||!s||null==o||!o.year)return d();const{year:f}=o,y=function(e,t,i){if(e<i.getFullYear()||e<t.getFullYear())return[];const n=new Date,s=e===n.getFullYear(),r=e===t.getFullYear();return e===i.getFullYear()?Foe(r?Math.max(t.getMonth(),i.getMonth()):i.getMonth(),s?n.getMonth():12):r&&s?Foe(t.getMonth(),n.getMonth()):r?Foe(t.getMonth()):s?Foe(0,n.getMonth()):Foe()}(f,s,Poe).reverse();return y.length?(0,z.jsxs)(g.Z,{children:[(0,z.jsx)(yt.Z,{text:n("list_title")}),t.length<=1?null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(YJ,{name:"income-report-period",data:r,selectedValue:o,inputTitle:n("year_filter_title"),onSave:function(e){e&&l(e)}})]}),function(e,t){return(0,z.jsx)(L,{separator:(0,z.jsx)(h.Z,{}),children:t.map((t=>(0,z.jsx)(gt.Z,{title:n("month_report_title",{yearMonth:c(e,t)}),suffix:(0,z.jsx)(ic.I,{testId:"download-monthly-income-button",text:n("actions.download"),urlProps:{download:!0},url:(0,Me.AsW)(e,t+1)})},t)))})}(f,y)]}):d()},Loe=e=>{let{invoice:t}=e;const i=U("wallet.invoices"),n="".concat(t.invoice_series," ").concat(t.invoice_no);return(0,z.jsx)(gt.Z,{title:n,body:(0,z.jsx)(_t.Ji,{value:t.invoice_date,year:"numeric",month:"long",day:"numeric"}),suffix:(0,z.jsx)(ic.I,{testId:"invoice-download-button",text:i("actions.download"),url:(0,Me.jJb)(t.id)})})},Eoe=e=>Number(e)<0?"warning":void 0,Ooe=e=>{let{startBalanceAmount:t,endBalanceAmount:i,currency:n,year:s,month:r}=e;const a=U("wallet.invoice_lines.history_balance_status"),{formatDate:o}=(0,O.Z)(),l=(0,p.v9)(Nc);return(0,z.jsxs)(z.Fragment,{children:[s&&r?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:o(new Date(s,r-1,1),{month:"long",year:"numeric"})}),(0,z.jsx)(x.Z,{})]}):null,(0,z.jsx)(g.Z,{children:(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Tight,children:[(0,z.jsx)(gt.Z,{body:a("end_balance_title"),suffix:(0,z.jsx)(xt.Z,{text:Ma(i,{locale:l,currency:n}),theme:Eoe(i)})}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{body:a("start_balance_title"),suffix:(0,z.jsx)(xt.Z,{text:Ma(t,{locale:l,currency:n}),theme:Eoe(t)})})]})})]})},Roe=e=>e[DE],Doe=e=>Roe(e).payout,Aoe=e=>Roe(e).payoutConfiguration,Moe=(0,B.P1)(Doe,(e=>{let{uiState:t}=e;return t})),Uoe=(0,B.P1)(Doe,(e=>{let{amount:t}=e;return t})),Boe=(0,B.P1)(Doe,(e=>{let{currency:t}=e;return t})),qoe=(0,B.P1)(Aoe,(e=>{let{uiState:t}=e;return t})),Voe=(0,B.P1)(Aoe,(e=>{let{amount:t}=e;return t})),Hoe=(0,B.P1)(Aoe,(e=>{let{currency:t}=e;return t})),Goe=(0,B.P1)(Aoe,(e=>{let{note:t}=e;return t})),Woe=(0,B.P1)(Doe,(e=>{let{progressDetails:t}=e;return t}));function Xoe(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Yoe extends m.Component{constructor(){super(...arguments),Xoe(this,"state",{isVisible:!0}),Xoe(this,"closeNotification",(()=>{this.setState({isVisible:!1})}))}render(){const{text:e}=this.props,{isVisible:t}=this.state;return t?(0,z.jsx)(gt.Z,{theme:"success",suffix:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,deprecatedIcon:(0,z.jsx)(ht.Z,{name:"x",size:ht.Z.Size.Small,color:ht.Z.Color.GreyscaleLevel7}),onClick:this.closeNotification}),children:(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center",children:[(0,z.jsx)(ht.Z,{name:"check-circle-filled",size:ht.Z.Size.Medium,color:ht.Z.Color.GreyscaleLevel7}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(xt.Z,{text:e,type:xt.Z.Type.Title,theme:"inverse"})]})}):null}}const Koe=Yoe,Joe=e=>{let{defaultValues:t,isSsnNumberRequired:i,isPersonalIdNumberRequired:n,isNationalityRequired:s,isBalanceActivated:r,agreementHint:a,canChange:o,apiErrors:l,isLoading:c,wide:d,blocksAreSeparated:u,onSubmit:p}=e;const g=U("wallet.activation"),h=(0,th.cI)({defaultValues:t});function f(){return r?null:(0,z.jsx)(xt.Z,{text:a,html:!0,type:xt.Z.Type.Subtitle})}function y(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=g(r?"actions.update":"actions.save");return(0,z.jsx)(ic.I,{type:ic.I.Type.Submit,styling:ic.I.Styling.Filled,disabled:c,isLoading:c,text:t,testId:"balance-activation--submit-button",inline:e})}return(0,m.useEffect)((()=>{l.forEach((e=>{let{field:t,value:i}=e;const n=(0,v.camelCase)(t);(0,_i.IF)(n,yI)&&n!==yI.FullName&&h.setError(n,{type:"manual",message:i})}))}),[l,h]),(0,z.jsx)("form",{onSubmit:h.handleSubmit((function(){const e=h.getValues();return p(e)})),noValidate:!0,children:(0,z.jsxs)(th.RV,{...h,children:[(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(vI,{showTitle:!0,isLoading:c,canChange:o,wide:d,isSsnNumberRequired:i,isPersonalIdNumberRequired:n,isNationalityRequired:s,isBalanceActivated:r}),u?(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}):null]}),(0,z.jsx)(SI,{isDisabled:c}),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(Nm,{breakpoint:"desktops",children:(0,z.jsx)(gt.Z,{theme:"transparent",styling:gt.Z.Styling.Tight,body:(0,z.jsx)("div",{className:"u-margin-left-large u-margin-right-large",children:f()}),suffix:y(!0)})}),(0,z.jsxs)(Nm,{breakpoint:"portables",children:[f(),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),y()]})]})]})})},Qoe=e=>{let{wide:t,blocksAreSeparated:i,onSuccess:n}=e;const s=(0,p.I0)(),{track:r}=vi(),a=(0,p.v9)(YZ),o=(0,p.v9)(KZ),l=(0,p.v9)($Z),c=(0,p.v9)(eI),d=(0,p.v9)(tI),u=(0,p.v9)(JZ),g=(0,p.v9)(QZ),h=(0,p.v9)(nI),x=(0,p.v9)(X),f=(0,p.v9)(iI);(0,m.useEffect)((()=>{r(Wi({screen:$t.PaymentsAccount}))}),[r]),(0,m.useEffect)((()=>{s(lI.getDefaultFormValuesRequest())}),[s]);const[y,v]=(0,m.useState)([]),[_,b]=(0,m.useState)(!1);return(j=g)!==Ne.Success&&j!==Ne.Failure?(0,z.jsx)(Mp,{styling:Mp.Styling.Wide}):(0,z.jsx)(Joe,{defaultValues:function(){const{firstName:e,lastName:t,birthdate:i,ssn:n,personalIdNumber:s,nationality:r}=a;return{firstName:e,lastName:t,birthdate:i,ssn:n,personalIdNumber:s,address:o,nationality:r}}(),isSsnNumberRequired:l,isPersonalIdNumberRequired:c,isNationalityRequired:d,isBalanceActivated:f,agreementHint:h,canChange:u,onSubmit:async function(e){const t=function(e){var t;return x&&null!==(t=e.address)&&void 0!==t&&t.id?u?{userId:x,ssnNumber:e.ssn,personalIdNumber:e.personalIdNumber,addressId:e.address.id,nationality:e.nationality,firstName:e.firstName,lastName:e.lastName,birthdate:e.birthdate}:{userId:x,ssnNumber:e.ssn,personalIdNumber:e.personalIdNumber,addressId:e.address.id,nationality:e.nationality}:null}(e);if(!t)return;b(!0);const i=await(0,Fe.LjM)(t);if("errors"in i)return v(i.errors),void b(!1);b(!1),r(hn({source:Es.Settings})),n&&n()},apiErrors:y,wide:t,blocksAreSeparated:i,isLoading:_});var j},$oe=e=>e[qE],ele=(0,B.P1)($oe,(e=>{let{registration:t}=e;return t})),tle=(0,B.P1)(ele,(e=>{let{bankAccountRegistration:t}=e;return t})),ile=(0,B.P1)(ele,(e=>{let{uiState:t}=e;return t})),nle=(0,B.P1)($oe,(e=>{let{uiState:t}=e;return t})),sle=(0,B.P1)($oe,(e=>{let{bankAccounts:t}=e;return(null==t?void 0:t.find((e=>{let{isDefault:t}=e;return t})))||null}));let rle,ale;!function(e){e.Backend="backend"}(rle||(rle={})),function(e){e.AccountNumber="accountNumber",e.Name="name",e.RoutingNumber="routingNumber",e.Address="address",e.SpendingType="spendingType"}(ale||(ale={}));const ole=async function(e,t,i){return e===$C.Stripe?async function(e,t){return new Promise((i=>{window.Stripe?window.Stripe.bankAccount.createToken(function(e,t){var i,n;return{routing_number:null===(i=e.routingNumber)||void 0===i?void 0:i.replace(/\s/g,""),account_number:null===(n=e.accountNumber)||void 0===n?void 0:n.replace(/\s/g,""),country:t.country,currency:t.currency}}(e,t),function(e){return function(t,i){var n;e(200!==t?{success:!1,error:null===(n=i.error)||void 0===n?void 0:n.message}:{success:!0,token:i.id})}}(i)):i({success:!1})}))}(t,i):Promise.resolve(null)},lle=e=>{let{wide:t,registration:i}=e;const n=U("bank_account.manage"),s=U(),{register:r,watch:a,setValue:o,formState:{errors:l}}=(0,th.Gc)(),c=fh(l,"bank_account.manage"),{spending_type:d}=i.fields;(0,m.useEffect)((()=>{d&&(r(ale.SpendingType,{required:!0}),o(ale.SpendingType,tk.Checking))}),[r,o,d]);const u=t?fb.M.Styling.Wide:fb.M.Styling.Narrow,p=i.accountType.toLocaleLowerCase(),g=a(ale.SpendingType),h=e=>{e&&o(ale.SpendingType,e.id)},x=(e,t,i)=>({validate:r=>((e,t,i,r)=>{const{minLength:a,maxLength:o,adjustPattern:l,format:c,required:d}=i,u=l?e.replace(new RegExp(l,"gi"),""):e,m=new RegExp(c),p=a===o?a:void 0,g=r?"".concat(r,".").concat((0,v.snakeCase)(t)):(0,v.snakeCase)(t),h=n("".concat(g,".title"));return d&&!u?s("errors.blank",{field:h}):u.length<a?p?s("errors.min_length_fixed",{field:h,length:p}):s("errors.min_length",{field:h,min:a,max:o}):u.length>o?p?s("errors.max_length_fixed",{field:h,length:p}):s("errors.max_length",{field:h,min:a,max:o}):!!m.test(u)||n("".concat(g,".errors.pattern"))})(r,e,t,i)});return(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Tight,children:[(()=>{const e=i.fields[ek.Name];return e?(0,z.jsx)(fb.M,{...r(ale.Name,x(ale.Name,e)),styling:u,title:n("name.title"),placeholder:n("name.placeholder"),uncontrolled:!0,validation:hh(c(ale.Name))}):null})(),(()=>{const e=i.fields[ek.AccountNumber];if(!e)return null;const t="".concat(p,".account_number");return(0,z.jsx)(fb.M,{...r(ale.AccountNumber,x(ale.AccountNumber,e,p)),styling:u,title:n("".concat(t,".title")),placeholder:n("".concat(t,".placeholder")),autoComplete:"off",uncontrolled:!0,validation:hh(c(ale.AccountNumber))})})(),(()=>{const e=null==i?void 0:i.fields[ek.RoutingNumber];if(!e)return null;const t="".concat(p,".routing_number");return(0,z.jsx)(fb.M,{...r(ale.RoutingNumber,x(ale.RoutingNumber,e,p)),styling:u,title:n("".concat(t,".title")),placeholder:n("".concat(t,".placeholder")),autoComplete:"off",uncontrolled:!0,validation:hh(c(ale.RoutingNumber))})})(),(()=>{if(!(null==i?void 0:i.fields[ek.SpendingType]))return null;const e="".concat(p,".spending_type"),t=[{id:tk.Checking,title:n("".concat(e,".types.checking.title")),body:n("".concat(e,".types.checking.description"))},{id:tk.Savings,title:n("".concat(e,".types.saving.title")),body:n("".concat(e,".types.saving.description"))}],s=t.filter((e=>e.id===g))[0]||t[0];return(0,z.jsx)(YJ,{name:ale.SpendingType,inputTitle:n("".concat(e,".title")),onSave:h,data:t,selectedValue:s})})()]})},cle=e=>{let{onDetailsClick:t,wide:i}=e;const n=U("bank_account.manage.address"),{register:s,setValue:r,watch:a,formState:{errors:o}}=(0,th.Gc)(),l=fh(o,"bank_account.manage"),c=a(ale.Address),d=i?gt.Z.Styling.Wide:gt.Z.Styling.Narrow;return(0,m.useEffect)((()=>{s(ale.Address,{required:!0})}),[s]),(0,m.useEffect)((()=>{c||async function(){const e=await(0,Fe.o_O)();"user_address"in e&&e.user_address&&r(ale.Address,(0,V.X)(e.user_address))}()}),[r,c]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{styling:d,body:n("title")}),c?c?(0,z.jsx)(A_,{styling:d,type:gt.Z.Type.Navigating,showChevron:!0,address:c,onClick:t}):null:(0,z.jsx)(gt.Z,{styling:d,type:gt.Z.Type.Navigating,chevron:!0,title:n("add"),onClick:t,testId:"bank-account-address-details-add-button"}),function(){const e=hh(l(ale.Address));return e?(0,z.jsx)(gt.Z,{styling:d,children:e}):null}()]})},dle=()=>{const e=U("bank_account.manage.address"),[t,i]=(0,m.useState)(null),n=(0,p.v9)(Se),s=(0,m.useCallback)((async()=>{if(!n)return;const e=await(0,Fe.CX1)({businessAccountId:n});"errors"in e||e.addresses.business_address&&i((0,rt.f_)(e.addresses.business_address))}),[n]);(0,m.useEffect)((()=>{s()}),[s]);const r=()=>{const t={"profile-link":e=>(0,z.jsx)("a",{href:Me.Svv,children:e})};return(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:e("business_account_cta",t)})};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,body:e("title")}),(()=>{if(!t)return null;const{name:e,line1:i,line2:n,postalCode:s,city:a}=t;return(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Wide,title:e,children:[(0,z.jsxs)(xt.Z,{width:xt.Z.Width.Parent,children:[i,n&&" ,".concat(n)]}),(0,z.jsxs)(xt.Z,{width:xt.Z.Width.Parent,children:[s,", ",a]}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),r()]})})()]})},ule=e=>{let{isVisible:t,address:i,onChange:n,onCancel:s}=e;const r=U("bank_account.manage.address");return(0,z.jsxs)(cp.Z,{show:t,testId:"address-modal",children:[(0,z.jsx)(gt.Z,{children:(0,z.jsx)("div",{className:"u-text-center",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,alignment:xt.Z.Alignment.Center,text:r("modal.title")})})}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(_I,{address:i,screenTrackingType:bI.SettingsBillingAddress,onChange:n,onCancel:s})]})},mle=e=>{let{show:t,onClose:i}=e;const n=U("bank_account.error_modal");return(0,z.jsx)(cp.Z,{show:t,title:n("title"),body:n("body"),closeOnOverlay:!0,actions:[{text:n("actions.close"),style:cp.Z.ActionStyling.Filled,callback:i}]})},ple=()=>{const e=(0,p.I0)(),{track:t}=vi(),i=U("bank_account.manage"),n=XY(Me.coZ),s=(0,p.v9)(tle),r=(0,p.v9)(sle),a=(0,p.v9)(ile),o=(0,p.v9)(Ze),l=(0,p.v9)(sI),c=(0,p.v9)(rI),d=(0,p.v9)(Cs),[u,g]=(0,m.useState)(),[h,f]=(0,m.useState)(Ne.Idle),[y,_]=(0,m.useState)(!1),[b,j]=(0,m.useState)(!1),S=(0,th.cI)(),{formState:Z,handleSubmit:I,setValue:C,setError:k,watch:w}=S,P=w(ale.Address);(0,m.useEffect)((()=>{t(Wi({screen:$t.BankAccount}))}),[t]),(0,m.useEffect)((()=>{e(GE.fetchBankAccountRegistrationRequest()),e(GE.fetchBankAccountsRequest()),e(lI.getDefaultFormValuesRequest())}),[e]),(0,m.useEffect)((()=>{(null==s?void 0:s.tokenizer)===$C.Stripe&&e(MZ.fetchSystemConfigurationRequest())}),[e,s]),(0,m.useEffect)((()=>{h===Ne.Idle&&(null==s?void 0:s.tokenizer)===$C.Stripe&&(async()=>{f(Ne.Pending);try{await Hb({id:"stripe",src:"https://js.stripe.com/v2/stripe.js"}),f(Ne.Success)}catch{f(Ne.Failure)}})()}),[s,h]),(0,m.useEffect)((()=>{d&&window.Stripe&&h===Ne.Success&&window.Stripe.setPublishableKey(d)}),[d,h]),(0,m.useEffect)((()=>{if(!l||!c||null!=r&&r.name||C(ale.Name,[l,c].join(" ")),!r)return;const{name:e}=r;e&&C(ale.Name,e)}),[r,l,c,C]);const T=e=>{let{valid:i,accountNumber:n}=e;const s=n.slice(-4);var r;t({event:"user.save_bank_account",extra:{valid:(r={valid:i,failure_reason:!i&&rle.Backend||void 0,details:s}).valid,failure_reason:r.failure_reason,details:r.details}})},F=I((async e=>{const t=(e=>s?Object.keys(e).reduce(((t,i)=>{var n;const r=null===(n=s.fields[(0,v.snakeCase)(i)])||void 0===n?void 0:n.adjustPattern,a=e[i];return t[i]=r&&a?a.replace(new RegExp(r,"gi"),""):a,t}),{}):e)(e),{name:r,routingNumber:a,accountNumber:o,address:l,spendingType:c}=t;g(void 0);const d=await(async e=>{if(null==s||!s.tokenizer)return null;const t=await ole(s.tokenizer,e,s.info);return t?t.success?{token:t.token}:{error:t.error||i("tokenize.failed")}:null})(t);if(null!=d&&d.error)return void g(d.error);const u=await(0,Fe.Tiv)({name:r,routingNumber:a,accountNumber:o,addressId:null==l?void 0:l.id,externalCode:null==d?void 0:d.token,spendingType:c},await $M());if("errors"in u)return(e=>{const t=[];e.forEach((e=>{let{field:i,value:n}=e;const s=(0,v.camelCase)(i);(0,_i.IF)(s,ale)?k(s,{type:"manual",message:n}):t.push(n)})),null!=t&&t.length&&g(t.join("\n"))})(u.errors),u.status===pm.o.InternalError&&j(!0),void T({valid:!1,accountNumber:o});T({valid:!0,accountNumber:o}),(0,ls.mZ)(n)})),N=()=>(0,z.jsx)(ic.I,{type:ic.I.Type.Submit,styling:ic.I.Styling.Filled,isLoading:Z.isSubmitting,disabled:Z.isSubmitting||Z.isSubmitSuccessful,text:i("actions.submit"),testId:"bank-account-form-submit-button"});return a===Ne.Success&&s?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(th.RV,{...S,children:(0,z.jsxs)("form",{onSubmit:F,children:[u?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{theme:"warning",styling:gt.Z.Styling.Wide,body:u}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})]}):null,(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,body:i("header")}),s?(0,z.jsx)(lle,{wide:!0,registration:s}):null,(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),o?(0,z.jsx)(dle,{}):(0,z.jsx)(cle,{wide:!0,onDetailsClick:()=>{_(!0)}}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium})]}),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(Nm,{breakpoint:"desktops",children:(0,z.jsx)(gt.Z,{theme:"transparent",styling:gt.Z.Styling.Tight,suffix:N(),children:(0,z.jsx)(xt.Z,{text:i("note"),type:xt.Z.Type.Caption})})}),(0,z.jsxs)(Nm,{breakpoint:"portables",children:[(0,z.jsx)(xt.Z,{text:i("note"),type:xt.Z.Type.Caption}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),N(),(0,z.jsx)(x.Z,{size:x.Z.Size.Small})]})]})]})}),(0,z.jsx)(ule,{address:P,isVisible:y,onChange:e=>{C(ale.Address,e),_(!1)},onCancel:()=>_(!1)}),(0,z.jsx)(mle,{show:b,onClose:()=>j(!1)})]}):(0,z.jsx)(Mp,{size:Mp.Size.Large})};let gle;!function(e){e.RelatedMember="member",e.RelatedTransaction="transaction",e.RelatedItem="item",e.Email="email",e.IsEnglishAllowed="isEnglishAllowed",e.Message="message",e.Attachments="attachments"}(gle||(gle={}));const hle=e=>{let{isTransactionRequired:t,preselectedTransaction:i}=e;const n=(0,p.v9)(Nc),s=E(),r=U("help_contact_form.transaction"),a=Ip(),{setValue:o,control:l,clearErrors:c,formState:{errors:d}}=(0,th.Gc)(),u=fh(d,"help_contact_form"),g=i?RA(i):null,[h,f]=(0,m.useState)(null),[y,v]=(0,m.useState)(g),[_,b]=(0,m.useState)(""),j=EZ(y),S=ql((e=>{a()&&b(e)}),350);function Z(e){let{target:t}=e;S(t.value)}const I=(e,t)=>()=>{t.setIsSaveEnabled(!0),c(gle.RelatedTransaction),v(e),s.phones||(t.closeDropdown(),o(gle.RelatedTransaction,e.id))};function C(){o(gle.RelatedTransaction,null==y?void 0:y.id)}function k(){v(j)}function w(e,t){const i=e?Ua(e,n):null;return e||t?(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column",children:[i&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:i}),(0,z.jsx)(x.Z,{size:x.Z.Size.Small})]}),(0,z.jsx)(xt.Z,{text:t})]}):null}function P(e){const t=e.order.items[0],i=e.userSide===md.Seller?e.buyer:e.seller,n=Xa(null==t?void 0:t.photos,Xe.Small)||"/assets/no-photo/item.svg",s=Qe(null==i?void 0:i.photo)||Ke();return(0,z.jsx)(w9.Z,{primary:(0,z.jsx)(Kl.U,{alt:"transaction-image-".concat(e.id),src:n,size:Kl.U.Size.Large}),secondary:(0,z.jsx)(Kl.U,{styling:Kl.U.Styling.Circle,src:s,size:Kl.U.Size.Regular})})}function T(e){return(0,z.jsx)(kp,{children:null==h?void 0:h.map((t=>function(e,t){const i=(null==y?void 0:y.id)===e.id;return(0,z.jsx)(gt.Z,{title:e.itemTitle,body:w(e.order.price,e.statusTitle),onClick:I(e,t),suffix:(0,z.jsx)(qx.J,{name:"".concat(e.id,"-radio"),checked:i}),prefix:P(e),clickable:!0},e.id)}(t,e)))})}return(0,m.useEffect)((()=>{!async function(){const e=await(0,Fe.tUX)();if("errors"in e)return;const t=(e=>e.map(RA))(e.recent_transactions),i=null==t?void 0:t.filter((e=>{let{itemTitle:t}=e;return t.toLowerCase().includes(_.toLowerCase())}));f(i)}()}),[_]),(0,z.jsx)(th.Qr,{defaultValue:(null==y?void 0:y.id)||null,name:gle.RelatedTransaction,control:l,rules:{required:t},render:()=>(0,z.jsx)(gI,{name:gle.RelatedTransaction,title:r("title"),placeholder:r("placeholder"),render:T,onChange:Z,value:null==y?void 0:y.itemTitle,onSave:C,onCancel:k,disabled:null!==i,validation:hh(u(gle.RelatedTransaction,{required:r("error")}))})})},xle=e=>{let{title:t,users:i,placeholder:n,selectedUser:s,onChange:r,onSave:a,name:o,validation:l,preselectedUser:c,disableSearch:d}=e;const[u,p]=(0,m.useState)(c||s),g=E(),h=(e,t)=>()=>{p(e),t.setIsSaveEnabled(!0),g.phones||(t.closeDropdown(),a(e))};return(0,z.jsx)(gI,{title:t,placeholder:n,name:o,render:function(e){return i?(0,z.jsx)(kp,{children:i.map((t=>function(e,t){const i=(null==u?void 0:u.id)===e.id;return(0,z.jsx)(gt.Z,{title:e.login,clickable:!0,onClick:h(e,t),prefix:(0,z.jsx)(Tp,{src:e.thumbnail,size:Kl.U.Size.Regular,styling:Kl.U.Styling.Circle}),suffix:(0,z.jsx)("div",{"data-testid":"user-select-".concat(e.login),children:(0,z.jsx)(qx.J,{name:"user-select",checked:i})})},e.id)}(t,e)))}):null},onChange:r,onSave:function(){u&&a(u)},onCancel:function(){p(s)},value:null==s?void 0:s.login,readOnly:d,disabled:!!c,validation:l})},fle=e=>{let{isMemberRequired:t}=e;const i=U("help_contact_form.member"),n=Ip(),[s,r]=(0,m.useState)([]),[a,o]=(0,m.useState)(""),[l,c]=(0,m.useState)(null),{setValue:d,control:u,clearErrors:p,formState:{errors:g}}=(0,th.Gc)(),h=fh(g,"help_contact_form"),x=ql((e=>{n()&&o(e)}),350),f=e=>{let{target:t}=e;x(t.value)};function y(e){e&&(p(gle.RelatedMember),c(e),d(gle.RelatedMember,e.id))}return(0,m.useEffect)((()=>{!async function(){const e=await(0,Fe.eCY)(a);"errors"in e||r(mt(e.users))}()}),[a]),(0,z.jsx)(th.Qr,{defaultValue:null,name:gle.RelatedMember,control:u,rules:{required:t},render:()=>(0,z.jsx)(xle,{name:gle.RelatedMember,title:i("title"),placeholder:i("placeholder"),users:s,onChange:f,selectedUser:l,onSave:y,validation:hh(h(gle.RelatedMember,{required:i("error")}))})})},yle=()=>{const{control:e}=(0,th.Gc)(),t=U("help_contact_form.english_allowed");return(0,z.jsx)(gt.Z,{body:t("explanation"),suffix:(0,z.jsx)(th.Qr,{name:gle.IsEnglishAllowed,control:e,defaultValue:!1,render:e=>{let{field:{value:t,name:i,onChange:n}}=e;return(0,z.jsx)("div",{"data-testid":"english-allowed",children:(0,z.jsx)(BZ.F,{name:i,checked:t,onChange:e=>n(e.target.checked)})})}})})},vle=e=>{let{isItemRequired:t}=e;const i=(0,p.v9)(Nc),n=E(),s=U("help_contact_form.item"),r=Ip(),{setValue:a,control:o,clearErrors:l,formState:{errors:c}}=(0,th.Gc)(),d=fh(c,"help_contact_form"),[u,g]=(0,m.useState)(null),[h,x]=(0,m.useState)(),[f,y]=(0,m.useState)(""),v=EZ(h),_=ql((e=>{r()&&y(e)}),350);function b(e){let{target:t}=e;_(t.value)}const j=(e,t)=>()=>{t.setIsSaveEnabled(!0),x(e),n.phones||(t.closeDropdown(),l(gle.RelatedItem),a(gle.RelatedItem,e.id))};function S(){l(gle.RelatedItem),a(gle.RelatedItem,null==h?void 0:h.id)}function Z(){x(v)}function I(e,t){const n=Ma(e,{locale:i,currency:t});return(0,z.jsx)(xt.Z,{text:n})}function C(e){return(0,z.jsx)(kp,{children:null==u?void 0:u.map((t=>function(e,t){const i=(null==h?void 0:h.id)===e.id,n=Xa(e.photos,Xe.Small);return(0,z.jsx)(gt.Z,{title:e.title,body:I(Number(e.price.amount),e.price.currencyCode),onClick:j(e,t),suffix:(0,z.jsx)(qx.J,{name:"".concat(e.id,"-radio"),checked:i}),prefix:(0,z.jsx)(Kl.U,{src:n,size:Kl.U.Size.XLarge})},e.id)}(t,e)))})}return(0,m.useEffect)((()=>{!async function(){const e=await(0,Fe.c8t)();if("errors"in e)return;const t=no(e.items),i=null==t?void 0:t.filter((e=>{let{title:t}=e;return t.toLowerCase().includes(f.toLowerCase())}));g(i)}()}),[f]),(0,z.jsx)(th.Qr,{defaultValue:null,name:gle.RelatedItem,control:o,rules:{required:t},render:()=>(0,z.jsx)(gI,{name:gle.RelatedItem,title:s("title"),placeholder:s("placeholder"),render:C,onChange:b,value:null==h?void 0:h.title,onSave:S,onCancel:Z,validation:hh(d(gle.RelatedItem,{required:s("error")}))})})},_le=e=>{let{isLoginTipDisplayed:t}=e;const i=U("help_contact_form.email"),{register:n,formState:{errors:s}}=(0,th.Gc)(),r=fh(s,"help_contact_form"),[a,o]=(0,m.useState)(!1),[l,c]=(0,m.useState)("");return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gh,{...n(gle.Email,{required:!0,validate:function(){if(!a)return i("errors.invalid")}}),styling:"wide",onChange:function(e){let{target:t}=e;c(t.value);const i=DK(t.value);o(i)},title:i("title"),placeholder:i("placeholder"),uncontrolled:!0,value:l,validation:hh(r(gle.Email,{required:i("errors.empty")}))}),t&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{title:i("login_tip"),type:gt.Z.Type.Navigating,chevron:!0,url:Me.iGV})]})]})},ble=e=>{let{faqEntry:t,isLoginTipDisplayed:i,preselectedTransaction:n,isEnglishAllowedVisible:s,photoEntryId:r}=e;const{searchParams:a}=xc(),o=U("help_contact_form"),{track:l}=vi(),c=(0,th.cI)(),{handleSubmit:d,getValues:u,register:f,setError:y,formState:{errors:v,isSubmitting:_}}=c,b=fh(v,"help_contact_form"),{transactionIdVisible:j,transactionIdRequired:S,memberIdVisible:Z,memberIdRequired:I,itemIdVisible:C,itemIdRequired:k,attachmentsVisible:w,attachmentsRequired:P,submitPhotoTips:T,submitButton:F}=t,{fetch:N,data:E,isLoading:O}=ih(Fe.YAs),R=(0,p.v9)(X),D=(0,p.v9)(hA),A=(0,p.v9)(fA),M=(0,p.v9)(Wt("contact_email_for_blocked_user")),B=(0,p.v9)(Wt("validate_cs_form_emails")),q=(0,p.v9)(Wt("react_hc_contact_form_max_images_count_20")),V=(0,p.v9)(Wt("react_hc_contact_form_email_verification_check")),H=(0,p.v9)(Pe)&&M,G=V&&(null==E?void 0:E.prompt.mandatory)&&(null==E?void 0:E.prompt.methods.includes(j9.EmailCode)),W=!R||H||G,[Y,K]=(0,m.useState)(null),[J,Q]=(0,m.useState)(D),[$,ee]=(0,m.useState)(Ne.Idle);(0,m.useEffect)((()=>{R&&V&&N(R)}),[R,N,V]);const{thread_id:te}=a;(0,m.useEffect)((()=>{"string"==typeof te&&l({event:"notices.user.open_contact_form",extra:{thread_id:{threadId:te}.threadId}})}),[te,l]),(0,m.useEffect)((()=>{Q(D),J&&K(null)}),[D,J]);const ie=(0,m.useCallback)((e=>{if(!B)return;const t=e.find((e=>{let{field:t}=e;return t===gle.Email}));t&&y(gle.Email,{type:"manual",message:t.value})}),[y,B]);return O?(0,z.jsx)(Mp,{size:Mp.Size.XLarge,testId:"verification-prompt-loader"}):(0,z.jsx)("form",{onSubmit:d((async function(){if(P&&!J)return;ee(Ne.Pending);const{faq_entry_id:e,problem_text_id:t}=a,i=u(),n={faqEntryId:Number(e),ch:"help_center",problemTextId:t,transactionId:i.transaction,threadId:Number(te),itemId:i.item,message:i.message,memberId:Number(i.member),isEnglishAllowed:i.isEnglishAllowed,email:i.email||void 0,tempUuid:A},s=await(0,Fe.yUl)(n);if("errors"in s)return void ie(s.errors);if(P&&!J)return;ee(Ne.Success);const r={transaction_id:i.transaction,faq_entry_id:e};"string"==typeof te&&l({event:"notices.user.submit_ticket",extra:{thread_id:{threadId:te}.threadId}}),l(Ri({target:qm.Submit,screen:$t.ContactForm,targetDetails:JSON.stringify(r)})),R&&s.user_msg_thread_id?(0,ls.ru)(Rc(s.user_msg_thread_id)):(0,ls.ru)(Me.TVB)})),children:(0,z.jsxs)(th.RV,{...c,children:[(0,z.jsxs)(g.Z,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,title:(0,z.jsx)(xt.Z,{text:o("header"),theme:"amplified",type:xt.Z.Type.Heading})}),(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[j&&(0,z.jsx)(hle,{preselectedTransaction:n,isTransactionRequired:S}),Z&&(0,z.jsx)(fle,{isMemberRequired:I}),C&&(0,z.jsx)(vle,{isItemRequired:k}),W&&(0,z.jsx)(_le,{isLoginTipDisplayed:i&&!R}),w&&(0,z.jsx)(gt.Z,{children:(0,z.jsx)(bte,{type:YF.Complaint,numberOfImagesPerItem:q?20:5,displayType:xte.Full,photoEntryId:r,enableRotation:!1,enablePhotoTips:!1,customValidationMessage:Y,submitPhotoTips:T})}),(0,z.jsx)(Gw,{...f(gle.Message,{required:{value:!0,message:o("message.errors.required",{min:15})},validate:e=>function(e){return e.trim().length>=15}(e)||o("message.errors.too_short",{min:15})}),rows:5,placeholder:o("message.placeholder"),styling:"wide",title:o("message.title"),validation:hh(b(gle.Message)),uncontrolled:!0}),s&&(0,z.jsx)(yle,{})]}),(0,z.jsx)(x.Z,{})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,suffix:(0,z.jsx)(ic.I,{text:F||o("submit"),disabled:_||$===Ne.Success,isLoading:_,styling:ic.I.Styling.Filled,size:ic.I.Size.Medium,type:ic.I.Type.Submit,onClick:function(){P&&!J&&K(o("attachments.errors"))}}),children:(()=>{const e={"terms-link":e=>(0,z.jsx)("a",{href:Me.qyY,children:e}),"privacy-link":e=>(0,z.jsx)("a",{href:Me.hOY,children:e})};return(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:o("legal_footer",e)})})()})]})})},jle=e=>{let{title:t,subtitle:i,showRulesTitle:n,onRulesClick:s}=e;const r=U();return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{width:xt.Z.Width.Parent,type:xt.Z.Type.Heading,text:t}),i&&(0,z.jsx)(xt.Z,{type:xt.Z.Type.Body,text:i,inline:!0}),n&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XSmall,orientation:x.Z.Orientation.Vertical}),(0,z.jsx)("span",{onClick:s,children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Body,text:r("forum.rules.title"),width:xt.Z.Width.Parent,format:!0,inline:!0,clickable:!0})})]})]})},Sle=e=>{let{title:t,forumTitle:i,subforumTitle:n,showRulesTitle:s,onRulesClick:r}=e;const a=U("forum.topic_heading");return(0,z.jsx)(jle,{title:t,subtitle:i&&n?a("subtitle_with_subforum",{forumTitle:i,subforumTitle:n}):i&&!n?a("subtitle",{forumTitle:i}):null,showRulesTitle:s,onRulesClick:r})},Zle=e=>{let{show:t,onClose:i}=e;const n=U("forum.error_modal");return(0,z.jsx)(cp.Z,{show:t,title:n("title"),body:n("body"),closeOnOverlay:!0,actions:[{text:n("actions.close"),style:cp.Z.ActionStyling.Filled,callback:i}]})},Ile=e=>{let{forumPath:t,forumTitle:i,subforumPath:n,subforumTitle:s,topicPath:r,topicTitle:a,testId:o}=e;const l=U();return(0,z.jsxs)(h3,{testId:o,children:[(0,z.jsx)(h3.Item,{testId:"home-breadcrumb",url:Me.R1Q,title:l("forum.breadcrumbs.forum_home")}),t&&i&&(0,z.jsx)(h3.Item,{testId:"forum-breadcrumb",url:t,title:i}),!!n&&!!s&&(0,z.jsx)(h3.Item,{testId:"subforum-breadcrumb",url:n,title:s}),!!r&&!!a&&(0,z.jsx)(h3.Item,{testId:"topic-breadcrumb",url:r,title:'"'.concat(a,'"')})]})},Cle=e=>{let{isLoading:t,discardButtonTitle:i,submitButtonTitle:n,onSubmitClick:s,onDiscardClick:r}=e;const a=E();return(0,z.jsx)("div",{className:"u-ui-padding-horizontal-large@phones u-flex-wrap-reverse u-flexbox u-justify-content-flex-end",children:(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{orientation:a.phones?x.Z.Orientation.Horizontal:x.Z.Orientation.Vertical}),children:[(0,z.jsx)(ic.I,{testId:"discard-button".concat(t?"-loading":""),type:ic.I.Type.Button,text:i,inline:a.tabletsUp,theme:"warning",isLoading:t,disabled:t,onClick:r}),(0,z.jsx)(ic.I,{testId:"submit-button".concat(t?"-loading":""),type:ic.I.Type.Submit,text:n,inline:a.tabletsUp,theme:"primary",styling:ic.I.Styling.Filled,isLoading:t,disabled:t,onClick:s})]})})},kle=e=>{return{id:e.id,userId:e.user_id,isAuthor:e.is_author,isPostAuthor:e.is_post_author,repliedPostId:e.replied_post_id,forumId:e.forum_id,subforumId:e.sub_forum_id,topicId:e.topic_id,topicTitle:e.topic_title,body:e.body,isAnonymous:e.is_anonymous,wasAnonymous:e.was_anonymous,createdAt:e.created_at,createdAtTs:e.created_at_ts,photos:ct(e.photos),likeCount:e.like_count,isLiked:e.is_liked,canEdit:e.can_edit,canDelete:e.can_delete,isReplyDeleted:e.is_reply_deleted,postReply:e.post_reply&&(t=e.post_reply,{id:t.id,userId:t.user_id,forumId:t.forum_id,topicId:t.topic_id,isAuthor:t.is_author,isPostAuthor:t.is_post_author,isLiked:t.is_liked,isAnonymous:t.is_anonymous,isUserDeleted:t.user_is_deleted,body:t.body,createdAtTs:t.created_at_ts,photos:ct(t.photos),likeCount:t.like_count,canEdit:t.can_edit,canDelete:t.can_delete,user:t.user&&dt(t.user),wasAnonymous:t.was_anonymous}),user:e.user&&dt(e.user),isUserDeleted:e.user_is_deleted,forumPostPath:e.forum_post_path};var t},wle=e=>({id:e.id,title:e.title,order:e.order,path:e.path}),Ple=e=>{return{id:e.id,prefix:e.prefix,title:e.title,intro:e.intro,description:e.description,rules:e.rules,rulesUrl:e.rules_url,order:e.order,topicCount:e.topic_count,postCount:e.post_count,subforums:(t=e.sub_forums,t.map(wle)),lastPostDate:e.last_post_date,lastPostUser:e.last_post_user&&dt(e.last_post_user),lastPostUrl:e.last_post_url,isLastPostUserDeleted:e.last_post_user_is_deleted,isLastPostAnonymous:e.last_post_is_anonymous,isAllowAnonymous:e.is_allow_anonymous,isVisibleForModerators:!!e.is_visible_for_moderators,isForModerators:!!e.is_for_moderators,isDeleteOld:e.is_delete_old,deleteAfterDays:e.delete_after_days,moderatorUserIds:"string"==typeof e.moderator_user_ids?[]:e.moderator_user_ids,forumGroupId:e.forum_group_id,userGroupId:e.user_group_id,canPost:e.can_post,path:e.path};var t},zle=(e,t)=>{const[i,n]=(0,m.useState)([]),[s,r]=(0,m.useState)(),a=(0,m.useRef)(null),o=(0,m.useRef)(null),{caretPosition:l}=(e=>{const[t,i]=(0,m.useState)(null),n=Ip();return(0,m.useEffect)((()=>{if(!e)return;const t=()=>{setTimeout((()=>{if(!n())return;const{selectionStart:t,selectionEnd:s}=e;i((i=>!i||t!==i.start&&s!==i.end?{start:e.selectionStart,end:e.selectionEnd}:i))}),0)};return e.addEventListener("change",t),e.addEventListener("keyup",t),e.addEventListener("click",t),e.addEventListener("focus",t),()=>{e.removeEventListener("change",t),e.removeEventListener("keyup",t),e.removeEventListener("click",t),e.removeEventListener("focus",t)}}),[n,e]),{caretPosition:t}})(s),c=(0,m.useCallback)((()=>{o.current=null,n([])}),[]),d=(0,m.useCallback)((e=>{e&&r(e)}),[]),u=(0,m.useCallback)((e=>{e.key===Lm.Escape&&c()}),[c]);(0,m.useEffect)((()=>(document.addEventListener("keydown",u),()=>{document.removeEventListener("keydown",u)})),[u]);const p=ql((async e=>{if(null===o.current)return;const t=await(0,Fe.rBb)({query:e});if("errors"in t)return void n([]);const i=mt(t.mention_suggestions);s&&null!==o.current&&n(i)}),250,!0),g=(0,m.useCallback)((()=>{if(!l)return void c();const t=l.start!==l.end,i=e;if(t||!l.start)return void c();const n=((e,t)=>{const i=t.slice(0,e).search(/\s[^\s]*$/)+1;if(i>=e||i>=t.length||"@"!==t[i])return null;let n=t.slice(i).search(/\s[^\s]*/);return-1!==n&&(n+=i),{start:i+1,end:-1===n?t.length:n}})(l.start,i);if(!n)return void c();a.current=n.start;const s=i.slice(n.start,n.end);o.current===s||(o.current=s,p(s))}),[l,p,e,c]);return(0,m.useEffect)((()=>{g()}),[g]),{mentions:i,handleMentionClick:i=>{var n;const r=e,l=a.current||0,c=(null===(n=o.current)||void 0===n?void 0:n.length)||0,d=l+i.length,u=r.slice(0,l),m=r.slice(l+c),p=/\s/g.test(m[0])?"":" ",g="".concat(u).concat(i).concat(p).concat(m);var h;o.current=i,h=d+1,s&&(h&&s.setSelectionRange(h,h),s.focus()),t(g)},inputElementRef:d,hideMentions:c}},Tle=e=>{let{user:t,isHighlighted:i,onMouseOver:n,onClick:s,onFocus:r}=e;return(0,z.jsx)("li",{className:"input-mentions__item",onFocus:r,onMouseOver:n,"data-testid":i?"mention-item-highlighted":"mention-item",children:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Narrow,clickable:!0,onClick:s,highlighted:i,prefix:(0,z.jsx)(Tp,{src:t.thumbnail,size:Kl.U.Size.Regular,alt:t.login,styling:Kl.U.Styling.Circle}),title:t.login})})},Fle=e=>{let{mentions:t,onMentionClick:i,className:n}=e;const[s,r]=(0,m.useState)(0),a=e=>()=>{r(e)},o=(0,m.useCallback)((e=>{if(t.length)switch(e.key){case Lm.ArrowUp:e.preventDefault(),r((e=>e<=0?t.length-1:e-1));break;case Lm.ArrowDown:e.preventDefault(),r((e=>e>=t.length-1?0:e+1));break;case Lm.Enter:if(!t[s])return;e.preventDefault(),i(t[s].login)}}),[t,s,i]);if((0,m.useEffect)((()=>(document.addEventListener("keydown",o,!1),()=>document.removeEventListener("keydown",o,!1))),[o]),(0,m.useEffect)((()=>{t.length&&s>=t.length&&r(0)}),[t,s]),!t.length)return null;const l=y()("input-mentions",n);return(0,z.jsx)("div",{className:l,children:(0,z.jsxs)(g.Z,{styling:g.Z.Styling.Lifted,children:[(0,z.jsx)(x.Z,{}),(0,z.jsx)("ul",{className:"input-mentions__list",children:t.map((function(e,t){return(0,z.jsx)(Tle,{user:e,onClick:(n=e.login,()=>{i(n)}),onFocus:a(t),onMouseOver:a(t),isHighlighted:s===t},e.id);var n}))}),(0,z.jsx)(x.Z,{})]})})},Nle=e=>({value:e.id.toString(),label:e.title}),Lle=e=>e.map(Nle),Ele=e=>e?Nle(e).value:"",Ole=e=>{let{selectedSubforum:t,subforums:i,onChange:n}=e;const s=U("forum.subforum_select"),r=s("default_option");return(0,z.jsx)(yb.R,{testId:"subforum-select",options:[(a=r,{value:"",label:a}),...Lle(i)],value:Ele(t),onChange:function(e){const{value:t}=e.target;n(i.find((e=>e.id.toString()===t))||null)},title:s("title"),styling:yb.R.Styling.Wide,name:"subforum_select"});var a},Rle=e=>{let{isOpen:t,body:i,onConfirm:n}=e;const s=U("forum.rules");return(0,z.jsx)(cp.Z,{show:t,title:s("modal_title"),body:(0,z.jsx)(xt.Z,{text:i,html:!0}),closeOnOverlay:!0,actions:[{text:s("confirm"),style:cp.Z.ActionStyling.Filled,callback:n}]})};var Dle;!function(e){e.Title="title",e.Message="body",e.IsAnonymous="isAnonymous",e.Subforum="subforum"}(Dle||(Dle={}));const Ale=e=>({id:e.id,title:e.title,sortingOrder:e.sorting_order,forums:e.forums.map(Ple),rulesUrl:e.rules_url}),Mle=e=>{let{iconName:t,iconColor:i,text:n,textType:s,textTheme:r}=e;return(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center",children:[(0,z.jsx)(ht.Z,{name:t,size:ht.Z.Size.Small,color:i}),(0,z.jsx)(x.Z,{size:x.Z.Size.Small,orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(xt.Z,{text:n,type:s,theme:r})]})},Ule=()=>{const e=U();return(0,z.jsx)(ht.Z,{name:"check-circle",color:ht.Z.Color.Success,size:ht.Z.Size.XSmall,title:e("forum.verified_user_icon.accessibility_title")})},Ble=e=>{let{userName:t,isUserDeleted:i,isPostAuthor:n,isTopicAuthor:s,isAnonymous:r,anonymousTranslation:a,showAuthorSuffix:o=!0,topicTitle:l,userUrl:c,postUrl:d,isUserVerified:u}=e;const m=U(),p=n&&r&&!t;let g=i?m("forum.post.item.ex_member_title"):t||a;p&&(g+=" ".concat(m("forum.post.item.owner_title"))),s&&o&&(g+="  ".concat(m("forum.post.item.author_title")));const h=g;return l&&(g+="  ".concat(l)),{loginTitle:g,renderLoginTitle:()=>l&&d?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("a",{href:c||d,className:"u-align-self-flex-start",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:h})}),u&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)(Ule,{})]}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)("a",{href:d,children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:"  ".concat(l)})})]}):(0,z.jsxs)("a",{href:c,children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:g}),u&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)(Ule,{})]})]})}},qle=e=>{let{url:t,date:i,isAnonymous:n,userLogin:s,isUserDeleted:r,isUserVerified:a,isFavourite:o,postCount:l,forwardedRef:c}=e;const{formatRelativeTime:d}=Rx(),{formatNumber:u}=(0,O.Z)(),m=U(),{loginTitle:p}=Ble({anonymousTranslation:m("forum.last_post.anonymous_username"),userName:s,isPostAuthor:!1,isTopicAuthor:!1,isAnonymous:n,isUserDeleted:r}),g=m("forum.last_post.prefix"),h=!!s||n||r;return(0,z.jsxs)("span",{ref:c,className:"u-flexbox u-align-items-center",children:[void 0!==l&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(ht.Z,{name:"comment",size:ht.Z.Size.Small,color:ht.Z.Color.GreyscaleLevel4}),(0,z.jsx)(x.Z,{size:x.Z.Size.Small,orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:u(l),theme:"inherit"}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium,orientation:x.Z.Orientation.Vertical})]}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,theme:"inherit",children:(0,z.jsxs)("a",{href:t,className:"u-color-inherit","data-testid":"last-post-date-link-a",children:["".concat(g," ").concat(d(i)),h&&(0,z.jsx)(Nm,{breakpoint:"tabletsUp",children:" - ".concat(p)})]})}),a&&(0,z.jsxs)(Nm,{breakpoint:"tabletsUp",children:[(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)(Ule,{})]}),o&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Medium,orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(ht.Z,{name:"bookmark-filled",size:ht.Z.Size.Small,color:ht.Z.Color.Primary})]})]})},Vle=(0,m.forwardRef)(((e,t)=>(0,z.jsx)(qle,{...e,forwardedRef:t}))),Hle=e=>{let{title:t,description:i,topicCount:n,postCount:s,lastPostUser:r,lastPostDate:a,lastPostUrl:o,isLastPostAnonymous:l,url:c,isUserDeleted:d}=e;const{formatNumber:u}=(0,O.Z)(),p=(0,m.useRef)(null),g=(0,m.useRef)(null);function h(e,t){return(0,z.jsx)(Mle,{iconName:e,iconColor:ht.Z.Color.GreyscaleLevel4,text:u(t),textTheme:"inherit",textType:xt.Z.Type.Caption})}return(0,z.jsx)("div",{"data-testid":"forum-cell",children:(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Wide,type:gt.Z.Type.Navigating,onClick:function(e){const t=p.current,i=g.current;e.target instanceof Node&&t&&i&&(t.contains(e.target)||i.contains(e.target))||(0,ls.ru)(c)},children:[(0,z.jsxs)("a",{className:"u-disable-underline u-color-inherit",href:c,ref:p,"data-testid":"forum-link",children:[(0,z.jsx)(xt.Z,{width:xt.Z.Width.Parent,type:xt.Z.Type.Title,text:t}),(0,z.jsx)("div",{className:"forum-cell__body",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Body,width:xt.Z.Width.Parent,text:i})}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium})]}),(0,z.jsx)("div",{className:"u-flexbox",children:(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.Medium,orientation:x.Z.Orientation.Vertical}),children:[h("list",n),h("comment",s),a&&o&&(a&&o?(0,z.jsx)(Vle,{ref:g,url:o,date:a,isAnonymous:l,userLogin:null==r?void 0:r.login,isUserVerified:null==r?void 0:r.isIdentity,isUserDeleted:d}):null)]})})]})})},Gle=e=>{let{topSpacerSize:t,topDivider:i}=e;const n=(0,p.I0)(),{forumClosureBanner:s}=(0,p.v9)(Cl);return(0,m.useEffect)((()=>{n(fV())}),[n]),s?(0,z.jsxs)(z.Fragment,{children:[i?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(h.Z,{})]}):null,t?(0,z.jsx)(x.Z,{size:t}):null,(0,z.jsx)(oh.Z,{title:s.title,body:s.subtitle,type:oh.Z.Type.Info,styling:oh.Z.Styling.Tight,actions:[{text:s.action.title,callback:()=>{},url:s.action.url}]})]}):null},Wle=e=>{let{isTopicAuthor:t,isPostAuthor:i,postCount:n,userName:s,userImage:r,timePosted:a,userUrl:o,isUserVerified:l,isAnonymous:c,isUserDeleted:d,isSearchResultsVariant:u,topicTitle:m,postUrl:p}=e;const g=U(),{formatRelativeTime:h}=Rx(),f=g("forum.post.item.anonymous_author"),{renderLoginTitle:y}=Ble({anonymousTranslation:f,userName:s,isPostAuthor:i,isTopicAuthor:t,isAnonymous:c,isUserDeleted:d,showAuthorSuffix:!u,topicTitle:u?m:void 0,userUrl:o,postUrl:p,isUserVerified:l}),v=r||Ke(),_=null==n?void 0:n.toString(),b=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;return o?(0,z.jsx)("a",{href:t,className:"u-color-inherit u-disable-underline",children:e}):e};return(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,prefix:b((0,z.jsx)(Kl.U,{size:Kl.U.Size.Large,src:v,alt:"profile",styling:Kl.U.Styling.Circle})),title:(()=>{const e=c&&!!s;return(0,z.jsxs)("span",{className:"u-flexbox u-align-items-center",children:[y(),e&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:f})]})]})})(),subtitle:u?null:h(a),body:u?b((0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,children:h(a)}),p):_?(0,z.jsx)("div",{className:"u-flexbox",children:b((0,z.jsx)(Mle,{iconName:"comment",iconColor:ht.Z.Color.GreyscaleLevel3,text:_}))}):null})},Xle=e=>{let{title:t,isOpen:i,closeOnOverlay:n,onSubmit:s,onClose:r}=e;const a=U("forum.delete_confirmation_modal.actions");return(0,z.jsx)(cp.Z,{show:i,title:t,closeOnOverlay:n,actions:[{text:a("delete"),style:cp.Z.ActionStyling.Filled,theme:"warning",callback:s,testId:"submit-delete"},{text:a("cancel"),style:cp.Z.ActionStyling.Flat,theme:"muted",callback:r}]})},Yle=e=>{let{children:t,isVisible:i=!0,isFullPage:n=!0,state:s}=e;function r(){const e=y()("loader-overlay",{"loader-overlay--full-page":n});return(0,z.jsx)("div",{className:e,"data-testid":"loader-overlay",children:(0,z.jsx)("div",{className:"loader-overlay__loader",children:(0,z.jsx)(Dp.Z,{styling:Dp.Z.Styling.Lifted,size:n?Dp.Z.Size.XLarge:Dp.Z.Size.Large,state:s===Ne.Success?Dp.Z.State.Success:s===Ne.Failure?Dp.Z.State.Fail:void 0})})})}return(0,m.useEffect)((()=>{if(i&&n)return document.body.style.overflow="hidden",()=>{document.body.style.overflow="unset"}}),[i,n]),n?(0,z.jsxs)(z.Fragment,{children:[i&&(0,uJ.createPortal)(r(),document.body),t]}):(0,z.jsxs)("div",{className:"u-position-relative",children:[i&&r(),t]})},Kle=e=>{let{post:t,showReplyButton:i,onPostDelete:n,onReply:s,onLike:r,isLiked:a}=e;const o=U("forum"),l=XY(),[c,d]=(0,m.useState)(!1),[u,p]=(0,m.useState)(Ne.Idle),[g,h]=(0,m.useState)(!1),f=(e=>{let{post:t,isLiked:i}=e;const n=t.isLiked,s=t.likeCount;return n===i?s:i?s+1:s-1})({post:t,isLiked:a});function y(){d(!1)}return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Yle,{isVisible:g,state:u}),(0,z.jsxs)("footer",{className:"u-flexbox u-justify-content-between",children:[(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsx)(ic.I,{theme:"amplified",onClick:function(){a?async function(){r(),"errors"in await(0,Fe.mKt)(t.id)&&r()}():async function(){r(),"errors"in await(0,Fe.OjW)(t.id)&&r()}()},text:0===f?o("post.buttons.like.zero"):o("post.buttons.like",{count:f},{count:f}),size:ic.I.Size.Medium,deprecatedIcon:(0,z.jsx)(ht.Z,{name:a?"heart-filled":"heart",color:a?ht.Z.Color.Warning:ht.Z.Color.GreyscaleLevel1}),iconPosition:ic.I.IconPosition.Left,styling:ic.I.Styling.Flat}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),i&&(0,z.jsx)(ic.I,{size:ic.I.Size.Medium,styling:ic.I.Styling.Flat,theme:"amplified",text:o("post.buttons.reply"),onClick:s,testId:"reply-button"})]}),(0,z.jsxs)("div",{className:"u-flexbox",children:[!t.isPostAuthor&&function(){const e=(0,ys.Iq)(Me.iDM,{ref_id:t.id,ref_type:_P.ForumPost,ref_url:l});return(0,z.jsx)("div",{children:(0,z.jsx)(ic.I,{size:ic.I.Size.Medium,deprecatedIcon:(0,z.jsx)(ht.Z,{name:"flag",color:"parent"}),styling:ic.I.Styling.Flat,theme:"muted",url:e,testId:"report-button"})})}(),t.canEdit&&function(){const e=(0,Me.qfj)(t.id);return(0,z.jsx)(ic.I,{size:ic.I.Size.Medium,styling:ic.I.Styling.Flat,theme:"muted",deprecatedIcon:(0,z.jsx)(ht.Z,{name:"pencil",color:"parent"}),url:e,testId:"edit-button"})}(),t.canDelete&&(0,z.jsx)(ic.I,{size:ic.I.Size.Medium,deprecatedIcon:(0,z.jsx)(ht.Z,{name:"trash-bin",color:"parent"}),styling:ic.I.Styling.Flat,theme:"muted",onClick:function(){d(!0)},testId:"delete-button"})]})]}),(0,z.jsx)("span",{"data-testid":"delete-modal",children:(0,z.jsx)(Xle,{title:o("delete_confirmation_modal.title.post"),isOpen:c,closeOnOverlay:!0,onSubmit:async function(){if(y(),h(!0),"errors"in await(0,Fe.TAb)(t.id))return p(Ne.Failure),void setTimeout((()=>{h(!1)}),300);p(Ne.Success),n(t.id)},onClose:y})})]})},Jle=e=>{var t,i,n;let{showPhotosWhenSignedOut:s,onReply:r,onDelete:a,showReplyButton:o,isPostRemoved:l,isLiked:c,post:d,onLike:u}=e;const[g,h]=(0,m.useState)(null),f=U(),y=(0,p.v9)(_e),v=f("forum.post.item.anonymous_author"),{loginTitle:_}=Ble({anonymousTranslation:v,userName:null==d||null===(t=d.user)||void 0===t?void 0:t.login,isPostAuthor:null==d?void 0:d.isPostAuthor,isTopicAuthor:null==d?void 0:d.isAuthor,isAnonymous:null==d?void 0:d.isAnonymous,isUserDeleted:null==d?void 0:d.isUserDeleted}),b=null==d||null===(i=d.photos)||void 0===i?void 0:i.map((e=>{let{url:t}=e;return t})),j=null==d||null===(n=d.photos)||void 0===n?void 0:n.slice(0,6),S=s||y,Z=e=>()=>{h(e)};return(0,z.jsxs)(z.Fragment,{children:[null!==g&&!(null==b||!b.length)&&(0,z.jsx)($9,{onClose:function(){h(null)},imageSources:b,initialImageIndex:g}),l?(0,z.jsx)(Lt.Z,{inverse:!0,text:(0,z.jsx)(xt.Z,{text:f("forum.post.reply_item.post_removed_title")})}):(0,z.jsx)(Lt.Z,{testId:"post-reply-item",inverse:!0,styling:Lt.Z.Styling.Tight,children:(0,z.jsx)(PZ.Z,{inverseExperimental:!0,styling:PZ.Z.Styling.Narrow,title:function(){var e,t;if(!d)return null;const i=(null===(e=d.user)||void 0===e?void 0:e.isIdentity)&&!d.isAnonymous,n=d.isAnonymous&&!(null==d||null===(t=d.user)||void 0===t||!t.login);return(0,z.jsxs)("span",{className:"u-flexbox u-align-items-center",children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:_}),n&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:v})]}),i&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)(Ule,{})]})]})}(),content:d?null!==(I=d.user)&&void 0!==I&&I.isHated?(0,z.jsx)(xt.Z,{text:f("forum.post.reply_item.blocked_hint_title")}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("span",{className:"u-text-wrap",children:(0,z.jsx)(xt.Z,{format:!0,children:(0,z.jsx)(XP,{text:d.body.trim()})})}),S?null!=j&&j.length?(0,z.jsx)("div",{className:"post-reply-item__image-container","data-testid":"reply-image-container",children:j.map((function(e,t){if(!d||!j)return null;const i=d.photos.length-j.length+1,n=5===t&&i>0;return(0,z.jsx)("div",{className:"post-reply-item__image-container-item",onClick:Z(t),children:(0,z.jsx)(Kl.U,{ratio:Kl.U.Ratio.Square,styling:Kl.U.Styling.Rounded,scaling:Kl.U.Scaling.Cover,src:e.url,label:n?"+".concat(i):void 0})},e.id)}))}):null:null!=j&&j.length?(0,z.jsxs)("div",{children:[(0,z.jsx)(x.Z,{}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:f("forum.post.item.image_login_block.title")})]}):null,(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(Kle,{post:d,showReplyButton:o,onPostDelete:a,onReply:r,onLike:u,isLiked:c})]}):null,headerId:"post_reply_item_accordion_header",bodyId:"post_reply_item_accordion_body"})})]});var I},Qle=e=>{var t;let{post:i,showReplyButton:n,showPhotosWhenSignedOut:s,onReply:r=v.noop,onDelete:a,onLike:o,isLiked:l,isReplyLiked:c,isSearchResultsVariant:d}=e;const{id:u,createdAtTs:g,isAuthor:h,isPostAuthor:f,body:y,user:_,photos:b,postReply:j,isReplyDeleted:S,wasAnonymous:Z,isUserDeleted:I,topicTitle:C,forumPostPath:k}=i,w=XY(),P=U("forum.post.item"),[T,F]=(0,m.useState)(null),N=(0,p.v9)(_e),L=b.map((e=>{let{url:t}=e;return t})),E=s||N,O=!!j||S;function R(e){return()=>F(e)}const D=e=>()=>{e&&r(e)},A=e=>()=>{e&&o(e)};return(0,z.jsx)("div",{id:"post-".concat(u),"data-testid":"post-".concat(u),children:(0,z.jsxs)(nc.Z,{children:[null!==T&&L.length>0&&!d&&(0,z.jsx)($9,{onClose:function(){F(null)},imageSources:L,initialImageIndex:T}),(0,z.jsx)(Wle,{postCount:null==_?void 0:_.forumMessageCount,userName:null==_?void 0:_.login,userImage:null==_||null===(t=_.photo)||void 0===t?void 0:t.url,userUrl:null==_?void 0:_.profileUrl,isUserVerified:(null==_?void 0:_.isIdentity)&&!Z,timePosted:g,isPostAuthor:f,isTopicAuthor:h,isAnonymous:Z,isUserDeleted:I,isSearchResultsVariant:d,topicTitle:C,postUrl:k}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),O&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Jle,{onReply:D(j),onDelete:a,onLike:A(null==j?void 0:j.id),showReplyButton:n,showPhotosWhenSignedOut:s,isPostRemoved:S,isLiked:c,post:j}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium})]}),null!=_&&_.isHated?(0,z.jsx)(xt.Z,{type:xt.Z.Type.Body,width:xt.Z.Width.Parent,text:P("blocked_hint_title")}):(0,z.jsxs)(z.Fragment,{children:[(M=(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("span",{className:"u-text-wrap",children:(0,z.jsx)(xt.Z,{format:!0,type:xt.Z.Type.UserInput,width:xt.Z.Width.Parent,children:(0,z.jsx)(XP,{text:y.trim()})})}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),E?b.length?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"post-item__image-container","data-testid":"post-item-image-container",children:b.map((function(e,t){return(0,z.jsx)("div",{className:"post-item__image-container-item",onClick:R(t),children:(0,z.jsx)(Kl.U,{ratio:Kl.U.Ratio.Square,styling:Kl.U.Styling.Rounded,scaling:Kl.U.Scaling.Cover,src:e.url})},e.id)}))}),(0,z.jsx)(x.Z,{size:x.Z.Size.Small})]}):null:function(){const e=(0,ys.Iq)(Me.iGV,{ref_url:w});return b.length?d?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{children:[(0,z.jsx)(x.Z,{}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:P("image_login_block.title")})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium})]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Lt.Z,{styling:Lt.Z.Styling.Tight,testId:"login-action",children:(0,z.jsx)(gt.Z,{prefix:(0,z.jsx)(ht.Z,{name:"info-circle",color:ht.Z.Color.Primary}),title:P("image_login_block.title"),suffix:(0,z.jsx)(ic.I,{text:P("image_login_block.actions.login"),styling:ic.I.Styling.Filled,size:ic.I.Size.Small,url:e})})}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium})]}):null}()]}),d?(0,z.jsx)("a",{href:k,className:"u-color-inherit u-disable-underline",children:M}):M),(0,z.jsx)(Kle,{post:i,onLike:A(i.id),isLiked:l,showReplyButton:n&&!d,onPostDelete:a,onReply:D(i)})]})]})});var M},$le="forum-post-anonymous-dropdown",ece=e=>{let{onChange:t}=e;const i=U(),[n,s]=(0,m.useState)(!1),[r,a]=(0,m.useState)(!0);(0,m.useEffect)((()=>{n&&(0,ls.H5)($le)}),[n]);const o=e=>i(e?"forum.topic_page.post_message_input.anonymous_select.anonymous_option_title":"forum.topic_page.post_message_input.anonymous_select.regular_option_title");return(0,z.jsxs)(zp,{onOutsideClick:()=>{s(!1)},children:[(0,z.jsx)(Jw.j,{text:o(r),textType:xt.Z.Type.Subtitle,suffix:(0,z.jsx)(ht.Z,{name:n?"chevron-up":"chevron-down",size:ht.Z.Size.Small}),activated:n,onClick:()=>{s((e=>!e))}}),n&&(0,z.jsx)("div",{"data-testid":"dropdown",id:$le,className:"anonymous-post-select",children:(0,z.jsx)(g.Z,{styling:g.Z.Styling.Elevated,children:(0,z.jsxs)("div",{className:"u-overflow-hidden",children:[(0,z.jsx)(gt.Z,{clickable:!0,title:o(!0),suffix:(0,z.jsx)(qx.J,{name:"anonymous",checked:r}),body:i("forum.topic_page.post_message_input.anonymous_select.anonymous_option_body"),onClick:()=>{r||(t(!0),a(!0),s(!1))}}),(0,z.jsx)(gt.Z,{clickable:!0,title:o(!1),suffix:(0,z.jsx)(qx.J,{name:"regular",checked:!r}),body:i("forum.topic_page.post_message_input.anonymous_select.regular_option_body"),onClick:()=>{r&&(t(!1),a(!1),s(!1))}})]})})})]})},tce=e=>{let{replyingToLogin:t,replyingToPostId:i,tempUuid:n,topicId:s,topicPath:r,isAnonymousAllowed:a,onCancel:o,onAction:l=v.noop,onSubmit:c=v.noop,forwardedRef:d,postsPerPage:u,totalPosts:h,totalPages:f}=e;const y=E(),_=(0,m.useRef)(null),b=U(),[j,S]=(0,m.useState)(""),[Z,I]=(0,m.useState)(""),[C,k]=(0,m.useState)(!0),[w,P]=(0,m.useState)(Ne.Idle),{mentions:T,handleMentionClick:F,inputElementRef:N,hideMentions:L}=zle(j,S),O=(0,m.useRef)(l);O.current=l;const R=(0,p.v9)(pA),D=(0,p.v9)(gA),A=15===R.length,M=!!t;(0,m.useEffect)((()=>{R.length>0&&O.current()}),[R]);const B=0===R.length&&!j.trim()||D===Ne.Pending||!!Z,q=y.phones?m.Fragment:g.Z;return(0,z.jsx)(Yle,{isVisible:w===Ne.Pending,isFullPage:!1,children:(0,z.jsx)(q,{children:(0,z.jsxs)("div",{id:"post-input",children:[M&&(0,z.jsxs)("div",{"data-testid":"replying-to-row",className:"u-flexbox u-justify-content-between u-align-items-center u-ui-padding-horizontal-large",children:[(0,z.jsx)(xt.Z,{text:b("forum.topic_page.post_message_input.replying_to",{login:t}),type:xt.Z.Type.Subtitle}),(0,z.jsx)(ic.I,{text:b("forum.topic_page.post_message_input.actions.cancel"),onClick:o,styling:ic.I.Styling.Flat,inline:!0})]}),(0,z.jsxs)("div",{className:"u-ui-padding-horizontal-large u-ui-padding-vertical-large",children:[(0,z.jsx)(bte,{photoEntryId:null,tempUuid:n,numberOfImagesPerItem:15,inputRef:_,displayType:xte.Minimal,type:YF.Forum,hideWhenEmpty:!0,enableRotation:!1,enablePhotoTips:!1}),R.length>0&&(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsxs)("div",{className:"u-position-relative u-border-radius-inherit",children:[(0,z.jsx)(zp,{onOutsideClick:L,children:(0,z.jsx)(Fle,{mentions:T,onMentionClick:F})}),(0,z.jsx)(Tm.N,{ref:e=>{e&&(d&&"current"in d&&(d.current=e),N(e))},name:"post_reply",placeholder:b("forum.topic_page.post_message_input.placeholder"),maxRows:8,isMultiline:!0,value:j,onChange:e=>{S(e.currentTarget.value),I(""),l()},onValueClear:()=>{S(""),I(""),l()},testId:"post-reply"}),!!Z&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{}),(0,z.jsx)(zm.Z,{text:Z,theme:"warning"})]})]}),(0,z.jsx)(x.Z,{}),(0,z.jsxs)("div",{className:"u-flexbox u-justify-content-between u-align-items-center",children:[(0,z.jsx)(ic.I,{deprecatedIconName:"camera",styling:ic.I.Styling.Flat,onClick:()=>{var e;null===(e=_.current)||void 0===e||e.click()},disabled:A,inline:!0}),(0,z.jsxs)("div",{className:"u-flexbox",children:[a&&(0,z.jsx)("span",{className:"u-position-relative u-ui-margin-right-regular",children:(0,z.jsx)(ece,{onChange:e=>{k(e)}})}),(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,text:b("forum.topic_page.post_message_input.actions.submit"),size:ic.I.Size.Medium,onClick:async()=>{if(B)return;c(),P(Ne.Pending);const e=await(0,Fe.mat)({topicId:s,body:j.trim(),isAnonymous:a&&C,replyPostId:i,assignedPhotos:R});if("errors"in e&&e.code===pm.Q.ValidationError){P(Ne.Failure);const t=e.errors.find((e=>{let{field:t}=e;return"body"===t}));return void(t&&I(t.value))}if("errors"in e)return void P(Ne.Failure);const t=h===f*u?f+1:f,n=(0,ys.Iq)(r,{page:1===t?void 0:t,per_page:20===u?void 0:u,post_id:e.forum_post.id});(0,ls.ru)(n)},disabled:B,testId:"submit-button",inline:!0})]})]})]})]})})})},ice=(0,m.forwardRef)(((e,t)=>(0,z.jsx)(tce,{forwardedRef:t,...e}))),nce=e=>{let{canUserEdit:t,canUserDelete:i,editTopicUrl:n,onDeleteClick:s}=e;const r=[],a=U("forum"),o={styling:ic.I.Styling.Flat,deprecatedIcon:(0,z.jsx)(ht.Z,{name:"vertical-dots",color:ht.Z.Color.GreyscaleLevel3}),size:ic.I.Size.Medium,testId:"vertical-dots-button"},l={id:"dots-edit-topic",text:a("topic_actions_menu.actions.edit"),url:n},c={id:"dots-delete-topic",text:a("topic_actions_menu.actions.delete"),onClick:s};return t&&r.push(l),i&&r.push(c),(0,z.jsx)(Lse,{buttonProps:o,actions:r})},sce=e=>{let{topicId:t,title:i,postCount:n,isTopicSaved:s,forumPath:r,subforumPath:a,canEdit:o,canDelete:l}=e;const c=XY(),d=U(),u=U("forum.topic_page.heading"),[g,h]=(0,m.useState)(s),[f,y]=(0,m.useState)(!1),[v,_]=(0,m.useState)(!1),[b,j]=(0,m.useState)(Ne.Idle),S=(0,p.v9)(_e),Z=()=>h((e=>!e));async function I(){Z(),"errors"in await(0,Fe.EZ0)({type:"forum_topic",entityId:t})&&(y(!0),Z())}function C(){_(!0)}return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Yle,{isVisible:b!==Ne.Idle,state:b}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:i}),(0,z.jsx)(Mle,{iconName:"comment",iconColor:ht.Z.Color.GreyscaleLevel3,text:u("posts",{count:n},{count:n})}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)("div",{className:"u-flexbox u-justify-content-flex-start",children:(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center u-position-relative",children:[function(){const e=g&&S,t=e?(0,z.jsx)(ht.Z,{name:"bookmark-filled",color:ht.Z.Color.Primary,size:ht.Z.Size.Small}):(0,z.jsx)(ht.Z,{name:"bookmark",color:"parent",size:ht.Z.Size.Small}),i=e?"actions.saved":"actions.save_topic",n=(0,ys.Iq)(Me.iGV,{ref_url:c});return(0,z.jsx)(ic.I,{testId:"save-topic-button",text:u(i),size:ic.I.Size.Medium,deprecatedIcon:t,onClick:S?I:void 0,url:S?void 0:n,styling:e?void 0:ic.I.Styling.Filled})}(),function(){if(!o&&!l)return null;const e=(0,ys.Iq)(Me._eM,{id:t});return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)("div",{"data-testid":"vertical-dots-menu",children:(0,z.jsx)(nce,{canUserEdit:o,canUserDelete:l,editTopicUrl:e,onDeleteClick:C})})]})}()]})}),(0,z.jsx)(Zle,{show:f,onClose:function(){y(!1)}}),(0,z.jsx)(Xle,{title:d("forum.delete_confirmation_modal.title.topic"),closeOnOverlay:!0,isOpen:v,onSubmit:async function(){if(_(!1),j(Ne.Pending),"errors"in await(0,Fe.Rg8)(t))return j(Ne.Failure),void setTimeout((()=>{j(Ne.Idle)}),300);j(Ne.Success);const e=a||r;(0,ls.ru)(e)},onClose:function(){_(!1)}})]})},rce=()=>Number(xc().searchParams.page)||1,ace=/(\d+).*/,oce=e=>{let{forumId:t,subforumId:i,title:n,description:s,forumRulesUrl:r}=e;const a=U(),o=a("forum.rules.title");return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:n,type:xt.Z.Type.Heading,width:xt.Z.Width.Parent}),(0,z.jsxs)(xt.Z,{format:!0,children:[(0,z.jsx)(XP,{text:s}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)("a",{href:r,"data-testid":"forum-rules-link",children:o})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(ic.I,{text:a("forum.forum_inner_page.heading.actions.new_topic"),size:ic.I.Size.Medium,inline:!0,styling:ic.I.Styling.Filled,url:(0,Me.Btp)(t,i)})]})},lce=e=>{let{topic:t,onTopicDelete:i=v.noop}=e;const{id:n,title:s,path:r,lastPostUser:a,lastPostDateTs:o,lastPostIsAnonymous:l,lastPostPath:c,lastPostUserIsDeleted:d,firstPostBody:u,firstPostPhotos:p,postCount:g,isLocked:h,isFavourite:f,isUserDeleted:y,isUserAnonymous:_,isAnonymous:b,user:j,canEdit:S,canDelete:Z}=t,I=XY(),C=U("forum"),k=(0,m.useRef)(null),w=(0,m.useRef)(null),[P,T]=(0,m.useState)(!1),[F,N]=(0,m.useState)(Ne.Idle),L=Ip(),E=C("topic_item.anonymous"),{loginTitle:O}=Ble({anonymousTranslation:E,userName:null==j?void 0:j.login,isPostAuthor:!1,isTopicAuthor:!1,isAnonymous:_,isUserDeleted:y});function R(){T(!1)}function D(){setTimeout((()=>{L()&&N(Ne.Idle)}),300)}const A=null==p?void 0:p.slice(0,5);return(0,z.jsxs)("div",{className:"topic-item","data-testid":"topic-item",children:[(0,z.jsx)(Yle,{isVisible:F!==Ne.Idle,state:F}),(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Wide,type:gt.Z.Type.Navigating,onClick:function(e){const t=k.current,i=w.current;e.target instanceof Node&&t&&i&&(t.contains(e.target)||i.contains(e.target))||(0,ls.ru)(r)},children:[(0,z.jsxs)("a",{ref:k,className:"u-disable-underline u-color-inherit",href:r,children:[h?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:C("topic_item.locked"),theme:"warning"}),(0,z.jsx)(x.Z,{size:x.Z.Size.Small,orientation:x.Z.Orientation.Vertical})]}):null,function(){const e=b&&!(null==j||!j.login),t=!(null==j||!j.isIdentity);return(0,z.jsxs)("span",{className:"u-flexbox u-align-items-center",children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:O,theme:"inherit"}),t&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)(Ule,{})]}),e&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:E,theme:"inherit"})]})]})}(),(0,z.jsx)(x.Z,{}),(0,z.jsx)("div",{className:"topic-item__title",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:s.trim(),width:xt.Z.Width.Parent})}),(0,z.jsx)("div",{className:"topic-item__first-post",children:(0,z.jsx)(xt.Z,{width:xt.Z.Width.Parent,text:null==u?void 0:u.trim()})}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),!(null==A||!A.length)&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"topic-item__photo-grid",children:A.map((function(e,t){if(!p)return null;const i=p.length-5,n=4===t&&i>0;return(0,z.jsx)("div",{className:"topic-item__photo-grid-item",children:(0,z.jsx)(Kl.U,{color:"#CAF1EF",ratio:Kl.U.Ratio.Square,styling:Kl.U.Styling.Rounded,scaling:Kl.U.Scaling.Cover,src:e.url,label:n?"+".concat(i):void 0})},e.id)}))}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium})]})]}),c&&o&&(0,z.jsx)(Vle,{ref:w,postCount:g,url:c,date:o,isAnonymous:l,userLogin:null==a?void 0:a.login,isUserVerified:null==a?void 0:a.isIdentity,isUserDeleted:d,isFavourite:f}),(S||Z)&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),S&&function(){const e=(0,ys.Iq)(Me._eM,{id:n,ref_url:I});return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(ic.I,{text:C("topic_item.actions.edit"),deprecatedIcon:(0,z.jsx)(ht.Z,{name:"pencil",size:ht.Z.Size.XSmall,color:"parent"}),theme:"primary",size:ic.I.Size.Small,inline:!0,url:e,testId:"edit-button"}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium,orientation:x.Z.Orientation.Vertical})]})}(),Z&&(0,z.jsx)(ic.I,{text:C("topic_item.actions.delete"),deprecatedIcon:(0,z.jsx)(ht.Z,{name:"trash-bin",size:ht.Z.Size.XSmall,color:"parent"}),theme:"warning",size:ic.I.Size.Small,inline:!0,onClick:function(e){e.stopPropagation(),T(!0)},testId:"delete-button"})]})]}),(0,z.jsx)("span",{"data-testid":"delete-modal",children:(0,z.jsx)(Xle,{title:C("delete_confirmation_modal.title.topic"),isOpen:P,closeOnOverlay:!0,onSubmit:async function(){if(R(),N(Ne.Pending),"errors"in await(0,Fe.Rg8)(t.id))return N(Ne.Failure),void D();N(Ne.Success),D(),i(n)},onClose:R})})]})},cce=e=>{let{subforums:t,currentSubforum:i,forumPath:n}=e;const s=U(),[r,a]=(0,m.useState)(!1),o=s("forum.subforum_select.default_option");return(0,z.jsxs)(zp,{onOutsideClick:()=>{a(!1)},children:[(0,z.jsx)(Jw.j,{text:(null==i?void 0:i.title)||o,textType:xt.Z.Type.Subtitle,suffix:(0,z.jsx)(ht.Z,{name:r?"chevron-up":"chevron-down",size:ht.Z.Size.Small}),activated:r,onClick:()=>{a((e=>!e))}}),r&&(0,z.jsx)("div",{"data-testid":"dropdown",className:"subforum-dropdown-select",children:(0,z.jsx)(g.Z,{styling:g.Z.Styling.Elevated,children:(0,z.jsxs)("div",{className:"u-overflow-hidden",children:[(0,z.jsx)(gt.Z,{clickable:!0,title:o,suffix:(0,z.jsx)(qx.J,{name:o,checked:!i}),url:n}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(yt.Z,{text:s("forum.subforum_select.subforums"),type:yt.Z.Type.Leading}),(0,z.jsx)(L,{separator:(0,z.jsx)(h.Z,{}),children:t.map((e=>(e=>(0,z.jsx)(gt.Z,{clickable:!0,title:e.title,suffix:(0,z.jsx)(qx.J,{name:e.title,checked:e.id===(null==i?void 0:i.id)}),url:e.path},e.id))(e)))})]})})})]})},dce=e=>{let{getTopics:t,noTopicsTitle:i,noTopicsSubtitle:n}=e;const{searchParams:s,relativeUrl:r}=xc(),a=E(),o=Ql(),[l,c]=(0,m.useState)([]),[d,p]=(0,m.useState)(),[f,y]=(0,m.useState)([]),[v,_]=(0,m.useState)(Ne.Idle),b=l.filter((e=>{let{id:t}=e;return!f.includes(t)})),j=s.per_page,S=Ae.includes(Number(j)),Z=S?Number(j):Ae[0],I=(0,m.useRef)(t);(0,m.useEffect)((()=>{I.current=t}));const C=(0,m.useCallback)((async()=>{_(Ne.Pending);const e=await I.current(Z);if("errors"in e)return void _(Ne.Failure);const t=vm(e.pagination);c(e.forum_topics.map((e=>pt(e)))),_(Ne.Success),p(t)}),[Z]);(0,m.useEffect)((()=>{C()}),[C]);const k=e=>{y((t=>[...t,e]))};if(v===Ne.Pending)return(0,z.jsx)("div",{"data-testid":"loader",className:"u-flexbox u-justify-content-center u-align-items-center u-fill-viewport",children:(0,z.jsx)(Dp.Z,{size:Dp.Z.Size.XLarge})});if(v===Ne.Failure)return(0,z.jsx)(Ig,{onRetryClick:C});if(!d)return null;if(0===l.length){const e=o?"".concat(Be.Fv,"/assets/forum/speech-bubble-empty-state-dark.svg"):void 0;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(tc.Z,{image:(0,z.jsx)(Kl.U,{src:e}),animation:o?void 0:(0,z.jsx)(u.Z,{animationUrl:"".concat(Be.Fv,"/assets/animations/chat-empty-state.json")}),title:i,body:n})]})}const w=d.totalEntries>Ae[0],P=a.phones?(0,z.jsx)(h.Z,{}):(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge});return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(L,{separator:P,children:b.map((e=>(0,z.jsx)("div",{className:a.phones?"u-overflow-hidden":void 0,children:(0,z.jsx)(g.Z,{children:(0,z.jsx)(lce,{topic:e,onTopicDelete:k})})},e.id)))}),w&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(()=>{const e=S?Ae.findIndex((e=>e===Number(j))):0;return(0,z.jsx)(g.Z,{children:(0,z.jsx)(o5.Z,{isLastPageAlwaysShown:!0,pageCount:null==d?void 0:d.totalPages,currentPage:null==d?void 0:d.currentPage,urlBuilder:(e,t)=>(0,ys.Iq)(r,{page:t?1:e,per_page:t||Z}),activePerPageOptionIndex:e,perPageOptions:Ae})})})()]})]})},uce=e=>{let{title:t,body:i,isOpen:n,isLoading:s,closeOnOverlay:r,onSubmit:a,onClose:o}=e;const l=U();return(0,z.jsxs)(cp.Z,{show:n,closeOnOverlay:r,children:[(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(xt.Z,{text:t,type:xt.Z.Type.Heading,alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent})]}),(0,z.jsx)(xt.Z,{text:i,alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(ic.I,{text:l("delete_modal.delete"),type:ic.I.Type.Submit,styling:ic.I.Styling.Filled,theme:"warning",isLoading:s,disabled:s,onClick:a,testId:"delete-button"}),(0,z.jsx)(ic.I,{text:l("delete_modal.cancel"),styling:ic.I.Styling.Flat,theme:"muted",onClick:o})]})]})},mce=()=>{const[e,t]=(0,m.useState)(!1),[i,n]=(0,m.useState)(null),[s,r]=(0,m.useState)(!1),[a,o]=(0,m.useState)(null),[l,c]=(0,m.useState)(!1),[d,u]=(0,m.useState)(void 0),{card_add_result:p}=xc().searchParams,{track:g}=vi(),x=U("payments"),f=U("credit_card_add.threeds2.errors"),y=(0,m.useCallback)((e=>{u(e),c(!0),g({event:"buyer.view_checkout",extra:{screen:$t.CreditCardAdd,checkout_type:"settings"}})}),[g]);(0,m.useEffect)((()=>{(async()=>{const e=await Fe.Thf();"errors"in e||n(Cj(e.cards))})()}),[]),(0,m.useEffect)((()=>{p===uj.Fail&&y(f("redirect_return_error"))}),[p,y,f]);const v=()=>{c(!1)},_=e=>()=>{o(e),r(!0)};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{text:x("card.title")}),(0,z.jsx)(uce,{isLoading:e,isOpen:s,title:x("delete_card_modal.title"),body:x("delete_card_modal.message"),onClose:()=>{o(null),r(!1)},onSubmit:async()=>{if(!a)return;t(!0);const e=await Fe.Tbm({cardId:a}),s=null==i?void 0:i.filter((e=>e.id!==a)),l=e.code===pm.Q.Ok?s:i;t(!1),o(null),n(l||null),r(!1)}}),i?(0,z.jsx)(mC,{cards:i,clickableItemType:dC.NotClickable,renderSuffix:e=>(0,z.jsx)(ic.I,{text:x("card.delete"),onClick:_(e),theme:"warning",size:ic.I.Size.Small,testId:"payments-delete-credit-card"})}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Mp,{testId:"payment-options--loader",styling:Mp.Styling.Wide}),(0,z.jsx)(h.Z,{})]}),(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,chevron:!0,title:x("card.add_new_card"),onClick:()=>{y()},testId:"payments-add-new-card"}),(0,z.jsx)(kk,{errorMessage:d,show:l,onBack:v,onClose:v,onCreditCardAddSuccess:e=>{n([...i||[],e]),v()},onTrackableFieldChange:e=>{let{name:t,isValid:i}=e;g(on({screen:$t.CreditCardAdd,target:t,isValid:i}))},source:Zj({type:"settings"}),trackingTargetDetails:{type:"settings"}})]})},pce=e=>({title:e.title,body:e.body,icon:e.icon,iconUrl:e.icon_url,darkIconUrl:e.dark_icon_url}),gce=e=>({sections:e.sections.map(pce)}),hce=e=>({fieldTitle:e.title,fieldName:e.field_name,value:e.value,placeholder:e.placeholder}),xce=e=>({fieldTitle:e.title,value:{code:e.value.code,title:e.value.title},placeholder:e.placeholder}),fce=e=>({fieldTitle:e.title,fieldName:e.field_name,value:e.value,info:{title:e.info.title,body:e.info.body},placeholder:e.placeholder,provided:e.provided}),yce=e=>({fieldTitle:e.title,value:e.value?{code:e.value.code,title:e.value.title}:null,placeholder:e.placeholder}),vce=e=>({fieldTitle:e.title,fieldName:e.field_name,value:e.value,placeholder:e.placeholder,locked:e.locked}),_ce=e=>({fieldTitle:e.title,fieldName:e.field_name,value:e.value,locked:e.locked,address:e.address?(0,V.X)(e.address):null}),bce=e=>({fieldName:e.field_name,fieldTitle:e.title,info:e.info,placeholder:e.placeholder,value:e.value,locked:e.locked}),jce=e=>({applicable:e.applicable,country:e.country,selectedCountryCode:e.selected_country_code,businessType:e.entity_type,taxpayer:e.taxpayer?{firstName:e.taxpayer.first_name,lastName:e.taxpayer.last_name,taxIdentificationNumber:e.taxpayer.tin,country:e.taxpayer.country,businessCode:e.taxpayer.business_code,businessName:e.taxpayer.business_name}:null,showTaxRules:e.show_tax_rules}),Sce=e=>null!==e&&(e===Jne.LegalBusiness||e===Jne.Organization||e===Jne.SoleTrader),Zce=e=>null!==e&&(e===Jne.LegalBusiness||e===Jne.Organization);var Ice=i(33288);const Cce=()=>{const e=U("tax_rules"),{track:t}=vi();return(0,z.jsx)(gt.Z,{prefix:(0,z.jsx)(Wy.Z,{name:Ice.Z,color:Wy.Z.Color.GreyscaleLevel3}),title:e("placement.title"),body:e("placement.body"),suffix:(0,z.jsx)(ic.I,{text:e("placement.actions.check"),styling:ic.I.Styling.Outlined,size:ic.I.Size.Small,url:Me.Who,onClick:()=>{t((e=>{const{targetDetails:t,screen:i}=e;return{event:"user.click",extra:{target_details:t,screen:i}}})({targetDetails:qm.TaxpayersCheckTaxRules,screen:$t.TaxpayersStaticPlacement}))},testId:"tax-rules-check"})})},kce=()=>{const e=U("taxpayer.options"),{track:t}=vi(),i=(0,p.v9)(Wt("web_taxpayers_dac7_flow")),n=(0,p.v9)(Wt("web_taxpayers_tax_rules")),[s,r]=(0,m.useState)(Ne.Idle),[a,o]=(0,m.useState)(null);(0,m.useEffect)((()=>{i&&(async()=>{r(Ne.Pending);const e=await(0,Fe.VIQ)();if("errors"in e)return void r(Ne.Failure);const t=jce(e);r(Ne.Success),o(t)})()}),[r,i]),(0,m.useEffect)((()=>{t(Wi({screen:$t.TaxpayersStaticPlacement}))}),[t]);const l=()=>{var e,t;if(!a)return null;const i=Sce(null==a?void 0:a.businessType);if(a.selectedCountryCode&&i)return(0,ls.ru)("".concat(Me.rHE,"?country_code=").concat(a.selectedCountryCode,"&show_education=false"));const n=null===(e=a.taxpayer)||void 0===e?void 0:e.country.code,s=null===(t=a.taxpayer)||void 0===t?void 0:t.country.title;return n&&s?(0,ls.ru)("".concat(Me.rHE,"?country_code=").concat(n,"&country_title=").concat(s,"&show_education=false")):null},c=()=>{null!==a&&(0,ls.ru)("".concat(Me.rHE,"?country_code=").concat(a.country.code,"&country_title=").concat(a.country.title,"&show_education=true"))};return i&&null!=a&&a.applicable?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{text:e("title")}),(()=>{if(s===Ne.Pending)return(0,z.jsx)(Mp,{testId:"taxpayer-placement-loader"});if(!a)return null;if(null!==a.taxpayer){const s=null!==a.taxpayer.firstName&&null!==a.taxpayer.lastName,c=()=>{var e,t,i,n,r;return(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column",children:[s&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:"".concat((null===(e=a.taxpayer)||void 0===e?void 0:e.firstName)||""," ").concat((null===(t=a.taxpayer)||void 0===t?void 0:t.lastName)||"")}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:null===(i=a.taxpayer)||void 0===i?void 0:i.taxIdentificationNumber})]}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:null===(n=a.taxpayer)||void 0===n||null===(r=n.country)||void 0===r?void 0:r.title})]})};return Zce(null==a?void 0:a.businessType)?a?(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,chevron:!0,title:e("filled.title"),body:(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column",children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:null===(r=a.taxpayer)||void 0===r?void 0:r.businessName}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:null===(o=a.taxpayer)||void 0===o?void 0:o.businessCode})]}),onClick:l,testId:"taxpayer-update-information"}):null:null!==a.businessType&&a.businessType===Jne.SoleTrader?(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,chevron:!0,title:e("filled.title"),body:(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column",children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:"".concat((null==a||null===(t=a.taxpayer)||void 0===t?void 0:t.firstName)||""," ").concat((null==a||null===(i=a.taxpayer)||void 0===i?void 0:i.lastName)||"")}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:null==a||null===(n=a.taxpayer)||void 0===n?void 0:n.taxIdentificationNumber})]}),onClick:l,testId:"taxpayer-update-information"}):(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,chevron:!0,title:e("filled.title"),body:c(),onClick:l,testId:"taxpayer-update-information"})}var t,i,n,r,o;return(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,chevron:!0,title:e("actions.add"),onClick:c,testId:"taxpayer-add-information"})})(),n&&(null==a?void 0:a.showTaxRules)&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(Cce,{})]})]}):null},wce=()=>{const e=(0,p.I0)(),t=U("payments.withdrawal"),i=(0,p.v9)(sle),n=(0,p.v9)(nle),[s,r]=(0,m.useState)(!1),[a,o]=(0,m.useState)(!1),l={redirect_url:Me.hu_,ref_url:Me.AME,type:Tne.BankAccount},c="".concat(Me.nxq,"?").concat((0,ys.Kf)(l)),d=(0,m.useCallback)((()=>{e(GE.fetchBankAccountsRequest())}),[e]);function u(){(0,ls.ru)(c)}return(0,m.useEffect)((()=>{d()}),[d]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{text:t("title")}),n!==Ne.Pending||a?i?i?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{title:i.name,body:i.accountNumber,suffix:(0,z.jsx)(ic.I,{text:t("actions.delete"),theme:"warning",size:ic.I.Size.Small,onClick:function(){r(!0)},testId:"delete-button"})}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,chevron:!0,title:t("actions.change"),onClick:u}),(0,z.jsx)("span",{"data-testid":"delete-modal",children:(0,z.jsx)(uce,{isOpen:s,title:t("delete_modal.title"),body:t("delete_modal.message"),isLoading:a,onClose:function(){r(!1)},onSubmit:async function(){o(!0),i&&(await(0,Fe.ZwT)({bankAccountId:i.id,fingerprint:await $M()}),d())}})})]}):null:(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,chevron:!0,title:t("actions.add"),onClick:u,testId:"payments-add-bank-account"}):(0,z.jsx)(Mp,{styling:Mp.Styling.Wide,testId:"loader"})]})},Pce=e=>{let{isOpen:t,onClose:i}=e;const n=U("product_feedback_modal"),s=Ql();return(0,z.jsx)(cp.Z,{show:t,children:(0,z.jsx)("div",{className:"u-flexbox u-align-items-center u-justify-content-center u-ui-padding-top-x-large",children:(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column",children:[(0,z.jsx)(Kl.U,{src:s?"/assets/check-dark.svg":"/assets/check.svg",size:Kl.U.Size.X2Large}),(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(xt.Z,{text:n("body"),width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Left}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(ic.I,{text:n("actions.close"),styling:ic.I.Styling.Filled,onClick:i})]})]})})})};let zce;!function(e){e.Message="message",e.UserCategory="userCategory"}(zce||(zce={}));const Tce=()=>{const e=U("product_feedback_form"),{setValue:t,control:i,clearErrors:n,watch:s,formState:{errors:r}}=(0,th.Gc)(),a=s(zce.UserCategory,[]),o=[{id:0,title:e("user_category.selling")},{id:1,title:e("user_category.buying")}];function l(e){return!!a&&a.some((t=>{let{id:i}=t;return i===e}))}const c=(e,i)=>s=>{s.preventDefault(),((e,i)=>{i.setIsSaveEnabled(!0),l(e.id)?t(zce.UserCategory,a.filter((t=>{let{id:i}=t;return i!==e.id}))):t(zce.UserCategory,[...a,e]),n(zce.UserCategory)})(e,i)};function d(e){return(0,z.jsx)(kp,{children:o.map((t=>function(e,t,i){return(0,z.jsx)(gt.Z,{id:"".concat(i,"-").concat(e.id),title:e.title,onClick:c(e,t),suffix:(0,z.jsx)(BZ.F,{name:"".concat(e.id,"-checkbox"),checked:l(e.id),aria:{"aria-labelledby":"".concat(i,"-").concat(e.id)}})},"".concat(i,"-").concat(e.id))}(t,e,"category")))})}return(0,z.jsx)(th.Qr,{defaultValue:[],name:zce.UserCategory,control:i,rules:{required:!0,validate:function(){return a.length>0}},render:()=>(0,z.jsx)(gI,{name:zce.UserCategory,title:e("user_category.title"),placeholder:e("user_category.placeholder"),render:d,value:a?a.map((e=>e.title)).join(", "):"",validation:r.userCategory?(0,z.jsx)(zm.Z,{text:e("user_category.errors.validate"),theme:"warning"}):null,readOnly:!0})})},Fce=e=>{if(e)return{commentRequired:e.comment_required,commentVisible:e.comment_visible,legalPermissionVisible:e.legal_permission_visible,isInContextualMenu:e.is_in_contextual_menu}},Nce=e=>{let{options:t,children:i,title:n,subtitle:s,report_reason_id:r,id:a,code:o}=e;return{title:n,subtitle:s,id:a,reportReasonId:r,code:o,options:Fce(t),children:i?i.map(Nce):void 0}},Lce=(e,t)=>t?e.filter((e=>{var t;return null===(t=e.options)||void 0===t?void 0:t.isInContextualMenu})):e,Ece=(e,t,i)=>{if(!t)return{reportReason:void 0,children:Lce(e,i)};for(let n=0;n<e.length;n+=1){const{id:s,children:r}=e[n];if(s===t)return{reportReason:e[n],children:Lce(r||[],i)};if(r){const e=Ece(r,t,i);if(e)return e}}},Oce=e=>{let{title:t,subtitle:i,imageSrc:n}=e;return t?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:t,html:!0}),body:i,prefix:n?(0,z.jsx)(Kl.U,{src:n,scaling:Kl.U.Scaling.Cover,size:Kl.U.Size.Large,styling:Kl.U.Styling.Rounded,testId:"alert-details-image"}):null,styling:gt.Z.Styling.Wide}),(0,z.jsx)(h.Z,{})]}):null},Rce=e=>{let{backUrl:t,show:i,user:n}=e;const s=U("admin_alerts.report_success"),r=(0,p.v9)(X),a=n&&!n.isHated,o=Ql();return(0,z.jsx)(cp.Z,{show:i,testId:"report-success-modal",children:(0,z.jsxs)(nc.Z,{children:[(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center u-flex-direction-column",children:[(0,z.jsx)(ht.Z,{name:o?"check-circle-empty-state-dark":"check-circle-empty-state",color:ht.Z.Color.SuccessLight,size:ht.Z.Size.X2Large}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:s("title"),type:xt.Z.Type.Heading})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:s("body")}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),a?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,text:s("block"),theme:"warning",onClick:async()=>{r&&null!=n&&n.id?(await(0,Fe.rfe)({currentUserId:r,blockedUserId:null==n?void 0:n.id}),(0,ls.ru)(t)):(0,ls.ru)(t)}}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]}):null,(0,z.jsx)(ic.I,{theme:a?"muted":"primary",styling:a?void 0:ic.I.Styling.Filled,text:s("done"),url:t,testId:"done-button"})]})})},Dce=2e3,Ace=e=>{var t;let{reportReason:i,refId:n,refType:s,refUrl:r,reportedMessageId:a,reportedPhotoId:o,user:l,isNewUI:c}=e;const d=U("admin_alerts"),u=(0,p.v9)(X),g=E(),[h,f]=(0,m.useState)(""),[v,_]=(0,m.useState)(""),[b,j]=(0,m.useState)(Ne.Idle),S=(0,m.useRef)(null),Z=e=>{var t;const n=e.trim().length;if(!n&&null!=i&&null!==(t=i.options)&&void 0!==t&&t.commentRequired)return d("report_message.errors.required");if(n>Dce){const e={count:n-Dce};return d("report_message.errors.message_too_long",e,e)}return""},I=async()=>{j(Ne.Pending),u?"errors"in await(0,Fe.hV$)({adminAlert:{refType:s,refId:n,reportReasonId:i.id,message:h,...a||o?{options:{reportedMessageId:a,reportedPhotoId:o}}:void 0},userId:u})?j(Ne.Failure):j(Ne.Success):j(Ne.Failure)},C=()=>{var e;return(0,z.jsx)("div",{className:"u-flex-grow",children:(null==i||null===(e=i.options)||void 0===e?void 0:e.legalPermissionVisible)&&(0,z.jsx)(ah.Z,{styling:ah.Z.Styling.Narrow,text:d("report_reason_legal_footer",{"terms-link":e=>(0,z.jsx)("a",{href:"/terms_and_conditions#private-messages",children:e})})})})};return b===Ne.Failure?(0,z.jsx)(sw,{}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(kp,{children:[(0,z.jsx)(gt.Z,{title:null==i?void 0:i.title,styling:gt.Z.Styling.Wide}),(null==i||null===(t=i.options)||void 0===t?void 0:t.commentVisible)&&(0,z.jsx)(Gw,{name:"message",required:i.options.commentRequired,title:d("report_message.title"),placeholder:d("report_message.placeholder"),styling:"wide",onChange:e=>{const{value:t}=e.target;_(Z(t)),f(t)},validation:(()=>{if(v)return(0,z.jsx)(zm.Z,{text:v,theme:"warning"});const e={count:Dce-h.length};return d("report_message.hint",e,e)})(),ref:S})]}),(()=>{const e=b===Ne.Pending,t=!!Z(h)||e;return g.phones?(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column",children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)("div",{className:"u-ui-padding-regular",children:(0,z.jsx)(ic.I,{text:d("actions.submit"),styling:ic.I.Styling.Filled,disabled:t,isLoading:e,onClick:I,testId:"report-submit-button"})}),C()]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:c?x.Z.Size.Medium:x.Z.Size.XLarge}),(0,z.jsxs)("div",{className:y()("u-flexbox",{"u-ui-padding-large":c}),children:[C(),(0,z.jsx)(ic.I,{text:d("actions.submit"),styling:ic.I.Styling.Filled,disabled:t,isLoading:e,onClick:I,inline:!0,testId:"report-submit-button"})]})]})})(),(0,z.jsx)(Rce,{show:b===Ne.Success,backUrl:r,user:l})]})},Mce=e=>{let{reason:t,refType:i,refId:n,refUrl:s,reportedMessageId:r,reportedPhotoId:a}=e;const{pushHistoryState:o}=xc(),l=(()=>{const e=(0,v.omitBy)({reason_id:t.id,ref_id:n,ref_type:i,ref_url:s,reported_message_id:r,reported_photo_id:a},v.isNil);return"".concat(Me.iDM,"?").concat((0,ys.Kf)(e))})();return(0,z.jsx)(gt.Z,{title:t.title,body:t.subtitle,type:gt.Z.Type.Navigating,url:l,testId:"reason-link",onClick:e=>{e.preventDefault(),o(l)},chevron:!0})},Uce=e=>{let{refType:t,refId:i,refUrl:n,reasonsList:s,selectedReason:r,reportedMessageId:a,reportedPhotoId:o}=e;const l=U("admin_alerts");return s?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{body:r?r.title:l("select_reason")}),(0,z.jsx)(kp,{children:s.map((e=>(0,z.jsx)(Mce,{reason:e,refId:i,refType:t,reportedMessageId:a,reportedPhotoId:o,refUrl:n},e.id)))})]}):null},Bce=e=>{let{isNewUI:t}=e;const{urlQuery:i}=xc(),n=new URLSearchParams(i),s=XY(),r=n.get("ref_type"),a=(0,_i.IF)(r,_P)?r:void 0,o=Number(n.get("ref_id")),l=Number(n.get("reported_message_id"))||void 0,c=Number(n.get("reported_photo_id"))||void 0,{reportReason:d,children:u,uiState:g}=(e=>{let{refType:t,reasonId:i,isInContextualMenu:n}=e;const[s,r]=(0,m.useState)({reportReason:null,children:null}),[a,o]=(0,m.useState)(Ne.Pending),l=Number(i),c=(0,m.useCallback)((async()=>{if(!t)return;const e=await(0,Fe.HH2)(t);if("errors"in e)return void o(Ne.Failure);const i=e.report_reasons.map(Nce),s=Ece(i,l,n);s?(o(Ne.Success),r(s)):o(Ne.Failure)}),[t,l,n]);return(0,m.useEffect)((()=>{c()}),[c]),{...s,uiState:a}})({refType:a,reasonId:n.get("reason_id"),isInContextualMenu:!!l}),h=(e=>{let{refId:t,refType:i}=e;const[n,s]=(0,m.useState)(),r=(0,p.v9)(X),a=(0,m.useCallback)((async()=>{if(t)switch(i){case _P.Item:await(async()=>{const e=await(0,Fe.rVG)({id:t});if("errors"in e)return;const i=io(e.item);s({title:i.title,imageSrc:i.thumbnailUrl||void 0})})();break;case _P.Member:await(async()=>{var e;const i=await(0,Fe.GAF)({id:t});if("errors"in i)return;const n=dt(i.user);s({title:n.login,imageSrc:(null===(e=n.photo)||void 0===e?void 0:e.url)||Ke(),user:{isHated:n.isHated,id:n.id}})})();break;case _P.ForumPost:await(async()=>{const e=await(0,Fe.yNR)(t);if("errors"in e)return;const{body:i,user:n}=kle(e.forum_post);s({title:i,user:{isHated:null==n?void 0:n.isHated,id:null==n?void 0:n.id}})})();break;case _P.Conversation:await(async()=>{if(!r)return;const e=await(0,Fe.ccy)(t);if("errors"in e)return;const{oppositeUser:i}=AP(e.conversation);s({user:{isHated:null==i?void 0:i.isHated,id:Number(null==i?void 0:i.id)}})})()}}),[t,i,r]);return(0,m.useEffect)((()=>{a()}),[a]),n})({refId:o,refType:a});return g===Ne.Pending?(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center u-align-items-center","data-testid":"admin-alerts-loader",children:(0,z.jsx)(Dp.Z,{size:Dp.Z.Size.XLarge})}):g===Ne.Failure?(0,z.jsx)(sw,{}):(0,z.jsxs)(z.Fragment,{children:[h&&(0,z.jsx)(Oce,{title:h.title,subtitle:h.subtitle,imageSrc:h.imageSrc}),null!=u&&u.length?a&&u?(0,z.jsxs)(z.Fragment,{children:[a!==_P.Conversation&&(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(Uce,{reasonsList:u,refId:o,refType:a,selectedReason:d,refUrl:s,reportedMessageId:l,reportedPhotoId:c})]}):null:d&&a?(0,z.jsx)(Ace,{reportReason:d,refId:o,refType:a,reportedMessageId:l,reportedPhotoId:c,refUrl:s,user:null==h?void 0:h.user,isNewUI:t}):null]})},qce={ref_url:Me.AME,redirect_url:Me.coZ,type:Tne.BankAccount},Vce="".concat(Me.nxq,"?").concat((0,ys.Kf)(qce)),Hce=e=>e.reduce(((e,t)=>({organic:e.organic+t.organic,promoted:e.promoted+t.promoted}))),Gce=e=>{switch(e){case N4.Impressions:return qm.ImpressionsTab;case N4.ProfileVisits:return qm.ProfileVisitsTab;case N4.ItemVisits:return qm.ItemVisitsTab;default:return qm.ImpressionsTab}};var Wce=i(51440),Xce=i(45121),Yce=i(91390),Kce=i(5827);const Jce=e=>{let{x:t=0,y:i=0,payload:n={value:""},offset:s={horizontal:0,vertical:0}}=e;const r=E();return(0,z.jsx)("g",{transform:"translate(".concat(t,", ").concat(i,")"),children:(0,z.jsx)("foreignObject",{x:s.horizontal,y:s.vertical,width:r.phones?36:48,height:32,children:(0,z.jsx)(xt.Z,{text:n.value,width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,type:xt.Z.Type.Caption})})})},Qce={top:QJ.K.Medium,right:0,left:-QJ.K.X2Large,bottom:QJ.K.Medium},$ce=e=>{let{metrics:t}=e;const{formatDate:i}=(0,O.Z)(),n=E(),s=Ql(),r=sg(s);return(0,z.jsx)(iQ.h,{width:"100%",height:250,children:(0,z.jsxs)(Wce.v,{width:200,height:300,data:t.map(((e,n)=>{var s,r;return{date:i(new Date(e.date),{month:"short",day:"2-digit"}),organic:(null==t||null===(s=t[n])||void 0===s?void 0:s.organic)||0,promoted:(null==t||null===(r=t[n])||void 0===r?void 0:r.promoted)||0}})),margin:Qce,children:[(0,z.jsx)(Xce.q,{strokeDasharray:"4 4",vertical:!1}),(0,z.jsx)(eQ.K,{dataKey:"date",interval:0,axisLine:!1,tickLine:!1,tick:(0,z.jsx)(Jce,{offset:{horizontal:n.phones?-18:-24,vertical:0}})}),(0,z.jsx)(Yce.B,{axisLine:!1,tickLine:!1,width:70,tick:(0,z.jsx)(Jce,{offset:{horizontal:-30,vertical:-10}}),allowDecimals:!1}),(0,z.jsx)(Kce.$,{dataKey:"organic",stackId:"a",fill:"#ddd",barSize:n.phones?8:16}),(0,z.jsx)(Kce.$,{dataKey:"promoted",stackId:"a",fill:r,barSize:n.phones?8:16})]})})},ede=e=>{let{isOpen:t,title:i,content:n,onClose:s}=e;return(0,z.jsxs)(cp.Z,{show:t,children:[(0,z.jsx)(Pm.Z,{body:i,right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,deprecatedIconName:"x",onClick:s})}),(0,z.jsx)(h.Z,{}),n]})},tde=e=>{let{performance:t}=e;const i=U("closet_promotion.performance.insights"),{track:n}=vi(),s=E(),[r,a]=(0,m.useState)(N4.Impressions),[o,l]=(0,m.useState)(!1);function c(e){switch(e){case N4.Impressions:return t.impressionsPerDay;case N4.ProfileVisits:return t.profileVisitsPerDay;case N4.ItemVisits:return t.itemVisitsPerDay;default:return t.impressionsPerDay}}const d=e=>()=>{r!==e&&(a(e),n(Ri({target:Gce(e)})))};function u(e){const t=e===r,n=c(e),a=Hce(n);return(0,z.jsx)(gt.Z,{title:(0,z.jsx)(xt.Z,{type:s.phones?xt.Z.Type.Title:xt.Z.Type.Heading,theme:t?"amplified":void 0,text:a.promoted+a.organic}),body:(0,z.jsx)(xt.Z,{type:s.phones?xt.Z.Type.Caption:xt.Z.Type.Subtitle,theme:t?"amplified":void 0,text:i(e)}),highlighted:t,clickable:!0,onClick:d(e),testId:"".concat(e,"-tab")})}return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(g.Z,{children:(0,z.jsx)("div",{className:"u-overflow-hidden",children:(0,z.jsx)(gt.Z,{children:(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:i("title")}),suffix:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,deprecatedIconName:"question-circle",deprecatedIconColor:ht.Z.Color.GreyscaleLevel3,onClick:function(){l(!0),n(Ri({target:qm.InsightsHelp}))},testId:"insights-help"})}),(0,z.jsx)(g.Z,{children:(0,z.jsx)("div",{className:"u-flexbox u-overflow-hidden",children:(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{orientation:h.Z.Orientation.Vertical}),children:[u(N4.Impressions),u(N4.ProfileVisits),u(N4.ItemVisits)]})})}),function(){const e=c(r),t=Hce(e);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"closet-promo-stats__promoted-dot"}),(0,z.jsx)(x.Z,{size:x.Z.Size.Small,orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(xt.Z,{text:"".concat(t.promoted," ").concat(i("legend.promoted")),theme:"primary",type:xt.Z.Type.Subtitle}),!!t.organic&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Medium,orientation:x.Z.Orientation.Vertical}),(0,z.jsx)("div",{className:"closet-promo-stats__organic-dot"}),(0,z.jsx)(x.Z,{size:x.Z.Size.Small,orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(xt.Z,{text:"".concat(t.organic," ").concat(i("legend.organic")),theme:"muted",type:xt.Z.Type.Subtitle})]})]})}(),(0,z.jsx)($ce,{metrics:c(r)})]})})})}),(0,z.jsx)(ede,{isOpen:o,title:i("help.title"),content:(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[(0,z.jsx)(gt.Z,{title:i("help.impressions.title"),body:i("help.impressions.body")}),(0,z.jsx)(gt.Z,{title:i("help.profile_visits.title"),body:i("help.profile_visits.body")}),(0,z.jsx)(gt.Z,{title:i("help.item_visits.title"),body:i("help.item_visits.body")}),(0,z.jsx)(gt.Z,{title:i("help.organic.title"),body:i("help.organic.body")})]}),onClose:function(){l(!1)}})]})},ide=e=>{let{performance:t}=e;const i=U("closet_promotion.performance.actions"),{track:n}=vi(),s=E(),[r,a]=(0,m.useState)(!1);function o(e,t){const n="\n      ".concat(i("promoted",{count:e.promoted})," \n      ").concat(i("organic",{count:e.organic}));return(0,z.jsx)(gt.Z,{title:i(t),body:n,suffix:(0,z.jsx)(xt.Z,{type:s.phones?xt.Z.Type.Title:xt.Z.Type.Heading,text:e.promoted+e.organic})})}return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(g.Z,{children:(0,z.jsxs)("div",{className:"u-overflow-hidden",children:[(0,z.jsx)(gt.Z,{title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:i("title")}),suffix:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,deprecatedIconName:"question-circle",deprecatedIconColor:ht.Z.Color.GreyscaleLevel3,onClick:function(){a(!0),n(Ri({target:qm.ActionsHelp}))},testId:"actions-help"})}),(0,z.jsx)(h.Z,{}),o(t.favourites,"favourites"),o(t.conversationsStarted,"conversations"),o(t.followers,"followers")]})}),(0,z.jsx)(ede,{isOpen:r,title:i("help.title"),content:(0,z.jsx)(gt.Z,{body:i("help.body")}),onClose:function(){a(!1)}})]})},nde=e=>{let{performance:t}=e;const i=U("closet_promotion.performance"),n=E();function s(){return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{children:(0,z.jsx)(xt.Z,{text:"".concat(t.startDate.humanized," - ").concat(t.endDate.humanized)})}),(0,z.jsx)("div",{children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:t.endsInHours.humanized})})]})}return(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:i("title")}),body:n.phones&&s(),suffix:!n.phones&&s()})},sde=e=>{let{lastUpdatedTime:t}=e;const i=U("closet_promotion.performance"),{formatRelativeTime:n}=Rx();return(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:i("last_updated",{time:n(t)})})},rde=e=>{let{lastUpdatedTime:t,showFeedback:i}=e;const n=U("closet_promotion.performance.feedback"),s=E(),{fetch:r,isLoading:a,transformedData:o}=ih(Fe.pIS,Gh),[l,c]=(0,m.useState)(!1),[d,u]=(0,m.useState)(!1);function p(){c(!1)}function g(){return s.phones?null:(0,z.jsx)(sde,{lastUpdatedTime:t})}return(0,m.useEffect)((()=>{i&&r()}),[r,i]),i?d?(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,title:n("success.title"),body:n("success.body"),suffix:g()}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,body:n("body"),suffix:g()}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(ic.I,{size:ic.I.Size.Small,inline:!0,text:n("button"),onClick:function(){c(!0)},isLoading:a,testId:a?"open-feedback-modal-loading":"open-feedback-modal"}),(0,z.jsx)($w,{isOpen:l,ratings:o,onClose:p,onSubmit:async function(e){await(0,Fe.I8h)(e),e.finalized&&(p(),u(!0))}})]}):s.phones?null:(0,z.jsx)(gt.Z,{suffix:g()})};var ade=i(6909);const ode=e=>{let{isOpen:t,onClose:i}=e;const n=(0,p.v9)(Wt("react_ntd_form_rework")),s=If(),r=U("help_center.intellectual_property_infringement.report.success_modal");return(0,z.jsx)(cp.Z,{show:t,testId:"report-sent-modal",children:(0,z.jsx)(nc.Z,{children:(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column u-align-items-center",children:[(0,z.jsx)(Kl.U,{src:s("check.svg"),size:Kl.U.Size.X2Large}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:r("title"),theme:"amplified",type:xt.Z.Type.Heading}),n&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:r("body")})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(ic.I,{text:r(n?"actions.redirect":"actions.close"),onClick:n?v.noop:i,styling:n?ic.I.Styling.Flat:ic.I.Styling.Filled,url:n?(0,ys.Iq)(Me.nOY,{access_channel:Be.Si.ProductLink}):void 0,testId:"report-sent-modal-close-button"})]})})})},lde=()=>{const e=(0,p.I0)(),t=(0,p.v9)(ae),i=U("help_center.intellectual_property_infringement.captcha"),[n,s]=(0,m.useState)(Ne.Idle);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:i("title"),type:xt.Z.Type.Heading,alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:i("body"),alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),n===Ne.Pending?(0,z.jsx)(Mp,{size:Mp.Size.Large}):(0,z.jsx)(NK,{onComplete:async t=>{s(Ne.Pending);const i=await(0,Fe.T9Q)(t);"errors"in i?s(Ne.Failure):e(gO.setCaptchaUuid({uuid:i.token}))},siteKey:t?"6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI":"6LdNO70fAAAAAAOLkW-h-SnNCB1RWfpG-sqeidL4"})]})},cde=()=>{const{control:e,formState:{errors:t}}=(0,th.Gc)(),i=U("help_center.intellectual_property_infringement.report"),n=fh(t),s=e=>(0,z.jsx)("a",{href:Me.hOY,target:"_blank",rel:"noopener noreferrer",children:e});return(0,z.jsx)(th.Qr,{control:e,name:dO.IsLegalFooterConfirmed,rules:{required:!0},render:e=>{let{field:t}=e;return(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:i("legal_footer_confirmation",{"privacy-policy":s}),html:!0,as:"p"}),suffix:(0,z.jsx)(BZ.F,{name:"confirm-legal-footer",checked:!!t.value,onChange:t.onChange,testId:"confirm-legal-footer",ref:t.ref}),validation:hh(n(dO.IsLegalFooterConfirmed,{required:i("errors.confirm_legal_footer")}))})}})},dde=e=>{let{form:t,isExpandedMap:i,onToggleAccordion:n}=e;const s=U("help_center.intellectual_property_infringement"),r=e=>(0,z.jsx)("div",{className:"intellectual-property-infringement__accordion-prefix",children:(0,z.jsx)(oC.Z,{theme:"primary",content:e+1})}),a=e=>{let{isExpanded:t}=e;return(0,z.jsx)("div",{className:"intellectual-property-infringement__accordion-suffix",children:(0,z.jsx)(ht.Z,{name:t?"chevron-up":"chevron-down",display:ht.Z.Display.Block,color:ht.Z.Color.GreyscaleLevel4})})},o=e=>()=>{n({...i,[e]:!i[e]})};return(0,z.jsx)(L,{separator:(0,z.jsx)(h.Z,{}),children:t.map(((e,t)=>{let{id:n,component:l,translationKey:c}=e;return(0,z.jsx)(PZ.Z,{title:s("report.".concat(c,".title")),headerId:"accordion_".concat(c,"_title"),bodyId:"accordion_".concat(c,"_body"),content:(0,z.jsx)(l,{}),expandedPrefix:r(t),closedPrefix:r(t),closedSuffix:a({isExpanded:!1}),expandedSuffix:a({isExpanded:!0}),isExpanded:i[t],onToggle:o(t),styling:PZ.Z.Styling.TightExperimental,testId:"".concat(n||c,"-section")},c)}))})},ude=e=>!(null==e||!e.trim().length);var mde=i(94290);const pde="help_center.intellectual_property_infringement.report.url_text_area",gde=e=>{let{title:t,placeholder:i,errorTitle:n,maxUrlCount:s}=e;const r=U(pde),a=U("errors"),o=(0,p.v9)(QX),l=s*ade.tX,{watch:c,register:d,formState:{errors:u,dirtyFields:g},setError:h,trigger:x}=(0,th.Gc)();(0,m.useEffect)((()=>{o[dO.InfringingUrlsTextArea]&&h(dO.InfringingUrlsTextArea,{type:"wrongUrlDetected",message:r("errors.wrong_url_detected")},{shouldFocus:!0})}),[o,h,r]);const f=fh(u,pde),{infringingUrlsTextArea:y}=c();return(0,m.useEffect)((()=>{g[dO.InfringingUrlsTextArea]&&x(dO.InfringingUrlsTextArea)}),[g,y,x]),(0,z.jsx)(PQ.R,{...d(dO.InfringingUrlsTextArea,{validate:{required:ude,maxLinksCount:e=>(0,mde.e)(e).length<=s,oneOrMoreTooLong:e=>(0,mde.e)(e).every((e=>e.length<=ade.tX))},maxLength:{value:l,message:a("max_length_up_to",{field:n,length:l})}}),title:(0,mde.N)(t),placeholder:i,styling:PQ.R.Styling.Wide,validation:(()=>{const e=(0,mde.e)(y).length,t=s-e,i=e-s,n=f(dO.InfringingUrlsTextArea,{required:r("errors.at_least_one_url"),maxLinksCount:r("errors.max_urls_count",{count:i},{count:i}),oneOrMoreTooLong:r("errors.one_or_more_too_long",{max:ade.tX})});return n?hh(n):hh(r("hints.urls_left",{count:t},{count:t}),"muted")})(),required:!0,uncontrolled:!0})},hde=["image/jpeg","image/png","image/gif","application/pdf"],xde=9437184,fde=7,yde=e=>{let{title:t,body:i,acceptedFileTypes:n=hde,maximumFileSize:s=xde,maximumFileCount:r=fde}=e;const[a,o]=(0,m.useState)([]),l=(0,p.I0)(),c=(0,p.v9)(XX),d=(0,p.v9)(WX),u=(0,p.v9)(GX),g=U("help_center.intellectual_property_infringement.report.file_uploader"),x=(0,m.useRef)(null),{setValue:f,watch:y}=(0,th.Gc)(),{attachments:_}=y();(0,m.useEffect)((()=>{(0,v.isEqual)(_,d)||f(dO.Attachments,d,{shouldValidate:!0})}),[_,d,f]);const b=e=>{var t;if(null===(t=e.target.files)||void 0===t||!t.length)return;const i=Array.from(e.target.files),a=[],c=i.filter(((e,t)=>{if(!n.includes(e.type))return!1;if(e.size>s){const t=s/1024/1024;return a.push(g("errors.file_size",{name:e.name,size:t})),!1}return!(d.length+t>=r)}));o(a),c.length&&l(gO.uploadFilesRequest({files:c}))},j=()=>{var e;null===(e=x.current)||void 0===e||e.click()},S=e=>{let{fileName:t,id:i}=e;return(0,z.jsx)(Jw.j,{text:(0,z.jsx)(xt.Z,{text:t}),aria:{"aria-label":"".concat(t,", ").concat(g("a11y.remove_button"))},onClick:(n=i,()=>{l(gO.deleteSavedFile({id:n}))}),radius:Jw.j.Radius.Round,suffix:(0,z.jsx)(ht.Z,{name:"x"})},i);var n},Z=u.map((e=>g("errors.rejected",{name:e})));return(0,z.jsx)(th.Qr,{name:dO.Attachments,render:()=>(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{title:"".concat(t,"\n                    "," ","\n                    ").concat(g("title_max_count",{maxCount:r})),body:i,suffix:(0,z.jsx)(ic.I,{text:g("button"),theme:"primary",onClick:j,size:ic.I.Size.Medium,disabled:d.length>=r,testId:"select-file-button"}),styling:gt.Z.Styling.Wide,validation:[...a,...Z].map((e=>(0,z.jsx)(zm.Z,{text:e,theme:"warning"},e)))}),(!!d.length||c===Ne.Pending)&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,children:(0,z.jsxs)("div",{className:"intellectual-property-infringement__file-attachments",children:[d.map(S),c===Ne.Pending&&(0,z.jsx)(Dp.Z,{size:Dp.Z.Size.Large})]})})]}),(0,z.jsx)("input",{name:"file-input",ref:x,onChange:b,type:"file",accept:n.join(","),value:"","data-testid":"file-input",hidden:!0,multiple:!0})]})})},vde="help_center.intellectual_property_infringement.report",_de=e=>{let{title:t,body:i,buttonTestId:n}=e;const[s,r]=(0,m.useState)(!1),a=U("help_center.intellectual_property_infringement.field_info_modal"),o=e=>{e.stopPropagation(),r((e=>!e))};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{role:"button",tabIndex:-1,onClick:o,className:"u-inline-flex u-align-items-center u-margin-left-small","aria-label":a("a11y.icon_button"),children:(0,z.jsx)(ht.Z,{name:"info-circle",size:ht.Z.Size.XSmall,testId:n})}),(0,z.jsxs)(cp.Z,{show:s,testId:"field-info-modal",children:[(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center",children:(0,z.jsx)(Kl.U,{src:"".concat(Be.Fv,"/assets/i-circle").concat(Bg()?"-dark":"",".svg"),size:Kl.U.Size.Large,alt:""})}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:t,width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:i,type:xt.Z.Type.Body,width:xt.Z.Width.Parent,html:!0})]}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,text:a("actions.close"),onClick:o,testId:"field-info-modal-close-button"})})]})]})},bde=e=>{let{title:t,titleInfo:i,isSelected:n,onSelect:s,radioName:r,children:a}=e;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{title:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("span",{role:"radio",tabIndex:0,"aria-checked":n,children:t}),i?(0,z.jsx)(_de,{title:i.title,body:i.body}):null]}),suffix:(0,z.jsx)(qx.J,{aria:{"aria-hidden":!0},tabIndex:-1,name:r,checked:n}),onClick:s,styling:gt.Z.Styling.Wide,role:"presentation",clickable:!0}),n&&a]})},jde=[ade.aA.Item,ade.aA.User,ade.aA.Message,ade.aA.MessageFeedback],Sde=()=>{const e=E(),{setValue:t,watch:i,control:n}=(0,th.Gc)(),{brand:s}=i(),r=U("".concat("help_center.intellectual_property_infringement.report.step3",".brand")),[a,o]=(0,m.useState)(""),l=EZ(s),{fetch:c,transformedData:d}=ih(Fe.vp3,Hh),u=ql((e=>{o(e)}),350),p=e=>{let{target:t}=e;u(t.value)},g=(i,n)=>()=>{n.setIsSaveEnabled(!0),t(dO.Brand,i,{shouldValidate:!0,shouldDirty:!0}),e.phones||n.closeDropdown()};(0,m.useEffect)((()=>{c({keyword:a})}),[c,a]);const h=()=>{t(dO.Brand,l,{shouldValidate:!0})},x=e=>(0,z.jsxs)(kp,{children:[s&&(0,z.jsx)(gt.Z,{title:(0,z.jsx)(xt.Z,{text:r("clear_selection"),theme:"muted"}),onClick:g(null,e)}),null==d?void 0:d.map((t=>((e,t)=>{const i=e.id===(null==s?void 0:s.id);return(0,z.jsx)(gt.Z,{title:e.title,onClick:g(e,t),suffix:(0,z.jsx)(qx.J,{name:"radio-".concat(e.id),checked:i})},e.id)})(t,e)))]});return(0,z.jsx)(th.Qr,{control:n,name:dO.Brand,render:e=>{var t;let{field:i}=e;return(0,z.jsx)(gI,{name:i.name,title:r("title"),placeholder:r("placeholder"),render:x,onCancel:h,onChange:p,value:null===(t=i.value)||void 0===t?void 0:t.title})}})},Zde="help_center.intellectual_property_infringement.report",Ide="help_center.intellectual_property_infringement.report.step2.property_details",Cde=[dO.IntellectualPropertyOwner,dO.IntellectualPropertyName,dO.RegistrationNumber,dO.ProofOfRights,dO.RightsConsistOf],kde=e=>{let{intellectualPropertyCategory:t}=e;const i=U(Ide),n=U("errors"),{formState:{errors:s,isSubmitted:r},register:a,trigger:o,setFocus:l}=(0,th.Gc)(),c=fh(s,Ide);(0,m.useEffect)((()=>{l(t===ade.g$.Other?dO.RightsConsistOf:dO.IntellectualPropertyOwner)}),[t,l]),(0,m.useEffect)((()=>{r&&o(Cde)}),[t,r,o]);const d=e=>{let{field:t,translationPrefix:s,isRequired:r}=e;const o=i("".concat(s,".title"));return{title:r?(0,mde.N)(o):o,key:t,name:t,placeholder:i("".concat(s,".placeholder")),styling:fb.M.Styling.Wide,validation:hh(c(t)),uncontrolled:!0,...a(t,{maxLength:{value:ade.tX,message:n("max_length_up_to",{field:i("".concat(Ic(t),".title")),length:ade.tX})},validate:r?{required:ude}:{}})}};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{type:yt.Z.Type.Stacked,styling:yt.Z.Styling.Wide,text:i("subtitle")}),(0,z.jsx)(L,{separator:(0,z.jsx)(h.Z,{}),children:t===ade.g$.Other?[(0,z.jsx)(PQ.R,{...d({field:dO.RightsConsistOf,translationPrefix:"".concat(Ic(dO.RightsConsistOf),".input"),isRequired:!0}),styling:PQ.R.Styling.Wide}),(0,z.jsx)(fb.M,{...d({field:dO.ProofOfRights,translationPrefix:"".concat(Ic(dO.ProofOfRights),".other"),isRequired:!0})})]:[(0,z.jsx)(fb.M,{...d({field:dO.IntellectualPropertyOwner,translationPrefix:"".concat(Ic(dO.IntellectualPropertyOwner),".input"),isRequired:!0})}),(0,z.jsx)(fb.M,{...d({field:dO.IntellectualPropertyName,translationPrefix:"".concat(Ic(dO.IntellectualPropertyName),".").concat(t),isRequired:!0})}),(0,z.jsx)(fb.M,{...d({field:dO.RegistrationNumber,translationPrefix:"".concat(Ic(dO.RegistrationNumber),".input")})}),(0,z.jsx)(fb.M,{...d({field:dO.ProofOfRights,translationPrefix:"".concat(Ic(dO.ProofOfRights),".predefined")})})]})]})},wde=e=>{let{index:t,onClose:i}=e;const n=U("help_center.intellectual_property_infringement.report.step2.category");return t?(0,z.jsx)(cp.Z,{show:!0,title:n("option_".concat(t,".title")),body:(0,z.jsx)(xt.Z,{text:n("option_".concat(t,".modal_body")),html:!0}),actions:[{text:n("close_modal"),style:cp.Z.ActionStyling.Filled,testId:"close-category-details-modal-button"}],defaultCallback:i,testId:"category-details-modal",closeOnOverlay:!0}):null},Pde=[ade.g$.Copyright,ade.g$.Trademark,ade.g$.Design,ade.g$.Patent,ade.g$.Other],zde=e=>{let{world_countries:t}=e;return{worldCountries:t}},Tde="help_center.intellectual_property_infringement.report.step1",Fde=()=>{const e=E(),{setValue:t,watch:i,formState:{errors:n},control:s}=(0,th.Gc)(),{worldCountry:r}=i(),a=U("".concat(Tde,".world_country")),o=fh(n,Tde),[l,c]=(0,m.useState)(""),d=EZ(r),{fetch:u,transformedData:p}=ih(Fe.gU6,zde),g=e=>{let{target:t}=e;c(t.value)},h=(i,n)=>()=>{n.setIsSaveEnabled(!0),t(dO.WorldCountry,i,{shouldValidate:!0,shouldDirty:!0}),e.phones||(n.closeDropdown(),c(""))};(0,m.useEffect)((()=>{u()}),[u]);const x=()=>{t(dO.WorldCountry,d,{shouldValidate:!0}),c("")},f=()=>{c("")},y=e=>(0,z.jsx)(kp,{children:(null!=p&&p.worldCountries?l?p.worldCountries.filter((e=>{let{title:t}=e;return t.toLowerCase().includes(l.toLowerCase())})):p.worldCountries:[]).map((t=>((e,t)=>{const i=e.code===(null==r?void 0:r.code);return(0,z.jsx)(gt.Z,{title:e.title,onClick:h(e,t),suffix:(0,z.jsx)(qx.J,{name:"radio-".concat(e.code),checked:i})},e.code)})(t,e)))});return(0,z.jsx)(th.Qr,{control:s,name:dO.WorldCountry,rules:{required:!0},render:e=>{let{field:t}=e;return(0,z.jsx)("span",{ref:t.ref,tabIndex:-1,children:(0,z.jsx)(gI,{name:t.name,title:(0,mde.N)(a("title")),placeholder:a("placeholder"),render:y,onCancel:x,onChange:g,onSave:f,value:null==r?void 0:r.title,validation:hh(o(t.name)),required:!0})})}})},Nde=()=>{const e=U("help_center.intellectual_property_infringement.report.step1"),t=U("errors"),{formState:{errors:i},register:n,setFocus:s,watch:r}=(0,th.Gc)(),a=fh(i,"help_center.intellectual_property_infringement.report.step1");(0,m.useEffect)((()=>{s(dO.FirstName)}),[s]);const{rightsToOrganization:o}=r(),l=i=>{let{field:s,validations:r}=i;const o=Ic(s),l=e("".concat(o,".title"));return(0,z.jsx)(fb.M,{...n(s,{maxLength:{value:ade.tX,message:t("max_length_up_to",{field:e("".concat(o,".title")),length:ade.tX})},validate:{...r,required:ude}}),required:!0,styling:fb.M.Styling.Wide,title:(0,mde.N)(l),placeholder:e("".concat(o,".placeholder")),validation:hh(a(s)),uncontrolled:!0},s)};return(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[l({field:dO.FirstName}),l({field:dO.LastName}),l({field:dO.Email,validations:{isEmailValid:DK}}),(null==o?void 0:o.value)!==ade.qk.Individual&&[l({field:dO.Company}),l({field:dO.Address}),l({field:dO.City}),(0,z.jsx)(Fde,{},dO.WorldCountry),l({field:dO.PostalCode})]]})},Lde=[ade.ZH.IntellectualProperty,ade.ZH.OtherIllegal,ade.ZH.Unsafe],Ede=[{id:"personal_information",component:Nde,translationKey:"step1"},{id:"intellectual_property",component:()=>{const{watch:e,formState:{errors:t},control:i}=(0,th.Gc)(),n=U("help_center.intellectual_property_infringement.report.step2"),s=(0,p.v9)(Wt("react_ntd_form_rework")),{intellectualPropertyCategory:r}=e(),[a,o]=(0,m.useState)(null),l=e=>t=>{t.stopPropagation(),o(e)},c=(e,t)=>s?(0,z.jsx)(_de,{title:n("category.option_".concat(e,".title")),body:n("category.option_".concat(e,".modal_body")),buttonTestId:"details-".concat(t)}):(0,z.jsx)("div",{className:"u-flexbox u-align-items-center u-margin-left-small",onClick:l(e),children:(0,z.jsx)(ht.Z,{name:"info-circle",size:ht.Z.Size.Small,color:ht.Z.Color.GreyscaleLevel3,testId:"details-".concat(t)})}),d=e=>{let{selectedValue:t,onChange:i}=e;return(e,s)=>{const r=t===e,a=s+1;return(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,suffix:(0,z.jsx)(qx.J,{name:"radio-".concat(e),checked:r}),onClick:()=>{i(e)},aria:{"aria-checked":r},role:"radio",clickable:!0,children:(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsx)(xt.Z,{text:n("category.option_".concat(a,".title")),type:xt.Z.Type.Title}),e!==ade.g$.Other&&c(a,e)]})},e)}};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{type:yt.Z.Type.Stacked,styling:yt.Z.Styling.Wide,text:(0,z.jsxs)(z.Fragment,{children:[n("category.subtitle"),t.intellectualPropertyCategory&&(0,z.jsx)(zm.Z,{text:n("category.error"),theme:"warning"})]})}),(0,z.jsx)(th.Qr,{name:dO.IntellectualPropertyCategory,control:i,rules:{required:!0},render:e=>{let{field:t}=e;return(0,z.jsx)("span",{ref:t.ref,tabIndex:-1,children:(0,z.jsx)(L,{separator:(0,z.jsx)(h.Z,{}),children:Pde.map(d({selectedValue:t.value,onChange:t.onChange}))})})}}),r&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(kde,{intellectualPropertyCategory:r}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(yde,{title:n("file_uploader.title"),body:n("file_uploader.body"),maximumFileCount:s?void 0:10})]}),(0,z.jsx)(wde,{index:a,onClose:()=>{o(null)}})]})},translationKey:"step2"},{id:"infringing_materials",component:()=>{const{formState:{errors:e},register:t}=(0,th.Gc)(),i=U(Zde),n=U("errors"),s=fh(e,"".concat(Zde,".step3")),r=(0,p.v9)(Wt("react_ntd_form_rework"));return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Sde,{}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(PQ.R,{...t(dO.Description,{validate:{required:ude},maxLength:r?ade.F_:void 0}),title:(0,mde.N)(i("step3.description.input.title")),placeholder:i("step3.description.input.placeholder"),styling:PQ.R.Styling.Wide,validation:hh(s(dO.Description,{maxLength:n("max_length_up_to",{field:i("step3.description.title"),length:ade.F_})})),uncontrolled:!0}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(gde,{title:i("step3.infringing_urls_text_area.input.title"),placeholder:r?i("alleged_illegal_content.input.placeholder",{count:ade.Wn}):i("step3.infringing_urls_text_area.input.placeholder"),errorTitle:i("step3.infringing_urls_text_area.title"),maxUrlCount:r?ade.Wn:ade.ty})]})},translationKey:"step3"}],Ode=[{translationKey:"step1",component:Nde},{translationKey:"illegal_content_type_accordion",component:()=>{const e=(0,p.v9)(Wt("react_ntd_message_type_selector")),t=(0,p.v9)(Wt("react_ntd_review_type_selector")),{formState:{errors:i},control:n}=(0,th.Gc)(),s=U("help_center.intellectual_property_infringement.report.illegal_content_type"),r=i=>{let{selectedValue:n,onChange:r}=i;return i=>{if(i===ade.aA.Message&&!e)return null;if(i===ade.aA.MessageFeedback&&!t)return null;const a=n===i;return(0,z.jsx)(bde,{title:s("options.".concat(i,".title")),isSelected:a,onSelect:()=>{r(i)},radioName:"illegal-content-type"},i)}};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{type:yt.Z.Type.Stacked,styling:yt.Z.Styling.Wide,text:(0,z.jsxs)(z.Fragment,{children:[s("subtitle"),i.illegalContentType&&(0,z.jsx)(zm.Z,{text:s("errors.required"),theme:"warning"})]})}),(0,z.jsx)(th.Qr,{name:dO.IllegalContentType,control:n,rules:{required:!0},render:e=>{let{field:{value:t,onChange:i,ref:n}}=e;return(0,z.jsx)("span",{ref:n,tabIndex:-1,children:(0,z.jsx)(L,{separator:(0,z.jsx)(h.Z,{}),children:jde.map(r({selectedValue:t,onChange:i}))})})}})]})}},{translationKey:"report_reason_accordion",component:()=>{const{formState:{errors:e},control:t}=(0,th.Gc)(),i=U("help_center.intellectual_property_infringement.report.report_reason_type"),n=e=>{let{selectedValue:t,onChange:n}=e;return e=>{const s=t===e;return(0,z.jsx)(bde,{title:i("options.".concat(e,".title")),titleInfo:{title:i("options.".concat(e,".learn_more_modal.title")),body:i("options.".concat(e,".learn_more_modal.body"))},isSelected:s,onSelect:()=>{n(e)},radioName:"report-reason"},e)}};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{type:yt.Z.Type.Stacked,styling:yt.Z.Styling.Wide,text:(0,z.jsxs)(z.Fragment,{children:[i("subtitle"),e.reportReasonType&&(0,z.jsx)(zm.Z,{testId:"report-reason-required-error",text:i("errors.required"),theme:"warning"})]})}),(0,z.jsx)(th.Qr,{name:dO.ReportReasonType,control:t,rules:{required:!0},render:e=>{let{field:{value:t,onChange:i,ref:s}}=e;return(0,z.jsx)("span",{ref:s,tabIndex:-1,children:(0,z.jsx)(L,{separator:(0,z.jsx)(h.Z,{}),children:Lde.map(n({selectedValue:t,onChange:i}))})})}})]})}},{translationKey:"additional_information_accordion",component:()=>{const{formState:{errors:e},register:t}=(0,th.Gc)(),i=U(vde),n=U("errors"),s=fh(e,vde);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(PQ.R,{...t(dO.Description,{validate:{required:ude},maxLength:ade.F_}),title:(0,mde.N)(i("illegal_content_description.input.title")),placeholder:i("illegal_content_description.input.placeholder"),styling:PQ.R.Styling.Wide,validation:hh(s(dO.Description,{required:n("blank",{field:i("illegal_content_description.title")}),maxLength:n("max_length_up_to",{field:i("illegal_content_description.title"),length:ade.F_})})),required:!0,uncontrolled:!0}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(gde,{title:i("alleged_illegal_content.input.title"),placeholder:i("alleged_illegal_content.input.placeholder",{count:ade.jb}),errorTitle:i("alleged_illegal_content.title"),maxUrlCount:ade.jb}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(yde,{title:i("additional_information_attachments.title"),body:i("additional_information_attachments.body")})]})}}],Rde=e=>{let{isOpen:t,onClose:i}=e;const n=If(),s=U("help_center.intellectual_property_infringement.report.unexpected_error_modal"),r=U("errors");return(0,z.jsx)(cp.Z,{show:t,testId:"unexpected-error-modal",children:(0,z.jsx)(nc.Z,{children:(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column u-align-items-center",children:[(0,z.jsx)(Kl.U,{src:n("exclamation-red.svg"),size:Kl.U.Size.Large}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:r("generic"),theme:"amplified",type:xt.Z.Type.Heading,alignment:xt.Z.Alignment.Center}),(0,z.jsx)(x.Z,{size:x.Z.Size.X3Large}),(0,z.jsx)(ic.I,{text:s("actions.close"),onClick:i,styling:ic.I.Styling.Flat,testId:"unexpected-error-modal-close-button"})]})})})},Dde=()=>{const e=U("help_center.intellectual_property_infringement"),t=U("errors"),i=(0,Nt.s0)(),n=(0,p.I0)(),s=(0,p.v9)(JX),r=(0,p.v9)(HX),a=(0,p.v9)(Wt("react_ntd_form_rework")),o=(0,p.v9)(Wt("brand_complaint_recaptcha_kill_switch")),l=(0,p.v9)(Wt("react_ntd_redirect_new_url"));Um((()=>{n(qX())}));const{handleSubmit:c,watch:d,getValues:u,reset:f,formState:{errors:y}}=(0,th.Gc)(),{rightsToOrganization:v}=d(),_=(0,m.useMemo)((()=>{switch(null==v?void 0:v.value){case ade.qk.Owner:case ade.qk.Agent:case ade.qk.Lawyer:case ade.qk.IpOwner:case ade.qk.IpAgent:case ade.qk.IpLawyer:return Ede;case ade.qk.Individual:case ade.qk.Organization:case ade.qk.TrustedFlagger:return Ode;default:return[]}}),[v]),[b,j]=(0,m.useState)((()=>{return e=_,Object.fromEntries(e.map(((e,t)=>[t,0===t])));var e}));(0,m.useEffect)((()=>{null!=v&&v.value||i(l?Me.M56:Me.fK8)}),[l,i,v]),(0,m.useEffect)((()=>{if(!a)return;if(s!==Ne.Success)return;const e=u();f({rightsToOrganization:e.rightsToOrganization})}),[s,u,a,f]);const S=e=>{n(gO.submitFormRequest({formData:e}))};return r||o?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(g.Z,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:e(a?"report.title":"title")})}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(dde,{form:_,isExpandedMap:b,onToggleAccordion:j})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(()=>{const i=s===Ne.Failure&&!a,n=!!Object.keys(y).length;return n||i?(0,z.jsxs)(z.Fragment,{children:[n&&hh(e("report.errors.invalid_form")),i&&hh(t("generic")),(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]}):null})(),(0,z.jsx)(cde,{}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,suffix:(0,z.jsx)(ic.I,{text:e("actions.submit"),styling:ic.I.Styling.Filled,size:ic.I.Size.Medium,onClick:()=>{var e;j((e=_,Object.fromEntries(e.map(((e,t)=>[t,!0]))))),c(S)()},isLoading:s===Ne.Pending,disabled:s===Ne.Pending,testId:"submit-report-button"})}),a&&(0,z.jsx)(Rde,{isOpen:s===Ne.Failure,onClose:()=>{n(gO.setFormUiState({formUiState:Ne.Idle}))}}),(0,z.jsx)(ode,{isOpen:s===Ne.Success,onClose:()=>{n(gO.setFormUiState({formUiState:Ne.Idle}));const e=u();f({rightsToOrganization:e.rightsToOrganization,firstName:e.firstName,lastName:e.lastName,email:e.email,company:e.company,worldCountry:e.worldCountry,city:e.city,address:e.address,postalCode:e.postalCode,intellectualPropertyCategory:null,brand:null,description:"",infringingUrlsTextArea:"",attachments:[],isLegalFooterConfirmed:!1,reportReasonType:null,illegalContentType:null}),(0,ls.k3)()}})]}):(0,z.jsx)(lde,{})},Ade=e=>{let{title:t,isSelected:i,onSelect:n}=e;return(0,z.jsx)(gt.Z,{title:t,suffix:(0,z.jsx)(qx.J,{name:"rights-to-organization",checked:i}),onClick:n,styling:gt.Z.Styling.Wide,aria:{"aria-checked":i},role:"radio",clickable:!0})},Mde=()=>{const e=(0,Nt.s0)(),{watch:t,setValue:i,register:n,formState:{errors:s},trigger:r}=(0,th.Gc)(),a=U("help_center.intellectual_property_infringement"),o=(0,p.v9)(Wt("react_ntd_redirect_new_url")),{rightsToOrganization:l}=t(),c=[{id:ade.qk.Agent,title:a("disclaimer.radio_1.option_1")},{id:ade.qk.Lawyer,title:a("disclaimer.radio_1.option_2")}];(0,m.useEffect)((()=>{n(dO.RightsToOrganization,{validate:{required:e=>Boolean(null==e?void 0:e.value)}})}),[n]);const d=e=>()=>{i(dO.RightsToOrganization,e,{shouldValidate:!!e.value})};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(g.Z,{children:[(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Wide,children:[(0,z.jsx)(xt.Z,{text:a("title"),type:xt.Z.Type.Heading}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:a("disclaimer.subtitle"),theme:"muted"})]}),(0,z.jsx)(Ade,{title:a("disclaimer.radio_1.title"),isSelected:(null==l?void 0:l.selection)===ade.Wd.Representor,onSelect:d({value:null,selection:ade.Wd.Representor})}),(null==l?void 0:l.selection)===ade.Wd.Representor&&(0,z.jsx)(YJ,{name:"representor",inputTitle:a("disclaimer.radio_1.body"),data:c,selectedValue:c.find((e=>{let{id:t}=e;return t===l.value})),onSave:e=>{i(dO.RightsToOrganization,{value:(null==e?void 0:e.id)||null,selection:ade.Wd.Representor},{shouldValidate:!0})},placeholder:a("disclaimer.radio_1.placeholder"),validation:s.rightsToOrganization&&(0,z.jsx)(zm.Z,{text:a("disclaimer.errors.relationship_to_rights_owner"),theme:"warning"})}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(Ade,{title:a("disclaimer.radio_2.title"),isSelected:(null==l?void 0:l.value)===ade.qk.Owner,onSelect:d({value:ade.qk.Owner,selection:ade.Wd.Owner})})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),!s.rightsToOrganization||null!=l&&l.selection?null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(zm.Z,{text:a("disclaimer.errors.rights_to_organization"),theme:"warning"}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,suffix:(0,z.jsx)(ic.I,{text:a("actions.start"),onClick:()=>{null!=l&&l.value?e(o?Me.kEW:Me.B5r):r(dO.RightsToOrganization)},styling:ic.I.Styling.Filled,size:ic.I.Size.Medium,testId:"report-issue-button"}),children:(0,z.jsx)(xt.Z,{text:a("disclaimer.legal_footer"),type:xt.Z.Type.Caption,html:!0})})]})},Ude=()=>{const e=U("help_center.intellectual_property_infringement.reporter_identification.rights_to_organization"),t=(0,p.v9)(Wt("react_ntd_trusted_flagger")),{watch:i,formState:{errors:n},setValue:s,register:r}=(0,th.Gc)();(0,m.useEffect)((()=>{r(dO.RightsToOrganization,{validate:{required:e=>Boolean(null==e?void 0:e.value)}})}),[r]);const{rightsToOrganization:a}=i(),o=e=>()=>{s(dO.RightsToOrganization,e,{shouldValidate:!!e.value})},l=e=>t=>{s(dO.RightsToOrganization,{value:(null==t?void 0:t.id)||null,selection:e},{shouldValidate:!0})},c=[{id:ade.qk.IpAgent,title:e("intellectual_property.options.agent")},{id:ade.qk.IpLawyer,title:e("intellectual_property.options.lawyer")},{id:ade.qk.IpOwner,title:e("intellectual_property.options.owner")}];return(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[(0,z.jsx)(bde,{title:e("intellectual_property.title"),isSelected:(null==a?void 0:a.selection)===ade.Wd.IntellectualProperty,onSelect:o({value:null,selection:ade.Wd.IntellectualProperty}),radioName:"rights-to-organization",children:(t=>{let{translateKey:i,options:s,selection:r}=t;return(0,z.jsx)(YJ,{name:r,inputTitle:e("".concat(i,".body")),data:s,selectedValue:s.find((e=>{let{id:t}=e;return t===(null==a?void 0:a.value)})),onSave:l(r),placeholder:e("".concat(i,".placeholder")),validation:n.rightsToOrganization&&(0,z.jsx)(zm.Z,{text:e("".concat(i,".errors.required")),theme:"warning"}),required:!0})})({translateKey:"intellectual_property",options:c,selection:ade.Wd.IntellectualProperty})}),t&&(0,z.jsx)(bde,{title:e("trusted_flagger.title"),titleInfo:{title:e("trusted_flagger.learn_more_modal.title"),body:e("trusted_flagger.learn_more_modal.body")},isSelected:(null==a?void 0:a.value)===ade.qk.TrustedFlagger,onSelect:o({value:ade.qk.TrustedFlagger,selection:ade.Wd.TrustedFlagger}),radioName:"rights-to-organization"}),(0,z.jsx)(bde,{title:e("organisation.title"),isSelected:(null==a?void 0:a.selection)===ade.Wd.Organization,onSelect:o({value:ade.qk.Organization,selection:ade.Wd.Organization}),radioName:"rights-to-organization"}),(0,z.jsx)(bde,{title:e("individual.title"),isSelected:(null==a?void 0:a.value)===ade.qk.Individual,onSelect:o({value:ade.qk.Individual,selection:ade.Wd.Individual}),radioName:"rights-to-organization"})]})},Bde=()=>{const e=(0,Nt.s0)(),{watch:t,trigger:i,formState:{errors:n}}=(0,th.Gc)(),s=U("help_center.intellectual_property_infringement"),r=(0,p.v9)(Wt("react_ntd_redirect_new_url")),{rightsToOrganization:a}=t();return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(g.Z,{children:[(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Wide,children:[(0,z.jsx)(xt.Z,{text:s("reporter_identification.title"),type:xt.Z.Type.Heading}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:s("reporter_identification.subtitle"),theme:"muted"})]}),(0,z.jsx)(Ude,{})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),!n.rightsToOrganization||null!=a&&a.selection?null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(zm.Z,{text:s("reporter_identification.errors.rights_to_organization"),theme:"warning"}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,suffix:(0,z.jsx)(ic.I,{text:s("actions.start"),onClick:()=>{null!=a&&a.value?e(r?Me.kEW:Me.B5r):i(dO.RightsToOrganization)},styling:ic.I.Styling.Filled,size:ic.I.Size.Medium,testId:"report-issue-button"})})]})},qde=[Oi.Failure,Oi.Success],Vde=e=>{let{orderStatus:t,totalAmount:i,currencyCode:n,message:s}=e;const r=U("direct_donation.status_modal"),a=(0,p.v9)(Nc);return(0,z.jsxs)(gt.Z,{children:[(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center",children:(()=>{switch(t){case Oi.Success:return(0,z.jsx)(ht.Z,{name:"check-circle-filled",color:ht.Z.Color.Success,size:ht.Z.Size.Large,testId:"check-circle-filled-icon"});case Oi.Failure:return(0,z.jsx)(ht.Z,{name:"cancel-circle-filled",color:ht.Z.Color.Warning,size:ht.Z.Size.Large,testId:"cancel-circle-filled-icon"});case Oi.Processing:default:return(0,z.jsx)(Dp.Z,{size:Dp.Z.Size.XLarge})}})()}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:r("".concat(t,".title"),{donatedAmount:i&&n?Ma(i,{locale:a,currency:n}):null}),alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent,type:xt.Z.Type.Heading}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(xt.Z,{text:s||r("".concat(t,".explanation")),alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),qde.includes(t)?(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,text:r("".concat(t,".action")),onClick:()=>{(0,ls.ru)(Me.dy1)}}):null]})},Hde=e=>{let{selectedCreditCardId:t,selectedPayInMethodId:i,onConfirm:n,onAddCreditCard:s,onBack:r}=e;const a=U("payment_method_selection"),o=(0,p.v9)(moe),l=(0,p.v9)(SC),c=(0,p.v9)(ZC),d=(0,p.v9)(wC),u=(0,p.v9)((e=>{var t;return PC(e,null==o||null===(t=o.order)||void 0===t?void 0:t.payableAmount.amount)})),m=e=>s(e);if(!l.length)return(0,z.jsx)(Mp,{testId:"pay-in-methods-loader",styling:Mp.Styling.Wide});const g={balance:c||null,isDisabled:u,reason:a("validations.insufficient_wallet_funds")};return(0,z.jsx)(fC,{wrapInScrollableArea:!0,creditCards:d,wallet:g,payInMethods:l,selectedCreditCardId:t,selectedPayInMethodId:i,onBack:()=>r(),onSubmit:(e,t)=>{e.code!==iv.CreditCard||t?n(e,t):m(e)},onAddNewCard:m})},Gde=e=>{let{visible:t,onCancel:i,onSuccess:n,isCardAddError:s,directDonationOrderId:r}=e;const a=(0,p.v9)(Ht),o=U("direct_donation.credit_card_modal"),l=U("credit_card_add.threeds2.errors"),c=s?l("redirect_return_error"):void 0;return t&&r?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,text:o("title")})}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(Lg,{children:(0,z.jsx)(gt.Z,{children:(0,z.jsx)(Ck,{allowSingleUse:!0,errorMessage:c,submitActionText:o("actions.continue"),onCancel:i,onSuccess:n,source:Zj({type:Ti.DirectDonation,page:a,orderId:r}),trackingTargetDetails:{service_order_id:r,type:Ti.DirectDonation}})})})]}):null},Wde=()=>{const e=(0,p.I0)(),[t,i]=(0,m.useState)({}),n=(0,p.v9)(moe),s=(0,p.v9)(CC),r=(0,p.v9)(kC),a=(0,p.v9)(poe),o=(0,p.v9)(goe),l=(0,p.v9)(Ht),c=(0,p.v9)(IC),d=(0,p.v9)(FC),u=(0,p.v9)(LC),g=(0,p.v9)((e=>{var t;return NC(e,null===(t=n.order)||void 0===t?void 0:t.payableAmount.amount)})),{order:h}=n,x=(0,m.useCallback)((t=>{e(oL.setCheckoutModal({modal:t}))}),[e]),f=(0,m.useCallback)(((t,i)=>{e(Mk.setSelectedPayInMethod({creditCardId:i,selectedPayInMethodId:t.id})),x(Ei.OrderConfirmation)}),[e,x]),y=(0,m.useCallback)((()=>{n.order&&(e(Mk.confirmOrderPaymentRequest({orderId:n.order.id,selectedCreditCardId:null==d?void 0:d.id,selectedPaymentMethodId:null==g?void 0:g.id,orderType:Ti.DirectDonation,entityType:Vk(l)})),x(Ei.OrderStatus))}),[n,g,d,l,x,e]);(0,m.useEffect)((()=>{e(Mk.getPayInMethodsRequest())}),[e]),Rk(Ti.DirectDonation,{onNoResult:()=>{x(Ei.OrderReview)},onSuccess:t=>{let{cardId:n,orderId:s}=t;e(oL.getOrderRequest({orderId:s})),i({cardId:n})},onFailure:t=>{let{orderId:n}=t;e(oL.getOrderRequest({orderId:n})),x(Ei.CreditCardForm),i({isError:!0})}}),(0,m.useEffect)((()=>{n.order&&null!=t&&t.cardId&&u&&(f(u,t.cardId),i({}))}),[e,t,u,n.order,f]),(0,m.useEffect)((()=>{o===Ne.Success&&x(g?Ei.OrderConfirmation:Ei.PayInMethodSelection)}),[o,g,x]),(0,m.useEffect)((()=>{const{payInRedirectUrl:e,embedded:t}=c;a!==Ei.None&&(t?x(Ei.PaymentAuth):e&&(0,ls.ru)(e))}),[a,c,x]);const v=()=>{x(Ei.OrderReview),e(oL.clearCurrentOrder()),e(Mk.cancelOrderPaymentAuth())},_=()=>{x(Ei.PayInMethodSelection)};return(0,z.jsxs)(z.Fragment,{children:[a!==Ei.OrderReview?null:(0,z.jsx)(joe,{}),a!==Ei.PayInMethodSelection?null:(0,z.jsx)(Hde,{selectedPayInMethodId:null==g?void 0:g.id,selectedCreditCardId:null==d?void 0:d.id,onAddCreditCard:()=>{x(Ei.CreditCardForm)},onBack:()=>{n.order&&(g?x(Ei.OrderConfirmation):v())},onConfirm:f}),a!==Ei.OrderConfirmation?null:(0,z.jsx)(foe,{onConfirmOrder:y,onBack:v,onPaymentMethodSelect:_}),(0,z.jsx)(Gde,{visible:a===Ei.CreditCardForm,directDonationOrderId:null===(b=n.order)||void 0===b?void 0:b.id,isCardAddError:null==t?void 0:t.isError,onCancel:_,onSuccess:t=>{u&&(e(Mk.addCreditCardSuccess({creditCard:t})),f(u,t.id))}}),a!==Ei.OrderStatus?null:(0,z.jsx)(Vde,{orderStatus:s,totalAmount:null==h?void 0:h.totalAmount.amount,currencyCode:null==h?void 0:h.totalAmount.currencyCode,message:r}),a!==Ei.PaymentAuth?null:(0,z.jsx)(Pk,{onAuthSubmitted:function(t){c.embedded&&(e(Mk.updateOrderPaymentDataRequest({state:t,paymentId:c.embedded.paymentId})),x(Ei.OrderStatus))},onError:function(t){e(Mk.setOrderPaymentErrorMessage({errorMessage:t})),x(Ei.OrderStatus)},onCancel:v})]});var b};let Xde;!function(e){e.Recipient="recipient"}(Xde||(Xde={}));const Yde=e=>{let{itemId:t,placeholder:i,title:n,preselectedUser:s}=e;const r=U("item_reservation"),a=Ip(),[o,l]=(0,m.useState)([]),[c,d]=(0,m.useState)(""),[u,p]=(0,m.useState)(s),{setValue:g,control:h,clearErrors:x,formState:{errors:f}}=(0,th.Gc)(),y=fh(f,"help_contact_form"),v=ql((e=>{a()&&d(e)}),350);function _(e){let{target:t}=e;v(t.value)}function b(e){e&&(x(Xde.Recipient),p(e),g(Xde.Recipient,e.id))}return(0,m.useEffect)((()=>{!async function(){const e=await(0,Fe.RfJ)({perPage:10,searchText:c,order:"contacted",itemId:t});"errors"in e||l(mt(e.users))}()}),[c,t]),(0,z.jsx)(th.Qr,{defaultValue:(null==s?void 0:s.id)||null,name:Xde.Recipient,control:h,rules:{required:!0},render:()=>(0,z.jsx)(xle,{preselectedUser:s,name:Xde.Recipient,title:n,placeholder:i,users:o,onChange:_,selectedUser:u,onSave:b,validation:hh(y(Xde.Recipient,{required:r("error")}))})})};var Kde;!function(e){e.Price="price",e.Recipient="recipient"}(Kde||(Kde={}));const Jde=[ka.Mens,ka.WomenRoot,ka.ChildrenNew];let Qde;!function(e){e.WOMEN_ROOT="dress",e.MENS="tshirt",e.CHILDREN_NEW="kid-face"}(Qde||(Qde={}));const $de="personalization-page-error-message",eue=e=>{let{isResponseError:t}=e;const i=U(),n=Ql(),s=n&&"hanger-empty-state-dark";return(0,z.jsx)("div",{id:$de,children:(0,z.jsx)(tc.Z,{deprecatedIcon:s?(0,z.jsx)(ht.Z,{name:s}):void 0,animation:n?void 0:(0,z.jsx)(u.Z,{animationUrl:"".concat(Be.Fv,"/assets/animations/closet-empty-state.json")}),title:!t&&i("error_page.technical_error.title"),body:i("error_page.technical_error.body"),action:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,onClick:ls.sl,children:i("error_page.actions.retry")})})})},tue=()=>{const{fetch:e,data:t={catalogs:[]},isLoading:i,error:n}=ih(Fe.jkM),{fetch:s,transformedData:r={sizeGroups:[]},isLoading:a,error:o}=ih(Fe.Ztj,Qh),{fetch:l,transformedData:c={sizeIds:[]},isLoading:d,error:u}=ih(Fe.y79,Jh),p=(e=>{let{catalogs:t,allSizeGroups:i,userSelectedSizeIds:n}=e;return t.filter((e=>{let{code:t}=e;return(0,v.includes)(Jde,t)})).map((e=>{let{title:t,code:s,size_group_ids:r}=e;return{title:t,code:s,icon:Qde[s],sizeGroupIds:r,userSelectedSizes:(a=i,o=r,l=n,a.filter((e=>{let{id:t}=e;return o.includes(t)})).reduce(((e,t)=>[...e,...t.sizes.filter((e=>l.includes(e.id)))]),[]))};var a,o,l}))})({catalogs:t.catalogs,allSizeGroups:r.sizeGroups,userSelectedSizeIds:c.sizeIds});return(0,m.useEffect)((()=>{e(),s(),l()}),[e,s,l]),o?{isLoading:!1,isError:!0,categories:[],sizeGroups:[],selectedSizeIds:c.sizeIds}:n||u?{isLoading:!1,isError:!0,categories:[],sizeGroups:r.sizeGroups,selectedSizeIds:[]}:{isLoading:i||a||d,isError:!1,categories:p,sizeGroups:r.sizeGroups,selectedSizeIds:c.sizeIds}},iue=e=>{let{children:t,title:i,menuItems:n}=e;const{relativeUrl:s}=xc();return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("nav",{className:"body-content__sidebar",children:[(0,z.jsx)(gt.Z,{theme:"transparent",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,children:i})}),n.map((e=>{let{url:t,title:i}=e;const n=(0,ys.G9)(s,t);return(0,z.jsx)(gt.Z,{url:t,theme:"transparent",type:gt.Z.Type.Navigating,children:(0,z.jsx)(xt.Z,{testId:n?"side-menu-link-active":"side-menu-link",theme:n?"amplified":"muted",bold:!0,children:i})},i)}))]}),(0,z.jsx)("div",{className:"body-content__content",children:t})]})},nue=e=>{let{children:t}=e;const i=U(),n=[{url:Me.pLL,title:i("personalization.sizes.title")},{url:Me.qpH,title:i("personalization.brands.title")}];return(0,z.jsx)(iue,{title:i("personalization.title"),menuItems:n,children:t})},sue=e=>{let{brand:t}=e;const[i,n]=(0,m.useState)(!1),s=U(),{track:r}=vi(),{isFavourite:a,toggleFavourite:o}=XQ({type:XQ.Type.Brand,entityId:t.id,isFavourite:t.isFavourite});return(0,z.jsx)("div",{className:"grid3 follow ".concat(a?"is-active":""),children:(0,z.jsxs)("div",{className:"follow__body",children:[(0,z.jsxs)("div",{className:"follow__header",children:[(0,z.jsx)("a",{className:"follow__name",href:t.path,children:t.title}),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"follow__details",children:s("personalization.brands.brand_box.items",{count:t.itemCount},{count:t.itemCount})}),(0,z.jsx)("div",{className:"follow__status",children:a&&" ".concat(s("personalization.brands.brand_box.status.followed"))})]})]}),(0,z.jsx)(zp,{onOutsideClick:function(){n(!1)},children:(0,z.jsxs)("menu",{className:"overflow-menu overflow-menu--top-right ".concat(i?"open":""),children:[(0,z.jsx)("button",{type:"button",className:"overflow-menu__toggle","aria-label":s("personalization.brands.brand_box.a11y.brand_menu"),"aria-expanded":i,onClick:function(){n((e=>!e))}}),(0,z.jsx)("div",{className:"overflow-menu__actions dropdown dropdown-right",children:(0,z.jsx)("ul",{className:"nav nav-stacked nav-dropdown",children:(0,z.jsx)("li",{className:"nav-item inverse is-single is-selectable",children:(0,z.jsx)("div",{className:"nav-link",tabIndex:i?0:-1,onClick:function(){r(Ui({brandId:t.id,isFollowEvent:!a})),o()},onKeyDown:Vg,role:"button",children:s("personalization.brands.brand_box.actions.".concat(a?"remove_from_favourites":"add_to_favourites"))})})})})]})})]})})},rue=()=>{const e=(0,p.v9)(X),{fetch:t,transformedData:i,isLoading:n,error:s}=ih(Fe.xu9,Hh);return(0,m.useEffect)((()=>{e&&t(e)}),[t,e]),{brandsFollowed:i,isLoading:n,error:s}};let aue;!function(e){e.Other="other"}(aue||(aue={}));const oue=e=>{const t=(0,v.orderBy)(e,["title"]),i=(0,v.groupBy)(t,(e=>{let{title:t}=e;return t.charAt(0).toLowerCase()})),n=Object.entries(i),s=[];return[...n.reduce(((e,t)=>{let[i,n]=t;return"string"==typeof(r=i)&&/^[A-Za-z]+$/.test(r)?(e.push({letter:i,brands:(0,v.orderBy)(n,["itemCount"],["desc"])}),e):(s.push(...n),e);var r}),[]),{letter:aue.Other,brands:s}]},lue=function(){let{letter:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{fetch:t,transformedData:i=[],isLoading:n,error:s}=ih(Fe.t$W,Hh);return(0,m.useEffect)((()=>{t({letter:e})}),[t,e]),{brands:i,brandsWithLetter:oue(i),isLoading:n,error:s}},cue=e=>{let{letter:t,brands:i,hasMoreButton:n=!0}=e;const s=U(),r=t===aue.Other,a=r?aue.Other:t.toUpperCase(),o=r?s("personalization.brands.brands_by_letter.other_title"):t.toUpperCase();return i.length?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(g.Z,{testId:"brands-by-letter-".concat(t,"-card"),children:[(0,z.jsx)(gt.Z,{title:o,suffix:n&&!r?(0,z.jsx)("a",{className:"u-disable-underline-without-hover",href:(0,Me.XJD)(a),"data-testid":"brands-by-letter-action-button",children:s("personalization.brands.brands_by_letter.actions.see_all")}):void 0}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)("div",{className:"row",children:i.map((e=>(0,z.jsx)(sue,{brand:e},e.id)))})})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]}):null},due=e=>{let{navigationFaqEntries:t,isLoading:i}=e;const n=U("help_center.navigation"),{relativeUrl:s,searchParams:r}=xc(),{access_channel:a,thread_id:o,search_text:l}=r,c=e=>e?"amplified":"muted",d=e=>{const t=(e=>{const t=e.match(AQ);if(t)return{path:t[1],faqEntryParentId:Number(t[2])||null,faqEntryId:Number(t[3])||null}})(s);if(!t)return!1;const{faqEntryId:i,faqEntryParentId:n}=t;return!(3!==e.id||i||n||l)||n===e.id||i===e.id},u=e=>{if(!e.title)return null;const t=d(e);return(0,z.jsxs)(gt.Z,{url:UQ(e,a,o),styling:gt.Z.Styling.Narrow,theme:"transparent",type:gt.Z.Type.Navigating,role:"listitem",aria:{"aria-label":e.title},children:[(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:e.title,type:xt.Z.Type.Subtitle,theme:c(t),bold:t})]},e.id)},p=e=>{var t;if(3===e.id)return null;const i=null===(t=e.childFaqEntries)||void 0===t?void 0:t.filter((e=>Boolean(e.childFaqEntries)));return null!=i&&i.length?(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Narrow,theme:"transparent",children:i.map(u)}):null},g=e=>{if(!e.title)return null;const t=d(e);return(0,z.jsxs)(m.Fragment,{children:[(0,z.jsx)(gt.Z,{url:UQ({id:e.id,title:e.title},a,o),theme:"transparent",type:gt.Z.Type.Navigating,role:"listitem",aria:{"aria-label":e.title},children:(0,z.jsx)(xt.Z,{text:e.title,theme:c(t),bold:t})}),t&&p(e)]},e.id)};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{theme:"transparent",children:(0,z.jsx)(xt.Z,{text:n("page_title"),type:xt.Z.Type.Heading})}),(0,z.jsx)("ul",{className:"body-content__navigation",children:i?(0,z.jsx)(Mp,{testId:"help-center-navigation-loading-spinner"}):t?(0,z.jsxs)(z.Fragment,{children:[g({id:t.rootFaqEntryId,title:t.rootFaqEntryTitle}),null===(h=t.childFaqEntries)||void 0===h?void 0:h.map(g)]}):null})]});var h},uue=e=>{var t;const i=e.order.items.find((t=>{let{id:i}=t;return i===e.item_id})),n=e.user_side===md.Seller?e.buyer:e.seller;return{id:e.id,price:Ha(e.offer.price,e.offer.currency),statusTitle:e.status_title,itemTitle:e.item_title,itemPhoto:null==i||null===(t=i.photos[0])||void 0===t?void 0:t.url,itemPath:null==i?void 0:i.url,bundleCount:e.items_count>1?e.items_count:null,oppositeUserUsername:null==n?void 0:n.login,oppositeUserPhoto:Je(null==n?void 0:n.photo),oppositeUserPath:null==n?void 0:n.path}},mue=e=>({transactions:e.recent_transactions.map(uue),totalCount:e.total_count}),pue=e=>({id:e.id,title:e.title,icon:e.icon}),gue=e=>e.faq_entries.map(pue),hue=e=>{let{id:t,title:i,children:n}=e;return{id:t,title:i||null,childFaqEntries:null==n?void 0:n.map((e=>({...hue(e),faqEntryParentId:t})))}},xue=e=>{let{faq_entries_parent_id:t,faq_entries_parent_title:i,faq_entries:n}=e;return{rootFaqEntryId:t,rootFaqEntryTitle:i,childFaqEntries:n.map(hue)}},fue=e=>{let{transaction:t,cellOptions:i}=e;const n=U("user"),s=(0,p.v9)(Nc),{price:r,statusTitle:a,itemTitle:o,itemPhoto:l,itemPath:c,bundleCount:d,oppositeUserUsername:u,oppositeUserPhoto:m,oppositeUserPath:g}=t,h=()=>u||n("deleted_user"),x=e=>t=>(0,z.jsx)("a",{href:e,"data-testid":"hc-home-transaction-item-link",children:t});return(0,z.jsx)(gt.Z,{prefix:(()=>{const e=c||void 0,t=(0,z.jsx)(P9,{condition:!(null!=i&&i.url||!e),wrapper:x(e),children:(0,z.jsx)(Kl.U,{src:l||"/assets/icons/image.svg",alt:o,label:null==d?void 0:d.toString(),size:Kl.U.Size.Large,styling:Kl.U.Styling.Rounded})}),n=g||void 0,s=(0,z.jsx)(P9,{condition:!(null!=i&&i.url||!n),wrapper:x(n),children:(0,z.jsx)(Kl.U,{src:m,alt:h(),size:Kl.U.Size.Regular,styling:Kl.U.Styling.Circle})});return(0,z.jsx)(w9.Z,{primary:t,secondary:s})})(),title:o,body:(()=>{let e;return r&&(e=Ua(r,s)),[h(),e,a].filter(Boolean).join("  ")})(),...i})},yue=e=>{let{transactions:t,hasMoreTransactions:i}=e;const n=U();return t.length?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Tight,children:[(0,z.jsx)(L,{separator:(0,z.jsx)(h.Z,{}),children:t.map((e=>{return(0,z.jsx)(fue,{transaction:e,cellOptions:{url:(t=e.id,(0,ys.Iq)("/help/for_transaction/".concat(t),{access_channel:Be.Si.HcTransaction})),type:gt.Z.Type.Navigating,chevron:!0,testId:"hc-transaction-link"}},e.id);var t}))}),i?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{title:n("help_center.transactions.all_recent_orders"),url:"/help/recent_transactions",type:gt.Z.Type.Navigating,testId:"all-recent-orders",chevron:!0})]}):null]}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]}):null},vue=e=>{let{faqEntries:t}=e;const{access_channel:i,thread_id:n}=xc().searchParams,s=U("help_center.recommended_faq_list");return(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Tight,children:[(0,z.jsx)(yt.Z,{type:yt.Z.Type.Stacked,text:s("title")}),(0,z.jsx)(x.Z,{size:x.Z.Size.Regular}),(0,z.jsx)(L,{separator:(0,z.jsx)(h.Z,{}),children:t.map((e=>{let{id:t,title:s}=e;return(0,z.jsx)(gt.Z,{prefix:(0,z.jsx)(ht.Z,{name:"flag",color:ht.Z.Color.GreyscaleLevel3}),title:s,type:gt.Z.Type.Navigating,url:UQ({id:t,title:s},i,n),chevron:!0,testId:"help-center-recommended-faq-".concat(t)},t)}))})]})},_ue=e=>{let{body:t}=e;return t?(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,prefix:(0,z.jsx)(ht.Z,{name:"info-circle",color:ht.Z.Color.GreyscaleLevel3}),body:(0,z.jsx)(xt.Z,{html:!0,text:t}),testId:"info-box"}):null},bue=e=>{let{questions:t}=e;const i=U("help_center.related_questions"),{thread_id:n}=xc().searchParams;return(0,z.jsxs)("div",{className:"faq__related",children:[(0,z.jsx)(xt.Z,{as:"h3",type:xt.Z.Type.Heading,text:i("title")}),(0,z.jsx)("ul",{className:"faq__related-list",children:t.map((e=>{let{id:t,path:i,title:s}=e;const r=(0,ys.Iq)(i,{thread_id:n});return(0,z.jsx)("li",{className:"faq__related-item",children:(0,z.jsx)("a",{href:r,children:s})},t)}))})]})},jue=e=>{let{faqEntryId:t,transactionId:i,proceedButton:n}=e;const{track:s}=vi(),r=U("help_center.contact_link"),{searchParams:a,relativeUrl:o}=xc(),{related_only:l,thread_id:c}=a,d=()=>{const e=(0,ys.Iq)(Me.Kss,{ch:HI.HelpCenter,faq_entry_id:t,transaction_id:i,related_only:!!l,thread_id:c,allow_direct:1});(()=>{const e={transaction_id:i,faq_entry_id:t};s(Ri({screen:$t.ContactSupport,target:qm.Submit,targetDetails:JSON.stringify(e),env:"js",path:o}))})(),(0,ls.ru)(e)};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(()=>{const e=n||r("title");return(0,z.jsx)(ic.I,{onClick:d,text:e,size:ic.I.Size.Medium,styling:ic.I.Styling.Filled,testId:"contact-button",inline:!0})})()]})},Sue=e=>{let{questions:t}=e;const{access_channel:i,search_text:n,thread_id:s}=xc().searchParams,{track:r}=vi(),a=i===Be.Si.HcSearch;return(0,m.useEffect)((()=>{var e;a&&"string"==typeof n&&r({event:"user.search_faq_entries",extra:{search_session_id:(e={searchSessionId:is(RQ)||null,searchQuery:n,faqEntryIds:t.map((e=>e.id))}).searchSessionId,search_query:e.searchQuery,faq_entry_ids:e.faqEntryIds}})}),[r,t,a,n]),(0,z.jsx)(L,{separator:(0,z.jsx)(h.Z,{}),children:t.map((e=>{let{id:t,title:i,path:n}=e;return(0,z.jsx)(gt.Z,{title:i,type:gt.Z.Type.Navigating,url:(0,ys.Iq)(n,{thread_id:s}),onClick:(o=t,()=>{if(!a)return;const e={search_session_id:is(RQ)||null,faq_entry_id:o};r(Ri({target:qm.HelpCenterSearchResult,targetDetails:JSON.stringify(e)}))}),chevron:!0,testId:"help-center-question-".concat(t)},t);var o}))})},Zue=e=>{let{complaintId:t,transactionId:i,isEnglishAllowedVisible:n,isSellerSide:s,conversationId:r}=e;const[a,o]=(0,m.useState)(!1),[l,c]=(0,m.useState)(!1),d=(0,m.useRef)(null),u=U("help_center.complaint_escalation"),{track:p}=vi(),g=s?md.Seller:md.Buyer;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(cp.Z,{show:a,title:u("modal.title.".concat(g)),body:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{html:!0,text:u("modal.body.".concat(g))}),n?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(BZ.F,{ref:d,name:"english_allowed",text:u("modal.english_confirmation"),testId:"hc-complaint-escalation-allow-english-checkbox"})]}):null,(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(ic.I,{text:u("modal.actions.agree"),type:ic.I.Type.Submit,styling:ic.I.Styling.Filled,isLoading:l,onClick:async()=>{var e;t&&(p(Ri({target:qm.ConfirmContactUs,screen:$t.ComplaintProof,targetDetails:JSON.stringify({transaction_id:i})})),c(!0),"errors"in await(0,Fe.SQ)(t,Number(!(null===(e=d.current)||void 0===e||!e.checked)))?c(!1):(0,ls.ru)(Rc(r)))}}),(0,z.jsx)(ic.I,{text:u("modal.actions.cancel"),onClick:()=>{o(!1)},styling:ic.I.Styling.Flat,disabled:l})]})}),(0,z.jsxs)(nc.Z,{styling:nc.Z.Styling.Narrow,children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:u("question.".concat(g))}),(0,z.jsx)("div",{onClick:()=>{o(!0)},children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,clickable:!0,text:u("contact_button")})})]})]})},Iue=[kg.InConversationSold,kg.InConversationTransactionCompleted,kg.InConversationSoldHAOV,kg.InConversationTransactionCompletedHAOV];let Cue;!function(e){e.ItemsList="ItemsList"}(Cue||(Cue={}));const kue=Q4("RecommendedItems"),wue=()=>{const e=(0,p.I0)(),t=U(),i=(0,p.v9)(X),n=(0,p.v9)(bl),s=(0,p.v9)(Xo),r=!(0,p.v9)(Ko),a=(0,m.useRef)(!0),o=(0,m.useMemo)((()=>vo(n)),[n]),l=(0,m.useCallback)((()=>{a.current&&i&&e(CN.getRecommendedItemsRequest({userId:i}))}),[e,i]);return(0,m.useEffect)((()=>{a.current=r||s!==Ne.Pending}),[r,s]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"u-ui-padding-vertical-x-large",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,width:xt.Z.Width.Parent,text:t("recommended_list.screen_title")})}),(0,z.jsx)(T8,{hasMore:r,onLoadMore:l,clickableElementTarget:qm.RecommendedItemListBanner,contentSource:Es.RecommendedItems,infoBannerScreen:$t.RecommendedItemsList,targetDetails:N8.RecommendedItems,items:o,preventLog:!0,handleErrorLogging:e=>{kue(e,Cue.ItemsList)}})]})},Pue=e=>{let{show:t,uiState:i,taxpayerEducation:n,onClose:s}=e;const r=U("taxpayer_education"),a=Bg();return(0,z.jsx)(cp.Z,{show:t,hasScrollableContent:!0,className:"u-flexbox u-flex-direction-column",children:i===Ne.Pending?(0,z.jsx)(Mp,{testId:"taxpayer-education-loader"}):i===Ne.Failure?(0,z.jsx)(sw,{}):(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[(0,z.jsx)("div",{className:"u-overflow-y-unset",children:(0,z.jsx)(Pm.Z,{body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:r("header.title"),bold:!0}),right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,onClick:s,deprecatedIconName:"x",inline:!0})})}),(0,z.jsxs)(Lg,{className:"u-flex-direction-row",children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,children:(0,z.jsx)(xt.Z,{html:!0,text:r("body.information")})}),n?n.sections.map((e=>{const t=a?e.darkIconUrl:e.iconUrl;return(0,z.jsx)(gt.Z,{title:e.title,body:(0,z.jsx)(xt.Z,{html:!0,text:e.body}),prefix:(0,z.jsx)(Kl.U,{src:t,size:Kl.U.Size.Medium,alt:"",testId:"taxpayer-education-section-icon"}),styling:gt.Z.Styling.Default},e.title)})):null]}),(0,z.jsx)("div",{className:"u-flex-direction-row u-overflow-y-unset",children:(0,z.jsx)(gt.Z,{children:(0,z.jsx)(ic.I,{type:ic.I.Type.Button,text:r("actions.start"),styling:ic.I.Styling.Filled,testId:"taxpayer-education-start-button",onClick:s})})})]})})},zue=e=>{let{onClick:t}=e;const i=U(),n={info:e=>(0,z.jsx)("span",{onClick:t,children:(0,z.jsx)(xt.Z,{as:"a",clickable:!0,text:e,type:xt.Z.Type.Subtitle})})};return(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:i("taxpayer_info_security",n)})};let Tue,Fue,Nue;!function(e){e.FirstName="firstName",e.LastName="lastName",e.Birthdate="birthdate",e.CountryCode="countryCode",e.TaxIdentificationNumber="taxIdentificationNumber",e.HaveTaxIdentificationNumber="haveTaxIdentificationNumber",e.BirthCountryCode="birthCountryCode",e.BirthCountryTitle="birthCountryTitle",e.City="city",e.VatNumber="vatNumber"}(Tue||(Tue={})),function(e){e.FirstName="first_name",e.LastName="last_name",e.Birthdate="birthdate",e.CountryOfTaxResidency="country_of_tax_residency",e.TaxIdentificationNumber="tin",e.BillingAddress="billing_address_id",e.BirthplaceCity="birthplace_city",e.VatNumber="vat_number"}(Fue||(Fue={})),function(e){e.RegisteredBusinessName="business_name",e.BusinessCode="business_code",e.SecondaryBusinessCode="secondary_business_code",e.VatNumber="vat_number",e.BusinessAddressId="business_address_id",e.HaveOtherCountriesOfEstablishment="have_other_countries_of_establishment",e.BusinessEstablishmentCountries="business_establishment_countries"}(Nue||(Nue={}));const Lue=e=>{let{isNonEuCountry:t,onSubmit:i}=e;const n=U("taxpayer_form"),s={"privacy-policy":e=>(0,z.jsx)("a",{href:Me.hOY,target:"_blank",rel:"noopener noreferrer",children:e})},r=()=>(0,ls.ru)(Me.hu_);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(Nm,{breakpoint:"desktops",children:[(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsxs)("div",{className:y()("u-flexbox u-align-items-center",t&&"u-justify-content-flex-end"),children:[!t&&(0,z.jsx)("div",{className:"u-flex-grow u-margin-left-large u-margin-right-large",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:n("footer",s)})}),(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsx)(ic.I,{type:ic.I.Type.Button,text:n("actions.cancel"),testId:"taxpayer-form-cancel",inline:!0,onClick:r}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Large}),(0,z.jsx)(ic.I,{type:ic.I.Type.Button,text:n(t?"actions.confirm_non_eu":"actions.confirm"),styling:ic.I.Styling.Filled,testId:"taxpayer-form-submit",inline:!0,onClick:i})]})]})]}),(0,z.jsxs)(Nm,{breakpoint:"portables",children:[(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),!t&&(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:n("footer",s)}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(ic.I,{type:ic.I.Type.Button,text:n(t?"actions.confirm_non_eu":"actions.confirm"),styling:ic.I.Styling.Filled,testId:"taxpayer-form-submit",onClick:i}),(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),(0,z.jsx)(ic.I,{type:ic.I.Type.Button,text:n("actions.cancel"),testId:"taxpayer-form-cancel",onClick:r})]})]})},Eue=e=>{let{maxDefaultInputLength:t,formConfiguration:i}=e;const{register:n,formState:{errors:s},control:r}=(0,th.Gc)(),{track:a}=vi(),o=U("taxpayer_form.general_information"),l=fh(s,"taxpayer_form.errors"),c=(e,t)=>{t&&a(en({screen:$t.TaxpayersForm,state:e,target:t}))};return(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Tight,children:[(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:o("heading")})}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,children:(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[i.firstName?(0,z.jsx)(fb.M,{...n(Tue.FirstName,{required:!0}),styling:fb.M.Styling.Wide,maxLength:t,title:i.firstName.fieldTitle,placeholder:i.firstName.placeholder,validation:hh(l(Tue.FirstName)),uncontrolled:!0,onFocus:()=>{var e;return c("focus",null===(e=i.firstName)||void 0===e?void 0:e.fieldName)},onBlur:()=>{var e;return c("unfocus",null===(e=i.firstName)||void 0===e?void 0:e.fieldName)}}):null,i.lastName?(0,z.jsx)(fb.M,{...n(Tue.LastName,{required:!0}),styling:fb.M.Styling.Wide,maxLength:t,title:i.lastName.fieldTitle,placeholder:i.lastName.placeholder,validation:hh(l(Tue.LastName)),uncontrolled:!0,onFocus:()=>{var e;return c("focus",null===(e=i.lastName)||void 0===e?void 0:e.fieldName)},onBlur:()=>{var e;return c("unfocus",null===(e=i.lastName)||void 0===e?void 0:e.fieldName)}}):null,i.birthday?(0,z.jsx)(th.Qr,{render:e=>{var t;let{field:n}=e;const s=(0,v.omit)(n,"ref");return(0,z.jsx)(dI,{...s,styling:"wide",title:null===(t=i.birthday)||void 0===t?void 0:t.fieldTitle,validation:hh(l(Tue.Birthdate))})},name:Tue.Birthdate,control:r,rules:{required:!0}}):null,i.vatNumber?(0,z.jsx)(fb.M,{...n(Tue.VatNumber,{required:!0}),styling:fb.M.Styling.Wide,title:i.vatNumber.fieldTitle,placeholder:i.vatNumber.placeholder||"",validation:hh(l(Tue.VatNumber)),uncontrolled:!0,disabled:i.vatNumber.locked,onFocus:()=>{var e;return c("focus",null===(e=i.vatNumber)||void 0===e?void 0:e.fieldName)},onBlur:()=>{var e;return c("unfocus",null===(e=i.vatNumber)||void 0===e?void 0:e.fieldName)}}):null]})})]})},Oue=e=>{let{address:t,error:i,onAddressChange:n}=e;const s=U("taxpayer_form.address"),[r,a]=(0,m.useState)(!1),o=()=>a(!0);return(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Tight,children:[(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:s("heading")})}),t?(0,z.jsx)(A_,{styling:gt.Z.Styling.Wide,type:gt.Z.Type.Navigating,address:t,suffix:(0,z.jsx)(ht.Z,{name:"pencil",color:ht.Z.Color.GreyscaleLevel3,aria:{"aria-hidden":"true"}}),onClick:o}):(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,type:gt.Z.Type.Navigating,title:s("empty_message"),suffix:(0,z.jsx)(ht.Z,{name:"plus",aria:{"aria-hidden":"true"}}),onClick:o}),i?(0,z.jsx)(gt.Z,{children:hh(i)}):null,(0,z.jsxs)(cp.Z,{show:r,children:[(0,z.jsx)(gt.Z,{children:(0,z.jsx)("div",{className:"u-text-center",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,alignment:xt.Z.Alignment.Center,text:s("heading")})})}),(0,z.jsx)(_I,{address:t,onChange:e=>{a(!1),n(e)},onCancel:()=>a(!1)})]})]})};var Rue=i(66226);const Due=e=>{let{configuration:t,show:i,currentValue:n,onContinue:s,onClose:r}=e;const a=U("taxpayer.country_of_tax_residency"),[o,l]=(0,m.useState)(null),[c,d]=(0,m.useState)(null);(0,m.useEffect)((()=>{n?l({...n}):null!=t&&t.value.code&&null!=t&&t.value.title&&l({code:t.value.code,title:t.value.title})}),[t,n]);return t?(0,z.jsx)(cp.Z,{hasScrollableContent:!0,show:i,contentDimensions:{height:"50%"},children:(0,z.jsx)(Lg,{className:"u-fill-child-component u-fill-width",children:(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column",children:[(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Pm.Z,{body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:a("heading"),bold:!0}),right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,onClick:r,testId:"taxpayer-country-modal-close",deprecatedIconName:"x",inline:!0})}),(0,z.jsx)(h.Z,{})]}),(0,z.jsx)("div",{className:"u-flexbox u-flex-direction-column u-flex-grow",children:(0,z.jsxs)(nc.Z,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Narrow,children:(0,z.jsx)(xt.Z,{text:a("body")})}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Narrow,children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:(null==t?void 0:t.fieldTitle)||""})}),(0,z.jsx)(hI,{name:"countryOfTaxResidency",styling:fb.M.Styling.Narrow,value:o,showSuggestedCountries:null===(null==t?void 0:t.value.code),title:"",placeholder:(null==t?void 0:t.placeholder)||"",validation:hh(c),onChange:e=>{d(null),l(e)}})]})}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(nc.Z,{children:(0,z.jsx)(ic.I,{type:ic.I.Type.Button,text:a("actions.continue"),styling:ic.I.Styling.Filled,testId:"taxpayer-country-modal-continue",onClick:()=>{o?s(o):d(a("errors.blank"))}})})]})})}):null},Aue=e=>{let{show:t,title:i,body:n,onClose:s}=e;const r=U("tax_information_number_education"),a=(0,p.v9)(Wt("web_taxpayers_form_improvements"));return(0,z.jsx)(cp.Z,{hasScrollableContent:!0,show:t,className:"u-flexbox u-flex-direction-column",children:(0,z.jsxs)(Lg,{children:[(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Pm.Z,{body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:r("header.title"),bold:!0}),right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,onClick:s,deprecatedIconName:"x",inline:!0})}),(0,z.jsx)(h.Z,{})]}),(0,z.jsx)(nc.Z,{children:(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column",children:[a&&(0,z.jsxs)(z.Fragment,{children:[(()=>{const e={"privacy-policy":e=>(0,z.jsx)("a",{href:Me.hOY,target:"_blank",rel:"noopener noreferrer",children:e})};return(0,z.jsx)("div",{style:{backgroundColor:ng(Le.GreyscaleLevel6)},children:(0,z.jsx)(gt.Z,{theme:"transparent",prefix:(0,z.jsx)(Wy.Z,{name:Rue.Z,color:Wy.Z.Color.Primary}),title:r("security.title"),body:(0,z.jsx)(xt.Z,{text:r("security.body",e),html:!0,type:xt.Z.Type.Body})})})})(),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large})]}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:i,bold:!0}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(xt.Z,{html:!0,text:n}),(0,z.jsx)(x.Z,{size:x.Z.Size.X3Large}),(0,z.jsx)(ic.I,{type:ic.I.Type.Button,text:r("actions.confirm"),styling:ic.I.Styling.Filled,testId:"tax-information-number-education-confirm-button",onClick:s})]})})]})})},Mue=e=>{var t,i,n;let{maxDefaultInputLength:s,formConfiguration:r,countryTitle:a,refreshFormConfiguration:o}=e;const{register:l,watch:c,setValue:d,clearErrors:u,formState:{errors:g}}=(0,th.Gc)(),f=E(),y=(0,p.v9)(Wt("web_taxpayers_form_improvements")),v=c(Tue.BirthCountryCode),_=c(Tue.HaveTaxIdentificationNumber),b=c(Tue.CountryCode),j=U("taxpayer_form.tax_information"),S=fh(g,"taxpayer_form.errors"),{track:Z}=vi(),[I,C]=(0,m.useState)(!1),[k,w]=(0,m.useState)(!1),[P,T]=(0,m.useState)(null==r||null===(t=r.birthplaceCountry)||void 0===t||null===(i=t.value)||void 0===i?void 0:i.title),[F,N]=(0,m.useState)(a||(null==r||null===(n=r.countryOfTaxResidency)||void 0===n?void 0:n.value.title)),O=!_,R=()=>{C(!0),Z(Wi({screen:$t.TaxpayersTaxIdentificationNumberEducationModal}))},D=()=>{u(Tue.TaxIdentificationNumber),d(Tue.HaveTaxIdentificationNumber,!_)},A=e=>{e&&(T(e.title),d(Tue.BirthCountryCode,e.code),d(Tue.BirthCountryTitle,e.title))},M=(e,t)=>()=>{t&&Z(en({screen:$t.TaxpayersForm,state:e,target:t}))};return(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Tight,children:[(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:j("heading")})}),(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[r.countryOfTaxResidency?(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,clickable:!0,onClick:()=>{w(!0),Z(Wi({screen:$t.TaxpayersCountryOfTaxResidencyModal}))},testId:"tax-residency-country-cell",children:(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsx)("div",{className:"u-half-width",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:null===(q=r.countryOfTaxResidency)||void 0===q?void 0:q.fieldTitle})}),(0,z.jsx)(xt.Z,{text:F}),(0,z.jsx)("div",{className:"u-margin-left-auto",children:(0,z.jsx)(ht.Z,{color:ht.Z.Color.GreyscaleLevel3,name:"pencil",aria:{"aria-hidden":"true"}})})]})}):null,(()=>{if(!r.tin)return null;const e=(0,z.jsx)("span",{className:"u-flexbox u-cursor-pointer u-padding-right-small",onClick:R,children:(0,z.jsx)(ht.Z,{color:ht.Z.Color.GreyscaleLevel3,name:"info-circle",size:ht.Z.Size.Small,aria:{"aria-hidden":"true"},testId:"tax-information-info-circle"})}),t="taxpayer_identification_number";return(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Tight,children:[(0,z.jsx)(fb.M,{...l(Tue.TaxIdentificationNumber,{required:!0}),styling:fb.M.Styling.Wide,maxLength:s,title:r.tin.fieldTitle,placeholder:r.tin.placeholder,validation:hh(S(Tue.TaxIdentificationNumber)),suffix:e,disabled:O,uncontrolled:!0,onFocus:M("focus",t),onBlur:M("unfocus",t)}),y&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:f.tabletsUp?x.Z.Size.XLarge:x.Z.Size.Medium}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,prefix:(0,z.jsx)(Wy.Z,{name:Rue.Z,color:Wy.Z.Color.Primary}),body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:j("information_caption")})})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})]}),r.birthplaceCountry&&r.birthplaceCity?(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:j("no_tax_number_check")}),suffix:(0,z.jsx)(BZ.F,{name:Tue.HaveTaxIdentificationNumber,onChange:D,checked:!_,testId:"have-tax-number-checkbox"})}):null]})})()]}),_||!r.birthplaceCountry?null:(0,z.jsx)(hI,{name:Tue.BirthCountryCode,styling:fb.M.Styling.Wide,value:v&&P?{code:v,title:P}:null,showSuggestedCountries:null===(null===(B=r.birthplaceCountry.value)||void 0===B?void 0:B.code),title:r.birthplaceCountry.fieldTitle,placeholder:r.birthplaceCountry.placeholder,validation:hh(S(Tue.BirthCountryCode)),onChange:A},Tue.BirthCountryCode),_||!r.birthplaceCity?null:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,children:(0,z.jsx)(fb.M,{...l(Tue.City),styling:fb.M.Styling.Wide,maxLength:s,title:r.birthplaceCity.fieldTitle,placeholder:r.birthplaceCity.placeholder,validation:hh(S(Tue.City)),uncontrolled:!0})}),r.tin&&(0,z.jsx)(Aue,{show:I,title:r.tin.info.title,body:r.tin.info.body,onClose:()=>C(!1)}),(0,z.jsx)(Due,{show:k,configuration:r.countryOfTaxResidency,currentValue:b&&F?{code:b,title:F}:null,onContinue:e=>{N(e.title),d(Tue.CountryCode,e.code),w(!1),o({...e})},onClose:()=>w(!1)})]});var B,q},Uue=e=>{let{show:t,currentUiState:i,onClose:n,onSuccess:s}=e;const r=U("taxpayer_form.progress");return i===Ne.Idle||i===Ne.Pending?null:(0,z.jsx)(cp.Z,{show:t,children:(()=>{const e=i===Ne.Failure,t=e?"error":"success",a=e?n:s;return(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,children:(0,z.jsxs)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),children:[(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column u-align-items-center",children:[!e&&(0,z.jsx)(ht.Z,{name:"checkmark",size:ht.Z.Size.Large,color:ht.Z.Color.Success}),(0,z.jsx)(xt.Z,{alignment:xt.Z.Alignment.Center,type:xt.Z.Type.Heading,text:r("".concat(t,".title"))})]}),e&&(0,z.jsx)(xt.Z,{type:xt.Z.Type.Body,text:r("".concat(t,".body"))}),(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,type:ic.I.Type.Button,text:r("".concat(t,".action")),onClick:a})]})})})()})},Bue="seenTaxpayerEducation",que="80px",Vue={[Fue.FirstName]:Tue.FirstName,[Fue.LastName]:Tue.LastName,[Fue.TaxIdentificationNumber]:Tue.TaxIdentificationNumber,[Fue.Birthdate]:Tue.Birthdate,[Fue.CountryOfTaxResidency]:Tue.CountryCode,[Fue.BirthplaceCity]:Tue.City,[Fue.VatNumber]:Tue.VatNumber},Hue=e=>{var t,i,n,s,r,a,o,l,c,d,u,p;let{uiState:g,formConfiguration:h,countryCode:f,countryTitle:y,currentAddress:_,setCurrentAddress:b,refreshFormConfiguration:j}=e;const S=(0,v.isEmpty)(null===(t=h.birthplaceCity)||void 0===t?void 0:t.value)||(0,v.isEmpty)(null===(i=h.birthplaceCountry)||void 0===i?void 0:i.value),Z=(0,th.cI)({defaultValues:{[Tue.FirstName]:null===(n=h.firstName)||void 0===n?void 0:n.value,[Tue.LastName]:null===(s=h.lastName)||void 0===s?void 0:s.value,[Tue.Birthdate]:null===(r=h.birthday)||void 0===r?void 0:r.value,[Tue.City]:null===(a=h.birthplaceCity)||void 0===a?void 0:a.value,[Tue.HaveTaxIdentificationNumber]:S,[Tue.CountryCode]:f||(null===(o=h.countryOfTaxResidency)||void 0===o?void 0:o.value.code),[Tue.BirthCountryCode]:null===(l=h.birthplaceCountry)||void 0===l||null===(c=l.value)||void 0===c?void 0:c.code,[Tue.BirthCountryTitle]:null===(d=h.birthplaceCountry)||void 0===d||null===(u=d.value)||void 0===u?void 0:u.title,[Tue.VatNumber]:null===(p=h.vatNumber)||void 0===p?void 0:p.value}}),{getValues:I,watch:C,setError:k,clearErrors:w,setValue:P}=Z,T=U("errors"),{track:F}=vi(),N=C(Tue.HaveTaxIdentificationNumber),{isFormValid:L}=(e=>{var t,i,n,s,r,a,o,l,c;let{formConfiguration:d,haveTaxIdentificationNumber:u,setError:m}=e;const p=U("errors"),g={[Tue.FirstName]:null==d||null===(t=d.firstName)||void 0===t?void 0:t.fieldTitle,[Tue.LastName]:null==d||null===(i=d.lastName)||void 0===i?void 0:i.fieldTitle,[Tue.Birthdate]:null==d||null===(n=d.birthday)||void 0===n?void 0:n.fieldTitle,[Tue.CountryCode]:null==d||null===(s=d.countryOfTaxResidency)||void 0===s?void 0:s.fieldTitle,[Tue.TaxIdentificationNumber]:null==d||null===(r=d.tin)||void 0===r?void 0:r.fieldTitle,[Tue.BirthCountryCode]:null==d||null===(a=d.birthplaceCountry)||void 0===a?void 0:a.fieldTitle,[Tue.BirthCountryTitle]:null==d||null===(o=d.birthplaceCountry)||void 0===o?void 0:o.fieldTitle,[Tue.City]:null==d||null===(l=d.birthplaceCity)||void 0===l?void 0:l.fieldTitle,[Tue.HaveTaxIdentificationNumber]:void 0,[Tue.VatNumber]:null==d||null===(c=d.vatNumber)||void 0===c?void 0:c.fieldTitle};return{isFormValid:e=>Object.entries(e).map((e=>{let[t,i]=e;const n=((e,t)=>{switch(e){case Tue.HaveTaxIdentificationNumber:return!0;case Tue.TaxIdentificationNumber:return!(null!=d&&d.tin&&!d.tin.provided&&u&&(0,v.isEmpty)(t));case Tue.BirthCountryCode:return null==d||!d.birthplaceCountry||!!u||!(0,v.isEmpty)(t);case Tue.BirthCountryTitle:return null==d||!d.birthplaceCountry||!!u||null!==t;case Tue.City:return null==d||!d.birthplaceCity||!!u||!(0,v.isEmpty)(t);case Tue.CountryCode:return null!==t;case Tue.VatNumber:return!0;default:return!(!d||d[e])||!(0,v.isEmpty)(t)}})(t,i);return!n&&d&&m(t,{type:"manual",message:p("blank",{field:g[t]})}),n})).every(Boolean)}})({formConfiguration:h,haveTaxIdentificationNumber:N,setError:k}),[E,O]=(0,m.useState)(!1),[R,D]=(0,m.useState)(Ne.Idle),[A,M]=(0,m.useState)(void 0);return g===Ne.Pending?(0,z.jsx)(Mp,{testId:"taxpayer-education-loader"}):g===Ne.Failure?(0,z.jsx)(sw,{}):(0,z.jsxs)(th.RV,{...Z,children:[(0,z.jsx)(Mue,{maxDefaultInputLength:50,formConfiguration:h,countryTitle:y,refreshFormConfiguration:e=>{j(e),P(Tue.HaveTaxIdentificationNumber,!0)}}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(Eue,{maxDefaultInputLength:50,formConfiguration:h}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(Oue,{address:_,error:A,onAddressChange:e=>b(e)}),(0,z.jsx)(Lue,{isNonEuCountry:!1,onSubmit:async()=>{F(Ri({target:qm.Confirm,screen:$t.TaxpayersForm}));const e=I(),t=L(e);var i;if(!_)return void M(T("blank",{field:null===(i=h.billingAddress)||void 0===i?void 0:i.fieldTitle}));if(M(""),!t||!e.countryCode)return;w(),D(Ne.Pending);const n=(e=>{if(e.city&&e.birthCountryCode&&e.birthCountryTitle&&!N)return{city:e.city,code:e.birthCountryCode}})(e),s=(e=>{if(N)return e.taxIdentificationNumber||void 0})(e),r=await(0,Fe.k3d)({countryOfTaxResidency:e.countryCode,firstName:e.firstName||void 0,lastName:e.lastName||void 0,birthdate:e.birthdate||void 0,taxIdentificationNumber:s,billingAddressId:_.id,birthplaceCountry:null==n?void 0:n.code,birthplaceCity:null==n?void 0:n.city,vatNumber:e.vatNumber||void 0});return r.code!==pm.Q.Ok&&r.code!==pm.Q.ValidationError?(D(Ne.Failure),void O(!0)):"errors"in r?(r.errors.forEach((e=>{var t;(t=e).field!==Fue.BillingAddress?k(Vue[t.field],{type:"manual",message:t.value}):M(t.value)})),O(!1),void D(Ne.Failure)):(D(Ne.Success),void O(!0))}}),(0,z.jsx)(Uue,{show:E,currentUiState:R,onClose:()=>O(!1),onSuccess:()=>(0,ls.ru)(Me.hu_)}),(0,z.jsx)(cp.Z,{show:R===Ne.Pending,contentDimensions:{width:que},children:(0,z.jsx)(Mp,{})})]})},Gue=e=>{var t;let{formConfiguration:i,countryTitle:n,refreshFormConfiguration:s}=e;const r=U("taxpayer_form.non_eu_country"),{track:a}=vi(),{watch:o,setValue:l}=(0,th.Gc)(),[c,d]=(0,m.useState)(!1),[u,p]=(0,m.useState)(n||(null==i||null===(t=i.countryOfTaxResidency)||void 0===t?void 0:t.value.title)),g=o(Tue.CountryCode);return(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Tight,children:[(0,z.jsx)(gt.Z,{title:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:r("title")}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]}),body:(0,z.jsx)(xt.Z,{text:r("body")})}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{clickable:!0,onClick:()=>{d(!0),a(Wi({screen:$t.TaxpayersCountryOfTaxResidencyModal}))},children:(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center",children:[(0,z.jsx)("div",{className:"u-half-width",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:null===(f=i.countryOfTaxResidency)||void 0===f?void 0:f.fieldTitle})}),(0,z.jsx)(xt.Z,{text:u}),(0,z.jsx)("div",{className:"u-margin-left-auto",children:(0,z.jsx)(ht.Z,{color:ht.Z.Color.GreyscaleLevel3,name:"pencil",aria:{"aria-hidden":"true"}})})]})}),(0,z.jsx)(Due,{show:c,configuration:null==i?void 0:i.countryOfTaxResidency,currentValue:g&&u?{code:g,title:u}:null,onContinue:e=>{p(e.title),l(Tue.CountryCode,e.code),d(!1),s({...e})},onClose:()=>d(!1)})]});var f},Wue=e=>{var t;let{formConfiguration:i,countryCode:n,countryTitle:s,refreshFormConfiguration:r}=e;const a=(0,th.cI)({defaultValues:{[Tue.CountryCode]:n||(null==i||null===(t=i.countryOfTaxResidency)||void 0===t?void 0:t.value.code)}}),{track:o}=vi(),[l,c]=(0,m.useState)(Ne.Idle);return l===Ne.Failure?(0,z.jsx)(sw,{}):(0,z.jsxs)(th.RV,{...a,children:[(0,z.jsx)(Gue,{formConfiguration:i,countryTitle:s,refreshFormConfiguration:r}),(0,z.jsx)(Lue,{isNonEuCountry:!0,onSubmit:async()=>{o(Ri({target:qm.Confirm,screen:$t.TaxpayersForm}));const e=a.getValues();e.countryCode&&(a.clearErrors(),c(Ne.Pending),(await(0,Fe.k3d)({countryOfTaxResidency:e.countryCode})).code===pm.Q.Ok?c(Ne.Success):c(Ne.Failure))}}),(0,z.jsx)(cp.Z,{show:l===Ne.Pending,contentDimensions:{width:que},children:(0,z.jsx)(Mp,{})}),(0,z.jsx)(cp.Z,{show:l===Ne.Success,contentDimensions:{width:que,height:que},onAfterOpen:()=>setTimeout((()=>(0,ls.ru)(Me.hu_)),500),children:(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center u-align-items-center u-fill-height",children:(0,z.jsx)(ht.Z,{name:"checkmark",size:ht.Z.Size.Large,color:ht.Z.Color.Success})})})]})},Xue=e=>e[$E],Yue=(0,aS.P1)(Xue,(e=>{let{isBusinessAddressModalOpen:t}=e;return t})),Kue=(0,aS.P1)(Xue,(e=>{let{isReturnAddressModalOpen:t}=e;return t})),Jue=(0,aS.P1)(Xue,(e=>{let{isUsingTheSameAddress:t}=e;return t})),Que=(0,aS.P1)(Xue,(e=>{let{businessAddress:t}=e;return t})),$ue=(0,aS.P1)(Xue,(e=>{let{returnAddress:t}=e;return t})),eme=(0,aS.P1)(Xue,(e=>{let{returnAddress:t,isUsingTheSameAddress:i}=e;return i||!!t})),tme=(0,aS.P1)(Xue,(e=>{let{isReturnAddressErrorShown:t}=e;return t})),ime=e=>{let{show:t,title:i,body:n,onClose:s}=e;const r=U("taxpayer_form.business.countries_of_establishment_modal");return(0,z.jsx)(cp.Z,{hasScrollableContent:!0,show:t,className:"u-flexbox u-flex-direction-column",children:(0,z.jsxs)(Lg,{children:[(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Pm.Z,{body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:r("header.title"),bold:!0}),right:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,onClick:s,deprecatedIconName:"x",inline:!0})}),(0,z.jsx)(h.Z,{})]}),(0,z.jsx)(nc.Z,{children:(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column",children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:i,bold:!0}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(xt.Z,{html:!0,text:n}),(0,z.jsx)(x.Z,{size:x.Z.Size.X3Large}),(0,z.jsx)(ic.I,{type:ic.I.Type.Button,text:r("actions.confirm"),styling:ic.I.Styling.Filled,testId:"countries-of-establishment-confirm-button",onClick:s})]})})]})})},nme=e=>{var t;let{inputConfiguration:i,countriesOfEstablishmentInputError:n}=e;const{watch:s,setValue:r}=(0,th.Gc)(),a=U("taxpayer_form.business"),[o,l]=(0,m.useState)([]),[c,d]=(0,m.useState)(Ne.Idle),[u,p]=(0,m.useState)((null==i||null===(t=i.value)||void 0===t?void 0:t.map((e=>e.code)))||[]),[g,h]=(0,m.useState)(null),x=s(Nue.HaveOtherCountriesOfEstablishment);(0,m.useEffect)((()=>{(async()=>{d(Ne.Pending);const e=await(0,Fe.cl3)();"errors"in e?d(Ne.Failure):(l(e.countries.map((e=>({code:e.code,title:e.title})))),d(Ne.Success))})()}),[]),(0,m.useEffect)((()=>{r(Nue.BusinessEstablishmentCountries,u)}),[o,u,r]),(0,m.useEffect)((()=>{if(null==i||!i.value)return void h(null);const e=i.value.map((e=>e.code));if(e.length>1)return void h(a("countries_of_establishment_input_dropdown_info_selected",{count:e.length}));if(0===e.length)return void h(null);const t=o.find((t=>t.code===e[0]));h(t?t.title:null)}),[o,i,a]);const f=e=>t=>{e.setIsSaveEnabled(!0),u.includes(t.value)?p((e=>e.filter((e=>e!==t.value)))):p((e=>[...e,t.value]))},y=e=>!u.includes(e.code)&&(!g||e.title.toLowerCase().includes(g.toLocaleLowerCase())),v=()=>{h(null),p([])},_=e=>u.length?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:a("countries_of_establishment_input_dropdown_info_selected",{count:u.length})}),suffix:(0,z.jsx)("span",{onClick:v,children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:a("countries_of_establishment_input_dropdown_info"),highlight:!0,highlightTheme:"primary",clickable:!0,underline:!1})})}),(0,z.jsx)(T3,{name:"countries_of_establishment",items:o.filter((e=>u.includes(e.code))).map((e=>({value:e.code,id:e.code,title:e.title}))),selected:u,onItemClick:f(e),isMultiSelect:!0})]}):null,b=()=>{if(u.length>1&&h(a("countries_of_establishment_input_dropdown_info_selected",{count:u.length})),0===u.length)return void h(null);if(1!==u.length)return;const e=o.find((e=>e.code===u[0]));e&&h(e.title)};return x&&c!==Ne.Failure?c===Ne.Pending?(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,children:(0,z.jsx)(Mp,{testId:"countries-of-establishment-loader"})}):i?(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Wide,children:[(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsx)("div",{className:"u-half-width",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:i.fieldTitle})}),(0,z.jsx)("div",{className:"u-margin-left-auto u-half-width",children:(0,z.jsx)(gI,{name:"countries_of_establishment_dropdown",styling:"narrow",value:g,isSaveButtonShown:!0,placeholder:a("countries_of_establishment_input_placeholder"),render:e=>(0,z.jsxs)(z.Fragment,{children:[_(e),(0,z.jsx)(gt.Z,{title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:a("countries_of_establishment_input_dropdown_info_empty")})}),(0,z.jsx)(T3,{name:"countries_of_establishment",items:o.filter(y).map((e=>({value:e.code,id:e.code,title:e.title}))),selected:u,onItemClick:f(e),isMultiSelect:!0})]}),onChange:e=>{h(e.target.value)},onCancel:()=>{u.length?b():h(null)},onClose:()=>{b()},onSave:()=>{b()},onOpen:()=>{h(null)}})})]}),n&&hh(n)]}):null:null},sme=e=>{var t,i,n,s,r,a,o,l,c;let{formConfiguration:d,currentBusinessAddress:u,countryCode:g}=e;const f=(0,th.cI)({defaultValues:{[Nue.RegisteredBusinessName]:null===(t=d.businessName)||void 0===t?void 0:t.value,[Nue.BusinessCode]:null===(i=d.businessCode)||void 0===i?void 0:i.value,[Nue.SecondaryBusinessCode]:null===(n=d.secondaryBusinessCode)||void 0===n?void 0:n.value,[Nue.VatNumber]:null===(s=d.vatNumber)||void 0===s?void 0:s.value,[Nue.HaveOtherCountriesOfEstablishment]:((null===(r=d.businessEstablishmentCountries)||void 0===r?void 0:r.value)||[]).length>0,[Nue.BusinessEstablishmentCountries]:null===(a=d.businessEstablishmentCountries)||void 0===a||null===(o=a.value)||void 0===o?void 0:o.map((e=>e.code))}}),{register:y,watch:_,setValue:b,setError:j,getValues:S,clearErrors:Z,formState:{errors:I}}=f,C=U("taxpayer_form.business"),k=U("errors"),w=fh(I,"taxpayer_form.business.errors"),{track:P}=vi(),T=(0,p.v9)(Wt("web_taxpayers_form_improvements")),F=E(),N=(0,p.v9)(Se),O=(0,p.v9)($ue),{isFormValid:R}=(e=>{var t,i,n,s,r,a;let{formConfiguration:o,setError:l}=e;const c=U("errors"),d={[Nue.RegisteredBusinessName]:null==o||null===(t=o.businessName)||void 0===t?void 0:t.fieldTitle,[Nue.BusinessCode]:null==o||null===(i=o.businessCode)||void 0===i?void 0:i.fieldTitle,[Nue.SecondaryBusinessCode]:null==o||null===(n=o.secondaryBusinessCode)||void 0===n?void 0:n.fieldTitle,[Nue.VatNumber]:null==o||null===(s=o.vatNumber)||void 0===s?void 0:s.fieldTitle,[Nue.BusinessAddressId]:null==o||null===(r=o.businessAddress)||void 0===r?void 0:r.fieldTitle,[Nue.HaveOtherCountriesOfEstablishment]:void 0,[Nue.BusinessEstablishmentCountries]:null==o||null===(a=o.businessEstablishmentCountries)||void 0===a?void 0:a.fieldTitle};return{isFormValid:e=>Object.entries(e).map((e=>{let[t,i]=e;const n=((e,t)=>{switch(e){case Nue.HaveOtherCountriesOfEstablishment:return!0;case Nue.RegisteredBusinessName:return null==o||!o.businessName||!(0,v.isEmpty)(t);case Nue.BusinessCode:return null==o||!o.businessCode||!(0,v.isEmpty)(t);case Nue.SecondaryBusinessCode:return null==o||!o.secondaryBusinessCode||!(0,v.isEmpty)(t);case Nue.VatNumber:return!0;default:return!(!o||o[e])||!(0,v.isEmpty)(t)}})(t,i);return!n&&o&&l(t,{type:"manual",message:c("blank",{field:d[t]})}),n})).every(Boolean)}})({formConfiguration:d,setError:j}),[D,A]=(0,m.useState)(!1),[M,B]=(0,m.useState)(!1),[q,V]=(0,m.useState)(u),[H,G]=(0,m.useState)([]),[W,X]=(0,m.useState)(!1),[Y,K]=(0,m.useState)(Ne.Idle),[J,Q]=(0,m.useState)(void 0),[$,ee]=(0,m.useState)(void 0),te=_(Nue.HaveOtherCountriesOfEstablishment);(0,m.useEffect)((()=>{q||V(u)}),[u,q]);const ie=[{field:Xg.GL.Country,disabled:!0},{field:Xg.GL.Name,disabled:!0},{field:Xg.GL.Line1,required:!0},{field:Xg.GL.Line2},{field:Xg.GL.PostalCode,required:!0},{field:Xg.GL.City,required:!0}],ne=(e,t)=>{t&&P(en({screen:$t.TaxpayersForm,state:e,target:t}))},se=()=>B(!0);return(0,z.jsxs)(th.RV,{...f,children:[(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Tight,children:[(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:C("general_details_heading")})}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,children:(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[d.secondaryBusinessCode?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(fb.M,{...y(Nue.SecondaryBusinessCode,{required:!0}),styling:fb.M.Styling.Wide,title:d.secondaryBusinessCode.fieldTitle,placeholder:d.secondaryBusinessCode.placeholder||"",validation:hh(w(Nue.SecondaryBusinessCode)),uncontrolled:!0,disabled:d.secondaryBusinessCode.locked,onFocus:()=>{var e;return ne("focus",null===(e=d.secondaryBusinessCode)||void 0===e?void 0:e.fieldName)},onBlur:()=>{var e;return ne("unfocus",null===(e=d.secondaryBusinessCode)||void 0===e?void 0:e.fieldName)}}),T&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:F.tabletsUp?x.Z.Size.XLarge:x.Z.Size.Medium}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,prefix:(0,z.jsx)(Wy.Z,{name:Rue.Z,color:Wy.Z.Color.Primary}),body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:C("information_caption")})})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})]})]}):null,d.businessName?(0,z.jsx)(fb.M,{...y(Nue.RegisteredBusinessName,{required:!0}),styling:fb.M.Styling.Wide,title:d.businessName.fieldTitle,placeholder:d.businessName.placeholder||"",validation:hh(w(Nue.RegisteredBusinessName)),uncontrolled:!0,disabled:d.businessName.locked,onFocus:()=>{var e;return ne("focus",null===(e=d.businessName)||void 0===e?void 0:e.fieldName)},onBlur:()=>{var e;return ne("unfocus",null===(e=d.businessName)||void 0===e?void 0:e.fieldName)}}):null,d.businessCode?(0,z.jsx)(fb.M,{...y(Nue.BusinessCode,{required:!0}),styling:fb.M.Styling.Wide,title:d.businessCode.fieldTitle,placeholder:d.businessCode.placeholder||"",validation:hh(w(Nue.BusinessCode)),uncontrolled:!0,disabled:d.businessCode.locked,onFocus:()=>{var e;return ne("focus",null===(e=d.businessCode)||void 0===e?void 0:e.fieldName)},onBlur:()=>{var e;return ne("unfocus",null===(e=d.businessCode)||void 0===e?void 0:e.fieldName)}}):null,d.vatNumber?(0,z.jsx)(fb.M,{...y(Nue.VatNumber,{required:!0}),styling:fb.M.Styling.Wide,title:d.vatNumber.fieldTitle,placeholder:d.vatNumber.placeholder||"",validation:hh(w(Nue.VatNumber)),uncontrolled:!0,disabled:d.vatNumber.locked,onFocus:()=>{var e;return ne("focus",null===(e=d.vatNumber)||void 0===e?void 0:e.fieldName)},onBlur:()=>{var e;return ne("unfocus",null===(e=d.vatNumber)||void 0===e?void 0:e.fieldName)}}):null]})})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,children:(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsx)("div",{className:"u-half-width",children:(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.UserInput,bold:!0,text:C("address_heading")})})}),(0,z.jsxs)("div",{className:"u-half-width",children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),d.businessAddress?q?(0,z.jsx)(A_,{styling:gt.Z.Styling.Tight,address:q,type:gt.Z.Type.Navigating,suffix:(0,z.jsx)("div",{className:"u-padding-right-large",children:(0,z.jsx)(ht.Z,{name:"pencil",color:ht.Z.Color.GreyscaleLevel3,aria:{"aria-hidden":"true"}})}),onClick:se}):(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,type:gt.Z.Type.Navigating,title:C("empty_address_message"),suffix:(0,z.jsx)("div",{className:"u-padding-right-large",children:(0,z.jsx)(ht.Z,{name:"pencil",color:ht.Z.Color.GreyscaleLevel3,aria:{"aria-hidden":"true"}})}),onClick:se}):null,(0,z.jsxs)("div",{children:[(0,z.jsx)(x.Z,{}),(0,z.jsx)("div",{className:"u-padding-right-large",children:(0,z.jsx)(h.Z,{})}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:C("business_address_info")}),J&&(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,children:hh(J)}),(0,z.jsx)(x.Z,{})]})]})]})}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),d.businessEstablishmentCountries?(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Tight,children:[(0,z.jsx)(gt.Z,{children:(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:C("countries_of_establishment_heading"),testId:"countries-of-establishment-heading"}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Large}),(0,z.jsx)("span",{className:"u-margin-left-auto",onClick:()=>A(!0),children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:C("countries_of_establishment_info"),clickable:!0,underline:!1})})]})}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:C("countries_of_establishment_checkbox_title")}),suffix:(0,z.jsx)(BZ.F,{name:Nue.HaveOtherCountriesOfEstablishment,onChange:()=>{b(Nue.HaveOtherCountriesOfEstablishment,!te)},checked:te,testId:"countries-of-establishment-checkbox"})}),(0,z.jsx)(nme,{inputConfiguration:d.businessEstablishmentCountries,countriesOfEstablishmentInputError:$})]}):null,(0,z.jsx)(Lue,{isNonEuCountry:!1,onSubmit:async()=>{var e;P(Ri({target:qm.Confirm,screen:$t.TaxpayersForm}));const t=S(),i=R(t);if(t[Nue.HaveOtherCountriesOfEstablishment]&&(!t[Nue.BusinessEstablishmentCountries]||0===(null===(e=t[Nue.BusinessEstablishmentCountries])||void 0===e?void 0:e.length)))return void ee(C("countries_of_establishment_input_error"));var n;if(ee(""),!q)return void Q(k("blank",{field:null===(n=d.billingAddress)||void 0===n?void 0:n.fieldTitle}));if(Q(""),!i)return;Z(),K(Ne.Pending);const s=await(0,Fe.k3d)({businessName:t[Nue.RegisteredBusinessName]||void 0,businessCode:t[Nue.BusinessCode]||void 0,secondaryBusinessCode:t[Nue.SecondaryBusinessCode]||void 0,businessAddressId:(null==q?void 0:q.id)||void 0,vatNumber:t[Nue.VatNumber]||void 0,countryOfTaxResidency:g,businessEstablishmentCountries:t[Nue.HaveOtherCountriesOfEstablishment]&&t[Nue.BusinessEstablishmentCountries]||void 0});return s.code!==pm.Q.Ok&&s.code!==pm.Q.ValidationError?(K(Ne.Failure),void X(!0)):"errors"in s?(s.errors.forEach((e=>{var t;(t=e).field!==Nue.BusinessAddressId?j(t.field,{type:"manual",message:t.value}):Q(t.value)})),X(!1),void K(Ne.Failure)):(K(Ne.Success),void X(!0))}}),(0,z.jsx)(ime,{show:D,title:(null===(l=d.businessEstablishmentCountries)||void 0===l?void 0:l.info.title)||"",body:(null===(c=d.businessEstablishmentCountries)||void 0===c?void 0:c.info.body)||"",onClose:()=>A(!1)}),(0,z.jsxs)(cp.Z,{show:M,children:[(0,z.jsx)(Pm.Z,{theme:"transparent",body:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),C("business_address_title"),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium})]})}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(Sb,{isSubmitPending:!1,defaultValues:q,errors:H,fieldConfiguration:ie,onSubmit:async(e,t)=>{if(!t||!N)return;const i=await(0,Fe.Ld0)({businessAccountId:N,returnAddress:O,businessAddress:e});"errors"in i?G(i.errors):(i.addresses.business_address&&V((0,rt.f_)(i.addresses.business_address)),B(!1))},onCancel:()=>B(!1)})]}),(0,z.jsx)(Uue,{show:W,currentUiState:Y,onClose:()=>X(!1),onSuccess:()=>(0,ls.ru)(Me.hu_)}),(0,z.jsx)(cp.Z,{show:Y===Ne.Pending,contentDimensions:{width:que},children:(0,z.jsx)(Mp,{})})]})};let rme;!function(e){e.CurrentPassword="oldPassword",e.NewPassword="password",e.RepeatPassword="repeatPassword"}(rme||(rme={}));let ame;!function(e){e.Password="password",e.PasswordConfirmation="passwordConfirmation"}(ame||(ame={}));const ome=e=>{let{canSkip:t,additionalActions:i}=e;const n=E(),s=XY(Me.mYc),{track:r}=vi(),a=U("terms_and_conditions.actions"),o=(0,p.v9)(me),l=(0,p.v9)(X),c=n.tabletsUp?void 0:ic.I.Size.Medium,d=o?$t.TermsAndConditionsForced:$t.TermsAndConditions,u=e=>{r(Ri({target:e,screen:d,env:"js"}))};return(0,z.jsxs)(L,{separatorAtBreakpoint:{tablets:(0,z.jsx)(x.Z,{size:x.Z.Size.Regular}),desktops:(0,z.jsx)(x.Z,{size:x.Z.Size.Large})},children:[(0,z.jsx)(ic.I,{text:a("agree"),styling:ic.I.Styling.Filled,size:c,onClick:async()=>{u(qm.AcceptTerms),l&&("errors"in await(0,Fe.RsS)(l)||(0,ls.ru)(s))},testId:"terms-button-agree"}),o||!t?null:(0,z.jsx)(ic.I,{text:a("skip"),styling:ic.I.Styling.Flat,size:c,onClick:async()=>{u(qm.SkipTerms),"errors"in await(0,Fe.jOQ)()||(0,ls.ru)(s)},testId:"terms-button-skip"}),i.map(((e,t)=>{let{title:i,url:n}=e;return(0,z.jsx)(ic.I,{text:i,styling:ic.I.Styling.Flat,url:n,size:c,onClick:()=>u(qm.RedirectTerms),testId:"terms-button-additional-".concat(t)},i)}))]})},lme="".concat(Be.Fv,"/assets/how-it-works"),cme="".concat(Be.Fv,"/assets/images/safety"),dme=()=>{const e=U("how_it_works.header"),t=()=>(0,z.jsx)("div",{className:"u-clearfix",children:(0,z.jsx)("div",{className:"grid6",children:(0,z.jsxs)("div",{className:"row",children:[(0,z.jsx)(xt.Z,{html:!0,children:(0,z.jsx)("div",{className:"how-it-works__header-title",children:e("title")})}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(xt.Z,{theme:"muted",children:(0,z.jsx)("div",{className:"how-it-works__header-body",children:e("body")})})]})})}),i=()=>(0,z.jsx)("div",{className:"how-it-works__header-image-container",children:(0,z.jsx)("img",{src:"".concat(lme,"/header.png"),alt:""})});return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"content-block how-it-works__header u-desktops-only",children:[i(),(0,z.jsx)("div",{className:"container",children:(0,z.jsx)("div",{className:"content-block__content u-ui-margin-vertical-x5-large u-ui-margin-horizontal-large",children:t()})})]}),(0,z.jsxs)("div",{className:"u-mobiles-only",children:[(0,z.jsx)("div",{className:"content-block how-it-works__header",children:(0,z.jsx)("div",{className:"container",children:(0,z.jsx)("div",{className:"content-block__content u-ui-margin-vertical-x6-large",children:i()})})}),(0,z.jsx)("div",{className:"tear tear--top u-background-greyscale-level-7 u-zindex-bump",children:(0,z.jsx)("div",{className:"container",children:(0,z.jsx)("div",{className:"content-block__content u-ui-margin-bottom-large u-ui-margin-horizontal-large",children:t()})})})]})]})},ume=e=>{let{title:t,showTopTear:i,steps:n,buttonTitle:s,buttonUrl:r}=e;const a=U("how_it_works");return(0,z.jsx)("div",{className:"content-block",children:(0,z.jsx)("div",{className:i?"tear tear--top u-background-greyscale-level-7 u-zindex-bump":"",children:(0,z.jsx)("div",{className:"container",children:(0,z.jsxs)("div",{className:"content-block__content u-ui-padding-bottom-x4-large u-ui-margin-horizontal-large",children:[(0,z.jsxs)("div",{className:"u-clearfix",children:[(0,z.jsx)("div",{className:"content-block__heading u-ui-padding-vertical-x2-large@desktops u-ui-padding-top-x2-large@portables u-ui-padding-bottom-x2-large@portables",children:(0,z.jsx)(xt.Z,{text:t,type:xt.Z.Type.Heading})}),(0,z.jsx)("div",{className:"content-block__blocks",children:(0,z.jsx)("div",{className:"row",children:(0,z.jsx)("div",{className:"grid12",children:(0,z.jsx)("div",{className:"row",children:n.map((e=>{let{image:t,titleKey:i,descriptionKey:n,learnMoreEntry:s}=e;return(0,z.jsxs)("div",{className:"grid4 u-ui-padding-bottom-x4-large",children:[(0,z.jsx)("div",{className:"how-it-works__steps-image-container u-ui-padding-bottom-x2-large@desktops u-ui-padding-bottom-x-large@portables",children:(0,z.jsx)(Kl.U,{src:"".concat(lme,"/portables/").concat(t),styling:Kl.U.Styling.Rounded,srcset:"".concat(lme,"/desktops/").concat(t," 296w,\n                    ").concat(lme,"/desktops@2x/").concat(t," 592w,\n                    ").concat(lme,"/portables/").concat(t," 888w,\n                    ").concat(lme,"/portables@2x/").concat(t," 1701w"),sizes:"(min-width: 960px) 296px, (min-width: 721px) calc(100vw - 72px), calc(100vw - 48px)"})}),(0,z.jsxs)("div",{className:"u-padding-right-medium",children:[(0,z.jsx)(xt.Z,{text:a(i),type:xt.Z.Type.Heading}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(xt.Z,{text:a(n),theme:"muted"}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(_p,{type:s,accessChannel:Be.Si.ProductLink,render:e=>(0,z.jsx)("a",{href:e,className:"how-it-works__link",target:"_blank",rel:"noreferrer",children:a("learn_more")})})]})]},i)}))})})})})]}),(0,z.jsx)("div",{className:"u-text-center",children:(0,z.jsx)(ic.I,{text:s,url:r,inline:!0})})]})})})})},mme=e=>{let{startSellingUrl:t,startShoppingUrl:i}=e;const n=U("how_it_works");return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"tear tear--bottom u-background-greyscale-level-7 u-zindex-bump"}),(0,z.jsx)("div",{className:"how-it-works__get-started",style:{backgroundImage:"url('".concat(lme,"/get-started-background.svg')")},children:(0,z.jsx)("div",{className:"container",children:(0,z.jsx)("div",{className:"u-clearfix",children:(0,z.jsx)("div",{className:"content-block__content u-text-center",children:(0,z.jsxs)("div",{className:"u-ui-padding-vertical-x6-large@desktops u-ui-padding-vertical-x5-large@portables",children:[(0,z.jsx)(xt.Z,{theme:"inverse",children:(0,z.jsx)("div",{className:"how-it-works__get-started-title",children:n("get_started.title")})}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsxs)("div",{className:"u-desktops-only",children:[(0,z.jsx)(ic.I,{text:n("start_shopping"),url:i,inverse:!0,inline:!0}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large,orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(ic.I,{text:n("start_selling"),url:t,styling:ic.I.Styling.Filled,inverse:!0,inline:!0})]}),(0,z.jsxs)("div",{className:"u-mobiles-only u-ui-padding-horizontal-large",children:[(0,z.jsx)(ic.I,{text:n("start_selling"),url:t,styling:ic.I.Styling.Filled,inverse:!0}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(ic.I,{text:n("start_shopping"),url:i,inverse:!0})]})]})})})})})]})},pme=()=>{const e=U("how_it_works"),t=t=>{let{imgSrc:i,title:n,description:s,faqEntry:r}=t;return(0,z.jsxs)("div",{className:"row",children:[(0,z.jsx)("div",{className:"grid2 u-ui-padding-bottom-large@portables",children:(0,z.jsx)(Kl.U,{src:i})}),(0,z.jsxs)("div",{className:"grid10 u-padding-right-large",children:[(0,z.jsx)(xt.Z,{text:n,type:xt.Z.Type.Title}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(xt.Z,{text:s,theme:"muted"}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(_p,{type:r,accessChannel:Be.Si.ProductLink,render:t=>(0,z.jsx)("a",{href:t,className:"how-it-works__link",target:"_blank",rel:"noreferrer",children:e("learn_more")})})]})]})};return(0,z.jsx)("div",{className:"content-block",children:(0,z.jsx)("div",{className:"tear tear--bottom u-background-greyscale-level-7 u-zindex-bump",children:(0,z.jsx)("div",{className:"container",children:(0,z.jsx)("div",{className:"content-block__content u-ui-padding-bottom-x5-large u-ui-padding-horizontal-small",children:(0,z.jsxs)("div",{className:"u-clearfix u-ui-margin-horizontal-small",children:[(0,z.jsx)("div",{className:"content-block__heading u-ui-padding-vertical-x2-large@desktops u-ui-padding-top-x2-large@portables u-ui-padding-bottom-x2-large@portables",children:(0,z.jsx)(xt.Z,{text:e("safe_and_easy.title"),type:xt.Z.Type.Heading})}),(0,z.jsx)("div",{className:"content-block__blocks",children:(0,z.jsxs)("div",{className:"row",children:[(0,z.jsx)("div",{className:"grid6 u-ui-margin-bottom-x2-large@portables",children:t({imgSrc:"".concat(cme,"/safe.svg"),title:e("safe_and_easy.order_protection.title"),description:e("safe_and_easy.order_protection.description"),faqEntry:bp.BuyerProtection})}),(0,z.jsx)("div",{className:"grid6",children:t({imgSrc:"".concat(cme,"/guarantee.svg"),title:e("safe_and_easy.money_back_guarantee.title"),description:e("safe_and_easy.money_back_guarantee.description"),faqEntry:bp.IhaiRefundPolicy})})]})})]})})})})})},gme=[{image:"how-to-sell-step1.png",titleKey:"how_to_sell.step_1.title",descriptionKey:"how_to_sell.step_1.description",learnMoreEntry:bp.UploadingAnItem},{image:"how-to-sell-step2.png",titleKey:"how_to_sell.step_2.title",descriptionKey:"how_to_sell.step_2.description",learnMoreEntry:bp.ShippingSeller},{image:"how-to-sell-step3.png",titleKey:"how_to_sell.step_3.title",descriptionKey:"how_to_sell.step_3.description",learnMoreEntry:bp.VintedWallet}],hme=[{image:"shopping-step1.png",titleKey:"how_to_buy.step_1.title",descriptionKey:"how_to_buy.step_1.description",learnMoreEntry:bp.FindingAnItem},{image:"shopping-step2.png",titleKey:"how_to_buy.step_2.title",descriptionKey:"how_to_buy.step_2.description",learnMoreEntry:bp.BuyingStepByStep},{image:"shopping-step3.png",titleKey:"how_to_buy.step_3.title",descriptionKey:"how_to_buy.step_3.description",learnMoreEntry:bp.ShippingBuyer}],xme=e=>{let{mobile:t,desktop:i}=e;return(0,z.jsxs)(z.Fragment,{children:[!!t&&(0,z.jsx)("div",{className:"u-phones-only",children:t}),!!i&&(0,z.jsx)("div",{className:"u-tablets-up-only",children:i})]})},fme=e=>{let{icon:t,title:i,body:n}=e;const s=If();return(0,z.jsx)("section",{className:"page-section__fact-block",children:(0,z.jsxs)("div",{className:"page-section__content",children:[(0,z.jsx)("div",{className:"page-section__fact-icon",children:(0,z.jsx)(Kl.U,{src:s("images/safety/".concat(t,".svg")),size:Kl.U.Size.Large,alt:""})}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{as:"h4",children:(0,z.jsx)("div",{className:"safety_fact-title-small",children:i})}),(0,z.jsx)(xme,{desktop:(0,z.jsx)(x.Z,{})}),(0,z.jsx)(xt.Z,{html:!0,children:(0,z.jsx)("div",{className:"safety_body",children:n})})]})})},yme=e=>{let{title:t,description:i,children:n}=e;return(0,z.jsxs)("section",{children:[(0,z.jsx)(xt.Z,{as:"h3",children:(0,z.jsx)("div",{className:"safety_facts-block-title",children:t})}),!!i&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xme,{mobile:(0,z.jsx)(x.Z,{}),desktop:(0,z.jsx)(x.Z,{size:x.Z.Size.Large})}),(0,z.jsx)(xt.Z,{children:(0,z.jsx)("div",{className:"safety_body",children:i})})]}),(0,z.jsx)(xme,{mobile:(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),desktop:(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large})}),(0,z.jsx)("div",{className:"page-section__facts",children:(0,z.jsx)(L,{separator:(0,z.jsx)(xme,{mobile:(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),desktop:(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large,orientation:x.Z.Orientation.Vertical})}),children:n})}),(0,z.jsx)(xme,{mobile:(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),desktop:(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large})})]})},vme=e=>{let{showPro:t}=e;const i=U("trust_and_safety"),n=U("trust_and_safety_pro");return(0,z.jsxs)("section",{children:[(0,z.jsxs)(yme,{title:t?n("with_buyer_protection"):i("with_buyer_protection"),description:i(t?"with_buyer_protection_description_pro":"with_buyer_protection_description"),children:[(0,z.jsx)(fme,{icon:"guarantee",title:t?n("money_back_title"):i("money_back_title"),body:t?n("money_back_body"):i("money_back_body")}),(0,z.jsx)(fme,{icon:"safe",title:i("safe_payments_title"),body:i("safe_payments_body")}),(0,z.jsx)(fme,{icon:"support",title:i("support_title"),body:i("support_body")})]}),(0,z.jsxs)(yme,{title:i("applicable_to_all"),children:[(0,z.jsx)(fme,{icon:"anti-spam",title:i("anti_spam_title"),body:i("anti_spam_body")}),(0,z.jsx)(fme,{icon:"secure",title:i("secure_data_title"),body:i("secure_data_body")}),(0,z.jsx)(fme,{icon:"risk",title:i("risk_scoring_title"),body:i("risk_scroring_body")})]})]})},_me=e=>{let{icon:t,title:i,body:n}=e;const s=If();return(0,z.jsxs)("section",{className:"page-section__fact-block",children:[(0,z.jsx)("div",{className:"page-section__fact-icon",children:(0,z.jsx)(Kl.U,{src:s("images/safety/".concat(t,".svg")),size:Kl.U.Size.Large,alt:""})}),(0,z.jsx)(xme,{mobile:(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),desktop:(0,z.jsx)(x.Z,{size:x.Z.Size.Large,orientation:x.Z.Orientation.Vertical})}),(0,z.jsx)(xme,{desktop:(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical})}),(0,z.jsxs)("div",{className:"page-section__content",children:[(0,z.jsx)(xt.Z,{html:!0,children:(0,z.jsx)("div",{className:"safety_fact-title",children:i})}),(0,z.jsx)(xme,{mobile:(0,z.jsx)(x.Z,{}),desktop:(0,z.jsx)(x.Z,{size:x.Z.Size.Large})}),(0,z.jsx)("div",{className:"safety_body",children:n})]})]})},bme=e=>{let{children:t}=e;return(0,z.jsxs)("section",{children:[(0,z.jsx)("div",{className:"page-section__facts",children:(0,z.jsx)(L,{separator:(0,z.jsx)(xme,{mobile:(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),desktop:(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large,orientation:x.Z.Orientation.Vertical})}),children:t})}),(0,z.jsx)(xme,{mobile:(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),desktop:(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large})})]})},jme=()=>{const e=U("trust_and_safety");return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(bme,{children:[(0,z.jsx)(_me,{icon:"anti-spam",title:e("anti_spam_title"),body:e("anti_spam_body")}),(0,z.jsx)(_me,{icon:"safe",title:e("safe_payments_title"),body:e("safe_payments_body")})]}),(0,z.jsxs)(bme,{children:[(0,z.jsx)(_me,{icon:"support",title:e("support_title"),body:e("support_body")}),(0,z.jsx)(_me,{icon:"secure",title:e("secure_data_title"),body:e("secure_data_body")})]})]})},Sme=e=>{let{icon:t,title:i,body:n}=e;const s=If();return(0,z.jsx)("section",{className:"page-section__facts",children:(0,z.jsxs)("div",{className:"page-section__fact-single-block",children:[(0,z.jsx)("div",{className:"page-section__fact-illustration",children:(0,z.jsx)(Kl.U,{src:s("images/safety/illustrations/".concat(t,".svg")),alt:""})}),(0,z.jsx)(xme,{mobile:(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),desktop:(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge,orientation:x.Z.Orientation.Vertical})}),(0,z.jsxs)("div",{className:"page-section__content",children:[(0,z.jsx)(xt.Z,{as:"h3",children:(0,z.jsx)("div",{className:"safety_fact-title",children:i})}),(0,z.jsx)(xme,{mobile:(0,z.jsx)(x.Z,{}),desktop:(0,z.jsx)(x.Z,{size:x.Z.Size.Large})}),(0,z.jsx)(xt.Z,{html:!0,children:(0,z.jsx)("div",{className:"safety_body",children:n})})]})]})})},Zme=e=>{let{showPro:t}=e;const i=U("trust_and_safety"),n=U("trust_and_safety_pro");return(0,z.jsxs)(L,{separator:(0,z.jsx)(xme,{mobile:(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),desktop:(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large})}),children:[(0,z.jsx)(Sme,{icon:"communicate",title:i("communicate_title"),body:i("communicate_body")}),(0,z.jsx)(Sme,{icon:"review",title:i("review_title"),body:i("review_body")}),(0,z.jsx)(Sme,{icon:"verify",title:i("verified_title"),body:i("verified_body")}),(0,z.jsx)(Sme,{icon:"proactive",title:t?n("proactive_title"):i("proactive_title"),body:t?n("proactive_body"):i("proactive_body")})]})},Ime=e=>{let{title:t,body:i,linkText:n}=e;return(0,z.jsx)("section",{className:"page-section__fact-block",children:(0,z.jsxs)("div",{className:"page-section__content",children:[(0,z.jsx)(xt.Z,{as:"h3",children:(0,z.jsx)("div",{className:"safety_fact-title",children:t})}),(0,z.jsx)(xme,{mobile:(0,z.jsx)(x.Z,{}),desktop:(0,z.jsx)(x.Z,{size:x.Z.Size.Large})}),(0,z.jsx)(xt.Z,{html:!0,children:(0,z.jsx)("div",{className:"safety_body",children:i})}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{theme:"primary",html:!0,clickable:!0,children:n})]})})},Cme=e=>{let{showPro:t}=e;const i=U("trust_and_safety"),n=U("trust_and_safety_pro");return(0,z.jsx)("div",{className:"page-section__facts",children:(0,z.jsxs)(L,{separator:(0,z.jsx)(xme,{mobile:(0,z.jsx)(x.Z,{size:x.Z.Size.X3Large}),desktop:(0,z.jsx)(x.Z,{size:x.Z.Size.X5Large,orientation:x.Z.Orientation.Vertical})}),children:[(0,z.jsx)(Ime,{title:t?n("buying_tips_title"):i("buying_tips_title"),body:t?n("buying_tips_body"):i("buying_tips_body"),linkText:t?n("buying_tips"):i("buying_tips")}),(0,z.jsx)(Ime,{title:t?n("selling_tips_title"):i("selling_tips_title"),body:t?n("selling_tips_body"):i("selling_tips_body"),linkText:t?n("selling_tips"):i("selling_tips")})]})})},kme=e=>{let{login:t,photoUrl:i,id:n,averageRating:s,ratingCount:r,isBusiness:a,businessAccountName:o,showChevron:l=!1,testId:c}=e;const d=U();return(0,z.jsxs)(gt.Z,{prefix:(0,z.jsx)(Tp,{src:i,styling:Kl.U.Styling.Circle,size:Kl.U.Size.Large}),title:(0,z.jsx)(kK,{businessAccountName:o,login:t,isBusiness:a,isBody:!0,isBottomLoginHidden:!0,isBadgeHidden:!0,truncate:!0}),url:(0,Me.G0B)(n),type:gt.Z.Type.Navigating,chevron:l,testId:c,children:[(0,z.jsx)(Ox.Z,{aria:{"aria-label":s?d("user.a11y.rating",{rating:s,max_rating:5}):""},value:s,text:r,size:Ox.Z.Size.Small,emptyStateText:d("user.feedback.no_reviews"),testId:c?"".concat(c,"-rating"):void 0}),a&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),(0,z.jsx)(oC.Z,{content:d("business.title"),testId:c?"".concat(c,"-business-badge"):void 0})]})]})},wme=e=>{let{users:t,showBusinessBadges:i=!1,showFollowButtons:n=!1,addColumnOnDesktops:s=!1,testId:r}=e;const{track:a}=vi(),o=e=>(t,i)=>{let{isFollowEvent:n}=t;i.stopPropagation(),i.preventDefault(),a(Mi({userId:e,isFollowEvent:n}))},l=(e,t)=>n?(0,z.jsx)(KQ,{userId:e,isActive:t,size:ic.I.Size.Medium,onFollowToggle:o(e),inline:!0,testId:r?"".concat(r,"-item-follow-button"):r}):null,c=y()("user-grid",{wide:s});return(0,z.jsx)("div",{className:c,children:t.map((e=>{const{id:t,login:n,businessAccount:s,feedbackReputation:a,isBusiness:o,photo:c,isFavourite:d}=e;return(0,z.jsxs)("div",{className:"user-grid__item",children:[(0,z.jsx)(kme,{login:n,businessAccountName:null==s?void 0:s.name,photoUrl:null==c?void 0:c.url,id:t,averageRating:$e(a),ratingCount:e.feedbackCount,isBusiness:i&&o,testId:r?"".concat(r,"-item"):r}),l(t,d)]},t)}))})},Pme=()=>{const e=(0,p.v9)(K),t=(0,p.v9)(X),i=(0,p.v9)(Wt("resend_email_confirmation_api")),[n,s]=(0,m.useState)(Ne.Idle),r=U("notification_settings.email_notifications"),a=E(),o=y()("u-flexbox","u-align-items-center",{"u-flex-wrap":a.phones}),l=XY(),c=(0,ys.Iq)(Me.HFI,{ref_url:l});return(0,z.jsxs)(z.Fragment,{children:[n!==Ne.Success?null:(0,z.jsx)(gt.Z,{prefix:(0,z.jsx)(ht.Z,{name:"check-circle-filled",size:ht.Z.Size.Medium,color:uI.S.GreyscaleLevel7}),body:r("confirmation.success_message",{email:e}),theme:"success"}),(0,z.jsx)(yt.Z,{text:r("label")}),(0,z.jsx)(gt.Z,{testId:"notification-settings-email-confirmation",title:r("confirmation.title",{email:e}),body:(0,z.jsxs)("div",{className:o,children:[(0,z.jsxs)("div",{className:"u-flex-grow",children:[(0,z.jsx)(xt.Z,{children:r("confirmation.description")}),(0,z.jsx)(x.Z,{})]}),(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsx)(ic.I,{size:ic.I.Size.Medium,text:r("confirmation.change"),url:c}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(ic.I,{size:ic.I.Size.Medium,text:r("confirmation.confirm"),onClick:async n=>{t&&e&&i&&(n.preventDefault(),s(Ne.Pending),await(0,Fe.AH9)({userId:t,email:e}),s(Ne.Success))},isLoading:n===Ne.Pending,disabled:n!==Ne.Idle,url:(0,Me.AH6)(l)})]})]})})]})},zme=e=>{let{setting:t,onChange:i,testId:n}=e;const[s,r]=(0,m.useState)(t.enabled),[a,o]=(0,m.useState)(!1),l=(0,m.useCallback)((async e=>{const n=e.target.checked;r(n),o(!0),await i({...t,enabled:n})||r(!n),o(!1)}),[t,i]);return(0,z.jsx)(gt.Z,{title:t.title,body:t.description,suffix:(0,z.jsx)(lJ.Z,{name:t.id,checked:s,disabled:a,onChange:l,testId:n})})},Tme=()=>{const e=U("notification_settings.email_notifications"),t=(0,p.v9)(X),{sections:i,isLoading:n,error:s}=function(){const e=(0,p.v9)(X),{fetch:t,transformedData:i,...n}=ih(Fe.DZN,$h);return(0,m.useEffect)((()=>{e&&t(e)}),[t,e]),{...n,sections:i}}(),[r,a]=(0,m.useState)(!0),[o,l]=(0,m.useState)();(0,m.useEffect)((()=>{i&&a(i.filter((e=>e.isGlobalSection)).flatMap((e=>e.settings)).some((e=>e.isGlobalEmailSwitch&&e.enabled)))}),[i]);const c=(0,m.useCallback)((async e=>{if(!t)return!1;const i=await(0,Fe.lUE)(t,{[e.id]:e.enabled});return"errors"in i?(l(i),!1):(e.isGlobalEmailSwitch&&a(e.enabled),!0)}),[t]);if(n)return(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center",children:(0,z.jsx)(Dp.Z,{testId:"notification-settings-loader",size:Dp.Z.Size.Large})});const d=o||s;return(0,z.jsxs)(z.Fragment,{children:[d&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(AJ,{error:d}),(0,z.jsx)(x.Z,{})]}),i?i.map((t=>(0,z.jsxs)(m.Fragment,{children:[t.title&&(0,z.jsx)(yt.Z,{text:t.title}),(0,z.jsx)("fieldset",{disabled:!t.isGlobalSection&&!r,children:(0,z.jsx)(L,{separator:(0,z.jsx)(h.Z,{}),children:t.settings.map((t=>(0,z.jsxs)(m.Fragment,{children:[(0,z.jsx)(zme,{testId:t.isGlobalEmailSwitch?"master-email-toggle":void 0,setting:t,onChange:c}),t.isGlobalEmailSwitch&&!r&&(0,z.jsx)(ah.Z,{testId:"notifications-disclaimer",text:e("disclaimer")})]},t.id)))})}),(0,z.jsx)(x.Z,{})]},t.id))):null]})},Fme=()=>{const e=Boolean((0,p.v9)(ue));return(0,z.jsx)("div",{className:"body-content__content",children:e?(0,z.jsx)(Tme,{}):(0,z.jsx)(Pme,{})})};function Nme(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class Lme extends m.Component{constructor(){super(...arguments),Nme(this,"state",{value:this.props.value,isLoading:!1}),Nme(this,"handleValueToggle",(async()=>{const{value:e}=this.state,{onToggle:t}=this.props;this.setState({isLoading:!0});const i=await t(!e);this.setState((e=>({value:"errors"in i?e.value:!e.value,isLoading:!1})))}))}render(){const{value:e,isLoading:t}=this.state,{name:i,text:n}=this.props;return(0,z.jsx)(gt.Z,{body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:n}),suffix:(0,z.jsx)(lJ.Z,{checked:e,onChange:this.handleValueToggle,name:i,disabled:t})})}}const Eme=Lme,Ome=()=>{const e=(0,p.v9)(W),t=(0,p.v9)(Wt("braze_sdk_enabled")),i=(0,p.v9)(Wt("user_allow_personalization"));let n=(0,p.v9)(Wt("user_data_export"));const s=(0,p.v9)(Wt("frontend_user_data_export"));return n=n&&s,e?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{text:(0,z.jsx)(vt.Z,{id:"privacy_settings.title"}),type:xt.Z.Type.Subtitle})}),(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[(0,z.jsx)(Eme,{text:(0,z.jsx)(vt.Z,{id:"privacy_settings.picture_use"}),name:"picture_use",value:e.is_publish_photos_agreed,onToggle:e=>(0,Fe.q1h)({isPublishPhotosAgreed:e})}),(0,z.jsx)(Eme,{text:(0,z.jsx)(vt.Z,{id:"privacy_settings.favourite_notifications"}),name:"favourite_notifications",value:!!e.allow_my_favourite_notifications,onToggle:e=>(0,Fe.q1h)({allowMyFavouriteNotifications:e})}),t&&(0,z.jsx)(Eme,{text:(0,z.jsx)(vt.Z,{id:"privacy_settings.third_party_tracking"}),name:"third_party_tracking",value:e.third_party_tracking,onToggle:e=>(e?(0,NI.rX)():(0,NI.gI)(),(0,Fe.q1h)({thirdPartyTracking:e}))}),i&&(0,z.jsx)(Eme,{text:(0,z.jsx)(vt.Z,{id:"privacy_settings.user_personalization"}),name:"user-personalization",value:!!e.allow_personalization,onToggle:e=>(0,Fe.q1h)({allowPersonalization:e})}),n&&(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,title:(0,z.jsx)(vt.Z,{id:"privacy_settings.data_export.title"}),body:(0,z.jsx)(vt.Z,{id:"privacy_settings.data_export.description"}),url:Me.gg2,chevron:!0})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})]}):null},Rme=e=>{const{id:t,title:i,code:n,title_local:s,title_short:r,current:a}=e;return{id:t,title:i,code:n,current:a,titleLocal:s,titleShort:r}},Dme=e=>e.map(Rme),Ame=()=>{const e=(0,p.I0)(),t=U("profile_settings.language"),i=(0,p.v9)(hW),n=(0,p.v9)(SW),[s,r]=(0,m.useState)([]);return(0,m.useEffect)((()=>{function t(t){e(JE.setLanguageCode({languageCode:t}))}i?async function(e){var i;const n=await(0,Fe.ujw)(e);if("errors"in n)return;r(Dme(n.languages));const s=n.languages.find((e=>e.current));t((null==s?void 0:s.code)||(null===(i=n.primary_language)||void 0===i?void 0:i.code)||n.languages[0].code)}(i):async function(){const e=await(0,Fe.Vbs)();if("errors"in e)return;r(Dme(e.languages));const i=e.languages.find((e=>e.current));i&&t(i.code)}()}),[e,i]),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,children:(0,z.jsx)(yb.R,{name:"language",styling:yb.R.Styling.Wide,title:t("title"),value:n,options:s.map((e=>({value:e.code,label:"".concat(e.titleLocal," (").concat(e.title,")")}))),onChange:function(t){e(JE.setLanguageCode({languageCode:t.target.value}))}})})},Mme=()=>{const e=U("profile_settings.location.country"),t=(0,p.I0)(),i=(0,p.v9)(oW),n=(0,p.v9)(hW),s=(0,p.v9)((e=>((e,t)=>null===t?null:aW(e).countries.byId[t]||null)(e,n)));return(0,m.useEffect)((()=>{t(VM())}),[t]),(0,z.jsx)(YJ,{name:"country-select",inputTitle:e("title"),placeholder:e("placeholder"),data:i,onSave:function(e){e&&(null==s?void 0:s.id)!==e.id&&t(mW({id:e.id}))},selectedValue:s})},Ume=()=>{const e=U("profile_settings.location.city"),t=E(),i=(0,p.I0)(),n=(0,p.v9)(hW),s=(0,p.v9)(xW),r=(0,p.v9)(fW),a=(0,p.v9)(lW),[o,l]=(0,m.useState)(s),[c,d]=(0,m.useState)(!0),u=(0,v.isNumber)(n);function g(e){(0,v.throttle)((()=>function(e){n&&i(GM({countryId:n,searchText:e}))}(e)),200)()}(0,m.useEffect)((()=>{l(s)}),[s]);const h=(e,n)=>()=>{n.setIsSaveEnabled(!0),t.phones?l(e.id):(n.closeDropdown(),i(pW({id:e.id})))},x=()=>{d(!0),l(s),g()};return(0,z.jsx)(gI,{name:"city-select",title:e("title"),placeholder:e(u?"placeholder":"no_country_placeholder"),value:r,render:function(t){return(0,z.jsxs)(z.Fragment,{children:[c&&(0,z.jsx)(yt.Z,{type:yt.Z.Type.Leading,text:e("popular_cities_label")}),(0,z.jsx)(kp,{children:a.map((e=>(0,z.jsx)(gt.Z,{onClick:h(e,t),title:e.title,suffix:(0,z.jsx)(qx.J,{name:"".concat(e.id,"-radio"),checked:e.id===o,value:e.id})},e.id)))})]})},disabled:!u,onChange:function(e){if(!u)return;const{value:t}=e.currentTarget;d(!t),g(t)},onCancel:x,onClose:x,onSave:function(){o&&(i(pW({id:o})),x())}})},Bme=()=>{const e=U("profile_settings.location.city_visibility"),t=(0,p.I0)(),i=(0,p.v9)(yW);return(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,title:e("title"),suffix:(0,z.jsx)(lJ.Z,{name:"city-visibility-toggle",onClick:function(){t(JE.setIsCityVisible({isVisible:!i}))},checked:i})})},qme=()=>(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{text:(0,z.jsx)(wx,{id:"profile_settings.location.title"})}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,children:(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[(0,z.jsx)(Mme,{}),(0,z.jsx)(Ume,{}),(0,z.jsx)(Bme,{})]})})]}),Vme=()=>{const e=U("profile_settings.photo"),t=(0,p.I0)(),i=(0,p.v9)(oe),[n,s]=(0,m.useState)(null),[r,a]=(0,m.useState)(Ne.Idle),[o,l]=(0,m.useState)(null),c=(0,m.useRef)(null);function d(){l(arguments.length>0&&void 0!==arguments[0]?arguments[0]:""),s(null),a(Ne.Failure)}function u(){const{current:e}=c;e&&e.click()}return(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,body:(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center u-justify-content-between",children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:e("label")}),function(){const t=Je(n||i);return(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center",children:[(0,z.jsx)("div",{className:"u-ui-padding-right-large",children:(0,z.jsx)(Tp,{src:t,size:Kl.U.Size.XLarge,styling:Kl.U.Styling.Circle,testId:"profile-settings-photo"})}),(0,z.jsx)(ic.I,{size:ic.I.Size.Small,isLoading:r===Ne.Pending,onClick:u,text:e("choose_button"),testId:"profile-settings-choose-photo-button"})]})}(),(0,z.jsx)("input",{ref:c,onChange:function(i){var n;if(null===(n=i.target.files)||void 0===n||!n.length)return;const r=i.target.files[0];r.size>sp?d(e("errors.file_size",{file_size:rp})):async function(e){a(Ne.Pending);const i=cA(e,"user"),n=await(0,Fe.CbZ)(i);"errors"in n?d():(s(n),a(Ne.Success),n.temp_uuid&&t(JE.setPhotoTempUuid({photoTempUuid:n.temp_uuid})))}(r)},hidden:!0,type:"file",accept:np.Images})]}),validation:o})},Hme=()=>{const e=(0,p.I0)(),t=U("profile_settings.about"),i=(0,p.v9)(vW);return(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,children:(0,z.jsx)(Gw,{name:"about",title:t("title"),styling:"wide",rows:5,placeholder:t("placeholder"),value:i,onChange:function(t){e(JE.setAbout({about:t.target.value}))}})})},Gme=()=>{const e=U("profile_settings.username"),t=(0,p.I0)(),i=(0,p.v9)(ZW);return(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,children:(0,z.jsx)(gh,{name:"username",title:e("title"),styling:"wide",placeholder:e("placeholder"),value:i,onChange:e=>{t(JE.setUsername({username:e.target.value}))}})})},Wme=()=>{const e=U("profile_settings.contact_email"),t=(0,p.I0)(),i=(0,p.v9)(IW);return(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,children:(0,z.jsx)(gh,{name:"contactEmail",title:e("title"),styling:"wide",placeholder:e("placeholder"),value:i,onChange:e=>{t(JE.setContactEmail({contactEmail:e.target.value}))}})})},Xme=()=>{const e=U("profile_settings.contact_number"),t=(0,p.I0)(),i=(0,p.v9)(CW);return(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,children:(0,z.jsx)(gh,{name:"contactNumber",title:e("title"),styling:"wide",placeholder:e("placeholder"),value:i,onChange:e=>{t(JE.setContactNumber({contactNumber:e.target.value}))}})})},Yme=()=>{const{track:e}=vi(),t=(0,p.I0)(),i=U("profile_settings.business_addresses"),n=(0,p.v9)(Que),s=(0,p.v9)($ue),r=(0,p.v9)(Yue),a=(0,p.v9)(Se),[o,l]=(0,m.useState)([]);function c(){t(tO.toggleBusinessAddressModal())}(0,m.useEffect)((()=>{r&&e(Wi({screen:$t.EditBusinessAddress}))}),[e,r]);const d={name:{title:i("business_address.form_name.title"),placeholder:i("business_address.form_name.placeholder")},buttons:{continue:i("buttons.submit")}},u=[{field:Xg.GL.Country,disabled:!0},{field:Xg.GL.Name,disabled:!0},{field:Xg.GL.Line1,required:!0},{field:Xg.GL.Line2},{field:Xg.GL.PostalCode,required:!0},{field:Xg.GL.City,required:!0}];return(0,z.jsxs)(cp.Z,{show:r,testId:"address-modal",children:[(0,z.jsx)(Pm.Z,{theme:"transparent",body:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),i("business_address.title"),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium})]})}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(Sb,{isSubmitPending:!1,defaultValues:n,onSubmit:async function(e,i){if(!i)return;const n=await(0,Fe.Ld0)({businessAccountId:a,returnAddress:s,businessAddress:e});"errors"in n?l(n.errors):(t(tO.setBusinessAddress(e)),c())},onCancel:c,errors:o,translations:d,fieldConfiguration:u})]})},Kme=()=>{const{track:e}=vi(),t=(0,p.I0)(),i=(0,p.v9)(Que),n=(0,p.v9)($ue),s=(0,p.v9)(Kue),r=(0,p.v9)(Se),a=(0,m.useMemo)((()=>n||(i?{countryId:i.countryId}:{})),[n,i]),[o,l]=(0,m.useState)([]),c=!!n,d=U("profile_settings.business_addresses");function u(){t(tO.toggleReturnAddressModal())}(0,m.useEffect)((()=>{s&&e(Wi({screen:$t.EditReturnAddress}))}),[e,s]);const g={name:{title:d("return_address.form_name.title"),placeholder:d("return_address.form_name.placeholder")},buttons:{continue:d("buttons.submit")}},f=[{field:Xg.GL.Country,disabled:!0},{field:Xg.GL.Name,required:!0},{field:Xg.GL.Line1,required:!0},{field:Xg.GL.Line2},{field:Xg.GL.PostalCode,required:!0},{field:Xg.GL.City,required:!0}];return(0,z.jsxs)(cp.Z,{show:s,testId:"address-modal",children:[(0,z.jsx)(Pm.Z,{theme:"transparent",body:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),d("return_address.title"),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium})]}),right:c&&(0,z.jsx)(ic.I,{styling:ic.I.Styling.Flat,onClick:u,deprecatedIconName:"x"})}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(Sb,{isSubmitPending:!1,defaultValues:a,onSubmit:async function(e,n){if(!n)return;const s=await(0,Fe.Ld0)({businessAccountId:r,returnAddress:e,businessAddress:i});"errors"in s?l(s.errors):(t(tO.setReturnAddress(e)),t(tO.setReturnAddressErrorShown({isReturnAddressErrorShown:!1})),u())},onCancel:u,onDelete:async function(){await(0,Fe.Ld0)({businessAccountId:r,businessAddress:i,returnAddress:null}),t(tO.toggleUsingTheSameAddress()),t(tO.setReturnAddress(null)),u()},errors:o,translations:g,fieldConfiguration:f,isDeleteVisible:c})]})};var Jme;!function(e){e.BusinessAddress="businessAddress",e.ReturnAddress="returnAddress",e.UseSameAddress="useSameAddress"}(Jme||(Jme={}));const Qme=()=>{const e=(0,p.I0)(),t=(0,p.v9)(Jue),i=(0,p.v9)(tme),n=(0,p.v9)(Que),s=(0,p.v9)($ue),r=U("profile_settings.business_addresses");function a(){e(tO.toggleReturnAddressModal())}function o(t){return()=>{switch(t){case Jme.BusinessAddress:e(tO.toggleBusinessAddressModal());break;case Jme.ReturnAddress:a()}}}function l(e,t){return(0,z.jsx)(A_,{address:e,styling:gt.Z.Styling.Wide,type:gt.Z.Type.Navigating,suffix:(0,z.jsx)(ht.Z,{name:"pencil",color:ht.Z.Color.GreyscaleLevel3}),onClick:o(t)})}return(0,m.useEffect)((()=>{e(NW())}),[e]),(0,z.jsxs)(z.Fragment,{children:[n?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{styling:yt.Z.Styling.Wide,text:r("business_address.title")}),l(n,Jme.BusinessAddress),(0,z.jsx)(Yme,{})]}):null,s?null:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,title:r("use_same_address"),suffix:(0,z.jsx)(BZ.F,{name:Jme.UseSameAddress,onChange:function(){e(tO.toggleUsingTheSameAddress())},checked:t})}),t||!s?null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{styling:yt.Z.Styling.Wide,type:yt.Z.Type.Leading,text:r("return_address.title")}),l(s,Jme.ReturnAddress),(0,z.jsx)(Kme,{})]}),t||s?null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,type:gt.Z.Type.Navigating,title:r("return_address.add_return_address"),suffix:(0,z.jsx)(ht.Z,{name:"plus"}),onClick:a,validation:i&&r("return_address.add_return_address_error_required"),clickable:!0}),(0,z.jsx)(Kme,{})]}),(0,z.jsx)(ah.Z,{text:r("note")})]})};var $me;!function(e){e.FullName="businessRepresentative.fullName",e.Birthday="businessRepresentative.birthday",e.Nationality="businessRepresentative.nationality",e.Country="businessRepresentative.country"}($me||($me={}));const epe=()=>{const e=U("profile_settings.business_representative"),t=(0,p.v9)(W),i=(0,p.v9)(je);return t&&i?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{styling:yt.Z.Styling.Wide,text:e("title")}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,children:(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,children:(0,z.jsx)(gh,{name:$me.FullName,title:e("fields.full_name.title"),styling:"wide",value:t.real_name,disabled:!0})}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,children:(0,z.jsx)(gh,{name:$me.Birthday,title:e("fields.birthday.title"),styling:"wide",value:t.birthday,disabled:!0})}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,children:(0,z.jsx)(gh,{name:$me.Nationality,title:e("fields.nationality.title"),styling:"wide",value:i.nationality_title,disabled:!0})}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,children:(0,z.jsx)(gh,{name:$me.Country,title:e("fields.country.title"),styling:"wide",value:i.country_title,disabled:!0})})]})})]}):null};var tpe;!function(e){e.LegalName="businessDetails.legalName",e.LegalCode="businessDetails.legalCode",e.EntityType="businessDetails.entityType",e.Vat="businessDetails.vat",e.IsVatDisabled="businessDetails.isVatDisabled"}(tpe||(tpe={}));const ipe=()=>{const e=(0,p.I0)(),t=U("profile_settings.business_details"),i=(0,p.v9)(je),n=(0,p.v9)(kW),[s,r]=(0,m.useState)(!(null!=i&&i.vat));return i?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{styling:yt.Z.Styling.Wide,text:t("title")}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,children:(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,children:(0,z.jsx)(gh,{name:tpe.LegalName,title:t("fields.legal_name.title"),styling:"wide",value:i.legal_name,disabled:!0})}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,children:(0,z.jsx)(gh,{name:tpe.LegalCode,title:t("fields.legal_code.title"),styling:"wide",value:i.legal_code,disabled:!0})}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,children:(0,z.jsx)(gh,{name:tpe.EntityType,title:t("fields.entity_type.title"),styling:"wide",value:i.entity_type_title,disabled:!0})}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,children:(0,z.jsx)(gh,{name:tpe.Vat,styling:"wide",title:t("fields.vat.title"),placeholder:t("fields.vat.placeholder"),onChange:function(t){e(JE.setVat({vat:t.target.value}))},value:n,disabled:s,validation:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(BZ.F,{name:tpe.IsVatDisabled,text:t("fields.check.title"),checked:s,onChange:function(){r((t=>(t||e(JE.setVat({vat:null})),!t)))}})]})})})]})})]}):null},npe=()=>{const e=E(),t=U(),[i,n]=(0,m.useState)(!0),s=()=>{const i=y()({"u-flexbox":e.tabletsUp,"u-ui-padding-horizontal-large u-ui-padding-bottom-large":e.phones}),s=(0,z.jsx)(ic.I,{onClick:()=>{n(!1),(0,Bn.D$)(Mg,"true")},size:ic.I.Size.Medium,text:t("profile_settings.dark_mode_banner.actions.close")}),r=(0,z.jsx)(ic.I,{onClick:()=>{(0,Bn.D$)(Mg,"true")},size:ic.I.Size.Medium,text:t("profile_settings.dark_mode_banner.actions.cta"),styling:ic.I.Styling.Filled,url:Me.dm4});return(0,z.jsxs)("div",{className:i,children:[e.phones?r:s,(0,z.jsx)(x.Z,{}),e.phones?s:r]})};return i?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{prefix:(0,z.jsx)(ht.Z,{size:ht.Z.Size.Large,name:"moon-star"}),title:t("profile_settings.dark_mode_banner.title"),body:t("profile_settings.dark_mode_banner.subtitle"),suffix:e.phones?null:s()}),e.phones&&s()]}):null},spe=()=>{const e=(0,p.I0)(),t=U("profile_settings"),i=(0,p.v9)(bW),n=(0,p.v9)(jW),s=(0,p.v9)(Ze),r=(0,p.v9)(eme),a=BJ(),o=E();return(0,m.useEffect)((()=>{e(dW())}),[e]),(0,z.jsxs)(z.Fragment,{children:[i===Ne.Failure&&n&&(0,z.jsx)(AJ,{error:n}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Tight,children:[!a||o.desktops?null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(npe,{}),(0,z.jsx)(h.Z,{})]}),(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[(0,z.jsx)(Vme,{}),s&&(0,z.jsx)(Gme,{}),s&&(0,z.jsx)(Wme,{}),s&&(0,z.jsx)(Xme,{}),(0,z.jsx)(Hme,{})]})]}),!s&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{}),(0,z.jsx)(qme,{})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(Ame,{}),s&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Qme,{}),(0,z.jsx)(epe,{}),(0,z.jsx)(ipe,{})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,theme:"transparent",suffix:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,size:ic.I.Size.Medium,text:t("save.title"),onClick:function(){e(r?uW():tO.setReturnAddressErrorShown({isReturnAddressErrorShown:!0}))},disabled:i===Ne.Pending,testId:"profile-settings--save-button"})})]})},rpe=()=>{const e=E();return BJ()&&e.desktops?(0,z.jsx)("div",{className:"u-ui-margin-left-x-large u-ui-margin-right-regular",children:(0,z.jsx)(g.Z,{children:(0,z.jsx)(npe,{})})}):null},ape=e=>{let{id:t,localize:i}=e;const{fetch:n,data:s,isLoading:r,error:a}=ih(Fe.GAF,rx);return(0,m.useEffect)((()=>{n({id:t,localize:i})}),[n,t,i]),{data:s,isLoading:r,error:a}},ope=()=>{const e=U("advertising"),t="".concat(Be.cJ,"/landing/advertising/hero.svg");function i(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,width:xt.Z.Width.Parent,children:(0,z.jsx)("span",{className:y()("c-text--responsive-large-heading",t&&"c-text--inverse"),children:e("title")})}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(xt.Z,{width:xt.Z.Width.Parent,children:(0,z.jsx)("span",{className:y()(t&&"c-text--inverse"),children:(0,z.jsx)("span",{className:"advertising__hero--description",children:e("description")})})})]})}return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"advertising__hero",children:(0,z.jsxs)("div",{className:"container",children:[(0,z.jsx)("div",{className:"u-desktops-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.X5Large})}),(0,z.jsx)("div",{className:"u-mobiles-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.Large})}),(0,z.jsxs)("div",{className:"advertising__hero--container",children:[(0,z.jsx)("div",{className:"u-desktops-only",children:i(!0)}),(0,z.jsx)("div",{className:"advertising__hero--icon",children:(0,z.jsx)(Kl.U,{src:t,alt:""})})]}),(0,z.jsx)("div",{className:"u-desktops-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.X5Large})}),(0,z.jsx)("div",{className:"u-mobiles-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large})})]})}),(0,z.jsx)("div",{className:"u-mobiles-only",children:(0,z.jsxs)("div",{className:"container",children:[(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)("div",{className:"advertising__mobile-hero-text",children:i()}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large})]})})]})},lpe=()=>{const e=U("advertising.form");return(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Wide,children:[(0,z.jsx)(xt.Z,{text:e("title"),type:xt.Z.Type.Heading}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:e("subtitle"),theme:"muted"})]})};let cpe;!function(e){e.FirstName="firstName",e.LastName="lastName",e.Email="email",e.Phone="phoneNr",e.CompanyType="companyType",e.CompanyName="companyName",e.EstimatedBudget="estimatedBudget",e.TargetCountry="targetCountry",e.DealType="dealType",e.Comment="comment"}(cpe||(cpe={}));const dpe=e=>{var t;let{name:i,title:n,placeholder:s,required:r}=e;const{register:a,formState:o}=(0,th.Gc)(),l=U("advertising.form.validation");return(0,z.jsx)(fb.M,{...a(i,{required:r,validate:{email:e=>i!==cpe.Email||DK(String(e))}}),title:n,placeholder:s,styling:fb.M.Styling.Wide,validation:o.errors[i]&&(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,theme:"warning",children:"required"===(null===(t=o.errors[i])||void 0===t?void 0:t.type)?l("required"):l("invalid_email")}),uncontrolled:!0})},upe=e=>{let{title:t,children:i,...n}=e;function s(){return(0,z.jsx)("div",{className:"advertising__form-section--badge-container",children:(0,z.jsx)(oC.Z,{content:(0,z.jsx)("span",{className:"advertising__form-section--badge-increment"}),theme:"primary"})})}function r(e){return(0,z.jsx)("div",{className:"advertising__form-section--chevron",children:(0,z.jsx)(Wy.Z,{name:e?I3.Z:C3.Z,color:uI.S.GreyscaleLevel4})})}return(0,z.jsx)(PZ.Z,{styling:PZ.Z.Styling.TightExperimental,expandedPrefix:s(),closedPrefix:s(),closedSuffix:r(!1),expandedSuffix:r(!0),title:(0,z.jsx)("div",{className:"advertising__form-section--title",children:t}),content:(0,z.jsx)("div",{className:"advertising__form-section--content",children:(0,z.jsx)(L,{separator:(0,z.jsx)(h.Z,{}),children:i})}),...n})},mpe=()=>{const[e,t]=(0,m.useState)(!0),i=U("advertising.form.contact_information"),{formState:n}=(0,th.Gc)();return(0,m.useEffect)((()=>{(n.errors[cpe.FirstName]||n.errors[cpe.LastName]||n.errors[cpe.Email]||n.errors[cpe.Phone])&&t(!0)}),[n]),(0,z.jsxs)(upe,{title:i("title"),isExpanded:e,onToggle:t,children:[(0,z.jsx)(dpe,{name:cpe.FirstName,title:i("fields.first_name.title"),placeholder:i("fields.first_name.placeholder"),required:!0}),(0,z.jsx)(dpe,{name:cpe.LastName,title:i("fields.last_name.title"),placeholder:i("fields.last_name.placeholder"),required:!0}),(0,z.jsx)(dpe,{name:cpe.Email,title:i("fields.email.title"),placeholder:i("fields.email.placeholder"),required:!0}),(0,z.jsx)(dpe,{name:cpe.Phone,title:i("fields.phone_nr.title"),placeholder:i("fields.phone_nr.placeholder")})]})},ppe=e=>{let{name:t,onSave:i=v.noop,data:n,required:s,inputTitle:r,placeholder:a}=e;const o=U("advertising.form.validation"),{register:l,watch:c,setValue:d,formState:u}=(0,th.Gc)(),m=c(t),{name:p}=l(t,{required:s});return(0,z.jsx)(YJ,{name:p,data:n,inputTitle:r,placeholder:a,selectedValue:n.find((e=>{let{id:t}=e;return t===m})),onSave:e=>{d(t,e?String(e.id):void 0,{shouldValidate:!0}),i()},validation:u.errors[t]&&(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,theme:"warning",children:o("required")})})},gpe=()=>{const[e,t]=(0,m.useState)(!0),i=U("advertising.form.company_information"),{formState:n}=(0,th.Gc)(),s=(0,m.useMemo)((()=>[{id:"Agency",title:i("fields.company_type.options.agency")},{id:"Brand",title:i("fields.company_type.options.brand")},{id:"Advertiser",title:i("fields.company_type.options.advertiser")},{id:"Network",title:i("fields.company_type.options.network")}]),[i]);return(0,m.useEffect)((()=>{(n.errors[cpe.CompanyType]||n.errors[cpe.CompanyName])&&t(!0)}),[n]),(0,z.jsxs)(upe,{title:i("title"),isExpanded:e,onToggle:t,children:[(0,z.jsx)(ppe,{name:cpe.CompanyType,inputTitle:i("fields.company_type.title"),data:s,placeholder:i("fields.company_type.placeholder"),required:!0}),(0,z.jsx)(dpe,{name:cpe.CompanyName,title:i("fields.company_name.title"),placeholder:i("fields.company_name.placeholder"),required:!0})]})},hpe=e=>{let{name:t,title:i,placeholder:n,required:s}=e;const{register:r,watch:a,formState:o}=(0,th.Gc)(),l=U("advertising.form.validation"),c=a(t);return(0,z.jsx)(PQ.R,{...r(t,{required:s}),title:i,placeholder:n,styling:PQ.R.Styling.Wide,uncontrolled:!0,maxLength:300,validation:o.errors[t]?(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,theme:"warning",children:l("required")}):(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,theme:"muted",children:l("symbols_left",{count:Math.max(300-((null==c?void 0:c.length)||0),0)})})})},xpe=e=>{let{name:t,title:i,placeholder:n,required:s,items:r}=e;const a=U("advertising.form.validation"),{register:o,watch:l,setValue:c,formState:d}=(0,th.Gc)(),u=l(t)||[],{name:m}=o(t,{required:s});function p(e){return i=>{let n=u;n=n.includes(String(i.id))?u.filter((e=>e!==i.id)):[...u,String(i.id)],c(t,n,{shouldValidate:!0}),e.setIsSaveEnabled(n.length>0)}}return(0,z.jsx)(gI,{name:"".concat(m,"_dropdown"),title:i,testId:"advertising-multi-select",validation:d.errors[t]&&(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,theme:"warning",children:a("required")}),value:r.filter((e=>u.includes(String(e.id)))).map((e=>e.title)).join(", "),placeholder:n,readOnly:!0,isSaveButtonShown:!0,render:function(e){return(0,z.jsx)(T3,{name:m,items:r,isMultiSelect:!0,onItemClick:p(e),selected:r.filter((e=>u.includes(String(e.id)))).map((e=>e.value))})}})},fpe=()=>{const[e,t]=(0,m.useState)(!0),i=(0,p.I0)(),n=U("advertising.form.additional_information"),s=(0,p.v9)(oW),{formState:r}=(0,th.Gc)();(0,m.useEffect)((()=>{i(VM())}),[i]);const a=(0,m.useMemo)((()=>[{id:"5k-10k",title:n("fields.estimated_budget.options.five_to_ten")},{id:"10k-30k",title:n("fields.estimated_budget.options.ten_to_thirty")},{id:"30k-50k",title:n("fields.estimated_budget.options.thirty_to_fifty")},{id:"50k-100k",title:n("fields.estimated_budget.options.fifty_to_hundred")},{id:"100k-500k",title:n("fields.estimated_budget.options.hundred_to_five_hundred")},{id:"500k+",title:n("fields.estimated_budget.options.over_five_hundred")}]),[n]),o=(0,m.useMemo)((()=>[...s.map((e=>({id:e.isoCode,title:e.title,value:e.title}))),{id:"Other",title:n("fields.target_country.options.other"),value:"Other"}]),[s,n]),l=(0,m.useMemo)((()=>[{id:"Programmatic Guaranteed (via DV360)",title:n("fields.deal_type.options.programmatic_guaranteed_dv360")},{id:"Programmatic Guaranteed (via other DSPs like TTD, Adform, etc.)",title:n("fields.deal_type.options.programmatic_guaranteed_other_dsp")},{id:"Preferred Deal (via DV360, TTD, Adform, etc.)",title:n("fields.deal_type.options.preferred_deal")},{id:"I/O (Insertion Order) direct Sold campaign - No Programmatic",title:n("fields.deal_type.options.insertion_order")}]),[n]);return(0,m.useEffect)((()=>{(r.errors[cpe.EstimatedBudget]||r.errors[cpe.TargetCountry]||r.errors[cpe.DealType]||r.errors[cpe.Comment])&&t(!0)}),[r]),(0,z.jsxs)(upe,{title:n("title"),isExpanded:e,onToggle:t,children:[(0,z.jsx)(ppe,{name:cpe.EstimatedBudget,inputTitle:n("fields.estimated_budget.title"),data:a,placeholder:n("fields.estimated_budget.placeholder"),required:!0}),(0,z.jsx)(xpe,{name:cpe.TargetCountry,title:n("fields.target_country.title"),items:o,placeholder:n("fields.target_country.placeholder"),required:!0}),(0,z.jsx)(ppe,{name:cpe.DealType,inputTitle:n("fields.deal_type.title"),data:l,placeholder:n("fields.deal_type.placeholder"),required:!0}),(0,z.jsx)(hpe,{name:cpe.Comment,title:n("fields.comment.title"),placeholder:n("fields.comment.placeholder"),required:!0})]})},ype=e=>{let{isLoading:t}=e;const i=U("advertising.form.submit"),n={"policy-link":e=>(0,z.jsx)("a",{href:Me.hOY,target:"_blank",rel:"noreferrer",children:e})};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsxs)("div",{className:"u-mobiles-only",children:[(0,z.jsx)(xt.Z,{text:i("disclaimer",n),type:xt.Z.Type.Caption}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(ic.I,{type:ic.I.Type.Submit,styling:ic.I.Styling.Filled,disabled:t,isLoading:t,children:i("action")})]}),(0,z.jsx)("div",{className:"u-desktops-only",children:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,body:(0,z.jsx)(xt.Z,{text:i("disclaimer",n),type:xt.Z.Type.Caption}),suffix:(0,z.jsx)(ic.I,{type:ic.I.Type.Submit,styling:ic.I.Styling.Filled,disabled:t,isLoading:t,children:i("action")})})})]})},vpe=e=>{let{closeOnOverlay:t=!0,handleClose:i,...n}=e;const s=Ql(),r=U("advertising.form.success_message"),a="".concat(Be.cJ,"/landing/advertising/check-circle").concat(s?"_dark":"",".svg");return(0,z.jsx)(cp.Z,{closeOnOverlay:t,defaultCallback:i,...n,children:(0,z.jsxs)(nc.Z,{children:[(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center u-flex-direction-column",children:[(0,z.jsx)(Kl.U,{src:a,size:Kl.U.Size.Large,alt:""}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:r("title"),type:xt.Z.Type.Heading,alignment:xt.Z.Alignment.Center})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:r("subtitle"),alignment:xt.Z.Alignment.Center}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(ic.I,{theme:"primary",styling:ic.I.Styling.Filled,text:r("close"),onClick:i})]})})},_pe=e=>{let{closeOnOverlay:t=!0,handleClose:i,...n}=e;const s=Ql(),r=U("advertising.form.error_message"),a="".concat(Be.cJ,"/landing/advertising/cross-circle").concat(s?"_dark":"",".svg");return(0,z.jsx)(cp.Z,{closeOnOverlay:t,defaultCallback:i,...n,children:(0,z.jsxs)(nc.Z,{children:[(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center u-flex-direction-column",children:[(0,z.jsx)(Kl.U,{src:a,size:Kl.U.Size.Large,alt:""}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:r("title"),type:xt.Z.Type.Heading,alignment:xt.Z.Alignment.Center})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(ic.I,{theme:"primary",styling:ic.I.Styling.Filled,text:r("close"),onClick:i})]})})},bpe=()=>{const[e,t]=(0,m.useState)(!1),[i,n]=(0,m.useState)(!1),[s,r]=(0,m.useState)(!1),a=(0,th.cI)({shouldUnregister:!1}),{handleSubmit:o}=a;return(0,z.jsxs)("div",{className:"container",children:[(0,z.jsx)(th.RV,{...a,children:(0,z.jsxs)("form",{className:"advertising__form-container",onSubmit:o((async function(e){r(!0),"errors"in await(0,Fe.uQM)(e)?n(!0):t(!0),r(!1)})),children:[(0,z.jsx)("div",{className:"u-desktops-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.X5Large})}),(0,z.jsx)("div",{className:"u-mobiles-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large})}),(0,z.jsx)(g.Z,{children:(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[(0,z.jsx)(lpe,{}),(0,z.jsx)(mpe,{}),(0,z.jsx)(gpe,{}),(0,z.jsx)(fpe,{})]})}),(0,z.jsx)(ype,{isLoading:s}),(0,z.jsx)("div",{className:"u-desktops-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})})]})}),(0,z.jsx)(vpe,{show:e,handleClose:function(){a.reset(),t(!1)}}),(0,z.jsx)(_pe,{show:i,handleClose:function(){n(!1)}})]})},jpe=()=>(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(ope,{}),(0,z.jsx)(bpe,{})]}),Spe=()=>{const e=U("advertising"),t=U("menu");return(0,z.jsxs)("div",{className:"regular-container",children:[(0,z.jsx)("div",{className:"u-desktops-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large})}),(0,z.jsxs)("div",{className:"row",children:[(0,z.jsx)("div",{className:"grid4 u-desktops-only",children:(0,z.jsx)("div",{className:"u-ui-margin-right-medium",children:(0,z.jsx)(Kl.U,{src:"".concat(Be.Fv,"/assets/icons/megaphone.svg"),scaling:Kl.U.Scaling.Cover})})}),(0,z.jsxs)("div",{className:"grid8",children:[(0,z.jsxs)(gt.Z,{title:(0,z.jsx)(xt.Z,{text:e("title"),type:xt.Z.Type.Heading,as:"h1"}),children:[(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(xt.Z,{text:e("description")})]}),(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(xt.Z,{text:e("contact_headline")}),(0,z.jsx)(xt.Z,{width:xt.Z.Width.Parent,children:(0,z.jsx)("a",{href:"mailto:".concat(e("contact_email")),children:e("contact_email")})})]}),(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(xt.Z,{text:e("learn_more")}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{width:xt.Z.Width.Parent,children:(0,z.jsx)("a",{href:Me.ouD,children:t("about_us")})}),(0,z.jsx)(xt.Z,{width:xt.Z.Width.Parent,children:(0,z.jsx)("a",{href:Me.v6v,children:t("press")})})]})]})]})]})},Zpe="".concat(Be.Fv,"/assets/about"),Ipe="".concat(Be.Fv,"/assets/investors"),Cpe="".concat(Be.Fv,"/assets/icons/new"),kpe=()=>{const e=U("about_mission.motivation");return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large}),(0,z.jsx)("div",{className:"u-tablets-up-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large})}),(0,z.jsxs)("div",{className:"about__section",children:[(0,z.jsx)(xt.Z,{as:"h1",type:xt.Z.Type.HeadingXXL,alignment:xt.Z.Alignment.Left,children:(0,z.jsx)("span",{className:"c-text--responsive-large-heading",children:e("title")})}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)("div",{className:"u-tablets-up-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large})}),(0,z.jsx)(xt.Z,{as:"p",children:(0,z.jsx)("span",{className:"c-text--responsive-large-body",children:e("text")})})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large}),(0,z.jsx)("div",{className:"u-tablets-up-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large})}),(0,z.jsx)("div",{className:"u-tablets-up-only",children:(0,z.jsx)("div",{className:"about__hero-image",children:(0,z.jsx)(Kl.U,{src:"".concat(Zpe,"/about-us.jpg"),scaling:Kl.U.Scaling.Cover})})}),(0,z.jsx)("div",{className:"u-phones-only",children:(0,z.jsx)("div",{className:"about__hero-image",children:(0,z.jsx)(Kl.U,{src:"".concat(Zpe,"/about-us-mobile.jpg"),scaling:Kl.U.Scaling.Cover})})})]})},wpe=e=>{let{imageSource:t,blockHeading:i,blockText:n}=e;return(0,z.jsxs)("div",{className:"about__fact-block",children:[(0,z.jsx)("div",{className:"about__fact-icon",children:(0,z.jsx)("div",{className:"c-image--large",children:(0,z.jsx)(Kl.U,{src:t,scaling:Kl.U.Scaling.Cover})})}),(0,z.jsxs)("div",{className:"about__content",children:[(0,z.jsx)(xt.Z,{as:"h5",alignment:xt.Z.Alignment.Left,children:(0,z.jsx)("span",{className:"c-text--responsive-small-heading",children:i})}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{as:"p",alignment:xt.Z.Alignment.Left,children:(0,z.jsx)("span",{className:"c-text--responsive-small-body",children:n})})]})]})},Ppe=e=>{let{isDarkMode:t}=e;const i=U("about_mission.facts"),n=t?"_dark":"";return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large}),(0,z.jsx)("div",{className:"u-tablets-up-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large})}),(0,z.jsxs)("div",{className:"about__section",children:[(0,z.jsx)(xt.Z,{as:"h2",alignment:xt.Z.Alignment.Left,width:xt.Z.Width.Parent,children:(0,z.jsx)("span",{className:"c-text--responsive-large-heading",children:i("title")})}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)("div",{className:"u-tablets-up-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large})}),(0,z.jsxs)("div",{className:"about__facts",children:[(0,z.jsx)(wpe,{imageSource:"".concat(Cpe,"/bulb").concat(n,".svg"),blockHeading:i("beginning.title"),blockText:i("beginning.text")}),(0,z.jsx)("div",{className:"u-phones-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large})}),(0,z.jsx)(wpe,{imageSource:"".concat(Cpe,"/heart").concat(n,".svg"),blockHeading:i("team.title"),blockText:i("team.text")})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)("div",{className:"u-tablets-up-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large})}),(0,z.jsxs)("div",{className:"about__facts",children:[(0,z.jsx)(wpe,{imageSource:"".concat(Cpe,"/pin").concat(n,".svg"),blockHeading:i("working.title"),blockText:i("working.text")}),(0,z.jsx)("div",{className:"u-phones-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large})}),(0,z.jsx)(wpe,{imageSource:"".concat(Cpe,"/globe").concat(n,".svg"),blockHeading:i("mission.title"),blockText:i("mission.text")})]})]})]})},zpe=()=>{const e=U("about_mission.download");return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large}),(0,z.jsx)("div",{className:"u-tablets-up-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large})}),(0,z.jsxs)("div",{className:"u-phones-only",children:[(0,z.jsxs)("div",{className:"about__section",children:[(0,z.jsx)(xt.Z,{as:"h3",alignment:xt.Z.Alignment.Left,type:xt.Z.Type.HeadingXXL,children:e("title")}),(0,z.jsx)(xt.Z,{as:"p",alignment:xt.Z.Alignment.Left,type:xt.Z.Type.Body,children:e("text")}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(FY,{})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large})]})]})},Tpe=[["accel","png"],["insight-venture","svg"],["burda-principal","svg"],["sprints-capital","png"],["lightspeed","jpg"],["eqt","png"]],Fpe=[["justas-milda","founders"],["thomas","ceo"],["mantas","coo"]],Npe=()=>{const e=Ql(),t=U("about_mission.leadership");return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large}),(0,z.jsx)("div",{className:"u-tablets-up-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large})}),(0,z.jsxs)("div",{className:"about__section",children:[(0,z.jsx)(xt.Z,{alignment:xt.Z.Alignment.Left,as:"h2",children:(0,z.jsx)("span",{className:"c-text--responsive-large-heading",children:t("title")})}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)("div",{className:"u-tablets-up-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large})}),(0,z.jsx)("div",{className:"landing__slider-wrapper",children:(0,z.jsx)("div",{className:"about__leadership-slider",children:Fpe.map((e=>{let[i,n]=e;return(0,z.jsxs)("div",{className:"about__leadership-card",children:[(0,z.jsx)(Kl.U,{src:"".concat(Zpe,"/").concat(i,".jpg"),scaling:Kl.U.Scaling.Contain}),(0,z.jsxs)("div",{className:"about__leadership-card__info",children:[(0,z.jsx)("h5",{className:"landing__entry-title",children:t("".concat(n,".title"))}),(0,z.jsx)("p",{className:"landing__entry-body",children:t("".concat(n,".subtitle"))})]})]},i)}))})}),(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large}),(0,z.jsx)(xt.Z,{alignment:xt.Z.Alignment.Left,as:"p",children:(0,z.jsx)("span",{className:"c-text--responsive-small-body",children:t("text")})}),(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large}),(0,z.jsx)("div",{className:"about__investors",children:Tpe.map((t=>{let[i,n]=t;return(0,z.jsx)("div",{className:"about__investor-logo",children:(0,z.jsx)(Kl.U,{testId:"investor-logo-".concat(i),src:"".concat(Ipe,"/").concat(i).concat(e?"_dark":"",".").concat("lightspeed"===i&&e?"png":n),scaling:Kl.U.Scaling.Contain})},i)}))})]})]})};let Lpe;!function(e){e.NoBackground="no_background",e.WithBackground="with_background"}(Lpe||(Lpe={}));const Epe=e=>{let{id:t,title:i,subtitle:n,body:s,layoutType:r}=e;const a=y()("payments-explanation__container",{"about__hero-section payments-explanation__section":r===Lpe.NoBackground,"about__hero-section about__hero-section--with-background payments-explanation__section payments-explanation__section--terms":r===Lpe.WithBackground});return(0,z.jsx)("section",{id:"info-post-".concat(t),className:a,children:(0,z.jsxs)("div",{className:"payments-explanation__section-content",children:[(0,z.jsx)(xt.Z,{alignment:xt.Z.Alignment.Left,children:(0,z.jsx)("span",{className:"c-text--responsive-large-heading",children:i})}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(xt.Z,{text:n,type:xt.Z.Type.Subtitle}),(0,z.jsx)("div",{className:"u-mobiles-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large})}),(0,z.jsx)("div",{className:"u-desktops-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large})}),(0,z.jsx)("div",{dangerouslySetInnerHTML:{__html:s}})]})})};let Ope;!function(e){e.phoneVerification="phone_verification",e.default="default",e.aboutBumps="about_bumps",e.photoTips="photo_tips"}(Ope||(Ope={}));const Rpe=()=>{const e=U("clm.notifications.photo_tips"),{fetch:t,transformedData:i,isLoading:n,error:s}=ih(Fe.ucF,ux),{fetch:r,transformedData:a,isLoading:o,error:l}=ih(Fe.Uel,Xh);return(0,m.useEffect)((()=>{t(Ope.photoTips),r()}),[t,r]),n||o?(0,z.jsx)(Mp,{testId:"photo-tips-loader"}):s||l?(0,z.jsx)(sw,{}):i&&a?(0,z.jsxs)("div",{className:"grid8 push2",children:[(0,z.jsx)("div",{className:"u-padding-bottom-large@phones u-padding-x-large@tablets-up",children:(0,z.jsx)(xt.Z,{width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,as:"h1",children:(0,z.jsx)("span",{className:"c-text--responsive-small-heading",children:i.title})})}),(0,z.jsx)("div",{className:"u-padding-bottom-x-large",children:(0,z.jsx)(xt.Z,{width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,children:(0,z.jsx)("span",{className:"c-text--responsive-small-body",children:e("subtitle")})})}),a.map((e=>(0,z.jsxs)("div",{className:"u-padding-bottom-xx-large",children:[(0,z.jsx)("div",{className:"u-padding-bottom-x-large",children:(0,z.jsx)(xt.Z,{width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,as:"h2",children:(0,z.jsx)("span",{className:"c-text--responsive-small-title",children:e.body})})}),(0,z.jsx)("div",{className:"u-padding-bottom-x-large u-text-center",children:(0,z.jsx)(Kl.U,{src:e.imageUrl,scaling:Kl.U.Scaling.Contain})}),(0,z.jsx)(xt.Z,{width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,children:(0,z.jsx)("span",{className:"c-text--responsive-small-body",children:e.body})})]},e.id)))]}):null},Dpe=e=>{let{type:t}=e;const{fetch:i,transformedData:n,error:s,isLoading:r}=ih(Fe.ucF,ux),a=t;(0,m.useEffect)((()=>{i(a)}),[i,a]);const{track:o}=vi(),l=(0,p.v9)(X);if(r)return(0,z.jsx)(Mp,{testId:"notification-landings-loader"});if(s)return(0,z.jsx)(sw,{});if(!n)return null;const c=n.code===Ope.aboutBumps&&l?"/e/item_upload":n.buttonUrl;return(0,z.jsx)("div",{className:"container",children:(0,z.jsxs)("div",{className:"grid6 push3",children:[(0,z.jsx)("div",{className:"u-desktops-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.X3Large})}),(0,z.jsx)("div",{className:"u-mobiles-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large})}),(0,z.jsx)(xt.Z,{width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Left,children:(0,z.jsx)("span",{className:"c-text--responsive-large-heading",children:n.title})}),(0,z.jsx)("div",{className:"u-desktops-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})}),(0,z.jsx)("div",{className:"u-mobiles-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large})}),(0,z.jsx)("div",{className:"notification-landing__header-image",children:(0,z.jsx)("a",{href:c,onClick:()=>{o(Ri({target:qm.CtaPromptImageContinue,targetDetails:"default"}))},children:(0,z.jsx)(Kl.U,{src:n.imageUrl,scaling:Kl.U.Scaling.Fill})})}),(0,z.jsx)("div",{className:"u-desktops-only",children:(0,z.jsx)(x.Z,{})}),(0,z.jsx)("div",{className:"u-mobiles-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large})}),(0,z.jsx)("div",{className:"user-formatted-text",children:(0,z.jsx)("div",{className:"c-text--responsive-small-body",dangerouslySetInnerHTML:{__html:n.body}})}),(0,z.jsx)("div",{className:"u-desktops-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})}),(0,z.jsx)("div",{className:"u-mobiles-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large})}),(0,z.jsx)(ic.I,{text:n.buttonTitle,type:ic.I.Type.Button,styling:ic.I.Styling.Filled,size:ic.I.Size.Default,url:c,onClick:()=>{o(Ri({target:qm.CtaPromptContinue,targetDetails:"default"}))}}),(0,z.jsx)("div",{className:"u-desktops-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.X3Large})}),(0,z.jsx)("div",{className:"u-mobiles-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large})})]})})},Ape="300px",Mpe=e=>{let{itemId:t}=e;const[i,n]=(0,m.useState)(null);(0,m.useEffect)((()=>{const e=document.getElementById("item-admin-section-iframe"),t=()=>{var t;n(e.contentDocument||(null===(t=e.contentWindow)||void 0===t?void 0:t.document))};return e.addEventListener("load",t),()=>e.removeEventListener("load",t)}),[]);const s=(0,m.useCallback)((()=>{if(!i)return;const e=document.getElementById("item-admin-section-iframe"),t=i.querySelectorAll(".dropdown-wrapper"),n=i.querySelector(".c-cell > .container");i.body.style.overflow="hidden",t[0].classList.contains("open")?e.style.height="2500px":e.style.height=n?"".concat(null==n?void 0:n.offsetHeight,"px"):Ape}),[i]);(0,m.useEffect)((()=>{if(!i)return;const e=new MutationObserver((()=>{s()}));return e.observe(i.body,{attributes:!0,attributeFilter:["class"],childList:!0,subtree:!0}),()=>e.disconnect()}),[i,s]);const r=(0,ys.Iq)((0,Me.RDu)(t),{content_only:1});return(0,z.jsx)("iframe",{id:"item-admin-section-iframe",title:"Admin section",style:{border:"none",width:"100%",minHeight:Ape},src:r})};var Upe=i(83530),Bpe=i(43970),qpe=i(91931),Vpe=i(6726),Hpe=i(63738),Gpe=i(50888);let Wpe,Xpe,Ype;!function(e){e.Discount="discount",e.Globe="globe",e.OkHand="ok_hand"}(Wpe||(Wpe={})),function(e){e.Check="check",e.Cross="cross",e.Time="time",e.Wallet="wallet",e.Question="question",e.LightBulb="lightbulb",e.TShirt="tshirt",e.Money="money"}(Xpe||(Xpe={})),function(e){e.Title="title",e.Paragraph="paragraph",e.Example="example"}(Ype||(Ype={}));d().registerStore({MainStore:(e,t)=>{const i=function(e,t,i,n){const s={railsContext:t,...e};return vY||(vY=function(e,t){let i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const s=[],r=(0,PT.ZP)({onError:bY});return s.push(r),i=(0,rj.md)(...s,_Y),{store:(0,rj.MT)(t,e,i),sagaRun:r.run((function*(){yield(0,aj.$6)([...n])}))}}(s,function(e){return(0,rj.UY)({...TO,...e})}(i),n).store,function(e){ps("redux:dispatch",(t=>e.dispatch(t)))}(vY),vY)}(e,t,FO,[VR(),jD(),wD(),aA(),bA(),IA(),iM(),xZ(),UM(),pU(),KM(),xV(),vV(),MV(),HV(),eH(),dH(),EH(),YH(),$H(),NG(),AG(),BG(),XG(),JG(),rW(),FW(),EW(),BW(),HW(),JW(),tX(),fX(),BX(),nY(),TM(),OX(),lY(),xY(),yY()]);return Ol.initialize(i),i}}),d().register({Advertisement:wT(uc),AdvertisementBlockCheck:wT((()=>{const e=(0,m.useRef)(null),t=(0,p.v9)(X),i=(0,p.v9)(le),n=(0,p.v9)(Ut),s=(0,p.v9)(Bt),r=(0,p.v9)(qt),a=t?String(t):i,o=(0,p.I0)(),{track:l}=vi();return(0,m.useEffect)((()=>{e.current&&null===n&&(e.current.clientHeight>0?ds().head("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",{withCredentials:!1}).then((()=>{o(SL.setIsAdBlockerUsed({isAdBlockerUsed:!1}))})).catch((()=>{o(SL.setIsAdBlockerUsed({isAdBlockerUsed:!0}))})):o(SL.setIsAdBlockerUsed({isAdBlockerUsed:!0})))}),[o,n]),(0,m.useEffect)((()=>{s||null===n||(l((e=>{const{isMobileWeb:t,isAdBlockerUsed:i}=e;return{event:"user.adblock_check",extra:{is_mobile_web:t,is_adblock_used:i}}})({isMobileWeb:Al.getAdsPlatform()===ci.Mobile,isAdBlockerUsed:n})),o(SL.setHasAdBlockerBeenTracked({hasAdBlockerBeenTracked:!0})),o(SL.setAdBlockerVisitorId({id:a})),(0,vc.D9)(ei,String(n)),(0,vc.D9)(ii,a))}),[n,s,l,o,a]),(0,m.useEffect)((()=>{s&&a!==r&&(o(SL.setHasAdBlockerBeenTracked({hasAdBlockerBeenTracked:!1})),o(SL.setAdBlockerVisitorId({id:a})))}),[o,s,r,a]),(0,z.jsx)("div",{className:"ads-banner","data-testid":"ads-banner",ref:e,tabIndex:-1,style:{width:"1px",height:"1px",position:"absolute",pointerEvents:"none",background:"transparent",left:0,top:0}})})),Auth:wT(iJ),AuthModal:wT(nJ),ShippingSettings:wT((()=>{const e=(0,p.v9)(X),[t,i]=(0,m.useState)(null),[n,s]=(0,m.useState)([]),[r,a]=(0,m.useState)(!1),o=EZ(t),l=async()=>{const e=await(0,Fe.rG$)();if(!("errors"in e)&&e.user_address){const t=(0,V.X)(e.user_address);i(t)}};return(0,m.useEffect)((()=>{l()}),[]),(0,m.useEffect)((()=>{e&&((0,v.isEqual)(o,t)||(async()=>{if(r)return;a(!0);const t=await(0,Fe.s0m)(e);a(!1),"errors"in t||s((e=>e.map(sJ))(t.carrier_preferences))})())}),[t,r,o,e]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(oJ,{address:t,getAddress:l}),(0,z.jsx)(dJ,{carrierPreferences:n,isLoading:r,onSetCarrierPreferences:s})]})})),EmailLogin:wT(OK),EmailRegister:wT(JK),ResetPassword:wT($K),Animation:wT(u.Z),ItemPerformance:wT(gQ),ClosetStatistics:wT(kQ),ItemCountdownAction:wT(H0),DeleteAccount:wT((()=>{const[e,t]=(0,m.useState)(!1),[i,n]=(0,m.useState)(!1),[s,r]=(0,m.useState)(!1),[a,o]=(0,m.useState)(""),[l,c]=(0,m.useState)([]),d=(0,p.v9)(X),u=U("delete_account"),{fetch:g,transformedData:x}=ih(Fe.hgP,zQ);return(0,m.useEffect)((()=>{d&&g(d)}),[d,g]),x?(0,z.jsxs)("div",{children:[(0,z.jsx)(yt.Z,{text:u("title"),styling:yt.Z.Styling.Wide}),l.length?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{children:l.map(((e,t)=>(0,z.jsx)(zm.Z,{text:e.value,theme:"warning"},dh("request_validation_".concat(t)))))}),(0,z.jsx)(h.Z,{})]}):null,(0,z.jsx)(PQ.R,{title:u("help_us"),name:"help_us",styling:PQ.R.Styling.Wide,placeholder:u("reason"),onChange:e=>{o(e.target.value)}}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{body:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(vt.Z,{id:"delete_account.tx_condition"},"tx_condition"),s?(0,z.jsx)(zm.Z,{text:u("tx_condition_required"),theme:"warning"}):null,x.hasObligations?(0,z.jsx)(zm.Z,{text:u("obligations_present"),theme:"warning"}):null]}),suffix:(0,z.jsx)(BZ.F,{name:"transaction_checkbox",onClick:()=>{n((e=>!e)),r(!1)},checked:i,disabled:x.hasObligations,testId:"delete-account--transaction-checkbox"})}),(0,z.jsx)(ah.Z,{styling:ah.Z.Styling.Wide,text:u("note"),html:!0}),(0,z.jsx)("div",{children:(0,z.jsx)("div",{className:"u-text-right",children:(0,z.jsx)(ic.I,{text:u("submit"),theme:"warning",onClick:async()=>{if(i||r(!0),c([]),!i||!d)return;t(!0);const e=await(0,Fe.h8f)(d,a);if("errors"in e)return t(!1),void c(e.errors);await lK(),es("action_callback_route",Me.H$U),(0,ls.ru)(Me.H$U)},styling:ic.I.Styling.Filled,isLoading:e,testId:"delete-account--submit-button",inline:!0})})})]}):(0,z.jsx)(Mp,{styling:Mp.Styling.Wide,size:Mp.Size.Large,testId:"delete-account-form-loader"})})),DomainSelectModal:wT((e=>{let{domainLinks:t}=e;const[i,n]=(0,m.useState)(!0);return t.length?(0,z.jsx)(cp.Z,{show:i,hasScrollableContent:!0,testId:"domain-select-modal",children:(0,z.jsxs)("div",{className:"u-ui-padding-regular u-fill-width",children:[(0,z.jsx)(Pm.Z,{theme:"transparent",right:(0,z.jsx)(ic.I,{testId:"domain-select-modal-close-button",styling:ic.I.Styling.Flat,onClick:function(){es("domain_selected","true",wQ),n(!1)},deprecatedIconName:"x",inline:!0})}),(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{text:(0,z.jsx)(vt.Z,{id:"domain_selection.title"}),type:xt.Z.Type.Heading,as:"h2"})}),(0,z.jsx)("div",{className:"u-fill-height u-overflow-auto",children:t.map((function(e,t){const i=ht.Z.buildIconName("flags",e.code);return(0,z.jsx)(gt.Z,{onClick:()=>{return t=e.link,void(0,ls.ru)(t);var t},clickable:!0,prefix:i&&(0,z.jsx)(ht.Z,{name:i}),title:(0,z.jsx)(xt.Z,{text:(0,z.jsx)(vt.Z,{id:"native_country_names.".concat(e.code)}),type:xt.Z.Type.Title})},t)}))})]})}):null})),AppBanner:wT(CY),AppStoreButtons:wT(FY),SecuritySettings:wT((()=>{const e=U("settings.security"),t=(0,p.v9)(Wt("security_settings_sessions")),i=(0,p.v9)(Wt("mandatory_change_email_confirmation")),n=(0,p.v9)(Wt("security_settings_authentication")),s=(0,p.v9)(de),r=(0,p.v9)(W);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(gt.Z,{title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:e("title")}),body:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{}),e("description")]})}),(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[(()=>{const t=(null==r?void 0:r.verification.email.valid)||i;return(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,title:e("email.title"),body:e(t?"email.body_verified":"email.body_not_verified"),url:t?Me.CcO:Me.fbH,testId:"email",chevron:!0})})(),(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,title:e("password.title"),body:e("password.body"),url:Me.ojr,testId:"password",chevron:!0}),n?null:(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,title:e("verification.title"),body:e("verification.text"),url:s?Me.YFw:Me.j9U,testId:"phone-verification",chevron:!0}),n?(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,title:e("authentication.title"),body:e("authentication.body"),url:Me.oL2,testId:"authentication",chevron:!0}):null,t?(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,title:e("devices.title"),body:e("devices.body"),url:Me.CKl,testId:"user-sessions",chevron:!0}):null]})]})})),PhoneVerification:wT((()=>{const e=U("settings.security"),t=U("errors"),i=(0,p.v9)(X),n=(0,p.v9)(de),[s,r]=(0,m.useState)(e("change_phone_number.default_masked_number")),[a,o]=(0,m.useState)(!1),[l,c]=(0,m.useState)(!1),[d,u]=(0,m.useState)(!1),[g,f]=(0,m.useState)(!1);(0,m.useEffect)((()=>{(async()=>{if(!i)return;const e=await(0,Fe.agi)(i);if("errors"in e)return;const{security:{masked_phone_number:t,is_credential_login:n,is_voluntary_2fa:s}}=e;r(t),u(s),c(n)})()}),[i]);const y=async()=>{i&&("errors"in await(0,Fe.$Oe)(i,!d)?o(!0):u(!d),f(!1))};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Wide,title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,children:e("verification.title")}),children:[(0,z.jsx)(x.Z,{}),n?(0,z.jsxs)(z.Fragment,{children:[e("phone_number.text"),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,suffix:(0,z.jsx)(ic.I,{text:e("phone_number.button"),size:ic.I.Size.Small,inline:!0,onClick:()=>{(0,ls.ru)(Me.kHg)}}),children:(0,z.jsx)(gt.Z,{title:(0,z.jsx)(xt.Z,{text:s,bold:!0,theme:"amplified"}),styling:gt.Z.Styling.Tight})})]}):(0,z.jsxs)(z.Fragment,{children:[e("verification.text"),(0,z.jsx)(x.Z,{}),(0,z.jsx)(ic.I,{text:e("verification.actions.verify"),size:ic.I.Size.Medium,styling:ic.I.Styling.Filled,inline:!0,onClick:()=>{(0,ls.ru)(Me.j9U)}}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge,orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(_p,{type:bp.PhoneVerification,render:t=>(0,z.jsx)("a",{href:t,children:e("verification.actions.help")})})]})]}),l&&n&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{title:e("verify_at_login"),body:e("verify_at_login_body"),suffix:(0,z.jsx)(lJ.Z,{testId:"toggle-voluntary-2FA",name:"verify_at_login_toggle",onClick:()=>{d?f(!0):y()},checked:d})})]}),a&&(0,z.jsx)(bJ,{body:t("generic"),onClose:()=>{o(!1)}}),(0,z.jsx)(jJ,{show:g,onCancel:()=>{f(!1)},onConfirm:y})]})})),Sessions:wT((()=>{const e=U("settings.security.sessions"),t=(0,p.v9)(X),{track:i}=vi(),[n,s]=(0,m.useState)(!1),[r,a]=(0,m.useState)(null),[o,l]=(0,m.useState)(null);(0,m.useEffect)((()=>{(async()=>{if(!t)return;const e=await(0,Fe.c7Q)(t);if("errors"in e)return;const i=(e=>e.map(ZJ))(e.user_session_activity);l(i)})()}),[t]);const c=e=>async()=>{if(!t)return;if(i(Ri({target:qm.SessionsLogOut})),a(e),"errors"in await(0,Fe.Kel)({userId:t,sessionId:e.sessionId,fingerprint:await $M()}))return;const n=(null==o?void 0:o.filter((t=>{let{sessionId:i}=t;return i!==e.sessionId})))||[];l(n),s(!0)};return o?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(SJ,{}),(0,z.jsxs)("div",{className:"body-content__content",children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(gt.Z,{title:e("title"),body:e("body")}),o.sort((e=>e.isCurrent?-1:0)).map((t=>(t=>{const{id:i,location:n,isCurrent:s,lastSeen:r,device:a}=t,o=new Date(r).getTime();return(0,z.jsxs)(m.Fragment,{children:[(0,z.jsx)(gt.Z,{title:n,body:s?(0,z.jsx)(xt.Z,{text:e("current_session"),theme:"success"}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(zt,{value:o}),(0,z.jsx)(x.Z,{size:x.Z.Size.Small,orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(xt.Z,{text:" ".concat(a)})]}),suffix:s?null:(0,z.jsx)(ic.I,{testId:"remove-session-".concat(i),styling:ic.I.Styling.Flat,text:e("remove"),size:ic.I.Size.Small,onClick:c(t),inline:!0}),testId:"session-information"}),(0,z.jsx)(h.Z,{})]},i)})(t))),r&&(0,z.jsx)(IJ,{show:n,onCancel:()=>{s(!1)},onConfirm:()=>{i(Ri({target:qm.SessionsChangePassword})),s(!1),(0,ls.ru)(Me.ojr)},session:r})]})]}):null})),FeedbackForm:wT((()=>{const[e,t]=(0,m.useState)(null),[i,n]=(0,m.useState)(null),[s,r]=(0,m.useState)(""),[a,o]=(0,m.useState)(!1),[l,c]=(0,m.useState)(!1),{relativeUrl:d}=xc(),u=U("cs_feedback_form"),p=U("net_promoter_score"),f=(0,ys.Uf)(d,1),y=(0,ys.Uf)(d,2),v=(0,ys.Uf)(d,3),_=l&&null===e,b=l&&null===i,j=e=>()=>n(e),S=()=>{c(!0),null!==e&&null!==i&&(async()=>{o(!0),await(0,Fe.wKZ)({expirationDate:Number(y),ticketId:Number(f),rating:Number(i),effort:Number(e),comment:s,digest:v}),(0,ls.ru)("/")})()};return(0,z.jsxs)(z.Fragment,{children:[(()=>{const i=[{score:5,explanation:"score_explanation.very_easy"},{score:4,explanation:"score_explanation.somewhat_easy"},{score:3,explanation:"score_explanation.easy_difficult"},{score:2,explanation:"score_explanation.somewhat_difficult"},{score:1,explanation:"score_explanation.very_difficult"}];return(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Wide,validation:_?u("validation"):"",children:[(0,z.jsx)(xt.Z,{text:u("title"),type:xt.Z.Type.Heading}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:u("questions.effort_score"),theme:"amplified"}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(g.Z,{children:i.map(((n,s)=>{return(0,z.jsxs)(m.Fragment,{children:[(0,z.jsx)(gt.Z,{children:(0,z.jsx)(qx.J,{name:"effortScore",text:(a=n.explanation,u(a)),checked:n.score===e,onClick:(r=n.score,()=>t(r))})}),s!==i.length-1&&(0,z.jsx)(h.Z,{})]},n.score);var r,a}))})]})})(),(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Wide,validation:b?u("validation"):"",children:[(0,z.jsx)(xt.Z,{text:u("questions.happy_with_support"),theme:"amplified"}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsxs)(g.Z,{children:[(0,z.jsx)(gt.Z,{children:(0,z.jsx)(qx.J,{name:"helpfulnessRate",text:u("happy_with_support.positive"),onClick:j(3),checked:3===i})}),(0,z.jsx)(h.Z,{}),(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(x.Z,{}),(0,z.jsx)(qx.J,{name:"helpfulnessRate",text:u("happy_with_support.negative"),onClick:j(1),checked:1===i})]})]})]}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,body:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{theme:"amplified",text:u("open_question.title")}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(PQ.R,{styling:PQ.R.Styling.Tight,name:"csFeedbackForm",testId:"cs-feedback-form",placeholder:u("open_question.placeholder"),onChange:e=>r(e.target.value),rows:3}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(()=>{const e={styling:ic.I.Styling.Filled,text:p("submit"),onClick:S,disabled:a};return(0,z.jsxs)("div",{className:"u-text-right",children:[(0,z.jsx)(Nm,{breakpoint:"phones",children:(0,z.jsx)(ic.I,{...e})}),(0,z.jsx)(Nm,{breakpoint:"tabletsUp",children:(0,z.jsx)(ic.I,{...e,inline:!0})})]})})()]})})]})})),Header:wT((e=>{let{languages:t,catalogTree:i,isInCatalog:n,searchType:s,portal:r,impressumUrl:a,isBusinessAccountLinksVisible:o,isOurPlatformVisible:l,injectedMenus:c}=e;const d=(0,p.v9)(X),u=(0,p.v9)(Ht),g=(0,p.v9)(Vn("web_2_app_conversion_v1")),h=(0,p.v9)(Zr),f=n&&d&&!h,[v,_]=(0,m.useState)(!1);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:y()("l-header js-header",{"is-active":v}),children:["on"===(null==g?void 0:g.variant)&&u===$t.NewsFeed?(0,z.jsx)(CY,{isHeader:!0}):null,(0,z.jsx)("header",{className:"l-header__main",children:(0,z.jsx)("div",{className:"container u-flexbox u-align-items-center u-fill-height",children:(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center u-fill-width",children:[(0,z.jsx)(K0,{portal:r}),(0,z.jsx)("div",{className:"u-desktops-only u-fill-width u-position-relative u-z-index-notification u-ui-margin-right-x3-large",children:(0,z.jsx)(Q1,{isInCatalog:n,searchType:s})}),(0,z.jsxs)("div",{className:"u-flexbox u-margin-left-auto u-align-items-center u-position-relative u-z-index-notification",children:[d&&(0,z.jsx)("div",{className:"u-flexbox u-align-items-center",children:(0,z.jsx)(E1,{})}),(0,z.jsxs)("div",{className:"u-desktops-only u-flexbox u-align-items-center",children:[d&&(0,z.jsx)("div",{className:"u-position-relative u-ui-padding-left-regular u-ui-padding-right-x-large",children:(0,z.jsx)(_9,{injectedMenus:c})}),!d&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(S1,{}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical})]}),(0,z.jsx)(I1,{}),(0,z.jsx)("div",{className:"u-ui-padding-left-regular",children:(0,z.jsx)(_p,{type:bp.VintedGuide,accessChannel:Be.Si.VintedGuide,render:e=>(0,z.jsx)(X0,{url:e})})}),(0,z.jsx)("div",{className:"u-position-relative",children:(0,z.jsx)(e1,{initialLanguages:t})})]})]}),(0,z.jsx)("div",{className:"u-mobiles-only",children:(0,z.jsx)(Z1,{isActive:v,onToggle:function(){_((e=>!e))}})})]})})}),(0,z.jsxs)("div",{className:"l-header__navigation",children:[v&&(0,z.jsx)("div",{className:"u-mobiles-only",children:(0,z.jsx)(p9,{catalogTree:i,impressumUrl:a,isBusinessAccountLinksVisible:o})}),(0,z.jsx)("div",{className:"u-desktops-only",children:(0,z.jsx)("div",{className:"container",children:(0,z.jsx)(j1,{tree:i,impressumUrl:a,isBusinessAccountLinksVisible:o,isOurPlatformVisible:l})})})]})]}),(0,z.jsx)("div",{className:"l-search",children:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,children:(0,z.jsx)("div",{className:"u-ui-padding-vertical-regular",children:(0,z.jsx)("div",{className:"container",children:(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsx)("div",{className:"u-fill-width",children:(0,z.jsx)(Q1,{isInCatalog:n,searchType:s})}),f&&(0,z.jsx)("div",{className:"u-phones-only u-ui-margin-left-medium",children:(0,z.jsx)(l1,{})})]})})})})}),!d&&(0,z.jsx)(nJ,{})]})})),HeaderNoNavigation:wT((e=>{let{portal:t}=e;const i=(0,p.v9)(W),n=U(),{trackLogoutEvent:s,isLoadingPrompts:r,trackEmailCodeSkipEvent:a,handleDismissVerificationPrompt:o}=(()=>{const e=(0,p.v9)(W),t=(0,p.v9)(Z9),{track:i}=vi(),{fetch:n,data:s,error:r,isLoading:a}=ih(Fe.YAs),{relativeUrl:o}=xc(),l=null==s?void 0:s.prompt.methods.includes(j9.EmailCode),c=o===Me.O8U||o===Me.chM;return(0,m.useEffect)((()=>{c&&null!=e&&e.id&&n(e.id)}),[e,c,n]),{trackLogoutEvent:()=>{if(!l)return;const e={screen:$t.MandatoryEmailVerificationStart,target:qm.SessionsLogOut};o===Me.chM&&(e.screen=I9[t]),i(Ri(e))},trackEmailCodeSkipEvent:()=>{r||l&&(null!=s&&s.prompt.mandatory||i(Ri({screen:$t.MandatoryEmailVerificationStart,target:qm.Skip})))},handleDismissVerificationPrompt:async()=>{null!=e&&e.id&&(r||l&&(null!=s&&s.prompt.mandatory||await(0,Fe.DS3)(e.id)))},isLoadingPrompts:a}})();return(0,z.jsx)("div",{className:"l-header",children:(0,z.jsx)("header",{className:"l-header__main",children:(0,z.jsx)("div",{className:"container u-flexbox u-align-items-center u-fill-height",children:(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center u-fill-width",children:[(0,z.jsx)(K0,{portal:t,onClick:e=>(e.preventDefault(),a(),(async()=>{await o(),(0,ls.ru)(Me.mYc)})(),!1)}),i?(0,z.jsx)("div",{className:"u-flexbox u-margin-left-auto u-align-items-center u-position-relative u-z-index-notification",children:(0,z.jsx)(ic.I,{theme:"muted",styling:ic.I.Styling.Flat,size:ic.I.Size.Medium,onClick:async()=>{await lK()&&(s(),(0,ls.ru)(Me.mYc))},disabled:r,children:n("header.actions.log_out")})}):null]})})})})})),HeaderHelpButton:wT(X0),HeaderPortalClosure:wT((e=>{let{portal:t}=e;const i=(0,p.v9)(W),n=U(),{userStats:s}=fm(),r=C9[t];return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"l-header",children:(0,z.jsx)("header",{className:"l-header__main",children:(0,z.jsx)("div",{className:"container u-flexbox u-align-items-center u-fill-height",children:(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center u-fill-width",children:[(0,z.jsx)(K0,{portal:t}),(0,z.jsx)("div",{className:"u-flexbox u-margin-left-auto u-align-items-center u-position-relative u-z-index-notification",children:(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center",children:[i?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"u-position-relative",children:(0,z.jsx)(C1,{unreadConversationCount:null==s?void 0:s.unreadMsgCount})}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(ic.I,{size:ic.I.Size.Small,onClick:async()=>{await lK()&&(0,ls.ru)(Me.mYc)},children:n("header.actions.log_out")})]}):(0,z.jsx)(S1,{}),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)("div",{className:"user-actions__help",children:(0,z.jsx)(_p,{type:r,accessChannel:Be.Si.VintedGuide,render:e=>(0,z.jsx)(X0,{testId:"header-portal-closure-help-button",url:e})})})]})]})})]})})})}),i?null:(0,z.jsx)(nJ,{})]})})),ItemLegalDpoFootnote:wT(e$),ItemDescription:wT(LQ),ItemMeasurements:wT(OQ),ItemInfoLink:wT(HQ),ItemShippingBanner:wT(a$),ItemBuyerRights:wT(u$),ItemServiceFee:wT(H$),ItemCurrencyConversionNote:wT(Q$),PortalMergeItemViewBanner:wT(m$),FaqAccordion:wT(g$),FaqFeedbackForm:wT(h$),FaqFeedbackFormLink:wT(x$),ItemPushUpButton:wT(q$),ItemFavouriteButton:wT(V$),ViewAllUserItemsLink:wT(T2),UserItemsTitle:wT(z2),InfoBanner:wT(Kp),SellerPromotion:wT((e=>{let{phonesImageSrc:t,tabletsUpImageSrc:i,wideImageSrc:n,isHeroTitleSecondary:s}=e;const{track:r}=vi(),a=U(),o=(0,p.v9)(we),l=(0,p.v9)(X),c=(0,p.v9)(Vn("WEB_gender_neutral_screen")),{showSellerPromotion:d}=(()=>{const e=(0,p.v9)(W),t=(0,p.v9)(J)||"",i=(0,p.v9)(Wt("portal_merge_source")),n=t.toLowerCase(),s=t0.includes(n),r=parseFloat(is(e0)||"0"),a=s||i,o=!e,l=e&&!e.item_count&&r<=5,c=!a&&(o||l);return(0,m.useEffect)((()=>{e&&c&&es(e0,String(r+1))}),[e,r,c]),{showSellerPromotion:c}})(),u=l?Me.UNR:(0,ys.Iq)(Me.iGV,{ref_url:Me.UNR});function g(){const e={target:qm.UploadItem,targetDetails:"Landing page banner Sell now"};r(Ri(e))}function h(){const e={target:qm.Help,targetDetails:"Landing page banner how-it-works"};r(Ri(e))}return(0,m.useEffect)((()=>{c&&d&&r(bn({...o,...c}))}),[r,o,c,d]),d?(0,z.jsx)($$,{image:t,tabletsUpImage:i,wideImage:n,phonesContent:(0,z.jsxs)(nc.Z,{children:[(0,z.jsx)(x.Z,{}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:a("homepage.seller_promotion.title"),alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent,as:s?"h2":"h1"}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(ic.I,{text:a("homepage.seller_promotion.actions.start"),url:u,styling:ic.I.Styling.Filled,onClick:g}),(0,z.jsx)(ic.I,{text:a("homepage.seller_promotion.actions.learn_more"),url:Me.OkD,styling:ic.I.Styling.Filled,inverse:!0,onClick:h})]}),tabletsUpContent:(0,z.jsxs)("div",{className:"u-ui-padding-x2-large",children:[s?(0,z.jsx)("h2",{className:"seller-promotion__content-title",children:a("homepage.seller_promotion.title")}):(0,z.jsx)("h1",{className:"seller-promotion__content-title",children:a("homepage.seller_promotion.title")}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(ic.I,{text:a("homepage.seller_promotion.actions.start"),url:u,styling:ic.I.Styling.Filled,onClick:g}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)("a",{href:Me.OkD,onClick:h,children:(0,z.jsx)(xt.Z,{clickable:!0,text:a("homepage.seller_promotion.actions.learn_more"),type:xt.Z.Type.Subtitle})})]})}):null})),AccountSettings:wT((()=>{const e=(0,p.I0)(),t=U("account_settings.save"),i=(0,p.v9)(lU),n=(0,p.v9)(cU),s=(0,p.v9)(Ze),r=(0,p.v9)(W),a=(0,p.v9)(Wt("web_dark_mode")),o=(0,p.v9)(Wt("portal_merge_target")),l=(0,p.v9)(Vn("international_trading_enabled")),c=l&&l.variant!==Be.z5.Control;return(0,m.useEffect)((()=>{e(eU())}),[e]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(SJ,{}),(0,z.jsxs)("div",{className:"body-content__content",children:[i===Ne.Failure&&n&&(0,z.jsx)(AJ,{error:n}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(CJ,{}),(0,z.jsx)(UJ,{isDividerVisible:(null==r?void 0:r.verification.email.valid)||!1}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),!s&&(0,z.jsxs)(z.Fragment,{children:[o&&(0,z.jsx)(kJ,{}),(0,z.jsx)(wJ,{}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large})]}),(0,z.jsx)(PJ,{}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),a&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(qJ,{}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large})]}),c&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(MJ,{internationalTradingAbTest:null==l?void 0:l.variant}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]}),(0,z.jsx)(DJ,{}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(TJ,{}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(FJ,{}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,theme:"transparent",suffix:(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,size:ic.I.Size.Medium,text:t("title"),onClick:function(){e(tU())},disabled:i===Ne.Pending,testId:"account-settings--save-button"})})]})]})})),TransparencyLaw:wT(a0),PoliciesSettings:wT((()=>{const e=(0,p.v9)(Se),t=(0,p.v9)(ze),[i,n]=function(){const e=(0,p.v9)(Se),[t,i]=(0,m.useState)(),[n,s]=(0,m.useState)(!1),r=(0,m.useCallback)((async()=>{const t=await(0,Fe.fH7)({businessAccountId:e});"errors"in t||i((0,rt.mI)(t.terms))}),[e]),a=(0,m.useCallback)((async()=>{s(!0),await r(),s(!1)}),[r]);return(0,m.useEffect)((()=>{a()}),[a]),[t,n]}(),s=U("policies_settings"),r=(0,th.cI)({defaultValues:{termsAndConditions:"",returnPolicy:"",additionalInformation:""}}),{reset:a,handleSubmit:o,formState:l}=r;return(0,m.useEffect)((()=>{a(i)}),[a,i]),e?n?(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center",children:(0,z.jsx)(Dp.Z,{testId:"policies-loader"})}):(0,z.jsxs)(z.Fragment,{children:[!t&&(0,z.jsx)(SJ,{}),(0,z.jsxs)("div",{className:"body-content__content",children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(th.RV,{...r,children:(0,z.jsxs)("form",{onSubmit:o((async t=>{let{termsAndConditions:i,returnPolicy:n,additionalInformation:s}=t;await(0,Fe.ENr)({businessAccountId:e,termsAndConditions:i,returnPolicy:n,additionalInformation:s})})),children:[(0,z.jsx)(VJ,{}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(HJ,{name:GJ.TermsAndConditions,title:s("terms_and_conditions.title"),placeholder:s("terms_and_conditions.placeholder")}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(HJ,{name:GJ.ReturnPolicy,title:s("return_policy.title"),placeholder:s("return_policy.placeholder")}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(HJ,{name:GJ.AdditionalInformation,title:s("additional_information.title"),placeholder:s("additional_information.placeholder")}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)("div",{className:"u-float-right",children:(0,z.jsx)(ic.I,{type:ic.I.Type.Submit,styling:ic.I.Styling.Filled,size:ic.I.Size.Medium,disabled:l.isSubmitting,isLoading:l.isSubmitting,inline:!0,children:s("actions.submit")})})]})})]})]}):null})),BundleDiscountsSettings:wT((()=>{const e=U("settings.bundle_discounts"),t=(0,p.v9)(X),i=function(){const e=(0,p.I0)(),t=(0,p.v9)(ge),i=(0,p.v9)(Ps),n=(0,m.useMemo)((()=>t&&nt(t)),[t]);return(0,m.useEffect)((()=>{e(MZ.fetchSystemConfigurationRequest())}),[e]),(0,m.useMemo)((()=>i?{isLoading:!1,isDiscountEnabled:(null==n?void 0:n.isEnabled)||!1,availableDiscountFractions:i.discountFractions,selectedDiscounts:(null==n?void 0:n.discounts)||i.defaultDiscounts}:{isLoading:!0,isDiscountEnabled:!1,availableDiscountFractions:[],selectedDiscounts:[]}),[n,i])}(),[n,s]=(0,m.useState)(!1),[r,a]=(0,m.useState)(i);async function o(e){let{isEnabled:i,selectedDiscounts:n}=e;t&&(s(!0),await Fe.s6r({userId:t,isEnabled:i,discounts:n}),s(!1))}return(0,m.useEffect)((()=>{i.isLoading||a(i)}),[i]),(0,z.jsx)("div",{className:"body-content__content",children:r.isLoading?(0,z.jsx)(Mp,{size:Mp.Size.Large,testId:"bundle-discounts-settings-loader"}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(JJ,{isDisabled:n,isChecked:r.isDiscountEnabled,onChange:function(e){a((t=>({...t,isDiscountEnabled:e}))),o({isEnabled:e,selectedDiscounts:r.selectedDiscounts})}}),(0,z.jsx)(ah.Z,{text:e("hint")}),r.isDiscountEnabled&&(0,z.jsxs)(gt.Z,{testId:"bundle-discounts-selection-list",styling:gt.Z.Styling.Tight,children:[(0,z.jsx)(x.Z,{}),(0,z.jsx)(KJ,{isDisabled:n,selectedDiscounts:r.selectedDiscounts,discountFractions:r.availableDiscountFractions,onDiscountSelection:function(e){const t=(i=e,r.selectedDiscounts.map((e=>e.minimalItemCount===i.minimalItemCount?i:function(e,t){const i=Number(e.fraction),n=Number(t.fraction),s=n<i,r=n>i,a=e.minimalItemCount<t.minimalItemCount,o=e.minimalItemCount>t.minimalItemCount;return a&&r||o&&s}(e,i)?e:{...e,fraction:i.fraction})));var i;a((e=>({...e,selectedDiscounts:t}))),o({selectedDiscounts:t,isEnabled:r.isDiscountEnabled})}})]})]})})})),ForumSidebar:wT((()=>{const e=E(),t=U(),i=(0,p.v9)(Q),n=(0,p.v9)($),[s,r]=(0,m.useState)([]),[a,o]=(0,m.useState)(Ne.Idle),l=!(!i&&!n);(0,m.useEffect)((()=>{a===Ne.Idle&&e.desktops&&(async()=>{o(Ne.Pending);const e=await(0,Fe.RPn)();if("errors"in e)return void o(Ne.Failure);const t=e.forum_topics.slice(0,8);r(t.map((e=>pt(e)))),o(Ne.Success)})()}),[e,a]);const c=y()("u-ui-padding-top-x-large@portables",{row:e.phones});return(0,z.jsxs)("div",{className:c,children:[(0,z.jsx)("div",{className:e.phones?"u-overflow-hidden":void 0,children:(0,z.jsxs)(g.Z,{children:[(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[!!n&&(0,z.jsx)(ft,{url:Me.AnP,title:t("forum.sidebar.my_topics"),icon:"pencil",suffixCount:n}),!!i&&(0,z.jsx)(ft,{url:Me.Nei,title:t("forum.sidebar.saved_topics"),icon:"bookmark",suffixCount:i}),!e.desktops&&(0,z.jsx)(ft,{url:Me.Yms,title:"Forum news",icon:"speech-bubble",suffixCount:null})]}),e.phones&&(0,z.jsx)(h.Z,{})]})}),a===Ne.Success&&e.desktops&&(0,z.jsxs)(z.Fragment,{children:[l&&(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(Ft,{topics:s})]})]})})),PolicyFooter:wT((e=>{let{isDigitalLawEnabled:t,isBusinessInfoLinksEnabled:i,onlineComplaintUrl:n,isStatic:s,noDivider:r}=e;const a=U("footer.policy.items"),o=(0,p.v9)(Bl),l=(0,p.v9)(Ul),{host:c}=xc(),d=y()("privacy-footer",s&&"privacy-footer--static"),u=l===Kn.California?a("cookie_settings_us"):a("cookie_settings");return(0,z.jsx)("footer",{className:d,children:(0,z.jsx)("div",{className:"privacy-footer__content",children:(0,z.jsxs)("div",{className:"container",children:[!r&&(0,z.jsx)(h.Z,{}),(0,z.jsxs)("div",{className:"privacy-footer__content__links",children:[(0,z.jsx)("a",{href:(0,ys.E_)(c)+Me.hOY,children:a("privacy_policy")}),(0,z.jsx)("a",{href:Me.ljN,children:a("cookie_policy")}),o&&(0,z.jsx)("button",{type:"button",onClick:function(){(0,ls.ap)()},children:u}),(0,z.jsx)("a",{href:Me.qyY,children:a("terms_and_conditions")}),t&&(0,z.jsx)("a",{href:Me.Nc0,children:a("our_platform")}),i&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("a",{href:Me.$ru,"data-testid":"privacy-footer-pro-sale-term-link",children:a("pro_terms_of_sale")}),(0,z.jsx)("a",{href:Me.vK_,"data-testid":"privacy-footer-pro-use-term-link",children:a("pro_terms_of_use")})]}),n&&(0,z.jsx)("a",{href:n,children:a("online_complaints")})]})]})})})})),BackToTopButton:wT(o0),PrivacyPolicyAccordion:wT((e=>{let{title:t,content:i}=e;const[n,s]=(0,m.useState)(!1),r=(0,p.v9)(l0);return(0,m.useEffect)((()=>{n!==r&&s(!n)}),[r,n]),(0,z.jsx)(g$,{title:t,content:i,isExpanded:n,headerId:"privacy_policy_accordion_header",bodyId:"privacy_policy_accordion_body"})})),ToggleAccordionsButton:wT((()=>{const e=U("privacy_policy_accordion"),t=(0,p.I0)(),i=(0,p.v9)(l0),n=e(i?"collapse_all":"expand_all");return(0,z.jsx)(ic.I,{size:ic.I.Size.Small,onClick:()=>{t(lO.setPrivacyPolicyAccordionsExpanded({isExpanded:!i}))},deprecatedIcon:(0,z.jsx)(ht.Z,{name:i?"x":"plus",color:ht.Z.Color.Primary,size:ht.Z.Size.XSmall}),styling:ic.I.Styling.Flat,inline:!0,text:n})})),BuyerProtectionFeeDiscountNote:wT(Dg),RequestDataExport:wT((()=>{const e=U("download_account_data"),t=(0,p.I0)(),[i,n]=(0,m.useState)(),[s,r]=(0,m.useState)(!1),[a,o]=(0,m.useState)(!1),[l,c]=(0,m.useState)(!1),d=(0,p.v9)(X),u=(0,p.v9)(K),g=(0,p.v9)((e=>fp(e,bp.RequestDataExport))),h=(0,p.v9)(Wt("react_data_export_email_confirmation_sent")),f=u?"<b>".concat(u,"</b>"):"",y=XY("");(0,m.useEffect)((()=>{d&&(async()=>{const e=await(0,Fe.fLq)(d);"errors"in e||n(e.data_export_status)})()}),[d]),(0,m.useEffect)((()=>{g||t(mp({type:bp.RequestDataExport}))}),[g,t]);const v=async()=>{d&&u&&("errors"in await(0,Fe.AH9)({userId:d,email:u})?c(!0):(0,ls.ru)((0,ys.Iq)(y,{is_email_confirmation_sent:!0})))},_=t=>(0,z.jsx)(ic.I,{text:e("actions.dont_have_access"),url:t});return l?(0,z.jsx)(sw,{}):(0,z.jsxs)("div",{className:"narrow-container u-text-wrap",children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(xt.Z,{text:e("title"),type:xt.Z.Type.Heading,alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),i===c0.EmailNotVerified?(()=>{const t={};return h&&y?t.onClick=v:t.url=Me.sAE,(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:e("confirm_email_text",{email:f}),html:!0}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(ic.I,{...t,text:e("actions.send_confirmation_email"),styling:ic.I.Styling.Filled}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(_p,{type:bp.NoAccessToOldEmail,render:_})]})})():(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:e("request_data_text",{email:f}),html:!0}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),i===c0.ExportPending?(0,z.jsx)(ic.I,{text:e("actions.request_pending"),styling:ic.I.Styling.Filled,theme:"muted"}):(0,z.jsx)(ic.I,{text:e("actions.request_data"),styling:ic.I.Styling.Filled,onClick:async()=>{d&&(o(!0),"errors"in await(0,Fe.hFg)({userId:d,fingerprint:await $M()})?c(!0):y?(0,ls.ru)((0,ys.Iq)(y,{is_data_sent:!0})):r(!0))},disabled:a}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(xt.Z,{text:e("note",{contactUsLink:(()=>{const t=(0,ys.Kf)({ch:Be.Si.DataExport,faq_entry_id:null==g?void 0:g.id,allow_direct:1});return(0,z.jsx)(xt.Z,{theme:"primary",as:"span",type:xt.Z.Type.Caption,children:(0,z.jsx)("a",{href:"".concat(Me.Kss,"?").concat(t),children:e("contact_us_link")})})})()}),type:xt.Z.Type.Caption})]})]}),s&&(0,z.jsx)(bJ,{deprecatedIcon:(0,z.jsx)(ht.Z,{name:"envelope-filled",color:ht.Z.Color.Primary}),body:e("sent_notification")})]})})),ConfirmDataExport:wT((e=>{let{code:t,userId:i}=e;const n=U("download_account_data.export_confirmation"),[s,r]=(0,m.useState)(!1),[a,o]=(0,m.useState)(!0);return(0,m.useEffect)((()=>{t&&i&&(async()=>{const e=await(0,Fe._RO)({userId:i,code:t});o(!1),e.code===pm.Q.Ok&&r(!0)})()}),[t,i]),(0,z.jsxs)("div",{className:"narrow-container",children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),!a&&(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(xt.Z,{text:n(s?"title":"error.title"),type:xt.Z.Type.Heading,alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent}),(0,z.jsx)(x.Z,{size:x.Z.Size.X3Large}),(0,z.jsx)(xt.Z,{text:n(s?"body":"error.body"),html:!0})]})]})})),ItemViewItems:wT(F0),InAppMessage:wT((()=>{const[e,t]=(0,m.useState)(!0),{track:n}=vi(),{notificationInAppMessage:s,modalInAppMessage:r}=function(){const e=(0,m.useContext)(Im),t=N0(e.modalInAppMessageStore,vg),i=N0(e.fullScreenInAppMessageStore,_g);return{modalInAppMessage:null!=t?t:i,notificationInAppMessage:N0(e.slideUpInAppMessageStore,yg)}}(),a=null!=s?s:r,o=e=>{if(!e)return;const t=JSON.stringify({campaign_name:e.campaignName,campaign_message_name:e.campaignMessageName,canvas_name:e.canvasName,canvas_variant_name:e.canvasVariantName});n(Ri({target:qm.CrmInAppMessageDismiss,screen:$t.CrmInAppMessage,targetDetails:t}))},l=()=>{t(!1),o(r)},c=(0,m.useCallback)((()=>{a&&async function(e){let{original:t}=e;const{logInAppMessageImpression:n}=await i.e(277).then(i.bind(i,58481));n(t)||(0,ug.OW)(t.message,"in-app-impression",cg.oQ.InAppMessage,t.extras.tracking)}(a)}),[a]);return s?(0,z.jsx)(L0,{onEnter:c,inAppMessage:s,onClose:e=>{null!=s&&s.url||e===vJ.Auto?o(s):s&&aT(s)},onLinkClick:()=>{null!=s&&s.url&&aT(s)}}):r?(0,z.jsx)(E0,{isOpen:e,inAppMessage:r,onClose:l,onLinkClick:e=>{if(!r)return;const t=JSON.stringify({campaign_name:r.campaignName,campaign_message_name:r.campaignMessageName,canvas_name:r.canvasName,canvas_variant_name:r.canvasVariantName,url:e});n(Ri({target:qm.CrmMessageLink,screen:$t.CrmInAppMessage,targetDetails:t}))},onEnter:c,onPrimaryButtonClick:()=>{r&&(r.primaryButtonUrl||l(),oT(r,0))},onSecondaryButtonClick:()=>{r&&(r.secondaryButtonUrl||l(),oT(r,1))}}):null})),InpostAbTestGlobalTracking:wT((()=>(Xn({abTestName:"inpost_economy_integration_2d",shouldTrackOnce:!0,shouldTrackExpose:!0}),Xn({abTestName:"inpost_economy_integration_7d",shouldTrackOnce:!0,shouldTrackExpose:!0}),null))),DelayedPublicationStatusBox:wT(R0),ProcessingListingStatusBox:wT(A0),ItemStatus:wT(A2),ItemBuyBundleButton:wT((e=>{let{url:t,title:i,itemId:n}=e;return(0,z.jsx)(tp,{url:t,itemId:n,screen:$t.Item,children:e=>{let{onClick:t}=e;return(0,z.jsx)(ic.I,{text:i,size:ic.I.Size.Medium,styling:ic.I.Styling.Filled,onClick:t})}})})),ItemPriceHeading:wT(U0),ItemBuyerOfferButton:wT(W0),HeaderLogo:wT(K0),DirectDonationStatus:wT(Vde),HelpCenterSearch:wT(k9),HelpCenterTransactionItem:wT((e=>{let{transaction:t,cellOptions:i}=e;const n=U("user"),s=(0,p.v9)(Nc),{price:r,statusTitle:a,itemTitle:o,itemPhoto:l,itemPath:c,bundleCount:d,oppositeUserUsername:u,oppositeUserPhoto:m,oppositeUserPath:g}=t,h=()=>u||n("deleted_user"),x=e=>t=>(0,z.jsx)("a",{href:e,children:t});return(0,z.jsx)(gt.Z,{prefix:(()=>{const e=c||void 0,t=(0,z.jsx)(P9,{condition:!(null!=i&&i.url||!e),wrapper:x(e),children:(0,z.jsx)(Kl.U,{src:l,alt:o,label:null==d?void 0:d.toString(),size:Kl.U.Size.Large,styling:Kl.U.Styling.Rounded})}),n=g||void 0,s=(0,z.jsx)(P9,{condition:!(null!=i&&i.url||!n),wrapper:x(n),children:(0,z.jsx)(Kl.U,{src:m,alt:h(),size:Kl.U.Size.Regular,styling:Kl.U.Styling.Circle})});return(0,z.jsx)(w9.Z,{primary:t,secondary:s})})(),title:o,body:(()=>{let e;return r&&(e=Ua(r,s)),[h(),e,a].filter(Boolean).join("  ")})(),...i})})),MainFooter:wT((e=>{let{isDigitalLawEnabled:t,isBusinessInfoLinksEnabled:i,onlineComplaintUrl:n}=e;return(0,z.jsx)("footer",{className:"main-footer",children:(0,z.jsx)("div",{className:"main-footer__content tear tear--top",children:(0,z.jsx)("div",{className:"container",children:(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[(0,z.jsx)(F9,{isBusinessInfoLinksEnabled:i}),(0,z.jsx)(D9,{}),(0,z.jsx)(L9,{isDigitalLawEnabled:t,isBusinessInfoLinksEnabled:i,onlineComplaintUrl:n})]})})})})})),ResolveIssueButton:wT(G9),LockerTracker:wT((e=>{let{isDevelopmentEnv:t}=e;const i=U("vlockers.tracker"),n=(0,p.v9)(ce),[s,r]=(0,m.useState)(""),a=e=>{(0,v.isEmpty)(s)?e.preventDefault():(0,ls.ru)("https://".concat(t?"sandbox.":"","customers.vintedgo.com").concat((()=>{const e=["en","fr"].includes(n)?"/".concat(n):"",t="".concat(e,"/vcarrier/tracking");return(0,v.isEmpty)(s)?t:"".concat(t,"?code=").concat(s)})()))};return(0,z.jsx)(g.Z,{children:(0,z.jsx)("div",{className:"u-overflow-hidden",children:(0,z.jsxs)(gt.Z,{theme:"primary",styling:gt.Z.Styling.Wide,children:[(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsx)(ht.Z,{name:"truck",size:ht.Z.Size.Medium,color:ht.Z.Color.GreyscaleLevel7}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(xt.Z,{text:i("title"),type:xt.Z.Type.Heading,theme:"inverse"})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),(0,z.jsx)(xt.Z,{text:i("body"),theme:"inverse"}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsx)("div",{className:"vlockers__tracker-input",children:(0,z.jsx)(Tm.N,{name:"tracking_code",placeholder:i("input.placeholder"),onChange:e=>{r(e.currentTarget.value)},onKeyDown:e=>{e.key===Lm.Enter&&a(e)},onValueClear:()=>{r("")}})}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(ic.I,{text:i("input.button"),onClick:a,styling:ic.I.Styling.Filled,size:ic.I.Size.Medium,inverse:!0,inline:!0})]})]})})})})),LockerMap:wT((e=>{let{isDevelopmentEnv:t}=e;const i=U("vlockers"),n=E(),s=(0,m.useRef)(null),r=(0,p.v9)(Nb),a=(0,p.v9)(Wt("web_show_vlockers_available_sizes")),[o,l]=(0,m.useState)(void 0),[c,d]=(0,m.useState)(void 0),[u,f]=(0,m.useState)([]),[_,b]=(0,m.useState)(V9.Map),[j,S]=(0,m.useState)(null),[Z,I]=(0,m.useState)(null),C=(0,m.useCallback)((e=>({lat:Number(e.latitude),lng:Number(e.longitude)})),[]),k=(0,m.useCallback)((()=>{if((0,v.isEmpty)(u))return null;const e=new google.maps.LatLngBounds;return u.forEach((t=>{e.extend(C(t))})),e}),[u,C]),w=(0,m.useCallback)((()=>{const e=k();e&&(null==o||o.fitBounds(e))}),[o,k]),P=(0,m.useCallback)((()=>{j&&S(null)}),[j]);if((0,m.useEffect)((()=>{!async function(){var e;const i=(e=>{const t=e?"vcarrier-sandbox.svc.vinted.com":"vcarrier.svc.vinted.com";return new ak.Z({baseURL:"https://".concat(t)},[nK.ud,nK.Ch])})(t);let n=null===(e=document.querySelector('meta[name="accept-language"]'))||void 0===e?void 0:e.getAttribute("content");n||(n=(0,ls.Kd)());const s=n.split("-")[0],r=await i.get("/public/v1/points",{params:{locale:s}});"errors"in r||f(r)}()}),[t]),(0,m.useEffect)((()=>{let e=null;if(o)return o.addListener("click",(()=>{e=setTimeout(P,200)})),o.addListener("dblclick",(()=>{e&&clearTimeout(e)})),()=>{e&&clearTimeout(e),google.maps.event.clearListeners(o,"click"),google.maps.event.clearListeners(o,"dblclick")}}),[o,P,w]),(0,m.useEffect)((()=>{o&&((0,v.isEmpty)(u)||function(){const e=new google.maps.LatLngBounds;u.forEach((t=>{const i=Number(t.latitude),n=Number(t.longitude);e.extend(_Z({latitude:i,longitude:n}))})),e&&(null==o||o.fitBounds(e))}())}),[u,o]),(0,m.useEffect)((()=>{var e;null===(e=s.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"nearest"})}),[_]),(0,v.isEmpty)(u))return null;const T=()=>S(null),F=(e,t)=>{l(e),d(t),w()},N=e=>()=>{var t;S(e),null===(t=s.current)||void 0===t||t.scrollIntoView({behavior:"smooth",block:"nearest"})},L=e=>()=>{S(e),_===V9.List&&n.portables&&b(V9.Map)},O=e=>()=>{n.portables||I(e)},R=e=>()=>{const t=null==o?void 0:o.getZoom();t&&(null==o||o.panTo(C(e)),null==o||o.setZoom(t+1))},D=()=>{const e=null==o?void 0:o.getZoom();e&&(null==o||o.setZoom(e+1))},A=()=>{const e=null==o?void 0:o.getZoom();e&&(null==o||o.setZoom(e-1))},M=e=>b(e.id),B=e=>(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,theme:"transparent",prefix:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),(0,z.jsx)(ht.Z,{name:"location-pin",color:ht.Z.Color.GreyscaleLevel4,size:ht.Z.Size.Small})]}),title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:(0,v.compact)([e.address,e.city,e.country_code]).join(", ")})}),q=e=>e?(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:e}):null,V=(e,i,n)=>e&&n===(null==j?void 0:j.code)?"locker"===e?(0,z.jsx)(B9,{pointId:i,isDevelopmentEnv:t}):"parcel_shop"===e?(0,z.jsx)(q9,{}):null:null,H=()=>(0,v.isEmpty)(u)?null:(0,z.jsx)(kp,{children:u.map((e=>(0,z.jsx)("span",{ref:e.code===(null==j?void 0:j.code)?s:null,onMouseEnter:O(e.code),onMouseLeave:O(null),children:(0,z.jsx)(gt.Z,{title:q(e.name),body:B(e),type:gt.Z.Type.Navigating,onClick:L(e),highlighted:e.code===(null==j?void 0:j.code),chevron:!0})},e.code)))}),G=()=>(0,z.jsxs)("div",{className:"vlockers__map",children:[(0,z.jsx)(tj,{googleApiKey:r,defaultCenter:{lat:Number(u[0].latitude),lng:Number(u[0].longitude)},defaultZoom:4,mapOptions:{disableDefaultUI:!0,clickableIcons:!1,minZoom:3,gestureHandling:"greedy",scaleControl:!0},onMapLoaded:F,useGoogleInternalApi:!0,children:u.map((e=>(0,z.jsx)(M9,{mapsReference:c,lat:Number(e.latitude),lng:Number(e.longitude),isActive:e.code===(null==j?void 0:j.code),isMouseOverListElement:e.code===Z,onClick:N(e),onDoubleClick:R(e)},e.code)))}),(0,z.jsx)(U9,{onZoomIn:D,onZoomOut:A}),!j||n.desktops?null:(0,z.jsx)("div",{className:"vlockers__map-active-point-details",children:(0,z.jsx)(g.Z,{styling:g.Z.Styling.Elevated,children:(0,z.jsxs)(nc.Z,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,title:j.name,suffix:(0,z.jsx)(ic.I,{deprecatedIconName:"x",size:ic.I.Size.Medium,styling:ic.I.Styling.Flat,onClick:T,inline:!0})}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,body:(0,z.jsxs)(z.Fragment,{children:[B(j),a&&V(j.point_type,j.id,j.code)]})})]})})})]});return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:i("map.title"),type:xt.Z.Type.Heading}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(g.Z,{children:(0,z.jsx)("div",{className:"vlockers-container",children:n.desktops?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"vlockers__scrollable-list",children:[(0,z.jsx)(yt.Z,{text:(0,z.jsx)(xt.Z,{text:i("map.list.title"),type:xt.Z.Type.Subtitle,format:!0}),type:yt.Z.Type.Stacked}),(0,z.jsx)("div",{className:"vlockers-container",children:(0,z.jsx)("div",{className:"vlockers__scrollable-list__content",children:a?(0,v.isEmpty)(u)?null:(0,z.jsx)(kp,{children:u.map((e=>(0,z.jsx)("span",{ref:e.code===(null==j?void 0:j.code)?s:null,onMouseEnter:O(e.code),onMouseLeave:O(null),children:(0,z.jsx)(gt.Z,{title:q(e.name),body:(0,z.jsxs)(z.Fragment,{children:[B(e),V(e.point_type,e.id,e.code)]}),type:gt.Z.Type.Navigating,onClick:L(e),highlighted:e.code===(null==j?void 0:j.code)})},e.code)))}):H()})})]}),(0,z.jsx)(h.Z,{orientation:h.Z.Orientation.Vertical}),G()]}):(()=>{const e=[{id:V9.Map,title:i("tab.map")},{id:V9.List,title:i("tab.list")}];return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(c1.Z,{items:e,width:c1.Z.Width.Parent,activeItemId:_,onClick:M}),(0,z.jsx)(h.Z,{}),(0,z.jsx)("div",{className:y()({hidden:_===V9.List,"vlockers-container":_===V9.Map}),children:G()}),(0,z.jsx)("div",{className:y()({hidden:_===V9.Map,vlockers__tabs__list:_===V9.List}),children:H()})]})})()})})]})})),ServiceFeeIncludedTitle:wT(Wg),FaqContent:wT(VQ),ItemOfflineVerificationBlock:wT(J$),VacationNotification:wT((()=>{const e=(0,p.v9)(W),t=(0,p.v9)(Wt("portal_closure_stage_3")),[i,n]=(0,m.useState)(!1),s=U("vacation_notification");return t?null:null!=e&&e.is_on_holiday?(0,z.jsx)("div",{className:"u-ui-margin-vertical-x-large",children:(0,z.jsx)(g.Z,{children:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,prefix:(0,z.jsx)(ht.Z,{name:"umbrella",color:ht.Z.Color.GreyscaleLevel3}),body:s("title"),suffix:(0,z.jsx)(ic.I,{text:s("actions.end"),onClick:async function(){e&&(n(!0),await(0,Fe.KB9)(e.id),(0,ls.sl)())},styling:ic.I.Styling.Filled,size:ic.I.Size.Medium,isLoading:i,disabled:i}),testId:"vacation-notification"})})}):null})),OfflineVerificationStatus:wT(W9),GoogleAnalyticsTracker:wT((()=>{const{googleAnalyticsTrack:e}=hK();return(0,m.useEffect)((()=>{e({event:Ob.pageLoad})}),[e]),null})),ItemBuyBundleBanner:wT(X9),ItemAskSellerButton:wT(Y9),ItemPhotoGrid:wT(e2),ItemAlert:wT(t2),ItemDetails:wT(i2),ComplaintEscalation:wT(Zue),ItemActions:wT(y2),GlobalTwoFAModal:wT((()=>{const[e,t]=(0,m.useState)(null);return(0,m.useEffect)((()=>{const e=e=>{t(e.detail)};return window.addEventListener("twoFARequired",e),()=>{window.removeEventListener("twoFARequired",e)}}),[]),e?(0,z.jsx)(cp.Z,{show:!!e,closeOnOverlay:!0,defaultCallback:()=>{t(null),window.dispatchEvent(new Event(Be.nC))},testId:"global-2fa-modal",children:(0,z.jsx)(b2,{entityId:e,onCodeSent:()=>{t(null),window.dispatchEvent(new Event(Be.Xn))},onError:()=>{t(null)}})}):null})),ItemFeed:wT(N2),ItemSidebar:wT(M2),ItemBreadcrumbs:wT(E2),ItemContentSection:wT(B2),FlashMessage:wT((()=>{const[e,t]=(0,m.useState)((()=>{const e=(0,vc.St)(j2);if(!e)return null;(0,vc.lD)(j2);try{const t=JSON.parse(e);if((e=>"type"in e&&"message"in e)(t))return t}catch(e){return null}return null})()),i=U("actions"),n=U("flash_messages"),s=Z2(),{searchParams:{flash_message_code:r}}=xc();(0,m.useEffect)((()=>{r&&"string"==typeof r&&t({type:S2.Success,message:n(r)})}),[r,n]);return e&&s?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{theme:"success",title:(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center",children:[(0,z.jsx)(ht.Z,{name:I2[e.type],color:C2[e.type],size:ht.Z.Size.Medium,display:ht.Z.Display.Block}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large,orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(xt.Z,{text:e.message,theme:"inherit",bold:!0})]}),suffix:(0,z.jsx)(ic.I,{onClick:()=>t(null),styling:ic.I.Styling.Flat,deprecatedIcon:(0,z.jsx)(ht.Z,{name:"x",color:ht.Z.Color.GreyscaleLevel7}),aria:{"aria-label":i("close")}})}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})]}):null}))}),d().register({BumpItems:wT((()=>{const e=(0,m.useRef)([]),t=(0,p.I0)(),{item_ids:i}=xc().searchParams,{track:n}=vi(),s=(0,p.v9)(X),r=(0,p.v9)(jl),a=(0,p.v9)(wo),o=(0,p.v9)(hM),l=(0,p.v9)(cM),c=(0,p.v9)(zo),d=(0,p.v9)(dM),g=(0,m.useMemo)((()=>(i?[...i]:[]).map(Number)),[i]);(0,m.useEffect)((()=>{t(iL.setSelectedItems({itemIds:g}))}),[t,g]);const h=()=>{!c&&s&&t(CN.getUserItemsRequest({userId:s,filter:Ta.Pushable}))},f=e=>{const i=e.map((e=>{let{id:t}=e;return t}));t(iL.setSelectedItems({itemIds:i}))},y=()=>"one-fifth",v=t=>{const{item:i,index:s}=t;e.current.includes(i.data.id)||(n(Bi({id:i.data.id,position:s,contentType:z0.Item,contentSource:Es.UserItems,itemOwnerId:i.data.user.id})),e.current.push(i.data.id))},_=(e,t,i)=>{n(qi({position:t,id:e.id,contentType:z0.Item,contentSource:Es.UserItems})),n(Ri({target:i?qm.AddItemToBundle:qm.RemoveItemFromBundle,targetDetails:e.id.toString()}))};return s?(0,z.jsx)(cc,{FallbackComponent:cc.ComponentError,preventLog:!0,onError:_V,children:(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column u-fill-viewport",children:[(0,z.jsx)("div",{className:"action-header",children:(0,z.jsx)("div",{className:"container",children:(0,z.jsx)(X2,{userId:s})})}),(0,z.jsx)("div",{className:"u-flex-grow",children:(0,z.jsx)("div",{className:"container",children:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,children:(0,z.jsx)(xt.Z,{text:(0,z.jsx)(vt.Z,{id:"bump_items.page_title"}),type:xt.Z.Type.Heading})}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),d.fetchUiState===Ne.Pending?(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center",children:(0,z.jsx)(Dp.Z,{size:Dp.Z.Size.Large})}):(0,z.jsx)(W2,{items:r,selectedItems:o,loadItems:h,isLoading:a===Ne.Pending,endReached:!!c,viewingSelf:!0,updateSelectedItems:f,showFavourite:!0,itemWidthResolver:y,onItemVisible:v,onItemClick:_,emptyState:(0,z.jsx)(tc.Z,{title:(0,z.jsx)(vt.Z,{id:"bump_items.empty_state.multiselect.title"}),body:(0,z.jsx)(vt.Z,{id:"bump_items.empty_state.multiselect.body"}),animation:(0,z.jsx)(u.Z,{animationUrl:"/assets/animations/closet-empty-state.json"})})}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})]})})}),(0,z.jsx)("div",{className:"action-footer",children:(0,z.jsx)("div",{className:"container",children:(0,z.jsx)(J2,{selectedItems:o,onCheckout:()=>{n(Ri({target:qm.PushUpBundle,targetDetails:l.toString()})),t(SV({}))}})})}),(0,z.jsx)(E$,{isInitiatedFromMultiSelect:!0,onCheckoutSuccess:()=>{s&&(0,ls.ru)((0,Me.G0B)(s))}})]})}):null})),BundleItems:wT((e=>{var t;let{isDigitalRepublicLawEnabled:i,selectedItemId:n,userId:s,transactionId:r,itemId:a,homepageSessionId:o}=e;const[l,c]=(0,m.useState)(!1),[d,h]=(0,m.useState)(!1),f=(0,p.v9)(yl),y=(0,p.v9)(ep),_=(0,p.v9)(Ym),b=(0,p.v9)(Km),j=(0,p.v9)(Jm),S=(0,p.v9)(Lo),Z=(0,p.v9)(Oo),I=(0,p.v9)(Qm),C=(0,p.v9)(Ro),k=(0,p.v9)(Do),w=(0,p.v9)(Nc),P=(0,p.I0)(),{track:T}=vi(),F=E(),N=U("bundle_items"),{relativeUrl:L,replaceHistoryState:O,urlQuery:R}=xc(),D=(0,p.v9)(Wt("instant_bundles")),A=(null===(t=Xn({abTestName:"instant_bundles"}))||void 0===t?void 0:t.variant)===$k.On,M=D&&A;(0,m.useEffect)((()=>{const e=(e=>{const t=(0,ys.oZ)(e)[t3];return Array.isArray(t)?null:t||null})(R);if(!e)return;P(Gm.resumeBundling({bundleTrackingId:e}));const t=((e,t)=>(0,ys.Sd)(e,t,[t3]))(L,R);O(t)}),[P,L,O,R]),(0,m.useEffect)((()=>{(async()=>{if(!a)return;const e=await(0,Fe.rVG)({id:a});if("errors"in e)return;const{item:t}=e;t&&(P(CN.setUserBundleItems({items:[t]})),P(Gm.setSelectedItems({itemIds:[t.id],userId:s})))})()}),[P,a,s]),(0,m.useEffect)((()=>{(async()=>{if(!r)return;const e=await(0,Fe.foU)({id:r});"errors"in e||(P(CN.setUserBundleItems({items:e.transaction.order.items})),P(Gm.setSelectedItems({itemIds:e.transaction.order.item_ids,userId:s})))})()}),[P,r,s]),(0,m.useEffect)((()=>{if(!n)return;const e=[n];P(Gm.setSelectedItems({itemIds:e,userId:s}))}),[P,n,s]),(0,m.useEffect)((()=>{f.length&&h(f[0].user.business)}),[f]);const B=()=>{c(!0),T(Ri({target:qm.PhysicalAuthenticityBuyer}))},q=()=>c(!1),V=()=>{T(Ri({target:qm.BundlesPolicyLink}))};return(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column u-fill-viewport",children:[(0,z.jsx)("div",{className:"action-header",children:(0,z.jsx)("div",{className:"container",children:(0,z.jsx)(i3,{pathBack:(0,Me.G0B)(s),discountHint:null==b?void 0:b.discountText})})}),(0,z.jsx)("div",{className:"u-flex-grow",children:(0,z.jsx)("div",{className:"container",children:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(gt.Z,{styling:F.tabletsUp?gt.Z.Styling.Tight:gt.Z.Styling.Narrow,title:(0,z.jsx)(xt.Z,{text:N("title"),type:xt.Z.Type.Heading,bold:!0}),body:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:N("description"),bold:!0}),(()=>{const e={"policy-link":e=>(0,z.jsx)("a",{href:Me.Fj7,target:"_blank",onClick:V,rel:"noreferrer",children:e})};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{}),(0,z.jsx)(xt.Z,{text:N("policy_description",e),type:xt.Z.Type.Caption})]})})(),i&&(0,z.jsx)(e3,{}),(()=>{if(!C)return null;if(!k)return null;const e={"how-it-works":e=>(0,z.jsx)("span",{onClick:B,children:(0,z.jsx)(xt.Z,{clickable:!0,text:e,type:xt.Z.Type.Subtitle,testId:"offline-verification-info-banner-link"})})},t=Ua(k,w);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(g.Z,{experimentalTheme:"exposeLightExperimental",testId:"offline-verification-info-banner",children:(0,z.jsx)(gt.Z,{prefix:(0,z.jsx)(ht.Z,{name:"info-circle-filled",color:ht.Z.Color.Expose}),body:(0,z.jsx)(xt.Z,{text:N("authenticity_note",e),type:xt.Z.Type.Subtitle,theme:"amplified"}),theme:"transparent"})}),(0,z.jsx)(pP,{show:l,onClose:q,verificationFee:t})]})})()]})}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(W2,{items:vo(f),isLoading:S===Ne.Pending,endReached:!!Z,loadItems:()=>{Z||P(CN.getUserBundleItemsRequest({userId:s,selectedItemId:n}))},selectedItems:vo(y),onItemVisible:e=>{const t=[],{item:i,index:n}=e;if(t.includes(i.data.id))return;const s=Bi({id:i.data.id,position:n,contentType:z0.Item,contentSource:Es.BundleItems,itemOwnerId:i.data.user.id});T(s),t.push(i.data.id)},onItemClick:(e,t,i)=>{T(qi({position:t,id:e.id,contentType:z0.Item,contentSource:Es.BundleItems})),T(Ri({screen:$t.Bundling,target:i?qm.AddItemToBundle:qm.RemoveItemFromBundle,targetDetails:JSON.stringify((0,v.omitBy)({item_id:e.id,bundle_id:I,transaction_id:r},v.isNil))}))},updateSelectedItems:e=>{const t=e.map((e=>{let{id:t}=e;return t}));P(Gm.setSelectedItems({itemIds:t,userId:s}))},showFavourite:!0,showItemFeeBreakdown:!1,emptyState:(0,z.jsx)(tc.Z,{animation:(0,z.jsx)(u.Z,{animationUrl:"".concat(Be.Fv,"/assets/animations/closet-empty-state.json")}),title:N("empty_state.multiselect.title"),body:N("empty_state.multiselect.body")})})]})})}),(0,z.jsx)("div",{className:"action-footer",children:(0,z.jsx)("div",{className:"container",children:(0,z.jsx)(l3,{bundleSummary:b,instantBundleSummary:j,transactionId:r,selectedItems:y,selectedItemIds:_,bundleTrackingId:I,isSellerBusiness:d,isInstantBundlesFeatureEnabled:M,homepageSessionId:o})})})]})})),Catalog:wT((e=>(0,z.jsx)(cc,{FallbackComponent:cc.ComponentError,preventLog:!0,onError:$4,children:(0,z.jsx)(A5,{...e})}))),Captcha:wT((()=>{const{track:e}=vi();return(0,z.jsxs)("div",{className:"narrow-container u-margin-auto",children:[(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large}),(0,z.jsx)(LK,{onComplete:function(t){var i,n,s;const r=null===(i=window.webkit)||void 0===i||null===(n=i.messageHandlers)||void 0===n?void 0:n.captchaComplete;var a;r?r.postMessage(t):null!==(s=window.Android)&&void 0!==s&&s.captchaComplete&&(null===(a=window.Android)||void 0===a||a.captchaComplete(t)),e({event:"user.resolve_captcha"})}})]})})),ChangePhoneNumber:wT((()=>{const e=U("settings.security.change_phone_number"),[t,i]=(0,m.useState)(!1),[n,s]=(0,m.useState)(),[r,a]=(0,m.useState)(),[o,l]=(0,m.useState)(),c=(0,p.v9)(X),d=XY(Me.YFw),u=(0,p.v9)(de),{register:g,handleSubmit:h,setError:f,getValues:y,formState:{isSubmitting:v,errors:_}}=(0,th.cI)({mode:"onSubmit"});(0,m.useEffect)((()=>{u||(0,ls.ru)(Me.KPt)}),[u]);const b=fh(_),j=async e=>{let{current_phone:t,number:n}=e;if(!c)return;const r=await(0,Fe.SlO)({userId:c,currentNumber:t,newNumber:n,fingerprint:await $M()});"errors"in r?(e=>{const{payload:t,errors:n,code:r,message:a}=e;n.length?n.forEach((e=>{let{field:t,value:i}=e;(0,_i.IF)(t,U5)?f(t,{type:"manual",message:i}):f(U5.NewPhone,{type:"manual",message:i})})):t?(i(!0),s({text:t.body,title:t.title})):r===pm.Q.ServerError&&l(a)})(r):a(r.phone_number)};return Um((()=>j(y()))),(0,z.jsxs)("div",{className:"narrow-container",children:[r?r?(0,z.jsx)(_2,{maskedNumber:r.number,twoFAId:r.two_fa_id,verificationType:v2.Phone,nextResendAvailableIn:r.next_resend_available_in,showResend:r.show_resend_option,refUrl:d}):null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(xt.Z,{width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,type:xt.Z.Type.Heading,text:e("title")}),(0,z.jsxs)("form",{onSubmit:h(j),children:[(0,z.jsx)(fb.M,{...g(U5.CurrentPhone),title:e("old_phone_number"),validation:hh(b(U5.CurrentPhone)),placeholder:e("placeholder"),testId:"old-phone-number"}),(0,z.jsx)(fb.M,{...g(U5.NewPhone),title:e("new_phone_number"),validation:hh(b(U5.NewPhone))||e("note"),placeholder:e("placeholder"),testId:"new-phone-number"}),(0,z.jsx)(ic.I,{type:ic.I.Type.Submit,disabled:v,text:e("button"),styling:ic.I.Styling.Filled})]})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(ah.Z,{alignment:ah.Z.Alignment.Center,text:e("help",{get_help_link:(0,z.jsx)(_p,{type:bp.PhoneChange,render:t=>(0,z.jsx)("a",{href:t,children:e("get_help")})})})})]}),(0,z.jsx)(M5,{isOpen:t,onClose:()=>i(!1),title:(null==n?void 0:n.title)||"",text:(null==n?void 0:n.text)||""}),o&&(0,z.jsx)(bJ,{body:o,onClose:()=>l(null)})]})})),Checkout:wT((()=>{const{urlQuery:e}=xc(),t=(e=>{const{transaction_id:t}=(0,ys.oZ)(e),i=Number(t);return Number.isNaN(i)?null:i})(e),i=(0,p.I0)(),{track:n}=vi(),s=U(),r=(0,p.v9)(gZ.getPayment),a=(0,p.v9)(gZ.getOrderItems),o=(0,p.v9)(gZ.getOrderPrice),l=(0,p.v9)(gZ.getPaymentError),c=(0,p.v9)(gZ.getHasChecksumError),d=(0,p.v9)(gZ.getHasShippingDiscountError),u=(0,p.v9)(gZ.getIsCheckoutUiLoaded),g=(0,p.v9)(gZ.getIsKycConfirmationNeeded),h=(0,p.v9)(gZ.getIsTwoFactorVerificationNeeded),f=(0,p.v9)(gZ.getOfflineVerificationService),y=(0,p.v9)(gZ.getIsPaymentFailedAfterRedirect),v=(0,p.v9)(gZ.getIsPaymentProcessingTakesTooLong);return Xn({abTestName:"paypal_removal_recommend_and_incentivize",shouldTrackExpose:!0}),Xn({abTestName:"trustly_open_banking",shouldTrackExpose:!0}),((e,t)=>{const{track:i}=vi(),n=EZ(e),s=(0,m.useRef)(!0),r=(0,m.useRef)(!1),a=(0,m.useCallback)((e=>{t&&i(Nn({transactionId:t,screen:$t.Checkout,action:Tn.Scrolled,actionDetails:{type:e}}))}),[i,t]),o=(0,m.useCallback)((()=>{r.current||(r.current=!0,a(Fn.PartialScrolling));const e=document.body.scrollHeight;window.scrollY+window.innerHeight>=e&&(a(Fn.ScrolledTillTheEnd),window.removeEventListener("scroll",o))}),[a]);(0,m.useEffect)((()=>{s.current&&n&&!e&&(s.current=!1)}),[e,n]),(0,m.useEffect)((()=>(s.current&&e&&(document.body.scrollHeight!==window.innerHeight?(a(Fn.NoScrolling),window.addEventListener("scroll",o)):a(Fn.NoScrollingSawCompleteScreen)),()=>{window.removeEventListener("scroll",o)})),[a,o,e])})(u,t),(e=>{let{shouldTrack:t,transactionId:i}=e;const{track:n}=vi(),s=(0,m.useCallback)((()=>{t&&i&&n(Nn({transactionId:i,screen:$t.Checkout,action:Tn.ReturnedBack}))}),[n,t,i]);(0,m.useEffect)((()=>{const e=(0,ls.ij)(),t=as(e)?"pagehide":"beforeunload";return window.addEventListener(t,s),()=>{window.removeEventListener(t,s)}}),[s])})({transactionId:t,shouldTrack:!r}),(e=>{let{orderItems:t,transactionId:i,isCheckoutUiLoaded:n}=e;const{track:s}=vi(),r=t.map((e=>{let{id:t}=e;return t}));(0,m.useEffect)((()=>{if(!n||!i)return;const e=(()=>{const e=(0,Bn.le)(Kg);if(!e)return null;(0,Bn.e8)(Kg);const t=JSON.parse(e);return"itemId"in(i=t)&&"loadTimeStartStamp"in i?t:null;var i})();if(!e)return;if(!r.includes(e.itemId))return;const t=Date.now()-e.loadTimeStartStamp;s(Nn({transactionId:i,screen:$t.Checkout,action:Tn.ScreenLoadDuration,actionDetails:{screen_load_duration:t}}))}),[s,r,i,n])})({orderItems:a,transactionId:t,isCheckoutUiLoaded:u}),(e=>{let{orderItems:t,transactionId:i}=e;const n=(0,p.v9)(W),s=EZ(t),{googleTagManagerTrack:r}=hK();(0,m.useEffect)((()=>{(null==s||!s.length)&&t.length&&n&&t.forEach((e=>{r(Ob.BuyStart,{user_email:n.email,transaction_id:i,item_id:e.id,item_name:e.title,item_brand:e.brand,item_brand_id:e.brandId,item_category_id:e.catalogId,currency:e.price.currencyCode,item_condition:e.disposalConditions,item_price:parseFloat(e.price.amount)})}))}),[n,t,s,r,i])})({orderItems:a,transactionId:t}),D7({payment:r,orderItems:a,orderPrice:o}),H5({withEventListeners:!0,transactionId:t,screen:$t.Checkout}),(0,m.useEffect)((()=>{t&&(i(hZ.fetchConfigurationRequest()),n(nn({transactionId:t,screen:$t.Checkout})))}),[n,i,t]),(0,m.useEffect)((()=>{const{cardId:n,cardAddResult:s}=yj(e),{isRedirectAfterPayment:r}=(e=>{const{after_payment_redirect:t}=(0,ys.oZ)(e);return{isRedirectAfterPayment:!Array.isArray(t)&&"true"===(null==t?void 0:t.toLowerCase())}})(e);t&&i(s?mZ.handleCardAddAuthResult({cardId:n,cardAddResult:s,transactionId:t}):r?hZ.handlePaymentRedirectResult({transactionId:t}):mZ.updateCheckoutDataRequest({transactionId:t}))}),[i,t,e]),(()=>{const e=(0,p.v9)(Wt("web_ads_rokt_script")),t=(0,p.v9)(Vn("web_ads_rokt")),i=e&&!!t,{goToPreviousPage:n}=xc(),{setShouldShowRokt:s}=_c(),r=(0,p.v9)(gZ.getPayment);(0,m.useEffect)((()=>{r&&(()=>{const{status:e,conversationId:t,payInRedirectUrl:a}=r;i&&s(e===rS.Success),e===rS.Pending?a&&(0,ls.ru)(a):e===rS.Success?(0,ls.ru)(Rc(t)):e!==rS.Failed&&n()})()}),[s,r,i,n])})(),t?(0,z.jsxs)("div",{className:"checkout",children:[(0,z.jsxs)("div",{className:"checkout-container container u-flexbox u-flex-direction-row",children:[(0,z.jsxs)("main",{className:"u-flex-grow",children:[(0,z.jsxs)(V5,{breakpoint:"tabletsUp",children:[(0,z.jsx)(w7,{transactionId:t}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})]}),(0,z.jsx)(G5,{}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),f&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(z7,{transactionId:t,offlineVerification:f}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})]}),(0,z.jsx)(K5,{}),(0,z.jsx)(h7,{}),(0,z.jsx)(T7,{}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(C7,{}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(V5,{breakpoint:"tabletsUp",children:(0,z.jsx)(gt.Z,{children:(0,z.jsx)(k7,{transactionId:t})})})]}),(0,z.jsxs)(Nm,{breakpoint:"tabletsUp",children:[(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.XLarge}),(0,z.jsx)("aside",{className:"checkout__summary u-flex-direction-column",children:(0,z.jsx)(w7,{isPurchaseVisible:!0,transactionId:t})})]})]}),(0,z.jsx)(E7,{show:h,onClose:function(){i(mZ.clearTwoFactorVerification())}}),(0,z.jsx)(B5,{show:g,transactionId:t,onCancel:function(){i(mZ.setIsKycConfirmationNeeded({isNeeded:!1}))}}),(0,z.jsx)(N7,{show:c,onClose:function(){i(mZ.setHasChecksumError({hasChecksumError:!1}))}}),(0,z.jsx)(L7,{show:d,onClose:function(){i(mZ.setHasShippingDiscountError({hasShippingDiscountError:!1}))}}),l&&(0,z.jsx)(P7,{message:l.message||s("checkout.errors.unknown"),onClose:function(){i(mZ.clearPaymentError())}}),(0,z.jsx)(R7,{show:v,transactionId:t}),(0,z.jsx)(O7,{show:y,onClose:function(){i(mZ.clearIsPaymentFailedAfterRedirect())}}),(0,z.jsx)(F7,{})]}):null})),CheckoutRedirectResult:wT((e=>{let{transactionId:t}=e;const i=(0,p.I0)(),n=U("checkout.redirect_result"),s=(0,p.v9)(gZ.getPayment),r=(0,p.v9)(gZ.getOrderItems),a=(0,p.v9)(gZ.getOrderPrice),o=(0,p.v9)(gZ.getPaymentError),l=(0,p.v9)(gZ.getIsPaymentProcessing),c=(0,p.v9)(gZ.getIsPaymentProcessingTakesTooLong),d=l||c,u=(null==s?void 0:s.status)===rS.Failed||!!o,g=u?(0,Me.sEI)(t):(0,Me.hzM)(t),h=(0,m.useMemo)((()=>d?"pending":u?"failure":"success"),[d,u]);return D7({payment:s,orderItems:r,orderPrice:a}),(0,m.useEffect)((()=>{i(fS({transactionId:t}))}),[i,t]),!s||l?(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center",children:(0,z.jsx)(Dp.Z,{size:Dp.Z.Size.XLarge,testId:"checkout-redirect-result-loader"})}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"u-text-center",children:[!c&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"u-ui-margin-vertical-large u-margin-horizontal-auto",children:u?(0,z.jsx)(ht.Z,{name:"cancel-circle-filled",color:ht.Z.Color.Warning,size:ht.Z.Size.XLarge}):(0,z.jsx)(ht.Z,{name:"check-circle-filled",color:ht.Z.Color.Success,size:ht.Z.Size.XLarge})}),(0,z.jsx)(xt.Z,{text:n("".concat(h,".title")),type:xt.Z.Type.Title}),(0,z.jsx)(x.Z,{})]}),(0,z.jsx)(xt.Z,{text:n("".concat(h,".explanation")),alignment:xt.Z.Alignment.Center,type:xt.Z.Type.Subtitle})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(ic.I,{text:n("".concat(h,".action")),styling:ic.I.Styling.Filled,size:ic.I.Size.Medium,url:g,testId:"checkout-redirect-result-action-button"})]})})),CreatePhoneNumber:wT((()=>{const[e,t]=(0,m.useState)(""),[i,n]=(0,m.useState)(!1),[s,r]=(0,m.useState)(),[a,o]=(0,m.useState)(),[l,c]=(0,m.useState)(!1),d=(0,p.v9)(de),u=XY(Me.YFw);(0,m.useEffect)((()=>{d&&(0,ls.ru)(Me.KPt)}),[d]);const g=(0,p.v9)(Wt("create_phone_number_faq")),h=(0,p.v9)(X),f=U("settings.security.create_phone_number"),y=async()=>{if(!e||!h)return;n(!0),c(!1);const t=await(0,Fe.ViU)(h,e);if(t.status!==pm.o.TooManyRequests){if("errors"in t){const e=t.errors[0];e&&r(e.value)}else o(t.phone_number);n(!1)}else c(!0)};return Um((()=>y())),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"narrow-container",children:a?a?(0,z.jsx)(_2,{maskedNumber:a.number,twoFAId:a.two_fa_id,verificationType:v2.Phone,nextResendAvailableIn:a.next_resend_available_in,showResend:a.show_resend_option,refUrl:u}):null:(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(xt.Z,{width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,type:xt.Z.Type.Heading,text:f("title")}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(xt.Z,{width:xt.Z.Width.Parent,text:f("body")}),(0,z.jsx)(fb.M,{title:f("input.label"),placeholder:f("input.placeholder"),name:"number",value:e,onChange:e=>{t(e.target.value)},validation:s&&(0,z.jsx)(zm.Z,{text:s,theme:"warning"})}),(0,z.jsx)(ic.I,{disabled:i,text:f("actions.send"),styling:ic.I.Styling.Filled,onClick:y}),g?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(xt.Z,{text:f("help.text",{help_link:(0,z.jsx)(_p,{type:bp.AddPhoneNumber,render:e=>(0,z.jsx)("a",{href:e,children:f("help.link")})})}),alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent,html:!0})]}):null]})}),l&&(0,z.jsx)(bJ,{body:f("error")})]})})),Fundraiser:wT((()=>{const e=(0,p.I0)(),{track:t}=vi(),i=U("fundraiser"),n=E(),s=(0,p.v9)(Nc),r=(0,p.v9)(V7),a=(0,p.v9)(q7),o=(0,p.v9)(H7),l=(0,p.v9)(U7),c=(0,p.v9)(B7),d=(0,p.v9)(Y7),[u,g]=(0,m.useState)(!1),f=(0,m.useCallback)((()=>e(hL.fetchFundraiserConfiguration())),[e]);(0,m.useEffect)((()=>{f()}),[f]),(0,m.useEffect)((()=>{(async()=>{const e=await(0,Fe.Qo0)();"errors"in e||e.enabled||(0,ls.ru)(Me.mYc)})()}),[]);const y=()=>g(!0),v=()=>g(!1),_=e=>{t(un({screen:$t.FundraiserOverview,target:e}))},b=()=>_(qm.FundraiserLearnMore);return d===Ne.Pending?(0,z.jsx)("div",{className:"body-content__content",children:(0,z.jsx)(Mp,{size:Mp.Size.Large,testId:"fundraiser-loader"})}):d===Ne.Failure?(0,z.jsx)("div",{className:"body-content__content",children:(0,z.jsx)(gt.Z,{children:(0,z.jsx)(sw,{onCtaClick:f})})}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(SJ,{}),(0,z.jsxs)("div",{className:"body-content__content",children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Wide,title:(0,z.jsx)(xt.Z,{text:i("title"),type:xt.Z.Type.Heading}),children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(xt.Z,{text:i("overview.description")}),n.tabletsUp?(0,z.jsx)("br",{}):" ",(0,z.jsx)(_p,{type:bp.Donations,render:e=>(0,z.jsx)("a",{href:e,onClick:b,children:i("overview.help")})}),!r&&(0,z.jsxs)("div",{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(ic.I,{text:i("overview.actions.setup"),size:ic.I.Size.Medium,styling:ic.I.Styling.Filled,inline:n.tabletsUp,onClick:()=>{_(qm.FundraiserSetup),y()},testId:"fundraiser-setup-button"})]})]}),r&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Wide,prefix:(0,z.jsx)(ht.Z,{name:"check-circle-filled",color:ht.Z.Color.Success}),suffix:(0,z.jsx)(ic.I,{text:i("status.manage_button"),size:ic.I.Size.Small,onClick:()=>{_(qm.FundraiserManage),y()},testId:"fundraiser-manage-button"}),children:[(0,z.jsx)("div",{children:(0,z.jsx)(xt.Z,{text:i("status.active"),type:xt.Z.Type.Title})}),(0,z.jsx)(xt.Z,{text:i("status.description",{donation_percentage:l,charity_name:o})})]}),(0,z.jsx)(h.Z,{}),c&&(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,body:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:i("status.donated")}),suffix:Ma(a,{locale:s,currency:c})})]}),(0,z.jsx)(e8,{isOpen:u,onSuccess:()=>{v()},onClose:v})]})]})})),ChangeEmail:wT((()=>{const[e,t]=(0,m.useState)(""),[i,n]=(0,m.useState)(Ne.Idle),[s,r]=(0,m.useState)([]),[a,o]=(0,m.useState)(!0),l=U("settings.email_edit"),c=(0,p.v9)(K),{code:d,user_id:u}=xc().searchParams;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{theme:"transparent",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:l("title")})}),(0,z.jsxs)(nc.Z,{children:[a?null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{theme:"warning",title:l("email_code_invalid")}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]}),(0,z.jsx)(gt.Z,{title:l("current_email.title"),body:c}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(fb.M,{name:"email_to_change",title:l("new_email_title"),styling:fb.M.Styling.Wide,required:!0,validation:s.length?(0,z.jsx)(zm.Z,{text:s[0].value,theme:"warning"}):null,value:e,placeholder:l("placeholder"),onChange:e=>{t(e.target.value)},onFocus:()=>{r([])}}),(0,z.jsx)(ah.Z,{styling:ah.Z.Styling.Wide,text:l("confirmation_note")}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,theme:"transparent",suffix:(0,z.jsx)(ic.I,{size:ic.I.Size.Medium,styling:ic.I.Styling.Filled,disabled:i===Ne.Pending,text:l("continue"),onClick:async()=>{if(Array.isArray(d)||Array.isArray(u))return;if(!d||!u)return;n(Ne.Pending);const t=await(0,Fe.Uk1)({id:u,code:d,email:e,fingerprint:await $M()});return t.code===pm.Q.NotFound?(o(!1),void n(Ne.Failure)):"errors"in t?(r(t.errors),void n(Ne.Failure)):void n(Ne.Success)}})})]}),(0,z.jsx)(cp.Z,{show:i===Ne.Success,title:l("email_sent.title"),body:l("email_sent.body"),actions:[{text:l("email_sent.continue"),style:cp.Z.ActionStyling.Filled,callback:()=>{(0,ls.ru)(Me.dm4)}}]})]})})),ConfirmEmail:wT((()=>{const[e,t]=(0,m.useState)(!1),[i,n]=(0,m.useState)(!1),s=(0,p.v9)(X),r=(0,p.v9)(K);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(xt.Z,{alignment:xt.Z.Alignment.Center,type:xt.Z.Type.Heading,width:xt.Z.Width.Parent,text:(0,z.jsx)(wx,{id:"settings.email_change.modal.title"})}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(xt.Z,{text:(0,z.jsx)(wx,{id:"settings.email_change.modal.body",values:{confirm_email:(0,z.jsx)(xt.Z,{text:r,bold:!0})}})}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(ic.I,{text:(0,z.jsx)(wx,{id:"settings.email_change.modal.action.positive"}),styling:ic.I.Styling.Filled,onClick:async()=>{if(!s)return;const e=await(0,Fe.MMr)(s);e.code!==pm.Q.FidoVerificationRequired?"errors"in e||(t(!0),n(!0)):await(async()=>{const e=await(0,Fe.onP)();if("errors"in e)return!1;const t=e.options,i=await(0,Z8.U2)(t);return!("errors"in await(0,Fe.z5M)({attestation:i}))})()&&(await(0,Fe.MMr)(s),t(!0),n(!0))},disabled:e}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(_p,{type:bp.NoAccessToOldEmail,accessChannel:Be.Si.ProductLink,render:e=>(0,z.jsx)("a",{href:e,className:"u-text-center u-inline-block u-fill-width",children:(0,z.jsx)(xt.Z,{text:(0,z.jsx)(wx,{id:"settings.email_change.modal.action.negative"}),type:xt.Z.Type.Body,theme:"primary",alignment:xt.Z.Alignment.Center})})}),i&&(0,z.jsx)(mJ.Z,{forceVisibility:!0,onClose:()=>{n(!1)},body:(0,z.jsx)(wx,{id:"settings.email_change.modal.confirmation_sent",values:{current_email:(0,z.jsx)(xt.Z,{text:r,bold:!0})}})})]})})),AllFavouriteItems:wT((()=>{const e=(0,p.I0)(),t=U("favourite_items"),{track:i}=vi(),n=(0,p.v9)(X),s=(0,p.v9)(fl),r=(0,p.v9)(Bo),a=!(0,p.v9)(Vo),o=(0,p.v9)(F8),l=(0,m.useRef)(!0);l.current=a||r!==Ne.Pending,(0,m.useEffect)((()=>{i(Gi({screen:$t.FavoriteItemList,target:cb.MyFavoritesGrid}))}),[i]);const c=(0,m.useCallback)((()=>{l.current&&n&&e(CN.getFavouriteItemsRequest({userId:n}))}),[e,n]),d=(0,m.useMemo)((()=>vo(s)),[s]);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"u-ui-padding-vertical-x-large",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,width:xt.Z.Width.Parent,text:t("title")})}),(0,z.jsx)(T8,{hasMore:a,onLoadMore:c,clickableElementTarget:qm.MergeFavoriteItemListBanner,contentSource:Es.FavouriteItems,infoBannerScreen:$t.FavoriteItemList,targetDetails:N8.Favourites,items:d,isSoldNotificationShown:o,onNotificationDismissClick:()=>e(vL.hideSoldNotification())})]})})),FeaturedCollection:wT((e=>{let{id:t,initialStage:i=O8,availableDiscounts:n}=e;const s=(0,p.v9)(X),r=E8(),[a,o]=(0,m.useState)(t),[l,c]=(0,m.useState)([]),[d,u]=(0,m.useState)(i),[g,h]=(0,m.useState)(""),[x,f]=(0,m.useState)([]),[y,v]=(0,m.useState)(!1),[_,b]=(0,m.useState)(!1),[j,S]=(0,m.useState)(!1),[Z,I]=(0,m.useState)(!1),[C,k]=(0,m.useState)(null==n?void 0:n[0]),[w,P]=(0,m.useState)(!1),[T,F]=(0,m.useState)(!1),N=r?Fe._NN:Fe.lLH,{fetch:L,transformedData:E,isLoading:O,error:R}=ih(N,jx),{fetch:D,transformedData:A,isLoading:M}=ih(Fe.vz5,_x),U=O||M;function B(e){c(e),v(!0)}function q(e){e&&v(!1),F(!0)}if(L8(y),(0,m.useEffect)((()=>{var e;if(!T)return;const t=null!==(e=document.referrer)&&void 0!==e&&e.includes(Me.CR5)||!s?Me.CR5:(0,Me.G0B)(s);(0,ls.ru)(t)}),[T,s]),(0,m.useEffect)((()=>{r&&(t||A&&S(!(null==A||!A.isPlanActivated||null==A||!A.canActivate)))}),[A,t,r]),(0,m.useEffect)((()=>{!A&&r&&D()}),[D,r,A]),(0,m.useEffect)((()=>{t&&L({id:t})}),[t,L]),(0,m.useEffect)((()=>{if(!E)return;h(E.title),c(E.items),S(E.isActive);const e=n.find((e=>e.id===E.discount))||n[0];k(e)}),[n,E]),(0,m.useEffect)((()=>{C&&l.length&&d!==O8&&(async()=>{const e=l.map((e=>e.id)),t=await(0,Fe.EtJ)({itemIds:e,discount:C.id});"errors"in t||f(t.discounts)})()}),[null==C?void 0:C.id,d]),(0,m.useEffect)((()=>{R&&b(R.code===pm.Q.NotFound)}),[R]),_)return(0,z.jsx)("div",{className:"u-flexbox u-fill-dynamic-viewport u-align-items-center u-justify-content-center",children:(0,z.jsx)(Cg,{})});if(U||t&&!E||r&&!A)return(0,z.jsx)("div",{className:"u-fill-dynamic-viewport u-flexbox u-justify-content-center u-align-items-center",children:(0,z.jsx)(Dp.Z,{testId:"collection-loader"})});if(!s||R)return null;switch(d){case O8:return(0,z.jsx)(J8,{featuredCollectionId:a,selectedItems:l,maxItemsCount:(null==A?void 0:A.maxItemCount)||10,updateSelectedItems:B,switchEditStage:function(){u(R8)},updateSelectionVisitedStatus:function(){P(!0)},navigate:q});case R8:return(0,z.jsx)(m6,{initialCollectionId:t,featuredCollectionId:a,availableDiscounts:n,selectedItems:l,selectedDiscount:C,title:g,discounts:x,isActive:j,initialIsActive:!(null==E||!E.isActive),isCheckoutStarted:Z,onCheckoutClose:function(){I(!1)},onCheckoutOpen:function(){I(!0)},updateCollectionId:function(e){o(e)},switchSelectStage:function(){u(O8)},updateTitle:function(e){h(e),v(!0)},updateDiscount:function(e){k(e),v(!0)},updateSelectedItems:B,updateIsActive:function(e){S(e),v(!0)},isSelectionPageVisited:w,isPlanActivated:!(null==A||!A.isPlanActivated),canActivateCollection:!(null==A||!A.canActivate),maxActiveCollectionsCount:(null==A?void 0:A.maxActiveCollectionsCount)||0,navigate:q});default:return null}})),FullNameConfirmationPage:wT((()=>{const e=(0,p.v9)(te);return(0,z.jsx)("div",{className:"narrow-container",children:(0,z.jsx)(p6,{realName:e,isForce:!0})})})),Home:wT((()=>(0,z.jsx)(cc,{FallbackComponent:cc.ComponentError,preventLog:!0,onError:Cee,children:(0,z.jsx)($ee,{})}))),ItemUserInfo:wT(QQ),ItemUpload:wT((e=>{let{id:t}=e;const i=U(),n=(0,p.v9)(fB),s=(0,p.v9)(mB),r=(0,p.v9)(Zs),a=(0,p.v9)(Is),o=(0,p.v9)(xB),l=(0,p.v9)(JB),c=(0,p.v9)(X),d=(0,p.v9)(VB),u=(0,p.v9)(Wt("next_page_item_upload")),f=(0,p.v9)(Wt("lg_transparency_law_scale_web")),y=(0,p.v9)(Wt("item_upload_feedback_form")),v=(0,p.v9)(Wt("item_upload_photo_editor_web")),_=(0,p.v9)(Wt("item_upload_photo_editor_override_web")),b=(0,p.v9)(Wt("item_upload_form_actions_hooks")),j=Xn({abTestName:"photo_editing_tool"}),S=(0,p.v9)(gB),Z=(0,p.v9)(uB),{price:I}=(0,p.v9)(oB),C=(0,p.v9)(bq),k=(0,p.I0)(),{track:w}=vi(),P=Z2(),[T,F]=(0,m.useState)(!1),N=(0,m.useRef)(null);(0,m.useEffect)((()=>{k(MZ.fetchSystemConfigurationRequest()),k(FU({id:t})),k(NU()),k(LU())}),[t,k]);const L=(0,m.useCallback)((e=>!(!o||l||T)&&(0,ls.rf)(e)),[o,l,T]);(0,m.useEffect)((()=>(window.addEventListener("beforeunload",L),()=>{window.removeEventListener("beforeunload",L)})),[L]);const E=()=>{c?(0,ls.ru)((0,Me.G0B)(c)):(0,ls.ru)(Me.mYc)},O=e=>{w(en({screen:d,state:e,tempUuid:n,target:JL.Photo}))};return P&&s!==Ne.Pending&&r!==Ne.Pending?!u||s!==Ne.Failure&&r!==Ne.Failure?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:(0,z.jsx)(wx,{id:"item_upload.title"}),type:xt.Z.Type.Heading}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(Kp,{screen:$t.ItemEdit}),(0,z.jsx)(g.Z,{children:(0,z.jsx)(bte,{photoEntryId:t,type:YF.Item,numberOfImagesPerItem:(null==a?void 0:a.numberOfImagesPerItem)||20,tempUuid:n,inputRef:N,onFocus:()=>O("focus"),onBlur:()=>O("unfocus"),isPhotoEditorEnabled:_||v&&"on"===(null==j?void 0:j.variant.toLocaleLowerCase())})}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsxs)(g.Z,{children:[(0,z.jsx)(jte,{}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(Ste,{})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(zne,{}),(0,z.jsx)(lie,{}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(g.Z,{children:(0,z.jsx)(Mte,{})}),(0,z.jsx)(g.Z,{children:(0,z.jsx)(eie,{})}),null!==I&&(d!==$t.ItemEdit||C)&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(g.Z,{children:(0,z.jsx)(mie,{itemPrice:I})})]}),y&&(0,z.jsx)(pie,{}),Z&&(0,z.jsx)(gie,{}),f&&(0,z.jsx)(a0,{subject:Be.dr.ProfessionalSeller}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),b?(0,z.jsx)(Gte,{}):(0,z.jsx)(Hte,{}),(0,z.jsx)(rie,{}),(0,z.jsx)(aie,{onAddPhotosClick:()=>{const{current:e}=N;e&&(e.click(),e.focus())},onDiscardClick:()=>{F(!0),E()}}),(0,z.jsx)(uie,{}),(0,z.jsx)(X$,{show:S,onClose:E})]}):(0,z.jsx)(tc.Z,{title:i("user.follow_page.error.title"),body:i("taxpayer_form.progress.error.body")}):(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center",children:(0,z.jsx)(Dp.Z,{size:Dp.Z.Size.XLarge,testId:"item-upload--loader"})})})),KycForm:wT((()=>{const e=(0,p.I0)(),t=XY(Me.mYc),{track:i}=vi(),n=(0,p.v9)(vG),s=(0,p.v9)(bG),r=(0,p.v9)(uG),a=(0,p.v9)(CG),o=(0,p.v9)(fG),l=(0,p.v9)(W),[c,d]=(0,m.useState)(!1),[u,g]=(0,m.useState)(!1),[h,x]=(0,m.useState)(),f=(0,m.useCallback)((()=>{i(Xi({screen:$t.KycClosingModal}))}),[i]),y=(0,m.useCallback)((()=>{h===Tse.KycEducation&&i(Xi({screen:$t.KycEducation})),h===Tse.KycFormContent&&i(Xi({screen:$t.KycMain}))}),[h,i]);function v(){(0,ls.ru)(t)}function _(){d(!1)}return L8(!u&&s&&!n,f),(0,m.useEffect)((()=>{e(eG())}),[e]),(0,m.useEffect)((()=>{if(!a)return;const e=[Nne.Verified,Nne.Verifying,Nne.VerificationFailed,Nne.VerificationBlocked];d(e.includes(a)),x(Tse.KycEducation)}),[a]),(0,m.useEffect)((()=>{y()}),[y]),(0,m.useEffect)((()=>{null!=l&&l.has_confirmed_payments_account||(0,ls.mZ)(Me.FRj)}),[l]),(0,m.useEffect)((()=>{if(null==o||!o.requiredFields.includes("bank_account"))return;const e={ref_url:Me.AME,redirect_url:Me.c8F,type:Tne.BankAccount},t=(0,ys.Iq)(Me.nxq,e);(0,ls.mZ)(t)}),[null==o?void 0:o.requiredFields]),r===Ne.Idle?null:c?function(){if(!a)return null;const e=a===Nne.VerificationFailed?_:v;return(0,z.jsx)(Ane,{status:a,paymentsIdentityConfiguration:o,onSubmitClick:e})}():(0,z.jsxs)(z.Fragment,{children:[h!==Tse.KycEducation?null:(0,z.jsx)(zse,{onClick:function(){x(Tse.KycFormContent)}}),h!==Tse.KycFormContent?null:(0,z.jsx)(wse,{onSubmit:function(){n||(i(Di({target:qm.KycSubmitIdentityConfirmation})),e(TE.submitFormRequest()))},onCancel:function(){s?g(!0):v()}}),(0,z.jsx)(Mne,{show:u,onCancel:function(){g(!1)}})]})})),MergeLandingFaq:wT((()=>{const e=U("merge.landing.faq");return(0,z.jsx)(z.Fragment,{children:Array(5).fill(1).map((function(t,i){const n=i+1,s=e("question_".concat(n,".title")),r=e("question_".concat(n,".body"));return s&&r?(0,z.jsxs)(m.Fragment,{children:[(0,z.jsx)(g$,{title:s,content:r,trackingProps:{target:qm.MergeSelectFaq,targetDetails:"merge.landing.faq.question_".concat(n,".title")},headerId:"merge_landing_faq_accordion_header",bodyId:"merge_landing_faq_accordion_body"}),(0,z.jsx)(h.Z,{})]},i):null}))})})),MergeMissingFullName:wT((()=>{var e;const t=Ql(),{register:i,setError:n,handleSubmit:s,formState:{errors:r,isSubmitting:a}}=(0,th.cI)(),o=fh(r,"".concat(i8,".fields")),l=U(i8),{track:c}=vi(),d=ih((async e=>(0,Fe.SFz)({...e,fingerprint:await $M()}))),u=null==d||null===(e=d.error)||void 0===e?void 0:e.errors,p=t?"_dark":"";return(0,m.useEffect)((()=>{u&&u.forEach((e=>{let{field:t,value:i}=e;const s=(0,v.camelCase)(t);(0,_i.IF)(s,t8)&&n(s,{type:"manual",message:i})}))}),[u,n]),(0,m.useEffect)((()=>{d.data&&(0,ls.ru)(Me.DIE)}),[d.data]),(0,z.jsx)("div",{className:"merge-small-container",children:(0,z.jsxs)("div",{className:"merge-small-container__wrapper",children:[(0,z.jsx)("div",{className:"merge-small-container__image",children:(0,z.jsx)(Kl.U,{src:"/assets/merge/missing-full-name".concat(p,".png"),srcset:"/assets/merge/missing-full-name".concat(p,".png 1x, /assets/merge/missing-full-name2x").concat(p,".png 2x")})}),(0,z.jsxs)("form",{className:"merge-small-container__content",onSubmit:s(d.fetch),children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:l("heading")}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Body,text:l("body")}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(fb.M,{...i(t8.Name,{required:!0,validate:xb}),title:l("fields.real_name.title"),placeholder:l("fields.real_name.placeholder"),styling:fb.M.Styling.Tight,validation:hh(o(t8.Name)),uncontrolled:!0}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)("div",{className:"merge-small-container__actions",children:(0,z.jsx)(ic.I,{type:ic.I.Type.Submit,styling:ic.I.Styling.Filled,text:l("actions.submit"),onClick:function(){c(Ri({target:qm.MergeMissingInfoContinue}))},disabled:a||d.isLoading,isLoading:a||d.isLoading})})]})]})})})),MergeMissingUserInformation:wT((()=>{const{register:e,setError:t,handleSubmit:i,formState:{errors:n,isSubmitting:s}}=(0,th.cI)(),r=fh(n,"".concat(s8,".fields")),a=XY(Me.mYc),o=U(s8),{track:l}=vi();return(0,z.jsx)("div",{className:"merge-small-container",children:(0,z.jsxs)("div",{className:"merge-small-container__wrapper",children:[(0,z.jsx)("div",{className:"merge-small-container__image",children:(0,z.jsx)(Kl.U,{src:"/assets/merge/one-consent-header.png",srcset:"/assets/merge/one-consent-header.png 1x, /assets/merge/one-consent-header2x.png 2x"})}),(0,z.jsxs)("form",{className:"merge-small-container__content",onSubmit:i((async function(e){const i=await(0,Fe.phm)(e);"errors"in i?i.errors.forEach((e=>{let{field:i,value:n}=e;(0,_i.IF)(i,n8)&&t(i,{type:"manual",message:n})})):(0,ls.ru)(a)})),children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:o("heading")}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Body,text:o("body")}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(fb.M,{...e(n8.Name,{required:!0,validate:xb}),title:o("fields.name.title"),placeholder:o("fields.name.placeholder"),styling:fb.M.Styling.Tight,validation:hh(r(n8.Name)),uncontrolled:!0}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(fb.M,{...e(n8.PostalCode,{required:!0}),title:o("fields.postal_code.title"),placeholder:o("fields.postal_code.placeholder"),styling:fb.M.Styling.Tight,validation:hh(r(n8.PostalCode)),uncontrolled:!0}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)("div",{className:"merge-small-container__actions",children:(0,z.jsx)(ic.I,{type:ic.I.Type.Submit,styling:ic.I.Styling.Filled,text:o("actions.submit"),onClick:function(){l(Ri({target:qm.MergeMissingInfoContinue}))},disabled:s,isLoading:s})})]})]})})})),MergeClosurePage:wT((e=>{let{portal:t}=e;return(0,z.jsx)(j8,{portal:t,userAgent:(0,ls.ij)()})})),MergeCrossPortalAuthentication:wT((e=>{let{isWebview:t}=e;const i=xc().searchParams.global_auth_token;return(0,m.useEffect)((()=>{!async function(e){if(!e||"string"!=typeof e)return void S8();const t=await $M();"errors"in await cK({grantType:KY.Assertion,provider:$Y.CrossPortal,assertion:e,fingerprint:t})?S8():(0,ls.ru)(Me.$WJ)}(i)}),[i]),t?null:(0,z.jsx)("div",{className:"u-flexbox u-flex-grow u-justify-content-center u-align-items-center",children:(0,z.jsx)(Mp,{size:Mp.Size.XLarge,styling:Mp.Styling.Wide})})})),PasswordVerificationLogin:wT(dK),Profile:wT((e=>{let{userId:t}=e;const i=E(),n=(0,p.I0)(),{replaceHistoryState:s,relativeUrl:r,searchParams:a}=xc(),{track:o}=vi(),l=U("bundles"),c=U("vas_gallery"),d=(u=a.tab,(0,_i.IF)(u,Pae)?a.tab:Pae.Closet);var u;const g=(0,p.v9)(W),f=(0,p.v9)(Cl),v=(0,p.v9)(ZX),_=(0,p.v9)(Wt("disable_vas_gallery_orders")),b=v.visible&&!_,j=(0,p.v9)(Wt("next_page_member")),S=(0,p.v9)(Wt("profile_view_user_tracking")),Z=(0,p.v9)(Wt("hide_admin_user_comment")),I=(0,p.v9)(Wt("content_translation_web")),C=(0,p.v9)(Wt("portal_merge_source")),k=null!==(0,p.v9)(fT),w=E8(),[P,T]=(0,m.useState)(d),[F,N]=(0,m.useState)(!!a.policy),[O,R]=(0,m.useState)(!1),D=!C,A=(null==g?void 0:g.id)===t,M=A?$t.CurrentUserProfile:$t.UserProfile,B=(0,m.useCallback)((e=>{T(e),s("".concat(r,"?").concat((0,ys.Kf)({tab:e})))}),[r,s]);Xn({abTestName:"vas_gallery_iteration1_v2",shouldTrackExpose:!0}),(0,m.useEffect)((()=>{if(!j||!S)return;const e=document.referrer?new URL(document.referrer).pathname:"unknown";o((e=>{const{path:t,user_id:i}=e;return{event:"user.view_user",extra:{path:t,user_id:i}}})({path:e,user_id:t}))}),[j,S,o,t]),(0,m.useEffect)((()=>{o(Wi({screen:M}))}),[M,o]),(0,m.useEffect)((()=>{O&&o(Ri({target:qm.VasInfo,screen:$t.CurrentUserProfile}))}),[O,o]),(0,m.useEffect)((()=>{[Pae.Closet,Pae.Feedback].includes(P)||i.phones&&P===Pae.About||B(Pae.Closet)}),[P,i.phones,B]);const q=e=>{B(e.id),A&&o(Ri({screen:$t.CurrentUserProfile,target:zae[e.id]}))},V=e=>()=>{B(e)},H=ls.sl,G=()=>{n(vE.setPromotedItemId({id:null}))},X=()=>{N((e=>!e))},Y=()=>{R((e=>!e))},K=()=>{const e=[{id:Pae.Closet,title:(0,z.jsx)(wx,{id:"profile.tabs.closet"})},{id:Pae.Feedback,title:(0,z.jsx)(wx,{id:"profile.tabs.feedback"})}];return i.phones&&e.push({id:Pae.About,title:(0,z.jsx)(wx,{id:"profile.tabs.about"})}),e},J=e=>(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{body:(0,z.jsx)(wx,{id:e}),theme:"warning"}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]}),Q=e=>{if(!e)return null;const t=null==g?void 0:g.is_god,i=null==g?void 0:g.moderator;return A||t||i?e.has_replica_proof_items?J("profile.notification.replica_warning"):e.has_item_alerts?J("profile.notification.items_warning"):null:null},$=e=>{switch(P){case Pae.Closet:return(e=>{const{user:n,userInfo:s,showActions:a,items:o,collections:d,isLoading:u,itemsCount:m,totalItemsCount:p,filters:v,catalogs:_,fetchMoreItems:j,updateItems:S,updateFilters:Z}=e,k="".concat(r,"/bundles/new"),P=p>=2&&a&&!(null==n||!n.can_bundle),T={url:k,subtitle:(()=>{const e=null==n?void 0:n.bundle_discount;if(null==e||!e.enabled)return l("discounts.not_available");const t=Math.max(...e.discounts.map((e=>+e.fraction)));return l("discounts.available_up_to",{percentage:Math.round(100*t)})})(),showBundles:P};return i.tabletsUp?(0,z.jsxs)("div",{className:y()("profile__items-wrapper"),children:[(0,z.jsxs)("div",{children:[(0,z.jsx)(Kp,{screen:$t.ItemUpload}),A&&b&&(0,z.jsx)(ic.I,{inline:!0,deprecatedIconColor:ht.Z.Color.GreyscaleLevel3,deprecatedIconName:"info-circle",iconPosition:ic.I.IconPosition.Right,onClick:Y,styling:ic.I.Styling.Flat,testId:"promotional_tools_link",theme:"muted",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:c("promotional_tools_link")})}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(M$,{show:O,onConfirm:Y}),(0,z.jsx)(rre,{user:n,bundleProps:T,showActions:a,viewingSelf:A}),!w&&(0,z.jsx)(cre,{collections:d,viewingSelf:A,allowBump:D}),w&&(0,z.jsx)(cae,{viewingSelf:A,userId:t}),(0,z.jsx)(E$,{isInitiatedFromMultiSelect:!1,onCheckoutSuccess:H}),(0,z.jsx)(W4,{onCheckoutSuccess:H})]}),(0,z.jsx)(wae,{userId:t,allowBump:!0,userOnHoliday:!(null==n||!n.is_on_holiday),currentUserId:null==g?void 0:g.id,items:o,itemsCount:m,isLoading:u,filters:v,catalogs:_,fetchMore:j,update:S,updateFilters:Z,totalItemsCount:p})]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"u-ui-margin-large",children:(0,z.jsx)(Kp,{screen:M})}),(0,z.jsxs)("div",{children:[Q(n),(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[f.businessAccount&&A&&(0,z.jsx)(Nse,{banner:f.businessAccount}),n&&(0,z.jsx)(gae,{user:n,...s,showActions:a,isAvailableForMigration:C,viewingSelf:A,onTogglePoliciesModal:X,screen:$t.UserProfile,compactMode:!0,onUserInfoClick:V(Pae.Feedback),isContentTranslationEnabled:I}),A&&b&&(0,z.jsx)(ic.I,{inline:!0,deprecatedIconColor:ht.Z.Color.GreyscaleLevel3,deprecatedIconName:"info-circle",iconPosition:ic.I.IconPosition.Right,onClick:Y,styling:ic.I.Styling.Flat,testId:"promotional_tools_link",theme:"muted",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:c("promotional_tools_link")})}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(M$,{show:O,onConfirm:Y}),(0,z.jsx)(rre,{user:n,bundleProps:T,showActions:a,viewingSelf:A})]}),(0,z.jsx)(h.Z,{}),!w&&(0,z.jsx)(cre,{collections:d,viewingSelf:A,allowBump:D}),w&&(0,z.jsx)(cae,{viewingSelf:A,userId:t}),(0,z.jsx)(E$,{isInitiatedFromMultiSelect:!1,onCheckoutSuccess:H}),(0,z.jsx)(W4,{onCheckoutSuccess:H})]}),(0,z.jsx)(wae,{userId:t,allowBump:!0,userOnHoliday:!(null==n||!n.is_on_holiday),currentUserId:null==g?void 0:g.id,items:o,itemsCount:m,isLoading:u,filters:v,catalogs:_,fetchMore:j,update:S,updateFilters:Z,totalItemsCount:p})]})})(e);case Pae.Feedback:return(e=>e.user?(0,z.jsx)(Gre,{...e.userInfo.feedbackProps,isContentTranslationEnabled:I,userId:e.user.id,username:e.user.login,showTitle:!1}):null)(e);case Pae.About:return(e=>e.user?(0,z.jsx)(gae,{user:e.user,...e.userInfo,showActions:e.showActions,isAvailableForMigration:C,viewingSelf:A,onTogglePoliciesModal:X,screen:$t.UserAbout,onUserInfoClick:V(Pae.Feedback),isContentTranslationEnabled:I}):null)(e);default:return null}},ee=e=>null!=e&&e.business?(0,z.jsx)($Q,{show:F,onClose:X,user:e}):null;return(0,z.jsx)(eae,{userId:t,children:e=>{const{user:t,userInfo:i,showActions:n}=e,{showSupportFunctionality:s}=i;return(0,z.jsxs)(z.Fragment,{children:[t&&s&&Z&&(0,z.jsx)(tae,{userId:t.id}),(0,z.jsxs)(Nm,{breakpoint:"phones",children:[(0,z.jsx)(c1.Z,{items:K(),width:c1.Z.Width.Parent,activeItemId:P,onClick:q}),(0,z.jsx)(h.Z,{}),$(e)]}),(0,z.jsx)(Nm,{breakpoint:"tabletsUp",children:(0,z.jsx)("div",{className:"container",children:(0,z.jsxs)("div",{className:"profile u-flex-direction-column",children:[(0,z.jsxs)("div",{children:[Q(t),f.businessAccount&&A&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Nse,{banner:f.businessAccount}),(0,z.jsx)(x.Z,{size:x.Z.Size.X3Large})]}),t&&(0,z.jsx)(Hse,{user:t,...i,showActions:n,isAvailableForMigration:C,viewingSelf:A,screen:M,onTogglePoliciesModal:X,onRatingClick:V(Pae.Feedback),isContentTranslationEnabled:I}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Large}),(0,z.jsx)("span",{id:"tabs",children:(0,z.jsx)(c1.Z,{items:K(),activeItemId:P,onClick:q})}),(0,z.jsx)(h.Z,{})]}),P!==Pae.Feedback&&(0,z.jsx)(x.Z,{}),$(e)]})})}),(0,z.jsx)(vae,{}),b&&(0,z.jsx)(B$,{showInlineVasGalleryCheckout:!0,show:k,onClose:G,onCheckoutSuccess:H}),ee(t)]})}})})),ProfileFeedback:wT(Gre),ProfileSideNavigation:wT(SJ),Referrals:wT((e=>{let{isClientSideRenderReady:t}=e;const i=E(),{pushHistoryState:n,relativeUrl:s}=xc(),{fetch:r,transformedData:a,error:o,isLoading:l}=ih(Fe.vyv,gx),{fetch:c,transformedData:d,error:u,isLoading:p}=ih(Fe.no_,xx),[g,h]=(0,m.useState)(s===Me._Ig),x=d&&"howItWorks"in d,f=i.tabletsUp||!g,y=o||u||!x,v=l||p||!t;return(0,m.useEffect)((()=>{f&&(r(),c())}),[c,r,f]),(0,m.useEffect)((()=>{function e(){h((e=>!e))}return window.addEventListener("popstate",e),()=>window.removeEventListener("popstate",e)}),[]),v?(0,z.jsx)(Mp,{styling:Mp.Styling.Wide,size:Mp.Size.Large,testId:"referrals-loader"}):y&&f?(0,z.jsx)(sw,{}):(0,z.jsxs)(z.Fragment,{children:[g?(0,z.jsx)(Hae,{onRegistrationsClose:function(){n(Me.Aof),h(!1)}}):null,f&&d&&x?(0,z.jsx)(Dae,{onRegistrationsOpen:function(){n(Me._Ig),h(!0)},share:a,instructions:d}):null,a?(0,z.jsx)(Gae,{isVisible:!a.isEnabled}):null]})})),UserNotifications:wT((()=>{const e=U("user.notifications"),{notifications:t,controlNotificationCards:i,uiState:n,setUiState:s,isEndReached:r}=z1({perPage:20}),{logCardImpression:a}=(0,m.useContext)(Im),{onClick:o,onEnter:l}=T1(),c=i&&i.length>0?()=>i.forEach((e=>a(e.id))):void 0;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{type:gt.Z.Type.Navigating,children:(0,z.jsx)(xt.Z,{text:e("title"),width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,type:xt.Z.Type.Title})}),(0,z.jsx)(h.Z,{}),r&&(0,v.isEmpty)(t)?(0,z.jsx)(Wae,{onEnter:c,children:(0,z.jsx)(gt.Z,{children:(0,z.jsx)(tc.Z,{allowHtml:!0,title:e("empty_state.title"),body:e("empty_state.body",{"subscriptions-url":e=>(0,z.jsx)("a",{href:Me.b1y,children:e})}),animation:(0,z.jsx)(u.Z,{animationUrl:"/assets/animations/notifications-empty-state.json"})})})}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Qp,{renderItems:()=>(0,z.jsx)(L,{separator:(0,z.jsx)(h.Z,{}),children:t.map(((e,t)=>{const i=l(e),n=0===t&&c?()=>{c(),i()}:i;return(0,z.jsx)(F1,{notification:e,onClick:o(e),onEnter:n,defaultHighlighted:!e.isViewed},e.id)}))}),onPageEnd:()=>{n===Ne.Pending||r||s(Ne.Pending)},cursor:"notifications-".concat(t.length)}),n===Ne.Pending&&(0,z.jsx)(Mp,{styling:Mp.Styling.Wide,testId:"user-notifications-loader"})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large})]})})),TwoFactorVerification:wT(_2),EmailVerification:wT((()=>{const e=XY(Me.KPt),t=U("email_verification"),i=(0,p.v9)(K),n=(0,p.v9)(X),[s,r]=(0,m.useState)(!1),[a,o]=(0,m.useState)(i),[l,c]=(0,m.useState)(null);return(0,z.jsx)("div",{className:"narrow-container u-margin-auto",children:(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(xt.Z,{width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center,type:xt.Z.Type.Heading,text:t("title")}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(xt.Z,{text:t(s?"waiting_for_confirmation":"body")}),!s&&(0,z.jsx)(gh,{name:"email",title:t("input_label"),value:a,onChange:e=>{o(e.target.value)},validation:l?(0,z.jsx)(zm.Z,{text:l,theme:"warning"}):null}),s?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(ic.I,{text:t("actions.done"),styling:ic.I.Styling.Filled,url:e})]}):(0,z.jsx)(ic.I,{text:t("actions.send"),styling:ic.I.Styling.Filled,onClick:async()=>{if(!n||!a)return;const e=await(0,Fe.AH9)({userId:n,email:a});var t;"errors"in e?c((null===(t=e.errors[0])||void 0===t?void 0:t.value)||e.message):r(!0)}})]})})})),WalletBalance:wT((()=>{const e=(0,p.I0)(),t=(0,p.v9)(m8),i=(0,p.v9)(Wt("web_direct_donation")),n=xc().relativeUrl.includes("/donate");return(0,m.useEffect)((()=>{e(OE.getCurrentInvoicesRequest())}),[e]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(doe,{}),(0,z.jsxs)("div",{className:"body-content__content",children:[(0,z.jsx)(Coe,{}),i?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(Zoe,{showModal:n})]}):null,(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(loe,{invoiceLines:t,shouldRenderStartBalance:!0})]})]})]})})),WalletInvoices:wT(loe),LeaveProfileFeedback:wT((e=>{let{feedbackId:t,userId:i}=e;const[n,s]=(0,m.useState)(Ne.Idle),[r,a]=(0,m.useState)(),o=XY(""),{transformedData:l,fetch:c}=ih(Fe.$P8,(e=>e.satisfaction_survey_enabled||!1)),{transformedData:d,fetch:u}=ih(Fe.foU,(e=>e.transaction)),{transformedData:g,fetch:h}=ih(Fe.GAF,(e=>e.user)),{transformedData:f,fetch:y}=ih(Fe.qmj,(e=>e.user_feedback)),v=(0,p.v9)(X),_=U("user.feedback.feedback_form"),b=(0,p.v9)(Vn("OFFLINE_VERIFICATION_FEEDBACK_FORM1")),{transaction_id:j,referer:S}=xc().searchParams,Z=Number.isNaN(j)?void 0:Number(j),I=void 0!==l&&(Z?!!d:!!g&&!!f),C=("buyer"===(null==d?void 0:d.user_side)?null==d?void 0:d.seller:null==d?void 0:d.buyer)||g,k="on"===(null==b?void 0:b.variant)&&(null==d?void 0:d.offline_verification)&&"inbox"===S&&Z&&!!o;function w(){return!Z&&i?"".concat((0,Me.G0B)(i),"?tab=feedback"):k?(0,ys.Iq)(o,{offline_verification_feedback:!0}):l&&v?"".concat((0,Me.eDk)(v),"?transaction_id=").concat(Z||""):o||(null!=d&&d.item_id?(0,Me.DWf)(null==d?void 0:d.item_id):i?"".concat((0,Me.G0B)(i),"?tab=feedback"):Me.mYc)}async function P(e,t){if(!function(e,t){const i={};return t||(i.rating=_("validation.rating_empty")),e||(i.rating=_("validation.feedback_empty")),!Object.keys(i).length||(s(Ne.Failure),a(i),!1)}(e,t))return;let n;if(s(Ne.Pending),f)n=await(0,Fe.lvz)({feedbackId:f.id,feedback:e,rating:t});else{if(!i)return;n=await(0,Fe.lJ8)({userId:i,feedback:e,rating:t,transactionId:Z})}const r=w();if(n.code!==pm.Q.Ok){if("errors"in n){if(s(Ne.Failure),n.code===pm.Q.ValidationError){const e=n.errors.reduce(((e,t)=>{let{field:i,value:n}=t;return{...e,[i]:n}}),{});return void a(e)}a({feedback:n.message})}}else(0,ls.mZ)(r)}return(0,m.useEffect)((()=>{v&&c({userId:v,transactionId:Z})}),[c,v,Z]),(0,m.useEffect)((()=>{Z&&u({id:Z})}),[u,Z]),(0,m.useEffect)((()=>{Z||i&&t&&y({feedbackId:t})}),[t,y,Z,i]),(0,m.useEffect)((()=>{Z||i&&h({id:i})}),[h,Z,i]),(0,z.jsxs)("div",{className:"medium-container",children:[(0,z.jsx)("div",{className:"u-ui-padding-vertical-medium",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,width:xt.Z.Width.Parent,children:_("title")})}),(0,z.jsx)(x.Z,{}),function(){const e=w();if(!C||!I)return(0,z.jsx)(Dp.Z,{testId:"leave-profile-feedback-loader"});let t={};if(f){const{rating:e,feedback:i}=f;t={rating:e,feedback:i}}return(0,z.jsx)(Nae,{returnUrl:e,user:C,transaction:d,isLoading:n===Ne.Pending,formErrors:r,onSave:P,...t})}()]})})),RequestReturn:wT(Xk),PayoutDetails:wT((()=>{const e=(0,p.I0)(),t=U("payout"),{relativeUrl:i,urlQuery:n}=xc(),s=(0,p.v9)(Moe),r=(0,p.v9)(Uoe),a=(0,p.v9)(Woe),o=(0,p.v9)(Nc),l=(0,p.v9)(Boe),c=(0,p.v9)(X),d=(e=>Number.isNaN(e)?null:Number(e))(i.split("/").pop()),u=(e=>{const{success:t}=(0,ys.oZ)(e);return!!(0,v.isString)(t)&&"true"===t})(n),h={amount:t("withdrawal_amount"),progress:t("withdrawal_progress")},f=(0,m.useCallback)((()=>{c&&d&&e(UE.getPayoutRequest({userId:c,payoutId:d}))}),[e,c,d]);(0,m.useEffect)((()=>{f()}),[f]);const y=()=>(0,ls.ru)(Me.cz_),_=()=>(0,z.jsx)(ic.I,{styling:ic.I.Styling.Filled,text:t("buttons.go_to_balance"),onClick:y});return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(doe,{}),(0,z.jsx)("div",{className:"body-content__content",children:s===Ne.Pending?(0,z.jsx)(Mp,{size:Mp.Size.Large,testId:"payout-details-loader"}):s===Ne.Failure?(0,z.jsx)(gt.Z,{children:(0,z.jsx)(sw,{onCtaClick:f})}):c&&d&&a.length?(0,z.jsxs)(z.Fragment,{children:[u?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Koe,{text:t("messages.payout_initialized")}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})]}):null,(0,z.jsx)(g.Z,{children:(0,z.jsx)(lw,{amount:r,progressDetails:a,locale:o,currency:l,labels:h})}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Nm,{breakpoint:"desktops",children:(0,z.jsx)(gt.Z,{theme:"transparent",styling:gt.Z.Styling.Tight,suffix:_()})}),(0,z.jsx)(Nm,{breakpoint:"portables",children:_()})]})]}):null})]})})),ForceBalanceActivation:wT((()=>{const e=U("force_balance_activation"),t=(0,p.v9)(W);const i={title:e("title"),description:e("description")};return null!=t&&t.restricted_by_balance_activation?(0,z.jsxs)("div",{className:"grid8 push2",children:[(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{text:e("header"),type:xt.Z.Type.Heading,width:xt.Z.Width.Parent,alignment:xt.Z.Alignment.Center})}),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:i.title}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(xt.Z,{text:i.description})]}),(0,z.jsx)(Qoe,{onSuccess:function(){(0,ls.ru)(Me.mYc)}})]})]}):((0,ls.ru)(Me.mYc),null)})),BalanceActivation:wT((()=>(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(doe,{}),(0,z.jsx)("div",{className:"wallet body-content__content",children:(0,z.jsx)(Qoe,{wide:!0,blocksAreSeparated:!0,onSuccess:()=>{(0,ls.ru)(Me.cz_)}})})]}))),ManageBankAccount:wT((()=>(0,z.jsx)("div",{className:"grid8 push2",children:(0,z.jsx)(ple,{})}))),Banned:wT((()=>{const e=(0,p.v9)(X),[t,i]=(0,m.useState)();return(0,m.useEffect)((()=>{e&&(async()=>{const t=await(0,Fe.$h1)(e);"errors"in t||i((e=>({actions:e.actions,bannedDescription:e.banned_description,blockingReason:e.blocking_reason,helpLink:e.help_link,title:e.title}))(t.details))})()}),[e]),t?(0,z.jsxs)("div",{className:"narrow-container u-margin-auto",children:[(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large}),(0,z.jsx)(xt.Z,{text:t.title,type:xt.Z.Type.Heading,alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:t.bannedDescription}),null!=t&&t.blockingReason?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:null==t?void 0:t.blockingReason})]}):null,(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:t.helpLink,html:!0}),null==t?void 0:t.actions.map(((e,t)=>{const i=0===t?ic.I.Styling.Filled:void 0;return(0,z.jsxs)(m.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(ic.I,{text:e.title,url:e.link,styling:i})]},t)}))]}):null})),ForumEditPostPage:wT((()=>{const e=xc().searchParams.id,t=(0,p.v9)(pA),i=(0,p.v9)(gA),n=E(),s=U("forum"),r=(0,m.useRef)(),[a,o]=(0,m.useState)(""),[l,c]=(0,m.useState)(""),[d,u]=(0,m.useState)(!0),[f,y]=(0,m.useState)(!1),[_,b]=(0,m.useState)(!1),j=(0,m.useMemo)((()=>ZF().v4()),[]),S=(0,m.useRef)(!1),Z=(0,m.useRef)(!1),I=(0,m.useRef)(!1),{fetchInitialData:C,forum:k,topic:w,subforum:P,uiState:T}=(e=>{let{postId:t,onSuccess:i}=e;const[n,s]=(0,m.useState)(),[r,a]=(0,m.useState)(),[o,l]=(0,m.useState)(),[c,d]=(0,m.useState)(null),[u,p]=(0,m.useState)(Ne.Pending),g=(0,m.useRef)((async()=>{if("string"!=typeof t)return;p(Ne.Pending);const e=await(0,Fe.yNR)(Number(t));if("errors"in e)return void p(Ne.Failure);const r=kle(e.forum_post);s(n);const o=(0,Fe.UnZ)(r.topicId),c=(0,Fe.Vgs)(r.forumId),[u,m]=await Promise.all([o,c]);if("errors"in u||"errors"in m)return void p(Ne.Failure);const g=pt(u.forum_topic),h=Ple(m.forum),x=h.subforums.find((e=>{let{id:t}=e;return t===r.subforumId&&g.subforumId===t}))||null;a(g),l(h),d(x),i({topic:g,forum:h,subforum:x,post:r}),p(Ne.Success)}));return(0,m.useEffect)((()=>{g.current()}),[]),{fetchInitialData:g.current,uiState:u,post:n,topic:r,forum:o,subforum:c}})({postId:e,onSuccess:e=>{let{post:t}=e;c(t.body.trim()),u(t.wasAnonymous)}}),{mentions:F,handleMentionClick:N,inputElementRef:O,hideMentions:R}=zle(l,c),D=e=>{e&&(r.current=e,O(e))};function A(){S.current=!0,u((e=>!e))}function M(e){let t="";var i,n;return e.trim().length<1&&(t=s("edit_post_page.errors.empty_message"),null===(i=r.current)||void 0===i||i.focus()),e.length>Re&&(t=s("edit_post_page.errors.too_long_message",{minCharCount:1,maxCharCount:Re}),null===(n=r.current)||void 0===n||n.focus()),o(t),t}function B(e){let{target:{value:t}}=e;c(t),S.current=!0,a&&M(t)}L8((()=>S.current&&!Z.current&&!f)),(0,m.useEffect)((()=>{I.current&&(S.current=!0),I.current=I.current||i===Ne.Success}),[i,t]);const q=()=>(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[(0,z.jsxs)("div",{className:"u-position-relative u-border-radius-inherit",children:[(0,z.jsx)(zp,{onOutsideClick:R,isDisabled:_,children:(0,z.jsx)(Fle,{mentions:F,onMentionClick:N,className:"input-mentions__list--edit-post-body"})}),(0,z.jsx)("div",{className:"u-overflow-hidden",children:(0,z.jsx)(Gw,{title:s("edit_post_page.post_message.title"),styling:"wide",name:"post_message",placeholder:s("edit_post_page.post_message.placeholder"),required:!0,value:(0,v.unescape)(l),onChange:B,validation:a?(0,z.jsx)("span",{"data-testid":"message-validation",children:(0,z.jsx)(zm.Z,{text:a,theme:"warning"})}):s("edit_post_page.post_message.hint",{minCharCount:1,maxCharCount:Re}),ref:D})})]}),(null==w?void 0:w.isAnonymous)&&(0,z.jsx)("div",{className:"u-overflow-hidden",children:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,title:s("edit_post_page.anonymous_selection.title"),body:s("edit_post_page.anonymous_selection.subtitle"),suffix:(0,z.jsx)(lJ.Z,{name:"anonymous-posting-toggle",checked:d,onChange:A})})})]}),n.phones&&(0,z.jsx)(h.Z,{})]});return T===Ne.Failure||"string"!=typeof e?(0,z.jsx)(Ig,{onRetryClick:function(){C()}}):T===Ne.Pending?(0,z.jsx)("div",{"data-testid":"edit-post-page-loader",className:"u-flexbox u-justify-content-center u-align-items-center u-fill-viewport",children:(0,z.jsx)(Dp.Z,{size:Dp.Z.Size.XLarge})}):k&&w?(0,z.jsxs)("div",{className:"row u-ui-padding-horizontal-regular@tablets u-ui-padding-horizontal-x-large@desktops",children:[(0,z.jsx)(Zle,{show:_,onClose:function(){b(!1)}}),(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),!n.phones&&(0,z.jsx)(Ile,{testId:"breadcrumbs",forumPath:k.path,forumTitle:k.title,subforumPath:null==P?void 0:P.path,subforumTitle:null==P?void 0:P.title,topicPath:w.path,topicTitle:w.title}),(0,z.jsx)("div",{className:"u-ui-padding-horizontal-large@phones",children:(0,z.jsx)(Sle,{title:s("edit_post_page.page_title")})}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),n.phones?q():(0,z.jsx)(g.Z,{children:q()}),n.tabletsUp&&(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)("div",{className:n.phones?"u-overflow-hidden":"",children:(0,z.jsx)(g.Z,{children:(0,z.jsx)(bte,{tempUuid:j,numberOfImagesPerItem:15,photoEntryId:e,type:YF.Forum,enableRotation:!1,enablePhotoTips:!1})})}),n.phones&&(0,z.jsx)(h.Z,{}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(Cle,{isLoading:f,discardButtonTitle:s("edit_post_page.actions.discard"),submitButtonTitle:s("edit_post_page.actions.save"),onDiscardClick:function(){w&&"string"==typeof e&&(Z.current=!0,(0,ls.ru)((0,Me.G$j)(w.path,e)))},onSubmitClick:async function(){if(M(l)||!w||"string"!=typeof e)return;y(!0);const i=await(0,Fe.mPl)({id:Number(e),body:l.trim(),isAnonymous:d,assignedPhotos:t});if("errors"in i&&i.code===pm.Q.ValidationError){y(!1);const e=i.errors.find((e=>{let{field:t}=e;return"body"===t}));e&&o(e.value)}else{if("errors"in i&&i.code!==pm.Q.ValidationError)return y(!1),void b(!0);(0,ls.ru)((0,Me.G$j)(w.path,e))}}})]}):null})),ForumNewTopicPage:wT((()=>{const e=(0,p.v9)(pA),{forum_id:t,sub_forum_id:i}=xc().searchParams,n=E(),s=U("forum"),{register:r,handleSubmit:a,setError:o,watch:l,setValue:c,formState:d}=(0,th.cI)(),{errors:u,isSubmitting:f}=d,y=(0,m.useMemo)((()=>ZF().v4()),[]),v=l(Dle.Message),{mentions:_,handleMentionClick:b,hideMentions:j,inputElementRef:S}=zle(v,(e=>{c(Dle.Message,e,{shouldValidate:!1,shouldDirty:!1})})),{ref:Z,...I}=r(Dle.Message,{required:{value:!0,message:s("new_topic_page.topic_message.errors.required")},maxLength:{value:Re,message:s("new_topic_page.topic_message.errors.max_length",{min:1,max:Re})}}),C=e=>{e&&(Z(e),S(e))},k=(0,m.useRef)(!1),[w,P]=(0,m.useState)(null),[T,F]=(0,m.useState)(!1),[N,O]=(0,m.useState)(!1),[R,D]=(0,m.useState)(!1),[A,M]=(0,m.useState)(!1),B=fh(u);L8((()=>k.current&&!N));const{fetchInitialData:q,forum:V,subforum:H,uiState:G}=(e=>{let{forumId:t,subforumId:i,onSuccess:n}=e;const[s,r]=(0,m.useState)(),[a,o]=(0,m.useState)(null),[l,c]=(0,m.useState)(Ne.Pending),d=async()=>{c(Ne.Pending);const e=await(0,Fe.Vgs)(t);if("errors"in e)return void c(Ne.Failure);const s=Ple(e.forum),a=s.subforums.find((e=>{let{id:t}=e;return t===i}))||null;r(s),o(a),n({forum:s,subforum:a}),c(Ne.Success)},u=(0,m.useRef)(d);return u.current=d,(0,m.useEffect)((()=>{u.current()}),[]),{fetchInitialData:u.current,forum:s,subforum:a,uiState:l}})({forumId:Number(t),subforumId:Number(i),onSuccess:function(e){let{subforum:t}=e;P(t)}});function W(){k.current=!0,F((e=>!e))}function X(e){k.current=!0,P(e)}function Y(){k.current=!0}if((0,m.useEffect)((()=>{f&&O(!0)}),[f]),(0,m.useEffect)((()=>{const{errors:e}=d;(e.title||e.body)&&O(!1)}),[d]),(0,m.useEffect)((()=>{v&&(k.current=!0)}),[v]),(0,m.useEffect)((()=>{e.length>0&&(k.current=!0)}),[e]),G===Ne.Failure)return(0,z.jsx)(Ig,{onRetryClick:function(){q()}});if(G===Ne.Pending)return(0,z.jsx)("div",{"data-testid":"new-topic-page-loader",className:"u-flexbox u-justify-content-center u-align-items-center u-fill-viewport",children:(0,z.jsx)(Dp.Z,{size:Dp.Z.Size.XLarge})});if(!V)return null;const K=n.phones?m.Fragment:g.Z;return(0,z.jsxs)("form",{className:"row u-ui-padding-horizontal-regular@tablets u-ui-padding-horizontal-x-large@desktops",onSubmit:a((async function(i){let{title:n,body:s}=i;const r={title:n.trim(),body:s.trim(),isAnonymous:!(null==V||!V.isAllowAnonymous)&&T,forumId:Number(t),subforumId:null==w?void 0:w.id,assignedPhotos:e},a=await(0,Fe.CmU)(r);if("errors"in a)return a.code===pm.Q.ValidationError?a.errors.forEach((e=>{(0,_i.IF)(e.field,Dle)&&o(e.field,{type:"manual",message:e.value})})):M(!0),void O(!1);const{path:l}=pt(a.forum_topic);(0,ls.ru)(l)})),children:[V?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),n.tabletsUp&&(0,z.jsx)(Ile,{testId:"breadcrumbs",forumPath:V.path,forumTitle:V.title,subforumPath:null==H?void 0:H.path,subforumTitle:null==H?void 0:H.title}),(0,z.jsx)("div",{className:"u-ui-padding-horizontal-large@phones",children:(0,z.jsx)(Sle,{title:s("new_topic_page.page_title"),forumTitle:V.title,subforumTitle:null==w?void 0:w.title,showRulesTitle:!!V.rules,onRulesClick:function(){D(!0)}})}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})]}):null,function(){if(!V)return null;const e=n.phones?m.Fragment:g.Z;return(0,z.jsxs)(e,{children:[(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[(0,z.jsxs)("div",{className:"u-position-relative u-border-radius-inherit",children:[(0,z.jsx)(zp,{onOutsideClick:j,isDisabled:A||R,children:(0,z.jsx)(Fle,{mentions:_,onMentionClick:b,className:"input-mentions__list--new-topic-body"})}),(0,z.jsx)("div",{className:"u-overflow-hidden",children:(0,z.jsx)(gh,{...r(Dle.Title,{required:{value:!0,message:s("new_topic_page.topic_title.errors.required",{min:5,max:Oe})},minLength:{value:5,message:s("new_topic_page.topic_title.errors.min_length",{min:5})},maxLength:{value:Oe,message:s("new_topic_page.topic_title.errors.max_length",{max:Oe})},onChange:Y}),title:s("new_topic_page.topic_title.title"),styling:"wide",placeholder:s("new_topic_page.topic_title.placeholder"),validation:u.title?hh(B(Dle.Title)):s("new_topic_page.topic_title.hint",{min:5,max:Oe}),uncontrolled:!0})})]}),(0,z.jsx)("div",{className:"u-overflow-hidden",children:(0,z.jsx)(Gw,{...I,title:s("new_topic_page.topic_message.title"),styling:"wide",placeholder:s("new_topic_page.topic_message.placeholder"),validation:u.body?hh(B(Dle.Message)):s("new_topic_page.topic_message.hint",{min:1,max:Re}),ref:C,uncontrolled:!0})}),V.subforums.length>0&&(0,z.jsx)("div",{className:"u-overflow-hidden",children:(0,z.jsx)(Ole,{selectedSubforum:w,subforums:V.subforums,onChange:X})}),V.isAllowAnonymous&&(0,z.jsx)("div",{className:"u-overflow-hidden",children:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,title:s("new_topic_page.anonymous_selection.title"),body:(0,z.jsx)(xt.Z,{text:s("new_topic_page.anonymous_selection.subtitle"),format:!0}),suffix:(0,z.jsx)(lJ.Z,{name:"anonymous-posting-toggle",checked:T,onChange:W})})})]}),n.phones&&(0,z.jsx)(h.Z,{})]})}(),n.tabletsUp&&(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(K,{children:(0,z.jsx)("div",{className:"u-overflow-hidden",children:(0,z.jsx)(bte,{tempUuid:y,numberOfImagesPerItem:15,photoEntryId:null,type:YF.Forum,enableRotation:!1,enablePhotoTips:!1})})}),n.phones&&(0,z.jsx)(h.Z,{}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(Cle,{isLoading:N,discardButtonTitle:s("new_topic_page.actions.discard"),submitButtonTitle:s("new_topic_page.actions.create"),onDiscardClick:function(){V&&(k.current=!1,(0,ls.ru)((null==H?void 0:H.path)||V.path))}}),(0,z.jsx)(Rle,{isOpen:R,body:V.rules,onConfirm:function(){D(!1)}}),(0,z.jsx)(Zle,{show:A,onClose:function(){M(!1)}})]})})),ForumHomePage:wT((()=>{const e=E(),t=U(),[i,n]=(0,m.useState)([]),[s,r]=(0,m.useState)(""),[a,o]=(0,m.useState)(Ne.Pending);function l(t){return(0,z.jsxs)("div",{className:e.tabletsUp?"u-overflow-hidden":void 0,children:[(0,z.jsx)(yt.Z,{styling:e.tabletsUp?yt.Z.Styling.Wide:void 0,text:t.title,type:yt.Z.Type.Leading}),e.phones&&(0,z.jsx)(h.Z,{}),(0,z.jsx)(L,{separator:(0,z.jsx)(h.Z,{}),children:t.forums.map((e=>(0,z.jsx)(Hle,{...e,url:e.path,isUserDeleted:e.isLastPostUserDeleted},e.id)))}),e.phones&&(0,z.jsx)(h.Z,{})]})}return(0,m.useEffect)((()=>{a===Ne.Pending&&(async()=>{const e=await(0,Fe.eBU)();if("errors"in e)return void o(Ne.Failure);const t=(e=>e.map(Ale))(e.forum_groups);n(t),t.length&&r(t[0].rulesUrl),o(Ne.Success)})()}),[a]),a===Ne.Pending?(0,z.jsx)("div",{"data-testid":"forum-home-page-loader",className:"u-flexbox u-justify-content-center u-align-items-center u-fill-viewport",children:(0,z.jsx)(Dp.Z,{size:Dp.Z.Size.XLarge})}):a===Ne.Failure?(0,z.jsx)(Ig,{onRetryClick:function(){o(Ne.Pending)}}):(0,z.jsxs)("div",{className:e.phones?"row":void 0,children:[(0,z.jsxs)("div",{className:"u-ui-padding-horizontal-large@phones",children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:t("forum.home_page.page_title"),width:xt.Z.Width.Parent}),s&&(0,z.jsx)(xt.Z,{type:xt.Z.Type.Body,html:!0,text:t("forum.home_page.page_subtitle",{rules_link:"<a href=".concat(s,">").concat(t("forum.home_page.rules_title"),"</a>")})})]}),(0,z.jsx)(Gle,{topSpacerSize:x.Z.Size.XLarge}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),function(){const t=e.tabletsUp?g.Z:m.Fragment;return(0,z.jsx)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),children:i.map((e=>(0,z.jsx)(t,{children:l(e)},e.id)))})}()]})})),ForumEditTopicPage:wT((()=>{const{id:e}=xc().searchParams,t=XY(""),i=E(),n=U("forum"),s=(0,m.useRef)(null),r=(0,m.useRef)(!1),[a,o]=(0,m.useState)(""),[l,c]=(0,m.useState)(null),[d,u]=(0,m.useState)(null),[p,f]=(0,m.useState)(!1),[y,v]=(0,m.useState)(!1),[_,b]=(0,m.useState)(""),[j,S]=(0,m.useState)(!1);L8((()=>r.current&&!j));const{fetchInitialData:Z,topic:I,forum:C,subforum:k,uiState:w}=(e=>{let{topicId:t,onSuccess:i}=e;const[n,s]=(0,m.useState)(),[r,a]=(0,m.useState)(),[o,l]=(0,m.useState)(null),[c,d]=(0,m.useState)(Ne.Pending),u=async()=>{d(Ne.Pending);const e=await(0,Fe.UnZ)(Number(t));if("errors"in e)return void d(Ne.Failure);const n=pt(e.forum_topic),r=await(0,Fe.Vgs)(n.forumId);if("errors"in r)return void d(Ne.Failure);const o=Ple(r.forum),c=o.subforums.find((e=>{let{id:t}=e;return t===n.subforumId}))||null;s(n),a(o),l(c),i({topic:n,forum:o,subforum:c}),d(Ne.Success)},p=(0,m.useRef)(u);return p.current=u,(0,m.useEffect)((()=>{p.current()}),[]),{fetchInitialData:p.current,topic:n,forum:r,subforum:o,uiState:c}})({topicId:Number(e),onSuccess:function(e){let{topic:t,subforum:i}=e;u(i),c(i),o(t.title.trim())}});function P(e){let t="";var i,r;return e.trim().length<5&&(t=n("edit_topic_page.topic_title.errors.min_length",{min:5}),null===(i=s.current)||void 0===i||i.focus()),e.length>Oe&&(t=n("edit_topic_page.topic_title.errors.max_length",{min:5,max:Oe}),null===(r=s.current)||void 0===r||r.focus()),b(t),t}function T(e){let{target:{value:t}}=e;o(t),r.current=!0,_&&P(t)}function F(e){c(e)}const N=()=>C?(0,z.jsxs)("div",{className:"u-overflow-hidden",children:[(0,z.jsx)(gh,{title:n("edit_topic_page.topic_title.title"),styling:"wide",name:"topic_title",placeholder:n("edit_topic_page.topic_title.placeholder"),value:a,onChange:T,validation:_?(0,z.jsx)(zm.Z,{text:_,theme:"warning"}):n("edit_topic_page.topic_title.hint",{min:5,max:Oe}),forwardedRef:s}),C.subforums.length>0&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(Ole,{selectedSubforum:l,subforums:C.subforums,onChange:F})]}),(null==I?void 0:I.isAnonymous)&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,title:n("edit_topic_page.anonymous_selection.title"),body:n("edit_topic_page.anonymous_selection.subtitle"),suffix:(0,z.jsx)(lJ.Z,{name:"anonymous_posting_toggle",disabled:!0,checked:null==I?void 0:I.isAnonymous})})]}),i.phones&&(0,z.jsx)(h.Z,{})]}):null;return w===Ne.Failure?(0,z.jsx)(Ig,{onRetryClick:function(){Z()}}):w===Ne.Pending?(0,z.jsx)("div",{"data-testid":"edit-topic-page-loader",className:"u-flexbox u-justify-content-center u-align-items-center u-fill-viewport",children:(0,z.jsx)(Dp.Z,{size:Dp.Z.Size.XLarge})}):C?(0,z.jsxs)("div",{className:"row u-ui-padding-horizontal-regular@tablets u-ui-padding-horizontal-x-large@desktops",children:[C?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Small}),(0,z.jsx)(V5,{breakpoint:"phones",children:(0,z.jsx)(Ile,{testId:"breadcrumbs",forumPath:C.path,forumTitle:C.title,subforumPath:null==k?void 0:k.path,subforumTitle:null==k?void 0:k.title})}),(0,z.jsx)("div",{className:"u-ui-padding-horizontal-large@phones",children:(0,z.jsx)(Sle,{title:n("edit_topic_page.page_title"),forumTitle:C.title,subforumTitle:null==l?void 0:l.title,showRulesTitle:!!C.rules,onRulesClick:function(){f(!0)}})}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})]}):null,i.phones?N():(0,z.jsx)(g.Z,{children:N()}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(Cle,{isLoading:j,discardButtonTitle:n("edit_topic_page.actions.discard"),submitButtonTitle:n("edit_topic_page.actions.save"),onDiscardClick:function(){I&&(r.current=!1,(0,ls.ru)(t||I.path))},onSubmitClick:async function(){if(P(a))return;S(!0);const i={id:Number(e),title:a.trim(),forumId:null==C?void 0:C.id,subforumId:(null==l?void 0:l.id)||null},n=await(0,Fe.DtQ)(i);if("errors"in n){if(S(!1),n.code===pm.Q.ValidationError){const e=n.errors.find((e=>{let{field:t}=e;return"title"===t}));return void(e&&b(e.value))}return void v(!0)}const s=pt(n.forum_topic),r=t&&(null==d?void 0:d.id)!==(null==l?void 0:l.id);r&&l?(0,ls.ru)(l.path):r&&!l&&C?(0,ls.ru)(C.path):(0,ls.ru)(t||s.path)}}),(0,z.jsx)(Rle,{isOpen:p,body:C.rules,onConfirm:function(){f(!1)}}),(0,z.jsx)(Zle,{show:y,onClose:function(){v(!1)}})]}):null})),ForumTopicPage:wT((()=>{var e;const{relativeUrl:t,searchParams:i}=xc(),{post_id:n,per_page:s}=i,r=(e=>{const t=(0,ys.fb)(e).match(ace);return(null==t?void 0:t.length)&&(Number(t[1])||void 0)})(t),a=rce(),o=De.includes(Number(s)),l=o?Number(s):De[0],c=E(),d=(0,p.v9)(_e),u=U(),f=(0,m.useRef)(null),[v,_]=(0,m.useState)(),[b,j]=(0,m.useState)(),[S,Z]=(0,m.useState)(),[I,C]=(0,m.useState)([]),[k,w]=(0,m.useState)(),[P,T]=(0,m.useState)(Ne.Pending),[F,N]=(0,m.useState)(null),[O,R]=(0,m.useState)([]),D=(e=>!!e&&"wasAnonymous"in e)(F)?F.wasAnonymous:null==F?void 0:F.isAnonymous,{loginTitle:A}=Ble({isAnonymous:D,anonymousTranslation:u("forum.topic_page.post_message_input.anonymous_replying_login"),userName:null==F||null===(e=F.user)||void 0===e?void 0:e.login,isPostAuthor:!(null==F||!F.isPostAuthor),isTopicAuthor:!(null==F||!F.isAuthor),isUserDeleted:!(null==F||!F.isUserDeleted)}),M=(0,m.useRef)(!1),B=!(null==v||!v.canPost)&&d;L8((()=>M.current)),(0,m.useEffect)((()=>{const e=e=>{e.persisted&&(0,ls.sl)()};return window.addEventListener("pageshow",e),()=>{window.removeEventListener("pageshow",e)}}),[]);const q=(0,m.useCallback)((async()=>{if(!r)return void T(Ne.Failure);T(Ne.Pending);const e=(0,Fe.lfy)({topicId:r,page:a,per_page:l}),t=(0,Fe.UnZ)(r),[i,n]=await Promise.all([e,t]);if("errors"in i||"errors"in n)return void T(Ne.Failure);const s=pt(n.forum_topic),o=i.forum_posts.map((e=>kle(e))),c=await(0,Fe.Vgs)(s.forumId);if("errors"in c)return void T(Ne.Failure);const d=Ple(c.forum),u=d.subforums.find((e=>{let{id:t}=e;return s.subforumId===t})),m=vm(i.pagination),p=o.map((e=>{let{postReply:t}=e;return t})).filter((e=>!(null==e||!e.isLiked))).map((e=>e.id)),g=[...p,...o.filter((e=>{let{isLiked:t}=e;return t})).map((e=>{let{id:t}=e;return t}))],h=[...new Set(g)];j(d),Z(u),C(o),_(s),w(m),R(h),T(Ne.Success)}),[r,a,l]);(0,m.useEffect)((()=>{q()}),[q]),(0,m.useEffect)((()=>{P===Ne.Success&&n&&!Array.isArray(n)&&I.some((e=>e.id===Number(n)))&&(0,ls.H5)("post-".concat(n))}),[P,n,I]);const V=e=>{var t;null===(t=f.current)||void 0===t||t.focus(),N(e),(0,ls.H5)("post-input")},H=()=>{if(!v||!k)return;const e=1===I.length&&k.currentPage>1;M.current=!1,e?(0,ls.ru)((0,Me.Skm)(v.path,k.currentPage-1)):(0,ls.sl)()},G=e=>{R((t=>t.find((t=>t===e))?t.filter((t=>t!==e)):[...t,e]))},W=()=>{if(!v)return null;const e=o?De.findIndex((e=>e===Number(s))):0;return(0,z.jsx)(g.Z,{children:(0,z.jsx)(o5.Z,{isLastPageAlwaysShown:!0,pageCount:null==k?void 0:k.totalPages,currentPage:null==k?void 0:k.currentPage,urlBuilder:(e,t)=>(0,ys.Iq)(v.path,{page:t?1:e,per_page:t||l}),activePerPageOptionIndex:e,perPageOptions:c.tabletsUp?De:void 0})})};if(P===Ne.Failure)return(0,z.jsx)(Ig,{onRetryClick:q});if(P===Ne.Pending)return(0,z.jsx)("div",{"data-testid":"loader",className:"u-flexbox u-justify-content-center u-align-items-center u-fill-viewport",children:(0,z.jsx)(Dp.Z,{size:Dp.Z.Size.XLarge})});const X=y()("u-ui-padding-horizontal-large@desktops",{row:c.phones});if(!v||!b||!k)return null;const Y=k.totalEntries>De[0];return(0,z.jsxs)("div",{className:X,"data-testid":"forum-topic-page",children:[c.tabletsUp&&(0,z.jsx)(Ile,{testId:"breadcrumbs",forumPath:b.path,forumTitle:b.title,subforumPath:null==S?void 0:S.path,subforumTitle:null==S?void 0:S.title}),(0,z.jsxs)("div",{className:"u-ui-padding-horizontal-large@phones",children:[(0,z.jsx)(sce,{topicId:v.id,title:v.title,postCount:v.postCount,isTopicSaved:v.isFavourite,forumPath:b.path,subforumPath:null==S?void 0:S.path,canDelete:v.canDelete,canEdit:v.canEdit}),(0,z.jsx)(Gle,{topSpacerSize:x.Z.Size.XLarge}),Y&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),W()]})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),v?(0,z.jsxs)("div",{className:c.phones?"u-overflow-hidden":void 0,children:[(0,z.jsx)(L,{separatorAtBreakpoint:{tabletsUp:(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})},children:I.map((e=>(0,z.jsx)(g.Z,{children:(0,z.jsx)(Qle,{onReply:V,onDelete:H,onLike:G,isLiked:O.some((t=>t===e.id)),isReplyLiked:O.some((t=>{var i;return t===(null===(i=e.postReply)||void 0===i?void 0:i.id)})),post:e,showReplyButton:B,showPhotosWhenSignedOut:v.showPhotosWhenSignedOut})},e.id)))}),I.length>0&&c.phones&&(0,z.jsx)(h.Z,{})]}):null,B&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(ice,{ref:f,replyingToLogin:F?A:void 0,replyingToPostId:null==F?void 0:F.id,tempUuid:"",topicId:v.id,topicPath:v.path,isAnonymousAllowed:v.isAnonymous,onCancel:()=>{N(null)},onAction:()=>{M.current=!0},onSubmit:()=>{M.current=!1},postsPerPage:l,totalPosts:k.totalEntries,totalPages:k.totalPages}),c.phones&&(0,z.jsx)(h.Z,{})]}),Y&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)("div",{className:"u-ui-padding-horizontal-large@phones",children:W()})]})]})})),ForumInnerPage:wT((()=>{const{relativeUrl:e,searchParams:t}=xc(),i=(e=>(0,ys.Uf)(e,1)||"")(e),n=(e=>{if(e.split("/").length<=3)return"";const t=(0,ys.Uf)(e,1)||"",i=(0,ys.Uf)(e,2)||"";return"/forum/".concat(t,"/").concat(i)})(e),s=rce(),r=U(),a=E(),[o,l]=(0,m.useState)([]),[c,d]=(0,m.useState)([]),[u,p]=(0,m.useState)([]),[f,_]=(0,m.useState)(),[b,j]=(0,m.useState)(),[S,Z]=(0,m.useState)(Ne.Pending),I=o.filter((e=>{let{id:t}=e;return!u.includes(t)})),C=c.filter((e=>{let{id:t}=e;return!u.includes(t)})),k=null==f?void 0:f.subforums.find((e=>{let{path:t}=e;return t===n})),w=t.per_page,P=Ae.includes(Number(w)),T=P?Number(w):Ae[0],F=(0,m.useCallback)((async()=>{var e;Z(Ne.Pending);const t=await(0,Fe.iC_)(i);if("errors"in t||0===t.forums.length)return void Z(Ne.Failure);const r=Ple(t.forums[0]),a=(null==r||null===(e=r.subforums.find((e=>{let{path:t}=e;return t===n})))||void 0===e?void 0:e.id)||null,o=await(0,Fe.k6p)({forumId:r.id,subforumId:a,page:s,perPage:T});if("errors"in o)return void Z(Ne.Failure);const c=o.forum_topics.map((e=>pt(e))),u=vm(o.pagination),[m,p]=(0,v.partition)(c,"isOnTop");l(m),d(p),_(r),j(u),Z(Ne.Success)}),[i,s,T,n]);(0,m.useEffect)((()=>{F()}),[F]);const N=e=>{p((t=>[...t,e]))},O=()=>{if(!f)return null;const e=P?Ae.findIndex((e=>e===Number(w))):0;return(0,z.jsx)(g.Z,{children:(0,z.jsx)(o5.Z,{isLastPageAlwaysShown:!0,pageCount:null==b?void 0:b.totalPages,currentPage:null==b?void 0:b.currentPage,urlBuilder:(e,t)=>(0,ys.Iq)(f.path,{page:t?1:e,per_page:t||T}),activePerPageOptionIndex:e,perPageOptions:Ae})})};if(S===Ne.Pending)return(0,z.jsx)("div",{"data-testid":"loader",className:"u-flexbox u-justify-content-center u-align-items-center u-fill-viewport",children:(0,z.jsx)(Dp.Z,{size:Dp.Z.Size.XLarge})});if(S===Ne.Failure)return(0,z.jsx)(Ig,{onRetryClick:F});if(!f||!b)return null;const R=b.totalEntries>Ae[0],D=y()("u-ui-padding-horizontal-large@desktops",{row:a.phones});return(0,z.jsxs)("div",{className:D,children:[a.tabletsUp&&(0,z.jsx)(Ile,{forumPath:f.path,forumTitle:f.title,subforumPath:null==k?void 0:k.path,subforumTitle:null==k?void 0:k.title}),(0,z.jsxs)("div",{className:"u-ui-padding-horizontal-large@phones",children:[(0,z.jsx)(oce,{forumId:f.id,subforumId:null==k?void 0:k.id,title:f.title,description:f.description,forumRulesUrl:f.rulesUrl}),(0,z.jsx)(Gle,{topSpacerSize:x.Z.Size.Large,topDivider:!0}),f.subforums.length>0&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(cce,{subforums:f.subforums,currentSubforum:k,forumPath:f.path})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),R&&(0,z.jsxs)(z.Fragment,{children:[O(),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})]})]}),I.length?(0,z.jsx)("div",{className:a.phones?"u-overflow-hidden":void 0,children:(0,z.jsxs)(g.Z,{children:[(0,z.jsxs)("div",{className:"u-position-relative u-zindex-bump u-ui-padding-horizontal-large@phones u-ui-padding-horizontal-x-large@tablets-up",children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(oC.Z,{deprecatedIcon:(0,z.jsx)(ht.Z,{name:"arrow-up",size:ht.Z.Size.Small,color:ht.Z.Color.Primary}),content:r("forum.forum_inner_page.pinned_topics_title")})]}),(0,z.jsx)(L,{separator:(0,z.jsx)(h.Z,{}),children:I.map((e=>(0,z.jsx)(lce,{topic:e,onTopicDelete:N},e.id)))}),C.length>0&&a.phones&&(0,z.jsx)(h.Z,{})]})}):null,(()=>{if(!C.length)return null;const e=a.phones?(0,z.jsx)(h.Z,{}):(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge});return(0,z.jsxs)(z.Fragment,{children:[I.length>0&&(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(L,{separator:e,children:C.map((e=>(0,z.jsx)("div",{className:a.phones?"u-overflow-hidden":void 0,children:(0,z.jsx)(g.Z,{children:(0,z.jsx)(lce,{topic:e,onTopicDelete:N})})},e.id)))}),C.length>0&&a.phones&&(0,z.jsx)(h.Z,{})]})})(),f.isDeleteOld&&(0,z.jsx)(ah.Z,{text:r("forum.forum_inner_page.automatic_delete_note",{count:f.deleteAfterDays}),styling:ah.Z.Styling.Wide}),R&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:f.isDeleteOld?x.Z.Size.Large:x.Z.Size.XLarge}),(0,z.jsx)("div",{className:"u-ui-padding-horizontal-large@phones",children:O()})]})]})})),ForumSavedTopicsPage:wT((()=>{const e=E(),t=rce(),i=U(),n=(0,p.v9)(X);if(!n)return null;const s=y()("u-ui-padding-horizontal-large@desktops",{row:e.phones});return(0,z.jsxs)("div",{className:s,children:[(0,z.jsxs)("div",{className:"u-ui-padding-horizontal-large@phones",children:[(0,z.jsx)(Ile,{}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,theme:"amplified",text:i("forum.saved_topics_page.page_title")})]}),(0,z.jsx)(Gle,{topSpacerSize:x.Z.Size.Medium}),(0,z.jsx)(dce,{noTopicsTitle:i("forum.saved_topics_page.empty_state.title"),noTopicsSubtitle:i("forum.saved_topics_page.empty_state.body"),getTopics:e=>(0,Fe.OJB)({userId:n,page:t,perPage:e})})]})})),ForumOwnTopicsPage:wT((()=>{const e=E(),t=rce(),i=U(),n=(0,p.v9)(X);if(!n)return null;const s=y()("u-ui-padding-horizontal-large@desktops",{row:e.phones});return(0,z.jsxs)("div",{className:s,children:[(0,z.jsxs)("div",{className:"u-ui-padding-horizontal-large@phones",children:[(0,z.jsx)(Ile,{}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,theme:"amplified",text:i("forum.own_topics_page.title")})]}),(0,z.jsx)(Gle,{topSpacerSize:x.Z.Size.Large}),(0,z.jsx)(dce,{getTopics:e=>(0,Fe.l6u)({userId:n,page:t,perPage:e}),noTopicsTitle:i("forum.own_topics_page.empty_state.title"),noTopicsSubtitle:i("forum.own_topics_page.empty_state.body")})]})})),ForumNewestTopicsPage:wT((()=>{const e=E(),t=rce(),i=U(),n=y()("u-ui-padding-horizontal-large@desktops",{row:e.phones});return(0,z.jsxs)("div",{className:n,children:[(0,z.jsxs)("div",{className:"u-ui-padding-horizontal-large@phones",children:[(0,z.jsx)(Ile,{}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,theme:"amplified",text:i("forum.newest_topics_page.page_title")})]}),(0,z.jsx)(Gle,{topSpacerSize:x.Z.Size.Large}),(0,z.jsx)(dce,{getTopics:e=>(0,Fe.RPn)({page:t,perPage:e}),noTopicsTitle:i("forum.newest_topics_page.empty_state.title"),noTopicsSubtitle:i("forum.newest_topics_page.empty_state.body")})]})})),ForumSearchResultsPage:wT((()=>{const{relativeUrl:e,searchParams:t}=xc(),i=rce(),{per_page:n,search_text:s}=t,r=U(),a=E(),[o,l]=(0,m.useState)([]),[c,d]=(0,m.useState)(),[p,f]=(0,m.useState)(Ne.Pending),[v,_]=(0,m.useState)([]),b=De.includes(Number(n)),j=b?Number(n):De[0],S=(0,m.useCallback)((async()=>{if("string"!=typeof s)return;f(Ne.Pending);const e=await(0,Fe.HpW)({perPage:j,page:i,searchText:s});if("errors"in e)return void f(Ne.Failure);const t=e.forum_posts.map((e=>kle(e))),n=vm(e.pagination);l(t),d(n),f(Ne.Success)}),[i,j,s]);(0,m.useEffect)((()=>{S()}),[S]);const Z=y()("u-ui-padding-horizontal-large@desktops",{row:a.phones}),I=()=>{(0,ls.sl)()},C=e=>{_((t=>t.find((t=>t===e))?t.filter((t=>t!==e)):[...t,e]))};if(p===Ne.Pending)return(0,z.jsx)("div",{"data-testid":"loader",className:"u-flexbox u-justify-content-center u-align-items-center u-fill-viewport",children:(0,z.jsx)(Dp.Z,{size:Dp.Z.Size.XLarge})});if(p===Ne.Failure)return(0,z.jsx)(Ig,{onRetryClick:S});if(!c)return null;const k=c.totalEntries>De[0];return(0,z.jsxs)("div",{className:Z,children:[(0,z.jsxs)("div",{className:"u-ui-padding-horizontal-large@phones",children:[(0,z.jsx)(Ile,{}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,theme:"amplified",text:r("forum.search_results_page.page_title")})]}),0===o.length&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(tc.Z,{animation:(0,z.jsx)(u.Z,{animationUrl:"".concat(Be.Fv,"/assets/animations/search-empty-state.json")}),title:r("forum.search_results_page.empty_state.title"),body:r("forum.search_results_page.empty_state.body")})]}),o.length>0&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsxs)("div",{className:a.phones?"u-overflow-hidden":void 0,children:[(0,z.jsx)(L,{separatorAtBreakpoint:{tabletsUp:(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})},children:o.map((e=>(0,z.jsx)(g.Z,{children:(0,z.jsx)(Qle,{onDelete:I,onLike:C,isLiked:v.some((t=>t===e.id)),isReplyLiked:v.some((t=>{var i;return t===(null===(i=e.postReply)||void 0===i?void 0:i.id)})),post:e,showReplyButton:!1,showPhotosWhenSignedOut:!1,isSearchResultsVariant:!0})},e.id)))}),o.length>0&&a.phones&&(0,z.jsx)(h.Z,{})]}),k&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(()=>{const t=b?De.findIndex((e=>e===Number(j))):0;return(0,z.jsx)(g.Z,{children:(0,z.jsx)(o5.Z,{isLastPageAlwaysShown:!0,pageCount:null==c?void 0:c.totalPages,currentPage:null==c?void 0:c.currentPage,urlBuilder:(t,i)=>(0,ys.Iq)(e,{page:i?1:t,per_page:i||j,search_text:s}),activePerPageOptionIndex:t,perPageOptions:De})})})()]})]})]})})),ContactForm:wT(ble),SupportTickets:wT((()=>{const{faq_entry_id:e,transaction_id:t}=xc().searchParams,i=Number(t),n=Array.isArray(e)?void 0:e,s=Z2(),r=(0,p.v9)((a=n,e=>xp(e,a)));var a;const{fetch:o,data:l,isLoading:c}=ih(Fe.pF4),{fetch:d,data:u,isLoading:g}=ih(Fe.foU);(0,m.useEffect)((()=>{o(),i&&d({id:i})}),[n,o,d,i]);const h=(null==u?void 0:u.transaction)||null,x=!(null!=l&&l.faq_entries.some((e=>{let{id:t}=e;return t===Number(n)})));return g||c||!s?(0,z.jsx)(Mp,{styling:Mp.Styling.Wide,size:Mp.Size.Large,testId:"contact-form-loader"}):r&&l?(0,z.jsx)(ble,{faqEntry:r,isLoginTipDisplayed:x,preselectedTransaction:h,isEnglishAllowedVisible:!!r.englishAllowedVisible,photoEntryId:0}):null})),IntellectualPropertyInfringement:wT((e=>{let{location:t}=e;const i=(0,th.cI)({shouldUnregister:!1});L8(!!Object.values(i.formState.dirtyFields).length);const n=(0,p.v9)(Wt("react_ntd_form_rework")),s=(0,p.v9)(Wt("react_ntd_redirect_new_url"));return(0,z.jsx)(yc,{location:t,isServerSide:St.X,children:(0,z.jsx)(th.RV,{...i,children:(0,z.jsxs)("div",{className:"intellectual-property-infringement",children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsxs)(Nt.Z5,{children:[(0,z.jsx)(Nt.AW,{path:s?Me.kEW:Me.B5r,element:(0,z.jsx)(Dde,{})}),(0,z.jsx)(Nt.AW,{path:s?Me.M56:Me.fK8,element:n?(0,z.jsx)(Bde,{}):(0,z.jsx)(Mde,{})})]})]})})})})),Payments:wT((()=>(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(SJ,{}),(0,z.jsxs)("div",{className:"body-content__content",children:[(0,z.jsx)(mce,{}),(0,z.jsx)(wce,{}),(0,z.jsx)(kce,{})]})]}))),IncomeReports:wT((()=>{const e=(0,p.v9)(ne),[t,i]=(0,m.useState)(!1),[n,s]=(0,m.useState)(Ne.Pending);(0,m.useEffect)((()=>{(async()=>{s(Ne.Pending);const e=await(0,Fe.Qvz)();if("errors"in e)return void s(Ne.Failure);const{isMonthlyReportEnabled:t}=(e=>{let{is_monthly_report_enabled:t}=e;return{isMonthlyReportEnabled:t}})(e);s(Ne.Success),i(t)})()}),[]);const r=t?Poe:woe;if(!e)return null;const a=(new Date).getMonth()>0,o=function(e,t,i){const n=(new Date).getFullYear(),s=t.getFullYear(),r=e.getFullYear(),a=Math.max(r,s);return a?i?(0,v.range)(a,n+1):(0,v.range)(a,n):[]}(e,r,t&&a);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(doe,{}),(0,z.jsx)("div",{className:"body-content__content",children:n===Ne.Failure?(0,z.jsx)(sw,{}):n===Ne.Pending?(0,z.jsx)(Mp,{testId:"income_reports_loader"}):t?(0,z.jsx)(Noe,{years:o}):(0,z.jsx)(koe,{years:o})})]})})),InvoiceReports:wT((()=>{const e=U("wallet.invoices"),[t,i]=(0,m.useState)(Ne.Idle),[n,s]=(0,m.useState)([]),[r,a]=(0,m.useState)([]),o=function(e){const t=(0,O.Z)();return(0,m.useMemo)((()=>e.map((e=>new Date(e))).sort((function(e,t){return t.getTime()-e.getTime()})).map((function(e,i){return{date:e,id:"".concat(e.toString()).concat(i),title:t.formatDate(e,{month:"long",year:"numeric"})}}))),[t,e])}(n),[l,c]=(0,m.useState)();(0,m.useEffect)((()=>{c(o[0])}),[o]),(0,m.useEffect)((()=>{(async()=>{if(!l)return;i(Ne.Pending);const e=l.date.getMonth()+1,t=l.date.getFullYear(),n=await(0,Fe.s3k)({year:t.toString(),month:e.toString()});if("errors"in n)return void i(Ne.Failure);const s=n.invoices.map((e=>(e=>({invoiceSeries:e.invoice_series,invoiceNo:e.invoice_no,invoiceDate:e.invoice_date,id:e.id}))(e)));i(Ne.Success),a(s)})()}),[l]),(0,m.useEffect)((()=>{(async()=>{i(Ne.Pending);const e=await(0,Fe.WNS)();if("errors"in e)return void i(Ne.Failure);const{availableDates:t}=(e=>{let{available_dates:t}=e;return{availableDates:[...t]}})(e);i(Ne.Success),s(t)})()}),[]);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(doe,{}),t===Ne.Pending?(0,z.jsx)("div",{className:"body-content__content",children:(0,z.jsx)(Mp,{})}):t===Ne.Failure?(0,z.jsx)("div",{className:"body-content__content",children:(0,z.jsx)(sw,{})}):r.length?(0,z.jsx)("div",{className:"body-content__content",children:(0,z.jsxs)(g.Z,{children:[(0,z.jsx)(yt.Z,{text:e("title")}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(YJ,{name:"invoice-report-period",inputTitle:e("period_select"),data:o,selectedValue:l,onSave:e=>{e&&c(e)}}),(0,z.jsx)("div",{className:"u-ui-margin-vertical-large",children:(0,z.jsx)(L,{separator:(0,z.jsx)(h.Z,{}),children:r.map((e=>(0,z.jsx)(Loe,{invoice:{invoice_date:e.invoiceDate,invoice_no:e.invoiceNo,invoice_series:e.invoiceSeries,id:e.id}},e.id)))})})]})}):(0,z.jsx)(tc.Z,{animation:(0,z.jsx)(u.Z,{animationUrl:"".concat(Be.Fv,"/assets/animations/order-empty-state.json")}),title:e("empty.title"),body:e("empty.body")})]})})),ProductFeedbackForm:wT((()=>{const e=U("product_feedback_form"),{track:t}=vi(),i=(0,th.cI)(),{handleSubmit:n,register:s,getValues:r,formState:a}=i,{errors:o}=a,l=(0,p.v9)(X),[c,d]=(0,m.useState)(!1),[u,f]=(0,m.useState)(!1),y=(0,p.v9)(Wt("product_feedback_form"));return(0,m.useEffect)((()=>{a.isSubmitting&&d(!0),a.errors&&d(!1)}),[a]),(0,m.useEffect)((()=>{t(Wi({screen:$t.ProductFeedbackForm}))}),[t]),y?(0,z.jsx)("div",{className:"push2 grid8",children:(0,z.jsxs)("form",{onSubmit:n((async function(){const e=r(),t={values:{buyer:e.userCategory.map((e=>{let{id:t}=e;return t})).includes(1),seller:e.userCategory.map((e=>{let{id:t}=e;return t})).includes(0),message:e.message},userId:Number(l)};"errors"in await(0,Fe.iEU)(t)?d(!1):f(!0)})),children:[(0,z.jsxs)(th.RV,{...i,children:[(0,z.jsxs)(g.Z,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,title:(0,z.jsx)(xt.Z,{text:e("header"),theme:"amplified",type:xt.Z.Type.Heading})}),(0,z.jsx)(Tce,{}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(Gw,{rows:5,title:e("message.title"),placeholder:e("message.placeholder"),styling:"wide",...s(zce.Message,{required:{value:!0,message:e("message.errors.too_short")},minLength:{value:15,message:e("message.errors.too_short",{min:15})}}),validation:o?(0,z.jsx)(zm.Z,{text:null===(v=o.message)||void 0===v?void 0:v.message,theme:"warning"}):null,uncontrolled:!0}),(0,z.jsx)(x.Z,{})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,suffix:(0,z.jsx)(ic.I,{text:e("actions.submit"),styling:ic.I.Styling.Filled,size:ic.I.Size.Medium,type:ic.I.Type.Submit,isLoading:c})})]}),(0,z.jsx)(Pce,{isOpen:u,onClose:function(){(0,ls.ru)(Me.TVB)}})]})}):null;var v})),Inbox:wT((e=>(0,z.jsx)(Rz,{...e,renderWebsocketChannels:e=>{let{websocketHostUrl:t}=e;return(0,z.jsx)(Uz,{websocketHostUrl:t})}}))),NewPayout:wT((()=>{const e=U("new_payout"),t=(0,p.I0)(),i=E(),n=(0,p.v9)(X),s=(0,p.v9)(Nc),r=(0,p.v9)(Voe),a=(0,p.v9)(Hoe),o=(0,p.v9)(Goe),l=(0,p.v9)(qoe),c=(0,p.v9)(sle),d=(0,p.v9)(nle),[u,f]=(0,m.useState)(!1),[y,v]=(0,m.useState)(null),[_,b]=(0,m.useState)(!1);(0,m.useEffect)((()=>{n&&(t(UE.getPayoutConfigurationRequest({userId:n})),t(GE.fetchBankAccountsRequest()))}),[t,n]);return l!==Ne.Success||d!==Ne.Success?(0,z.jsx)("div",{className:"body-content__content",children:(0,z.jsx)(Mp,{styling:Mp.Styling.Wide,testId:"new-payout-loader"})}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(doe,{}),(0,z.jsxs)("div",{className:"body-content__content u-ui-padding-vertical-large",children:[(0,z.jsx)(xt.Z,{text:e("note")}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsxs)(g.Z,{children:[(0,z.jsxs)(gt.Z,{children:[r&&a?(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,title:e("title"),suffix:Ma(r,{locale:s,currency:a}),validation:y}):null,o?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{html:!0,text:o,type:xt.Z.Type.Subtitle,testId:"new-payout-note"})]}):null]}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{prefix:(0,z.jsx)(ht.Z,{name:"bank",color:ht.Z.Color.GreyscaleLevel3,aria:{"aria-hidden":!0}}),title:(null==c?void 0:c.name)||e("actions.add_account"),body:null==c?void 0:c.accountNumber,type:gt.Z.Type.Navigating,chevron:!0,url:Vce})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)("div",{className:"u-flexbox u-justify-content-flex-end",children:(0,z.jsx)(ic.I,{isLoading:u,disabled:!c,type:ic.I.Type.Submit,styling:ic.I.Styling.Filled,inline:i.tabletsUp,text:e("actions.payout"),onClick:async()=>{if(u||!n||!c)return;f(!0),v(null);const e=await(0,Fe.XpH)({userId:n,currency:a,bankAccountId:c.id,amount:Number(r)});var t;if("errors"in e)return e.code===pm.Q.KYCError?(b(!0),void f(!1)):(v(null===(t=e.errors[0])||void 0===t?void 0:t.value),void f(!1));(0,ls.ru)((0,Me.n5s)(e.payout.id,!0))}})}),(0,z.jsx)(B5,{show:_,onCancel:()=>b(!1),transactionId:null})]})]})})),ClosetPromoStatistics:wT((()=>{const e=U("closet_promotion.performance"),t=E(),{fetch:i,transformedData:n,isLoading:s}=ih(Fe.A3N,Vh);return(0,m.useEffect)((()=>{i()}),[i]),s?null:n?(0,z.jsxs)("div",{className:"closet-promo-stats",children:[(0,z.jsx)("div",{className:"closet-promo-stats__header",children:(0,z.jsx)(nde,{performance:n})}),(0,z.jsx)("div",{className:"closet-promo-stats__insights",children:(0,z.jsx)(tde,{performance:n})}),(0,z.jsxs)("div",{className:"closet-promo-stats__actions",children:[(0,z.jsx)(ide,{performance:n}),t.phones&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(sde,{lastUpdatedTime:n.updatedAt})]})]}),(0,z.jsx)("div",{className:"closet-promo-stats__feedback",children:(0,z.jsx)(rde,{lastUpdatedTime:n.updatedAt,showFeedback:n.askForFeedback})})]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:e("title")})}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(tc.Z,{title:e("empty.title"),body:e("empty.body"),animation:(0,z.jsx)(u.Z,{animationUrl:"".concat(Be.Fv,"/assets/animations/feedback-empty-state.json")})})]})})),AdminAlertsPage:wT((e=>{let{isNewUI:t=!1}=e;const i=U("admin_alerts"),n=(0,p.v9)(Wt("react_ntd_form_rework")),s=(0,p.v9)(Wt("react_ntd_redirect_new_url"));return t?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(g.Z,{children:(0,z.jsx)(Bce,{isNewUI:t})}),!!n&&(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,body:i("ntd_report_link_footer",{"ntd-form-link":e=>(0,z.jsx)("a",{href:s?Me.M56:Me.fK8,target:"_blank",rel:"noopener noreferrer",children:e})})})]}):(0,z.jsx)(Bce,{isNewUI:t})})),DirectDonation:wT((()=>(0,z.jsx)(Wde,{}))),ItemReservation:wT((()=>{const e=U("item_reservation"),{data:t,fetch:i,isLoading:n}=ih(Fe.rVG),{searchParams:s}=xc(),{id:r}=s;(0,m.useEffect)((()=>{r&&i({id:r.toString()})}),[i,r]);const a=(0,th.cI)(),{handleSubmit:o,getValues:l,setError:c,formState:{isSubmitting:d}}=a,[u,p]=(0,m.useState)(Ne.Idle);if(n||!t)return(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center u-ui-margin-top-medium",children:(0,z.jsx)(Dp.Z,{size:Dp.Z.Size.XLarge,testId:"item-loader"})});const{item:f}=t,y=io(f);return(0,z.jsx)("div",{className:"u-flexbox u-align-items-flex-start",children:(0,z.jsx)("form",{onSubmit:o((async function(){p(Ne.Pending);const e=l(),t=await(0,Fe.CCw)({id:f.id,buyerId:e.recipient});var i;"errors"in t?c(Xde.Recipient,{type:"manual",message:null===(i=t.errors[0])||void 0===i?void 0:i.value}):(p(Ne.Success),(0,ls.ru)((0,Me.DWf)(f.id)))})),children:(0,z.jsxs)(th.RV,{...a,children:[(0,z.jsx)(xt.Z,{text:e("header"),alignment:xt.Z.Alignment.Left,type:xt.Z.Type.Heading}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsxs)(g.Z,{children:[(0,z.jsx)(Yde,{itemId:f.id,title:e("title"),placeholder:e("placeholder")}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,children:(0,z.jsxs)("div",{className:"u-flexbox u-ui-padding-right-x-large",children:[(0,z.jsx)("div",{className:"u-half-width",children:(0,z.jsx)(xt.Z,{text:e("item"),type:xt.Z.Type.Title})}),(0,z.jsx)("div",{className:"u-half-width",children:function(e){let{id:t,title:i}=e;const n=Xa(y.photos,Xe.Small);return(0,z.jsx)(gt.Z,{title:(0,z.jsx)(xt.Z,{text:i,type:xt.Z.Type.Body}),styling:gt.Z.Styling.Tight,prefix:(0,z.jsx)(Kl.U,{src:n,size:Kl.U.Size.Medium})},t)}(f)})]})}),(0,z.jsx)(x.Z,{})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,suffix:(0,z.jsx)(ic.I,{text:e("reserve"),disabled:d||u===Ne.Success,isLoading:d,styling:ic.I.Styling.Filled,size:ic.I.Size.Medium,type:ic.I.Type.Submit,testId:"item-reservation--submit-button"}),children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:e("footnote")})})]})})})})),MarkAsSold:wT((()=>{const e=U("item.mark_as_sold"),{fetch:t,transformedData:i}=ih(Fe.rVG,Sx),{data:n,fetch:s}=ih(Fe.foU),{safeBack:r,urlQuery:a,searchParams:{id:o},relativeUrl:l}=xc(),c=(0,ys.oZ)(a).act_as,d=(0,p.v9)(Nc),u=(0,p.v9)(Y),[f,y]=(0,m.useState)(Ne.Idle),v=(0,th.cI)(),{handleSubmit:_,getValues:b,register:j,setError:S,setValue:Z,formState:{errors:I,isSubmitting:C}}=v,k=null==n?void 0:n.transaction,w=l.split("/")[2],P=o||(null==k?void 0:k.item_id);(0,m.useEffect)((()=>{const e=Number(w);e&&s({id:e})}),[s,w]),(0,m.useEffect)((()=>{P&&t({id:P.toString()})}),[t,P]);const T=fh(I,"item.mark_as_sold"),F=(null==k?void 0:k.buyer)&&ut(k.buyer),N=null==i?void 0:i.price;(0,m.useEffect)((()=>{N&&Z(Kde.Price,N.amount)}),[N,Z]);const L=t=>e("sold.".concat(t));return(0,z.jsx)("div",{className:"u-flexbox",children:(0,z.jsx)("form",{onSubmit:_((async function(){if(!i)return;y(Ne.Pending);const e=b(),t=await(0,Fe.Fto)({itemId:i.id,buyerId:e.recipient,closingAction:"sold",price:e.price.toString(),currency:"sold"===c?i.price.currencyCode:void 0});var n;if("errors"in t)return void S(Kde.Price,{type:"manual",message:null===(n=t.errors[0])||void 0===n?void 0:n.value});y(Ne.Success);const s=t.transaction.id;DI({event:cg.xy.MarkedAsSold,modelId:s,userExternalId:u},{defer:!0});const o=(0,ys.Iq)((0,Me.xYj)(e.recipient.toString()),{act_as:"sold",ref_url:a,transaction_id:s});t.transaction.available_actions.includes(gd.LeaveFeedback)?(0,ls.ru)(o):r(o)})),children:(0,z.jsxs)(th.RV,{...v,children:[(0,z.jsx)(xt.Z,{text:L("header"),alignment:xt.Z.Alignment.Left,type:xt.Z.Type.Heading}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsxs)(g.Z,{children:[i&&(0,z.jsx)(Yde,{itemId:i.id,preselectedUser:F,placeholder:e("recipient.placeholder"),title:e("recipient.title")}),(0,z.jsx)(h.Z,{}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,children:(0,z.jsxs)("div",{className:"u-flexbox u-ui-padding-right-x-large",children:[(0,z.jsx)("div",{className:"u-half-width",children:(0,z.jsx)(xt.Z,{text:e("order"),type:xt.Z.Type.Title})}),(0,z.jsx)("div",{className:"u-half-width",children:function(){const e=Xa(null==i?void 0:i.photos,Xe.Small);return(0,z.jsx)(gt.Z,{title:(0,z.jsx)(xt.Z,{text:null==i?void 0:i.title,type:xt.Z.Type.Body}),styling:gt.Z.Styling.Tight,prefix:(0,z.jsx)(Kl.U,{src:e,size:Kl.U.Size.Medium})},null==i?void 0:i.id)}()})]})}),(0,z.jsx)(x.Z,{})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)("div",{children:(0,z.jsx)(g.Z,{children:(0,z.jsx)(gh,{...j(Kde.Price,{required:{value:!0,message:e("price.error.required")}}),placeholder:N&&Ua(N,d),styling:"wide",title:e("price.title"),validation:hh(T(Kde.Price)),uncontrolled:!0})})}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,suffix:(0,z.jsx)(ic.I,{text:L("button"),disabled:C||f===Ne.Success,isLoading:C,styling:ic.I.Styling.Filled,size:ic.I.Size.Medium,type:ic.I.Type.Submit,testId:"mark-as-sold--submit-button"}),children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:L("footnote")})})]})})})})),PersonalizationSizesPage:wT((()=>{const{categories:e,isLoading:t,isError:i}=tue(),n=U();return(0,z.jsx)(nue,{children:i?(0,z.jsx)(eue,{}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(gt.Z,{theme:"transparent",children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,width:xt.Z.Width.Parent,children:n("personalization.sizes.headline.all.title")}),(0,z.jsx)(xt.Z,{children:n("personalization.sizes.headline.all.subtitle")})]}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),t?(0,z.jsx)(Mp,{testId:"personalization-categories-loader"}):(0,z.jsxs)(z.Fragment,{children:[e.map((function(e){let{title:t,icon:i,code:s,userSelectedSizes:r}=e;const a=r.map((e=>e.title)).join(", "),o=r.length>0,l=(0,Me.iTk)(s.toLocaleLowerCase());return(0,z.jsxs)(m.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Tight,clickable:!0,url:l,children:[(0,z.jsx)(gt.Z,{prefix:(0,z.jsx)(ht.Z,{name:i,color:ht.Z.Color.Primary}),title:t,suffix:(0,z.jsx)(BZ.F,{checked:o,name:s,onClick:function(){(0,ls.ru)(l)}})}),(0,z.jsx)(gt.Z,{suffix:(0,z.jsxs)("div",{className:"u-flexbox u-align-items-center","data-testid":"personalization-sizes--selected-".concat(s,"-sizes"),children:[Sc(a,30),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),(0,z.jsx)(ht.Z,{name:"chevron-right",size:ht.Z.Size.Small,color:ht.Z.Color.GreyscaleLevel4})]}),children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,theme:o?void 0:"muted",children:n("personalization.sizes.category_sizes")})})]})]},t)})),(0,z.jsx)(h.Z,{})]})]})})})),VerificationPrompt:wT((()=>{const e=(0,p.v9)(X),t=U("verification_prompt"),[i,n]=(0,m.useState)(),[s,r]=(0,m.useState)(null),a=XY(Me.mYc);(0,m.useEffect)((()=>{(async()=>{if(!e)return;const t=await(0,Fe.YAs)(e);if("errors"in t)return;const i={id:(s=t.prompt).id,mandatory:s.mandatory,methods:s.methods,category:s.category,actions:s.actions,imageUrls:s.image_urls,translations:{header:s.translations.header,body:s.translations.body}};var s;n(i)})()}),[e]);const o=async()=>{e&&(await(0,Fe.DS3)(e),(0,ls.ru)(a))},l=()=>{(0,ls.ru)(a)},c=e=>{r(e)};if(!i)return null;if(!i.methods.length)return d={type:S2.Success,message:t("already_verified")},(0,vc.D9)(j2,JSON.stringify(d)),(0,ls.ru)(a),null;var d;const u=e=>{switch(e){case j9.Phone:return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(ic.I,{text:t("phone_verification_button"),url:Me.j9U,styling:ic.I.Styling.Filled}),i.category===b9.GoodActor&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(_p,{type:bp.PhoneVerification,render:e=>(0,z.jsx)(ic.I,{url:e,text:t("learn_more"),styling:ic.I.Styling.Flat,urlProps:{target:"_blank"}})})]})]});case j9.Google:return(0,z.jsx)(Kae,{onSuccess:l,onError:c});default:return(0,z.jsx)(ic.I,{text:t("email_verification_button"),url:Me.HFI,styling:ic.I.Styling.Filled})}};return(0,z.jsx)("div",{className:"auth__container",children:i.methods.includes(j9.EmailCode)?(0,z.jsx)(Yae,{promptDetails:i,onSkip:o}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsxs)(g.Z,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(gt.Z,{title:(0,z.jsx)(xt.Z,{text:i.translations.header,type:xt.Z.Type.Heading,alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent}),body:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),s?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:s,theme:"warning"}),(0,z.jsx)(x.Z,{})]}):null,(0,z.jsx)(xt.Z,{text:null==i?void 0:i.translations.body}),(0,z.jsxs)(z.Fragment,{children:[i.methods.map((e=>(0,z.jsxs)(m.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),u(e)]},e))),!i.mandatory&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(ic.I,{text:t("dismiss_button"),onClick:o,styling:ic.I.Styling.Flat})]})]})]})})]})]})})})),PersonalizationSizesCategoryPage:wT((()=>{const{sizeGroups:e,categories:t,isLoading:i,isError:n,selectedSizeIds:s}=tue(),{relativeUrl:r}=xc(),{track:a}=vi(),o=U(),[l,c]=(0,m.useState)(s),[d,u]=(0,m.useState)(!1),[p,g]=(0,m.useState)(!1),f=r.split("/").pop(),y=t.find((e=>{let{code:t}=e;return t.toLocaleLowerCase()===(null==f?void 0:f.toLocaleLowerCase())}));function v(e){let{id:t,title:i}=e;const n=l.some((e=>e===t)),s="personalization-size-".concat(i);return(0,z.jsxs)("div",{className:"u-float-left u-half-width u-flat@portables","data-testid":"personalization-sizes-category--size-".concat(t),children:[(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsx)(gt.Z,{onClick:function(){!function(e){l.includes(e)?c((t=>t.filter((t=>t!==e)))):c((t=>[...t,e]))}(t)},title:(0,z.jsx)(xt.Z,{text:i,bold:!0,theme:"amplified",id:s}),suffix:(0,z.jsx)("div",{className:"u-no-pointer-events",children:(0,z.jsx)(BZ.F,{checked:n,name:i,aria:{"aria-labelledby":s},tabIndex:-1})}),clickable:!0}),(0,z.jsx)(h.Z,{orientation:h.Z.Orientation.Vertical})]}),(0,z.jsx)(h.Z,{})]},t)}return(0,m.useEffect)((()=>{i||n||c(s)}),[i,n,s]),(0,z.jsx)(nue,{children:n||p?(0,z.jsx)(eue,{isResponseError:p}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(gt.Z,{theme:"transparent",children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,width:xt.Z.Width.Parent,children:null==y?void 0:y.title}),(0,z.jsx)(xt.Z,{children:o("personalization.sizes.headline.category.subtitle")})]}),i?(0,z.jsx)(Mp,{testId:"personalization-categories-loader"}):e.map((function(e){let{id:t,description:i,sizes:n}=e;return null!=y&&y.sizeGroupIds.includes(t)?(0,z.jsxs)("div",{className:"u-clearfix",children:[(0,z.jsx)(yt.Z,{text:i}),n.map(v)]},t):null})),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)("div",{className:"u-text-right",children:(0,z.jsx)(ic.I,{onClick:async function(){if(u(!0),"errors"in await(0,Fe.wj7)(l))return g(!0),void(0,ls.H5)($de);a((e=>{const{sizeIds:t}=e;let i="user.disable_size_filter";const n={};return t.length>0&&(i="user.enable_size_filter",n.size_ids=t),{event:i,extra:n}})({sizeIds:l})),(0,ls.ru)(Me.pLL)},styling:ic.I.Styling.Filled,inline:!0,disabled:i||d,isLoading:d,testId:"personalization-sizes-category--save-button",children:o("personalization.sizes.actions.save")})})]})})})),PersonalizationBrandsFollowedPage:wT((()=>{const e=U(),{brandsFollowed:t,isLoading:i,error:n}=rue();return(0,z.jsx)(nue,{children:n?(0,z.jsx)(eue,{}):(0,z.jsxs)(z.Fragment,{children:[i||null!=t&&t.length?(0,z.jsx)(gt.Z,{theme:"transparent",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,children:e("personalization.brands.headline.followed.title")})}):null,i?(0,z.jsx)(Mp,{testId:"personalization-brands-loader"}):null!=t&&t.length?(0,z.jsx)(gt.Z,{children:(0,z.jsx)("div",{className:"row",children:null==t?void 0:t.map((e=>(0,z.jsx)(sue,{brand:e},e.id)))})}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(tc.Z,{title:e("personalization.brands.headline.followed.empty_state.title")})]})]})})})),PersonalizationBrandsPage:wT((()=>{const e=U(),{brandsFollowed:t,isLoading:i,error:n}=rue(),{brandsWithLetter:s,isLoading:r,error:a}=lue(),o=!(null==t||!t.length);return(0,z.jsx)(nue,{children:n||a?(0,z.jsx)(eue,{}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(gt.Z,{theme:"transparent",children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,width:xt.Z.Width.Parent,text:e("personalization.brands.headline.all.title")}),(0,z.jsx)(xt.Z,{text:e("personalization.brands.headline.all.subtitle")})]}),i||r?(0,z.jsx)(Mp,{testId:"personalization-brands-loader"}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{testId:"personalization-brands-followed",title:e("personalization.brands.actions.followed"),suffix:(null==t?void 0:t.length)||"0",url:o?Me.m14:void 0,type:o?gt.Z.Type.Navigating:void 0,chevron:o}),(0,z.jsx)(h.Z,{})]}),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{text:e("personalization.brands.discover")}),s.map((e=>{let{letter:t,brands:i}=e;return(0,z.jsx)(cue,{letter:t,brands:i},t)}))]})]})]})})})),HelpCenterHome:wT((()=>{const e=Z2(),t=U("help_center"),{track:i}=vi(),n=Ql(),s=(0,p.v9)(_e),{access_channel:r,thread_id:a}=xc().searchParams,o=(0,p.v9)(Wt("product_feedback_form")),l=(0,p.v9)(ze);(0,m.useEffect)((()=>{var e;i({event:"user.view_faq_entry",extra:{faq_entry_id:(e={faqEntryId:3,faqEntryChannel:HI.HelpCenter,faqAccessChannel:"string"==typeof r?r:null,screen:$t.HelpRoot}).faqEntryId,faq_entry_channel:e.faqEntryChannel,faq_access_channel:e.faqAccessChannel,screen:e.screen}})}),[r,i]);const{fetch:c,transformedData:d,isLoading:u}=ih(Fe.tUX,mue),{fetch:h,data:f,transformedData:y,isLoading:v}=ih(Fe.gAB,gue),{fetch:_,transformedData:b,isLoading:j}=ih(Fe.mAo,ex);(0,m.useEffect)((()=>{Promise.all([c(3),h(),_(bp.MembersFeedback)])}),[h,c,_]);const S=(e,t)=>e?(0,z.jsx)(Kl.U,{src:"".concat(Be.Fv,"/assets/icons/faq/").concat(e).concat(n?"_dark":"",".svg"),size:Kl.U.Size.Large,alt:t}):null;return u||v||!e?(0,z.jsx)(Mp,{styling:Mp.Styling.Wide,size:Mp.Size.Large,testId:"help-center-home-loader"}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("aside",{className:"body-content__sidebar faq__navigation faq__navigation--secondary",children:(()=>{if(!f)return null;const e=xue(f);return(0,z.jsx)(due,{navigationFaqEntries:e,isLoading:v})})()}),(0,z.jsxs)("div",{className:"faq",children:[l?null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(k9,{}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium})]}),null!=d&&d.transactions.length?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,width:xt.Z.Width.Parent,children:t("transactions.title")}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,children:t("transactions.subtitle")})]}),(0,z.jsx)(yue,{transactions:d.transactions,hasMoreTransactions:d.totalCount>3})]}):null,(0,z.jsx)(gt.Z,{children:(0,z.jsx)(xt.Z,{as:"h2",type:xt.Z.Type.Heading,text:t("faq.general_topics")})}),y?(0,z.jsx)(g.Z,{children:(0,z.jsx)("div",{className:"faq__categories",role:"list",children:y.map((e=>{let{id:t,title:i,icon:n}=e;return i?(0,z.jsxs)("a",{href:UQ({id:t,title:i},r,a),className:"faq__category",title:i,"data-testid":"help-center-home--faq-category-".concat(t),children:[S(n,i),(0,z.jsx)("div",{className:"faq__category-title",children:i})]},t):null}))})}):null,(()=>{if(!o||!s)return null;if(j||!b)return(0,z.jsx)(Mp,{});const e=UQ({id:b.id,title:b.title},r,a);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Medium}),(0,z.jsx)(gt.Z,{testId:"faq-feedback-entry",url:e,type:gt.Z.Type.Navigating,title:t("faq.give_us_feedback"),chevron:!0})]})})()]})]})})),HelpCenterFaqEntry:wT((e=>{let{faqEntryDto:t,faqQuestions:i,faqRecommendedQuestions:n,faqRelatedQuestions:s,channel:r,transaction:a,faqEntryBody:o,infoBoxBody:l,answerNotFoundId:c,transformedFaqEntry:d}=e;const u=t?(e=>({id:e.id,title:e.title,code:e.code,proceedButton:e.proceed_button,isQuestion:e.question,isContactAllowed:e.contact_allowed,isTransactionRequired:e.transaction_required}))(t):d||null,f=t?t.transaction_required:null==d?void 0:d.transactionIdRequired,v=(0,p.v9)(Te),_=U("help_center"),{fetch:b,isLoading:j,transformedData:S}=ih(Fe.gAB,xue),{fetch:Z,transformedData:I,isLoading:C}=ih(Fe.tUX,mue),{show_form:k,transaction_id:w,thread_id:P}=xc().searchParams;(0,m.useEffect)((()=>{b()}),[b]),(0,m.useEffect)((()=>{f&&Z()}),[Z,f]);const T=(null==u?void 0:u.code)===bp.MembersFeedback,F=()=>{if(null!=a&&a.id)return a.id;const e=Number(w);return e>0?e:void 0},N=y()("faq",{push2:v,"u-padding-none":v});return(0,z.jsxs)(z.Fragment,{children:[v?null:(0,z.jsx)("aside",{className:"body-content__sidebar faq__navigation faq__navigation--secondary",children:(0,z.jsx)(due,{navigationFaqEntries:S,isLoading:j})}),(0,z.jsxs)("div",{id:t?"faq-container":"",className:N,"data-testid":"faq-container",children:[v||!a?null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(k9,{}),(0,z.jsx)(x.Z,{size:x.Z.Size.Medium})]}),v||a||!i?null:(0,z.jsxs)(z.Fragment,{children:[null!=u&&u.title?(0,z.jsx)(gt.Z,{title:(0,z.jsx)(xt.Z,{text:u.title,type:xt.Z.Type.Heading})}):null,n?(0,z.jsx)(vue,{faqEntries:n}):null,(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Tight,children:[(0,z.jsx)(yt.Z,{type:yt.Z.Type.Stacked,text:_("faq.pick_a_topic")}),(0,z.jsx)(x.Z,{})]})]}),null!=u&&u.isQuestion||i?(0,z.jsxs)(z.Fragment,{children:[a?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(fue,{transaction:a}),(0,z.jsx)(h.Z,{})]}):null,C?(0,z.jsx)("div",{"data-testid":"transactions-loader",className:"u-flexbox u-justify-content-center u-align-items-center",children:(0,z.jsx)(Dp.Z,{size:Dp.Z.Size.XLarge})}):null!=u&&u.isQuestion?(0,z.jsxs)(z.Fragment,{children:[l?(0,z.jsx)(_ue,{body:l}):null,(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Wide,children:[(0,z.jsx)(VQ,{title:u.title,content:o,faqEntryId:u.id}),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),k?null:T?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x$,{feedbacks_path:Me.yTj}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})]}):T||v||!u?null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(h$,{faqId:u.id}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})]}),s?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(bue,{questions:s}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})]}):null,(()=>{const e=f&&(!I||0===I.totalCount);return k||T||!u||e||!u.isContactAllowed?null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(jue,{faqEntryId:u.id,transactionId:F(),proceedButton:u.proceedButton})]})})()]})]})]}):i?(0,z.jsx)(Sue,{questions:i}):null]}):r===HI.Search&&c?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(yt.Z,{text:_("faq.questions")}),(0,z.jsx)(g.Z,{children:(0,z.jsx)(gt.Z,{children:(0,z.jsx)("div",{className:"empty-state",children:(0,z.jsx)("div",{className:"empty-state__content",children:(0,z.jsx)(xt.Z,{text:_("faq.havent_found_a_question",{contact_link:(0,z.jsx)("a",{href:(0,ys.Iq)(Me.Kss,{ch:HI.Search,faq_entry_id:c,allow_direct:1,thread_id:P}),children:_("contact_link.title")})}),theme:"muted",alignment:xt.Z.Alignment.Center})})})})})]}):null]})]})})),HelpCenterRecentTransactions:wT((()=>{const e=Z2(),{fetch:t,transformedData:i,isLoading:n}=ih(Fe.tUX,mue),{fetch:s,isLoading:r,transformedData:a}=ih(Fe.gAB,xue);(0,m.useEffect)((()=>{s()}),[s]),(0,m.useEffect)((()=>{t()}),[t]);const o=U("help_center.transactions");return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("aside",{className:"body-content__sidebar faq__navigation faq__navigation--secondary",children:(0,z.jsx)(due,{navigationFaqEntries:a,isLoading:r})}),(0,z.jsxs)("div",{className:"faq",children:[(0,z.jsx)(gt.Z,{body:(0,z.jsx)(xt.Z,{text:o("all_recent_orders"),type:xt.Z.Type.Heading})}),n||!e?(0,z.jsx)(Mp,{styling:Mp.Styling.Wide,size:Mp.Size.Large,testId:"help-center-recent-transactions-loader"}):null!=i&&i.transactions.length?(0,z.jsx)(yue,{transactions:i.transactions,hasMoreTransactions:!1}):(0,z.jsx)(gt.Z,{body:(0,z.jsx)(tc.Z,{animation:(0,z.jsx)(u.Z,{animationUrl:"".concat(Be.Fv,"/assets/animations/order-empty-state.json")}),title:o("no_recent_orders_title"),body:o("no_recent_orders_text")})})]})]})})),BrandsPage:wT((()=>{const e=U(),{brandsWithLetter:t,isLoading:i,error:n}=lue();return n?(0,z.jsx)(sw,{}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,children:e("brands.title")}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),i?(0,z.jsx)(Mp,{testId:"brands-loader"}):t.map((e=>{let{letter:t,brands:i}=e;return(0,z.jsx)(cue,{letter:t,brands:i},t)}))]})})),BrandsByLetterPage:wT((()=>{const e=U(),{relativeUrl:t}=xc(),i=(0,ys.fb)(t),{brands:n,isLoading:s,error:r}=lue({letter:i}),a=()=>(0,z.jsx)(gt.Z,{theme:"transparent",children:(0,z.jsx)("a",{href:Me.JFJ,children:e("brands.actions.back")})});return r||!n.length&&!s?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(sw,{}),(0,z.jsx)("div",{className:"u-text-center",children:a()})]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(xt.Z,{type:xt.Z.Type.Heading,children:[e("brands.title")," - ",i]}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),s?(0,z.jsx)(Mp,{testId:"brands-by-letter--loader"}):(0,z.jsx)(cue,{letter:i,brands:n,hasMoreButton:!1}),a()]})})),ConversationEducation:wT((()=>{const e=(0,p.I0)(),{urlQuery:t}=xc(),i=(e=>{const{thread_id:t}=(0,ys.oZ)(e),i=Number(t);return Number.isNaN(i)?null:i})(t),n=(e=>{const{type:t}=(0,ys.oZ)(e);return(0,v.isString)(t)?t:null})(t);return(0,m.useEffect)((()=>{i&&e(eg({conversationId:i}))}),[e,i]),n&&i&&Iue.includes(n)?(0,z.jsx)(Ng,{showInWebview:!0,type:n}):null})),EmailVerificationCode:wT((()=>(0,z.jsx)($ae,{children:(0,z.jsx)(noe,{})}))),ResetPasswordPage:wT((()=>(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)("div",{className:"auth__container",children:(0,z.jsxs)(g.Z,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)($K,{})]})})]}))),LoginTwoFactorVerification:wT((()=>{const{control_code:e,redirect_url:t,ref_url:i,next_resend_available_in:n,user_masked_info:s,show_resend_option:r}=xc().searchParams;return(0,z.jsx)("div",{className:"narrow-container u-background-white",children:(0,z.jsx)(_2,{controlCode:soe(e),redirectUrl:soe(t),refUrl:soe(i),verificationType:v2.Login,maskedInfo:soe(s),nextResendAvailableIn:Number(soe(n)),showResend:Boolean(r),twoFAId:0})})})),BankTwoFactorVerification:wT((()=>{const{redirect_url:e,ref_url:t}=xc().searchParams,i=(0,p.v9)(X),{fetch:n,transformedData:s,isLoading:r}=ih((async e=>{let{id:t}=e;return(0,Fe.m3m)({userId:t,fingerprint:await $M()})}),jS),a=!1===(null==s?void 0:s.askUser2fa);return(0,m.useEffect)((()=>{i&&n({id:i})}),[n,i]),(0,m.useEffect)((()=>{a&&(0,ls.ru)((0,ys.Iq)(t||"/",{ref_url:e}))}),[a,e,t,s]),r||!s||a?(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center",children:(0,z.jsx)(Dp.Z,{size:Dp.Z.Size.XLarge,testId:"bank-login-two-factor-verification-loader"})}):(0,z.jsx)("div",{className:"narrow-container",children:(0,z.jsx)(_2,{redirectUrl:e,refUrl:t,verificationType:v2.BankAccount,maskedInfo:s.userMaskedPhoneNumber,nextResendAvailableIn:s.nextResendAvailableIn,showResend:s.showResendOption,twoFAId:s.id})})})),RecommendedItems:wT((()=>(0,z.jsx)(cc,{FallbackComponent:cc.ComponentError,preventLog:!0,onError:kue,children:(0,z.jsx)(wue,{})}))),TaxpayerForm:wT((()=>{const e=U("taxpayer_form"),t=(0,p.v9)(Wt("web_taxpayers_dac7_flow")),{track:i}=vi(),[n,s]=(0,m.useState)(null),[r,a]=(0,m.useState)(!1),[o,l]=(0,m.useState)(Ne.Idle),[c,d]=(0,m.useState)(null),[u,g]=(0,m.useState)(),[h,f]=(0,m.useState)(),[y,_]=(0,m.useState)(),[b,j]=(0,m.useState)(null),[S,Z]=(0,m.useState)(),[I,C]=(0,m.useState)(),[k,w]=(0,m.useState)(!1),[P,T]=(0,m.useState)(null),[F,N]=(0,m.useState)(null),{country_code:L,country_title:E,show_education:O}=xc().searchParams,R=async e=>{var t,i;l(Ne.Pending);const n=await(0,Fe.ozY)(e);if("errors"in n)return void l(Ne.Failure);const r={firstName:(a=n.fields).first_name?hce(a.first_name):null,lastName:a.last_name?hce(a.last_name):null,birthday:a.birthdate?hce(a.birthdate):null,billingAddress:a.billing_address_id?(o=a.billing_address_id,{fieldTitle:o.title,value:o.address?(0,V.X)(o.address):null}):null,countryOfTaxResidency:a.country_of_tax_residency?xce(a.country_of_tax_residency):null,tin:a.tin?fce(a.tin):null,birthplaceCountry:a.birthplace_country?yce(a.birthplace_country):null,birthplaceCity:a.birthplace_city?hce(a.birthplace_city):null,businessName:a.business_name?vce(a.business_name):null,businessCode:a.business_code?vce(a.business_code):null,secondaryBusinessCode:a.secondary_business_code?vce(a.secondary_business_code):null,vatNumber:a.vat_number?vce(a.vat_number):null,businessAddress:a.business_address_id?_ce(a.business_address_id):null,businessEstablishmentCountries:a.business_establishment_countries?bce(a.business_establishment_countries):null};var a,o;Z(!n.eu_country),l(Ne.Success),s(r),j(null===(t=r.billingAddress)||void 0===t?void 0:t.value),N(null===(i=r.businessAddress)||void 0===i?void 0:i.address)};(0,m.useEffect)((()=>{u&&R(u)}),[l,u]),(0,m.useEffect)((()=>{(async()=>{l(Ne.Pending);const e=await(0,Fe.bU_)();if("errors"in e)return void l(Ne.Failure);const t=gce(e.education);l(Ne.Success),d(t)})()}),[]),(0,m.useEffect)((()=>{y&&((0,vc.St)(Bue)||S||((0,vc.D9)(Bue,"true"),a(!0),i(Wi({screen:$t.TaxpayersEducationModal}))))}),[S,y,i]),(0,m.useEffect)((()=>{S&&a(!1)}),[S]),(0,m.useEffect)((()=>{(async()=>{l(Ne.Pending);const e=await(0,Fe.VIQ)();if("errors"in e)return void l(Ne.Failure);const{applicable:t,taxpayer:i,businessType:n,selectedCountryCode:s,country:r}=jce(e);l(Ne.Success),w(t),T(n),g(r.code),f(r.title),(e=>{let{isFormFilled:t,filledCountry:i,businessType:n,selectedCountryCode:s}=e;Sce(n)&&s?(O&&(0,v.isString)(O)&&!t&&_("true"===O),g(s)):t&&i?(f(i.title),g(i.code)):(L&&(0,v.isString)(L)&&g(L),E&&(0,v.isString)(E)&&f(E),O&&(0,v.isString)(O)&&_("true"===O))})({isFormFilled:null!==i,filledCountry:null==i?void 0:i.country,businessType:n,selectedCountryCode:s})})()}),[l,t,L,E,O]);const D=e=>{C({...e}),R(e.code),(0,ls.k3)()};return t&&k?(0,z.jsxs)("div",{className:"medium-container",children:[(0,z.jsx)(Pue,{taxpayerEducation:c,show:r,uiState:o,onClose:()=>a(!1)}),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:e("heading")}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large})]}),S?null:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(zue,{onClick:()=>{a(!0),i(Wi({screen:$t.TaxpayersEducationModal}))}}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})]}),n?Zce(P)?(0,z.jsx)(sme,{formConfiguration:n,countryCode:(null==I?void 0:I.code)||u,currentBusinessAddress:F}):S?(0,z.jsx)(Wue,{formConfiguration:n,countryCode:(null==I?void 0:I.code)||u,countryTitle:(null==I?void 0:I.title)||h,refreshFormConfiguration:D}):(0,z.jsx)(Hue,{uiState:o,formConfiguration:n,countryCode:(null==I?void 0:I.code)||u,countryTitle:(null==I?void 0:I.title)||h,currentAddress:b,setCurrentAddress:j,refreshFormConfiguration:D}):null]}):null})),ChangePassword:wT((e=>{let{instructions:t}=e;const{setError:i,handleSubmit:n,getValues:s,reset:r,control:a,formState:{isSubmitting:o,errors:l}}=(0,th.cI)({mode:"onSubmit"}),c=fh(l,"change_password.fields"),d=U("change_password"),u=(0,p.v9)(X),g=(0,p.v9)(W),h=E(),f=y()({"u-flexbox":h.desktops}),[_,b]=(0,m.useState)(!1),j=!(null!=g&&g.is_login_via_external_system_only);(0,m.useEffect)((()=>{_&&r()}),[_,r]);const S=async e=>{if(!u)return;const t=await(0,Fe.Cpd)({userId:u,currentPassword:e.oldPassword,newPassword:e.password,fingerprint:await $M()});"errors"in t?t.errors.forEach((e=>{let{field:t,value:n}=e;const s=(0,v.camelCase)(t);(0,_i.IF)(s,rme)&&i(s,{type:"manual",message:n})})):b(!0)};Um((()=>{S(s())}));return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:d("title"),type:xt.Z.Type.Heading}),_?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(gt.Z,{theme:"success",title:d("success_message.body")})]}):null,(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)("div",{className:"u-clearfix",children:(0,z.jsxs)("div",{className:f,children:[(0,z.jsxs)(gt.Z,{children:[(0,z.jsx)(xt.Z,{text:d("description"),type:xt.Z.Type.Title}),(0,z.jsx)(xt.Z,{text:t,html:!0})]}),(0,z.jsx)(gt.Z,{children:(0,z.jsxs)("form",{onSubmit:n(S),children:[j&&(0,z.jsx)(th.Qr,{control:a,name:rme.CurrentPassword,rules:{required:!0},render:e=>{let{field:t}=e;return(0,z.jsx)(fb.M,{...t,placeholder:d("fields.old_password.title"),type:fb.M.Type.Password,validation:hh(c(rme.CurrentPassword))})}}),(0,z.jsx)(th.Qr,{control:a,name:rme.NewPassword,rules:{required:!0},render:e=>{let{field:t}=e;return(0,z.jsx)(fb.M,{...t,placeholder:d("fields.password.title"),type:fb.M.Type.Password,validation:hh(c(rme.NewPassword))})}}),(()=>{const e=c(rme.RepeatPassword,{validate:d("fields.repeat_password.errors.validate",{field:d("fields.password.title")})});return(0,z.jsx)(th.Qr,{control:a,name:rme.RepeatPassword,rules:{required:!0,validate:e=>e===s().password},render:t=>{let{field:i}=t;return(0,z.jsx)(fb.M,{...i,placeholder:d("fields.repeat_password.title"),type:fb.M.Type.Password,validation:hh(e)})}})})(),(0,z.jsx)(ic.I,{text:d("actions.submit"),type:ic.I.Type.Submit,styling:ic.I.Styling.Filled,disabled:o||_,isLoading:o,testId:"change-password-button"})]})})]})})]})})),VasGallerySelection:wT((()=>{const e=(0,p.I0)(),{item_ids:t}=xc().searchParams,{track:i}=vi(),n=(0,p.v9)(Nc),s=U("vas_gallery.multiselect"),[r,a]=(0,m.useState)(!1),o=(0,m.useRef)([]),l=(0,p.v9)(X),c=(0,p.v9)(Sl),d=(0,p.v9)(wo),g=(0,p.v9)(zo),h=(0,p.v9)(kX),f=(0,p.v9)(IX),y=(0,p.v9)(wX),v=(0,m.useMemo)((()=>(t?[...t]:[]).map(Number)),[t]);(0,m.useEffect)((()=>{e(vO.setSelectedItems({itemIds:v}))}),[e,v]),(0,m.useEffect)((()=>{e(vO.fetchVasGalleryPricingRequest())}),[e,f]);const _=()=>{i(Ri({target:qm.PushUpBundle,targetDetails:f.toString()})),e(vO.startCheckout({}))},b=()=>{a((e=>!e))};return l?(0,z.jsxs)(cc,{FallbackComponent:cc.ComponentError,preventLog:!0,onError:bX,children:[(0,z.jsx)(D$,{show:r,onConfirm:b}),(0,z.jsxs)("div",{className:"u-flexbox u-flex-direction-column u-fill-viewport",children:[(0,z.jsx)("div",{className:"action-header",children:(0,z.jsx)("div",{className:"container",children:(0,z.jsx)(Pm.Z,{left:(0,z.jsx)(ic.I,{deprecatedIconName:"x",styling:ic.I.Styling.Flat,inline:!0,onClick:()=>{l&&(0,ls.ru)((0,Me.G0B)(l))}}),right:(0,z.jsx)(ic.I,{deprecatedIconName:"question-circle",styling:ic.I.Styling.Flat,testId:"vas-gallery-help-button",inline:!0,onClick:b})})})}),(0,z.jsx)("div",{className:"u-flex-grow",children:(0,z.jsx)("div",{className:"container",children:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,children:(0,z.jsx)(xt.Z,{text:s("title"),type:xt.Z.Type.Heading})}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(W2,{items:c,selectedItems:h,loadItems:()=>{!g&&l&&e(CN.getUserItemsRequest({userId:l}))},isLoading:d===Ne.Pending,endReached:!!g||!c.length,viewingSelf:!0,updateSelectedItems:t=>{const i=t.map((e=>{let{id:t}=e;return t}));e(vO.setSelectedItems({itemIds:i}))},showFavourite:!0,itemWidthResolver:()=>"one-fifth",onItemVisible:e=>{const{item:t,index:n}=e;o.current.includes(t.data.id)||(i(Bi({id:t.data.id,position:n,contentType:z0.Item,contentSource:Es.UserItems,itemOwnerId:t.data.user.id})),o.current.push(t.data.id))},onItemClick:(e,t,n)=>{i(qi({position:t,id:e.id,contentType:z0.Item,contentSource:Es.UserItems})),i(Ri({target:n?qm.AddItemToBundle:qm.RemoveItemFromBundle,targetDetails:e.id.toString()}))},emptyState:(0,z.jsx)(tc.Z,{animation:(0,z.jsx)(u.Z,{animationUrl:"/assets/animations/closet-empty-state.json"})})}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})]})})}),(0,z.jsx)("div",{className:"action-footer",children:(0,z.jsx)("div",{className:"container",children:(()=>{const e=y.uiState===Ne.Pending,t=y.pricing&&Ua(y.pricing.total,n);return(0,z.jsx)(Pm.Z,{left:(0,z.jsx)(K2,{items:h}),right:(0,z.jsx)(ic.I,{inline:!0,text:s(t?"actions.checkout":"actions.empty_checkout",{price:t}),disabled:!h.length||e,size:ic.I.Size.Medium,styling:ic.I.Styling.Filled,onClick:_,testId:"vas-gallery-checkout-button"})})})()})})]}),(0,z.jsx)(A$,{onCheckoutSuccess:()=>{l&&(0,ls.ru)((0,Me.G0B)(l))}})]}):null})),ChangeForgotPassword:wT((()=>{const{setError:e,register:t,handleSubmit:i,formState:{isSubmitting:n,errors:s}}=(0,th.cI)({mode:"onSubmit"}),[r,a]=(0,m.useState)(!1),[o,l]=(0,m.useState)(!1),[c,d]=(0,m.useState)(null),u=fh(s,"change_forgot_password.fields"),{searchParams:p}=xc(),g=U("change_forgot_password"),h=(0,ys.pN)(p.code);(0,m.useEffect)((()=>{(async()=>{if(!h)return;const e=await(0,Fe.W84)({code:h});"errors"in e||d(e.confirmation_code)})().then((()=>{a(!0)}))}),[h]);return r?c?(0,z.jsxs)("div",{className:"box box--form",children:[(0,z.jsx)(xt.Z,{alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent,type:xt.Z.Type.Heading,text:g("title")}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),o?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(gt.Z,{theme:"success",title:g("success_message")})]}):(0,z.jsxs)("form",{onSubmit:i((async t=>{if(!c)return;const i=await(0,Fe.jMA)({code:c,password:t.password,passwordConfirmation:t.passwordConfirmation,fingerprint:await $M()});var n;"errors"in i?(n=i.errors).length?n.forEach((t=>{let{field:i,value:n}=t;const s=(0,v.camelCase)(i);(0,_i.IF)(s,ame)&&e(s,{type:"manual",message:n})})):(0,ls.sl)():l(!0)})),children:[(0,z.jsx)(fb.M,{...t(ame.Password,{required:!0}),placeholder:g("fields.password.title"),type:fb.M.Type.Password,validation:hh(u(ame.Password))}),(0,z.jsx)(fb.M,{...t(ame.PasswordConfirmation,{required:!0}),placeholder:g("fields.password_confirmation.title"),type:fb.M.Type.Password,validation:hh(u(ame.PasswordConfirmation))}),(0,z.jsx)(ic.I,{text:g("actions.submit"),type:ic.I.Type.Submit,styling:ic.I.Styling.Filled,isLoading:n,disabled:n,testId:"change-forgot-password-button"})]})]}):(0,z.jsxs)("div",{className:"box box--form",children:[(0,z.jsx)(xt.Z,{alignment:xt.Z.Alignment.Center,width:xt.Z.Width.Parent,type:xt.Z.Type.Heading,text:g("errors.cant_change_password")}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:g("errors.reset_link_expired")})]}):null})),TermsAndConditions:wT((()=>{const e=E(),t=(0,p.v9)(ze),i=U("terms_and_conditions"),[n,s]=(0,m.useState)(!1),[r,a]=(0,m.useState)(),{fetch:o,transformedData:l}=ih(Fe.s0H,cx),{fetch:c,transformedData:d}=ih(Fe.U27,mx);(0,m.useEffect)((()=>{(async()=>{await Promise.all([c(),o()])})()}),[o,c]);const u=!(null!=l&&l.canAgree)||t,f=()=>u?null:(0,z.jsx)(ome,{canSkip:!0,additionalActions:null==l?void 0:l.additionalActions}),y=()=>{var t,i;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:null==d||null===(t=d.updates)||void 0===t?void 0:t.title,type:xt.Z.Type.Heading,as:"h2"}),(0,z.jsx)(x.Z,{size:e.desktops?x.Z.Size.XLarge:x.Z.Size.Medium}),(0,z.jsx)(xt.Z,{text:null==d||null===(i=d.updates)||void 0===i?void 0:i.text,theme:"muted",html:!0}),e.desktops&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),f()]})]})},v=()=>{s(!1)},_=()=>{var e,t;return!d||null!=d&&d.additionalActions?(0,z.jsxs)("div",{className:"u-ui-margin-bottom-x2-large",children:[(0,z.jsx)("div",{className:"u-ui-padding-vertical-medium",children:(0,z.jsx)(xt.Z,{text:null==d||null===(e=d.additionalActions)||void 0===e?void 0:e.text,html:!0})}),null==d||null===(t=d.additionalActions)||void 0===t?void 0:t.actions.map(((e,t)=>{let{title:i,url:n,information:r}=e;return(0,z.jsx)("div",{className:"u-ui-padding-vertical-small",children:r?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("a",{href:n,children:(0,z.jsx)(xt.Z,{underline:!0,text:i,type:xt.Z.Type.Title,theme:"primary"})}),(0,z.jsx)(ic.I,{deprecatedIcon:(0,z.jsx)(ht.Z,{color:ht.Z.Color.Primary,name:"info-circle",size:ht.Z.Size.Small,aria:{"aria-hidden":"true"}}),inline:!0,size:ic.I.Size.Small,styling:ic.I.Styling.Flat,onClick:()=>(e=>{s(!0),a(e)})(r)})]}):(0,z.jsx)("a",{href:n,children:(0,z.jsx)(xt.Z,{underline:!0,text:i,type:xt.Z.Type.Title,theme:"primary"})})},t)}))]}):null};return(0,z.jsxs)("div",{className:"u-padding-none@portables grid8 push2",children:[(0,z.jsx)(Kp,{screen:$t.TermsAndConditions}),null!=d&&null!==(b=d.updates)&&void 0!==b&&b.title&&null!=d&&null!==(j=d.updates)&&void 0!==j&&j.text?e.desktops?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(g.Z,{styling:g.Z.Styling.Elevated,children:(0,z.jsx)("div",{className:"u-ui-padding-x2-large",children:y()})}),(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large})]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),y(),(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large})]}):null,_(),(0,z.jsx)(xt.Z,{text:null==d?void 0:d.title,type:xt.Z.Type.Heading}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(xt.Z,{text:null==d?void 0:d.text,theme:"muted",width:xt.Z.Width.Parent,html:!0}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),_(),u?null:e.desktops?f():(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),f()]}),(0,z.jsx)(cp.Z,{show:n,defaultCallback:v,title:null==r?void 0:r.title,body:null==r?void 0:r.text,actions:[{text:i("modal.actions.close"),callback:v,style:cp.Z.ActionStyling.Filled}]})]});var b,j})),HowItWorks:wT((()=>{const e=U("how_it_works");return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(dme,{}),(0,z.jsxs)(L,{separator:(0,z.jsx)(h.Z,{}),children:[(0,z.jsx)(ume,{steps:gme,title:e("how_to_sell.title"),buttonTitle:e("start_selling"),buttonUrl:Me.UNR,showTopTear:!0}),(0,z.jsx)(ume,{steps:hme,title:e("how_to_buy.title"),buttonTitle:e("start_shopping"),buttonUrl:Me.JXU}),(0,z.jsx)(pme,{})]}),(0,z.jsx)(mme,{startShoppingUrl:Me.JXU,startSellingUrl:Me.UNR})]})})),WalletHistory:wT((()=>{const e=(0,p.I0)(),t=U("wallet.history.empty"),i=(0,p.v9)(m8),n=(0,p.v9)(p8),s=(0,p.v9)(f8),r=(0,p.v9)(g8),a=(0,p.v9)(x8),{relativeUrl:o}=xc(),{year:l,month:c}=(e=>{const t=e.split("/"),i=t.pop(),n=t.pop();return Number.isNaN(i)||Number.isNaN(n)?{year:void 0,month:void 0}:{year:Number(n),month:Number(i)}})(o);return(0,m.useEffect)((()=>{l&&c&&e(OE.getHistoricalInvoicesRequest({year:l,month:c}))}),[e,c,l]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(doe,{}),(0,z.jsx)("div",{className:"wallet body-content__content",children:a===Ne.Pending?(0,z.jsx)(Mp,{styling:Mp.Styling.Wide}):a===Ne.Failure||a===Ne.Idle?null:i.length<=0?(0,z.jsx)(tc.Z,{title:t("title"),body:t("body"),deprecatedIcon:(0,z.jsx)(ht.Z,{name:"receipt-empty-state"})}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Ooe,{startBalanceAmount:n.amount,endBalanceAmount:s.amount,currency:r,year:l,month:c}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(loe,{invoiceLines:i})]})})]})})),WalletHistoryOverview:wT((()=>{const e=(0,p.I0)(),t=U("wallet.history.empty"),i=(0,p.v9)(y8),n=(0,p.v9)(Nc),s=(0,m.useMemo)((()=>{if(!i)return null;const e=(0,v.groupBy)(i,"year");return Object.entries(e).map((e=>{const[t,i]=e;return[t,(0,v.orderBy)(i,["month"],["desc"])]})).reverse()}),[i]);(0,m.useEffect)((()=>{e(OE.getCurrentInvoicesRequest())}),[e]);const r=e=>{const{title:t,balance:i,year:s,month:r}=e;return(0,z.jsxs)("span",{children:[(0,z.jsx)(gt.Z,{clickable:!0,type:gt.Z.Type.Navigating,chevron:!0,title:t,suffix:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:Ma(i.amount,{locale:n,currency:i.currencyCode})}),onClick:()=>(e=>{const{year:t,month:i}=e;(0,ls.ru)("".concat(Me.Xly,"/").concat(t,"/").concat(i))})({year:s,month:r})},r),(0,z.jsx)(h.Z,{})]},r)};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(doe,{}),s?s.length?(0,z.jsx)("div",{className:"wallet body-content__content",children:s.map((e=>{const[t,i]=e;return(0,z.jsxs)(nc.Z,{styling:nc.Z.Styling.Tight,children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Subtitle,text:t}),(0,z.jsx)(x.Z,{}),i.map(r),(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]},t)}))}):(0,z.jsx)("div",{className:"wallet body-content__content",children:(0,z.jsx)(tc.Z,{title:t("title"),body:t("body"),deprecatedIcon:(0,z.jsx)(ht.Z,{name:"receipt-empty-state"})})}):null]})})),WalletNavigation:wT(doe),PrivacyPolicy:wT((()=>{const[e,t]=(0,m.useState)(!1),i=U(),{fetch:n,data:s,isLoading:r}=ih(Fe.FHL);(0,m.useEffect)((()=>{n()}),[n]);const a=(0,m.useMemo)((()=>{if(null==s||!s.body)return;const t=new DOMParser,i=new XMLSerializer,n=t.parseFromString(s.body,"text/html");return n.querySelectorAll("details").forEach((t=>{e?t.setAttribute("open","true"):t.removeAttribute("open")})),i.serializeToString(n)}),[s,e]),o=()=>{t((e=>!e))};return r?(0,z.jsx)(Mp,{testId:"privacy-policy-loader"}):(0,z.jsxs)("article",{className:"privacy-policy-content user-created-content",children:[(()=>{if(!a)return null;const t=i(e?"privacy_policy_details_button.collapse_all":"privacy_policy_details_button.expand_all");return(0,z.jsx)("div",{className:"u-ui-padding-top-x2-large u-ui-padding-left-medium",children:(0,z.jsx)(ic.I,{text:t,styling:ic.I.Styling.Flat,size:ic.I.Size.Small,onClick:o,deprecatedIcon:(0,z.jsx)(ht.Z,{name:e?"x":"plus",color:ht.Z.Color.Primary,size:ht.Z.Size.XSmall}),inline:!0})})})(),(0,z.jsx)(nc.Z,{styling:nc.Z.Styling.Wide,children:(0,z.jsx)(xt.Z,{text:a,html:!0})}),(0,z.jsx)(o0,{})]})})),SatisfactionSurvey:wT((()=>{const[e,t]=(0,m.useState)({}),[i,n]=(0,m.useState)(Ne.Idle),[s,r]=(0,m.useState)(),[a,o]=(0,m.useState)(),l=(0,p.v9)(X),c=U("satisfaction_survey"),{track:d}=vi(),u=!(null==s||!s.length),{transaction_id:g}=xc().searchParams,h=(0,m.useCallback)((()=>s?s.reduce(((e,t)=>{let{name:i}=t;return{...e,[i]:0}}),{}):{}),[s]);(0,m.useEffect)((()=>{u&&t(h())}),[u,h]),(0,m.useEffect)((()=>{(async()=>{var e;if(!l)return;n(Ne.Pending);const t=await(0,Fe.fax)(l,"string"==typeof g?g:void 0);if("errors"in t)return void n(Ne.Failure);const i=null===(e=t.satisfaction_survey)||void 0===e?void 0:e.questions.map((e=>(e=>({name:e.name,title:e.title}))(e)));r(i),n(Ne.Success)})()}),[l,g]);return l?(0,z.jsx)("section",{className:"dialog-content",children:(0,z.jsx)("div",{className:"satisfaction-survey",children:i===Ne.Pending?(0,z.jsx)(Mp,{}):i===Ne.Failure?(0,z.jsx)(sw,{}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{text:c("title"),type:xt.Z.Type.Heading}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(xt.Z,{text:c("subtitle"),type:xt.Z.Type.Subtitle}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsxs)("form",{"data-testid":"satisfaction-survey-form",onSubmit:()=>{d(Ri({target:qm.SatisfactionSurveySend})),(async()=>{l&&(n(Ne.Pending),"errors"in await(0,Fe.p9I)({userId:l,transactionId:"string"==typeof g?g:void 0,answers:{...e,comment:a}})?n(Ne.Failure):(0,ls.ru)(Ec))})()},children:[u?(0,z.jsxs)(z.Fragment,{children:[s.map((i=>{let{title:n,name:s}=i;return(0,z.jsxs)("div",{className:"satisfaction-survey__question-box",children:[(0,z.jsx)("div",{className:"satisfaction-survey__question",children:n}),(0,z.jsx)(Ox.Z,{isInteractive:!0,value:e[s],name:"answers[".concat(s,"]"),size:Ox.Z.Size.Large,testId:"rating-".concat(s),onSelect:e=>{((e,i)=>{t((t=>({...t,[i]:e})))})(e,s)}})]},s)})),(0,z.jsx)(x.Z,{size:x.Z.Size.Large})]}):null,(0,z.jsx)(PQ.R,{styling:PQ.R.Styling.Tight,name:"comment",onChange:e=>o(e.target.value),placeholder:c("comment_placeholder")}),(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(ic.I,{text:c("actions.submit"),type:ic.I.Type.Submit,styling:ic.I.Styling.Filled,testId:"satisfaction-survey-button"})]})]})})}):null})),Safety:wT((e=>{let{showPro:t}=e;const i=U("trust_and_safety"),n=(0,p.v9)(Wt("payments"));return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xme,{mobile:(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large}),desktop:(0,z.jsx)(x.Z,{size:x.Z.Size.X6Large})}),(0,z.jsxs)("div",{className:"page-container",children:[(0,z.jsx)(xt.Z,{as:"h1",children:(0,z.jsx)("div",{className:"safety_header-title",children:i("intro_title")})}),(0,z.jsx)(xme,{mobile:(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),desktop:(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large})}),(0,z.jsx)(xt.Z,{children:(0,z.jsx)("div",{className:"safety_header-body",children:i("intro_body")})}),(0,z.jsx)(xme,{mobile:(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),desktop:(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large})}),n?(0,z.jsx)(vme,{showPro:t}):(0,z.jsx)(jme,{}),(0,z.jsx)(xme,{mobile:(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),desktop:(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large})}),(0,z.jsxs)("section",{children:[(0,z.jsx)(xt.Z,{as:"h2",children:(0,z.jsx)("div",{className:"safety_header-title",children:i("explanation_title")})}),(0,z.jsx)(xme,{mobile:(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),desktop:(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large})}),(0,z.jsx)(Zme,{showPro:t}),(0,z.jsx)(xme,{mobile:(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large}),desktop:(0,z.jsx)(x.Z,{size:x.Z.Size.X6Large})})]}),(0,z.jsxs)("section",{children:[(0,z.jsx)(xt.Z,{as:"h2",children:(0,z.jsx)("div",{className:"safety_header-title",children:i("all_you_need_title")})}),(0,z.jsx)(xme,{mobile:(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),desktop:(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large})}),(0,z.jsx)(Cme,{showPro:t}),(0,z.jsx)(xme,{mobile:(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large}),desktop:(0,z.jsx)(x.Z,{size:x.Z.Size.X6Large})})]})]})]})})),ForgotPassword:wT((()=>{const e=U(),t=(0,p.v9)(W);if(!t)return null;const i=Je(t.photo);return(0,z.jsx)(gt.Z,{prefix:(0,z.jsx)(Kl.U,{src:i,alt:t.login,styling:Kl.U.Styling.Circle,size:Kl.U.Size.X2Large}),title:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,text:t.login}),body:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{}),(0,z.jsx)(ic.I,{url:Me.jUH,text:e("auth.email.login.actions.forgot_password"),size:ic.I.Size.Small,testId:"forgot-password-link",inline:!0}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.Small}),(0,z.jsx)(ic.I,{onClick:async()=>{await lK()&&(0,ls.ru)(Me.mYc)},text:e("header.actions.log_out"),size:ic.I.Size.Small,inline:!0})]})})})),UserSearch:wT((e=>{let{page:t,searchText:i}=e;const n=U("user.search"),[s,r]=(0,m.useState)(Number(t)||1),{data:a,error:o,isLoading:l}=((e,t)=>{const{fetch:i,transformedData:n,isLoading:s,error:r}=ih(Fe.RfJ,sx);return(0,m.useEffect)((()=>{i({perPage:36,searchText:e,page:t})}),[i,e,t]),{data:n,isLoading:s,error:r}})(i||"",s),{pushHistoryState:c}=xc();return(0,m.useEffect)((()=>{c((0,Me.OJx)(s,i||"")),(0,ls.k3)()}),[s,c,i]),(0,m.useEffect)((()=>(window.addEventListener("popstate",ls.sl),()=>{window.removeEventListener("popstate",ls.sl)})),[]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Kp,{screen:$t.UserSearch,linkTracking:{target:qm.MergeFollowingBanner}}),(0,z.jsxs)("div",{className:"user-search__container",children:[(0,z.jsx)(gt.Z,{title:(0,z.jsx)(xt.Z,{text:n("title"),type:xt.Z.Type.Title}),styling:gt.Z.Styling.Narrow}),(0,z.jsx)(h.Z,{}),(0,z.jsx)("div",{className:"user-search__body",children:l?(0,z.jsx)("div",{className:"user-search__body-state--center",children:(0,z.jsx)(Mp,{size:Mp.Size.X2Large,testId:"user-search-loader"})}):o?(0,z.jsx)("div",{className:"user-search__body-state--center",children:(0,z.jsx)(tc.Z,{title:n("error.title"),body:n("error.body"),action:(0,z.jsx)(ic.I,{isLoading:l,text:n("error.cta"),styling:ic.I.Styling.Filled,onClick:ls.sl})})}):null!=a&&a.users.length?(0,z.jsx)(wme,{users:a.users,testId:"user-search-grid",addColumnOnDesktops:!0}):(0,z.jsx)("div",{className:"user-search__body-state--center",children:(0,z.jsx)(tc.Z,{animation:(0,z.jsx)(u.Z,{animationUrl:"".concat(Be.Fv,"/assets/animations/search-empty-state.json")}),title:n("empty_state.title"),body:n("empty_state.body")})})}),null==a||!a.users.length||a.pagination.totalPages<=1?null:(0,z.jsx)(g.Z,{children:(0,z.jsx)(o5.Z,{currentPage:s,pageCount:a.pagination.totalPages,onNextClick:r,onPrevClick:r,onPageClick:r,testId:"user-search-pagination"})})]})]})})),SubscriptionSettings:wT((()=>(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(SJ,{}),(0,z.jsx)(Fme,{})]}))),PrivacySettings:wT((()=>(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(SJ,{}),(0,z.jsxs)("div",{className:"body-content__content",children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(Ome,{})]})]}))),ProfileSettings:wT((()=>(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(rpe,{}),(0,z.jsx)(SJ,{}),(0,z.jsx)("div",{className:"body-content__content",children:(0,z.jsx)(spe,{})})]}))),UserFollowers:wT((e=>{let{page:t,id:i}=e;const n=Number(i),s=U("user.followers_page"),[r,a]=(0,m.useState)(Number(t)||1),{data:o,error:l,isLoading:c}=((e,t)=>{const{fetch:i,transformedData:n,isLoading:s,error:r}=ih(Fe.dXl,sx);return(0,m.useEffect)((()=>{i({userId:e,page:t,perPage:30})}),[i,e,t]),{data:n,isLoading:s,error:r,userId:e}})(n,r),{data:d}=ape({id:n,localize:!0}),x=(0,p.v9)(X),{pushHistoryState:f}=xc(),y=n===x;return(0,m.useEffect)((()=>(window.addEventListener("popstate",ls.sl),()=>{window.removeEventListener("popstate",ls.sl)})),[]),(0,m.useEffect)((()=>{f((0,Me.v6n)(n,r)),(0,ls.k3)()}),[n,r,f]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Kp,{screen:$t.Followers,linkTracking:{target:qm.MergeFollowersBanner}}),(0,z.jsx)("aside",{className:"body-content__sidebar",children:(null==d?void 0:d.user)&&(0,z.jsx)(QQ,{user:d.user,showActions:!y,testId:"user-followers-user"})}),(0,z.jsx)("div",{className:"body-content__content",children:(0,z.jsxs)("div",{className:"user-followers__content",children:[(0,z.jsx)(gt.Z,{title:(0,z.jsx)(xt.Z,{text:s("title",{username:null==d?void 0:d.user.login}),type:xt.Z.Type.Title}),styling:gt.Z.Styling.Narrow}),(0,z.jsx)(h.Z,{}),(0,z.jsx)("div",{className:"user-followers__body",children:c?(0,z.jsx)("div",{className:"user-followers__body-state--center",children:(0,z.jsx)(Mp,{size:Mp.Size.X2Large,testId:"user-followers-loader"})}):l?(0,z.jsx)("div",{className:"user-followers__body-state--center",children:(0,z.jsx)(tc.Z,{title:s("error.title"),body:s("error.body"),action:(0,z.jsx)(ic.I,{isLoading:c,text:s("error.cta"),styling:ic.I.Styling.Filled,onClick:ls.sl})})}):null!=o&&o.users.length?(0,z.jsx)(wme,{users:o.users,showFollowButtons:y,testId:"user-followers-grid"}):(0,z.jsx)("div",{className:"user-followers__body-state--center",children:(0,z.jsx)(tc.Z,{animation:(0,z.jsx)(u.Z,{animationUrl:"".concat(Be.Fv,"/assets/animations/search-empty-state.json")}),title:s("empty_state.title",{username:null==d?void 0:d.user.login})})})}),!o||o.pagination.totalPages<=1?null:(0,z.jsx)(g.Z,{children:(0,z.jsx)(o5.Z,{currentPage:r,pageCount:o.pagination.totalPages,onNextClick:a,onPrevClick:a,onPageClick:a,testId:"user-followers-pagination"})})]})})]})})),FollowedUsers:wT((e=>{let{page:t,id:i}=e;const n=Number(i),s=U("user.followed_users"),[r,a]=(0,m.useState)(Number(t)||1),{data:o,error:l,isLoading:c}=((e,t)=>{const{fetch:i,transformedData:n,isLoading:s,error:r}=ih(Fe.kk4,sx);return(0,m.useEffect)((()=>{i({userId:e,perPage:30,page:t})}),[i,e,t]),{data:n,isLoading:s,error:r,userId:e}})(n,r),{data:d}=ape({id:n,localize:!0}),x=(0,p.v9)(X),{pushHistoryState:f}=xc(),y=n===x;return Xn({abTestName:"following_page_rework",shouldTrackExpose:!0}),(0,m.useEffect)((()=>(window.addEventListener("popstate",ls.sl),()=>{window.removeEventListener("popstate",ls.sl)})),[]),(0,m.useEffect)((()=>{f((0,Me.yDJ)(n,r)),(0,ls.k3)()}),[n,r,f]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Kp,{screen:$t.Following,linkTracking:{target:qm.MergeFollowingBanner}}),(0,z.jsx)("aside",{className:"body-content__sidebar",children:(null==d?void 0:d.user)&&(0,z.jsx)(QQ,{user:d.user,showActions:!y,testId:"followed-users-user"})}),(0,z.jsx)("div",{className:"body-content__content",children:(0,z.jsxs)("div",{className:"followed-users__content",children:[(0,z.jsx)(gt.Z,{title:(0,z.jsx)(xt.Z,{text:s("title",{username:null==d?void 0:d.user.login}),type:xt.Z.Type.Title}),styling:gt.Z.Styling.Narrow}),(0,z.jsx)(h.Z,{}),(0,z.jsx)("div",{className:"followed-users__body",children:c?(0,z.jsx)("div",{className:"followed-users__body-state--center",children:(0,z.jsx)(Mp,{size:Mp.Size.X2Large,testId:"followed-users-loader"})}):l?(0,z.jsx)("div",{className:"followed-users__body-state--center",children:(0,z.jsx)(tc.Z,{title:s("error.title"),body:s("error.body"),action:(0,z.jsx)(ic.I,{isLoading:c,text:s("error.cta"),styling:ic.I.Styling.Filled,onClick:ls.sl})})}):null!=o&&o.users.length?(0,z.jsx)(wme,{users:o.users,showFollowButtons:y,testId:"followed-users-grid"}):(0,z.jsx)("div",{className:"followed-users__body-state--center",children:(0,z.jsx)(tc.Z,{animation:(0,z.jsx)(u.Z,{animationUrl:"".concat(Be.Fv,"/assets/animations/search-empty-state.json")}),title:s("empty_state.title",{username:null==d?void 0:d.user.login})})})}),!o||o.pagination.totalPages<=1?null:(0,z.jsx)(g.Z,{children:(0,z.jsx)(o5.Z,{currentPage:r,pageCount:o.pagination.totalPages,onNextClick:a,onPrevClick:a,onPageClick:a,testId:"followed-users-pagination"})})]})})]})})),ViewIssueDetails:wT((()=>{const e=(0,p.I0)(),{relativeUrl:t}=xc(),i=U("view_issue_details"),n=U("errors"),s=(0,ys.fb)(t),r=(0,p.v9)(Nf),a=(0,p.v9)(Ad),o=(0,p.v9)(X),[l,c]=(0,m.useState)(!1),[d,u]=(0,m.useState)(null);(0,m.useEffect)((()=>{s&&e(Rf.getComplaintRequest({complaintId:Number(s)}))}),[e,s]),(0,m.useEffect)((()=>{(async()=>{if(!r)return;const{transactionId:t}=r,i=await(0,Fe.foU)({id:t});if("errors"in i)return void c(!0);const n=RA(i.transaction);e(Dm.fetchTransactionRequestSuccess({transaction:n}))})()}),[e,r]);const g=e=>()=>{u(e)},f=()=>u(null);return(0,z.jsxs)("div",{className:"grid8 push2",children:[(0,z.jsx)(gt.Z,{title:null==r?void 0:r.faqEntry.title,validation:(null==r?void 0:r.escalated)&&i("escalated_validation")}),(()=>{if(null==r||!r.photos.length)return null;const{photos:e}=r;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"issue-details-photos",children:e.map(((e,t)=>(0,z.jsx)("figure",{className:"u-flexbox issue-details-photo issue-details-photo--".concat(t+1),children:(0,z.jsx)("div",{className:"issue-details-thumbnail","data-photoid":e.url,onClick:g(t),children:(0,z.jsx)(Kl.U,{src:e.url,scaling:Kl.U.Scaling.Cover,alt:"",testId:"complaint-photo-".concat(t+1)})})},e.url)))}),null!==d&&(0,z.jsx)($9,{imageSources:e.map((e=>e.url)),initialImageIndex:d,onClose:f})]})})(),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(gt.Z,{title:null==r?void 0:r.user.login,body:(0,z.jsx)(xt.Z,{text:null==r?void 0:r.message,truncate:!0})}),(0,z.jsx)(h.Z,{})]}),a?(0,z.jsx)(gt.Z,{prefix:(0,z.jsx)(Wy.Z,{name:E5.Z,color:Wy.Z.Color.GreyscaleLevel4}),title:(0,z.jsx)(xt.Z,{text:null!=r&&r.eligibleForReturnLabel&&(null===(y=a.seller)||void 0===y?void 0:y.id)===o?i("how_to_resolve"):i("more_information")}),type:gt.Z.Type.Navigating,url:(0,Me.WoV)(s),suffix:(0,z.jsx)(Wy.Z,{name:b5.Z,color:Wy.Z.Color.GreyscaleLevel4})}):null,(()=>{var e;if(!r)return null;if(r.escalated)return null;if(null==a||!a.conversationId)return null;const t=o===(null==a||null===(e=a.seller)||void 0===e?void 0:e.id);return(0,z.jsx)(Zue,{complaintId:Number(s),transactionId:r.transactionId,isEnglishAllowedVisible:r.escalation.englishAllowedVisible,isSellerSide:t,conversationId:a.conversationId.toString()})})(),r?(0,z.jsx)(gt.Z,{theme:"transparent",suffix:(0,z.jsx)("div",{className:"u-flexbox",children:r.resolutions.map((e=>{if(!a||!r)return null;if(!a.conversationId)return null;switch(e.action){case Pf.Refund:return(0,z.jsx)(m.Fragment,{children:(0,z.jsx)(G9,{complaintId:Number(s),url:Rc(a.conversationId.toString())})},e.action);case Pf.RequestToReturn:return(0,z.jsxs)(m.Fragment,{children:[(0,z.jsx)(Xk,{complaintTransactionId:r.transactionId,title:e.button,primary:e.isPrimary,url:Rc(a.conversationId.toString())}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical})]},e.action);default:return(0,z.jsx)(m.Fragment,{children:(0,z.jsx)(G9,{complaintId:Number(s),url:Rc(a.conversationId.toString())})},e.action)}}))})}):null,l&&(0,z.jsx)(mJ.Z,{body:n("generic"),onClose:()=>{c(!1)}})]});var y})),Advertising:wT((()=>(0,p.v9)(Wt("web_ads_lead_form"))?(0,z.jsx)(jpe,{}):(0,z.jsx)(Spe,{}))),Blocked:wT((e=>{let{ipAddress:t}=e;const i=U("main.blocked");return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.HeadingXL,text:i("title")}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Body,text:i("description",{ip_address:t,contact_link:(0,z.jsx)("a",{href:Me.lw5,children:i("contact_us")})})})]})})),About:wT((()=>(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(kpe,{}),(0,z.jsx)(Ppe,{}),(0,z.jsx)(Npe,{}),(0,z.jsx)(zpe,{})]}))),InfoBoard:wT((()=>{const{fetch:e,transformedData:t,error:i,isLoading:n}=ih(Fe.Hvi,lx);return(0,m.useEffect)((()=>{e()}),[e]),n?(0,z.jsx)(Mp,{testId:"infoboard-loader"}):i?(0,z.jsx)(sw,{}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"u-mobiles-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.Large})}),(0,z.jsx)("div",{className:"u-desktops-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large})}),null==t?void 0:t.map(((e,t)=>(0,z.jsxs)(m.Fragment,{children:[(0,z.jsx)("div",{className:"u-mobiles-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.X3Large})}),(0,z.jsx)("div",{className:"u-desktops-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large})}),(0,z.jsx)(Epe,{...e}),(0,z.jsx)("div",{className:"u-mobiles-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.X3Large})}),(0,z.jsx)("div",{className:"u-desktops-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large})}),(0,z.jsx)(h.Z,{})]},t))),(0,z.jsx)(x.Z,{size:x.Z.Size.X6Large})]})})),InfoBoardPost:wT((e=>{let{postId:t}=e;const{fetch:i,transformedData:n,error:s,isLoading:r}=ih(Fe.G7H,dx);return(0,m.useEffect)((()=>{i(t)}),[i,t]),r?(0,z.jsx)(Mp,{testId:"infoboard-loader"}):s?(0,z.jsx)(sw,{}):n?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{className:"u-mobiles-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large})}),(0,z.jsx)("div",{className:"u-desktops-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.X5Large})}),(0,z.jsx)(Epe,{...n}),(0,z.jsx)("div",{className:"u-mobiles-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.X5Large})}),(0,z.jsx)("div",{className:"u-desktops-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.X6Large})})]}):null})),BusinessAccountsTermsOfUse:wT((()=>{const{fetch:e,transformedData:t,isLoading:i,error:n}=ih(Fe.QVE,px);(0,m.useEffect)((()=>{e()}),[e]);const s=e=>(0,z.jsxs)("div",{className:"terms__highlights u-ui-padding-x2-large@desktops",children:[(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,children:e.title}),(0,z.jsx)("div",{className:"u-desktops-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge})}),(0,z.jsx)("div",{className:"u-mobiles-only",children:(0,z.jsx)(x.Z,{size:x.Z.Size.Medium})}),(0,z.jsx)("div",{className:"user-formatted-text",children:(0,z.jsx)(xt.Z,{html:!0,children:e.body})})]});return n?(0,z.jsx)(sw,{}):i||!t?(0,z.jsx)(Mp,{styling:Mp.Styling.Wide,testId:"terms-of-use-loader"}):(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Wide,children:[(()=>{if(null==t||!t.terms_updates)return null;const{terms_updates:e}=t;return(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{className:"u-desktops-only",children:[(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(g.Z,{styling:g.Z.Styling.Elevated,children:s(e)})]}),(0,z.jsxs)("div",{className:"u-mobile-only",children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(g.Z,{children:s(e)}),(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large})]})]})})(),(0,z.jsx)(xt.Z,{type:xt.Z.Type.Heading,children:t.title}),(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)("div",{className:"user-created-content",children:(0,z.jsx)(xt.Z,{html:!0,children:t.body})})]})})),EmailRegisterPage:wT((()=>(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)("div",{className:"auth__container",children:(0,z.jsxs)(g.Z,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsx)(JK,{})]})})]}))),FaqEntry:wT((()=>{const e=(0,p.I0)(),{relativeUrl:t}=xc(),i=(0,ys.Uf)(t,1),n=(0,p.v9)(Nf),s=(0,p.v9)(Lf),r=(0,p.v9)(Te);return(0,m.useEffect)((()=>{i&&e(Rf.getComplaintRequest({complaintId:Number(i)}))}),[e,i]),(0,z.jsxs)("div",{className:"faq push2",children:[s!==Ne.Pending?null:(0,z.jsx)(Mp,{size:Mp.Size.Large,testId:"faq-entry-page-loader"}),(()=>{if(!n)return null;const{faqEntry:e}=n,t=r?null:e.title;return(0,z.jsx)(gt.Z,{children:(0,z.jsx)(VQ,{title:t,faqEntryId:e.id,content:e.body})})})()]})})),NotificationLandings:wT((e=>{let{type:t}=e;const{track:i}=vi();return(0,m.useEffect)((()=>{i(Gi({target:cb.CtaPrompt,targetDetails:t}))}),[i,t]),t===Ope.photoTips?(0,z.jsx)(Rpe,{}):(0,z.jsx)(Dpe,{type:t})})),ItemPage:wT((e=>{var t;let{itemDto:i}=e;const{data:n,fetch:s,isLoading:r}=ih(Fe.rVG),{fetch:a,transformedData:o}=ih(Fe.WOq,fx),{relativeUrl:l,searchParams:c}=xc(),d=E(),u=f2(i||(null==n?void 0:n.item)),g=(0,p.v9)(Wt("next_page_item")),h=(e=>{const t=e.match(/(\d+)/);return t?parseInt(t[1],10):null})(l)||(null==i?void 0:i.id),x=(null===(t=c.referrer)||void 0===t?void 0:t.toString())||$t.Unknown;if((0,m.useEffect)((()=>{null!=i&&i.id||h&&s({id:h})}),[s,h,null==i?void 0:i.id]),(0,m.useEffect)((()=>{if(!h)return;const e=(null==n?void 0:n.item.user.id)||(null==i?void 0:i.user.id);e&&a(e)}),[null==n?void 0:n.item.user.id,a,h,null==i?void 0:i.user.id]),r)return(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center u-ui-margin-top-medium",children:(0,z.jsx)(Dp.Z,{size:Dp.Z.Size.XLarge,testId:"item-loader"})});const f=i||(null==n?void 0:n.item);if(!f)return null;const y=(null==o?void 0:o.showSupportFunctionality)||!1;return(0,z.jsxs)("main",{className:"item-information",itemScope:!0,itemType:"http://schema.org/Product",children:[!g&&(0,z.jsx)(uc,{shape:di.Leaderboard}),y&&h&&(0,z.jsx)(Mpe,{itemId:h}),d.portables&&(0,z.jsxs)("section",{id:"content-mobiles",className:"content-container site-content__content-section","data-testid":"item-mobiles-only-container",children:[(0,z.jsx)(B2,{ownerId:f.user.id,itemId:f.id,catalogId:f.catalog_id,brandId:f.brand_id,alert:f.item_alert,isUserAdmin:y,title:f.title,photos:f.photos,data:null==u?void 0:u.gallery,offlineVerification:f.offline_verification}),(0,z.jsx)(M2,{item:f}),(0,z.jsx)(N2,{itemId:f.id,canBuyItem:f.can_buy,canBundle:f.can_bundle,closetCountdownEndDate:f.user.closet_countdown_end_date||"",itemUserId:f.user.id,bundleDiscount:f.user.bundle_discount,referrerScreen:x,isUserHated:f.user.is_hated,isUserHatesYou:f.user.hates_you,closetData:null==u?void 0:u.closet})]}),d.desktops&&(0,z.jsxs)("div",{className:"u-ui-margin-top-large content-wrapper-flex","data-testid":"item-desktops-only-container",children:[(0,z.jsx)("section",{id:"content",className:"content-container site-content__content-section",children:(0,z.jsxs)("div",{className:"body-content",children:[(0,z.jsx)(B2,{ownerId:f.user.id,itemId:f.id,catalogId:f.catalog_id,brandId:f.brand_id,alert:f.item_alert,isUserAdmin:y,title:f.title,photos:f.photos,data:null==u?void 0:u.gallery,offlineVerification:f.offline_verification}),(0,z.jsx)(N2,{itemId:f.id,canBuyItem:f.can_buy,canBundle:f.can_bundle,closetCountdownEndDate:f.user.closet_countdown_end_date||"",itemUserId:f.user.id,bundleDiscount:f.user.bundle_discount,referrerScreen:x,isUserHated:f.user.is_hated,isUserHatesYou:f.user.hates_you,closetData:null==u?void 0:u.closet})]})}),(0,z.jsx)("aside",{id:"sidebar",className:"sidebar-container u-position-relative",children:(0,z.jsx)(M2,{item:f})})]})]})})),TaxRules:wT((()=>{const e=U("tax_rules"),t=E(),{track:i}=vi(),n=(0,p.v9)(Wt("web_taxpayers_tax_rules")),[s,r]=(0,m.useState)(Ne.Pending),[a,o]=(0,m.useState)(null),[l,c]=(0,m.useState)(null),[d,u]=(0,m.useState)([]),[g,f]=(0,m.useState)(null),[y,v]=(0,m.useState)(null),[_,b]=(0,m.useState)(null),j=t.portables?"u-flexbox u-flex-direction-column u-align-items-flex-start":"u-flexbox u-align-items-flex-start u-flex-wrap";(0,m.useEffect)((()=>{(async()=>{const e=await(0,Fe.VIQ)();if("errors"in e)return void r(Ne.Failure);const t=jce(e);r(Ne.Success),o(t),c(t.country)})()}),[]),(0,m.useEffect)((()=>{(async()=>{if(!(null!=a&&a.country.code||null!=l&&l.code))return;r(Ne.Pending);const e=await(0,Fe.ADp)((null==l?void 0:l.code)||(null==a?void 0:a.country.code)||"FR");"errors"in e?r(Ne.Failure):(r(Ne.Success),u(e.tax_rules),f(e.submit_section),v(e.more_info_section),b(e.tax_rules_caption))})()}),[null==a?void 0:a.country.code,null==l?void 0:l.code]),(0,m.useEffect)((()=>{l&&i(Gi({screen:$t.TaxRules,target:cb.TaxRules,targetDetails:l.code}))}),[l,i]);const S=()=>{i(Ri({screen:$t.TaxRules,target:qm.Confirm}));const e=(null==l?void 0:l.code)||(null==a?void 0:a.country.code),t=(null==l?void 0:l.title)||(null==a?void 0:a.country.title);if(!e||!t)return;const n=(0,ys.Iq)(Me.rHE,{country_code:e,country_title:t,show_education:!0});(0,ls.ru)(n)},Z=e=>{switch(e){case Wpe.Globe:return"".concat(Be.Fv,"/assets/taxpayers/speech_bubble.png");case Wpe.Discount:return"".concat(Be.Fv,"/assets/taxpayers/mountain_line.png");case Wpe.OkHand:default:return"".concat(Be.Fv,"/assets/taxpayers/ok_hand.png")}},I=e=>{switch(e){case Xpe.Cross:return aw.Z;case Xpe.Time:return Upe.Z;case Xpe.Wallet:return Bpe.Z;case Xpe.Question:return E5.Z;case Xpe.LightBulb:return qpe.Z;case Xpe.TShirt:return Vpe.Z;case Xpe.Money:return Hpe.Z;case Xpe.Check:default:return rw.Z}},C=t=>{switch(t.type){case Ype.Title:return(0,z.jsx)(xt.Z,{html:!0,text:t.content,type:xt.Z.Type.Heading},t.content);case Ype.Example:return(0,z.jsxs)(m.Fragment,{children:[(0,z.jsx)(xt.Z,{html:!0,text:e("example"),type:xt.Z.Type.Title}),"",(0,z.jsx)(xt.Z,{inline:!0,html:!0,text:t.content,type:xt.Z.Type.Body})]},t.content);case Ype.Paragraph:return(0,z.jsx)(xt.Z,{html:!0,text:t.content,type:xt.Z.Type.Body},t.content);default:return null}},k=t=>{switch(t.type){case Ype.Title:return(0,z.jsx)(xt.Z,{html:!0,text:t.content,type:xt.Z.Type.Title},t.content);case Ype.Example:return(0,z.jsxs)(m.Fragment,{children:[(0,z.jsx)(xt.Z,{html:!0,text:e("example"),type:xt.Z.Type.Title}),"",(0,z.jsx)(xt.Z,{inline:!0,html:!0,text:t.content,type:xt.Z.Type.Body})]},t.content);case Ype.Paragraph:return(0,z.jsx)(xt.Z,{text:t.content,type:xt.Z.Type.Body},t.content);default:return null}},w=e=>t=>{i(Ri({screen:$t.TaxRules,target:qm.TaxRuleItem,targetDetails:JSON.stringify({state:t?"open":"close",icon:e})}))},P=e=>{var t,i,n,s;return((null===(t=d[e])||void 0===t||null===(i=t.items)||void 0===i?void 0:i.length)||0)+((null===(n=d[e])||void 0===n||null===(s=n.exemptions)||void 0===s?void 0:s.length)||0)},T=(e,t)=>{const i=1===P(t);return null===e.icon||null===e.title?(0,z.jsx)(m.Fragment,{children:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,children:(0,z.jsx)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),children:e.body.map(C)})})},e.title):(0,z.jsx)(m.Fragment,{children:(0,z.jsx)(PZ.Z,{styling:PZ.Z.Styling.Wide,closedPrefix:(0,z.jsx)(Wy.Z,{name:I(e.icon),color:Wy.Z.Color.GreyscaleLevel3}),expandedPrefix:(0,z.jsx)(Wy.Z,{name:I(e.icon),color:Wy.Z.Color.GreyscaleLevel3}),isExpanded:i,title:e.title,content:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),children:e.body.map(C)}),(0,z.jsx)(x.Z,{})]}),headerId:"accordion-tax-rule-item",bodyId:"accordion-tax-rule-body",onToggle:w(e.icon),testId:"tax-rule-accordion-".concat(t)})},e.title)},F=(e,t)=>{const i=1===P(t);return null===e.icon||null===e.title?(0,z.jsx)(m.Fragment,{children:(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,children:(0,z.jsx)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),children:e.body.map(C)})})},e.title):(0,z.jsx)(m.Fragment,{children:(0,z.jsx)(PZ.Z,{styling:PZ.Z.Styling.Wide,closedPrefix:(0,z.jsx)(Wy.Z,{name:I(e.icon),color:Wy.Z.Color.GreyscaleLevel3}),expandedPrefix:(0,z.jsx)(Wy.Z,{name:I(e.icon),color:Wy.Z.Color.GreyscaleLevel3}),isExpanded:i,title:e.title,content:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(L,{separator:(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),children:e.body.map(k)}),(0,z.jsx)(x.Z,{})]}),headerId:"accordion-tax-rule-exemption-item",bodyId:"accordion-tax-rule-exemption-body",onToggle:w(e.icon),testId:"tax-exemption-accordion-".concat(t)})},e.title)},N=()=>y?(0,z.jsxs)("div",{className:"more-information",children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XSmall}),(0,z.jsxs)(gt.Z,{theme:"transparent",styling:gt.Z.Styling.Wide,testId:"tax-rules-more-information-title",title:(0,z.jsx)(xt.Z,{text:y.title,type:xt.Z.Type.Heading}),children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)(L,{separator:(0,z.jsx)(x.Z,{}),children:y.links.map((e=>(0,z.jsx)(xt.Z,{html:!0,underline:!1,text:e,type:xt.Z.Type.Body},e)))})]})]}):null;return s===Ne.Pending?(0,z.jsx)(Mp,{testId:"tax-rules-loader"}):s===Ne.Failure?(0,z.jsx)(sw,{}):d&&n?(0,z.jsxs)("div",{className:"u-flexbox u-align-items-flex-start",children:[(0,z.jsxs)("div",{className:"rules-container",children:[(0,z.jsx)(xt.Z,{text:e("page_title"),type:xt.Z.Type.Heading}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(hI,{styling:fb.M.Styling.Wide,value:l,title:e("heading"),name:e("heading"),onChange:e=>{e&&c(e)},validation:null,placeholder:"",showSuggestedCountries:null===(null==a?void 0:a.country)}),(0,z.jsx)(L,{children:d.map((t=>{var i,n;return(0,z.jsxs)(m.Fragment,{children:[t.header?(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,suffix:t.icon&&(0,z.jsx)(Kl.U,{src:Z(t.icon),size:Kl.U.Size.XLarge}),testId:"tax-rules-header",body:(0,z.jsxs)("div",{className:j,children:[(0,z.jsx)("div",{className:"cell-title",children:(0,z.jsx)(xt.Z,{text:t.header,type:xt.Z.Type.Title})}),(0,z.jsx)("div",{children:(0,z.jsx)(xt.Z,{text:t.title,type:xt.Z.Type.Heading})})]})}):(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,title:(0,z.jsx)(xt.Z,{text:t.title,type:xt.Z.Type.Heading}),testId:"tax-rules-subtitle",body:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{}),(0,z.jsx)(xt.Z,{text:t.subtitle,type:xt.Z.Type.Subtitle})]})}),null===(i=t.items)||void 0===i?void 0:i.map(T),(0,z.jsx)(h.Z,{}),t.exemptions&&(0,z.jsx)(yt.Z,{type:yt.Z.Type.Stacked,styling:yt.Z.Styling.Wide,text:e("exemptions")}),null===(n=t.exemptions)||void 0===n?void 0:n.map(F)]},t.title)}))}),_&&(0,z.jsx)(gt.Z,{theme:"transparent",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Caption,text:_,html:!0})}),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.XLarge}),(0,z.jsxs)("div",{className:"u-flexbox",children:[(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical,size:x.Z.Size.XLarge}),(0,z.jsxs)("div",{children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Tight,theme:"transparent",prefix:(0,z.jsx)(Wy.Z,{name:qpe.Z,color:Wy.Z.Color.Primary}),testId:"tax-rules-info-text",children:(0,z.jsx)(xt.Z,{width:xt.Z.Width.Parent,text:null==g?void 0:g.body})}),g&&t.portables&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(x.Z,{}),(0,z.jsx)(ic.I,{text:g.button_title,styling:ic.I.Styling.Filled,iconPosition:ic.I.IconPosition.Right,icon:(0,z.jsx)(Wy.Z,{name:Gpe.Z}),onClick:S,testId:"tax-rules-submit-button"})]})]}),(0,z.jsx)(x.Z,{orientation:x.Z.Orientation.Vertical}),g&&!t.portables&&(0,z.jsx)("div",{children:(0,z.jsx)(ic.I,{text:g.button_title,styling:ic.I.Styling.Filled,iconPosition:ic.I.IconPosition.Right,icon:(0,z.jsx)(Wy.Z,{name:Gpe.Z}),onClick:S,testId:"tax-rules-submit-button"})})]})]}),t.portables&&N()]}),!t.portables&&(0,z.jsxs)("div",{children:[(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),N()]})]}):null})),TaxpayerEducation:wT((()=>{const e=U("taxpayer_education"),t=Bg(),[i,n]=(0,m.useState)(Ne.Idle),[s,r]=(0,m.useState)(null);(0,m.useEffect)((()=>{(async()=>{n(Ne.Pending);const e=await(0,Fe.bU_)();if("errors"in e)return void n(Ne.Failure);const t=gce(e.education);n(Ne.Success),r(t)})()}),[]);return(0,z.jsx)("div",{className:"medium-container u-flexbox u-flex-direction-column",children:i===Ne.Pending?(0,z.jsx)(Mp,{testId:"taxpayer-education-loader"}):i===Ne.Failure?(0,z.jsx)(sw,{}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(gt.Z,{styling:gt.Z.Styling.Tight,children:[(0,z.jsx)(x.Z,{size:x.Z.Size.Large}),(0,z.jsx)("div",{className:"u-flexbox u-justify-content-center",children:(0,z.jsx)(xt.Z,{type:xt.Z.Type.Title,text:e("header.title"),bold:!0})})]}),(0,z.jsxs)("div",{className:"u-flex-direction-row",children:[(0,z.jsx)(gt.Z,{styling:gt.Z.Styling.Wide,children:(0,z.jsx)(xt.Z,{html:!0,text:e("body.information")})}),s?s.sections.map((e=>{const i=t?e.darkIconUrl:e.iconUrl;return(0,z.jsx)(gt.Z,{title:e.title,body:(0,z.jsx)(xt.Z,{html:!0,text:e.body}),prefix:(0,z.jsx)(Kl.U,{src:i,size:Kl.U.Size.Medium,alt:"",testId:"taxpayer-education-section-icon"}),styling:gt.Z.Styling.Default},e.title)})):null]}),(0,z.jsx)("div",{className:"u-flex-direction-row u-overflow-y-unset",children:(0,z.jsx)(gt.Z,{children:(0,z.jsx)(ic.I,{type:ic.I.Type.Button,text:e("actions.start"),styling:ic.I.Styling.Filled,testId:"taxpayer-education-start-button",onClick:()=>(0,ls.ru)(Me.rHE)})})})]})})})),AppPromo:wT((()=>{const e=U(),t=Ql()?"_dark":"";return(0,z.jsxs)("main",{className:"landing__section u-padding-vertical-none",children:[(0,z.jsx)("div",{className:"landing__section-content landing__section-content--wide",children:(0,z.jsxs)("div",{className:"app__row",children:[(0,z.jsx)("div",{className:"app__cell",children:(0,z.jsxs)("div",{className:"landing__section-entry",children:[(0,z.jsx)(xt.Z,{as:"h1",children:(0,z.jsx)("span",{className:"c-text--responsive-small-heading",children:e("app_promo.page_title")})}),(0,z.jsx)(x.Z,{}),(0,z.jsx)(xt.Z,{as:"p",children:(0,z.jsx)("span",{className:"c-text--responsive-small-body",children:e("app_promo.body")})}),(0,z.jsx)(x.Z,{size:x.Z.Size.X2Large}),(0,z.jsx)(FY,{})]})}),(0,z.jsx)("div",{className:"app__cell",children:(0,z.jsx)("img",{className:"app__photo",src:"".concat(Be.cJ,"/app/new/_rebrand/fr/apps").concat(t,".png"),alt:""})})]})}),(0,z.jsx)(x.Z,{size:x.Z.Size.X4Large})]})}))}),ps("react:reload",(()=>{d().reactOnRailsPageLoaded()}))}},a={};function o(e){var t=a[e];if(void 0!==t)return t.exports;var i=a[e]={id:e,loaded:!1,exports:{}};return r[e].call(i.exports,i,i.exports,o),i.loaded=!0,i.exports}o.m=r,o.amdO={},e=[],o.O=(t,i,n,s)=>{if(!i){var r=1/0;for(d=0;d<e.length;d++){for(var[i,n,s]=e[d],a=!0,l=0;l<i.length;l++)(!1&s||r>=s)&&Object.keys(o.O).every((e=>o.O[e](i[l])))?i.splice(l--,1):(a=!1,s<r&&(r=s));if(a){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[i,n,s]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},i=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var s=Object.create(null);o.r(s);var r={};t=t||[null,i({}),i([]),i(i)];for(var a=2&n&&e;"object"==typeof a&&!~t.indexOf(a);a=i(a))Object.getOwnPropertyNames(a).forEach((t=>r[t]=()=>e[t]));return r.default=()=>e,o.d(s,r),s},o.d=(e,t)=>{for(var i in t)o.o(t,i)&&!o.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce(((t,i)=>(o.f[i](e,t),t)),[])),o.u=e=>e+"-9db2be66c70cc3e5319f.chunk.js",o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},s="core-web:",o.l=(e,t,i,r)=>{if(n[e])n[e].push(t);else{var a,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==s+i){a=u;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,o.nc&&a.setAttribute("nonce",o.nc),a.setAttribute("data-webpack",s+i),a.src=e),n[e]=[t];var m=(t,i)=>{a.onerror=a.onload=null,clearTimeout(p);var s=n[e];if(delete n[e],a.parentNode&&a.parentNode.removeChild(a),s&&s.forEach((e=>e(i))),t)return t(i)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=m.bind(null,a.onerror),a.onload=m.bind(null,a.onload),l&&document.head.appendChild(a)}},o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),o.j=335,o.p="https://static.vinted.com/webpack/",(()=>{var e={335:0};o.f.j=(t,i)=>{var n=o.o(e,t)?e[t]:void 0;if(0!==n)if(n)i.push(n[2]);else{var s=new Promise(((i,s)=>n=e[t]=[i,s]));i.push(n[2]=s);var r=o.p+o.u(t),a=new Error;o.l(r,(i=>{if(o.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var s=i&&("load"===i.type?"missing":i.type),r=i&&i.target&&i.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+r+")",a.name="ChunkLoadError",a.type=s,a.request=r,n[1](a)}}),"chunk-"+t,t)}},o.O.j=t=>0===e[t];var t=(t,i)=>{var n,s,[r,a,l]=i,c=0;if(r.some((t=>0!==e[t]))){for(n in a)o.o(a,n)&&(o.m[n]=a[n]);if(l)var d=l(o)}for(t&&t(i);c<r.length;c++)s=r[c],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(d)},i=self.webpackChunkcore_web=self.webpackChunkcore_web||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),o.nc=void 0;var l=o.O(void 0,[277],(()=>o(33319)));l=o.O(l)})();
//# sourceMappingURL=app-bundle-fb543177f7900fb2a0d8.js.map